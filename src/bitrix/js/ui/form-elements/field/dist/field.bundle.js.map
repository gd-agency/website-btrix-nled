{"version":3,"file":"field.bundle.js","sources":["../src/error-collection.js","../src/visitors/base-settings-visitor.js","../src/base-settings-element.js","../src/settings-field.js","../src/settings-row.js","../src/settings-section.js","../src/base-settings-page.js","../src/visitors/recursive-filtering-visitor.js","../src/visitors/ascending-opening-visitor.js","../src/tab-field.js","../src/tabs-field.js"],"sourcesContent":["import { Loc } from 'main.core';\nimport {OrderedArray} from \"main.core.collections\";\n\nexport class ErrorCollection extends OrderedArray\n{\n\tconstructor(errors: Array = [], comparator: Function = null)\n\t{\n\t\tsuper(comparator);\n\n\t\tthis.addItems(errors);\n\t}\n\n\taddItems(items: [T])\n\t{\n\t\tfor (const item of items)\n\t\t{\n\t\t\tthis.add(item);\n\t\t}\n\t}\n\n\tmerge(errorCollection: ErrorCollection): ErrorCollection\n\t{\n\t\tthis.addItems(errorCollection.getAll());\n\n\t\treturn this;\n\t}\n\n\tstatic showSystemError(text: string): void\n\t{\n\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\tcontent: text,\n\t\t\tposition: 'bottom-right',\n\t\t\tcategory: 'menu-self-item-popup',\n\t\t\tautoHideDelay: 3000,\n\t\t});\n\t}\n}","import {EventEmitter} from 'main.core.events';\n\nexport class BaseSettingsVisitor extends EventEmitter\n{\n\tstatic instances = [];\n\n\tconstructor(params)\n\t{\n\t\tsuper(params);\n\t\tthis.setEventNamespace('BX.UI.FormElement.Field');\n\t}\n\n\tvisitSettingsElement(settingsElement)\n\t{\n\n\t}\n}\n","import {ErrorCollection} from \"./error-collection\";\nimport {BaseSettingsVisitor} from './visitors/base-settings-visitor';\nimport {EventEmitter} from 'main.core.events';\nimport {Dom, Type} from 'main.core';\n\nexport class BaseSettingsElement extends EventEmitter\n{\n\t#errorCollection: ErrorCollection\n\t#parentElement: ?BaseSettingsElement;\n\t#childrenElements: [BaseSettingsElement];\n\n\tconstructor(params)\n\t{\n\t\tparams = Type.isNil(params) ? {} : params;\n\t\tsuper();\n\t\tthis.#parentElement = null;\n\t\tthis.setEventNamespace('BX.UI.FormElement.Field');\n\t\tif (!Type.isNil(params.parent))\n\t\t{\n\t\t\tthis.setParentElement(params.parent);\n\t\t}\n\t\tthis.#childrenElements = [];\n\t\tif (!Type.isNil(params.children))\n\t\t{\n\t\t\tthis.setChildrenElements(params.children);\n\t\t}\n\t\tthis.addChild(params.child);\n\t\tthis.#errorCollection = new ErrorCollection();\n\t}\n\n\tgetErrorCollection(): ErrorCollection\n\t{\n\t\treturn this.#errorCollection;\n\t}\n\n\tsetErrorCollection(errorCollection: ErrorCollection): void\n\t{\n\t\tthis.#errorCollection.merge(errorCollection);\n\n\t\tthis.#parentElement?.setErrorCollection(this.#errorCollection);\n\t}\n\n\tgetParentElement(): ?BaseSettingsElement\n\t{\n\t\treturn this.#parentElement;\n\t}\n\n\tgetChildrenElements(): [BaseSettingsElement]\n\t{\n\t\treturn this.#childrenElements;\n\t}\n\n\tsetParentElement(parent: BaseSettingsElement): BaseSettingsElement\n\t{\n\t\tif (parent instanceof BaseSettingsElement)\n\t\t{\n\t\t\tthis.#parentElement = parent;\n\t\t\tthis.#parentElement.addChild(this);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tunsetParentElement()\n\t{\n\t\tthis.#parentElement = null;\n\t}\n\n\tsetChildrenElements(value: Array<BaseSettingsElement>)\n\t{\n\t\tfor (let element of value)\n\t\t{\n\t\t\tthis.addChild(element);\n\t\t}\n\t}\n\n\taddChild(child: BaseSettingsElement)\n\t{\n\t\tif (child instanceof BaseSettingsElement)\n\t\t{\n\t\t\tif (!this.#childrenElements.includes(child))\n\t\t\t{\n\t\t\t\tthis.#childrenElements.push(child);\n\t\t\t}\n\t\t\tif (Type.isNil(child.getParentElement()))\n\t\t\t{\n\t\t\t\tchild.setParentElement(this);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveChild(child: BaseSettingsElement)\n\t{\n\t\tif (child instanceof BaseSettingsElement)\n\t\t{\n\t\t\tthis.#childrenElements = this.#childrenElements\n\t\t\t\t.filter((element) => element !== child)\n\t\t\t;\n\t\t\tchild.unsetParentElement();\n\t\t}\n\t}\n\n\t//#region \"Renderable\" Interface\n\n\trender(): HTMLElement\n\t{\n\t\treturn '';\n\t}\n\n\trenderErrors(): HTMLElement\n\t{\n\t\treturn '';\n\t}\n\n\taccept(visitor: BaseSettingsVisitor)\n\t{\n\t\tvisitor.visitSettingsElement(this);\n\t}\n\n\thighlight(): boolean\n\t{\n\t\treturn false;\n\t}\n\n\thighlightElement(element: HTMLElement): void\n\t{\n\t\tDom.addClass(element, '--founded-item');\n\t\tsetTimeout(() => {\n\t\t\tDom.removeClass(element, '--founded-item');\n\t\t\tDom.addClass(element, '--after-founded-item');\n\t\t\tsetTimeout(() => {\n\t\t\t\tDom.removeClass(element, '--after-founded-item');\n\t\t\t}, 5000);\n\t\t}, 0);\n\t}\n\n\t//#endregion \"Renderable\" Interface\n}\n","import { BaseSettingsElement } from './base-settings-element';\nimport { BaseField } from 'ui.form-elements.view';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { ErrorCollection } from './error-collection';\n\nexport class SettingsField extends BaseSettingsElement\n{\n\t#fieldView: BaseField;\n\n\tconstructor(params)\n\t{\n\t\tsuper(params);\n\t\tif (!(params.fieldView instanceof BaseField))\n\t\t{\n\t\t\tthrow new Error(`Unexpected field type, expected \"BaseField\"`);\n\t\t}\n\t\tthis.#fieldView = params.fieldView;\n\t\tEventEmitter.subscribe('BX.UI.FormElement.Field:onFailedSave', this.#onFailedSave.bind(this));\n\t}\n\n\tgetFieldView(): BaseField\n\t{\n\t\treturn this.#fieldView;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn this.getFieldView().render();\n\t}\n\n\trenderErrors(): HTMLElement\n\t{\n\t\tthis.getFieldView().setErrors(this.getErrorCollection().getAll());\n\n\t\treturn this.getFieldView().renderErrors();\n\t}\n\n\t#extractErrorsFromEvent(event: BaseEvent): Array<String>\n\t{\n\t\tlet errors = {};\n\t\tfor (const type in event.data.errors)\n\t\t{\n\t\t\terrors = { ...errors, ...event.data.errors[type] };\n\t\t}\n\n\t\treturn errors[this.getFieldView().getName()] ?? [];\n\t}\n\n\t#onFailedSave(event: BaseEvent)\n\t{\n\t\tlet fieldErrors = this.#extractErrorsFromEvent(event);\n\t\tthis.getErrorCollection().clear();\n\t\tthis.setErrorCollection(new ErrorCollection(fieldErrors));\n\t\tthis.renderErrors();\n\t}\n}","import {Dom, Type} from 'main.core';\nimport { BaseSettingsElement } from './base-settings-element';\nimport {Row, SeparatorRow} from 'ui.section';\n\nexport class SettingsRow extends BaseSettingsElement\n{\n\t#rowView: Row;\n\n\tconstructor(params)\n\t{\n\t\tsuper(params);\n\t\tthis.#rowView = params.row instanceof Row || params.row instanceof SeparatorRow\n\t\t\t? params.row : new Row(Type.isPlainObject(params.row) ? params.row : {})\n\t\t;\n\t}\n\n\tgetRowView(): Row\n\t{\n\t\treturn this.#rowView;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tfor (let element of this.getChildrenElements())\n\t\t{\n\t\t\tthis.getRowView().append(element.render());\n\t\t}\n\n\t\treturn this.getRowView().render();\n\t}\n\n\thighlight(): boolean\n\t{\n\t\tthis.highlightElement(this.getRowView().render());\n\n\t\treturn true;\n\t}\n}","import { BaseSettingsElement } from './base-settings-element';\nimport { Section } from 'ui.section';\nimport { Dom, Type } from 'main.core';\n\nexport class SettingsSection extends BaseSettingsElement\n{\n\t#sectionView: Section;\n\t#sectionSort: number = 100;\n\n\tconstructor(params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.#sectionView = params.section instanceof Section\n\t\t\t? params.section : new Section(Type.isPlainObject(params.section) ? params.section : {})\n\t\t;\n\t\tthis.#sectionSort = Type.isNumber(params.sort) ? params.sort : 100;\n\t}\n\n\tgetSectionView(): Section\n\t{\n\t\treturn this.#sectionView;\n\t}\n\n\tgetSectionSort(): number\n\t{\n\t\treturn this.#sectionSort;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tfor (let element of this.getChildrenElements())\n\t\t{\n\t\t\tthis.getSectionView().append(element.render());\n\t\t}\n\n\t\treturn this.getSectionView().render();\n\t}\n\n\trenderTo(targetNode: HTMLElement): HTMLElement\n\t{\n\t\treturn Dom.append(this.render(), targetNode);\n\t}\n\n\thighlight(): boolean\n\t{\n\t\tthis.highlightElement(this.getSectionView().render());\n\n\t\treturn true;\n\t}\n}","import { Dom, Tag, Type, Loc, Runtime } from 'main.core';\nimport { HelpMessage, Row } from 'ui.section';\nimport { BaseField } from 'ui.form-elements.view';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\nimport { BaseSettingsElement } from './base-settings-element';\nimport { ErrorCollection } from './error-collection';\nimport { SettingsField } from './settings-field';\nimport { SettingsRow } from './settings-row';\nimport { SettingsSection } from './settings-section';\n\nexport class BaseSettingsPage extends BaseSettingsElement\n{\n\tfields: Object = {};\n\t#content: ?HTMLElement;\n\t#page: ?HTMLElement;\n\ttitlePage: string = '';\n\tdescriptionPage: string = '';\n\t#data: ?Object = null;\n\t/**\n\t * @type {?Analytic}\n\t */\n\t#analytic: ?Object;\n\t#subPage: Map = new Map;\n\t#subPageExtensions: Array = [];\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Intranet.Settings');\n\t}\n\n\tgetAnalytic(): ?Object\n\t{\n\t\treturn this.#analytic;\n\t}\n\n\t/**\n\t * @param analytic\n\t */\n\tsetAnalytic(analytic: ?Object): void\n\t{\n\t\tthis.#analytic = analytic;\n\t}\n\n\thasValue(key: string): boolean\n\t{\n\t\tif (Type.isNil(this.#data) || !Type.isObject(this.#data))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !Type.isNil(this.#data[key]);\n\t}\n\n\tgetValue(key: string): ?any\n\t{\n\t\tif (!this.hasValue(key))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.#data[key];\n\t}\n\n\thasData(): boolean\n\t{\n\t\treturn this.#data !== null;\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn '';\n\t}\n\n\tgetPage(): HTMLElement\n\t{\n\t\tif (this.#page)\n\t\t{\n\t\t\treturn this.#page;\n\t\t}\n\n\t\tif (Type.isNil(this.#data))\n\t\t{\n\t\t\tthis.#fetchData();\n\t\t}\n\n\t\tthis.#page = Tag.render`\n\t\t\t<div id=\"${this.getType()}-page-wrapper\">\n\t\t\t\t${Type.isNil(this.#data) ? LoaderPage.getWrapper() : this.render()}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#page;\n\t}\n\n\treload()\n\t{\n\t\tDom.remove(this.render());\n\t\tthis.#content = null;\n\t\tthis.#data = null;\n\t\tDom.append(LoaderPage.getWrapper(), this.getPage());\n\t\tthis.#fetchData();\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#content)\n\t\t{\n\t\t\treturn this.#content;\n\t\t}\n\n\t\tthis.#content = Tag.render`\n\t\t\t<div>\n\t\t\t\t<div class=\"intranet-settings__page-header_wrap\">\n\t\t\t\t\t<div class=\"intranet-settings__page-header_inner\">\n\t\t\t\t\t\t<h1 class=\"intranet-settings__page-header\">${this.titlePage}</h1>\n\t\t\t\t\t\t<p class=\"intranet-settings__page-header_desc\">${this.descriptionPage}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"intranet-settings__header-widget\"></div>\n\t\t\t\t</div>\n\t\t\t\t<form id=\"form-${this.getType()}-page\" onsubmit=\"return false;\">\n\t\t\t\t\t<div class=\"intranet-settings__content-box\"></div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t`;\n\t\tconst headerWidget = this.headerWidgetRender();\n\t\tconst headerWidgetWrapper = this.#content.querySelector('.intranet-settings__header-widget');\n\t\tif (headerWidget)\n\t\t{\n\t\t\tDom.append(headerWidget, headerWidgetWrapper);\n\t\t\tDom.addClass(this.#content.querySelector('.intranet-settings__page-header_wrap'), '--with-header-widget')\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.remove(headerWidgetWrapper);\n\t\t}\n\n\t\tconst formNode = this.#content.querySelector('form');\n\t\tconst contentNode = formNode.querySelector('.intranet-settings__content-box');\n\n\t\tformNode.addEventListener('change', () => {\n\t\t\tthis.emit('change', { source: this });\n\t\t});\n\n\t\tthis.appendSections(contentNode);\n\n\t\tEventEmitter.emit(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t'BX.Intranet.Settings:onContentFetched', {\n\t\t\t\tpage: this,\n\t\t\t},\n\t\t);\n\n\t\treturn this.#content;\n\t}\n\n\thasContent(): boolean\n\t{\n\t\treturn !Type.isNil(this.#content);\n\t}\n\n\theaderWidgetRender(): HTMLElement\n\t{\n\t\treturn '';\n\t}\n\n\t#fetchData()\n\t{\n\t\t(new Promise((resolve, reject) => {\n\t\t\tRuntime\n\t\t\t\t.loadExtension(this.#subPageExtensions)\n\t\t\t\t.then((exports) => {\n\t\t\t\t\t// 1. collect data by Event for old extensions\n\t\t\t\t\tEventEmitter.emit(\n\t\t\t\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t\t\t'BX.Intranet.Settings:onPageFetched:' + this.getType(),\n\t\t\t\t\t\t\tevent\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.forEach((subPage: BaseSettingsPage) => this.#subPage.set(subPage.getType(), subPage))\n\t\t\t\t\t;\n\t\t\t\t\t// 2. collect data by export for new extensions\n\t\t\t\t\tObject.values(exports).forEach((desirableClass) => {\n\t\t\t\t\t\tif (Type.isObject(desirableClass))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (desirableClass.prototype instanceof BaseSettingsPage)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst subPage = new desirableClass();\n\t\t\t\t\t\t\t\tthis.#subPage.set(subPage.getType(), subPage);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (desirableClass instanceof BaseSettingsPage)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst subPage = desirableClass;\n\t\t\t\t\t\t\t\tthis.#subPage.set(subPage.getType(), subPage);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tconst event = new BaseEvent();\n\t\t\t\t\tconst eventResult = EventEmitter\n\t\t\t\t\t\t.emit(this, 'fetch', event)\n\t\t\t\t\t\t.some((ajaxPromise: Promise) => {\n\t\t\t\t\t\t\tif (ajaxPromise instanceof Promise)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tajaxPromise.then(resolve, reject);\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t\tif (eventResult !== true)\n\t\t\t\t\t{\n\t\t\t\t\t\treject({error: 'The handler for fetching page data was not found. '});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t;\n\t\t})).then(this.onSuccessDataFetched.bind(this), this.onFailDataFetched.bind(this));\n\t}\n\n\tonSuccessDataFetched(response)\n\t{\n\t\tthis.setData(response.data);\n\t}\n\n\tsetData(data): void\n\t{\n\t\tthis.#data = data;\n\n\t\tthis.#subPage.forEach((subPage: BaseSettingsPage) => {\n\t\t\tsubPage.setData(data);\n\t\t});\n\n\t\tif (this.#page)\n\t\t{\n\t\t\tDom.clean(this.#page);\n\t\t\tthis.#content = null;\n\t\t\tDom.append(this.render(), this.#page);\n\t\t}\n\n\t\tEventEmitter.emit(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t'BX.Intranet.Settings:onPageComplete', {\n\t\t\t\tpage: this,\n\t\t\t},\n\t\t);\n\t}\n\n\tonFailDataFetched(response): void\n\t{\n\t\tErrorCollection.showSystemError(Loc.getMessage('INTRANET_SETTINGS_ERROR_FETCH_DATA'));\n\t}\n\n\tgetFormNode(): ?HTMLElement\n\t{\n\t\treturn this.render().querySelector('form');\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tconst sections = this.getSections();\n\n\t\tthis.#subPage.forEach((subPage: BaseSettingsPage) => {\n\t\t\tsections.push(...subPage.getSections());\n\t\t});\n\n\t\tsections\n\t\t\t.sort((sectionA: SettingsSection, sectionB: SettingsSection) => sectionA.getSectionSort() - sectionB.getSectionSort())\n\t\t\t.forEach((section: SettingsSection) => {\n\t\t\t\tcontentNode.appendChild(\n\t\t\t\t\tsection.render()\n\t\t\t\t)\n\t\t\t})\n\t\t;\n\t}\n\n\texpandPage(subPageExtensions: array): this\n\t{\n\t\tif (Type.isArray(subPageExtensions))\n\t\t{\n\t\t\tthis.#subPageExtensions.push(...subPageExtensions);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tgetSections(): SettingsSection[]\n\t{\n\t\treturn [];\n\t}\n\n\thelpMessageProviderFactory(message: ?HTMLElement): function\n\t{\n\t\tmessage = Type.isNil(message) ? Loc.getMessage('INTRANET_SETTINGS_FIELD_HELP_MESSAGE') : message;\n\n\t\treturn (id: string, node: HTMLElement) => {\n\t\t\treturn new HelpMessage(id, node, message);\n\t\t};\n\t}\n\n\tstatic addToSectionHelper(fieldView: BaseField, sectionSettings: SettingsSection, row: Row = null): void\n\t{\n\t\tlet settingsField = new SettingsField({\n\t\t\tfieldView: fieldView,\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: row,\n\t\t\tchild: settingsField,\n\t\t\tparent: sectionSettings,\n\t\t});\n\t}\n}\n\nclass LoaderPage\n{\n\tstatic #wrapper: HTMLElement;\n\n\tstatic getWrapper()\n\t{\n\t\tif (LoaderPage.#wrapper)\n\t\t{\n\t\t\treturn LoaderPage.#wrapper;\n\t\t}\n\n\t\tLoaderPage.#wrapper = Tag.render`\n\t\t\t<div class=\"intranet-settings__loader\"></div>\n\t\t`;\n\t\t// const loader = new Loader({target: LoaderPage.#wrapper, size: 200});\n\t\t// loader.show();\n\n\t\treturn LoaderPage.#wrapper;\n\t}\n}\n","import {BaseSettingsVisitor} from './base-settings-visitor';\nimport {BaseSettingsElement} from '../base-settings-element';\n\nexport class RecursiveFilteringVisitor extends BaseSettingsVisitor\n{\n\t#filterCallback = null;\n\t#result: BaseSettingsElement[] = [];\n\n\tsetFilter(filterStrategy): RecursiveFilteringVisitor\n\t{\n\t\tthis.#filterCallback = filterStrategy;\n\t\treturn this;\n\t}\n\n\t#do(element: BaseSettingsElement): boolean\n\t{\n\t\tif (typeof this.#filterCallback === 'function')\n\t\t{\n\t\t\treturn this.#filterCallback(element) === true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\trestart(startElement: BaseSettingsElement): BaseSettingsElement[]\n\t{\n\t\tthis.#result = [];\n\t\tthis.visitSettingsElement(startElement);\n\t\treturn this.#result;\n\t}\n\n\tvisitSettingsElement(element: BaseSettingsElement): void\n\t{\n\t\tif (this.#do(element))\n\t\t{\n\t\t\tthis.#result.push(element);\n\t\t}\n\t\tif (element.getChildrenElements().length > 0)\n\t\t{\n\t\t\telement\n\t\t\t\t.getChildrenElements()\n\t\t\t\t.forEach((childElement: BaseSettingsElement) => {\n\t\t\t\t\tthis.visitSettingsElement(childElement);\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t}\n\n\tstatic startFrom(startElement: BaseSettingsElement, filterStrategy): BaseSettingsElement[]\n\t{\n\t\treturn this.getInstance()\n\t\t\t.setFilter(filterStrategy)\n\t\t\t.restart(startElement)\n\t\t;\n\t}\n\n\tstatic getInstance(): RecursiveFilteringVisitor\n\t{\n\t\tif (!this.instance)\n\t\t{\n\t\t\tthis.instance = new this();\n\t\t}\n\n\t\treturn this.instance;\n\t}\n}\n","import { TabField, TabsField } from 'ui.form-elements.field';\nimport { SettingsRow } from '../settings-row';\nimport { SettingsSection } from '../settings-section';\nimport {BaseSettingsVisitor} from './base-settings-visitor';\nimport {BaseSettingsElement} from '../base-settings-element';\nimport {Dom} from \"main.core\";\n\nexport class AscendingOpeningVisitor extends BaseSettingsVisitor\n{\n\t#filterCallback = null;\n\t#result: BaseSettingsElement[] = [];\n\tcolored;\n\n\tsetFilter(filterStrategy): this\n\t{\n\t\tthis.#filterCallback = filterStrategy;\n\t\treturn this;\n\t}\n\n\t#do(element: BaseSettingsElement): boolean\n\t{\n\t\tif (typeof this.#filterCallback === 'function')\n\t\t{\n\t\t\treturn this.#filterCallback(element) === true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\trestart(startElement: BaseSettingsElement): BaseSettingsElement[]\n\t{\n\t\tthis.#result = [];\n\t\tthis.visitSettingsElement(startElement);\n\t\treturn this.#result;\n\t}\n\n\tvisitSettingsElement(element: BaseSettingsElement): void\n\t{\n\t\tif (this.#do(element))\n\t\t{\n\t\t\tthis.#result.push(element);\n\t\t}\n\n\t\tif (element.getParentElement())\n\t\t{\n\t\t\tthis.visitSettingsElement(element.getParentElement());\n\t\t}\n\t}\n\n\tstatic startFrom(startElement: BaseSettingsElement, filterStrategy): BaseSettingsElement[]\n\t{\n\t\treturn this.getInstance()\n\t\t\t.setFilter(filterStrategy)\n\t\t\t.restart(startElement);\n\t}\n\n\tstatic getInstance(): AscendingOpeningVisitor\n\t{\n\t\tif (!this.instance)\n\t\t{\n\t\t\tthis.instance = new this();\n\t\t}\n\n\t\treturn this.instance;\n\t}\n}\n","import { BaseSettingsElement } from './base-settings-element';\nimport { Tab, Tabs } from 'ui.tabs';\nimport type { TabOptionsType } from 'ui.tabs';\nimport {Dom} from \"main.core\";\nimport {TabsField} from \"ui.form-elements.field\";\n\nexport type TabFieldType = {\n\tparent: BaseSettingsElement,\n\ttabsOptions?: TabOptionsType,\n\tfieldView?: Tab\n};\n\nexport class TabField extends BaseSettingsElement\n{\n\t#fieldView: Tab;\n\n\tconstructor(params: TabFieldType)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setParentElement(params.parent);\n\n\t\tif (params.fieldView instanceof Tab)\n\t\t{\n\t\t\tthis.#fieldView = params.fieldView;\n\t\t}\n\t\telse if (params.tabsOptions)\n\t\t{\n\t\t\tthis.#fieldView = new Tab(params.tabsOptions);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new Error('Tab field in Settings is not correct.');\n\t\t}\n\n\t\tif (params.parent.getFieldView() instanceof Tabs)\n\t\t{\n\t\t\tparams.parent.getFieldView().addItem(this.#fieldView);\n\t\t}\n\n\t\tif (this.getParentElement() instanceof TabsField)\n\t\t{\n\t\t\tthis.#fieldView.subscribe('changeTab', () => {\n\t\t\t\tthis.getParentElement().activateTab(this);\n\t\t\t});\n\t\t}\n\t}\n\n\tgetFieldView(): Tab\n\t{\n\t\treturn this.#fieldView;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tfor (const element of this.getChildrenElements())\n\t\t{\n\t\t\tDom.append(element.render(), this.getFieldView().getBodyDataContainer());\n\t\t}\n\n\t\treturn this.getFieldView().getBody();\n\t}\n\n\thighlight(): boolean\n\t{\n\t\tthis.highlightElement(this.getFieldView().getBody());\n\t\tthis.highlightElement(this.getFieldView().getHeader());\n\n\t\treturn true;\n\t}\n}","import {BaseSettingsElement} from \"./base-settings-element\";\nimport {TabField} from \"./tab-field\";\nimport { Tabs, Tab } from 'ui.tabs';\nimport type { TabsOptionsType } from 'ui.tabs';\n\nexport type TabsFieldType = {\n\tparent: ?BaseSettingsElement,\n\ttabsOptions: ?TabsOptionsType\n};\n\nexport class TabsField extends BaseSettingsElement\n{\n\t#fieldView: Tabs\n\n\tconstructor(params: TabsFieldType)\n\t{\n\t\tsuper(params);\n\t\tthis.setParentElement(params.parent);\n\n\t\tthis.#fieldView = new Tabs(params.tabsOptions);\n\t\tthis.#fieldView.getItems().forEach(\n\t\t\t(tab: Tab) => {\n\t\t\t\tnew TabField({\n\t\t\t\t\tparent: this,\n\t\t\t\t\tfieldView: tab\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}\n\n\tactivateTab(tabField: TabField, withAnimation: boolean = true)\n\t{\n\t\tthis.getFieldView().activateItem(tabField.getFieldView(), withAnimation);\n\t\ttabField.render();\n\t}\n\n\tgetFieldView(): Tabs\n\t{\n\t\treturn this.#fieldView;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn this.#fieldView.getContainer();\n\t}\n}"],"names":["ErrorCollection","errors","comparator","addItems","items","item","add","errorCollection","getAll","text","top","BX","UI","Notification","Center","notify","content","position","category","autoHideDelay","OrderedArray","BaseSettingsVisitor","params","setEventNamespace","settingsElement","EventEmitter","BaseSettingsElement","Type","isNil","parent","setParentElement","children","setChildrenElements","addChild","child","merge","setErrorCollection","value","element","includes","push","getParentElement","filter","unsetParentElement","visitor","visitSettingsElement","Dom","addClass","setTimeout","removeClass","SettingsField","_classPrivateFieldInitSpec","fieldView","BaseField","Error","subscribe","bind","getFieldView","render","setErrors","getErrorCollection","renderErrors","event","type","data","getName","fieldErrors","clear","SettingsRow","row","Row","SeparatorRow","isPlainObject","getChildrenElements","getRowView","append","highlightElement","SettingsSection","section","Section","isNumber","sort","getSectionView","targetNode","BaseSettingsPage","_classPrivateMethodInitSpec","Map","analytic","key","isObject","hasValue","_classPrivateMethodGet","Tag","getType","LoaderPage","getWrapper","remove","getPage","titlePage","descriptionPage","headerWidget","headerWidgetRender","headerWidgetWrapper","querySelector","formNode","contentNode","addEventListener","emit","source","appendSections","GLOBAL_TARGET","page","response","setData","forEach","subPage","clean","showSystemError","Loc","getMessage","sections","getSections","sectionA","sectionB","getSectionSort","appendChild","subPageExtensions","isArray","message","id","node","HelpMessage","sectionSettings","settingsField","Promise","resolve","reject","Runtime","loadExtension","then","exports","set","Object","values","desirableClass","prototype","BaseEvent","eventResult","some","ajaxPromise","error","onSuccessDataFetched","onFailDataFetched","RecursiveFilteringVisitor","filterStrategy","startElement","length","childElement","getInstance","setFilter","restart","instance","AscendingOpeningVisitor","TabField","Tab","tabsOptions","Tabs","addItem","TabsField","activateTab","getBodyDataContainer","getBody","getHeader","getItems","tab","tabField","withAnimation","activateItem","getContainer"],"mappings":"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"}