BITRIX39   407|/aspro.optimus/include.php|d3965500<?

CModule::AddAutoloadClasses(
	'aspro.optimus',
	array(
		'COptimusCache' => 'classes/general/COptimusCache.php',
		'COptimus' => 'classes/general/COptimus.php',
		'COptimusTools' => 'classes/general/COptimusTools.php',
		'Aspro\\Solution\\CAsproMarketing' => 'classes/general/CAsproMarketing.php',
	)
);

// include common aspro functions
//include_once __DIR__ .'/classes/general/COptimusCache.php';
?>42   9639|/aspro.optimus/functions.php|56aec0fa<?
CModule::IncludeModule("main");
CModule::IncludeModule("iblock");

set_time_limit(0);

if(!function_exists("ClearAllSitesCacheComponents")){
	function ClearAllSitesCacheComponents($arComponentsNames){
		if($arComponentsNames && is_array($arComponentsNames)){
			global $CACHE_MANAGER;
			$arSites = array();
			$rsSites = CSite::GetList($by = "sort", $order = "desc", array("ACTIVE" => "Y"));
			while($arSite = $rsSites->Fetch()){
			  $arSites[] = $arSite;
			}
			foreach($arComponentsNames as $componentName){
				foreach($arSites as $arSite){
					CBitrixComponent::clearComponentCache($componentName, $arSite["ID"]);
				}
			}
		}
	}
}

if(!function_exists("ClearAllSitesCacheDirs")){
	function ClearAllSitesCacheDirs($arDirs){
		if($arDirs && is_array($arDirs)){
			foreach($arDirs as $dir){
				$obCache = new CPHPCache();
				$obCache->CleanDir("", $dir);
			}
		}
	}
}

if(!function_exists("GetIBlocks")){
	function GetIBlocks(){
		$arRes = array();
		$dbRes = CIBlock::GetList(array(), array("ACTIVE" => "Y"));
		while($item = $dbRes->Fetch()){
			$arRes[$item["LID"]][$item["IBLOCK_TYPE_ID"]][$item["CODE"]][] = $item["ID"];
		}
		return $arRes;
	}
}

if(!function_exists("GetSites")){
	function GetSites(){
		$arRes = array();
		$dbRes = CSite::GetList($by="sort", $order="desc", array("ACTIVE" => "Y"));
		while($item = $dbRes->Fetch()){
			$arRes[$item["LID"]] = $item;
		}
		return $arRes;
	}
}

if(!function_exists("GetCurVersion")){
	function GetCurVersion($versionFile){
		$ver = false;
		if(file_exists($versionFile)){
			$arModuleVersion = array();
			include($versionFile);
			$ver = trim($arModuleVersion["VERSION"]);
		}
		return $ver;
	}
}

if(!function_exists("CreateBakFile")){
	function CreateBakFile($file, $curVersion = CURRENT_VERSION){
		$file = trim($file);
		if(file_exists($file)){
			$arPath = pathinfo($file);
			$backFile = $arPath['dirname'].'/_'.$arPath['basename'].'.back'.$curVersion;
			if(!file_exists($backFile)){
				@copy($file, $backFile);
			}
		}
	}
}

if(!function_exists("RemoveFileFromModuleWizard")){
	function RemoveFileFromModuleWizard($file){
		@unlink($_SERVER['DOCUMENT_ROOT'].'/bitrix/modules/'.MODULE_NAME.'/install/wizards/'.PARTNER_NAME.'/'.MODULE_NAME_SHORT.$file);
		@unlink($_SERVER['DOCUMENT_ROOT'].'/bitrix/wizards/'.PARTNER_NAME.'/'.MODULE_NAME_SHORT.$file);
	}
}

if(!function_exists("RemoveFileFromTemplate")){
	function RemoveFileFromTemplate($file, $bModule = true){
		@unlink($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.$file);
		if($bModule){
			RemoveFileFromModuleWizard('/site/templates/'.TEMPLATE_NAME.$file);
		}
	}
}

if(!function_exists('SearchFilesInPublicRecursive')){
	function SearchFilesInPublicRecursive($dir, $pattern, $flags = 0){
		$arDirExclude = array('bitrix', 'upload');
		$pattern = str_replace('//', '/', str_replace('//', '/', $dir.'/').$pattern);
		$files = glob($pattern, $flags);
		foreach(glob(dirname($pattern).'/*', GLOB_ONLYDIR|GLOB_NOSORT) as $dir){
			if(!in_array(basename($dir), $arDirExclude)){
				$files = array_merge($files, SearchFilesInPublicRecursive($dir, basename($pattern), $flags));
			}
		}
		return $files;
	}
}

if(!function_exists('RemoveOldBakFiles')){
	function RemoveOldBakFiles(){
		$arDirs = $arFiles = array();
		$arDirExclude = array($_SERVER["DOCUMENT_ROOT"].'/bitrix', $_SERVER["DOCUMENT_ROOT"].'/upload');

		if(file_exists($_SERVER["DOCUMENT_ROOT"].'/bitrix/templates/')){
			if($arTemplates = glob($_SERVER["DOCUMENT_ROOT"].'/bitrix/templates/'.PARTNER_NAME.'*', 0)){
				foreach($arTemplates as $templatePath){
					$arDirs[] = str_replace('//', '/', $templatePath.'/');
				}
			}
		}

		if(file_exists($_SERVER["DOCUMENT_ROOT"].'/local/templates/')){
			if($arTemplates = glob($_SERVER["DOCUMENT_ROOT"].'/local/templates/'.PARTNER_NAME.'*', 0)){
				foreach($arTemplates as $templatePath){
					$arDirs[] = str_replace('//', '/', $templatePath.'/');
				}
			}
		}

		if(file_exists($_SERVER["DOCUMENT_ROOT"].'/bitrix/modules/')){
			if($arModules = glob($_SERVER["DOCUMENT_ROOT"].'/bitrix/modules/'.PARTNER_NAME.'*', 0)){
				foreach($arModules as $modulePath){
					$arDirs[] = str_replace('//', '/', $modulePath.'/');
				}
			}
		}

		/*if($arSites = GetSites()){
			foreach($arSites as $siteID => $arSite){
				$arSite['DIR'] = str_replace('//', '/', '/'.$arSite['DIR']);
				if(!strlen($arSite['DOC_ROOT'])){
					$arSite['DOC_ROOT'] = $_SERVER["DOCUMENT_ROOT"];
				}
				$arSite['DOC_ROOT'] = str_replace('//', '/', $arSite['DOC_ROOT'].'/');
				$arDirs[] = str_replace('//', '/', $arSite['DOC_ROOT'].$arSite['DIR']);
			}
		}*/

		$i = 0;

		while($arDirs && ++$i < 10000){
			$dir = array_pop($arDirs);
			$arFiles = array_merge($arFiles, (array)glob($dir.'_*.back*', GLOB_NOSORT));
			foreach((array)glob($dir.'*', GLOB_ONLYDIR|GLOB_NOSORT) as $dir){
				if(strlen($dir) && !in_array($dir, $arDirExclude) && strpos($dir, PARTNER_NAME) !== false){
					$arDirs[] = str_replace('//', '/', $dir.'/');
				}
			}
		}

		if($arFiles){
			foreach($arFiles as $file){
				if(file_exists($file) && !is_dir($file)){
					if(time() - filemtime($file) >= 1209600){ // 14 days
						@unlink($file);
					}
				}
			}
		}
	}
}

if(!function_exists("GetDBcharset")){
	function GetDBcharset(){
		$sql='SHOW VARIABLES LIKE "character_set_database";';
		if(method_exists('\Bitrix\Main\Application', 'getConnection')){
			$db=\Bitrix\Main\Application::getConnection();
			$arResult = $db->query($sql)->fetch();
			return $arResult['Value'];
		}elseif(defined("BX_USE_MYSQLI") && BX_USE_MYSQLI == true){
			if($result = @mysqli_query($sql)){
				$arResult = mysql_fetch_row($result);
				return $arResult[1];
			}
		}elseif($result = @mysql_query($sql)){
			$arResult = mysql_fetch_row($result);
			return $arResult[1];
		}
		return false;
	}
}

if(!function_exists("GetMes")){
	function GetMes($str){
		static $isUTF8;
		if($isUTF8 === NULL){
			$isUTF8 = GetDBcharset() == 'utf8';
		}
		return ($isUTF8 ? iconv('CP1251', 'UTF-8', $str) : $str);
	}
}

if(!function_exists("UpdaterLog")){
	function UpdaterLog($str){
		static $fLOG;
		if($bFirst = !$fLOG){
			$fLOG = $_SERVER['DOCUMENT_ROOT'].'/bitrix/modules/'.MODULE_NAME.'/updaterlog.txt';
		}
		if(is_array($str)){
			$str = print_r($str, 1);
		}
		@file_put_contents($fLOG, ($bFirst ? PHP_EOL : '').date("d.m.Y H:i:s", time()).' '.$str.PHP_EOL, FILE_APPEND);
	}
}

if(!function_exists("InitComposite")){
	function InitComposite($arSites){
		if(class_exists("CHTMLPagesCache")){
			if(method_exists("CHTMLPagesCache", "GetOptions")){
				if($arHTMLCacheOptions = CHTMLPagesCache::GetOptions()){
					if($arHTMLCacheOptions["COMPOSITE"] !== "Y"){
						$arDomains = array();
						if($arSites){
							foreach($arSites as $arSite){
								if(strlen($serverName = trim($arSite["SERVER_NAME"], " \t\n\r"))){
									$arDomains[$serverName] = $serverName;
								}
								if(strlen($arSite["DOMAINS"])){
									foreach(explode("\n", $arSite["DOMAINS"]) as $domain){
										if(strlen($domain = trim($domain, " \t\n\r"))){
											$arDomains[$domain] = $domain;
										}
									}
								}
							}
						}

						if(!$arDomains){
							$arDomains[$_SERVER["SERVER_NAME"]] = $_SERVER["SERVER_NAME"];
						}

						if(!$arHTMLCacheOptions["GROUPS"]){
							$arHTMLCacheOptions["GROUPS"] = array();
						}
						$rsGroups = CGroup::GetList(($by="id"), ($order="asc"), array());
						while($arGroup = $rsGroups->Fetch()){
							if($arGroup["ID"] > 2){
								if(in_array($arGroup["STRING_ID"], array("RATING_VOTE_AUTHORITY", "RATING_VOTE")) && !in_array($arGroup["ID"], $arHTMLCacheOptions["GROUPS"])){
									$arHTMLCacheOptions["GROUPS"][] = $arGroup["ID"];
								}
							}
						}

						$arHTMLCacheOptions["COMPOSITE"] = "Y";
						$arHTMLCacheOptions["DOMAINS"] = array_merge((array)$arHTMLCacheOptions["DOMAINS"], (array)$arDomains);
						CHTMLPagesCache::SetEnabled(true);
						CHTMLPagesCache::SetOptions($arHTMLCacheOptions);
						bx_accelerator_reset();
					}
				}
			}
		}
	}
}

if(!function_exists('IsCompositeEnabled')){
	function IsCompositeEnabled(){
		if(class_exists('CHTMLPagesCache')){
			if(method_exists('CHTMLPagesCache', 'GetOptions')){
				if($arHTMLCacheOptions = CHTMLPagesCache::GetOptions()){
					if(method_exists('CHTMLPagesCache', 'isOn')){
						if (CHTMLPagesCache::isOn()){
							if(isset($arHTMLCacheOptions['AUTO_COMPOSITE']) && $arHTMLCacheOptions['AUTO_COMPOSITE'] === 'Y'){
								return 'AUTO_COMPOSITE';
							}
							else{
								return 'COMPOSITE';
							}
						}
					}
					else{
						if($arHTMLCacheOptions['COMPOSITE'] === 'Y'){
							return 'COMPOSITE';
						}
					}
				}
			}
		}

		return false;
	}
}

if(!function_exists('EnableComposite')){
	function EnableComposite($auto = false){
		if(class_exists('CHTMLPagesCache')){
			if(method_exists('CHTMLPagesCache', 'GetOptions')){
				if($arHTMLCacheOptions = CHTMLPagesCache::GetOptions()){
					$arHTMLCacheOptions['COMPOSITE'] = 'Y';
					$arHTMLCacheOptions['AUTO_UPDATE'] = 'Y'; // standart mode
					$arHTMLCacheOptions['AUTO_UPDATE_TTL'] = '0'; // no ttl delay
					$arHTMLCacheOptions['AUTO_COMPOSITE'] = ($auto ? 'Y' : 'N'); // auto composite mode
					CHTMLPagesCache::SetEnabled(true);
					CHTMLPagesCache::SetOptions($arHTMLCacheOptions);
					bx_accelerator_reset();
				}
			}
		}
	}
}
?>45   15227|/aspro.optimus/updater1.0.7.php|c8c20e1<?
// aspro.optimus 1.0.7 updater
// changed files

// module:
// /include.php - update
// /classes/general/COptimus.php - update
// /classes/general/CAsproMarketing.php - add
// /lang/ru/classes/general/COptimus.php - update
// /lang/en/classes/general/COptimus.php - update
// /lang/ru/classes/general/CAsproMarketing.php - add
// /lang/en/classes/general/CAsproMarketing.php - add
// /admin/options.php - update

// components:
// /oneclickbuy.optimus/component.php
// /oneclickbuy.optimus/script.php
// /oneclickbuy.optimus/lang/ru/script.php
// /catalog.viewed.market/templates/slider/template.php - update
// /social.info.optimus/templates/mail/ - add
// /social.info.optimus/templates/.default/template.php - update

// wizard:

// template:

// /template_styles.css - update
// /css/media.css - update
// /css/style.css - update
// /js/main.js - update

// /components/bitrix/news/shops/.parameters.php - update
// /components/bitrix/news/shops/lang/ru/.parameters.php - update
// /components/bitrix/news/shops/lang/en/.parameters.php - update
// /components/bitrix/news/shops/detail.php - update
// /components/bitrix/news/shops/news.php - update
// /components/bitrix/news.detail/shops/component_epilog.php - update
// /components/bitrix/form.result.new/inline/template.php - update
// /components/bitrix/form.result.new/popup/template.php - update
// /components/bitrix/catalog/main/element.php - update
// /components/bitrix/catalog/main/section.php - update
// /components/bitrix/catalog/main/filter.php - update
// /components/bitrix/catalog/main/.parameters.php - update
// /components/bitrix/catalog/main/lang/ru/.parameters.php - update
// /components/bitrix/catalog.section/catalog_block/template.php - update
// /components/bitrix/catalog.section/catalog_block/script.js - update
// /components/bitrix/catalog.section/catalog_block/script.min.js - update
// /components/bitrix/catalog.section/catalog_block_slider/template.php - update
// /components/bitrix/catalog.section/catalog_block_slider/script.js - update
// /components/bitrix/catalog.section/catalog_block_slider/script.min.js - update
// /components/bitrix/catalog.section/catalog_list/template.php - update
// /components/bitrix/catalog.section/catalog_list/script.js - update
// /components/bitrix/catalog.section/catalog_list/script.min.js - update
// /components/bitrix/catalog.element/main/template.php - update
// /components/bitrix/catalog.element/main/script.js - update
// /components/bitrix/catalog.element/main/script.min.js - update
// /components/bitrix/sale.gift.product/main/script.js - update
// /components/bitrix/sale.gift.product/main/script.min.js - update
// /components/bitrix/sale.gift.product/main/template.php - update
// /components/bitrix/sale.gift.main.products/main/template.php - update
// /components/bitrix/catalog.element/main/component_epilog.php - update
// /components/bitrix/catalog.store.amount/main/result_modifier.php - update
// /components/bitrix/catalog.store.amount/main/template.php - update
// /components/bitrix/main.register/main/template.php - update

// /components/aspro/com.banners.optimus/top_slider_banners/template.php - update

// public:


require_once __DIR__ .'/functions.php';

define('PARTNER_NAME', 'aspro');
define('MODULE_NAME', 'aspro.optimus');
define('MODULE_NAME_SHORT', 'optimus');
define('TEMPLATE_NAME', 'aspro_optimus');
define('TEMPLATE_PATH', '/bitrix/templates/'.TEMPLATE_NAME);
define('UPDATER_SELF_TEMPLATE_PATH', 'install/wizards/'.PARTNER_NAME.'/'.MODULE_NAME_SHORT.'/site/templates/'.TEMPLATE_NAME);
define('UPDATER_SITE_TEMPLATE_PATH', 'templates/'.TEMPLATE_NAME);
define('CURRENT_VERSION', GetCurVersion($_SERVER['DOCUMENT_ROOT'].'/bitrix/modules/'.MODULE_NAME.'/install/version.php'));
define('NEW_VERSION', GetCurVersion(__DIR__.'/install/version.php'));

UpdaterLog('START UPDATE '.CURRENT_VERSION.' -> '.NEW_VERSION.PHP_EOL);

// remove old bak files
RemoveOldBakFiles();

// create bak files
CreateBakFile($_SERVER['DOCUMENT_ROOT'].'/bitrix/modules/'.MODULE_NAME.'/include.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].'/bitrix/modules/'.MODULE_NAME.'/classes/general/COptimus.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].'/bitrix/modules/'.MODULE_NAME.'/lang/ru/classes/general/COptimus.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].'/bitrix/modules/'.MODULE_NAME.'/lang/en/classes/general/COptimus.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].'/bitrix/modules/'.MODULE_NAME.'/admin/options.php');

CreateBakFile($_SERVER['DOCUMENT_ROOT'].'/bitrix/components/'.PARTNER_NAME.'/oneclickbuy.optimus/component.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].'/bitrix/components/'.PARTNER_NAME.'/oneclickbuy.optimus/script.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].'/bitrix/components/'.PARTNER_NAME.'/oneclickbuy.optimus/lang/ru/script.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].'/bitrix/components/'.PARTNER_NAME.'/social.info.optimus/templates/.default/template.php');

CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/template_styles.css');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/template_styles.min.css');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/css/media.css');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/css/media.min.css');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/css/style.css');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/css/style.min.css');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/js/jquery.ikSelect.js');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/js/main.js');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/js/main.min.js');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/js/jquery.ikSelect.min.js');

CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/news/shops/.parameters.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/news/shops/lang/ru/.parameters.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/news/shops/lang/en/.parameters.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/news/shops/detail.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/news/shops/news.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/news.detail/shops/component_epilog.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/form.result.new/inline/template.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/form.result.new/popup/template.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/catalog/main/element.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/catalog/main/section.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/catalog/main/filter.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/catalog/main/.parameters.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/catalog/main/lang/ru/.parameters.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/catalog.section/catalog_block/template.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/catalog.section/catalog_block/script.js');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/catalog.section/catalog_block/script.min.js');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/catalog.section/catalog_block_slider/template.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/catalog.section/catalog_block_slider/script.js');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/catalog.section/catalog_block_slider/script.min.js');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/catalog.section/catalog_list/template.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/catalog.section/catalog_list/script.js');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/catalog.section/catalog_list/script.min.js');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/catalog.element/main/template.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/catalog.element/main/script.js');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/catalog.element/main/script.min.js');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/catalog.element/main/component_epilog.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/sale.gift.main.products/main/template.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/sale.gift.product/main/template.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/sale.gift.product/main/script.js');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/sale.gift.product/main/script.min.js');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/catalog.store.amount/main/result_modifier.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/catalog.store.amount/main/template.php');
CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/bitrix/main.register/main/template.php');

CreateBakFile($_SERVER['DOCUMENT_ROOT'].TEMPLATE_PATH.'/components/aspro/com.banners.optimus/top_slider_banners/template.php');

// update module
$updater->CopyFiles('install', 'modules/'.MODULE_NAME.'/install');

$updater->CopyFiles('install/images', 'images/'.MODULE_NAME);
$updater->CopyFiles('install/gadgets', 'gadgets');

// update wizard
$updater->CopyFiles('install/wizards', 'wizards');

if(file_exists($_SERVER['DOCUMENT_ROOT'].'/bitrix/components/aspro/')){
	// update components
	$updater->CopyFiles('install/components', 'components');
}

if(file_exists($_SERVER['DOCUMENT_ROOT'].'/bitrix/templates/'.TEMPLATE_NAME)){

	$updater->CopyFiles('install/wizards/'.PARTNER_NAME.'/'.MODULE_NAME_SHORT.'/site/templates/.default/components', 'templates/.default/components');
	$updater->CopyFiles('install/wizards/'.PARTNER_NAME.'/'.MODULE_NAME_SHORT.'/site/templates/aspro_mail/', 'templates/aspro_mail');

	// update js
	$updater->CopyFiles(UPDATER_SELF_TEMPLATE_PATH.'/js', UPDATER_SITE_TEMPLATE_PATH.'/js');

	// rewrite css
	$updater->CopyFiles(UPDATER_SELF_TEMPLATE_PATH.'/css', UPDATER_SITE_TEMPLATE_PATH.'/css');
	//$updater->CopyFiles(UPDATER_SELF_TEMPLATE_PATH.'/ajax', UPDATER_SITE_TEMPLATE_PATH.'/ajax');
	$updater->CopyFiles(UPDATER_SELF_TEMPLATE_PATH.'/template_styles.css', UPDATER_SITE_TEMPLATE_PATH.'/template_styles.css');
	$updater->CopyFiles(UPDATER_SELF_TEMPLATE_PATH.'/template_styles.min.css', UPDATER_SITE_TEMPLATE_PATH.'/template_styles.min.css');

	// update images
	$updater->CopyFiles(UPDATER_SELF_TEMPLATE_PATH.'/images', UPDATER_SITE_TEMPLATE_PATH.'/images');

	// update lang
	// $updater->CopyFiles(UPDATER_SELF_TEMPLATE_PATH.'/lang', UPDATER_SITE_TEMPLATE_PATH.'/lang');

	// update bgcolor
	//$updater->CopyFiles(UPDATER_SELF_TEMPLATE_PATH.'/bg_color', UPDATER_SITE_TEMPLATE_PATH.'/bg_color');

	// rewrite components templates
	$updater->CopyFiles(UPDATER_SELF_TEMPLATE_PATH.'/components', UPDATER_SITE_TEMPLATE_PATH.'/components');

	// rewrite themes
	// $updater->CopyFiles(UPDATER_SELF_TEMPLATE_PATH.'/themes', UPDATER_SITE_TEMPLATE_PATH.'/themes');
}

// current SITEs
$arSites = GetSites();

// current IBLOCK_IDs
$arIblocks = GetIBlocks();

// add /ajax/check_order.php
// update /ajax/one_click_buy.php & /ajax/one_click_buy_basket.php
if($arSites && $arIblocks){
	foreach($arSites as $arSite){
		$arSite['DIR'] = str_replace('//', '/', '/'.$arSite['DIR']);
		if(!strlen($arSite['DOC_ROOT'])){
			$arSite['DOC_ROOT'] = $_SERVER['DOCUMENT_ROOT'];
		}
		$arSite['DOC_ROOT'] = str_replace('//', '/', $arSite['DOC_ROOT'].'/');
		$siteDir = str_replace('//', '/', $arSite['DOC_ROOT'].$arSite['DIR']);
		$fileCheckSolution = str_replace('//', '/', $siteDir.'/ajax/form.php');
		if(file_exists($fileCheckSolution)){
			$content = @file_get_contents($fileCheckSolution);
			if(strpos($content, 'COptimus') !== false){
				$fileIncludeTo = str_replace('//', '/', $siteDir.'/ajax/productStoreAmount.php');
				$fileIncludeFrom = $_SERVER['DOCUMENT_ROOT'].'/bitrix/modules/'.MODULE_NAME.'/install/wizards/'.PARTNER_NAME.'/'.MODULE_NAME_SHORT.'/site/public/ru/ajax/productStoreAmount.php';
				// replace include  file
				if(file_exists($fileIncludeFrom)){
					$content = @file_get_contents($fileIncludeFrom);
					if(file_exists($fileIncludeTo))
						CreateBakFile($fileIncludeTo);
					@file_put_contents($fileIncludeTo, $content);

					UpdaterLog('Updated /ajax/productStoreAmount.php');
				}

				$fileIncludeTo = str_replace('//', '/', $siteDir.'/personal/subscribe/unsubscribe.php');
				$fileIncludeFrom = $_SERVER['DOCUMENT_ROOT'].'/bitrix/modules/'.MODULE_NAME.'/install/wizards/'.PARTNER_NAME.'/'.MODULE_NAME_SHORT.'/site/public/ru/personal/subscribe/unsubscribe.php';
				// replace include  file
				if(file_exists($fileIncludeFrom)){
					$content = @file_get_contents($fileIncludeFrom);
					if(file_exists($fileIncludeTo))
						CreateBakFile($fileIncludeTo);
					@file_put_contents($fileIncludeTo, $content);

					UpdaterLog('Add /personal/subscribe/unsubscribe.php');
				}

				$fileIncludeTo = str_replace('//', '/', $siteDir.'/personal/order/payment/index.php');
				$dirIncludeTo = str_replace('//', '/', $siteDir.'/personal/');
				$dirIncludeFrom = $_SERVER['DOCUMENT_ROOT'].'/bitrix/modules/'.MODULE_NAME.'/install/wizards/'.PARTNER_NAME.'/'.MODULE_NAME_SHORT.'/site/public/ru/personal/order/';
				// replace include  file
				if(file_exists($dirIncludeFrom)){
					CUpdateSystem::CopyDirFiles($dirIncludeFrom, $dirIncludeTo, $errorMessage);
					
					if(file_exists($fileIncludeTo))
						CreateBakFile($fileIncludeTo);

					UpdaterLog('Add /personal/order/payment');
				}
			}
		}
	}
}

// is composite enabled
$compositeMode = IsCompositeEnabled();

if(\Bitrix\Main\ModuleManager::isModuleInstalled('sender')){
	RegisterModuleDependences("sender", "onPresetTemplateList", "aspro.optimus", "\Aspro\Solution\CAsproMarketing", "senderTemplateList");
}

// clear all sites cache in some components and dirs (include composite cache)
ClearAllSitesCacheDirs(array('html_pages'));
ClearAllSitesCacheComponents(
	array(
		"bitrix:news",
		"bitrix:news.detail",
		"bitrix:form.result.new",
		"bitrix:catalog.element",
		"bitrix:catalog.section",
		"bitrix:sale.gift.product",
		"bitrix:sale.gift.main.products",
		"aspro:oneclickbuy.optimus",
		"aspro:social.info.optimus",
		"aspro:catalog.viewed.market",
		"aspro:com.banners.optimus",
	)
);

if($compositeMode){
	EnableComposite($compositeMode === 'AUTO_COMPOSITE');
}
?>55   18311|/aspro.optimus/preset/template/theme.php|e5a69943<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta name="viewport" content="width=device-width">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta http-equiv="Content-Type" content="text/html; charset=Windows-1251">
		<title>email template</title>

		<style type="text/css">
			a{
				word-wrap:break-word;
			}
			table{
				border-collapse:collapse;
				table-layout: fixed;
			}
			h1,h2,h3,h4,h5,h6{
				display:block;
				margin:0;
				padding:0;
			}
			img,a img{
				border:0;
				margin:0;
				outline:none;
				text-decoration:none;
			}
			body{
				height:100% !important;
				margin:0;
				padding:0;
				font-family: Arial, Helvetica, sans-serif;
				width:100% !important;
				background: #f9f9f9;
				min-width:600px !important;
			}
			img{
				-ms-interpolation-mode:bicubic;
			}
			table{
				mso-table-lspace:0pt;
				mso-table-rspace:0pt;
			}
			p,a,li,td{
				mso-line-height-rule:exactly;
			}

			p,a,li,td,body,table,blockquote{
				-ms-text-size-adjust:100%;
				-webkit-text-size-adjust:100%;
			}

			h1{
				/*color:#606060 !important;*/
				font-family: Arial, Helvetica, sans-serif;
				font-size:40px;
				font-style:normal;
				font-weight:bold;
				line-height:125%;
				letter-spacing:-1px;
				text-align:left;
			}
			h2{
				/*color:#404040 !important;*/
				font-family: Arial, Helvetica, sans-serif;
				font-size:26px;
				font-style:normal;
				font-weight:bold;
				line-height:125%;
				letter-spacing:-.75px;
				text-align:left;
			}
			h3{
				/*color:#606060 !important;*/
				font-family: Arial, Helvetica, sans-serif;
				font-size:18px;
				font-style:normal;
				font-weight:bold;
				line-height:125%;
				letter-spacing:-.5px;
				text-align:left;
			}
			h4{
				/*color:#808080 !important;*/
				font-family: Arial, Helvetica, sans-serif;
				font-size:16px;
				font-style:normal;
				font-weight:bold;
				line-height:125%;
				letter-spacing:normal;
				text-align:left;
			}

			.mail-wrap{
				width:100%;
				max-width: 600px;
				margin: 20px auto;
				overflow:hidden;
				border-radius: 3px;border:1px solid #dedede;background: #FFFFFF;
			}
			.mail-wrap center{}

			.darkFooter .bxBlockContentText{
				color: #FFFFFF;
			}

			.darkFooter a{
				color: #FFFFFF;
				text-decoration: none;
			}

			.darkFooter ul{
				list-style-type: none;
			}

			.unsubscribe a{
				/*color: #dfdfdf;*/
				text-decoration: underline;
			}


			.bxBlockContentText{
				font-size: 13px;
				margin: 0;
				padding-top: 0;
				padding-right: 0;
				padding-bottom: 0;
				padding-left: 0;
			}
			.bxBlockContentBlockText{
				font-size: 13px;
				margin: 0;
				padding: 10px 8px;
				border: 1px solid #d3d3d3;
			}

			.phone .bxBlockContentText{
				font-size: 20px;
				text-align: right;
				vertical-align: middle;
				font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
			}

			.bxBlockContentLine{
				border: none;
				height: 2px;
				background: #d3d3d3;
				margin: 10px 0;
				display: block;
			}
			.bxImage{
				max-width: 100%;
				height: auto;
			}
			.bxBlockContentImage{
				/*
				border: 1px solid #d3d3d3;
				background: #fdfdfd;
				*/
			}
			.bxBlockContentImage p{
				text-align: center;
				margin: 0;
				padding:10px 0;
				font-size: 13px;
			}
			/**/
			.mail-grid{
				/*outline: 1px dashed #0083D1;*/
			}
			.mail-grid-cell{
				/*outline: 1px solid #17D100;*/
			}
			.bxLink{

			}
			.bxButton, .bxBlockContentButton{
				display: inline-block;
				line-height: 22px;
				color: #fff;
				padding: 7px 15px ;
				text-decoration: none;
				text-align: center;
			}

			.bxButton, .bxBlockContentButtonEdge{text-align: center;}
			#bxStylistHeader, .bxBlockContentButton{background:%BG_COLOR%;}
			#bxStylistHeader, #bxStylistFooter{padding-top:26px;padding-right:30px;padding-bottom:26px;padding-left:30px;}
			#bxStylistBody{padding-top:0px;padding-bottom:20px;}

			.bxButton:hover{opacity:0.85;}

			div[data-bx-block-editor-block-type="component"] > .bxBlockPadding, div > .bxBlockPadding, #bxStylistBody div > .bxBlockPadding{padding-top:0px !important;padding-right:0px !important;padding-bottom:0px !important;padding-left:0px !important;}
			#bxStylistBody .bxBlockPadding{padding-top:16px;padding-right:30px;padding-bottom:6px;padding-left:30px;}
			.bxBlockLine .bxBlockPadding{padding: 0px !important;}
			.bxBlockInnSocial{padding-top:20px;}

			.wrap_header{border-radius:2px 2px 0px 0px;font-size:0px;}
			.wrap_header .inner_blocks{display:inline-block;vertical-align:middle;font-size:12px;width: auto !important;}

			a.link_img_logo{display: inline-block;zoom: 1;vertical-align: middle;margin: 0;}
			a.link_img_logo img{display:block;}
			.phone_block{position:relative;text-align:right !important;padding-top:0px !important;font-size:0px;}
			.phone_block > div{display:inline-block;vertical-align:top;}
			.phone_block .phone_outer{border-radius: 100%;color: #000;background-color:%THEME_COLOR%;font-size: 16px;margin: 2px 5px 0;width: 35px;height: auto;text-align: center;height: 26px;padding-top: 9px;padding-bottom: 0px;}
			.phone_block .phone{display: inline-block;width:13px;height:20px;vertical-align: top;}
			.colored .phone_block .phone{background-position: 0px 0px !important;}
			.phone_block a{text-decoration:none;display:block;}
			.colored .phone_block, .colored .phone_block a{color:#fff;}
			.main .phone_block, .main .phone_block a{color:#1d2029;font-size:18px;}
			.bxBlockInnText.bxColored{background: #eaf3f5; color:#1d2029;font-size:22px;}
			.bxBlockPadding1.bxBlockHeader{padding-top:15px;padding-right:29px;padding-bottom:19px;padding-left:29px;border-top:1px solid #dedede;border-bottom:1px solid #dedede;}
			.bxBlockHeader h2{font-weight:400;}
			#bxStylistBody .subttle h3{font-weight:400;font-size:18px;color:#1d2029;}
			#bxStylistBody .bxBlockPadding{color:#555555;font-size:14px;line-height: 18px;}
			.bxBlockContentButtonEdge .bxBlockContentButton{padding: 8px 15px 9px;border-radius:3px;}
			.mail-wrap #bxStylistBody .bxBlockBoxedText .bxBlockPadding.bxBlockContentText{padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px;}

			/*tizers*/
			.tizers_block{font-size: 0px;margin: 0px 0px 0px;text-align: center;border-top:1px solid #dedede;padding-left:30px;padding-right:30px;}
			.tizers_block .item{display: inline-block;vertical-align: middle;font-size: 0px;width: 33.33%;color: #000;box-sizing: border-box;padding: 0px 5px 0px 0px;-moz-transition: all 0.1s ease;-o-transition: all 0.1s ease;-ms-transition: all 0.1s ease;transition: all 0.1s ease;margin: 0px 0px 59px;margin: 15px 0px 15px;white-space: nowrap;}
			.tizers_block * {line-height: 18px;}
			.tizers_block .item a{font-size: 12px;text-decoration: none;color: #000;line-height: 16px;display: block;}
			.tizers_block .item .img{max-width: 60px;margin: 0px 20px 0px 0px;white-space:normal;}
			.tizers_block .item .img, .tizers_block .item .title {font-size: 12px;display: inline-block;vertical-align: middle;}
			.tizers_block .item .title {width: 54%;text-align: left;margin: -6px 0px 0px;white-space: normal;}
			/*#bxStylistBody*/ .bxBlockContentLine{height: 1px; background-color: #dedede; display: block;margin-bottom:0px;margin-top:10px;}

			.bx-editor-block .bx-block-inside:hover, .bx-editor-block.bx-editor-block-current-edit .bx-block-inside{min-height:auto !important;}

			#bxStylistFooter td{color:#666666;text-align: center;}
			.mail_soc_wrapper{text-align:center;}
			.mail_soc_wrapper a.mail_soc{display:inline-block;font-size:0px;padding:3px;}
			a{color:%THEME_COLOR%;text-decoration:none;}
			.wrapper_block{padding:0px 30px !important;}
			.border_wrapper{margin-right:30px;margin-left:30px;}
			#bxStylistBody img.bxImage{margin-top:20px !important;}

			/*products*/
			.products_block{padding-left:30px;padding-right:30px;}

			/*social*/
			.bxBlockInnSocial table table td{background-color:#99999a;color:#fff;padding-top: 10px;padding-right: 15px; padding-bottom: 10px; padding-left: 15px;border-radius: 10px;}
			.bxBlockInnSocial table table td a{text-decoration:none !important;color:#fff !important;}

			.phones_block_ext a{padding-right:5px;}
		</style>

		<style data-bx-stylist-container="item" type="text/css">
			#bxStylistBody{
				/*padding-bottom: 0px;*/
				color:#555555;
				font-size:14px;
			}
			#bxStylistFooter{
				background: #efeff0;
				border-top:1px solid #dedede;
				font-size: 14px;
				padding-top: 23px;
				padding-bottom: 22px;
			}
		</style>
	</head>
	<body class="">

		<div class="mail-wrap %TYPE_COLOR%">
			<center>
				<!-- top content -->
				<table class="mail-grid"   width="100%" border="0" cellpadding="0" cellspacing="0" align="center">
					<tr>
						<td id="bxStylistHeader">
							<!-- 2 cell -->
							<table class="mail-grid"   width="100%" border="0" cellpadding="0" cellspacing="0" align="center">
								<tr>
									<td class="wrap_header" >
										<div class="inner_blocks">
											<table class="mail-grid-cell" border="0" cellspacing="0" cellpadding="0" width="270px">
												<tr>
													<td data-bx-block-editor-place="leftColumnHeader">
														<!-- content -->
														<div data-bx-block-editor-block-type="image">
															<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockImage">
																<tbody class="bxBlockOut">
																<tr>
																	<td valign="top" class="bxBlockInn bxBlockInnImage">
																		<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
																			<tbody>
																			<tr>
																				<td valign="top" class="bxBlockPadding bxBlockContentImage" style="text-align: left">
																					<a href="%SITE_ADDRESS%" class="link_img_logo" style="background:%BG_COLOR_LOGO%">
																						<img data-bx-editor-def-image="0" src="%LOGO_PATH_HEADER%" class="bxImage">
																					</a>
																				</td>
																			</tr>
																			</tbody>
																		</table>
																	</td>
																</tr>
																</tbody>
															</table>
														</div>
														<!-- /content -->
													</td>
												</tr>
											</table>
										</div>
										<div class="inner_blocks">
											<table class="mail-grid-cell" border="0" cellspacing="0" cellpadding="0" width="270px">
												<tr>
													<td data-bx-block-editor-place="rightColumnHeader" class="phone">
														<!-- content -->
														<div data-bx-block-editor-block-type="text">
															<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
																<tbody class="bxBlockOut">
																<tr>
																	<td valign="top" class="bxBlockInn bxBlockInnText">
																		<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
																			<tbody>
																			<tr>
																				<td valign="top" class="bxBlockPadding bxBlockContentText">
																					<div class="phone_block">
																						<div class="phone_outer">
																							<div class="phone" style="background:url(%IMAGE_URL%) 0px 0px no-repeat;"></div>
																						</div>
																						<div class="phone_text">
																							%PHONE%
																						</div>
																					</div>
																				</td>
																			</tr>
																			</tbody>
																		</table>
																	</td>
																</tr>
																</tbody>
															</table>
														</div>
														<!-- /content -->
													</td>
												</tr>
											</table>
										</div>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>
				<!-- /top content -->

				<!-- middle content -->
				<table class="mail-grid"   width="100%" border="0" cellpadding="0" cellspacing="0" align="center">
					<tr>
						<td id="bxStylistBody">
							<!-- content -->
							%TEMPLATE_CONTENT%
							<!-- /content -->
						</td>
					</tr>
				</table>
				<!-- /middle content -->

				<!-- bottom content -->				
				<table class="mail-grid"   width="100%" border="0" cellpadding="0" cellspacing="0" align="center">
					<tr>
						<td class="darkFooters" id="bxStylistFooter">
							<table class="mail-grid-cell"   width="100%" border="0" cellspacing="0" cellpadding="0" align="center">
								<tr>
									<td data-bx-block-editor-place="footerCopy">
										<!-- content -->
										<div data-bx-block-editor-block-type="text">
											<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
												<tbody class="bxBlockOut">
													<tr>
														<td valign="top" class="bxBlockInn bxBlockInnText">
															<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
																<tbody>
																	<tr>
																		<td valign="top" class="bxBlockPadding bxBlockContentText">
																			%COPYRIGHT%
																		</td>
																	</tr>
																</tbody>
															</table>
														</td>
													</tr>
												</tbody>
											</table>
										</div>
										<!-- /content -->
									</td>
								</tr>
							</table>

							<table class="mail-grid" width="100%" border="0" cellpadding="0" cellspacing="0">
								<tr>
									<td class="social">
										<table class="mail-grid-cell" width="100%" border="0" cellspacing="0" cellpadding="0" align="center">
											<tr>
												<td data-bx-block-editor-place="footerBottom">
													<!-- content -->													
													<div data-bx-block-editor-block-type="social">
														<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockSocial">
															<tbody class="bxBlockOut">
																<tr>
																	<td valign="top" class="bxBlockInn bxBlockInnSocial">
																		<table align="center" border="0" cellpadding="0" cellspacing="0" class="bxBlockContentEdgeSocial">
																			<tbody>
																				<tr>
																					<td valign="top" class="bxBlockPadding">
																						<table align="left" border="0" cellpadding="0" cellspacing="0" style="border-collapse: separate !important; margin-right: 10px;">
																							<tbody>
																								<tr>
																									<td valign="top" class="" style="padding-top: 5px; padding-right: 10px; padding-bottom: 5px; padding-left: 10px;">
																										<a class="bxBlockContentSocial" href="http://vk.com/" target="_blank" style="font-weight: bold; color: #626262; letter-spacing: normal;line-height: 100%;text-align: center; text-decoration: underline; font-size: 12px;" title="%VK%">%VK%</a>
																									</td>
																								</tr>
																							</tbody>
																						</table>

																						<table align="left" border="0" cellpadding="0" cellspacing="0" style="border-collapse: separate !important; margin-right: 10px;">
																							<tbody>
																								<tr>
																									<td valign="top" class="" style="padding-top: 5px; padding-right: 10px; padding-bottom: 5px; padding-left: 10px; font-size: 12px;">
																										<a class="bxBlockContentSocial" href="http://facebook.com/" target="_blank" style="font-weight: bold; color: #626262; letter-spacing: normal;line-height: 100%;text-align: center; text-decoration: underline; font-size: 12px;" title="Facebook">Facebook</a>
																									</td>
																								</tr>
																							</tbody>
																						</table>

																						<table align="left" border="0" cellpadding="0" cellspacing="0" style="border-collapse: separate !important; margin-right: 10px;">
																							<tbody>
																								<tr>
																									<td valign="top" class="" style="padding-top: 5px; padding-right: 10px; padding-bottom: 5px; padding-left: 10px; font-size: 12px;">
																										<a class="bxBlockContentSocial" href="http://twitter.com/" target="_blank" style="font-weight: bold; color: #626262; letter-spacing: normal;line-height: 100%;text-align: center; text-decoration: underline; font-size: 12px;" title="Twitter">Twitter</a>
																									</td>
																								</tr>
																							</tbody>
																						</table>
																					</td>
																				</tr>
																			</tbody>
																		</table>
																	</td>
																</tr>
															</tbody>
														</table>
													</div>
													<!-- /content -->
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>

							<table class="mail-grid" width="100%" border="0" cellpadding="0" cellspacing="0">
								<tr>
									<td class="unsubscribe">

										<table class="mail-grid-cell"   width="100%" border="0" cellspacing="0" cellpadding="0" align="center">
											<tr>
												<td data-bx-block-editor-place="footerBottom2">
													<!-- content -->
													<div data-bx-block-editor-block-type="text">
														<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
															<tbody class="bxBlockOut">
															<tr>
																<td valign="top" class="bxBlockInn bxBlockInnText">
																	<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
																		<tbody>
																		<tr>
																			<td valign="top" class="bxBlockPadding bxBlockContentText" style="position:relative;padding-top:20px;text-align:center;">
																				<div>%UNSUB_TEXT%<br>%UNSUB_LINK_TEXT%</div>
																			</td>
																		</tr>
																		</tbody>
																	</table>
																</td>
															</tr>
															</tbody>
														</table>
													</div>
													<!-- / content -->
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>							
				<!-- /bottom content -->

			</center>
		</div>
	</body>
</html>68   6672|/aspro.optimus/preset/template/aspro_yandex_market.php|8743b936<table class="mail-grid" width="600" border="0" cellpadding="0" cellspacing="0">
	<tr>
		<td>
			<table class="mail-grid-cell"   width="100%" border="0" cellspacing="0" cellpadding="0" align="center">
				<tr>
					<td data-bx-block-editor-place="body">

						<!-- content title -->
						<div data-bx-block-editor-block-type="text">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockInn bxBlockInnText bxColored">
											<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td valign="top" class="bxBlockPadding1 bxBlockContentText bxBlockHeader">													
															<div class="title">
																<h2>%HEADER_YANDEX_MARKET%</h2>
															</div>
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
						<!-- /content title -->

						<div data-bx-block-editor-block-type="text">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockInn bxBlockInnText">
											<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td valign="top" class="bxBlockPadding bxBlockContentText">
															%TEXT_YANDEX_MARKET_UNDER%
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<div data-bx-block-editor-block-type="component">
							<?EventMessageThemeCompiler::includeComponent(
								"bitrix:sale.personal.order.detail.mail",
								"aspro_main_info",
								Array(
									"ACTIVE_DATE_FORMAT" => "d.m.Y",
									"CACHE_TIME" => "3600",
									"CACHE_TYPE" => "A",
									"COMPOSITE_FRAME_MODE" => "A",
									"COMPOSITE_FRAME_TYPE" => "AUTO",
									"CUSTOM_SELECT_PROPS" => array("NAME", "QUANTITY"),
									"ID" => "{#ORDER_ID#}",
									"PATH_TO_CANCEL" => "",
									"PATH_TO_LIST" => "",
									"PATH_TO_PAYMENT" => "payment.php",
									"PICTURE_HEIGHT" => "110",
									"PICTURE_RESAMPLE_TYPE" => "1",
									"PICTURE_WIDTH" => "110",
									"PROP_1" => array(),
									"PROP_2" => array(),
									"SHOW_ORDER_BASE" => "Y",
									"SHOW_ORDER_BASKET" => "Y",
									"SHOW_ORDER_BUYER" => "Y",
									"SHOW_ORDER_DELIVERY" => "Y",
									"SHOW_ORDER_PARAMS" => "Y",
									"SHOW_ORDER_PAYMENT" => "Y",
									"SHOW_ORDER_SUM" => "Y",
									"SHOW_ORDER_USER" => "Y",									
									"SITE_ID" => "%SITE_ID%",
								)
							);?>
						</div>

						<div data-bx-block-editor-block-type="text">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockInn bxBlockInnText">
											<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td valign="top" class="bxBlockPadding bxBlockContentText">
															<p  style="text-align: center;">
															%TEXT_YANDEX_MARKET_BOTTOM%<br>
															<img src="/bitrix/images/%MODULE_ID%/preset/yandex_market.png" class="bxImage">
															</p>
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<div data-bx-block-editor-block-type="button">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockButton">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockPadding bxBlockInn bxBlockInnButton">
											<table align="center" border="0" cellpadding="0" cellspacing="0" class="bxBlockContentButtonEdge">
												<tbody>
													<tr>
														<td valign="top">
															<a class="bxBlockContentButton" style="background:%THEME_COLOR%" title="%BUTTON%" href="/" target="_blank">
																%BUTTON_REVIEW%
															</a>
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<div data-bx-block-editor-block-type="text">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockInn bxBlockInnText">
											<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td valign="top" class="bxBlockPadding bxBlockContentText">
															<p  style="text-align: center;font-size:12px;color:#888888;">
															%TEXT_YANDEX_MARKET_BOTTOM2%
															</p>
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
						
						<div data-bx-block-editor-block-type="component">
							<?EventMessageThemeCompiler::includeComponent(
								"bitrix:news.list.mail",
								"aspro_tizers",
								Array(
									"ACTIVE_DATE_FORMAT" => "d.m.Y",
									"CACHE_FILTER" => "N",
									"CACHE_GROUPS" => "N",
									"CACHE_TIME" => "3600",
									"CACHE_TYPE" => "A",
									"CHECK_DATES" => "Y",
									"COMPOSITE_FRAME_MODE" => "A",
									"COMPOSITE_FRAME_TYPE" => "AUTO",
									"DETAIL_URL" => "",
									"DISPLAY_DATE" => "Y",
									"DISPLAY_NAME" => "Y",
									"DISPLAY_PICTURE" => "Y",
									"DISPLAY_PREVIEW_TEXT" => "Y",
									"FIELD_CODE" => array("", ""),
									"FILTER_NAME" => "",
									"HIDE_LINK_WHEN_NO_DETAIL" => "N",
									"SITE_ADDRESS" => "%SITE_ADDRESS%",
									"IBLOCK_ID" => "%TIZER_IBLOCK_ID%",
									"IBLOCK_TYPE" => "aspro_optimus_content",
									"INCLUDE_SUBSECTIONS" => "Y",
									"NEWS_COUNT" => "3",
									"PARENT_SECTION" => "",
									"PARENT_SECTION_CODE" => "",
									"PREVENT_SEND_IF_NO_NEWS" => "N",
									"PREVIEW_TRUNCATE_LEN" => "",
									"PROPERTY_CODE" => array("", ""),
									"SENDER_CHAIN_ID" => "{#SENDER_CHAIN_ID#}",
									"SORT_BY1" => "ACTIVE_FROM",
									"SORT_BY2" => "SORT",
									"SORT_ORDER1" => "DESC",
									"SORT_ORDER2" => "ASC",
								),
								false
							);?>
						</div>

					</td>
				</tr>
			</table>
		</td>
	</tr>
</table>59   4716|/aspro.optimus/preset/template/aspro_sale.php|50ad5b05<table class="mail-grid" width="600" border="0" cellpadding="0" cellspacing="0">
	<tr>
		<td>
			<table class="mail-grid-cell"   width="100%" border="0" cellspacing="0" cellpadding="0" align="center">
				<tr>
					<td data-bx-block-editor-place="body">

						<!-- content title -->
						<div data-bx-block-editor-block-type="text">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockInn bxBlockInnText bxColored">
											<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td valign="top" class="bxBlockPadding1 bxBlockContentText bxBlockHeader">													
															<div class="title">
																<h2>%HEADER_SALE%</h2>
															</div>
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
						<!-- /content title -->

						<div data-bx-block-editor-block-type="text">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockInn bxBlockInnText">
											<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td valign="top" class="bxBlockPadding bxBlockContentText">
															<div class="subttle"><h3>%SUB_HEADER%</h3></div>
															<br>%TEXT_SALE%
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<div data-bx-block-editor-block-type="component">
							<?EventMessageThemeCompiler::includeComponent(
								"bitrix:news.list.mail",
								"aspro_sale",
								Array(
									"ACTIVE_DATE_FORMAT" => "d.m.Y",
									"CACHE_FILTER" => "N",
									"CACHE_GROUPS" => "N",
									"CACHE_TIME" => "3600",
									"CACHE_TYPE" => "A",
									"CHECK_DATES" => "Y",
									"COMPOSITE_FRAME_MODE" => "A",
									"COMPOSITE_FRAME_TYPE" => "AUTO",
									"DETAIL_URL" => "",
									"DISPLAY_DATE" => "Y",
									"DISPLAY_NAME" => "Y",
									"DISPLAY_PICTURE" => "Y",
									"DISPLAY_PREVIEW_TEXT" => "Y",
									"FIELD_CODE" => array("", ""),
									"FILTER_NAME" => "",
									"HIDE_LINK_WHEN_NO_DETAIL" => "N",
									"SITE_ADDRESS" => "%SITE_ADDRESS%",
									"IBLOCK_ID" => "%SALE_IBLOCK_ID%",
									"IBLOCK_TYPE" => "aspro_optimus_content",
									"INCLUDE_SUBSECTIONS" => "Y",
									"NEWS_COUNT" => "5",
									"PARENT_SECTION" => "",
									"PARENT_SECTION_CODE" => "",
									"PREVENT_SEND_IF_NO_NEWS" => "N",
									"PREVIEW_TRUNCATE_LEN" => "",
									"PROPERTY_CODE" => array("", ""),
									"SENDER_CHAIN_ID" => "{#SENDER_CHAIN_ID#}",
									"SORT_BY1" => "ACTIVE_FROM",
									"SORT_BY2" => "SORT",
									"SORT_ORDER1" => "DESC",
									"SORT_ORDER2" => "ASC",
									"THEME_COLOR" => "%THEME_COLOR%",
									"SALE_PAGE" => "/sale/",
									"SHOW_SALE" => "Y",
								),
								false
							);?>
						</div>
						
						<div data-bx-block-editor-block-type="component">
							<?EventMessageThemeCompiler::includeComponent(
								"bitrix:news.list.mail",
								"aspro_tizers",
								Array(
									"ACTIVE_DATE_FORMAT" => "d.m.Y",
									"CACHE_FILTER" => "N",
									"CACHE_GROUPS" => "N",
									"CACHE_TIME" => "3600",
									"CACHE_TYPE" => "A",
									"CHECK_DATES" => "Y",
									"COMPOSITE_FRAME_MODE" => "A",
									"COMPOSITE_FRAME_TYPE" => "AUTO",
									"DETAIL_URL" => "",
									"DISPLAY_DATE" => "Y",
									"DISPLAY_NAME" => "Y",
									"DISPLAY_PICTURE" => "Y",
									"DISPLAY_PREVIEW_TEXT" => "Y",
									"FIELD_CODE" => array("", ""),
									"FILTER_NAME" => "",
									"HIDE_LINK_WHEN_NO_DETAIL" => "N",
									"SITE_ADDRESS" => "%SITE_ADDRESS%",
									"IBLOCK_ID" => "%TIZER_IBLOCK_ID%",
									"IBLOCK_TYPE" => "aspro_optimus_content",
									"INCLUDE_SUBSECTIONS" => "Y",
									"NEWS_COUNT" => "3",
									"PARENT_SECTION" => "",
									"PARENT_SECTION_CODE" => "",
									"PREVENT_SEND_IF_NO_NEWS" => "N",
									"PREVIEW_TRUNCATE_LEN" => "",
									"PROPERTY_CODE" => array("", ""),
									"SENDER_CHAIN_ID" => "{#SENDER_CHAIN_ID#}",
									"SORT_BY1" => "ACTIVE_FROM",
									"SORT_BY2" => "SORT",
									"SORT_ORDER1" => "DESC",
									"SORT_ORDER2" => "ASC",
								),
								false
							);?>
						</div>

					</td>
				</tr>
			</table>
		</td>
	</tr>
</table>62   7396|/aspro.optimus/preset/template/aspro_no_auth.php|31ee98ae<table class="mail-grid" width="600" border="0" cellpadding="0" cellspacing="0">
	<tr>
		<td>
			<table class="mail-grid-cell"   width="100%" border="0" cellspacing="0" cellpadding="0" align="center">
				<tr>
					<td data-bx-block-editor-place="body">

						<!-- content title -->
						<div data-bx-block-editor-block-type="text">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockInn bxBlockInnText bxColored">
											<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td valign="top" class="bxBlockPadding1 bxBlockContentText bxBlockHeader">													
															<div class="title">
																<h2>%HEADER_NO_AUTH%</h2>
															</div>
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
						<!-- /content title -->

						<div data-bx-block-editor-block-type="text">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockInn bxBlockInnText">
											<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td valign="top" class="bxBlockPadding bxBlockContentText">
															%TEXT_NO_AUTH_UNDER%
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<div data-bx-block-editor-block-type="button">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockButton">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockPadding bxBlockInn bxBlockInnButton">
											<table align="center" border="0" cellpadding="0" cellspacing="0" class="bxBlockContentButtonEdge">
												<tbody>
													<tr>
														<td valign="top">
															<a class="bxBlockContentButton" style="background:%THEME_COLOR%" title="%SHOW_CATALOG_LINK%" href="/catalog/" target="_blank">
																%SHOW_CATALOG_LINK%
															</a>
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<div data-bx-block-editor-block-type="text">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockInn bxBlockInnText">
											<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td valign="top" class="bxBlockPadding bxBlockContentText">
															%TEXT_NO_AUTH_BOTTOM%
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<div data-bx-block-editor-block-type="component">
							<?EventMessageThemeCompiler::includeComponent(
								"bitrix:news.list.mail",
								"aspro_sale",
								Array(
									"ACTIVE_DATE_FORMAT" => "d.m.Y",
									"CACHE_FILTER" => "N",
									"CACHE_GROUPS" => "N",
									"CACHE_TIME" => "3600",
									"CACHE_TYPE" => "A",
									"CHECK_DATES" => "Y",
									"COMPOSITE_FRAME_MODE" => "A",
									"COMPOSITE_FRAME_TYPE" => "AUTO",
									"DETAIL_URL" => "",
									"DISPLAY_DATE" => "Y",
									"DISPLAY_NAME" => "Y",
									"DISPLAY_PICTURE" => "Y",
									"DISPLAY_PREVIEW_TEXT" => "Y",
									"FIELD_CODE" => array("", ""),
									"FILTER_NAME" => "",
									"HIDE_LINK_WHEN_NO_DETAIL" => "N",
									"SITE_ADDRESS" => "%SITE_ADDRESS%",
									"IBLOCK_ID" => "%SALE_IBLOCK_ID%",
									"IBLOCK_TYPE" => "aspro_optimus_content",
									"INCLUDE_SUBSECTIONS" => "Y",
									"NEWS_COUNT" => "5",
									"PARENT_SECTION" => "",
									"PARENT_SECTION_CODE" => "",
									"PREVENT_SEND_IF_NO_NEWS" => "N",
									"PREVIEW_TRUNCATE_LEN" => "",
									"PROPERTY_CODE" => array("", ""),
									"SENDER_CHAIN_ID" => "{#SENDER_CHAIN_ID#}",
									"SORT_BY1" => "ACTIVE_FROM",
									"SORT_BY2" => "SORT",
									"SORT_ORDER1" => "DESC",
									"SORT_ORDER2" => "ASC",
									"THEME_COLOR" => "%THEME_COLOR%",
									"SALE_PAGE" => "/sale/",
									"SHOW_SALE" => "Y",
								),
								false
							);?>
						</div>

						<div data-bx-block-editor-block-type="component">
							<?EventMessageThemeCompiler::includeComponent(
								"bitrix:sale.basket.basket.small.mail",
								"aspro_init",
								Array(
									"COLUMNS_LIST" => array("NAME"),
									"COMPONENT_TEMPLATE" => ".default",
									"PATH_TO_BASKET" => "/basket/",
									"PATH_TO_ORDER" => "/order/",
									"SHOW_DELAY" => "Y",
									"SHOW_NOTAVAIL" => "Y",
									"SHOW_SUBSCRIBE" => "Y",
									"SITE_ID" => "%SITE_ID%",
									"SITE_ADDRESS" => "%SITE_ADDRESS%",
									"THEME_COLOR" => "%THEME_COLOR%",
									"SHOW_SUBSCRIBE" => "Y",
									"USER_ID" => "{#USER_ID#}"
								)
							);?>
						</div>

						<div data-bx-block-editor-block-type="component">
							<?EventMessageThemeCompiler::includeComponent(
								"bitrix:sale.bigdata.personal.mail",
								"aspro_bigdata",
								Array(
									"COMPOSITE_FRAME_MODE" => "A",
									"COMPOSITE_FRAME_TYPE" => "AUTO",
									"SITE_ID" => "%SITE_ID%",
									"SITE_ADDRESS" => "%SITE_ADDRESS%",
									"THEME_COLOR" => "%THEME_COLOR%",
									"TITLE" => "%NO_AUTH_GOODS_TITLE%",
									"CATALOG_PAGE" => "/catalog/",
									"SHOW_CATALOG" => "Y",
									"USER_ID" => "{#USER_ID#}"
								)
							);?>
						</div>
						
						<div data-bx-block-editor-block-type="component">
							<?EventMessageThemeCompiler::includeComponent(
								"bitrix:news.list.mail",
								"aspro_tizers",
								Array(
									"ACTIVE_DATE_FORMAT" => "d.m.Y",
									"CACHE_FILTER" => "N",
									"CACHE_GROUPS" => "N",
									"CACHE_TIME" => "3600",
									"CACHE_TYPE" => "A",
									"CHECK_DATES" => "Y",
									"COMPOSITE_FRAME_MODE" => "A",
									"COMPOSITE_FRAME_TYPE" => "AUTO",
									"DETAIL_URL" => "",
									"DISPLAY_DATE" => "Y",
									"DISPLAY_NAME" => "Y",
									"DISPLAY_PICTURE" => "Y",
									"DISPLAY_PREVIEW_TEXT" => "Y",
									"FIELD_CODE" => array("", ""),
									"FILTER_NAME" => "",
									"HIDE_LINK_WHEN_NO_DETAIL" => "N",
									"SITE_ADDRESS" => "%SITE_ADDRESS%",
									"IBLOCK_ID" => "%TIZER_IBLOCK_ID%",
									"IBLOCK_TYPE" => "aspro_optimus_content",
									"INCLUDE_SUBSECTIONS" => "Y",
									"NEWS_COUNT" => "3",
									"PARENT_SECTION" => "",
									"PARENT_SECTION_CODE" => "",
									"PREVENT_SEND_IF_NO_NEWS" => "N",
									"PREVIEW_TRUNCATE_LEN" => "",
									"PROPERTY_CODE" => array("", ""),
									"SENDER_CHAIN_ID" => "{#SENDER_CHAIN_ID#}",
									"SORT_BY1" => "ACTIVE_FROM",
									"SORT_BY2" => "SORT",
									"SORT_ORDER1" => "DESC",
									"SORT_ORDER2" => "ASC",
								),
								false
							);?>
						</div>

					</td>
				</tr>
			</table>
		</td>
	</tr>
</table>61   4563|/aspro.optimus/preset/template/aspro_basket.php|fccd71c0<table class="mail-grid" width="600" border="0" cellpadding="0" cellspacing="0">
	<tr>
		<td>
			<table class="mail-grid-cell"   width="100%" border="0" cellspacing="0" cellpadding="0" align="center">
				<tr>
					<td data-bx-block-editor-place="body">
					
						<!-- content title -->
						<div data-bx-block-editor-block-type="text">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockInn bxBlockInnText bxColored">
											<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td valign="top" class="bxBlockPadding1 bxBlockContentText bxBlockHeader">													
															<div class="title">
																<h2>%HEADER_FORGOT_BASKET%</h2>
															</div>
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
						<!-- /content title -->

						<div data-bx-block-editor-block-type="text">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockInn bxBlockInnText">
											<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td valign="top" class="bxBlockPadding bxBlockContentText">
															%TEXT_BASKET%
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<div data-bx-block-editor-block-type="component">
							<?EventMessageThemeCompiler::includeComponent(
								"bitrix:sale.basket.basket.small.mail",
								"aspro_basket",
								Array(
									"COLUMNS_LIST" => array("NAME", "DISCOUNT_FORMATED", "PRICE_FORMATED"),
									"COMPONENT_TEMPLATE" => ".default",
									"PATH_TO_BASKET" => "/basket/",
									"PATH_TO_ORDER" => "/order/",
									"SHOW_DELAY" => "Y",
									"SHOW_NOTAVAIL" => "Y",
									"SHOW_SUBSCRIBE" => "Y",
									"SITE_ID" => "%SITE_ID%",
									"SITE_ADDRESS" => "%SITE_ADDRESS%",
									"THEME_COLOR" => "%THEME_COLOR%",
									"TITLE" => "%BASKET_TITLE%",
									"BASKET_PAGE" => "%ORDER_PAGE_LINK%",
									"SHOW_SUBSCRIBE" => "Y",
									"USER_ID" => "{#USER_ID#}"
								)
							);?>
						</div>

						<div data-bx-block-editor-block-type="component">
							<?EventMessageThemeCompiler::includeComponent(
								"bitrix:sale.bigdata.personal.mail",
								"aspro_bigdata",
								Array(
									"COMPOSITE_FRAME_MODE" => "A",
									"COMPOSITE_FRAME_TYPE" => "AUTO",
									"SITE_ID" => "%SITE_ID%",
									"SITE_ADDRESS" => "%SITE_ADDRESS%",
									"THEME_COLOR" => "%THEME_COLOR%",
									"TITLE" => "%PERSONAL_BIG_DATA%",
									"CATALOG_PAGE" => "/catalog/",
									"SHOW_CATALOG" => "Y",
									"USER_ID" => "{#USER_ID#}"
								)
							);?>
						</div>

						<div data-bx-block-editor-block-type="component">
							<?EventMessageThemeCompiler::includeComponent(
								"bitrix:news.list.mail",
								"aspro_tizers",
								Array(
									"ACTIVE_DATE_FORMAT" => "d.m.Y",
									"CACHE_FILTER" => "N",
									"CACHE_GROUPS" => "N",
									"CACHE_TIME" => "3600",
									"CACHE_TYPE" => "A",
									"CHECK_DATES" => "Y",
									"COMPOSITE_FRAME_MODE" => "A",
									"COMPOSITE_FRAME_TYPE" => "AUTO",
									"DETAIL_URL" => "",
									"DISPLAY_DATE" => "Y",
									"DISPLAY_NAME" => "Y",
									"DISPLAY_PICTURE" => "Y",
									"DISPLAY_PREVIEW_TEXT" => "Y",
									"FIELD_CODE" => array("", ""),
									"FILTER_NAME" => "",
									"HIDE_LINK_WHEN_NO_DETAIL" => "N",
									"SITE_ADDRESS" => "%SITE_ADDRESS%",
									"IBLOCK_ID" => "%TIZER_IBLOCK_ID%",
									"IBLOCK_TYPE" => "aspro_optimus_content",
									"INCLUDE_SUBSECTIONS" => "Y",
									"NEWS_COUNT" => "3",
									"PARENT_SECTION" => "",
									"PARENT_SECTION_CODE" => "",
									"PREVENT_SEND_IF_NO_NEWS" => "N",
									"PREVIEW_TRUNCATE_LEN" => "",
									"PROPERTY_CODE" => array("", ""),
									"SENDER_CHAIN_ID" => "{#SENDER_CHAIN_ID#}",
									"SORT_BY1" => "ACTIVE_FROM",
									"SORT_BY2" => "SORT",
									"SORT_ORDER1" => "DESC",
									"SORT_ORDER2" => "ASC"
								),
								false
							);?>
						</div>

					</td>
				</tr>
			</table>
		</td>
	</tr>
</table>68   5713|/aspro.optimus/preset/template/aspro_basket_coupon.php|763596d7<table class="mail-grid" width="600" border="0" cellpadding="0" cellspacing="0">
	<tr>
		<td>
			<table class="mail-grid-cell"   width="100%" border="0" cellspacing="0" cellpadding="0" align="center">
				<tr>
					<td data-bx-block-editor-place="body">

						<!-- content title -->
						<div data-bx-block-editor-block-type="text">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockInn bxBlockInnText bxColored">
											<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td valign="top" class="bxBlockPadding1 bxBlockContentText bxBlockHeader">													
															<div class="title">
																<h2>%HEADER_FORGOT_BASKET%</h2>
															</div>
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
						<!-- /content title -->

						<div data-bx-block-editor-block-type="text">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockInn bxBlockInnText">
											<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td valign="top" class="bxBlockPadding bxBlockContentText">
															%TEXT_BASKET_COUPON_UNDER%
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<div data-bx-block-editor-block-type="component">
							<?EventMessageThemeCompiler::includeComponent(
								"bitrix:sale.discount.coupon.mail",
								"aspro_mail",
								Array(
									"COMPOSITE_FRAME_MODE" => "A",
									"COMPOSITE_FRAME_TYPE" => "AUTO",
									"COUPON_DESCRIPTION" => "{#EMAIL_TO#}",
									"COUPON_TYPE" => "Order",
									"DISCOUNT_UNIT" => "Perc",
									"DISCOUNT_VALUE" => "10",
									"DISCOUNT_XML_ID" => "{#SENDER_CHAIN_CODE#}"
								)
							);?>
						</div>

						<div data-bx-block-editor-block-type="text">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockInn bxBlockInnText">
											<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td valign="top" class="bxBlockPadding bxBlockContentText">
															%TEXT_BASKET_COUPON_BOTTOM%
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<div data-bx-block-editor-block-type="component">
							<?EventMessageThemeCompiler::includeComponent(
								"bitrix:sale.basket.basket.small.mail",
								"aspro_basket",
								Array(
									"COLUMNS_LIST" => array("NAME", "DISCOUNT_FORMATED", "PRICE_FORMATED"),
									"COMPONENT_TEMPLATE" => ".default",
									"PATH_TO_BASKET" => "/basket/",
									"PATH_TO_ORDER" => "/order/",
									"SHOW_DELAY" => "Y",
									"SHOW_NOTAVAIL" => "Y",
									"SHOW_SUBSCRIBE" => "Y",
									"SITE_ID" => "%SITE_ID%",
									"SITE_ADDRESS" => "%SITE_ADDRESS%",
									"THEME_COLOR" => "%THEME_COLOR%",
									"SHOW_SUBSCRIBE" => "Y",
									"BASKET_PAGE" => "%BASKET_PAGE_LINK%",
									"USER_ID" => "{#USER_ID#}"
								)
							);?>
						</div>

						<div data-bx-block-editor-block-type="component">
							<?EventMessageThemeCompiler::includeComponent(
								"bitrix:sale.bigdata.personal.mail",
								"aspro_bigdata",
								Array(
									"COMPOSITE_FRAME_MODE" => "A",
									"COMPOSITE_FRAME_TYPE" => "AUTO",
									"SITE_ID" => "%SITE_ID%",
									"SITE_ADDRESS" => "%SITE_ADDRESS%",
									"THEME_COLOR" => "%THEME_COLOR%",
									"TITLE" => "%PERSONAL_BIG_DATA%",
									"CATALOG_PAGE" => "/catalog/",
									"SHOW_CATALOG" => "Y",
									"USER_ID" => "{#USER_ID#}"
								)
							);?>
						</div>

						<div data-bx-block-editor-block-type="component">
							<?EventMessageThemeCompiler::includeComponent(
								"bitrix:news.list.mail",
								"aspro_tizers",
								Array(
									"ACTIVE_DATE_FORMAT" => "d.m.Y",
									"CACHE_FILTER" => "N",
									"CACHE_GROUPS" => "N",
									"CACHE_TIME" => "3600",
									"CACHE_TYPE" => "A",
									"CHECK_DATES" => "Y",
									"COMPOSITE_FRAME_MODE" => "A",
									"COMPOSITE_FRAME_TYPE" => "AUTO",
									"DETAIL_URL" => "",
									"DISPLAY_DATE" => "Y",
									"DISPLAY_NAME" => "Y",
									"DISPLAY_PICTURE" => "Y",
									"DISPLAY_PREVIEW_TEXT" => "Y",
									"FIELD_CODE" => array("", ""),
									"FILTER_NAME" => "",
									"HIDE_LINK_WHEN_NO_DETAIL" => "N",
									"SITE_ADDRESS" => "%SITE_ADDRESS%",
									"IBLOCK_ID" => "%TIZER_IBLOCK_ID%",
									"IBLOCK_TYPE" => "aspro_optimus_content",
									"INCLUDE_SUBSECTIONS" => "Y",
									"NEWS_COUNT" => "3",
									"PARENT_SECTION" => "",
									"PARENT_SECTION_CODE" => "",
									"PREVENT_SEND_IF_NO_NEWS" => "N",
									"PREVIEW_TRUNCATE_LEN" => "",
									"PROPERTY_CODE" => array("", ""),
									"SENDER_CHAIN_ID" => "{#SENDER_CHAIN_ID#}",
									"SORT_BY1" => "ACTIVE_FROM",
									"SORT_BY2" => "SORT",
									"SORT_ORDER1" => "DESC",
									"SORT_ORDER2" => "ASC"
								),
								false
							);?>
						</div>
						
					</td>
				</tr>
			</table>
		</td>
	</tr>
</table>65   5890|/aspro.optimus/preset/template/aspro_order_info.php|55518cb7<table class="mail-grid" width="600" border="0" cellpadding="0" cellspacing="0">
	<tr>
		<td>
			<table class="mail-grid-cell"   width="100%" border="0" cellspacing="0" cellpadding="0" align="center">
				<tr>
					<td data-bx-block-editor-place="body">

						<!-- content title -->
						<div data-bx-block-editor-block-type="text">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockInn bxBlockInnText bxColored">
											<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td valign="top" class="bxBlockPadding1 bxBlockContentText bxBlockHeader">													
															<div class="title">
																<h2>%HEADER_ORDER_INFO%</h2>
															</div>
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
						<!-- /content title -->

						<div data-bx-block-editor-block-type="text">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockInn bxBlockInnText">
											<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td valign="top" class="bxBlockPadding bxBlockContentText">
															%TEXT_ORDER_INFO%
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<div data-bx-block-editor-block-type="component">
							<?EventMessageThemeCompiler::includeComponent(
								"bitrix:sale.personal.order.detail.mail",
								"aspro_full_info",
								Array(
									"ACTIVE_DATE_FORMAT" => "d.m.Y",
									"CACHE_TIME" => "3600",
									"CACHE_TYPE" => "A",
									"COMPOSITE_FRAME_MODE" => "A",
									"COMPOSITE_FRAME_TYPE" => "AUTO",
									"CUSTOM_SELECT_PROPS" => array("NAME", "QUANTITY"),
									"ID" => "{#ORDER_ID#}",
									"PATH_TO_CANCEL" => "/personal/cancel/ORDER_ID",
									"PATH_TO_LIST" => "",
									"PATH_TO_PAYMENT" => "payment.php",
									"PICTURE_HEIGHT" => "110",
									"PICTURE_RESAMPLE_TYPE" => "1",
									"PICTURE_WIDTH" => "110",
									"PROP_1" => array(),
									"PROP_2" => array(),
									"SHOW_ORDER_BASE" => "Y",
									"SHOW_ORDER_BASKET" => "Y",
									"SHOW_ORDER_BUYER" => "Y",
									"SHOW_ORDER_DELIVERY" => "Y",
									"SHOW_ORDER_PARAMS" => "Y",
									"SHOW_ORDER_PAYMENT" => "Y",
									"SHOW_ORDER_SUM" => "Y",
									"SHOW_ORDER_USER" => "Y",									
									"SITE_ID" => "%SITE_ID%",
									"THEME_COLOR" => "%THEME_COLOR%",
									"PERSONAL_PAGE" => "/personal/",
									"SHOW_PERSONAL" => "Y",
								)
							);?>
						</div>

						<div data-bx-block-editor-block-type="text">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockInn bxBlockInnText">
											<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td valign="top" class="bxBlockPadding bxBlockContentText">
															%TEXT_ORDER_INFO_BOTTOM%
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<div data-bx-block-editor-block-type="button">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockButton">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockPadding bxBlockInn bxBlockInnButton">
											<table align="center" border="0" cellpadding="0" cellspacing="0" class="bxBlockContentButtonEdge">
												<tbody>
													<tr>
														<td valign="top">
															<a class="bxBlockContentButton" style="background:%THEME_COLOR%" title="%MORE_ITEMS%" href="/catalog/" target="_blank">
																%MORE_ITEMS%
															</a>
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
						
						<div data-bx-block-editor-block-type="component">
							<?EventMessageThemeCompiler::includeComponent(
								"bitrix:news.list.mail",
								"aspro_tizers",
								Array(
									"ACTIVE_DATE_FORMAT" => "d.m.Y",
									"CACHE_FILTER" => "N",
									"CACHE_GROUPS" => "N",
									"CACHE_TIME" => "3600",
									"CACHE_TYPE" => "A",
									"CHECK_DATES" => "Y",
									"COMPOSITE_FRAME_MODE" => "A",
									"COMPOSITE_FRAME_TYPE" => "AUTO",
									"DETAIL_URL" => "",
									"DISPLAY_DATE" => "Y",
									"DISPLAY_NAME" => "Y",
									"DISPLAY_PICTURE" => "Y",
									"DISPLAY_PREVIEW_TEXT" => "Y",
									"FIELD_CODE" => array("", ""),
									"FILTER_NAME" => "",
									"HIDE_LINK_WHEN_NO_DETAIL" => "N",
									"SITE_ADDRESS" => "%SITE_ADDRESS%",
									"IBLOCK_ID" => "%TIZER_IBLOCK_ID%",
									"IBLOCK_TYPE" => "aspro_optimus_content",
									"INCLUDE_SUBSECTIONS" => "Y",
									"NEWS_COUNT" => "3",
									"PARENT_SECTION" => "",
									"PARENT_SECTION_CODE" => "",
									"PREVENT_SEND_IF_NO_NEWS" => "N",
									"PREVIEW_TRUNCATE_LEN" => "",
									"PROPERTY_CODE" => array("", ""),
									"SENDER_CHAIN_ID" => "{#SENDER_CHAIN_ID#}",
									"SORT_BY1" => "ACTIVE_FROM",
									"SORT_BY2" => "SORT",
									"SORT_ORDER1" => "DESC",
									"SORT_ORDER2" => "ASC",
								),
								false
							);?>
						</div>

					</td>
				</tr>
			</table>
		</td>
	</tr>
</table>58   4020|/aspro.optimus/preset/template/aspro_all.php|9d0e85fd<table class="mail-grid" width="600" border="0" cellpadding="0" cellspacing="0">
	<tr>
		<td>
			<table class="mail-grid-cell"   width="100%" border="0" cellspacing="0" cellpadding="0" align="center">
				<tr>
					<td data-bx-block-editor-place="body">

						<!-- content title -->
						<div data-bx-block-editor-block-type="text">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockInn bxBlockInnText bxColored">
											<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td valign="top" class="bxBlockPadding1 bxBlockContentText bxBlockHeader">													
															<div class="title">
																<h2>%HEADER%</h2>
															</div>
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
						<!-- /content title -->
						
						<div data-bx-block-editor-block-type="text">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockInn bxBlockInnText">
											<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
												<tbody>
													<tr>
														<td valign="top" class="bxBlockPadding bxBlockContentText">
															
															<div class="subttle"><h3>%SUB_HEADER%</h3></div>
															<br>%TEXT1%
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<div data-bx-block-editor-block-type="button">
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockButton">
								<tbody class="bxBlockOut">
									<tr>
										<td valign="top" class="bxBlockPadding bxBlockInn bxBlockInnButton">
											<table align="center" border="0" cellpadding="0" cellspacing="0" class="bxBlockContentButtonEdge">
												<tbody>
													<tr>
														<td valign="top">
															<a class="bxBlockContentButton" style="background:%THEME_COLOR%" title="%BUTTON%" href="/catalog/" target="_blank">
																%BUTTON%
															</a>
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<div data-bx-block-editor-block-type="component">
							<?EventMessageThemeCompiler::includeComponent(
								"bitrix:news.list.mail",
								"aspro_tizers",
								Array(
									"ACTIVE_DATE_FORMAT" => "d.m.Y",
									"CACHE_FILTER" => "N",
									"CACHE_GROUPS" => "N",
									"CACHE_TIME" => "3600",
									"CACHE_TYPE" => "A",
									"CHECK_DATES" => "Y",
									"COMPOSITE_FRAME_MODE" => "A",
									"COMPOSITE_FRAME_TYPE" => "AUTO",
									"DETAIL_URL" => "",
									"DISPLAY_DATE" => "Y",
									"DISPLAY_NAME" => "Y",
									"DISPLAY_PICTURE" => "Y",
									"DISPLAY_PREVIEW_TEXT" => "Y",
									"FIELD_CODE" => array("", ""),
									"FILTER_NAME" => "",
									"HIDE_LINK_WHEN_NO_DETAIL" => "N",
									"SITE_ADDRESS" => "%SITE_ADDRESS%",
									"IBLOCK_ID" => "%TIZER_IBLOCK_ID%",
									"IBLOCK_TYPE" => "aspro_optimus_content",
									"INCLUDE_SUBSECTIONS" => "Y",
									"NEWS_COUNT" => "3",
									"PARENT_SECTION" => "",
									"PARENT_SECTION_CODE" => "",
									"PREVENT_SEND_IF_NO_NEWS" => "N",
									"PREVIEW_TRUNCATE_LEN" => "",
									"PROPERTY_CODE" => array("", ""),
									"SENDER_CHAIN_ID" => "{#SENDER_CHAIN_ID#}",
									"SORT_BY1" => "ACTIVE_FROM",
									"SORT_BY2" => "SORT",
									"SORT_ORDER1" => "DESC",
									"SORT_ORDER2" => "ASC"
								),
								false
							);?>
						</div>
						
					</td>
				</tr>
			</table>
		</td>
	</tr>
</table>72   7163|/aspro.optimus/lang/ru/classes/general/CAsproMarketing.php|fe74539f<?
$MESS['ASPRO_TEMPLATE'] = 'Aspro:  ';
$MESS['ASPRO_TEMPLATE_BASKET'] = 'Aspro:   ';
$MESS['ASPRO_TEMPLATE_BASKET_COUPON'] = 'Aspro:     ';
$MESS['ASPRO_TEMPLATE_YANDEX_MARKET'] = 'Aspro:     ';
$MESS['ASPRO_TEMPLATE_ORDER_INFO'] = 'Aspro:    ';
$MESS['ASPRO_TEMPLATE_SALE'] = 'Aspro:    .';
$MESS['ASPRO_TEMPLATE_NO_AUTH'] = 'Aspro:   ';

$MESS['HEADER_FORGOT_BASKET'] = '   ';
$MESS['HEADER_YANDEX_MARKET'] = '    #SITE_NAME#';
$MESS['HEADER_ORDER_INFO'] = '  ';
$MESS['HEADER_SALE'] = '   ';
$MESS['HEADER_NO_AUTH'] = '      ';

$MESS['WELCOME_TEXT'] = ', #NAME#';

$MESS['CUSTOM_TEXT'] = ' ';
$MESS['SUBSCRIBE_TEXT'] = ' ';

$MESS['TEXT_BASKET'] = '<p>     -?</p><p> ,      ,    .   ,          .      ,        !</p><p>           .     <a href="mailto:#EMAIL_SALE#">#EMAIL_SALE#</a></p>';
$MESS['TEXT_BASKET_COUPON_UNDER'] = '<p>    !</p><p>,     <a href="#SITE_ADDRESS#/basket/" target="_blank"></a>,      .      ,      5%   .    ?       .</p>';
$MESS['TEXT_BASKET_COUPON_BOTTOM'] = '<p>           .     <a href="mailto:#EMAIL_SALE#">#EMAIL_SALE#</a></p><p>:    1 !</p>';
$MESS['TEXT_YANDEX_MARKET_UNDER'] = '<p>!        -        .</p>';
$MESS['TEXT_YANDEX_MARKET_BOTTOM'] = '   ,   ,      ..     ,   ,      .';
$MESS['TEXT_YANDEX_MARKET_BOTTOM2'] = ',   !';
$MESS['TEXT_ORDER_INFO'] = '<p>   !</p><p><div class="subttle"><h3>, #NAME#</h3></div></p><p> ,           .         1     .</p><p class="phones_block_ext">   ,  , ,   #PHONES#    <a href="mailto:#EMAIL_SALE#">#EMAIL_SALE#</a>.</p><p> :</p>';
$MESS['TEXT_ORDER_INFO_BOTTOM'] = '<p>  <a href="/help/delivery/"></a>  <a href="/help/warranty/"></a><br> ? <a href="/contacts/">  </a>!</p><p>,     !</p>';
$MESS['TEXT_SALE'] = '<p>  !     -    ,      .             !</p><p>           .     <a href="mailto:#EMAIL_SALE#">#EMAIL_SALE#</a>.</p>';
$MESS['TEXT_NO_AUTH_UNDER'] = '<p>       :(<br>#NAME#,       -.  !</p><p>,         ,      ,        .</p>';
$MESS['TEXT_NO_AUTH_BOTTOM'] = '<p>        ,        .</p><p></p>';

$MESS['BASKET_TITLE'] = '   ';

$MESS['BASKET_PAGE_LINK'] = '  ';
$MESS['ORDER_PAGE_LINK'] = '   ';
$MESS['BUTTON_REVIEW'] = ' ';
$MESS['PERSONAL_BIG_DATA'] = ' ';
$MESS['NO_AUTH_GOODS_TITLE'] = '    ';
$MESS['MORE_ITEMS'] = ' ';
$MESS['SHOW_CATALOG_LINK'] = ' ';

$MESS['VK'] = '';
$MESS['UNSUB_TEXT'] = '   ,      <a href="#SITE_ADDRESS#">#SITE_NAME#</a>';
$MESS['UNSUB_LINK_TEXT'] = '   <a href="#UNSUBSCRIBE_LINK#"></a>.';
?>66   17519|/aspro.optimus/lang/ru/classes/general/COptimus.php|35b90d08<?
$MESS["SCOM_BUTTON_NAME"] = "#BR#";
$MESS["SCOM_BUTTON_DESCRIPTION"] = "      ";
$MESS["STOM_BUTTON_TITLE_W1"] = "      ";
$MESS["STOM_BUTTON_NAME_W1"] = "<b>  </b>";
$MESS["STOM_BUTTON_TITLE_W3"] = "  ";
$MESS["STOM_BUTTON_NAME_W3"] = " -";
$MESS["STOM_BUTTON_CONFIRM_W2"] = " Aspro,    ,  .         .  -?";
$MESS["OPTIMUS_MODULE_NOT_INSTALLED"] = ' &laquo;: Optimus -  -&raquo;  . , <a href="/bitrix/admin/partner_modules.php"> </a>   .';
$MESS["ERROR_INCLUDE_MODULE"] = '  ';
$MESS["NO_RIGHTS_FOR_VIEWING"] = "   ";
$MESS["MAIN_OPTIONS"] = "  &laquo;#SITE_NAME#&raquo; (#SITE_ID#)";
$MESS["MAIN_OPTIONS_TITLE"] = " ";
$MESS["TEMPLATE_OPTIONS"] = "";
$MESS["INDEXPAGE_OPTIONS"] = " ";
$MESS['BANNER_ANIMATIONTYPE'] = '   ';
$MESS['BANNER_SLIDESSHOWSPEED'] = '    ()';
$MESS['BANNER_ANIMATIONSPEED'] = '    ()';
$MESS['ANIMATION_SLIDE_HORIZONTAL'] = '  (slide)';
$MESS['ANIMATION_SLIDE_VERTICAL'] = '  (slide)';
$MESS['ANIMATION_FADE'] = ' (fade)';
$MESS["ADDTOBASKET_OPTIONS"] = "  ";
$MESS["QUANTITY_OPTIONS"] = "  ";
$MESS["SEARCH_OPTIONS"] = "    ";
$MESS["SEARCH_IB_TYPE"] = " ";
$MESS["SEARCH_IB_ID"] = " ";
$MESS["COLOR_THEME"] = " ";
$MESS["COLOR_THEME_YELLOW"] = "";
$MESS["COLOR_THEME_ORANGE"] = "";
$MESS["COLOR_THEME_RED"] = "";
$MESS["COLOR_THEME_MAGENTA"] = " ";
$MESS["COLOR_THEME_ORCHID"] = "";
$MESS["COLOR_THEME_BLUE"] = "";
$MESS["COLOR_THEME_NAVY"] = "";
$MESS["COLOR_THEME_AZURE_KRAYOLA"] = " ";
$MESS["COLOR_THEME_GREEN_SEA"] = " ";
$MESS["COLOR_THEME_GREEN"] = "";
$MESS["COLOR_THEME_IRISH_GREEN"] = " ";
$MESS["COLOR_THEME_CUSTOM"] = " ";
$MESS["CUSTOM_COLOR_THEME"] = "  (hex)";

$MESS["BGCOLOR_THEME"] = " ";
$MESS["BGCOLOR_THEME_LIGHT"] = "";
$MESS["BGCOLOR_THEME_DARK"] = "";
$MESS["CUSTOM_BGCOLOR_THEME"] = "   (hex)";

$MESS["BGCOLOR_THEME_FOOTER_SIDE"] = "      ";
$MESS["YES_OPTION"] = "";
$MESS["NO_OPTION"] = "";

$MESS["PHONE_MASK"] = "  ";
$MESS["SHOW_BREADCRUMBS_CATALOG_SUBSECTIONS"] = "        ";
$MESS["SHOW_BASKET_PRINT"] = " ";
$MESS["SHOW_BASKET_ONADDTOCART"] = "      ";
$MESS["EXPRESSIONS_OPTIONS"] = "  ";
$MESS["BUYNOPRICEGGOODS"] = "     / ";
$MESS["BUYNOPRICEGGOODS_ORDER"] = "  \" \"  ";
$MESS["BUYNOPRICEGGOODS_NOTHING"] = "  ";
$MESS["BUYMISSINGGOODS"] = "    ";
$MESS["BUYMISSINGGOODS_ADD"] = "  \" \"";
$MESS["BUYMISSINGGOODS_ORDER"] = "  \" \"  ";
$MESS["EXPRESSION_ADDTOBASKET_BUTTON"] = "  \"<i> </i>\"";
$MESS["EXPRESSION_ADDTOBASKET_BUTTON_DEFAULT"] = " ";
$MESS["EXPRESSION_ADDEDTOBASKET_BUTTON_DEFAULT"] = " ";
$MESS["EXPRESSION_SUBSCRIBE_BUTTON"] = "  \"<i></i>\"";
$MESS["EXPRESSION_SUBSCRIBE_BUTTON_DEFAULT"] = "";
$MESS["EXPRESSION_SUBSCRIBED_BUTTON"] = "  \"<i></i>\"";
$MESS["EXPRESSION_SUBSCRIBED_BUTTON_DEFAULT"] = "";
$MESS["EXPRESSION_ORDER_BUTTON"] = "  \"<i> </i>\"";
$MESS["EXPRESSION_ORDER_BUTTON_DEFAULT"] = " ";
$MESS["EXPRESSION_ORDER_TEXT"] = "   \"<i> </i>\"";
$MESS["EXPRESSION_ORDER_TEXT_DEFAULT"] = "         ";
$MESS["EXPRESSION_READ_MORE_OFFERS_DEFAULT"] = "";
$MESS["BUYMISSINGGOODS_SUBSCRIBE"] = "  \"\"";
$MESS["BUYMISSINGGOODS_NOTHING"] = "  ";
$MESS["SHOW_QUANTITY_NOTE"] = "      <b>Ctrl</b>";
$MESS["SHOW_QUANTITY_FOR_GROUPS"] = "    ";
$MESS["SHOW_QUANTITY_COUNT_FOR_GROUPS"] = "     ";
$MESS["USE_WORD_EXPRESSION"] = "    ,     \"<i></i>\" / \"<i></i>\" / \"<i></i>\"";
$MESS["MAX_AMOUNT"] = " ,  ,   \"<i></i>\" (, )";
$MESS["MIN_AMOUNT"] = " ,  ,   \"<i></i>\" (, )";
$MESS["EXPRESSION_FOR_MAX"] = "  \"<i></i>\"";
$MESS["EXPRESSION_FOR_MAX_DEFAULT"] = "";
$MESS["EXPRESSION_FOR_MIN"] = "  \"<i></i>\"";
$MESS["EXPRESSION_FOR_MIN_DEFAULT"] = "";
$MESS["EXPRESSION_FOR_MID"] = "  \"<i></i>\"";
$MESS["EXPRESSION_FOR_MID_DEFAULT"] = "";
$MESS["EXPRESSION_FOR_EXISTS"] = "  \"<i>  </i>\"";
$MESS["EXPRESSION_FOR_EXISTS_DEFAULT"] = "  ";
$MESS["EXPRESSION_FOR_NOTEXISTS"] = "  \"<i>  </i>\"";
$MESS["EXPRESSION_FOR_NOTEXISTS_DEFAULT"] = "  ";
$MESS["USE_PRODUCT_QUANTITY_LIST"] = "          ";
$MESS["USE_PRODUCT_QUANTITY_DETAIL"] = "          ";
$MESS["BANNER_WIDTH"] = " ";
$MESS["BANNER_WIDTH_AUTO"] = "  ";
$MESS["BANNER_WIDTH_WIDE"] = "";
$MESS["BANNER_WIDTH_MIDDLE"] = "";
$MESS["BANNER_WIDTH_NARROW"] = "";
$MESS["HEAD"] = " ";
$MESS["TYPE_1"] = "1";
$MESS["TYPE_2"] = "2";
$MESS["TYPE_3"] = "3";
$MESS["TYPE_4"] = "4";
$MESS["TYPE_5"] = "5";
$MESS["TYPE_6"] = "6";
$MESS["TYPE_7"] = "7";
$MESS["TYPE_8"] = "8";
$MESS["LOGO_IMAGE"] = " ";
$MESS["FAVICON_IMAGE"] = "Favicon 16x16";
$MESS["APPLE_TOUCH_ICON_IMAGE"] = "Web Clip Icon 180x180";
$MESS["HEAD_COLOR"] = " ";
$MESS["HEAD_COLOR_WHITE"] = "";
$MESS["HEAD_COLOR_THEME"] = "";
$MESS["BASKET"] = "";
$MESS["BASKET_NORMAL"] = " ";
$MESS["BASKET_FLY"] = "";
$MESS["STORES"] = "   ";
$MESS["LIGHT_STORES"] = "";
$MESS["DARK_STORES"] = "";
$MESS["STORES_SOURCE"] = "  ";
$MESS["STORES_SOURCE_STORES"] = "";
$MESS["STORES_SOURCE_STORES_IBLOCK"] = "";
$MESS["DETAIL"] = "";
$MESS["ADDRESS"] = "";
$MESS["PHONE"] = "";
$MESS["EMAIL"] = "Email";
$MESS["SCHEDULE"] = " ";
$MESS["METRO"] = " ";
$MESS["BACK_STORE_LIST"] = "   ";
$MESS["TYPE_SKU"] = " SKU";
$MESS["TYPE_VIEW_FILTER"] = " ";
$MESS["VERTICAL"] = "";
$MESS["HORIZONTAL"] = "";
$MESS["CT_NAME_GB"] = " ";
$MESS["CT_NAME_MB"] = " ";
$MESS["CT_NAME_KB"] = " ";
$MESS["CT_NAME_b"] = " ";
$MESS["THEME_SWITCHER"] = " ";
$MESS["YES"] = "";
$MESS["NO"] = "";
$MESS["EMAIL_IS_ALREADY_EXISTS"] = "Email #EMAIL#  ";
$MESS["EXPAND_BLOCK"] = "";
$MESS['SCROLLTOTOP_OPTIONS'] = ' ""';
$MESS['SCROLLTOTOP_TYPE'] = '  ""';
$MESS['SCROLLTOTOP_TYPE_NONE'] = '';
$MESS['SCROLLTOTOP_TYPE_ROUND_COLOR'] = ' ';
$MESS['SCROLLTOTOP_TYPE_ROUND_GREY'] = ' ';
$MESS['SCROLLTOTOP_TYPE_ROUND_WHITE'] = ' ';
$MESS['SCROLLTOTOP_TYPE_RECT_COLOR'] = ' ';
$MESS['SCROLLTOTOP_TYPE_RECT_GREY'] = ' ';
$MESS['SCROLLTOTOP_TYPE_RECT_WHITE'] = ' ';
$MESS['SCROLLTOTOP_POSITION'] = '  ""';
$MESS['SCROLLTOTOP_POSITION_TOUCH'] = '  ';
$MESS['SCROLLTOTOP_POSITION_PADDING'] = '    ';
$MESS['SCROLLTOTOP_POSITION_CONTENT'] = '   ';

$MESS['ONECLICKBUY_OPTIONS'] = '  1 ';
$MESS['ONECLICKBUY_PERSON_TYPE'] = ' ';
$MESS['ONECLICKBUY_DELIVERY'] = ' ';
$MESS['ONECLICKBUY_PAYMENT'] = ' ';
$MESS['ONECLICKBUY_CURRENCY'] = '';
$MESS['ONECLICKBUY_PROPERTIES'] = '';
$MESS['ONECLICKBUY_REQUIRED_PROPERTIES'] = '   ';
$MESS['ONECLICKBUY_PROPERTIES_FIO'] = '';
$MESS['ONECLICKBUY_PROPERTIES_PHONE'] = ' ';
$MESS['ONECLICKBUY_PROPERTIES_EMAIL'] = 'E-mail';
$MESS['ONECLICKBUY_PROPERTIES_COMMENT'] = '  ';

$MESS["MIN_ORDER_PRICES"] = "  ";
$MESS["MIN_ORDER_PRICE"] = "  ";
$MESS["MIN_ORDER_PRICE_TEXT"] = "  ";
$MESS["MIN_ORDER_PRICE_TEXT_EXAMPLE"] = "<b>   #PRICE#</b><br/>,     ";
$MESS["NO_SITE_INSTALLED"] = '      &laquo;: Optimus -  -&raquo;<br />
<input type="button" value="" style="margin-top: 10px;" onclick="document.location.href=\'/bitrix/admin/wizard_install.php?lang=ru&wizardName=aspro:optimus&#SESSION_ID#\'">';
$MESS["ONE_CLICK_BUY"] = "  1 ";
$MESS["QUICK_ORDER"] = " ";
$MESS["SHOW_ONECLICKBUY_ON_BASKET_PAGE_TITLE"] = "     ";
$MESS["YANDEX_GOOGLE_COUNTER_BLOCK"] = "/Google ";
$MESS["YANDEX_COUNTER_TITLE"] = "    ";
$MESS["GOOGLE_COUNTER_TITLE"] = "   google analytics/google tag manager";
$MESS["YANDEX_ECOMERCE_TITLE"] = "   ";
$MESS["GOOGLE_ECOMERCE_TITLE"] = "   google";
$MESS["TO_BASKET_TITLE"] = "  \"   \"";
$MESS["ORDER_START_TITLE"] = "  \"  \"";
$MESS["ORDER_SUCCESS_TITLE"] = "  \"  \"";
$MESS["QUICK_ORDER_SUCCESS_TITLE"] = "  \"   \"";
$MESS["ONE_CLICK_BUY_SUCCESS_TITLE"] = "  \"  1 \"";
$MESS["BASKET_ADD_EVENT_TITLE"] = "  \"   \"  google tag manager";
$MESS["BASKET_REMOVE_EVENT_TITLE"] = "  \"   \"  google tag manager";
$MESS["CHECKOUT_ORDER_EVENT_TITLE"] = "  \"  \"  google tag manager";
$MESS["SHOW_SECTION_DESCRIPTION"] = "     ";
$MESS["TOP_SECTION"] = "  ";
$MESS["BOTTOM_SECTION"] = "  ";
$MESS["BOTH_SECTION"] = "    ";
$MESS["TOP_SECTION_DESCRIPTION"] = "   ";
$MESS["BOTTOM_SECTION_DESCRIPTION"] = "   ";
$MESS["DESCRIPTION_SECTION"] = "";
$MESS["SEO_DESCRIPTION_SECTION"] = "   SEO";
$MESS["EXPRESSION_FOR_FREE_DELIVERY"] = "  \"<i> 0 .</i>\"";
$MESS["EXPRESSION_FOR_FREE_DELIVERY_DEFAULT"] = "";
$MESS["SHOW_MORE_ITEM_MENU_LINK"] = "  \" \"  ";
$MESS["HIDE_SITE_NAME_TITLE"] = "      ";
$MESS["ONE_CLICK_BUY_OPTIONS"] = "  1 ";
$MESS["ONE_CLICK_BUY_DELIVERY_OPTIONS"] = " ";
$MESS["ONE_CLICK_BUY_PAYMENT_OPTIONS"] = " ";
$MESS["ONE_CLICK_BUY_CURRENCY_OPTIONS"] = "";
$MESS["MAX_DEPTH_MENU"] = "  ";
$MESS["MENU_COLOR"] = " ";
$MESS["MENU_COLOR_COLORED"] = "";
$MESS["MENU_COLOR_LIGHT"] = "";
$MESS["MENU_COLOR_DARK"] = "";

$MESS["MENU_POSITION"] = "   ";
$MESS["TOP_MENU_HOVER"] = "  ";
$MESS["LINE_MENU_HOVER"] = "   ";
$MESS["MENU_POSITION_MAIN"] = "   ";
$MESS["NO_LOGO_BG"] = "     ";

$MESS["DETAIL_PICTURE_MODE_IMG"] = "";
$MESS["DETAIL_PICTURE_MODE_POPUP"] = " ";
$MESS["DETAIL_PICTURE_MODE_MAGNIFIER"] = "";
$MESS["DETAIL_PICTURE_MODE"] = "   ";

$MESS["VIEWED_TYPE"] = "   ";
$MESS["VIEWED_TYPE_LOGIC_COOKIE"] = "";
$MESS["VIEWED_TYPE_LOGIC_COMPONENT"] = "";

$MESS["CATALOG_IBLOCK_ID"] = "ID  ";

$MESS["USER_CABINET"] = " ";
$MESS["USER_AUTH"] = "\";
$MESS["COMPARE_BLOCK"] = " ";
?>
72   7163|/aspro.optimus/lang/en/classes/general/CAsproMarketing.php|fe74539f<?
$MESS['ASPRO_TEMPLATE'] = 'Aspro:  ';
$MESS['ASPRO_TEMPLATE_BASKET'] = 'Aspro:   ';
$MESS['ASPRO_TEMPLATE_BASKET_COUPON'] = 'Aspro:     ';
$MESS['ASPRO_TEMPLATE_YANDEX_MARKET'] = 'Aspro:     ';
$MESS['ASPRO_TEMPLATE_ORDER_INFO'] = 'Aspro:    ';
$MESS['ASPRO_TEMPLATE_SALE'] = 'Aspro:    .';
$MESS['ASPRO_TEMPLATE_NO_AUTH'] = 'Aspro:   ';

$MESS['HEADER_FORGOT_BASKET'] = '   ';
$MESS['HEADER_YANDEX_MARKET'] = '    #SITE_NAME#';
$MESS['HEADER_ORDER_INFO'] = '  ';
$MESS['HEADER_SALE'] = '   ';
$MESS['HEADER_NO_AUTH'] = '      ';

$MESS['WELCOME_TEXT'] = ', #NAME#';

$MESS['CUSTOM_TEXT'] = ' ';
$MESS['SUBSCRIBE_TEXT'] = ' ';

$MESS['TEXT_BASKET'] = '<p>     -?</p><p> ,      ,    .   ,          .      ,        !</p><p>           .     <a href="mailto:#EMAIL_SALE#">#EMAIL_SALE#</a></p>';
$MESS['TEXT_BASKET_COUPON_UNDER'] = '<p>    !</p><p>,     <a href="#SITE_ADDRESS#/basket/" target="_blank"></a>,      .      ,      5%   .    ?       .</p>';
$MESS['TEXT_BASKET_COUPON_BOTTOM'] = '<p>           .     <a href="mailto:#EMAIL_SALE#">#EMAIL_SALE#</a></p><p>:    1 !</p>';
$MESS['TEXT_YANDEX_MARKET_UNDER'] = '<p>!        -        .</p>';
$MESS['TEXT_YANDEX_MARKET_BOTTOM'] = '   ,   ,      ..     ,   ,      .';
$MESS['TEXT_YANDEX_MARKET_BOTTOM2'] = ',   !';
$MESS['TEXT_ORDER_INFO'] = '<p>   !</p><p><div class="subttle"><h3>, #NAME#</h3></div></p><p> ,           .         1     .</p><p class="phones_block_ext">   ,  , ,   #PHONES#    <a href="mailto:#EMAIL_SALE#">#EMAIL_SALE#</a>.</p><p> :</p>';
$MESS['TEXT_ORDER_INFO_BOTTOM'] = '<p>  <a href="/help/delivery/"></a>  <a href="/help/warranty/"></a><br> ? <a href="/contacts/">  </a>!</p><p>,     !</p>';
$MESS['TEXT_SALE'] = '<p>  !     -    ,      .             !</p><p>           .     <a href="mailto:#EMAIL_SALE#">#EMAIL_SALE#</a>.</p>';
$MESS['TEXT_NO_AUTH_UNDER'] = '<p>       :(<br>#NAME#,       -.  !</p><p>,         ,      ,        .</p>';
$MESS['TEXT_NO_AUTH_BOTTOM'] = '<p>        ,        .</p><p></p>';

$MESS['BASKET_TITLE'] = '   ';

$MESS['BASKET_PAGE_LINK'] = '  ';
$MESS['ORDER_PAGE_LINK'] = '   ';
$MESS['BUTTON_REVIEW'] = ' ';
$MESS['PERSONAL_BIG_DATA'] = ' ';
$MESS['NO_AUTH_GOODS_TITLE'] = '    ';
$MESS['MORE_ITEMS'] = ' ';
$MESS['SHOW_CATALOG_LINK'] = ' ';

$MESS['VK'] = '';
$MESS['UNSUB_TEXT'] = '   ,      <a href="#SITE_ADDRESS#">#SITE_NAME#</a>';
$MESS['UNSUB_LINK_TEXT'] = '   <a href="#UNSUBSCRIBE_LINK#"></a>.';
?>66   17519|/aspro.optimus/lang/en/classes/general/COptimus.php|35b90d08<?
$MESS["SCOM_BUTTON_NAME"] = "#BR#";
$MESS["SCOM_BUTTON_DESCRIPTION"] = "      ";
$MESS["STOM_BUTTON_TITLE_W1"] = "      ";
$MESS["STOM_BUTTON_NAME_W1"] = "<b>  </b>";
$MESS["STOM_BUTTON_TITLE_W3"] = "  ";
$MESS["STOM_BUTTON_NAME_W3"] = " -";
$MESS["STOM_BUTTON_CONFIRM_W2"] = " Aspro,    ,  .         .  -?";
$MESS["OPTIMUS_MODULE_NOT_INSTALLED"] = ' &laquo;: Optimus -  -&raquo;  . , <a href="/bitrix/admin/partner_modules.php"> </a>   .';
$MESS["ERROR_INCLUDE_MODULE"] = '  ';
$MESS["NO_RIGHTS_FOR_VIEWING"] = "   ";
$MESS["MAIN_OPTIONS"] = "  &laquo;#SITE_NAME#&raquo; (#SITE_ID#)";
$MESS["MAIN_OPTIONS_TITLE"] = " ";
$MESS["TEMPLATE_OPTIONS"] = "";
$MESS["INDEXPAGE_OPTIONS"] = " ";
$MESS['BANNER_ANIMATIONTYPE'] = '   ';
$MESS['BANNER_SLIDESSHOWSPEED'] = '    ()';
$MESS['BANNER_ANIMATIONSPEED'] = '    ()';
$MESS['ANIMATION_SLIDE_HORIZONTAL'] = '  (slide)';
$MESS['ANIMATION_SLIDE_VERTICAL'] = '  (slide)';
$MESS['ANIMATION_FADE'] = ' (fade)';
$MESS["ADDTOBASKET_OPTIONS"] = "  ";
$MESS["QUANTITY_OPTIONS"] = "  ";
$MESS["SEARCH_OPTIONS"] = "    ";
$MESS["SEARCH_IB_TYPE"] = " ";
$MESS["SEARCH_IB_ID"] = " ";
$MESS["COLOR_THEME"] = " ";
$MESS["COLOR_THEME_YELLOW"] = "";
$MESS["COLOR_THEME_ORANGE"] = "";
$MESS["COLOR_THEME_RED"] = "";
$MESS["COLOR_THEME_MAGENTA"] = " ";
$MESS["COLOR_THEME_ORCHID"] = "";
$MESS["COLOR_THEME_BLUE"] = "";
$MESS["COLOR_THEME_NAVY"] = "";
$MESS["COLOR_THEME_AZURE_KRAYOLA"] = " ";
$MESS["COLOR_THEME_GREEN_SEA"] = " ";
$MESS["COLOR_THEME_GREEN"] = "";
$MESS["COLOR_THEME_IRISH_GREEN"] = " ";
$MESS["COLOR_THEME_CUSTOM"] = " ";
$MESS["CUSTOM_COLOR_THEME"] = "  (hex)";

$MESS["BGCOLOR_THEME"] = " ";
$MESS["BGCOLOR_THEME_LIGHT"] = "";
$MESS["BGCOLOR_THEME_DARK"] = "";
$MESS["CUSTOM_BGCOLOR_THEME"] = "   (hex)";

$MESS["BGCOLOR_THEME_FOOTER_SIDE"] = "      ";
$MESS["YES_OPTION"] = "";
$MESS["NO_OPTION"] = "";

$MESS["PHONE_MASK"] = "  ";
$MESS["SHOW_BREADCRUMBS_CATALOG_SUBSECTIONS"] = "        ";
$MESS["SHOW_BASKET_PRINT"] = " ";
$MESS["SHOW_BASKET_ONADDTOCART"] = "      ";
$MESS["EXPRESSIONS_OPTIONS"] = "  ";
$MESS["BUYNOPRICEGGOODS"] = "     / ";
$MESS["BUYNOPRICEGGOODS_ORDER"] = "  \" \"  ";
$MESS["BUYNOPRICEGGOODS_NOTHING"] = "  ";
$MESS["BUYMISSINGGOODS"] = "    ";
$MESS["BUYMISSINGGOODS_ADD"] = "  \" \"";
$MESS["BUYMISSINGGOODS_ORDER"] = "  \" \"  ";
$MESS["EXPRESSION_ADDTOBASKET_BUTTON"] = "  \"<i> </i>\"";
$MESS["EXPRESSION_ADDTOBASKET_BUTTON_DEFAULT"] = " ";
$MESS["EXPRESSION_ADDEDTOBASKET_BUTTON_DEFAULT"] = " ";
$MESS["EXPRESSION_SUBSCRIBE_BUTTON"] = "  \"<i></i>\"";
$MESS["EXPRESSION_SUBSCRIBE_BUTTON_DEFAULT"] = "";
$MESS["EXPRESSION_SUBSCRIBED_BUTTON"] = "  \"<i></i>\"";
$MESS["EXPRESSION_SUBSCRIBED_BUTTON_DEFAULT"] = "";
$MESS["EXPRESSION_ORDER_BUTTON"] = "  \"<i> </i>\"";
$MESS["EXPRESSION_ORDER_BUTTON_DEFAULT"] = " ";
$MESS["EXPRESSION_ORDER_TEXT"] = "   \"<i> </i>\"";
$MESS["EXPRESSION_ORDER_TEXT_DEFAULT"] = "         ";
$MESS["EXPRESSION_READ_MORE_OFFERS_DEFAULT"] = "";
$MESS["BUYMISSINGGOODS_SUBSCRIBE"] = "  \"\"";
$MESS["BUYMISSINGGOODS_NOTHING"] = "  ";
$MESS["SHOW_QUANTITY_NOTE"] = "      <b>Ctrl</b>";
$MESS["SHOW_QUANTITY_FOR_GROUPS"] = "    ";
$MESS["SHOW_QUANTITY_COUNT_FOR_GROUPS"] = "     ";
$MESS["USE_WORD_EXPRESSION"] = "    ,     \"<i></i>\" / \"<i></i>\" / \"<i></i>\"";
$MESS["MAX_AMOUNT"] = " ,  ,   \"<i></i>\" (, )";
$MESS["MIN_AMOUNT"] = " ,  ,   \"<i></i>\" (, )";
$MESS["EXPRESSION_FOR_MAX"] = "  \"<i></i>\"";
$MESS["EXPRESSION_FOR_MAX_DEFAULT"] = "";
$MESS["EXPRESSION_FOR_MIN"] = "  \"<i></i>\"";
$MESS["EXPRESSION_FOR_MIN_DEFAULT"] = "";
$MESS["EXPRESSION_FOR_MID"] = "  \"<i></i>\"";
$MESS["EXPRESSION_FOR_MID_DEFAULT"] = "";
$MESS["EXPRESSION_FOR_EXISTS"] = "  \"<i>  </i>\"";
$MESS["EXPRESSION_FOR_EXISTS_DEFAULT"] = "  ";
$MESS["EXPRESSION_FOR_NOTEXISTS"] = "  \"<i>  </i>\"";
$MESS["EXPRESSION_FOR_NOTEXISTS_DEFAULT"] = "  ";
$MESS["USE_PRODUCT_QUANTITY_LIST"] = "          ";
$MESS["USE_PRODUCT_QUANTITY_DETAIL"] = "          ";
$MESS["BANNER_WIDTH"] = " ";
$MESS["BANNER_WIDTH_AUTO"] = "  ";
$MESS["BANNER_WIDTH_WIDE"] = "";
$MESS["BANNER_WIDTH_MIDDLE"] = "";
$MESS["BANNER_WIDTH_NARROW"] = "";
$MESS["HEAD"] = " ";
$MESS["TYPE_1"] = "1";
$MESS["TYPE_2"] = "2";
$MESS["TYPE_3"] = "3";
$MESS["TYPE_4"] = "4";
$MESS["TYPE_5"] = "5";
$MESS["TYPE_6"] = "6";
$MESS["TYPE_7"] = "7";
$MESS["TYPE_8"] = "8";
$MESS["LOGO_IMAGE"] = " ";
$MESS["FAVICON_IMAGE"] = "Favicon 16x16";
$MESS["APPLE_TOUCH_ICON_IMAGE"] = "Web Clip Icon 180x180";
$MESS["HEAD_COLOR"] = " ";
$MESS["HEAD_COLOR_WHITE"] = "";
$MESS["HEAD_COLOR_THEME"] = "";
$MESS["BASKET"] = "";
$MESS["BASKET_NORMAL"] = " ";
$MESS["BASKET_FLY"] = "";
$MESS["STORES"] = "   ";
$MESS["LIGHT_STORES"] = "";
$MESS["DARK_STORES"] = "";
$MESS["STORES_SOURCE"] = "  ";
$MESS["STORES_SOURCE_STORES"] = "";
$MESS["STORES_SOURCE_STORES_IBLOCK"] = "";
$MESS["DETAIL"] = "";
$MESS["ADDRESS"] = "";
$MESS["PHONE"] = "";
$MESS["EMAIL"] = "Email";
$MESS["SCHEDULE"] = " ";
$MESS["METRO"] = " ";
$MESS["BACK_STORE_LIST"] = "   ";
$MESS["TYPE_SKU"] = " SKU";
$MESS["TYPE_VIEW_FILTER"] = " ";
$MESS["VERTICAL"] = "";
$MESS["HORIZONTAL"] = "";
$MESS["CT_NAME_GB"] = " ";
$MESS["CT_NAME_MB"] = " ";
$MESS["CT_NAME_KB"] = " ";
$MESS["CT_NAME_b"] = " ";
$MESS["THEME_SWITCHER"] = " ";
$MESS["YES"] = "";
$MESS["NO"] = "";
$MESS["EMAIL_IS_ALREADY_EXISTS"] = "Email #EMAIL#  ";
$MESS["EXPAND_BLOCK"] = "";
$MESS['SCROLLTOTOP_OPTIONS'] = ' ""';
$MESS['SCROLLTOTOP_TYPE'] = '  ""';
$MESS['SCROLLTOTOP_TYPE_NONE'] = '';
$MESS['SCROLLTOTOP_TYPE_ROUND_COLOR'] = ' ';
$MESS['SCROLLTOTOP_TYPE_ROUND_GREY'] = ' ';
$MESS['SCROLLTOTOP_TYPE_ROUND_WHITE'] = ' ';
$MESS['SCROLLTOTOP_TYPE_RECT_COLOR'] = ' ';
$MESS['SCROLLTOTOP_TYPE_RECT_GREY'] = ' ';
$MESS['SCROLLTOTOP_TYPE_RECT_WHITE'] = ' ';
$MESS['SCROLLTOTOP_POSITION'] = '  ""';
$MESS['SCROLLTOTOP_POSITION_TOUCH'] = '  ';
$MESS['SCROLLTOTOP_POSITION_PADDING'] = '    ';
$MESS['SCROLLTOTOP_POSITION_CONTENT'] = '   ';

$MESS['ONECLICKBUY_OPTIONS'] = '  1 ';
$MESS['ONECLICKBUY_PERSON_TYPE'] = ' ';
$MESS['ONECLICKBUY_DELIVERY'] = ' ';
$MESS['ONECLICKBUY_PAYMENT'] = ' ';
$MESS['ONECLICKBUY_CURRENCY'] = '';
$MESS['ONECLICKBUY_PROPERTIES'] = '';
$MESS['ONECLICKBUY_REQUIRED_PROPERTIES'] = '   ';
$MESS['ONECLICKBUY_PROPERTIES_FIO'] = '';
$MESS['ONECLICKBUY_PROPERTIES_PHONE'] = ' ';
$MESS['ONECLICKBUY_PROPERTIES_EMAIL'] = 'E-mail';
$MESS['ONECLICKBUY_PROPERTIES_COMMENT'] = '  ';

$MESS["MIN_ORDER_PRICES"] = "  ";
$MESS["MIN_ORDER_PRICE"] = "  ";
$MESS["MIN_ORDER_PRICE_TEXT"] = "  ";
$MESS["MIN_ORDER_PRICE_TEXT_EXAMPLE"] = "<b>   #PRICE#</b><br/>,     ";
$MESS["NO_SITE_INSTALLED"] = '      &laquo;: Optimus -  -&raquo;<br />
<input type="button" value="" style="margin-top: 10px;" onclick="document.location.href=\'/bitrix/admin/wizard_install.php?lang=ru&wizardName=aspro:optimus&#SESSION_ID#\'">';
$MESS["ONE_CLICK_BUY"] = "  1 ";
$MESS["QUICK_ORDER"] = " ";
$MESS["SHOW_ONECLICKBUY_ON_BASKET_PAGE_TITLE"] = "     ";
$MESS["YANDEX_GOOGLE_COUNTER_BLOCK"] = "/Google ";
$MESS["YANDEX_COUNTER_TITLE"] = "    ";
$MESS["GOOGLE_COUNTER_TITLE"] = "   google analytics/google tag manager";
$MESS["YANDEX_ECOMERCE_TITLE"] = "   ";
$MESS["GOOGLE_ECOMERCE_TITLE"] = "   google";
$MESS["TO_BASKET_TITLE"] = "  \"   \"";
$MESS["ORDER_START_TITLE"] = "  \"  \"";
$MESS["ORDER_SUCCESS_TITLE"] = "  \"  \"";
$MESS["QUICK_ORDER_SUCCESS_TITLE"] = "  \"   \"";
$MESS["ONE_CLICK_BUY_SUCCESS_TITLE"] = "  \"  1 \"";
$MESS["BASKET_ADD_EVENT_TITLE"] = "  \"   \"  google tag manager";
$MESS["BASKET_REMOVE_EVENT_TITLE"] = "  \"   \"  google tag manager";
$MESS["CHECKOUT_ORDER_EVENT_TITLE"] = "  \"  \"  google tag manager";
$MESS["SHOW_SECTION_DESCRIPTION"] = "     ";
$MESS["TOP_SECTION"] = "  ";
$MESS["BOTTOM_SECTION"] = "  ";
$MESS["BOTH_SECTION"] = "    ";
$MESS["TOP_SECTION_DESCRIPTION"] = "   ";
$MESS["BOTTOM_SECTION_DESCRIPTION"] = "   ";
$MESS["DESCRIPTION_SECTION"] = "";
$MESS["SEO_DESCRIPTION_SECTION"] = "   SEO";
$MESS["EXPRESSION_FOR_FREE_DELIVERY"] = "  \"<i> 0 .</i>\"";
$MESS["EXPRESSION_FOR_FREE_DELIVERY_DEFAULT"] = "";
$MESS["SHOW_MORE_ITEM_MENU_LINK"] = "  \" \"  ";
$MESS["HIDE_SITE_NAME_TITLE"] = "      ";
$MESS["ONE_CLICK_BUY_OPTIONS"] = "  1 ";
$MESS["ONE_CLICK_BUY_DELIVERY_OPTIONS"] = " ";
$MESS["ONE_CLICK_BUY_PAYMENT_OPTIONS"] = " ";
$MESS["ONE_CLICK_BUY_CURRENCY_OPTIONS"] = "";
$MESS["MAX_DEPTH_MENU"] = "  ";
$MESS["MENU_COLOR"] = " ";
$MESS["MENU_COLOR_COLORED"] = "";
$MESS["MENU_COLOR_LIGHT"] = "";
$MESS["MENU_COLOR_DARK"] = "";

$MESS["MENU_POSITION"] = "   ";
$MESS["TOP_MENU_HOVER"] = "  ";
$MESS["LINE_MENU_HOVER"] = "   ";
$MESS["MENU_POSITION_MAIN"] = "   ";
$MESS["NO_LOGO_BG"] = "     ";

$MESS["DETAIL_PICTURE_MODE_IMG"] = "";
$MESS["DETAIL_PICTURE_MODE_POPUP"] = " ";
$MESS["DETAIL_PICTURE_MODE_MAGNIFIER"] = "";
$MESS["DETAIL_PICTURE_MODE"] = "   ";

$MESS["VIEWED_TYPE"] = "   ";
$MESS["VIEWED_TYPE_LOGIC_COOKIE"] = "";
$MESS["VIEWED_TYPE_LOGIC_COMPONENT"] = "";

$MESS["CATALOG_IBLOCK_ID"] = "ID  ";

$MESS["USER_CABINET"] = " ";
$MESS["USER_AUTH"] = "\";
$MESS["COMPARE_BLOCK"] = " ";
?>
47   16367|/aspro.optimus/admin/options.php|1b2936dc<?
require_once($_SERVER['DOCUMENT_ROOT'].'/bitrix/modules/main/include/prolog_admin_before.php');
require($_SERVER['DOCUMENT_ROOT'].'/bitrix/modules/main/include/prolog_admin_after.php');

global $APPLICATION;
IncludeModuleLangFile(__FILE__);
$RIGHT = $APPLICATION->GetGroupRight(COptimus::moduleID);

if($RIGHT >= "R"){
	$res = COptimus::getModuleOptionsList();
	$arTabs = $res["TABS"];
	$tabControl = new CAdminTabControl("tabControl", $arTabs);

	if($REQUEST_METHOD == "POST" && strlen($Update.$Apply.$RestoreDefaults) > 0 && $RIGHT >= "W" && check_bitrix_sessid()){
		global $APPLICATION, $CACHE_MANAGER;

		if(strlen($RestoreDefaults) > 0){
			COption::RemoveOption(COptimus::moduleID);
			COption::RemoveOption(COptimus::moduleID, "NeedGenerateCustomTheme");
			COption::RemoveOption(COptimus::moduleID, "NeedGenerateCustomThemeBG");
			$APPLICATION->DelGroupRight(COptimus::moduleID);
		}
		else{
			COption::RemoveOption(COptimus::moduleID, "sid");
			foreach($arTabs as $key => $arTab){
				foreach($arTab["OPTIONS"] as $arOption){
					if($arOption[0] == "COLOR_THEME" && $_REQUEST[$arOption[0]."_".$arTab["SITE_ID"]] === 'CUSTOM'){
						COption::SetOptionString(COptimus::moduleID, "NeedGenerateCustomTheme", 'Y', '', $arTab["SITE_ID"]);
					}
					if($arOption[0] == "BGCOLOR_THEME" && $_REQUEST[$arOption[0]."_".$arTab["SITE_ID"]] === 'CUSTOM'){
						COption::SetOptionString(COptimus::moduleID, "NeedGenerateCustomThemeBG", 'Y', '', $arTab["SITE_ID"]);
					}
					$arOption[0] = $arOption[0]."_".$arTab["SITE_ID"];
					COptimus::__AdmSettingsSaveOption_EX(COptimus::moduleID, $arOption);
				}

				CBitrixComponent::clearComponentCache('bitrix:catalog.element', $arTab["SITE_ID"]);
				CBitrixComponent::clearComponentCache('bitrix:catalog.section', $arTab["SITE_ID"]);
				CBitrixComponent::clearComponentCache('bitrix:catalog.store.amount', $arTab["SITE_ID"]);
				CBitrixComponent::clearComponentCache('bitrix:menu', $arTab["SITE_ID"]);
			}
		}

		UnRegisterModuleDependences("main", "OnEndBufferContent", COptimus::moduleID, "COptimus", "InsertCounters");
		RegisterModuleDependences("main", "OnEndBufferContent", COptimus::moduleID, "COptimus", "InsertCounters");

		// clear composite cache
		$compositeMode = COptimus::IsCompositeEnabled();
		$obCache = new CPHPCache();
		$obCache->CleanDir("", "html_pages");
		if($compositeMode){
			COptimus::EnableComposite($compositeMode === 'AUTO_COMPOSITE');
		}

		$APPLICATION->RestartBuffer();
	}

	CJSCore::Init(array("jquery"));
	CAjax::Init();
	?>
	<?if(!count($arTabs)):?>
		<div class="adm-info-message-wrap adm-info-message-red">
			<div class="adm-info-message">
				<div class="adm-info-message-title"><?=GetMessage("NO_SITE_INSTALLED", array("#SESSION_ID#"=>bitrix_sessid_get()))?></div>
				<div class="adm-info-message-icon"></div>
			</div>
		</div>
	<?else:?>
		<?$tabControl->Begin();?>
		<form method="post" action="<?=$APPLICATION->GetCurPage()?>?mid=<?=urlencode($mid)?>&amp;lang=<?=LANGUAGE_ID?>" class="optimus_options" ENCTYPE="multipart/form-data">
			<?=bitrix_sessid_post();?>
			<?
			CModule:: IncludeModule('sale');
			$arPersonTypes = $arDeliveryServices = $arPaySystems = $arCurrency = $arOrderPropertiesByPerson = $arS = $arC = $arN = array();
			$dbRes = CSalePersonType::GetList(array('SORT' => 'ASC'), array('ACTIVE' => 'Y'), false, false, array());
			while($arItem = $dbRes->Fetch()){
				$arPersonTypes[$arItem['ID']] = $arItem['NAME'];
				$arS[$arItem['ID']] = array('FIO', 'PHONE', 'EMAIL');
				$arN[$arItem['ID']] = array(
					'FIO' => GetMessage('ONECLICKBUY_PROPERTIES_FIO'),
					'PHONE' => GetMessage('ONECLICKBUY_PROPERTIES_PHONE'),
					'EMAIL' => GetMessage('ONECLICKBUY_PROPERTIES_EMAIL'),
				);
			}
			$dbRes = CSaleDelivery::GetList(array('SORT' => 'ASC'), array('ACTIVE' => 'Y'), false, false, array());
			while($arItem = $dbRes->Fetch()){
				$arDeliveryServices[$arItem['ID']] = $arItem['NAME'];
			}
			$dbRes = CSalePaySystem::GetList(array('SORT' => 'ASC'), array('ACTIVE' => 'Y'), false, false, array());
			while($arItem = $dbRes->Fetch()){
				$arPaySystems[$arItem['ID']] = $arItem['NAME'];
			}
			$dbRes = CCurrency::GetList(($by = "sort"), ($order = "asc"), LANGUAGE_ID);
			while($arItem = $dbRes->Fetch()){
				$arCurrency[$arItem['CURRENCY']] = $arItem['FULL_NAME'].' ('.$arItem['CURRENCY'].')';
			}
			$dbRes = CSaleOrderProps::GetList(array('SORT' => 'ASC'), array('ACTIVE' => 'Y'), false, false, array('ID', 'CODE', 'NAME', 'PERSON_TYPE_ID', 'TYPE', 'IS_PHONE', 'IS_EMAIL', 'IS_PAYER'));
			while($arItem = $dbRes->Fetch()){
				if($arItem['TYPE'] === 'TEXT' && strlen($arItem['CODE'])){
					$arN[$arItem['PERSON_TYPE_ID']][$arItem['CODE']] = $arItem['NAME'];
					if($arItem['IS_PAYER'] === 'Y'){
						$arS[$arItem['PERSON_TYPE_ID']][0] = $arItem['CODE'];
					}
					elseif($arItem['IS_PHONE'] === 'Y'){
						$arS[$arItem['PERSON_TYPE_ID']][1] = $arItem['CODE'];
					}
					elseif($arItem['IS_EMAIL'] === 'Y'){
						$arS[$arItem['PERSON_TYPE_ID']][2] = $arItem['CODE'];
					}
					else{
						$arS[$arItem['PERSON_TYPE_ID']][] = $arItem['CODE'];
					}
				}
			}
			if($arS && $arN){
				foreach($arS as $PERSON_TYPE_ID => $arCodes){
					if($arCodes){
						foreach($arCodes as $CODE){
							$arOrderPropertiesByPerson[$PERSON_TYPE_ID][$CODE] = $arN[$PERSON_TYPE_ID][$CODE];
						}
						$arOrderPropertiesByPerson[$PERSON_TYPE_ID]['COMMENT'] = GetMessage('ONECLICKBUY_PROPERTIES_COMMENT');
					}
				}
			}

			foreach($arTabs as $key => $arTab){
				$tabControl->BeginNextTab();
				if($arTab["SITE_ID"]){
					foreach($arTab["OPTIONS"] as $arOption){
						if($arOption[0] === "ONECLICKBUY_PERSON_TYPE"){
							$arOption[3][1] = $arPersonTypes;
						}
						elseif($arOption[0] === "ONECLICKBUY_DELIVERY"){
							$arOption[3][1] = $arDeliveryServices;
						}
						elseif($arOption[0] === "ONECLICKBUY_PAYMENT"){
							$arOption[3][1] = $arPaySystems;
						}
						elseif($arOption[0] === "ONECLICKBUY_CURRENCY"){
							$arOption[3][1] = $arCurrency;
						}
						elseif($arOption[0] === "ONECLICKBUY_PROPERTIES" || $arOption[0] === "ONECLICKBUY_REQUIRED_PROPERTIES"){
							$arOption[3][1] = $arOrderPropertiesByPerson[COption::GetOptionString('aspro.optimus', 'ONECLIKBUY_PERSON_TYPE', ($arPersonTypes ? key($arPersonTypes) : ''), $arTab["SITE_ID"])];
						}
						$arOption[0] = $arOption[0]."_".$arTab["SITE_ID"];
						COptimus::__AdmSettingsDrawRow_EX(COptimus::moduleID, $arOption, $arTab["SITE_ID"]);
					}
				}
			}
			if($REQUEST_METHOD == "POST" && strlen($Update.$Apply.$RestoreDefaults) > 0 && check_bitrix_sessid()){
				if(strlen($Update)>0 && strlen($_REQUEST["back_url_settings"]) > 0) LocalRedirect($_REQUEST["back_url_settings"]);
				else LocalRedirect($APPLICATION->GetCurPage()."?mid=".urlencode($mid)."&lang=".urlencode(LANGUAGE_ID)."&back_url_settings=".urlencode($_REQUEST["back_url_settings"])."&".$tabControl->ActiveTabParam());
			}
			?>
			<script>
			var arOrderPropertiesByPerson = <?=CUtil::PhpToJSObject($arOrderPropertiesByPerson, false)?>;

			function CheckActive(){
				$('input[name^="USE_WORD_EXPRESSION"]').each(function() {
					var input = this;
					var isActiveUseExpressions = $(input).attr('checked') == 'checked';
					var tab = $(input).parents('.adm-detail-content-item-block');
					if(!isActiveUseExpressions){
						tab.find('input[name^="MAX_AMOUNT"]').attr('disabled', 'disabled');
						tab.find('input[name^="MIN_AMOUNT"]').attr('disabled', 'disabled');
						tab.find('input[name^="EXPRESSION_FOR_MIN"]').attr('disabled', 'disabled');
						tab.find('input[name^="EXPRESSION_FOR_MAX"]').attr('disabled', 'disabled');
						tab.find('input[name^="EXPRESSION_FOR_MID"]').attr('disabled', 'disabled');
					}
					else{
						tab.find('input[name^="MAX_AMOUNT"]').removeAttr('disabled');
						tab.find('input[name^="MIN_AMOUNT"]').removeAttr('disabled');
						tab.find('input[name^="EXPRESSION_FOR_MIN"]').removeAttr('disabled');
						tab.find('input[name^="EXPRESSION_FOR_MAX"]').removeAttr('disabled');
						tab.find('input[name^="EXPRESSION_FOR_MID"]').removeAttr('disabled');
					}
				});

				$('select[name^="BUYMISSINGGOODS"]').each(function() {
					var select = this;
					var BuyMissingGoodsVal = $(select).val();
					var tab = $(select).parents('.adm-detail-content-item-block');
					tab.find('input[name^="EXPRESSION_SUBSCRIBE_BUTTON"]').attr('disabled', 'disabled');
					tab.find('input[name^="EXPRESSION_SUBSCRIBED_BUTTON"]').attr('disabled', 'disabled');
					tab.find('input[name^="EXPRESSION_ORDER_BUTTON"]').attr('disabled', 'disabled');
					if(BuyMissingGoodsVal == 'SUBSCRIBE'){
						tab.find('input[name^="EXPRESSION_SUBSCRIBE_BUTTON"]').removeAttr('disabled');
						tab.find('input[name^="EXPRESSION_SUBSCRIBED_BUTTON"]').removeAttr('disabled');
					}
					else if(BuyMissingGoodsVal == 'ORDER'){
						tab.find('input[name^="EXPRESSION_ORDER_BUTTON"]').removeAttr('disabled');
					}
				});
			}

			$(document).ready(function() {
				CheckActive();

				$('form.optimus_options').submit(function(e) {
					$(this).attr('id', 'optimus_options');
					jsAjaxUtil.ShowLocalWaitWindow('id', 'optimus_options', true);
					$(this).find('input').removeAttr('disabled');
				});

				$('input[name^="USE_WORD_EXPRESSION"], select[name^="BUYMISSINGGOODS"]').change(function() {
					CheckActive();
				});

				$('select[name^="SHOW_SECTION_DESCRIPTION"]').change(function(){
					console.log($('select[name^="SECTION_DESCRIPTION"]'));
					if($(this).val() != 'BOTH')
						$('select[name*="SECTION_DESCRIPTION_POSITION"]').closest('tr').css('display','none');
					else
						$('select[name*="SECTION_DESCRIPTION_POSITION"]').closest('tr').css('display','');
				});

				$('select[name^="SHOW_QUANTITY_FOR_GROUPS"]').change(function() {
					var val = $(this).val();
					var tab = $(this).parents('.adm-detail-content-item-block');
					var sqcg = tab.find('select[name^="SHOW_QUANTITY_COUNT_FOR_GROUPS"]');

					var isAll = false;
					if(val){
						isAll = val.indexOf('2') !== -1;
					}

					if(!isAll){
						$(this).find('option').each(function() {
							if($(this).attr('selected') != 'selected'){
								sqcg.find('option[value="' + $(this).attr('value') + '"]').removeAttr('selected');
							}
						});
					}
				});

				$('select[name^="SHOW_QUANTITY_COUNT_FOR_GROUPS"]').change(function(e) {
					e.stopPropagation();
					var val = $(this).val();
					var tab = $(this).parents('.adm-detail-content-item-block');
					var sqg_val = tab.find('select[name^="SHOW_QUANTITY_FOR_GROUPS"]').val();

					if(!sqg_val){
						$(this).find('option').removeAttr('selected');
						return;
					}

					var isAll = false;
					if(sqg_val){
						isAll = sqg_val.indexOf('2') !== -1;
					}

					if(!isAll && val){
						for(i in val){
							var g = val[i];
							if(sqg_val.indexOf(g) === -1){
								$(this).find('option[value="' + g + '"]').removeAttr('selected');
							}
						}
					}
				});

				$('select[name^="ONECLICKBUY_PERSON_TYPE"]').change(function() {
					if(typeof arOrderPropertiesByPerson !== 'undefined'){
						var table = $(this).parents('table').first();
						var value = $(this).val();
						if(typeof value !== 'undefined' && typeof arOrderPropertiesByPerson[value] !== 'undefined'){
							var arSelects = [table.find('select[name^=ONECLICKBUY_PROPERTIES]'), table.find('select[name^=ONECLICKBUY_REQUIRED_PROPERTIES]')];
							for(var i in arSelects){
								var $fields = arSelects[i];
								if($fields.length){
									var fields = $fields.val();
									$fields.find('option').remove();
									for(var j in arOrderPropertiesByPerson[value]){
										var selected = fields.indexOf(j) !== -1 ? ' selected="selected"' : '';
										$fields.append('<option value="' + j + '"' + selected + '>' + arOrderPropertiesByPerson[value][j] + '</option>');
									}
									$fields.find('option').eq(0).attr('selected', 'selected');
									$fields.find('option').eq(1).attr('selected', 'selected');
								}
							}
						}
					}
				});

				$('select[name^="ONECLICKBUY_PROPERTIES"]').change(function() {
					var table = $(this).parents('table').first();
					$(this).find('option').eq(0).attr('selected', 'selected');
					$(this).find('option').eq(1).attr('selected', 'selected');
					var fiedsValue = $(this).val();
					var $requiredFields = table.find('select[name^=ONECLICKBUY_REQUIRED_PROPERTIES]');
					var requiredFieldsValue = $requiredFields.val();
					for(var i in requiredFieldsValue){
						if(fiedsValue === null || fiedsValue.indexOf(requiredFieldsValue[i]) === -1){
							$requiredFields.find('option[value=' + requiredFieldsValue[i] + ']').removeAttr('selected');
						}
					}
				});

				$('select[name^="ONECLICKBUY_REQUIRED_PROPERTIES"]').change(function() {
					var table = $(this).parents('table').first();
					$(this).find('option').eq(0).attr('selected', 'selected');
					$(this).find('option').eq(1).attr('selected', 'selected');
					var requiredFieldsValue = $(this).val();
					var $fieds = table.find('select[name^=ONECLICKBUY_PROPERTIES]');
					var fiedsValue = $fieds.val();
					var $FIO = $(this).find('option[value^=FIO]');
					var $PHONE = $(this).find('option[value^=PHONE]');
					for(var i in requiredFieldsValue){
						if(fiedsValue === null || fiedsValue.indexOf(requiredFieldsValue[i]) === -1){
							$(this).find('option[value=' + requiredFieldsValue[i] + ']').removeAttr('selected');
						}
					}
				});

				$('select[name^="SCROLLTOTOP_TYPE"]').change(function() {
					var posSelect = $(this).parents('table').first().find('select[name^="SCROLLTOTOP_POSITION"]');
					if(posSelect){
						var posSelectTr = posSelect.parents('tr').first();
						var isNone = $(this).val().indexOf('NONE') != -1;
						if(isNone){
							if(posSelectTr.is(':visible')){
								posSelectTr.fadeOut();
							}
						}
						else{
							if(!posSelectTr.is(':visible')){
								posSelectTr.fadeIn();
							}
							var isRound = $(this).val().indexOf('ROUND') != -1;
							var isTouch = posSelect.val().indexOf('TOUCH') != -1;
							if(isRound && !!posSelect){
								posSelect.find('option[value^="TOUCH"]').attr('disabled', 'disabled');
								if(isTouch){
									posSelect.val(posSelect.find('option[value^="PADDING"]').first().attr('value'));
								}
							}
							else{
								posSelect.find('option[value^="TOUCH"]').removeAttr('disabled');
							}
						}
					}
				});

			$('select[name^="SCROLLTOTOP_TYPE"]').change();
			$('select[name^="ONECLICKBUY_PERSON_TYPE"]').change();
			});
			</script>
			<?$tabControl->Buttons();?>
			<input <?if($RIGHT < "W") echo "disabled"?> type="submit" name="Apply" class="submit-btn" value="<?=GetMessage("MAIN_OPT_APPLY")?>" title="<?=GetMessage("MAIN_OPT_APPLY_TITLE")?>">
			<?if(strlen($_REQUEST["back_url_settings"]) > 0): ?>
				<input type="button" name="Cancel" value="<?=GetMessage("MAIN_OPT_CANCEL")?>" title="<?=GetMessage("MAIN_OPT_CANCEL_TITLE")?>" onclick="window.location='<?=htmlspecialcharsbx(CUtil::addslashes($_REQUEST["back_url_settings"]))?>'">
				<input type="hidden" name="back_url_settings" value="<?=htmlspecialcharsbx($_REQUEST["back_url_settings"])?>">
			<?endif;?>
			<?if(COptimus::IsCompositeEnabled()):?>
				<div class="adm-info-message"><?=GetMessage("WILL_CLEAR_HTML_CACHE_NOTE")?></div><div style="clear:both;"></div>
				<script type="text/javascript">
				$(document).ready(function() {
					$('input[name^="THEME_SWITCHER"]').change(function() {
						var ischecked = $(this).attr('checked');
						if(typeof(ischecked) != 'undefined'){
							if(!confirm("<?=GetMessage("NO_COMPOSITE_NOTE")?>")){
								$(this).removeAttr('checked');
							}
						}
					});
				});
				</script>
			<?endif;?>
		</form>
		<?$tabControl->End();?>
	<?endif;?>
	<?
}
else{
	echo CAdminMessage::ShowMessage(GetMessage('NO_RIGHTS_FOR_VIEWING'));
}
?>
<?require($_SERVER['DOCUMENT_ROOT'].'/bitrix/modules/main/include/epilog_admin.php');?>66   5562|/aspro.optimus/classes/general/mailing_functions.php|662fd48a<?
// include CMainPage
require_once($_SERVER['DOCUMENT_ROOT']."/bitrix/modules/main/include/mainpage.php");
// get site_id by host
$site_id = \CMainPage::GetSiteByHost();
if(!$site_id)
    $site_id = "s1";

$moduleID = "aspro.optimus";
$arColoredHead = array("TYPE_2", "TYPE_6", "TYPE_7", "TYPE_8");

// get site info
$arSite = \CSite::GetByID($site_id)->Fetch();
$arSite['DIR'] = str_replace('//', '/', '/'.$arSite['DIR']);
if(!strlen($arSite['DOC_ROOT']))
{
    $arSite['DOC_ROOT'] = Bitrix\Main\Application::getDocumentRoot();
}
$site_charset = $arSite['CHARSET'];
$arSite['DOC_ROOT'] = str_replace('//', '/', $arSite['DOC_ROOT'].'/');
$siteDir = str_replace('//', '/', $arSite['DOC_ROOT'].$arSite['DIR']);
$siteProtocol = (\CMain::isHttps() ? "https" : "http");
$siteAddress = $arSite['SERVER_NAME'];
$siteAddressFull = $siteProtocol."://".$arSite['SERVER_NAME'];

//get iblock linked to site
\Bitrix\Main\Loader::includeModule('iblock');
global $arIblocks;
$arIblocks = array();
$dbIblock = \CIBlock::GetList(array(), array("ACTIVE" => "Y", "LID" => $site_id));
while($arIblock = $dbIblock->Fetch()){
	$arIblocks[$arIblock["IBLOCK_TYPE_ID"]][$arIblock["CODE"]][] = $arIblock["ID"];
}

//get vars
$arLogo = \Bitrix\Main\Config\Option::get($moduleID, "LOGO_IMAGE", false, $site_id);

$color_theme = \Bitrix\Main\Config\Option::get($moduleID, "COLOR_THEME", "BLUE", $site_id);
$custom_color_theme = \Bitrix\Main\Config\Option::get($moduleID, "CUSTOM_COLOR_THEME", false, $site_id);
$type_head = \Bitrix\Main\Config\Option::get($moduleID, "HEAD", "TYPE_1", $site_id);
$logo_color_bg = \Bitrix\Main\Config\Option::get($moduleID, "NO_LOGO_BG", "", $site_id);
$order_email = \Bitrix\Main\Config\Option::get("sale", "order_email", "sale@".$siteAddress);

$isColoredHead = (in_array($type_head, $arColoredHead) ? true : false);
$type_color = ($isColoredHead ? "colored" : "main");
$phone_color = ($type_color == "colored" ? "#fff" : "#1d2029");
$arModuleOptions = \COptimus::getModuleOptionsList(true);
$arThemeValues = array();
$bg_color = $bg_color_logo = "";
$phone = '+0 000 000-00-00';
global $copyright;
$copyright = '&copy; '.$arSite["NAME"];
global $social;
$social = '';

$bg_image = $siteAddressFull.'/bitrix/templates/'.str_replace(".", "_", $moduleID).'/images/phone_mail.png';
$bg_phone_position = '0px 0px';
$phonePath = $siteDir.'/include/phone.php';
$copyrightPath = $siteDir.'/include/footer/copy/copyright.php';
$socialPath = $siteDir.'/include/footer/social.info.optimus.default.php';

if($arLogo == serialize(array()) || $arLogo == false)
{
    $logo_src = "/include/logo.png";
}
else
{
    $arLogoValue = unserialize($arLogo);
    $logo_src = \CFIle::GetPath(current($arLogoValue));
}



foreach($arModuleOptions["TEMPLATE_OPTIONS"] as $arOptions)
{
    if($arOptions["ID"] == "COLOR_THEME")
    {
        $arThemeValues = $arOptions["VALUES"];
        break;
    }

}

foreach($arThemeValues as $arValue)
{
    if($arValue["VALUE"] == $color_theme)
    {
        $bg_color = $arValue["COMPONENT_VALUE"];
        break;
    }
}

if($color_theme == "CUSTOM")
{
    $bg_color = "#".$custom_color_theme;
}
$theme_color =  $bg_color;

$bg_color_logo = $bg_color;
if($logo_color_bg == "Y")
    $bg_color_logo = "";

if(Bitrix\Main\IO\File::isFileExists($phonePath))
{
    $phone = Bitrix\Main\IO\File::getFileContents($phonePath);
}
if(Bitrix\Main\IO\File::isFileExists($copyrightPath))
{
    $copyright = Bitrix\Main\IO\File::getFileContents($copyrightPath);
	// cut php
	$pattern = '/<\?(.*)\?>/is';
	preg_match($pattern, $copyright,$matches);
	if($matches[1])
	{
		$copyright = str_replace(array($matches[1], '<?', '?>'), "", $copyright);
	}
}
if(Bitrix\Main\IO\File::isFileExists($socialPath))
{
	$social = '';
	$social = Bitrix\Main\IO\File::getFileContents($socialPath);
	
	global $vk_social, $fb_social, $odn_social, $tw_social, $mail_social, $inst_social, $g_social, $y_social;
	$re = '@([\'" ]{1,3})VK([\'" ]{1,3})(.{1,8})[\'" ]{1,3}(.+)[\'" ]{1,3},@x';
	preg_match_all($re, $social, $arMatch);
	if($arMatch[4][0])
		$vk_social = str_replace(array("\"", "'"), "", $arMatch[4][0]);
	$re = '@([\'" ]{1,3})FACE([\'" ]{1,3})(.{1,8})[\'" ]{1,3}(.+)[\'" ]{1,3},@x';
	preg_match_all($re, $social, $arMatch);
	if($arMatch[4][0])
		$fb_social = str_replace(array("\"", "'"), "", $arMatch[4][0]);
	$re = '@([\'" ]{1,3})ODN([\'" ]{1,3})(.{1,8})[\'" ]{1,3}(.+)[\'" ]{1,3},@x';
	preg_match_all($re, $social, $arMatch);
	if($arMatch[4][0])
		$odn_social = str_replace(array("\"", "'"), "", $arMatch[4][0]);
	$re = '@([\'" ]{1,3})TWIT([\'" ]{1,3})(.{1,8})[\'" ]{1,3}(.+)[\'" ]{1,3},@x';
	preg_match_all($re, $social, $arMatch);
	if($arMatch[4][0])
		$tw_social = str_replace(array("\"", "'"), "", $arMatch[4][0]);
	$re = '@([\'" ]{1,3})MAIL([\'" ]{1,3})(.{1,8})[\'" ]{1,3}(.+)[\'" ]{1,3},@x';
	preg_match_all($re, $social, $arMatch);
	if($arMatch[4][0])
		$mail_social = str_replace(array("\"", "'"), "", $arMatch[4][0]);
	$re = '@([\'" ]{1,3})INST([\'" ]{1,3})(.{1,8})[\'" ]{1,3}(.+)[\'" ]{1,3},@x';
	preg_match_all($re, $social, $arMatch);
	if($arMatch[4][0])
		$inst_social = str_replace(array("\"", "'"), "", $arMatch[4][0]);
	$re = '@([\'" ]{1,3})GOOGLEPLUS([\'" ]{1,3})(.{1,8})[\'" ]{1,3}(.+)[\'" ]{1,3},@x';
	preg_match_all($re, $social, $arMatch);
	if($arMatch[4][0])
		$g_social = str_replace(array("\"", "'"), "", $arMatch[4][0]);
	$re = '@([\'" ]{1,3})YOUTUBE([\'" ]{1,3})(.{1,8})[\'" ]{1,3}(.+)[\'" ]{1,3},@x';
	preg_match_all($re, $social, $arMatch);
	if($arMatch[4][0])
		$y_social = str_replace(array("\"", "'"), "", $arMatch[4][0]);
	
}
?>65   11942|/aspro.optimus/classes/general/CAsproMarketing.php|e4b1288c<?
namespace Aspro\Solution;

use Bitrix\Main\Application;
use Bitrix\Main\Web\DOM\Document;
use Bitrix\Main\Localization\Loc;
use Bitrix\Main\Web\DOM\CssParser;
use Bitrix\Main\Text\HtmlFilter;
use Bitrix\Main\IO\File;
use Bitrix\Main\IO\Directory;

Loc::loadMessages(__FILE__);
\Bitrix\Main\Loader::includeModule('sale');
\Bitrix\Main\Loader::includeModule('catalog');

class CAsproMarketing{
    const MODULE_ID = \COptimus::moduleID;
    const LOCAL_DIR_TMPL = "/modules/aspro.optimus/preset/template/";
    // const LOCAL_DIR_IMG = '/images/'.Coptimus::moduleID.'/preset/template/';

    public static $arColoredHead = array("TYPE_2", "TYPE_6", "TYPE_7", "TYPE_8");

    public static function getById($templateName){
        $fileContent = '';
        $file = \Bitrix\Main\Loader::getLocal(static::LOCAL_DIR_TMPL.bx_basename($templateName).'.php');
        if($file && File::isFileExists($file))
        {
            $fullPathOfFile = $file;
            if($fullPathOfFile)
              $fileContent = File::getFileContents($fullPathOfFile);            
        }
        
        if (!empty($fileContent))
        {
          \Bitrix\Main\Loader::includeModule('fileman');
          if(\Bitrix\Fileman\Block\Editor::isContentSupported($fileContent))
            $fileContent = static::replaceTemplateByDefaultData($fileContent);
        }
        return $fileContent;
    }

    public static function senderTemplateList(){
        $arResultList = array();
        $arResultList[] = array(
            'TYPE' => 'ADDITIONAL',
            'ID' => 'aspro_all',
            'NAME' => Loc::getMessage('ASPRO_TEMPLATE'),
            'ICON' => '/bitrix/images/sender/preset/template/1column1.png',
            'HTML' => static::getById('aspro_all')
        );
        $arResultList[] = array(
            'TYPE' => 'ADDITIONAL',
            'ID' => 'aspro_basket',
            'NAME' => Loc::getMessage('ASPRO_TEMPLATE_BASKET'),
            'ICON' => '/bitrix/images/sender/preset/template/1column1.png',
            'HTML' => static::getById('aspro_basket')
        );
        $arResultList[] = array(
            'TYPE' => 'ADDITIONAL',
            'ID' => 'aspro_basket_coupon',
            'NAME' => Loc::getMessage('ASPRO_TEMPLATE_BASKET_COUPON'),
            'ICON' => '/bitrix/images/sender/preset/template/1column1.png',
            'HTML' => static::getById('aspro_basket_coupon')
        );
        $arResultList[] = array(
            'TYPE' => 'ADDITIONAL',
            'ID' => 'aspro_yandex_market',
            'NAME' => Loc::getMessage('ASPRO_TEMPLATE_YANDEX_MARKET'),
            'ICON' => '/bitrix/images/sender/preset/template/1column1.png',
            'HTML' => static::getById('aspro_yandex_market')
        );
        $arResultList[] = array(
            'TYPE' => 'ADDITIONAL',
            'ID' => 'aspro_order_info',
            'NAME' => Loc::getMessage('ASPRO_TEMPLATE_ORDER_INFO'),
            'ICON' => '/bitrix/images/sender/preset/template/1column1.png',
            'HTML' => static::getById('aspro_order_info')
        );
        $arResultList[] = array(
            'TYPE' => 'ADDITIONAL',
            'ID' => 'aspro_sale',
            'NAME' => Loc::getMessage('ASPRO_TEMPLATE_SALE'),
            'ICON' => '/bitrix/images/sender/preset/template/1column1.png',
            'HTML' => static::getById('aspro_sale')
        );
        $arResultList[] = array(
            'TYPE' => 'ADDITIONAL',
            'ID' => 'aspro_no_auth',
            'NAME' => Loc::getMessage('ASPRO_TEMPLATE_NO_AUTH'),
            'ICON' => '/bitrix/images/sender/preset/template/1column1.png',
            'HTML' => static::getById('aspro_no_auth')
        );
        return $arResultList;
    }

    public static function replaceTemplateByDefaultData($template){
        // include CMainPage
        require_once($_SERVER['DOCUMENT_ROOT']."/bitrix/modules/main/include/mainpage.php");
        // get site_id by host
        $site_id = \CMainPage::GetSiteByHost();
        if(!$site_id)
            $site_id = "s1";

        // get site info
        $arSite = \CSite::GetByID($site_id)->Fetch();
        $arSite['DIR'] = str_replace('//', '/', '/'.$arSite['DIR']);
        if(!strlen($arSite['DOC_ROOT']))
        {
            $arSite['DOC_ROOT'] = Application::getDocumentRoot();
        }
        $arSite['DOC_ROOT'] = str_replace('//', '/', $arSite['DOC_ROOT'].'/');
        $siteDir = str_replace('//', '/', $arSite['DOC_ROOT'].$arSite['DIR']);
        $siteProtocol = \Bitrix\Main\Config\Option::get("sender", "link_protocol", "");
        $siteProtocol = ($siteProtocol ? $siteProtocol : "http");
        $siteAddress = $arSite['SERVER_NAME'];
        $siteAddressFull = $siteProtocol."://".$arSite['SERVER_NAME'];

        //get iblock linked to site
        \Bitrix\Main\Loader::includeModule('iblock');
        $arIblocks = array();
        $dbIblock = \CIBlock::GetList(array(), array("ACTIVE" => "Y", "LID" => $site_id));
        while($arIblock = $dbIblock->Fetch()){
            $arIblocks[$arIblock["IBLOCK_TYPE_ID"]][$arIblock["CODE"]][] = $arIblock["ID"];
        }
        $tizer_iblock_id = ($arIblocks["aspro_optimus_content"]["aspro_optimus_tizers"][0] ? $arIblocks["aspro_optimus_content"]["aspro_optimus_tizers"][0] : 0);
        $sale_iblock_id = ($arIblocks["aspro_optimus_content"]["aspro_optimus_stock"][0] ? $arIblocks["aspro_optimus_content"]["aspro_optimus_stock"][0] : 0);

        //get vars
        $arLogo = \Bitrix\Main\Config\Option::get(static::MODULE_ID, "LOGO_IMAGE", false, $site_id);
        $color_theme = \Bitrix\Main\Config\Option::get(static::MODULE_ID, "COLOR_THEME", "BLUE", $site_id);
        $custom_color_theme = \Bitrix\Main\Config\Option::get(static::MODULE_ID, "CUSTOM_COLOR_THEME", false, $site_id);
        $type_head = \Bitrix\Main\Config\Option::get(static::MODULE_ID, "HEAD", "TYPE_1", $site_id);
        $logo_color_bg = \Bitrix\Main\Config\Option::get(static::MODULE_ID, "NO_LOGO_BG", "", $site_id);
        $order_email_sale = \Bitrix\Main\Config\Option::get("sale", "order_email", "sale@".$siteAddress);
        $order_email = ($arSite["EMAIL"] ? $arSite["EMAIL"] : $order_email_sale);

        $isColoredHead = (in_array($type_head, static::$arColoredHead) ? true : false);
        $type_color = ($isColoredHead ? "colored" : "main");
        $arModuleOptions = \COptimus::getModuleOptionsList(true);
        $arThemeValues = array();
        $bg_color = $bg_color_logo = "";
        $phone = '+0 000 000-00-00';
        $copyright = '&copy; '.$arSite["NAME"];
        $social = '';

        $bg_image = $siteAddressFull.'/bitrix/templates/'.str_replace(".", "_", static::MODULE_ID).'/images/phone_mail.png';
        $phonePath = $siteDir.'/include/phone.php';
        $copyrightPath = $siteDir.'/include/footer/copy/copyright.php';
        $socialPath = $siteDir.'/include/footer/social.info.optimus.default.php';
		
        if($arLogo == serialize(array()) || $arLogo == false)
        {
            $logo_src = "/include/logo.png";
        }
        else
        {
            $arLogoValue = unserialize($arLogo);
            $logo_src = \CFIle::GetPath(current($arLogoValue));
        }

        foreach($arModuleOptions["TEMPLATE_OPTIONS"] as $arOptions)
        {
            if($arOptions["ID"] == "COLOR_THEME")
            {
                $arThemeValues = $arOptions["VALUES"];
                break;
            }

        }

        foreach($arThemeValues as $arValue)
        {
            if($arValue["VALUE"] == $color_theme)
            {
                $bg_color = $arValue["COMPONENT_VALUE"];
                break;
            }
        }

        if($color_theme == "CUSTOM")
        {
            $bg_color = "#".$custom_color_theme;
        }
        $theme_color =  $bg_color;

        $bg_color_logo = $bg_color;
        if($logo_color_bg == "Y")
            $bg_color_logo = "";
        $bg_color = "#fff";

 
        if(File::isFileExists($phonePath))
        {
            $phone = File::getFileContents($phonePath);
        }
        if(File::isFileExists($copyrightPath))
        {
            $copyright = File::getFileContents($copyrightPath);
            // cut php
            $pattern = '/<\?(.*)\?>/is';
            preg_match($pattern, $copyright,$matches);
            if($matches[1])
            {
                $copyright = str_replace(array($matches[1], '<?', '?>'), "", $copyright);
            }
        }
        if(File::isFileExists($socialPath))
        {
            $social = '';
            $social = File::getFileContents($socialPath);
            $social = str_replace(array('$APPLICATION->IncludeComponent', '.default'), array('EventMessageThemeCompiler::includeComponent', 'mail'), $social);
        }
       
        \Bitrix\Main\Loader::includeModule('sale');
        \Bitrix\Main\Loader::includeModule('catalog');


        $themeContent = File::getFileContents(\Bitrix\Main\Loader::getLocal(static::LOCAL_DIR_TMPL.'theme.php'));
        return str_replace(
            array(
            '%TEMPLATE_CONTENT%', '%TYPE_COLOR%', '%SITE_ADDRESS%', '%BG_COLOR%', '%BG_COLOR_LOGO%', '%LOGO_PATH_HEADER%', '%IMAGE_URL%', '%PHONE%', '%THEME_COLOR%', 
            '%BUTTON%', 
            '%HEADER%', '%HEADER_FORGOT_BASKET%', '%HEADER_YANDEX_MARKET%', '%HEADER_SALE%', '%HEADER_NO_AUTH%', '%HEADER_ORDER_INFO%',
            '%SUB_HEADER%', '%TEXT1%', '%TEXT_BASKET%', '%TEXT_BASKET_COUPON_UNDER%', '%TEXT_BASKET_COUPON_BOTTOM%', '%TEXT_YANDEX_MARKET_UNDER%', '%TEXT_YANDEX_MARKET_BOTTOM%', '%TEXT_YANDEX_MARKET_BOTTOM2%', '%TEXT_SALE%', '%TEXT_NO_AUTH_UNDER%', '%TEXT_NO_AUTH_BOTTOM%', '%TEXT_ORDER_INFO%', '%BASKET_PAGE_LINK%', '%ORDER_PAGE_LINK%', '%BASKET_TITLE%', '%MORE_ITEMS%', '%TEXT_ORDER_INFO_BOTTOM%', '%SHOW_CATALOG_LINK%',
            '%PERSONAL_BIG_DATA%', '%BUTTON_REVIEW%', '%NO_AUTH_GOODS_TITLE%',
            '%TIZER_IBLOCK_ID%', '%SALE_IBLOCK_ID%', '%COPYRIGHT%', '%SOCIAL%', '%VK%',
            '%SITE_ID%', '%MODULE_ID%',
            '%UNSUB_TEXT%', '%UNSUB_LINK_TEXT%'
            ),
            array(
            $template, $type_color, $siteAddressFull, $bg_color, $bg_color_logo, $logo_src, $bg_image, $phone, $theme_color,
            Loc::getMessage('PRESET_TEMPLATE_LIST_BLANK_BUTTON'),
            Loc::getMessage('PRESET_TEMPLATE_LIST_BLANK_HEADER'),  Loc::getMessage('HEADER_FORGOT_BASKET'), Loc::getMessage('HEADER_YANDEX_MARKET'), Loc::getMessage('HEADER_SALE'), Loc::getMessage('HEADER_NO_AUTH'), Loc::getMessage('HEADER_ORDER_INFO'), 
            Loc::getMessage('WELCOME_TEXT'), Loc::getMessage('CUSTOM_TEXT'), Loc::getMessage('TEXT_BASKET', array('#SITE_ADDRESS#' => $siteAddressFull, '#EMAIL_SALE#' =>  $order_email)), Loc::getMessage('TEXT_BASKET_COUPON_UNDER', array('#SITE_ADDRESS#' => $siteAddressFull, '#EMAIL_SALE#' =>  $order_email)),Loc::getMessage('TEXT_BASKET_COUPON_BOTTOM', array('#EMAIL_SALE#' =>  $order_email)), Loc::getMessage('TEXT_YANDEX_MARKET_UNDER'), Loc::getMessage('TEXT_YANDEX_MARKET_BOTTOM'), Loc::getMessage('TEXT_YANDEX_MARKET_BOTTOM2'), Loc::getMessage('TEXT_SALE', array('#EMAIL_SALE#' =>  $order_email)), Loc::getMessage('TEXT_NO_AUTH_UNDER'), Loc::getMessage('TEXT_NO_AUTH_BOTTOM'), Loc::getMessage('TEXT_ORDER_INFO', array('#EMAIL_SALE#' =>  $order_email, '#PHONES#' => $phone)), Loc::getMessage('BASKET_PAGE_LINK'),  Loc::getMessage('ORDER_PAGE_LINK'), Loc::getMessage('BASKET_TITLE'), Loc::getMessage('MORE_ITEMS'), Loc::getMessage('TEXT_ORDER_INFO_BOTTOM'), Loc::getMessage('SHOW_CATALOG_LINK'),
            Loc::getMessage('PERSONAL_BIG_DATA'), Loc::getMessage('BUTTON_REVIEW'), Loc::getMessage('NO_AUTH_GOODS_TITLE'),
            $tizer_iblock_id, $sale_iblock_id, $copyright, $social, Loc::getMessage('VK'),
            $site_id, static::MODULE_ID,
            Loc::getMessage('UNSUB_TEXT', array('#SITE_ADDRESS#' => $siteAddressFull)), Loc::getMessage('UNSUB_LINK_TEXT'),
            ),
            $themeContent
        );
    }
}
?>59   192132|/aspro.optimus/classes/general/COptimus.php|967446ef<?
/**
 * Optimus module
 * @copyright 2016 Aspro
 */

if(!defined('OPTIMUS_MODULE_ID')){
	define('OPTIMUS_MODULE_ID', 'aspro.optimus');
}

IncludeModuleLangFile(__FILE__);
use \Bitrix\Main\Type\Collection;

class COptimus{
    const partnerName	= "aspro";
    const solutionName	= "optimus";
	const moduleID		= OPTIMUS_MODULE_ID;
    const wizardID		= "aspro:optimus";
	const devMode 		= false;

    function ShowPanel(){
        if($GLOBALS["USER"]->IsAdmin() && COption::GetOptionString("main", "wizard_solution", "", SITE_ID) == self::solutionName){
            $GLOBALS["APPLICATION"]->SetAdditionalCSS("/bitrix/wizards/".self::partnerName."/".self::solutionName."/css/panel.css");
            $arMenu = array(
                array(
                    "ACTION" => "jsUtils.Redirect([], '".CUtil::JSEscape("/bitrix/admin/wizard_install.php?lang=".LANGUAGE_ID."&wizardSiteID=".SITE_ID."&wizardName=".self::wizardID."&".bitrix_sessid_get())."')",
                    "ICON" => "bx-popup-item-wizard-icon",
                    "TITLE" => GetMessage("STOM_BUTTON_TITLE_W1"),
                    "TEXT" => GetMessage("STOM_BUTTON_NAME_W1"),
                ),
            );
            $GLOBALS["APPLICATION"]->AddPanelButton(array(
                "HREF" => "/bitrix/admin/wizard_install.php?lang=".LANGUAGE_ID."&wizardName=".self::wizardID."&wizardSiteID=".SITE_ID."&".bitrix_sessid_get(),
                "ID" => self::solutionName."_wizard",
                "ICON" => "bx-panel-site-wizard-icon",
                "MAIN_SORT" => 2500,
                "TYPE" => "BIG",
                "SORT" => 10,
                "ALT" => GetMessage("SCOM_BUTTON_DESCRIPTION"),
                "TEXT" => GetMessage("SCOM_BUTTON_NAME"),
                "MENU" => $arMenu,
            ));
        }
    }

    function BeforeSendEvent(\Bitrix\Main\Event $event){
		if(isset($_REQUEST["ONE_CLICK_BUY"]) && method_exists('\Bitrix\Sale\Compatible\EventCompatibility', 'setDisableMailSend')){
			\Bitrix\Sale\Compatible\EventCompatibility::setDisableMailSend(true);
			if(method_exists('\Bitrix\Sale\Notify', 'setNotifyDisable'))
				\Bitrix\Sale\Notify::setNotifyDisable(true);
		}
	}

	function Check(){
	}

	function Start($siteID){
		global  $APPLICATION, $SITE_THEME, $TEMPLATE_OPTIONS, $THEME_SWITCHER, $STARTTIME;
		$STARTTIME = time() * 1000;
		$SITE_THEME = COption::GetOptionString(self::moduleID, "COLOR_THEME", 'BLUE', $siteID);
		$SITE_THEMEBG = COption::GetOptionString(self::moduleID, "BGCOLOR_THEME", 'LIGHT', $siteID);
		$TEMPLATE_OPTIONS = self::GetTemplateOptions($siteID);
		$THEME_SWITCHER = COption::GetOptionString(self::moduleID, 'THEME_SWITCHER', 'N', $siteID);

		if($TEMPLATE_OPTIONS && is_array($TEMPLATE_OPTIONS)){
			// reset theme
			if($_REQUEST["theme"] == "default"){
				foreach($TEMPLATE_OPTIONS as $templateOptionKey => $templateOptionValue){
					if(isset($templateOptionValue["DEFAULT"])){
						$default = $templateOptionValue["DEFAULT"];
						$TEMPLATE_OPTIONS[$templateOptionKey]["CURRENT_VALUE"] = strToUpper($default);
						$_SESSION[SITE_ID][strToUpper($templateOptionKey)] = strToUpper($default);
					}
				}
				COption::SetOptionString(self::moduleID, "NeedGenerateCustomTheme", 'Y', '', $siteID);
				COption::SetOptionString(self::moduleID, "NeedGenerateCustomThemeBG", 'Y', '', $siteID);
			}
			else{
				foreach($TEMPLATE_OPTIONS as $templateOptionKey => $templateOptionValue){
					// read theme from $_SESSION if $THEME_SWITCHER == Y
					$arOptionValues = array();
					if($templateOptionValue["VALUES"] && is_array($templateOptionValue["VALUES"])){
						foreach($templateOptionValue["VALUES"] as  $i => $j){
							$arOptionValues[] = $j["VALUE"];
						}
					}
					if(($THEME_SWITCHER == "Y") && $_SESSION[$siteID] && is_array($_SESSION[$siteID])){
						foreach($_SESSION[SITE_ID] as $sessionKey => $sessionValue){
							if($sessionKey == $templateOptionValue["ID"] && (($templateOptionValue["ID"] == "CUSTOM_COLOR_THEME" || $templateOptionValue["ID"] == "CUSTOM_BGCOLOR_THEME") || in_array($sessionValue, $arOptionValues))){
								$TEMPLATE_OPTIONS[$templateOptionKey]["CURRENT_VALUE"] = $sessionValue;
							}
						}
					}

					// save theme changes in $_SESSION if $THEME_SWITCHER == Y
					if($_REQUEST && is_array($_REQUEST)){
						foreach($_REQUEST as $requestKey => $requestValue){
							if(strToUpper($requestKey) == $templateOptionValue["ID"] && (($templateOptionValue["ID"] == "CUSTOM_COLOR_THEME" || $templateOptionValue["ID"] == "CUSTOM_BGCOLOR_THEME") || in_array(strToUpper($requestValue), $arOptionValues))){
								if(($templateOptionValue["ID"] == "CUSTOM_COLOR_THEME") || ($templateOptionValue["ID"] == "CUSTOM_BGCOLOR_THEME")){
									$requestValue = str_replace('#', '', $requestValue);
									$requestValue = (strlen($requestValue) ? $requestValue : $templateOptionValue['DEFAULT']);
								}

								if($templateOptionValue["ID"] == "COLOR_THEME" && $requestValue == 'CUSTOM'){
									COption::SetOptionString(self::moduleID, "NeedGenerateCustomTheme", 'Y', '', $siteID);
								}
								if($templateOptionValue["ID"] == "BGCOLOR_THEME" && $requestValue == 'CUSTOM'){
									COption::SetOptionString(self::moduleID, "NeedGenerateCustomThemeBG", 'Y', '', $siteID);
								}

								if($THEME_SWITCHER == "Y"){
									$_SESSION[$siteID][strToUpper($requestKey)] = strToUpper($requestValue);
									$TEMPLATE_OPTIONS[$templateOptionKey]["CURRENT_VALUE"] = strToUpper($requestValue);
								}
							}
						}
					}
				}
			}
		}
		if(isset($_REQUEST["color_theme"]) && $_REQUEST["color_theme"]){
			LocalRedirect($_SERVER["HTTP_REFERER"]);
		}

		$SITE_THEME = $TEMPLATE_OPTIONS["COLOR_THEME"]["CURRENT_VALUE"];
		$SITE_THEMEBG = $TEMPLATE_OPTIONS["BGCOLOR_THEME"]["CURRENT_VALUE"];

		$SITE_THEME_PATH = SITE_TEMPLATE_PATH.'/themes/'.strToLower($SITE_THEME.($SITE_THEME !== 'CUSTOM' ? '' : '_'.$siteID));
		$SITE_THEMEBG_PATH = SITE_TEMPLATE_PATH.'/bg_color/'.strToLower($SITE_THEMEBG.($SITE_THEMEBG !== 'CUSTOM' ? '' : '_'.$siteID));
		$APPLICATION->SetAdditionalCSS($SITE_THEME_PATH.'/theme.css', true);
		$APPLICATION->SetAdditionalCSS($SITE_THEMEBG_PATH.'/bgcolors.css', true);
		COptimus::GenerateThemes($siteID);

		if(CModule::IncludeModuleEx(self::moduleID) == 1){
			$APPLICATION->SetPageProperty("viewport", "user-scalable=no, initial-scale=1.0, maximum-scale=1.0, width=device-width");
			$APPLICATION->SetPageProperty("HandheldFriendly", "true");
			$APPLICATION->SetPageProperty("apple-mobile-web-app-capable", "yes");
			$APPLICATION->SetPageProperty("apple-mobile-web-app-status-bar-style", "black");
			$APPLICATION->SetPageProperty("SKYPE_TOOLBAR", "SKYPE_TOOLBAR_PARSER_COMPATIBLE");
			$APPLICATION->SetAdditionalCSS(SITE_TEMPLATE_PATH.'/css/jquery.fancybox.css');
			$APPLICATION->SetAdditionalCSS(SITE_TEMPLATE_PATH.'/css/styles.css');
			if($_REQUEST && isset($_REQUEST['print'])){
				$APPLICATION->SetAdditionalCSS(SITE_TEMPLATE_PATH.'/css/print.css', true);
			}else{
				$APPLICATION->SetAdditionalCSS(((COption::GetOptionString('main', 'use_minified_assets', 'N', $siteID) === 'Y') && file_exists($_SERVER['DOCUMENT_ROOT'].SITE_TEMPLATE_PATH.'/css/media.min.css')) ? SITE_TEMPLATE_PATH.'/css/media.min.css' : SITE_TEMPLATE_PATH.'/css/media.css', true);
			}
			$APPLICATION->SetAdditionalCSS(SITE_TEMPLATE_PATH.'/css/fonts/font-awesome/css/font-awesome.min.css', true);
			$APPLICATION->SetAdditionalCSS(SITE_TEMPLATE_PATH.'/css/custom.css', true);
			$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/jquery.actual.min.js');
			$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/jqModal.js');
			$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/jquery.fancybox.js');
			$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/jquery.history.js');
			$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/jquery.flexslider.js');
			$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/jquery.validate.min.js');
			$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/jquery.inputmask.bundle.min.js');
			$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/jquery.easing.1.3.js');
			$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/equalize.min.js');
			$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/jquery.alphanumeric.js');
			$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/jquery.cookie.js');
			$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/jquery.plugin.min.js');
			$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/jquery.countdown.min.js');
			$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/jquery.countdown-ru.js');
			$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/jquery.ikSelect.js');
			$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/sly.js');
			$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/equalize_ext.js');
			$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/jquery.dotdotdot.js');
			$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/zoomsl-3.0.js');
			$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/main.js');
			$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/custom.js', true);

			if(strlen($TEMPLATE_OPTIONS['FAVICON_IMAGE']['CURRENT_IMG'])){
				$APPLICATION->AddHeadString('<link rel="shortcut icon" href="'.$TEMPLATE_OPTIONS['FAVICON_IMAGE']['CURRENT_IMG'].'" type="image/x-icon" />', true);
			}
			if(strlen($TEMPLATE_OPTIONS['APPLE_TOUCH_ICON_IMAGE']['CURRENT_IMG'])){
				$APPLICATION->AddHeadString('<link rel="apple-touch-icon" sizes="180x180" href="'.$TEMPLATE_OPTIONS['APPLE_TOUCH_ICON_IMAGE']['CURRENT_IMG'].'" />', true);
			}

			CJSCore::Init(array("jquery"));
			CAjax::Init();
			\Bitrix\Main\Loader::includeModule('iblock');
			\Bitrix\Main\Loader::includeModule('sale');
			\Bitrix\Main\Loader::includeModule('catalog');

			self::showBgImage($siteID);

			return true;
		}
		else{
			$APPLICATION->SetAdditionalCSS(SITE_TEMPLATE_PATH.'/css/styles.css');
			$APPLICATION->SetTitle(GetMessage("ERROR_INCLUDE_MODULE"));
			$APPLICATION->IncludeFile(SITE_DIR."include/error_include_module.php", Array(), Array()); die();
		}
	}

	static function checkBgImage($siteID){
		global $APPLICATION;
		static $arBanner;
		if($arBanner===NULL){
			$arItems = COptimusCache::CIBLockElement_GetList(array("SORT" => "ASC", 'CACHE' => array('TAG' => COptimusCache::GetIBlockCacheTag(COptimusCache::$arIBlocks[$siteID]["aspro_optimus_adv"]["aspro_optimus_bg_images"][0]))), array('IBLOCK_ID' => COptimusCache::$arIBlocks[$siteID]["aspro_optimus_adv"]["aspro_optimus_bg_images"][0], "ACTIVE"=>"Y"), false, false, array("ID", "NAME", "PREVIEW_PICTURE", "PROPERTY_URL", "PROPERTY_FIXED_BANNER", "PROPERTY_URL_NOT_SHOW"));
			$arBanner=array();
			if($arItems){
				$curPage=$APPLICATION->GetCurPage();
				foreach($arItems as $arItem){
					if(isset($arItem["PROPERTY_URL_VALUE"]) && $arItem["PREVIEW_PICTURE"]){
						if(!is_array($arItem["PROPERTY_URL_VALUE"]))
							$arItem["PROPERTY_URL_VALUE"]=array($arItem["PROPERTY_URL_VALUE"]);
						if($arItem["PROPERTY_URL_VALUE"]){
							foreach($arItem["PROPERTY_URL_VALUE"] as $url){
								$url=str_replace("SITE_DIR", SITE_DIR, $url);
								if($arItem["PROPERTY_URL_NOT_SHOW_VALUE"]){
									if(!is_array($arItem["PROPERTY_URL_NOT_SHOW_VALUE"]))
										$arItem["PROPERTY_URL_NOT_SHOW_VALUE"]=array($arItem["PROPERTY_URL_NOT_SHOW_VALUE"]);
									foreach($arItem["PROPERTY_URL_NOT_SHOW_VALUE"] as $url_not_show){
										$url_not_show=str_replace("SITE_DIR", SITE_DIR, $url_not_show);
										if(CSite::InDir($url_not_show)){
											break 2;
										}
									}
									foreach($arItem["PROPERTY_URL_NOT_SHOW_VALUE"] as $url_not_show){
										$url_not_show=str_replace("SITE_DIR", SITE_DIR, $url_not_show);
										if(CSite::InDir($url_not_show)){
											// continue;
											break 2;
										}else{
											if(CSite::InDir($url)){
												$arBanner=$arItem;
												break;
											}
										}
									}
								}else{
									if(CSite::InDir($url)){
										$arBanner=$arItem;
										break;
									}
								}
							}
						}
					}
				}
			}
		}
		return $arBanner;
	}

	function showBgImage($siteID){
		global $APPLICATION;
		$arBanner=self::checkBgImage($siteID);
		if($arBanner){
			$image=CFile::GetFileArray($arBanner["PREVIEW_PICTURE"]);
			$class="bg_image_site";
			if($arBanner["PROPERTY_FIXED_BANNER_VALUE"]=="Y")
				$class.=" fixed";
			if(self::IsMainPage())
				$class.=" opacity";
			$APPLICATION->AddHeadString('<script>$(document).ready(function(){$(\'body\').append("<span class=\''.$class.'\' style=\'background-image:url('.$image["SRC"].');\'></span>");})</script>');
		}
		return true;
	}

	function ShowLogo(){
		global $arSite, $TEMPLATE_OPTIONS;
		$image=($TEMPLATE_OPTIONS["LOGO_IMAGE"]["CURRENT_IMG"] ? $TEMPLATE_OPTIONS["LOGO_IMAGE"]["CURRENT_IMG"] : SITE_DIR."include/logo.png");?>
		<a href="<?=SITE_DIR?>"><img src="<?=$image?>" alt="<?=$arSite["SITE_NAME"]?>" title="<?=$arSite["SITE_NAME"]?>" /></a>
	<?}

	static function getCurrentPageClass(){
		static $result;
		global $TEMPLATE_OPTIONS;
		$arHidePage = array("front_page", "catalog_page");

		if(!isset($result)){
			if(self::IsMainPage())
				$result = 'front';
			if(self::IsAuthSection())
				$result = 'auth';
			if(self::IsBasketPage())
				$result = 'basket';
			if(self::IsCatalogPage())
				$result = 'catalog';
			if(self::IsPersonalPage())
				$result = 'personal';
			if(self::IsOrderPage())
				$result = 'order';
			if($result)
				$result.='_page';
	
			if($TEMPLATE_OPTIONS['MENU_POSITION_MAIN']['CURRENT_VALUE'] == 'HIDE' && in_array($result, $arHidePage))
				$result = 'hide_catalog';
		}
		return $result;
	}

	static function IsMainPage(){
		static $result;

		if(!isset($result)){
			$result = CSite::InDir(SITE_DIR.'index.php');
		}

		return $result;
	}

	static function IsAuthSection(){
		static $result;

		if(!isset($result)){
			$result = CSite::InDir(SITE_DIR.'auth/');
		}

		return $result;
	}

	static function IsBasketPage(){
		static $result;

		if(!isset($result)){
			$result = CSite::InDir(SITE_DIR.'basket/');
		}

		return $result;
	}

	static function IsCatalogPage(){
		static $result;

		if(!isset($result)){
			$result = CSite::InDir(SITE_DIR.'catalog/');
		}

		return $result;
	}

	static function IsOrderPage(){
		static $result;

		if(!isset($result)){
			$result = CSite::InDir(SITE_DIR.'order/');
		}

		return $result;
	}

	static function IsPersonalPage(){
		static $result;

		if(!isset($result)){
			$result = CSite::InDir(SITE_DIR.'personal/');
		}

		return $result;
	}

	function GenerateMinCss($file){
		if(file_exists($file)){
			$content = @file_get_contents($file);
			if($content !== false){
				$content = preg_replace('!/\*[^*]*\*+([^/][^*]*\*+)*/!', '', $content);
				$content = str_replace(array("\r\n", "\r", "\n", "\t"), '', $content);
				$content = preg_replace('/ {2,}/', ' ', $content);
				$content = str_replace(array(' : ', ': ', ' :',), ':', $content);
				$content = str_replace(array(' ; ', '; ', ' ;'), ';', $content);
				$content = str_replace(array(' > ', '> ', ' >'), '>', $content);
				$content = str_replace(array(' + ', '+ ', ' +'), '+', $content);
				$content = str_replace(array(' { ', '{ ', ' {'), '{', $content);
				$content = str_replace(array(' } ', '} ', ' }'), '}', $content);
				$content = str_replace(array(' ( ', '( ', ' ('), '(', $content);
				$content = str_replace(array(' ) ', ') ', ' )'), ')', $content);
				$content = str_replace('and(', 'and (', $content);
				$content = str_replace(')li', ') li', $content);
				$content = str_replace(').', ') .', $content);
				@file_put_contents(dirname($file).'/'.basename($file, '.css').'.min.css', $content);
			}
		}

		return false;
	}

	function GenerateThemes($siteID){
		global $SITE_THEME, $TEMPLATE_OPTIONS, $THEME_SWITCHER;
		$arBaseColors = $TEMPLATE_OPTIONS['COLOR_THEME']['VALUES'];
		$arBaseBgColors = $TEMPLATE_OPTIONS['BGCOLOR_THEME']['VALUES'];
		$isCustomTheme = $TEMPLATE_OPTIONS['COLOR_THEME']['CURRENT_VALUE'] === 'CUSTOM';
		$isCustomThemeBG = $TEMPLATE_OPTIONS['BGCOLOR_THEME']['CURRENT_VALUE'] === 'CUSTOM';

		$bNeedGenerateAllThemes = COption::GetOptionString(self::moduleID, 'NeedGenerateThemes', 'N', $siteID) === 'Y';
		$bNeedGenerateCustomTheme = COption::GetOptionString(self::moduleID, 'NeedGenerateCustomTheme', 'N', $siteID) === 'Y';
		$bNeedGenerateCustomThemeBG = COption::GetOptionString(self::moduleID, 'NeedGenerateCustomThemeBG', 'N', $siteID) === 'Y';

		$baseColorCustom = $baseColorBGCustom = '';
		$lastGeneratedBaseColorCustom = COption::GetOptionString(self::moduleID, 'LastGeneratedBaseColorCustom', '', $siteID);
		if(isset($TEMPLATE_OPTIONS['CUSTOM_COLOR_THEME'])){
			$baseColorCustom = str_replace('#', '', $TEMPLATE_OPTIONS['CUSTOM_COLOR_THEME']['CURRENT_VALUE']);
			$baseColorCustom = '#'.(strlen($baseColorCustom) ? $baseColorCustom : $TEMPLATE_OPTIONS['CUSTOM_COLOR_THEME']['DEFAULT']);
		}
		$lastGeneratedBaseColorBGCustom = COption::GetOptionString(self::moduleID, 'LastGeneratedBaseColorBGCustom', '', $siteID);
		if(isset($TEMPLATE_OPTIONS['CUSTOM_BGCOLOR_THEME'])){
			$baseColorBGCustom = str_replace('#', '', $TEMPLATE_OPTIONS['CUSTOM_BGCOLOR_THEME']['CURRENT_VALUE']);
			$baseColorBGCustom = (strlen($baseColorBGCustom) ? $baseColorBGCustom : $TEMPLATE_OPTIONS['CUSTOM_BGCOLOR_THEME']['DEFAULT']);
		}

		$bGenerateAll = self::devMode || $bNeedGenerateAllThemes;
		$bGenerateCustom = $bGenerateAll || $bNeedGenerateCustomTheme || ($THEME_SWITCHER === 'Y' && $isCustomTheme && strlen($baseColorCustom) && $baseColorCustom != $lastGeneratedBaseColorCustom);
		$bGenerateCustomBG = $bGenerateAll || $bNeedGenerateCustomThemeBG || ($THEME_SWITCHER === 'Y' && $isCustomThemeBG && strlen($baseColorBGCustom) && $baseColorBGCustom != $lastGeneratedBaseColorBGCustom);
		if($arBaseColors && is_array($arBaseColors) && ($bGenerateAll || $bGenerateCustom || $isCustomThemeBG)){
			if(!class_exists('lessc')){
				include_once 'lessc.inc.php';
			}
			$less = new lessc;
			try{
				foreach($arBaseColors as $arColor){
					if(($bCustom = ($arColor['VALUE'] == 'CUSTOM')) && $bGenerateCustom){
						if(strlen($baseColorCustom)){
							$less->setVariables(array('bcolor' => $baseColorCustom));
						}
					}
					elseif($bGenerateAll){
						$less->setVariables(array('bcolor' => $arColor['COMPONENT_VALUE']));
					}

					if($bGenerateAll || ($bCustom && $bGenerateCustom)){
						if(defined('SITE_TEMPLATE_PATH')){
							$themeDirPath = $_SERVER['DOCUMENT_ROOT'].SITE_TEMPLATE_PATH.'/themes/'.strToLower($arColor['VALUE'].($arColor['VALUE'] !== 'CUSTOM' ? '' : '_'.$siteID)).'/';
							if(!is_dir($themeDirPath)) mkdir($themeDirPath, 0755, true);
							$output = $less->compileFile(__DIR__.'/../../css/theme.less', $themeDirPath.'theme.css');
							if($output){
								if($bCustom){
									COption::SetOptionString(self::moduleID, 'LastGeneratedBaseColorCustom', $baseColorCustom, '', $siteID);
								}
								self::GenerateMinCss($themeDirPath.'theme.css');
							}
						}
					}
				}
				foreach($arBaseBgColors as $arColor){
					if(($bCustom = ($arColor['VALUE'] == 'CUSTOM')) && $bGenerateCustomBG){
						if(strlen($baseColorBGCustom)){
							$footerBgColor = $baseColorBGCustom === "FFFFFF" ? "F6F6F7" : $baseColorBGCustom;
							$less->setVariables(array('bcolor' => '#'.$baseColorBGCustom, 'fcolor' => '#'.$footerBgColor));
						}
					}
					elseif($bGenerateAll){
						$less->setVariables(array('bcolor' => $arColor['COMPONENT_VALUE'], 'fcolor' => $arColor['COMPONENT_VALUE']));
					}

					if($bGenerateAll || ($bCustom && $bGenerateCustomBG)){
						if(defined('SITE_TEMPLATE_PATH')){
							$themeDirPath = $_SERVER['DOCUMENT_ROOT'].SITE_TEMPLATE_PATH.'/bg_color/'.strToLower($arColor['VALUE'].($arColor['VALUE'] !== 'CUSTOM' ? '' : '_'.$siteID)).'/';
							if(!is_dir($themeDirPath)) mkdir($themeDirPath, 0755, true);
							$output = $less->compileFile(__DIR__.'/../../css/bgtheme.less', $themeDirPath.'bgcolors.css');
							if($output){
								if($bCustom){
									COption::SetOptionString(self::moduleID, 'LastGeneratedBaseColorBGCustom', $baseColorBGCustom, '', $siteID);
								}
								self::GenerateMinCss($themeDirPath.'bgcolors.css');
							}
						}
					}
				}
			}
			catch(exception $e){
				echo 'Fatal error: '.$e->getMessage();
				die();
			}

			if($bNeedGenerateAllThemes){
				COption::SetOptionString(self::moduleID, "NeedGenerateThemes", 'N', '', $siteID);
			}
			if($bNeedGenerateCustomTheme){
				COption::SetOptionString(self::moduleID, "NeedGenerateCustomTheme", 'N', '', $siteID);
			}
			if($bNeedGenerateCustomThemeBG){
				COption::SetOptionString(self::moduleID, "NeedGenerateCustomThemeBG", 'N', '', $siteID);
			}
		}
	}

	function getChilds($input, &$start = 0, $level = 0){
		$childs = array();

		if(!$level){
			$lastDepthLevel = 1;
			if(is_array($input)){
				foreach($input as $i => $arItem){
					if($arItem["DEPTH_LEVEL"] > $lastDepthLevel){
						if($i > 0){
							$input[$i - 1]["IS_PARENT"] = 1;
						}
					}
					$lastDepthLevel = $arItem["DEPTH_LEVEL"];
				}
			}
		}

		for($i = $start, $count = count($input); $i < $count; ++$i){
			$item = $input[$i];
			if($level > $item['DEPTH_LEVEL'] - 1){
				break;
			}
			elseif(!empty($item['IS_PARENT'])){
				++$i;
				$item['CHILD'] = self::getChilds($input, $i, $level + 1);
				--$i;
			}
			$childs[] = $item;
		}

		$start = $i;
		return $childs;
	}

	function unique_multidim_array($array, $key) {
	    $temp_array = array();
	    $i = 0;
	    $key_array = array();

	    foreach($array as $val) {
	        if (!in_array($val[$key], $key_array)) {
	            $key_array[$i] = $val[$key];
	            $temp_array[$i] = $val;
	        }
	        $i++;
	    }
	    return $temp_array;
	}

	function convertArray($array, $charset){
		global $APPLICATION;
	    if(is_array($array) && $array){
		    foreach($array as $key=>$arVal) {
		    	foreach($arVal as $key2=>$value){
					$array[$key][$key2]=$APPLICATION->ConvertCharset($value, 'UTF-8', $charset);
		    	}
		    }
		}else{
			$array=array();
		}
	    return $array;
	}

	function getChilds2($input, &$start = 0, $level = 0){
		static $arIblockItemsMD5 = array();

		if(!$level){
			$lastDepthLevel = 1;
			if($input && is_array($input)){
				foreach($input as $i => $arItem){
					if($arItem['DEPTH_LEVEL'] > $lastDepthLevel){
						if($i > 0){
							$input[$i - 1]['IS_PARENT'] = 1;
						}
					}
					$lastDepthLevel = $arItem['DEPTH_LEVEL'];
				}
			}
		}

		$childs = array();
		$count = count($input);
		for($i = $start; $i < $count; ++$i){
			$item = $input[$i];
			if(!isset($item)){
				continue;
			}
			if($level > $item['DEPTH_LEVEL'] - 1){
				break;
			}
			else{
				if(!empty($item['IS_PARENT'])){
					$i++;
					$item['CHILD'] = self::getChilds($input, $i, $level+1);
					$i--;
				}

				$childs[] = $item;
			}
		}
		$start = $i;

		if(is_array($childs)){
			foreach($childs as $j => $item){
				if($item['PARAMS']){
					$md5 = md5($item['TEXT'].$item['LINK'].$item['SELECTED'].$item['PERMISSION'].$item['ITEM_TYPE'].$item['IS_PARENT'].serialize($item['ADDITIONAL_LINKS']).serialize($item['PARAMS']));
					if(isset($arIblockItemsMD5[$md5][$item['PARAMS']['DEPTH_LEVEL']])){
						if(isset($arIblockItemsMD5[$md5][$item['PARAMS']['DEPTH_LEVEL']][$level]) || ($item['DEPTH_LEVEL'] === 1 && !$level)){
							unset($childs[$j]);
							continue;
						}
					}
					if(!isset($arIblockItemsMD5[$md5])){
						$arIblockItemsMD5[$md5] = array($item['PARAMS']['DEPTH_LEVEL'] => array($level => true));
					}
					else{
						$arIblockItemsMD5[$md5][$item['PARAMS']['DEPTH_LEVEL']][$level] = true;
					}
				}
			}
		}

		if(!$level){
			$arIblockItemsMD5 = array();
		}

		return $childs;
	}

	function getSectionChilds($PSID, &$arSections, &$arSectionsByParentSectionID, &$arItemsBySectionID, &$aMenuLinksExt){
		if($arSections && is_array($arSections)){
			foreach($arSections as $arSection){
				if($arSection['IBLOCK_SECTION_ID'] == $PSID){
					$arItem = array($arSection['NAME'], $arSection['SECTION_PAGE_URL'], array(), array('FROM_IBLOCK' => 1, 'DEPTH_LEVEL' => $arSection['DEPTH_LEVEL']));
					$arItem[3]['IS_PARENT'] = (isset($arItemsBySectionID[$arSection['ID']]) || isset($arSectionsByParentSectionID[$arSection['ID']]) ? 1 : 0);
					if($arSection["PICTURE"])
						$arItem[3]["PICTURE"]=$arSection["PICTURE"];
					$aMenuLinksExt[] = $arItem;
					if($arItem[3]['IS_PARENT']){
						// subsections
						self::getSectionChilds($arSection['ID'], $arSections, $arSectionsByParentSectionID, $arItemsBySectionID, $aMenuLinksExt);
						// section elements
						if($arItemsBySectionID[$arSection['ID']] && is_array($arItemsBySectionID[$arSection['ID']])){
							foreach($arItemsBySectionID[$arSection['ID']] as $arItem){
								if(is_array($arItem['DETAIL_PAGE_URL'])){
									if(isset($arItem['CANONICAL_PAGE_URL'])){
										$arItem['DETAIL_PAGE_URL'] = $arItem['CANONICAL_PAGE_URL'];
									}
									else{
										$arItem['DETAIL_PAGE_URL'] = $arItem['DETAIL_PAGE_URL'][key($arItem['DETAIL_PAGE_URL'])];
									}
								}
								$aMenuLinksExt[] = array($arItem['NAME'], $arItem['DETAIL_PAGE_URL'], array(), array('FROM_IBLOCK' => 1, 'DEPTH_LEVEL' => ($arSection['DEPTH_LEVEL'] + 1), 'IS_ITEM' => 1));
							}
						}
					}
				}
			}
		}
	}

	function GetDirMenuParametrs($dir){
		if(strlen($dir)){
			$file = str_replace('//', '/', $dir.'/.section.php');
			if(file_exists($file)){
				@include($file);
				return $arDirProperties;
			}
		}

		return false;
	}


	static function cmpByID($a, $b){
		return ($b['ID'] - $a['ID']);
	}

	static function cmpBySort($a, $b){
		return ($a['SORT'] - $b['SORT']);
	}

	static function cmpByIDFilter($a, $b){
		global $IDFilter;
		$ak = array_search($a['ID'], $IDFilter);
		$bk = array_search($b['ID'], $IDFilter);
		if($ak === $bk){
			return 0;
		}
		else{
			return ($ak > $bk ? 1 : -1);
		}
	}

	function getChainNeighbors($curSectionID, $chainPath){
		static $arSections, $arSectionsIDs, $arSubSections;
		$arResult = array();

		if($arSections === NULL){
			$arSections = $arSectionsIDs = $arSubSections = array();
			$IBLOCK_ID = false;
			$nav = CIBlockSection::GetNavChain(false, $curSectionID, array("ID", "IBLOCK_ID", "IBLOCK_SECTION_ID", "SECTION_PAGE_URL"));
			while($ar = $nav->GetNext()){
				$arSections[] = $ar;
				$arSectionsIDs[] = ($ar["IBLOCK_SECTION_ID"] ? $ar["IBLOCK_SECTION_ID"] : 0);
				$IBLOCK_ID = $ar["IBLOCK_ID"];
			}

			if($arSectionsIDs){
				$resSubSection = CIBlockSection::GetList(array('SORT' => 'ASC'), array("ACTIVE" => "Y", "GLOBAL_ACTIVE" => "Y", "IBLOCK_ID" => $IBLOCK_ID, "SECTION_ID" => $arSectionsIDs), false, array("ID", "NAME", "IBLOCK_SECTION_ID", "SECTION_PAGE_URL"));
				while($arSubSection = $resSubSection->GetNext()){
					$arSubSection["IBLOCK_SECTION_ID"] = ($arSubSection["IBLOCK_SECTION_ID"] ? $arSubSection["IBLOCK_SECTION_ID"] : 0);
					$arSubSections[$arSubSection["IBLOCK_SECTION_ID"]][] = $arSubSection;
				}

				if(in_array(0, $arSectionsIDs)){
					$resSubSection = CIBlockSection::GetList(array('SORT' => 'ASC'), array("ACTIVE" => "Y", "GLOBAL_ACTIVE" => "Y", "IBLOCK_ID" => $IBLOCK_ID, "SECTION_ID" => false), false, array("ID", "NAME", "IBLOCK_SECTION_ID", "SECTION_PAGE_URL"));
					while($arSubSection = $resSubSection->GetNext()){
						$arSubSections[$arSubSection["IBLOCK_SECTION_ID"]][] = $arSubSection;
					}
				}
			}
		}

		if($arSections && strlen($chainPath)){
			foreach($arSections as $arSection){
				if($arSection["SECTION_PAGE_URL"] == $chainPath){
					if($arSubSections[$arSection["IBLOCK_SECTION_ID"]]){
						foreach($arSubSections[$arSection["IBLOCK_SECTION_ID"]] as $arSubSection){
							if($curSectionID !== $arSubSection["ID"]){
								$arResult[] = array("NAME" => $arSubSection["NAME"], "LINK" => $arSubSection["SECTION_PAGE_URL"]);
							}
						}
					}
					break;
				}
			}
		}

		return $arResult;
	}

	function drawFormField($FIELD_SID, $arQuestion){
		?>
		<?$arQuestion["HTML_CODE"] = str_replace('name=', 'data-sid="'.$FIELD_SID.'" name=', $arQuestion["HTML_CODE"]);?>
		<?$arQuestion["HTML_CODE"] = str_replace('left', '', $arQuestion["HTML_CODE"]);?>
		<?$arQuestion["HTML_CODE"] = str_replace('size="0"', '', $arQuestion["HTML_CODE"]);?>
		<?if($arQuestion['STRUCTURE'][0]['FIELD_TYPE'] == 'hidden'):?>
			<?=$arQuestion["HTML_CODE"];?>
		<?else:?>
			<div class="form-control">
				<label><span><?=$arQuestion["CAPTION"]?><?=($arQuestion["REQUIRED"] == "Y" ? '&nbsp;<span class="star">*</span>' : '')?></span></label>
				<?
				if(is_array($arResult["FORM_ERRORS"]) && array_key_exists($FIELD_SID, $arResult['FORM_ERRORS'])){
					$arQuestion["HTML_CODE"] = str_replace('class="', 'class="error ', $arQuestion["HTML_CODE"]);
				}
				if($arQuestion["REQUIRED"] == "Y"){
					$arQuestion["HTML_CODE"] = str_replace('name=', 'required name=', $arQuestion["HTML_CODE"]);
				}
				if($arQuestion["STRUCTURE"][0]["FIELD_TYPE"] == "email"){
					$arQuestion["HTML_CODE"] = str_replace('type="text"', 'type="email" placeholder="mail@domen.com"', $arQuestion["HTML_CODE"]);
				}
				?>
				<?=$arQuestion["HTML_CODE"]?>
			</div>
		<?endif;?>
		<?
	}

	function GetValidFormIDForSite(&$form_id){
		if(!is_numeric($form_id) && !in_array($form_id, array('auth', 'one_click_buy'))){
			CModule::IncludeModule('form');
			$rsForm = CForm::GetList($by = "id", $order = "asc", array("ACTIVE" => "Y", "SID" => $form_id, "SITE" => array(SITE_ID)), $is_filtered);
			if($item = $rsForm->Fetch()){
				$form_id = $item["ID"];
			}
		}

		return $form_id;
	}

	function CheckTypeCount($totalCount){
		if(is_float($totalCount)){
			return floatval($totalCount);
		}
		else{
			return intval($totalCount);
		}
	}

	function GetTotalCount(&$arItem){
		$totalCount = 0;
		if($arItem["OFFERS"]){
			foreach($arItem["OFFERS"] as $arOffer){
				$totalCount += $arOffer["CATALOG_QUANTITY"];
			}
		}elseif($arItem["PRICES"]){
			$totalCount = ( $arItem["~CATALOG_QUANTITY"] != $arItem["CATALOG_QUANTITY"] ? $arItem["~CATALOG_QUANTITY"] : $arItem["CATALOG_QUANTITY"] );
		}else{
			$totalCount = ( $arItem["~CATALOG_QUANTITY"] != $arItem["CATALOG_QUANTITY"] ? $arItem["~CATALOG_QUANTITY"] : $arItem["CATALOG_QUANTITY"] );
		}
		return self::CheckTypeCount($totalCount);
	}

	function GetQuantityArray($totalCount, $arItemIDs = array(), $useStoreClick="N"){
		static $arQuantityOptions, $arQuantityRights;
		if($arQuantityOptions === NULL){
			$arQuantityOptions = array(
				"USE_WORD_EXPRESSION" => COption::GetOptionString("aspro.optimus", "USE_WORD_EXPRESSION", "Y", SITE_ID),
				"MAX_AMOUNT" => COption::GetOptionString("aspro.optimus", "MAX_AMOUNT", "10", SITE_ID),
				"MIN_AMOUNT" => COption::GetOptionString("aspro.optimus", "MIN_AMOUNT", "2", SITE_ID),
				"EXPRESSION_FOR_MIN" => COption::GetOptionString("aspro.optimus", "EXPRESSION_FOR_MIN", GetMessage("EXPRESSION_FOR_MIN_DEFAULT"), SITE_ID),
				"EXPRESSION_FOR_MID" => COption::GetOptionString("aspro.optimus", "EXPRESSION_FOR_MID", GetMessage("EXPRESSION_FOR_MID_DEFAULT"), SITE_ID),
				"EXPRESSION_FOR_MAX" => COption::GetOptionString("aspro.optimus", "EXPRESSION_FOR_MAX", GetMessage("EXPRESSION_FOR_MAX_DEFAULT"), SITE_ID),
				"EXPRESSION_FOR_EXISTS" => COption::GetOptionString("aspro.optimus", "EXPRESSION_FOR_EXISTS", GetMessage("EXPRESSION_FOR_EXISTS_DEFAULT"), SITE_ID),
				"EXPRESSION_FOR_NOTEXISTS" => COption::GetOptionString("aspro.optimus", "EXPRESSION_FOR_NOTEXISTS", GetMessage("EXPRESSION_FOR_NOTEXISTS_DEFAULT"), SITE_ID),
				"SHOW_QUANTITY_FOR_GROUPS" => (($tmp = COption::GetOptionString("aspro.optimus", "SHOW_QUANTITY_FOR_GROUPS", "", SITE_ID)) ? explode(",", $tmp) : array()),
				"SHOW_QUANTITY_COUNT_FOR_GROUPS" => (($tmp = COption::GetOptionString("aspro.optimus", "SHOW_QUANTITY_COUNT_FOR_GROUPS", "", SITE_ID)) ? explode(",", $tmp) : array()),
			);

			$arQuantityRights = array(
				"SHOW_QUANTITY" => false,
				"SHOW_QUANTITY_COUNT" => false,
			);

			global $USER;
			$res = CUser::GetUserGroupList($USER->GetID());
			while ($arGroup = $res->Fetch()){
				if(in_array($arGroup["GROUP_ID"], $arQuantityOptions["SHOW_QUANTITY_FOR_GROUPS"])){
					$arQuantityRights["SHOW_QUANTITY"] = true;
				}
				if(in_array($arGroup["GROUP_ID"], $arQuantityOptions["SHOW_QUANTITY_COUNT_FOR_GROUPS"])){
					$arQuantityRights["SHOW_QUANTITY_COUNT"] = true;
				}
			}
		}

		$indicators = 0;
		$totalAmount = $totalText = $totalHTML = $totalHTMLs = '';

		if($arQuantityRights["SHOW_QUANTITY"]){
			if($totalCount > $arQuantityOptions["MAX_AMOUNT"]){
				$indicators = 3;
				$totalAmount = $arQuantityOptions["EXPRESSION_FOR_MAX"];
			}
			elseif($totalCount < $arQuantityOptions["MIN_AMOUNT"] && $totalCount > 0){
				$indicators = 1;
				$totalAmount = $arQuantityOptions["EXPRESSION_FOR_MIN"];
			}
			else{
				$indicators = 2;
				$totalAmount = $arQuantityOptions["EXPRESSION_FOR_MID"];
			}

			if($totalCount > 0){
				if($arQuantityRights["SHOW_QUANTITY_COUNT"]){
					$totalHTML = '<span class="first'.($indicators >= 1 ? ' r' : '').'"></span><span class="'.($indicators >= 2 ? ' r' : '').'"></span><span class="last'.($indicators >= 3 ? ' r' : '').'"></span>';
				}
				else{
					$totalHTML = '<span class="first r"></span>';
				}
			}
			else{
				$totalHTML = '<span class="null"></span>';
			}

			//$totalText = ($totalCount > 0 ? $arQuantityOptions["EXPRESSION_FOR_EXISTS"] : $arQuantityOptions["EXPRESSION_FOR_NOTEXISTS"]);
			if($totalCount > 0){
				$totalText = $arQuantityOptions["EXPRESSION_FOR_EXISTS"];
			}else{
				if($useStoreClick=="Y"){
					$totalText = "<span class='store_view'>".$arQuantityOptions["EXPRESSION_FOR_NOTEXISTS"]."</span>";
				}else{
					$totalText = $arQuantityOptions["EXPRESSION_FOR_NOTEXISTS"];
				}
			}

			if($arQuantityRights["SHOW_QUANTITY_COUNT"] && $totalCount > 0){
				if($arQuantityOptions["USE_WORD_EXPRESSION"] == "Y"){
					if(strlen($totalAmount)){
						if($useStoreClick=="Y"){
							$totalText = "<span class='store_view'>".$totalAmount."</span>";
						}else{
							$totalText = $totalAmount;
						}
					}
				}
				else{
					if($useStoreClick=="Y"){
						$totalText .= (strlen($totalText) ? " <span class='store_view'>(".$totalCount.")</span>" : "<span class='store_view'>".$totalCount."</span>");
					}else{
						$totalText .= (strlen($totalText) ? " (".$totalCount.")" : $totalCount);
					}
				}
			}
			$totalHTMLs ='<div class="item-stock" '.($arItemIDs["STORE_QUANTITY"] ? "id=".$arItemIDs["STORE_QUANTITY"] : "").'>';
			$totalHTMLs .= '<span class="icon '.$arClass[1].($totalCount > 0 ? 'stock' : ' order').'"></span><span class="value">'.$totalText.'</span>';
			$totalHTMLs .='</div>';
		}
		return array("OPTIONS" => $arQuantityOptions, "RIGHTS" => $arQuantityRights, "TEXT" => $totalText, "HTML" => $totalHTMLs);
	}

	function GetAvailiableStore($totalCount = 0, $arItemIDs=array(), $detail=false){
		static $arQuantityOptions;
		if($arQuantityOptions === NULL){
			$arQuantityOptions = array(
				"EXPRESSION_FOR_EXISTS" => COption::GetOptionString("aspro.optimus", "EXPRESSION_FOR_EXISTS", GetMessage("EXPRESSION_FOR_EXISTS_DEFAULT"), SITE_ID),
				"EXPRESSION_FOR_NOTEXISTS" => COption::GetOptionString("aspro.optimus", "EXPRESSION_FOR_NOTEXISTS", GetMessage("EXPRESSION_FOR_NOTEXISTS_DEFAULT"), SITE_ID),
			);
		}
		$totalHTML='<div class="item-stock" '.($arItemIDs["STORE_QUANTITY"] ? "id=".$arItemIDs["STORE_QUANTITY"] : "").'>';
		if($totalCount){
			$totalHTML.='<span class="icon stock"></span><span>'.$arQuantityOptions["EXPRESSION_FOR_EXISTS"];
			if($detail=="Y"){
				$totalHTML.='<span class="store_link"> ('.$totalCount.')</span>';
			}else{
				$totalHTML.=' ('.$totalCount.')';
			}
			$totalHTML.='</span>';
		}else{
			$totalHTML.='<span class="icon order"></span><span>'.$arQuantityOptions["EXPRESSION_FOR_NOTEXISTS"].'</span>';
		}
		$totalHTML.='</div>';

		return array( "OPTIONS" => $arQuantityOptions, "HTML" => $totalHTML );
	}

	function GetPropertyViewType($IBLOCK_ID){
		global $DB;
		$IBLOCK_ID = intval($IBLOCK_ID);
		$SECTION_ID=64;
		// $IBLOCK_ID = 15;
        $result = array();
		/*$rs = $DB->Query($s = "
			SELECT
				B.SECTION_PROPERTY,
				BP.ID PROPERTY_ID,
				BSP.SECTION_ID LINK_ID,
				BSP.SMART_FILTER,
				BSP.DISPLAY_TYPE,
				BSP.DISPLAY_EXPANDED,
				BSP.FILTER_HINT,
				BP.SORT,
				BP.PROPERTY_TYPE,
				BP.USER_TYPE
			FROM
				b_iblock B
				INNER JOIN b_iblock_property BP ON BP.IBLOCK_ID = B.ID
				INNER JOIN b_iblock_section_property BSP ON  BSP.PROPERTY_ID = BP.ID
			WHERE
				B.ID = ".$IBLOCK_ID."
			ORDER BY
				BP.SORT ASC, BP.ID ASC
		");*/
		$rs = $DB->Query($s = "
			SELECT
                    B.SECTION_PROPERTY,
                    BP.ID PROPERTY_ID,
                    BSP.SECTION_ID LINK_ID,
                    BSP.SMART_FILTER,
                    BSP.DISPLAY_TYPE,
                    BSP.DISPLAY_EXPANDED,
                    BSP.FILTER_HINT,
                    BP.SORT,
                    BS.LEFT_MARGIN,
                    BS.NAME LINK_TITLE,
                    BP.PROPERTY_TYPE,
                    BP.USER_TYPE
                FROM
                    b_iblock B
                    INNER JOIN b_iblock_property BP ON BP.IBLOCK_ID = B.ID
                    INNER JOIN b_iblock_section M ON M.ID = ".$SECTION_ID."
                    INNER JOIN b_iblock_section BS ON BS.IBLOCK_ID = M.IBLOCK_ID
                        AND M.LEFT_MARGIN >= BS.LEFT_MARGIN
                        AND M.RIGHT_MARGIN <= BS.RIGHT_MARGIN
                    INNER JOIN b_iblock_section_property BSP ON BSP.IBLOCK_ID = BS.IBLOCK_ID AND BSP.SECTION_ID = BS.ID AND BSP.PROPERTY_ID = BP.ID
                WHERE
                    B.ID = ".$IBLOCK_ID."
                ORDER BY
                    BP.SORT ASC, BP.ID ASC, BS.LEFT_MARGIN DESC
		");
		while ($ar = $rs->Fetch()){
			$result[$ar["PROPERTY_ID"]] = array(
				"PROPERTY_ID" => $ar["PROPERTY_ID"],
				"SMART_FILTER" => $ar["SMART_FILTER"],
				"DISPLAY_TYPE" => $ar["DISPLAY_TYPE"],
				"DISPLAY_EXPANDED" => $ar["DISPLAY_EXPANDED"],
				"FILTER_HINT" => $ar["FILTER_HINT"],
				"INHERITED_FROM" => $ar["LINK_ID"],
				"SORT" => $ar["SORT"],
				"PROPERTY_TYPE" => $ar["PROPERTY_TYPE"],
			);
		}
		return $result;
	}

	function GetSKUPropsArray(&$arSkuProps, $iblock_id=0, $type_view="list", $hide_title_props="N", $group_iblock_id="N"){
		$arSkuTemplate = array();
		$class_title=($hide_title_props=="Y" ? "hide_class" : "show_class");
		$class_title.=' bx_item_section_name';
		if($iblock_id){
			//$arPropsSku=COptimus::GetPropertyViewType($iblock_id);
			$arPropsSku=CIBlockSectionPropertyLink::GetArray($iblock_id, 64);
			if($arPropsSku){
				foreach ($arSkuProps as $key=>$arProp){
					if($arPropsSku[$arProp["ID"]]){
						$arSkuProps[$key]["DISPLAY_TYPE"]=$arPropsSku[$arProp["ID"]]["DISPLAY_TYPE"];
					}
				}
			}
		}?>

		<?

		if($group_iblock_id=="Y"){
			foreach ($arSkuProps as $iblockId => $skuProps){
				$arSkuTemplate[$iblockId] = array();
				foreach ($skuProps as $key=>&$arProp){
					$templateRow = '';
					if(($arProp["DISPLAY_TYPE"]=="P" || $arProp["DISPLAY_TYPE"]=="R" ) && $type_view!= 'block' ){
						$templateRow .= '<div class="bx_item_detail_size" id="#ITEM#_prop_'.$arProp['ID'].'_cont">'.
		'<span class="'.$class_title.'">'.htmlspecialcharsex($arProp['NAME']).'</span>'.
		'<div class="bx_size_scroller_container form-control bg"><div class="bx_size"><select id="#ITEM#_prop_'.$arProp['ID'].'_list">';
						foreach ($arProp['VALUES'] as $arOneValue){
							if($arOneValue['ID']>0){
								$arOneValue['NAME'] = htmlspecialcharsbx($arOneValue['NAME']);
								$templateRow .= '<option data-treevalue="'.$arProp['ID'].'_'.$arOneValue['ID'].'" data-showtype="select" data-onevalue="'.$arOneValue['ID'].'" ';
								if($arProp["DISPLAY_TYPE"]=="R"){
									$templateRow .= 'data-img_src="'.$arOneValue["PICT"]["SRC"].'" ';
								}
								$templateRow .= 'title="'.$arProp['NAME'].': '.$arOneValue['NAME'].'">';
								$templateRow .= '<span class="cnt">'.$arOneValue['NAME'].'</span>';
								$templateRow .= '</option>';
							}
						}
						$templateRow .= '</select></div>'.
		'</div></div>';
					}elseif ('TEXT' == $arProp['SHOW_MODE']){
						$templateRow .= '<div class="bx_item_detail_size" id="#ITEM#_prop_'.$arProp['ID'].'_cont">'.
		'<span class="'.$class_title.'">'.htmlspecialcharsex($arProp['NAME']).'</span>'.
		'<div class="bx_size_scroller_container"><div class="bx_size"><ul id="#ITEM#_prop_'.$arProp['ID'].'_list">';
						foreach ($arProp['VALUES'] as $arOneValue){
							if($arOneValue['ID']>0){
								$arOneValue['NAME'] = htmlspecialcharsbx($arOneValue['NAME']);
								$templateRow .= '<li data-treevalue="'.$arProp['ID'].'_'.$arOneValue['ID'].'" data-showtype="li" data-onevalue="'.$arOneValue['ID'].'" title="'.$arProp['NAME'].': '.$arOneValue['NAME'].'"><i></i><span class="cnt">'.$arOneValue['NAME'].'</span></li>';
							}
						}
						$templateRow .= '</ul></div>'.
		'</div></div>';
					}elseif ('PICT' == $arProp['SHOW_MODE']){
						$isHasPicture = true;
						foreach ($arProp['VALUES'] as $arOneValue){
							if($arOneValue['ID']>0){
								if(!isset($arOneValue['PICT']['SRC']) || !$arOneValue['PICT']['SRC'])
									$isHasPicture = false;
							}
						}
						if($isHasPicture)
						{
							$templateRow .= '<div class="bx_item_detail_scu" id="#ITEM#_prop_'.$arProp['ID'].'_cont">'.
		'<span class="'.$class_title.'">'.htmlspecialcharsex($arProp['NAME']).'</span>'.
		'<div class="bx_scu_scroller_container"><div class="bx_scu"><ul id="#ITEM#_prop_'.$arProp['ID'].'_list">';
						}
						else
						{
							$templateRow .= '<div class="bx_item_detail_size" id="#ITEM#_prop_'.$arProp['ID'].'_cont">'.
		'<span class="'.$class_title.'">'.htmlspecialcharsex($arProp['NAME']).'</span>'.
		'<div class="bx_size_scroller_container"><div class="bx_size"><ul id="#ITEM#_prop_'.$arProp['ID'].'_list">';
						}
						foreach ($arProp['VALUES'] as $arOneValue){
							if($arOneValue['ID']>0){
								$arOneValue['NAME'] = htmlspecialcharsbx($arOneValue['NAME']);
								if(isset($arOneValue['PICT']['SRC']) && $arOneValue['PICT']['SRC'] && $isHasPicture)
								{
									$templateRow .= '<li data-treevalue="'.$arProp['ID'].'_'.$arOneValue['ID'].'" data-showtype="li" data-onevalue="'.$arOneValue['ID'].'"><i title="'.$arProp['NAME'].': '.$arOneValue['NAME'].'"></i>'.
			'<span class="cnt1"><span class="cnt_item" style="background-image:url(\''.$arOneValue['PICT']['SRC'].'\');" title="'.$arProp['NAME'].': '.$arOneValue['NAME'].'"></span></span></li>';
								}
								else
								{
									$templateRow .= '<li data-treevalue="'.$arProp['ID'].'_'.$arOneValue['ID'].'" data-showtype="li" data-onevalue="'.$arOneValue['ID'].'" title="'.$arProp['NAME'].': '.$arOneValue['NAME'].'"><i></i><span class="cnt">'.$arOneValue['NAME'].'</span></li>';
								}
							}
						}
						$templateRow .= '</ul></div>'.
		'</div></div>';
					}
					$arSkuTemplate[$iblockId][$arProp['CODE']] = $templateRow;
				}
			}
		}else{

			foreach ($arSkuProps as $key=>&$arProp){
				$templateRow = '';
				if(($arProp["DISPLAY_TYPE"]=="P" || $arProp["DISPLAY_TYPE"]=="R" ) && $type_view!= 'block' ){
					$templateRow .= '<div class="bx_item_detail_size" id="#ITEM#_prop_'.$arProp['ID'].'_cont">'.
	'<span class="'.$class_title.'">'.htmlspecialcharsex($arProp['NAME']).'</span>'.
	'<div class="bx_size_scroller_container form-control bg"><div class="bx_size"><select id="#ITEM#_prop_'.$arProp['ID'].'_list">';
					foreach ($arProp['VALUES'] as $arOneValue){
						if($arOneValue['ID']>0){
							$arOneValue['NAME'] = htmlspecialcharsbx($arOneValue['NAME']);
							$templateRow .= '<option data-treevalue="'.$arProp['ID'].'_'.$arOneValue['ID'].'" data-showtype="select" data-onevalue="'.$arOneValue['ID'].'" ';
							if($arProp["DISPLAY_TYPE"]=="R"){
								$templateRow .= 'data-img_src="'.$arOneValue["PICT"]["SRC"].'" ';
							}
							$templateRow .= 'title="'.$arProp['NAME'].': '.$arOneValue['NAME'].'">';
							$templateRow .= '<span class="cnt">'.$arOneValue['NAME'].'</span>';
							$templateRow .= '</option>';
						}
					}
					$templateRow .= '</select></div>'.
	'</div></div>';
				}elseif ('TEXT' == $arProp['SHOW_MODE']){
					$templateRow .= '<div class="bx_item_detail_size" id="#ITEM#_prop_'.$arProp['ID'].'_cont">'.
	'<span class="'.$class_title.'">'.htmlspecialcharsex($arProp['NAME']).'</span>'.
	'<div class="bx_size_scroller_container"><div class="bx_size"><ul id="#ITEM#_prop_'.$arProp['ID'].'_list">';
					foreach ($arProp['VALUES'] as $arOneValue){
						if($arOneValue['ID']>0){
							$arOneValue['NAME'] = htmlspecialcharsbx($arOneValue['NAME']);
							$templateRow .= '<li data-treevalue="'.$arProp['ID'].'_'.$arOneValue['ID'].'" data-showtype="li" data-onevalue="'.$arOneValue['ID'].'" title="'.$arProp['NAME'].': '.$arOneValue['NAME'].'"><i></i><span class="cnt">'.$arOneValue['NAME'].'</span></li>';
						}
					}
					$templateRow .= '</ul></div>'.
	'</div></div>';
				}elseif ('PICT' == $arProp['SHOW_MODE']){
					$isHasPicture = true;
					foreach ($arProp['VALUES'] as $arOneValue){
						if($arOneValue['ID']>0){
							if(!isset($arOneValue['PICT']['SRC']) || !$arOneValue['PICT']['SRC'])
								$isHasPicture = false;
						}
					}
					if($isHasPicture)
					{
						$templateRow .= '<div class="bx_item_detail_scu" id="#ITEM#_prop_'.$arProp['ID'].'_cont">'.
	'<span class="'.$class_title.'">'.htmlspecialcharsex($arProp['NAME']).'</span>'.
	'<div class="bx_scu_scroller_container"><div class="bx_scu"><ul id="#ITEM#_prop_'.$arProp['ID'].'_list">';
					}
					else
					{
						$templateRow .= '<div class="bx_item_detail_size" id="#ITEM#_prop_'.$arProp['ID'].'_cont">'.
	'<span class="'.$class_title.'">'.htmlspecialcharsex($arProp['NAME']).'</span>'.
	'<div class="bx_size_scroller_container"><div class="bx_size"><ul id="#ITEM#_prop_'.$arProp['ID'].'_list">';

					}
					foreach ($arProp['VALUES'] as $arOneValue){
						if($arOneValue['ID']>0){
							$arOneValue['NAME'] = htmlspecialcharsbx($arOneValue['NAME']);
							if(isset($arOneValue['PICT']['SRC']) && $arOneValue['PICT']['SRC'] && $isHasPicture)
							{
								$templateRow .= '<li data-treevalue="'.$arProp['ID'].'_'.$arOneValue['ID'].'" data-showtype="li" data-onevalue="'.$arOneValue['ID'].'"><i title="'.$arProp['NAME'].': '.$arOneValue['NAME'].'"></i>'.
		'<span class="cnt1"><span class="cnt_item" style="background-image:url(\''.$arOneValue['PICT']['SRC'].'\');" title="'.$arProp['NAME'].': '.$arOneValue['NAME'].'"></span></span></li>';
							}
							else
							{
								$templateRow .= '<li data-treevalue="'.$arProp['ID'].'_'.$arOneValue['ID'].'" data-showtype="li" data-onevalue="'.$arOneValue['ID'].'" title="'.$arProp['NAME'].': '.$arOneValue['NAME'].'"><i></i><span class="cnt">'.$arOneValue['NAME'].'</span></li>';
							}
						}
					}
					$templateRow .= '</ul></div>'.
	'</div></div>';
				}
				$arSkuTemplate[$arProp['CODE']] = $templateRow;
			}
		}
		unset($templateRow, $arProp);
		return $arSkuTemplate;
	}

	function GetItemsIDs($arItem, $detail="N"){
		$arAllIDs=array();
		$arAllIDs["strMainID"] = $arItem['strMainID'];
		$arAllIDs["strObName"] = 'ob'.preg_replace("/[^a-zA-Z0-9_]/", "x", $arAllIDs["strMainID"]);

		if($detail=="Y"){
			$arAllIDs["ALL_ITEM_IDS"] = array(
				'ID' => $arAllIDs["strMainID"],
				'PICT' => $arAllIDs["strMainID"].'_pict',
				'DISCOUNT_PICT_ID' => $arAllIDs["strMainID"].'_dsc_pict',
				'STICKER_ID' => $arAllIDs["strMainID"].'_sticker',
				'BIG_SLIDER_ID' => $arAllIDs["strMainID"].'_big_slider',
				'BIG_IMG_CONT_ID' => $arAllIDs["strMainID"].'_bigimg_cont',
				'SLIDER_CONT_ID' => $arAllIDs["strMainID"].'_slider_cont',
				'SLIDER_LIST' => $arAllIDs["strMainID"].'_slider_list',
				'SLIDER_LEFT' => $arAllIDs["strMainID"].'_slider_left',
				'SLIDER_RIGHT' => $arAllIDs["strMainID"].'_slider_right',
				'OLD_PRICE' => $arAllIDs["strMainID"].'_old_price',
				'PRICE' => $arAllIDs["strMainID"].'_price',
				'DISCOUNT_PRICE' => $arAllIDs["strMainID"].'_price_discount',
				'SLIDER_CONT_OF_ID' => $arAllIDs["strMainID"].'_slider_cont_',
				'SLIDER_LIST_OF_ID' => $arAllIDs["strMainID"].'_slider_list_',
				'SLIDER_LEFT_OF_ID' => $arAllIDs["strMainID"].'_slider_left_',
				'SLIDER_RIGHT_OF_ID' => $arAllIDs["strMainID"].'_slider_right_',
				'SLIDER_CONT_OFM_ID' => $arAllIDs["strMainID"].'_sliderm_cont_',
				'SLIDER_LIST_OFM_ID' => $arAllIDs["strMainID"].'_sliderm_list_',
				'SLIDER_LEFT_OFM_ID' => $arAllIDs["strMainID"].'_sliderm_left_',
				'SLIDER_RIGHT_OFM_ID' => $arAllIDs["strMainID"].'_sliderm_right_',
				'QUANTITY' => $arAllIDs["strMainID"].'_quantity',
				'QUANTITY_DOWN' => $arAllIDs["strMainID"].'_quant_down',
				'QUANTITY_UP' => $arAllIDs["strMainID"].'_quant_up',
				'QUANTITY_MEASURE' => $arAllIDs["strMainID"].'_quant_measure',
				'QUANTITY_LIMIT' => $arAllIDs["strMainID"].'_quant_limit',
				'BASIS_PRICE' => $arAllIDs["strMainID"].'_basis_price',
				'BUY_LINK' => $arAllIDs["strMainID"].'_buy_link',
				'BASKET_LINK' => $arAllIDs["strMainID"].'_basket_link',
				'ADD_BASKET_LINK' => $arAllIDs["strMainID"].'_add_basket_link',
				'BASKET_ACTIONS' => $arAllIDs["strMainID"].'_basket_actions',
				'NOT_AVAILABLE_MESS' => $arAllIDs["strMainID"].'_not_avail',
				'COMPARE_LINK' => $arAllIDs["strMainID"].'_compare_link',
				'PROP' => $arAllIDs["strMainID"].'_prop_',
				'PROP_DIV' => $arAllIDs["strMainID"].'_skudiv',
				'DISPLAY_PROP_DIV' => $arAllIDs["strMainID"].'_sku_prop',
				'DISPLAY_PROP_ARTICLE_DIV' => $arAllIDs["strMainID"].'_sku_article_prop',
				'OFFER_GROUP' => $arAllIDs["strMainID"].'_set_group_',
				'BASKET_PROP_DIV' => $arAllIDs["strMainID"].'_basket_prop',
				'SUBSCRIBE_DIV' => $arAllIDs["strMainID"].'_subscribe_div',
				'SUBSCRIBED_DIV' => $arAllIDs["strMainID"].'_subscribed_div',
				'STORE_QUANTITY' => $arAllIDs["strMainID"].'_store_quantity',
			);
		}else{
			$arAllIDs["ALL_ITEM_IDS"] = array(
				'ID' => $arAllIDs["strMainID"],
				'PICT' => $arAllIDs["strMainID"].'_pict',
				'SECOND_PICT' => $arAllIDs["strMainID"].'_secondpict',
				'STICKER_ID' => $arAllIDs["strMainID"].'_sticker',
				'SECOND_STICKER_ID' => $arAllIDs["strMainID"].'_secondsticker',
				'QUANTITY' => $arAllIDs["strMainID"].'_quantity',
				'QUANTITY_DOWN' => $arAllIDs["strMainID"].'_quant_down',
				'QUANTITY_UP' => $arAllIDs["strMainID"].'_quant_up',
				'QUANTITY_MEASURE' => $arAllIDs["strMainID"].'_quant_measure',
				'BUY_LINK' => $arAllIDs["strMainID"].'_buy_link',
				'BASKET_LINK' => $arAllIDs["strMainID"].'_basket_link',
				'BASKET_ACTIONS' => $arAllIDs["strMainID"].'_basket_actions',
				'NOT_AVAILABLE_MESS' => $arAllIDs["strMainID"].'_not_avail',
				'SUBSCRIBE_LINK' => $arAllIDs["strMainID"].'_subscribe',
				'COMPARE_LINK' => $arAllIDs["strMainID"].'_compare_link',
				'STORE_QUANTITY' => $arAllIDs["strMainID"].'_store_quantity',
				'PRICE' => $arAllIDs["strMainID"].'_price',
				'PRICE_OLD' => $arAllIDs["strMainID"].'_price_old',
				'DSC_PERC' => $arAllIDs["strMainID"].'_dsc_perc',
				'SECOND_DSC_PERC' => $arAllIDs["strMainID"].'_second_dsc_perc',
				'PROP_DIV' => $arAllIDs["strMainID"].'_sku_tree',
				'PROP' => $arAllIDs["strMainID"].'_prop_',
				'DISPLAY_PROP_DIV' => $arAllIDs["strMainID"].'_sku_prop',
				'BASKET_PROP_DIV' => $arAllIDs["strMainID"].'_basket_prop',
				'SUBSCRIBE_DIV' => $arAllIDs["strMainID"].'subscribe_div',
				'SUBSCRIBED_DIV' => $arAllIDs["strMainID"].'subscribed_div',
			);
		}

		$arAllIDs["TITLE_ITEM"] = (
			isset($arItem['IPROPERTY_VALUES']['ELEMENT_PAGE_TITLE'])&& $arItem['IPROPERTY_VALUES']['ELEMENT_PAGE_TITLE'] != ''
			? $arItem['IPROPERTY_VALUES']['ELEMENT_PAGE_TITLE']
			: $arItem['NAME']
		);
		return $arAllIDs;
	}

	function GetSKUJSParams($arResult, $arParams, $arItem, $detail="N", $group_iblock_id="N"){
		$arSkuProps = array();

		if($group_iblock_id=="Y"){
			$arResult['SKU_PROPS']=reset($arResult['SKU_PROPS']);
		}

		foreach ($arResult['SKU_PROPS'] as $arOneProp){
			if (!isset($arItem['OFFERS_PROP'][$arOneProp['CODE']]))
				continue;
			$arSkuProps[] = array(
				'ID' => $arOneProp['ID'],
				'SHOW_MODE' => $arOneProp['SHOW_MODE'],
				'VALUES_COUNT' => $arOneProp['VALUES_COUNT'],
				'DISPLAY_TYPE' => ((($arOneProp['DISPLAY_TYPE'] == "P" || $arOneProp['DISPLAY_TYPE'] == "R") && $arParams["DISPLAY_TYPE"] != 'block' ) ? "SELECT" : "LI" ),
			);
		}

		foreach ($arItem['JS_OFFERS'] as &$arOneJs){
			if (0 < $arOneJs['PRICE']['DISCOUNT_DIFF_PERCENT'])
			{
				$arOneJs['PRICE']['DISCOUNT_DIFF_PERCENT'] = '-'.$arOneJs['PRICE']['DISCOUNT_DIFF_PERCENT'].'%';
				$arOneJs['BASIS_PRICE']['DISCOUNT_DIFF_PERCENT'] = '-'.$arOneJs['BASIS_PRICE']['DISCOUNT_DIFF_PERCENT'].'%';
			}
		}
		unset($arOneJs);
		if ($arItem['OFFERS_PROPS_DISPLAY']){
			foreach ($arItem['JS_OFFERS'] as $keyOffer => $arJSOffer){
				$strProps = '';
				$arArticle=array();
				if (!empty($arJSOffer['DISPLAY_PROPERTIES'])){
					foreach ($arJSOffer['DISPLAY_PROPERTIES'] as $arOneProp){
						if($arOneProp['CODE']=='ARTICLE'){
							$arArticle=$arOneProp;
							continue;
						}
						$strProps .= '<tr><td><span>'.$arOneProp['NAME'].'</span></td><td><span>'.(
							is_array($arOneProp['VALUE'])
							? implode(' / ', $arOneProp['VALUE'])
							: $arOneProp['VALUE']
						).'</span></td></tr>';

					}
				}
				if($arArticle){
					$strArticle = '';
					$strArticle .= $arArticle['NAME'].': '.(
							is_array($arArticle['VALUE'])
							? implode(' / ', $arArticle['VALUE'])
							: $arArticle['VALUE']
						);

					$arItem['JS_OFFERS'][$keyOffer]['ARTICLE'] = $strArticle;
				}

				$arItem['JS_OFFERS'][$keyOffer]['DISPLAY_PROPERTIES'] = $strProps;

			}
		}
		if ($arItem['SHOW_OFFERS_PROPS']){
			foreach ($arItem['JS_OFFERS'] as $keyOffer => $arJSOffer){
				$strProps = '';
				if (!empty($arJSOffer['DISPLAY_PROPERTIES'])){
					foreach ($arJSOffer['DISPLAY_PROPERTIES'] as $arOneProp){
						if($arOneProp['VALUE']){
							$arOneProp['VALUE_FORMAT']='<span class="block_title">'.$arOneProp['NAME'].': </span><span class="value">'.$arOneProp['VALUE'].'</span>';
							if($arOneProp['CODE']!='ARTICLE'){
								$strProps .='<tr><td class="char_name"><span>'.$arOneProp['NAME'].'</span></td><td class="char_value"><span>'.$arOneProp['VALUE'].'</span></td></tr>';
							}
						}
						$arItem['JS_OFFERS'][$keyOffer]['DISPLAY_PROPERTIES_CODE'][$arOneProp["CODE"]] = $arOneProp;
					}
				}
				$arItem['JS_OFFERS'][$keyOffer]['TABLE_PROP']=$strProps;
			}
			foreach ($arItem['JS_OFFERS'] as $keyOffer => $arJSOffer){
				if (!empty($arJSOffer['DISPLAY_PROPERTIES'])){
					foreach ($arJSOffer['DISPLAY_PROPERTIES'] as $keyProp => $arOneProp){
						if($arOneProp['VALUE']){
							if($arOneProp['CODE']=='ARTICLE')
								unset($arItem['JS_OFFERS'][$keyOffer]['DISPLAY_PROPERTIES'][$keyProp]);							
						}
					}
				}
			}
		}

		$arItemIDs=self::GetItemsIDs($arItem);
		if($detail=="Y"){
			$arJSParams = array(
				'CONFIG' => array(
					'USE_CATALOG' => $arResult['CATALOG'],
					'SHOW_QUANTITY' => $arParams['USE_PRODUCT_QUANTITY'],
					'SHOW_PRICE' => true,
					'SHOW_DISCOUNT_PERCENT' => ($arParams['SHOW_DISCOUNT_PERCENT'] == 'Y'),
					'SHOW_OLD_PRICE' => ($arParams['SHOW_OLD_PRICE'] == 'Y'),
					'DISPLAY_COMPARE' => $arParams['DISPLAY_COMPARE'],
					'SHOW_SKU_PROPS' => $arItem['SHOW_OFFERS_PROPS'],
					'OFFER_GROUP' => $arItem['OFFER_GROUP'],
					'MAIN_PICTURE_MODE' => $arParams['DETAIL_PICTURE_MODE'],
					'SHOW_BASIS_PRICE' => ($arParams['SHOW_BASIS_PRICE'] == 'Y'),
					'ADD_TO_BASKET_ACTION' => $arParams['ADD_TO_BASKET_ACTION'],
					'SHOW_CLOSE_POPUP' => ($arParams['SHOW_CLOSE_POPUP'] == 'Y')
				),
				'SHOW_UNABLE_SKU_PROPS' => $arParams['SHOW_UNABLE_SKU_PROPS'],
				'PRODUCT_TYPE' => $arResult['CATALOG_TYPE'],
				'VISUAL' => array(
					'ID' => $arItemIDs["ALL_ITEM_IDS"]['ID'],
				),
				'DEFAULT_COUNT' => $arParams['DEFAULT_COUNT'],
				'DEFAULT_PICTURE' => array(
					'PREVIEW_PICTURE' => $arResult['DEFAULT_PICTURE'],
					'DETAIL_PICTURE' => $arResult['DEFAULT_PICTURE']
				),
				'STORE_QUANTITY' => $arItemIDs["ALL_ITEM_IDS"]['STORE_QUANTITY'],
				'PRODUCT' => array(
					'ID' => $arResult['ID'],
					'NAME' => $arResult['~NAME']
				),
				'BASKET' => array(
					'QUANTITY' => $arParams['PRODUCT_QUANTITY_VARIABLE'],
					'BASKET_URL' => $arParams['BASKET_URL'],
					'SKU_PROPS' => $arItem['OFFERS_PROP_CODES'],
					'ADD_URL_TEMPLATE' => $arResult['~ADD_URL_TEMPLATE'],
					'BUY_URL_TEMPLATE' => $arResult['~BUY_URL_TEMPLATE']
				),
				'OFFERS' => $arItem['JS_OFFERS'],
				'OFFER_SELECTED' => $arItem['OFFERS_SELECTED'],
				'SKU_DETAIL_ID' => $arParams['SKU_DETAIL_ID'],
				'TREE_PROPS' => $arSkuProps
			);
		}else{
			$arJSParams = array(
				'SHOW_UNABLE_SKU_PROPS' => $arParams['SHOW_UNABLE_SKU_PROPS'],
				'PRODUCT_TYPE' => $arItem['CATALOG_TYPE'],
				'SHOW_QUANTITY' => ($arParams['USE_PRODUCT_QUANTITY'] == 'Y'),
				'DEFAULT_COUNT' => $arParams['DEFAULT_COUNT'],
				'SHOW_ADD_BASKET_BTN' => false,
				'SHOW_BUY_BTN' => true,
				'SHOW_ABSENT' => true,
				'SHOW_SKU_PROPS' => $arItem['OFFERS_PROPS_DISPLAY'],
				'SECOND_PICT' => $arItem['SECOND_PICT'],
				'SHOW_OLD_PRICE' => ('Y' == $arParams['SHOW_OLD_PRICE']),
				'SHOW_DISCOUNT_PERCENT' => ('Y' == $arParams['SHOW_DISCOUNT_PERCENT']),
				'ADD_TO_BASKET_ACTION' => $arParams['ADD_TO_BASKET_ACTION'],
				'SHOW_CLOSE_POPUP' => ($arParams['SHOW_CLOSE_POPUP'] == 'Y'),
				'DISPLAY_COMPARE' => $arParams['DISPLAY_COMPARE'],
				'BASKET_URL' => $arParams['BASKET_URL'],
				'DEFAULT_PICTURE' => array(
					'PICTURE' => $arItem['PRODUCT_PREVIEW'],
					'PICTURE_SECOND' => $arItem['PRODUCT_PREVIEW_SECOND']
				),
				'VISUAL' => array(
					'ID' => $arItemIDs["ALL_ITEM_IDS"]['ID'],
					'PICT_ID' => $arItemIDs["ALL_ITEM_IDS"]['PICT'],
					'SECOND_PICT_ID' => $arItemIDs["ALL_ITEM_IDS"]['SECOND_PICT'],
					'QUANTITY_ID' => $arItemIDs["ALL_ITEM_IDS"]['QUANTITY'],
					'QUANTITY_UP_ID' => $arItemIDs["ALL_ITEM_IDS"]['QUANTITY_UP'],
					'QUANTITY_DOWN_ID' => $arItemIDs["ALL_ITEM_IDS"]['QUANTITY_DOWN'],
					'QUANTITY_MEASURE' => $arItemIDs["ALL_ITEM_IDS"]['QUANTITY_MEASURE'],
					'STORE_QUANTITY' => $arItemIDs["ALL_ITEM_IDS"]['STORE_QUANTITY'],
					'PRICE_ID' => $arItemIDs["ALL_ITEM_IDS"]['PRICE'],
					'PRICE_OLD_ID' => $arItemIDs["ALL_ITEM_IDS"]['PRICE_OLD'],
					'TREE_ID' => $arItemIDs["ALL_ITEM_IDS"]['PROP_DIV'],
					'TREE_ITEM_ID' => $arItemIDs["ALL_ITEM_IDS"]['PROP'],
					'BUY_ID' => $arItemIDs["ALL_ITEM_IDS"]['BUY_LINK'],
					'BASKET_LINK' => $arItemIDs["ALL_ITEM_IDS"]['BASKET_LINK'],
					'ADD_BASKET_ID' => $arItemIDs["ALL_ITEM_IDS"]['ADD_BASKET_ID'],
					'DSC_PERC' => $arItemIDs["ALL_ITEM_IDS"]['DSC_PERC'],
					'SECOND_DSC_PERC' => $arItemIDs["ALL_ITEM_IDS"]['SECOND_DSC_PERC'],
					'DISPLAY_PROP_DIV' => $arItemIDs["ALL_ITEM_IDS"]['DISPLAY_PROP_DIV'],
					'BASKET_ACTIONS_ID' => $arItemIDs["ALL_ITEM_IDS"]['BASKET_ACTIONS'],
					'NOT_AVAILABLE_MESS' => $arItemIDs["ALL_ITEM_IDS"]['NOT_AVAILABLE_MESS'],
					'COMPARE_LINK_ID' => $arItemIDs["ALL_ITEM_IDS"]['COMPARE_LINK'],
					'SUBSCRIBE_ID' => $arItemIDs["ALL_ITEM_IDS"]['SUBSCRIBE_DIV'],
					'SUBSCRIBED_ID' => $arItemIDs["ALL_ITEM_IDS"]['SUBSCRIBED_DIV'],
				),
				'BASKET' => array(
					'QUANTITY' => $arParams['PRODUCT_QUANTITY_VARIABLE'],
					'PROPS' => $arParams['PRODUCT_PROPS_VARIABLE'],
					'SKU_PROPS' => $arItem['OFFERS_PROP_CODES'],
					'ADD_URL_TEMPLATE' => $arResult['~ADD_URL_TEMPLATE'],
					'BUY_URL_TEMPLATE' => $arResult['~BUY_URL_TEMPLATE']
				),
				'PRODUCT' => array(
					'ID' => $arItem['ID'],
					'NAME' => $arItemIDs["TITLE_ITEM"]
				),
				'OFFERS' => $arItem['JS_OFFERS'],
				'OFFER_SELECTED' => $arItem['OFFERS_SELECTED'],
				'TREE_PROPS' => $arSkuProps,
				'LAST_ELEMENT' => $arItem['LAST_ELEMENT']
			);
		}
		if ($arParams['DISPLAY_COMPARE']){
			$arJSParams['COMPARE'] = array(
				'COMPARE_URL_TEMPLATE' => $arResult['~COMPARE_URL_TEMPLATE'],
				'COMPARE_URL_TEMPLATE_DEL' => str_replace("ADD_TO_COMPARE_LIST", "DELETE_FROM_COMPARE_LIST", $arResult['~COMPARE_URL_TEMPLATE']),
				'COMPARE_PATH' => $arParams['COMPARE_PATH']
			);
		}
		return $arJSParams;
	}

	function GetAddToBasketArray(&$arItem, $totalCount = 0, $defaultCount = 1, $basketUrl = '', $bDetail = false, $arItemIDs = array(), $class_btn = "small", $arParams=array()){
		static $arAddToBasketOptions, $bUserAuthorized;
		if($arAddToBasketOptions === NULL){
			$arAddToBasketOptions = array(
				"SHOW_BASKET_ONADDTOCART" => COption::GetOptionString("aspro.optimus", "SHOW_BASKET_ONADDTOCART", "Y", SITE_ID) == "Y",
				"USE_PRODUCT_QUANTITY_LIST" => COption::GetOptionString("aspro.optimus", "USE_PRODUCT_QUANTITY_LIST", "Y", SITE_ID) == "Y",
				"USE_PRODUCT_QUANTITY_DETAIL" => COption::GetOptionString("aspro.optimus", "USE_PRODUCT_QUANTITY_DETAIL", "Y", SITE_ID) == "Y",
				"BUYNOPRICEGGOODS" => COption::GetOptionString("aspro.optimus", "BUYNOPRICEGGOODS", "NOTHING", SITE_ID),
				"BUYMISSINGGOODS" => COption::GetOptionString("aspro.optimus", "BUYMISSINGGOODS", "ADD", SITE_ID),
				"EXPRESSION_ORDER_BUTTON" => COption::GetOptionString("aspro.optimus", "EXPRESSION_ORDER_BUTTON", GetMessage("EXPRESSION_ORDER_BUTTON_DEFAULT"), SITE_ID),
				"EXPRESSION_ORDER_TEXT" => COption::GetOptionString("aspro.optimus", "EXPRESSION_ORDER_TEXT", GetMessage("EXPRESSION_ORDER_TEXT_DEFAULT"), SITE_ID),
				"EXPRESSION_SUBSCRIBE_BUTTON" => COption::GetOptionString("aspro.optimus", "EXPRESSION_SUBSCRIBE_BUTTON", GetMessage("EXPRESSION_SUBSCRIBE_BUTTON_DEFAULT"), SITE_ID),
				"EXPRESSION_SUBSCRIBED_BUTTON" => COption::GetOptionString("aspro.optimus", "EXPRESSION_SUBSCRIBED_BUTTON", GetMessage("EXPRESSION_SUBSCRIBED_BUTTON_DEFAULT"), SITE_ID),
			);

			global $USER;
			$bUserAuthorized = $USER->IsAuthorized();
		}

		$buttonText = $buttonHTML = $buttonACTION = '';
		$quantity=$ratio=1;
		$max_quantity=0;
		$float_ratio=is_double($arItem["CATALOG_MEASURE_RATIO"]);

		if($arItem["CATALOG_MEASURE_RATIO"]){
			$quantity=$arItem["CATALOG_MEASURE_RATIO"];
			$ratio=$arItem["CATALOG_MEASURE_RATIO"];
		}else{
			$quantity=$defaultCount;
		}
		if($arItem["CATALOG_QUANTITY_TRACE"]=="Y"){
			if($totalCount < $quantity){
				$quantity=($totalCount>$arItem["CATALOG_MEASURE_RATIO"] ? $totalCount : $arItem["CATALOG_MEASURE_RATIO"] );
			}
			$max_quantity=$totalCount;
		}

		$arItemProps = (($arParams['PRODUCT_PROPERTIES']) ? implode(';', $arParams['PRODUCT_PROPERTIES']) : "");
		$partProp=($arParams["PARTIAL_PRODUCT_PROPERTIES"] ? $arParams["PARTIAL_PRODUCT_PROPERTIES"] : "" );
		$addProp=($arParams["ADD_PROPERTIES_TO_BASKET"] ? $arParams["ADD_PROPERTIES_TO_BASKET"] : "" );
		$emptyProp=$arItem["EMPTY_PROPS_JS"];

		global $TEMPLATE_OPTIONS;
		if($arItem["OFFERS"]){
			if(!$bDetail && $arItem["OFFERS_MORE"] != "Y" && $TEMPLATE_OPTIONS["TYPE_SKU"]["CURRENT_VALUE"] != "TYPE_2"){
				$buttonACTION = 'ADD';
				$buttonText = array(GetMessage('EXPRESSION_ADDTOBASKET_BUTTON_DEFAULT'), GetMessage('EXPRESSION_ADDEDTOBASKET_BUTTON_DEFAULT'));
				$buttonHTML = '<span class="button transition_bg '.$class_btn.' read_more1 to-cart" id="'.$arItemIDs['BUY_LINK'].'" data-offers="N" data-iblockID="'.$arItem["IBLOCK_ID"].'" data-item="'.$arItem["ID"].'"><i></i><span>'.$buttonText[0].'</span></span><a rel="nofollow" href="'.$basketUrl.'" id="'.$arItemIDs['BASKET_LINK'].'" class="'.$class_btn.' in-cart button transition_bg" data-item="'.$arItem["ID"].'"  style="display:none;"><i></i><span>'.$buttonText[1].'</span></a>';
			}
			elseif(($bDetail && $arItem["FRONT_CATALOG"] == "Y") || $arItem["OFFERS_MORE"]=="Y" || $TEMPLATE_OPTIONS["TYPE_SKU"]["CURRENT_VALUE"] == "TYPE_2"){
				$buttonACTION = 'MORE';
				$buttonText = array(GetMessage('EXPRESSION_READ_MORE_OFFERS_DEFAULT'));
				$buttonHTML = '<a class="button transition_bg basket read_more" rel="nofollow" href="'.$arItem["DETAIL_PAGE_URL"].'" data-item="'.$arItem["ID"].'">'.$buttonText[0].'</a>';
			}
		}
		else{
			if($bPriceExists = isset($arItem["MIN_PRICE"]) && $arItem["MIN_PRICE"]["VALUE"] > 0){
				// price exists
				if($totalCount > 0){
					// rest exists
					if((isset($arItem["CAN_BUY"]) && $arItem["CAN_BUY"]) || (isset($arItem["MIN_PRICE"]) && $arItem["MIN_PRICE"]["CAN_BUY"] == "Y")){
						if($bDetail && $arItem["FRONT_CATALOG"] == "Y"){
							$buttonACTION = 'MORE';
							$buttonText = array(GetMessage('EXPRESSION_READ_MORE_OFFERS_DEFAULT'));
							$rid=($arItem["RID"] ? "?RID=".$arItem["RID"] : "");
							$buttonHTML = '<a class="button transition_bg basket read_more" rel="nofollow" href="'.$arItem["DETAIL_PAGE_URL"].$rid.'" data-item="'.$arItem["ID"].'">'.$buttonText[0].'</a>';
						}
						else{

							$arItem["CAN_BUY"] = 1;
							$buttonACTION = 'ADD';
							$buttonText = array(GetMessage('EXPRESSION_ADDTOBASKET_BUTTON_DEFAULT'), GetMessage('EXPRESSION_ADDEDTOBASKET_BUTTON_DEFAULT'));
							$buttonHTML = '<span class="'.$class_btn.' to-cart button transition_bg" data-item="'.$arItem["ID"].'" data-float_ratio="'.$float_ratio.'" data-ratio="'.$ratio.'" data-bakset_div="bx_basket_div_'.$arItem["ID"].'" data-props="'.$arItemProps.'" data-part_props="'.$partProp.'" data-add_props="'.$addProp.'"  data-empty_props="'.$emptyProp.'" data-offers="'.$arItem["IS_OFFER"].'" data-iblockID="'.$arItem["IBLOCK_ID"].'"  data-quantity="'.$quantity.'"><i></i><span>'.$buttonText[0].'</span></span><a rel="nofollow" href="'.$basketUrl.'" class="'.$class_btn.' in-cart button transition_bg" data-item="'.$arItem["ID"].'"  style="display:none;"><i></i><span>'.$buttonText[1].'</span></a>';
						}
					}
					elseif($arItem["CATALOG_SUBSCRIBE"] == "Y"){
						$buttonACTION = 'SUBSCRIBE';
						$buttonText = array($arAddToBasketOptions['EXPRESSION_SUBSCRIBE_BUTTON'], $arAddToBasketOptions['EXPRESSION_SUBSCRIBED_BUTTON']);
						$buttonHTML = '<span class="'.$class_btn.' ss to-subscribe'.(!$bUserAuthorized ? ' auth' : '').' button transition_bg" rel="nofollow" data-item="'.$arItem["ID"].'"><i></i><span>'.$buttonText[0].'</span></span><span class="'.$class_btn.' ss in-subscribe button transition_bg" rel="nofollow" style="display:none;" data-item="'.$arItem["ID"].'"><i></i><span>'.$buttonText[1].'</span></span>';
					}
				}
				else{
					if(!strlen($arAddToBasketOptions['EXPRESSION_ORDER_BUTTON'])){
						$arAddToBasketOptions['EXPRESSION_ORDER_BUTTON']=GetMessage("EXPRESSION_ORDER_BUTTON_DEFAULT");
					}
					// no rest
					if($bDetail && $arItem["FRONT_CATALOG"] == "Y"){
						$buttonACTION = 'MORE';
						$buttonText = array(GetMessage('EXPRESSION_READ_MORE_OFFERS_DEFAULT'));
						$rid=($arItem["RID"] ? "?RID=".$arItem["RID"] : "");
						$buttonHTML = '<a class="button transition_bg basket read_more" rel="nofollow" href="'.$arItem["DETAIL_PAGE_URL"].$rid.'" data-item="'.$arItem["ID"].'">'.$buttonText[0].'</a>';
					}
					else{
						$buttonACTION = $arAddToBasketOptions["BUYMISSINGGOODS"];
						if($arAddToBasketOptions["BUYMISSINGGOODS"] == "ADD" /*|| $arItem["CAN_BUY"]*/){
							if($arItem["CAN_BUY"]){
								$buttonText = array(GetMessage('EXPRESSION_ADDTOBASKET_BUTTON_DEFAULT'), GetMessage('EXPRESSION_ADDEDTOBASKET_BUTTON_DEFAULT'));
								$buttonHTML = '<span class="'.$class_btn.' to-cart button transition_bg" data-item="'.$arItem["ID"].'" data-float_ratio="'.$float_ratio.'" data-ratio="'.$ratio.'" data-bakset_div="bx_basket_div_'.$arItem["ID"].'" data-props="'.$arItemProps.'" data-part_props="'.$partProp.'" data-add_props="'.$addProp.'"  data-empty_props="'.$emptyProp.'" data-offers="'.$arItem["IS_OFFER"].'" data-iblockID="'.$arItem["IBLOCK_ID"].'" data-quantity="'.$quantity.'"><i></i><span>'.$buttonText[0].'</span></span><a rel="nofollow" href="'.$basketUrl.'" class="'.$class_btn.' in-cart button transition_bg" data-item="'.$arItem["ID"].'"  style="display:none;"><i></i><span>'.$buttonText[1].'</span></a>';
							}else{
								if($arAddToBasketOptions["BUYMISSINGGOODS"] == "SUBSCRIBE" && $arItem["CATALOG_SUBSCRIBE"] == "Y"){
									$buttonText = array($arAddToBasketOptions['EXPRESSION_SUBSCRIBE_BUTTON'], $arAddToBasketOptions['EXPRESSION_SUBSCRIBED_BUTTON']);
									$buttonHTML = '<span class="'.$class_btn.' ss to-subscribe'.(!$bUserAuthorized ? ' auth' : '').' button transition_bg" rel="nofollow" data-item="'.$arItem["ID"].'"><i></i><span>'.$buttonText[0].'</span></span><span class="'.$class_btn.' ss in-subscribe button transition_bg" rel="nofollow" style="display:none;" data-item="'.$arItem["ID"].'"><i></i><span>'.$buttonText[1].'</span></span>';
								}else{
									$buttonText = array($arAddToBasketOptions['EXPRESSION_ORDER_BUTTON']);
									$buttonHTML = '<span class="'.$class_btn.' to-order button transition_bg transparent" data-name="'.$arItem["NAME"].'" data-item="'.$arItem["ID"].'"><i></i><span>'.$buttonText[0].'</span></span>';
									if($arAddToBasketOptions['EXPRESSION_ORDER_TEXT']){
										$buttonHTML .='<div class="more_text">'.$arAddToBasketOptions['EXPRESSION_ORDER_TEXT'].'</div>';
									}
								}
							}

						}
						elseif($arAddToBasketOptions["BUYMISSINGGOODS"] == "SUBSCRIBE" && $arItem["CATALOG_SUBSCRIBE"] == "Y"){
							$buttonText = array($arAddToBasketOptions['EXPRESSION_SUBSCRIBE_BUTTON'], $arAddToBasketOptions['EXPRESSION_SUBSCRIBED_BUTTON']);
							$buttonHTML = '<span class="'.$class_btn.' ss to-subscribe'.(!$bUserAuthorized ? ' auth' : '').' button transition_bg" rel="nofollow" data-item="'.$arItem["ID"].'"><i></i><span>'.$buttonText[0].'</span></span><span class="'.$class_btn.' ss in-subscribe button transition_bg" rel="nofollow" style="display:none;" data-item="'.$arItem["ID"].'"><i></i><span>'.$buttonText[1].'</span></span>';
						}
						elseif($arAddToBasketOptions["BUYMISSINGGOODS"] == "ORDER"){
							$buttonText = array($arAddToBasketOptions['EXPRESSION_ORDER_BUTTON']);
							$buttonHTML = '<span class="'.$class_btn.' to-order button transition_bg transparent" data-name="'.$arItem["NAME"].'" data-item="'.$arItem["ID"].'"><i></i><span>'.$buttonText[0].'</span></span>';
							if($arAddToBasketOptions['EXPRESSION_ORDER_TEXT']){
								$buttonHTML .='<div class="more_text">'.$arAddToBasketOptions['EXPRESSION_ORDER_TEXT'].'</div>';
							}
						}
					}
				}
			}
			else{
				// no price or price <= 0
				if($bDetail && $arItem["FRONT_CATALOG"] == "Y"){
					$buttonACTION = 'MORE';
					$buttonText = array(GetMessage('EXPRESSION_READ_MORE_OFFERS_DEFAULT'));
					$buttonHTML = '<a class="button transition_bg basket read_more" rel="nofollow" href="'.$arItem["DETAIL_PAGE_URL"].'" data-item="'.$arItem["ID"].'">'.$buttonText[0].'</a>';
				}
				else{
					$buttonACTION = $arAddToBasketOptions["BUYNOPRICEGGOODS"];
					if($arAddToBasketOptions["BUYNOPRICEGGOODS"] == "ORDER"){
						$buttonText = array($arAddToBasketOptions['EXPRESSION_ORDER_BUTTON']);
						$buttonHTML = '<span class="'.$class_btn.' to-order button transition_bg transparent" data-name="'.$arItem["NAME"].'" data-item="'.$arItem["ID"].'"><i></i><span>'.$buttonText[0].'</span></span>';
						if($arAddToBasketOptions['EXPRESSION_ORDER_TEXT']){
							$buttonHTML .='<div class="more_text">'.$arAddToBasketOptions['EXPRESSION_ORDER_TEXT'].'</div>';
						}
					}
				}
			}
		}

		return array("OPTIONS" => $arAddToBasketOptions, "TEXT" => $buttonText, "HTML" => $buttonHTML, "ACTION" => $buttonACTION, "RATIO_ITEM" => $ratio, "MIN_QUANTITY_BUY" => $quantity, "MAX_QUANTITY_BUY" => $max_quantity);
	}

	function checkVersionExt($template="main", $module="catalog"){
		if($info = CModule::CreateModuleObject($module)){
			$testVersion = '16.0.14';
			if(CheckVersion($testVersion, $info->MODULE_VERSION)){
				$templateInclude=$template;
			}
			else{
				$templateInclude=$template."_new";
			}
		}
		return $templateInclude;
	}

	function GetFileInfo($arItem){
		$arTmpItem = CFile::GetFileArray($arItem);
		switch($arTmpItem["CONTENT_TYPE"]){
			case 'application/pdf': $type="pdf"; break;
			case 'application/vnd.ms-excel': $type="excel"; break;
			case 'application/xls': $type="excel"; break;
			case 'application/octet-stream': $type="word"; break;
			case 'application/msword': $type="word"; break;
			case 'image/jpeg': $type="jpg"; break;
			case 'image/tiff': $type="tiff"; break;
			//case 'image/png': $type="png"; break;
			default: $type="default"; break;
		}
		$filesize = $arTmpItem["FILE_SIZE"];
		if($filesize > 1024){
			$filesize = ($filesize / 1024);
			if($filesize > 1024){
				$filesize = ($filesize / 1024);
				if($filesize > 1024){
					$filesize = ($filesize / 1024);
					$filesize = round($filesize, 1);
					$filesize_format=str_replace(".", ",", $filesize).GetMessage('CT_NAME_GB');
				}
				else{
					$filesize = round($filesize, 1);
					$filesize_format=str_replace(".", ",", $filesize).GetMessage('CT_NAME_MB');
				}
			}
			else{
				$filesize = round($filesize, 1);
				$filesize_format=str_replace(".", ",", $filesize).GetMessage('CT_NAME_KB');
			}
		}
		else{
			$filesize = round($filesize, 1);
			$filesize_format=str_replace(".", ",", $filesize).GetMessage('CT_NAME_b');
		}
		$fileName = substr($arTmpItem["ORIGINAL_NAME"], 0, strrpos($arTmpItem["ORIGINAL_NAME"], '.'));
		return array("TYPE" => $type, "FILE_SIZE" => $filesize, "FILE_SIZE_FORMAT" => $filesize_format, "DESCRIPTION" => ( $arTmpItem["DESCRIPTION"] ? $arTmpItem["DESCRIPTION"] : $fileName), "SRC" => $arTmpItem["SRC"]);
	}

	function getMinPriceFromOffersExt(&$offers, $currency, $replaceMinPrice = true){
		$replaceMinPrice = ($replaceMinPrice === true);
		$result = false;
		$minPrice = 0;
		if (!empty($offers) && is_array($offers))
		{
			$doubles = array();
			foreach ($offers as $oneOffer)
			{
				if(!$oneOffer["MIN_PRICE"])
					continue;
				$oneOffer['ID'] = (int)$oneOffer['ID'];
				if (isset($doubles[$oneOffer['ID']]))
					continue;
				/*if (!$oneOffer['CAN_BUY'])
					continue;*/

				CIBlockPriceTools::setRatioMinPrice($oneOffer, $replaceMinPrice);

				$oneOffer['MIN_PRICE']['CATALOG_MEASURE_RATIO'] = $oneOffer['CATALOG_MEASURE_RATIO'];
				$oneOffer['MIN_PRICE']['CATALOG_MEASURE'] = $oneOffer['CATALOG_MEASURE'];
				$oneOffer['MIN_PRICE']['CATALOG_MEASURE_NAME'] = $oneOffer['CATALOG_MEASURE_NAME'];
				$oneOffer['MIN_PRICE']['~CATALOG_MEASURE_NAME'] = $oneOffer['~CATALOG_MEASURE_NAME'];

				if (empty($result))
				{
					$minPrice = ($oneOffer['MIN_PRICE']['CURRENCY'] == $currency
						? $oneOffer['MIN_PRICE']['DISCOUNT_VALUE']
						: CCurrencyRates::ConvertCurrency($oneOffer['MIN_PRICE']['DISCOUNT_VALUE'], $oneOffer['MIN_PRICE']['CURRENCY'], $currency)
					);
					$result = $oneOffer['MIN_PRICE'];
				}
				else
				{
					$comparePrice = ($oneOffer['MIN_PRICE']['CURRENCY'] == $currency
						? $oneOffer['MIN_PRICE']['DISCOUNT_VALUE']
						: CCurrencyRates::ConvertCurrency($oneOffer['MIN_PRICE']['DISCOUNT_VALUE'], $oneOffer['MIN_PRICE']['CURRENCY'], $currency)
					);
					if ($minPrice > $comparePrice)
					{
						$minPrice = $comparePrice;
						$result = $oneOffer['MIN_PRICE'];
					}
				}
				$doubles[$oneOffer['ID']] = true;
			}
		}
		return $result;
	}

	function getSliderForItemExt(&$item, $propertyCode, $addDetailToSlider, $encode = true)
    {
        $encode = ($encode === true);
        $result = array();

        if (!empty($item) && is_array($item))
        {
            if (
                '' != $propertyCode &&
                isset($item['PROPERTIES'][$propertyCode]) &&
                'F' == $item['PROPERTIES'][$propertyCode]['PROPERTY_TYPE']
            )
            {
                if ('MORE_PHOTO' == $propertyCode && isset($item['MORE_PHOTO']) && !empty($item['MORE_PHOTO']))
                {

                    foreach ($item['MORE_PHOTO'] as &$onePhoto)
                    {
                        $result[] = array(
                            'ID' => (int)$onePhoto['ID'],
                            'SRC' => ($encode ? CHTTP::urnEncode($onePhoto['SRC'], 'utf-8') : $onePhoto['SRC']),
                            'WIDTH' => (int)$onePhoto['WIDTH'],
                            'HEIGHT' => (int)$onePhoto['HEIGHT'],
                            'ALT' => ($onePhoto["DESCRIPTION"] ? $onePhoto["DESCRIPTION"] : ($item['IPROPERTY_VALUES']['ELEMENT_DETAIL_PICTURE_FILE_ALT'] ? $item['IPROPERTY_VALUES']['ELEMENT_DETAIL_PICTURE_FILE_ALT'] : $item["NAME"])),
                            'TITLE' => ($onePhoto["DESCRIPTION"] ? $onePhoto["DESCRIPTION"] : ($item['IPROPERTY_VALUES']['ELEMENT_DETAIL_PICTURE_FILE_TITLE'] ? $item['IPROPERTY_VALUES']['ELEMENT_DETAIL_PICTURE_FILE_TITLE'] : $item["NAME"]))
                        );
                    }
                    unset($onePhoto);
                }
                else
                {
                    if (
                        isset($item['DISPLAY_PROPERTIES'][$propertyCode]['FILE_VALUE']) &&
                        !empty($item['DISPLAY_PROPERTIES'][$propertyCode]['FILE_VALUE'])
                    )
                    {
                        $fileValues = (
                        isset($item['DISPLAY_PROPERTIES'][$propertyCode]['FILE_VALUE']['ID']) ?
                            array(0 => $item['DISPLAY_PROPERTIES'][$propertyCode]['FILE_VALUE']) :
                            $item['DISPLAY_PROPERTIES'][$propertyCode]['FILE_VALUE']
                        );
                        foreach ($fileValues as &$oneFileValue)
                        {
                            $result[] = array(
                                'ID' => (int)$oneFileValue['ID'],
                                'SRC' => ($encode ? CHTTP::urnEncode($oneFileValue['SRC'], 'utf-8') : $oneFileValue['SRC']),
                                'WIDTH' => (int)$oneFileValue['WIDTH'],
                                'HEIGHT' => (int)$oneFileValue['HEIGHT'],
                                'ALT' => ($oneFileValue["DESCRIPTION"] ? $oneFileValue["DESCRIPTION"] : ($item['IPROPERTY_VALUES']['ELEMENT_DETAIL_PICTURE_FILE_ALT'] ? $item['IPROPERTY_VALUES']['ELEMENT_DETAIL_PICTURE_FILE_ALT'] : $item["NAME"])),
                          		'TITLE' => ($oneFileValue["DESCRIPTION"] ? $oneFileValue["DESCRIPTION"] : ($item['IPROPERTY_VALUES']['ELEMENT_DETAIL_PICTURE_FILE_TITLE'] ? $item['IPROPERTY_VALUES']['ELEMENT_DETAIL_PICTURE_FILE_TITLE'] : $item["NAME"]))
                            );
                        }
                        if (isset($oneFileValue))
                            unset($oneFileValue);
                    }
                    else
                    {
                        $propValues = $item['PROPERTIES'][$propertyCode]['VALUE'];
                        if (!is_array($propValues))
                            $propValues = array($propValues);
                        foreach ($propValues as &$oneValue)
                        {
                            $oneFileValue = CFile::GetFileArray($oneValue);
                            if (isset($oneFileValue['ID']))
                            {
                                $result[] = array(
                                    'ID' => (int)$oneFileValue['ID'],
                                    'SRC' => ($encode ? CHTTP::urnEncode($oneFileValue['SRC'], 'utf-8') : $oneFileValue['SRC']),
                                    'WIDTH' => (int)$oneFileValue['WIDTH'],
                                    'HEIGHT' => (int)$oneFileValue['HEIGHT'],
                                    'ALT' => ($oneFileValue["DESCRIPTION"] ? $oneFileValue["DESCRIPTION"] : ($item['IPROPERTY_VALUES']['ELEMENT_DETAIL_PICTURE_FILE_ALT'] ? $item['IPROPERTY_VALUES']['ELEMENT_DETAIL_PICTURE_FILE_ALT'] : $item["NAME"])),
                          			'TITLE' => ($oneFileValue["DESCRIPTION"] ? $oneFileValue["DESCRIPTION"] : ($item['IPROPERTY_VALUES']['ELEMENT_DETAIL_PICTURE_FILE_TITLE'] ? $item['IPROPERTY_VALUES']['ELEMENT_DETAIL_PICTURE_FILE_TITLE'] : $item["NAME"]))
                                );
                            }
                        }
                        if (isset($oneValue))
                            unset($oneValue);
                    }
                }
            }
            if(isset($item['OFFERS']) && $item['OFFERS'] && !$addDetailToSlider){
            	if(empty($result))
            		unset($item['DETAIL_PICTURE']);
            }

            if ($addDetailToSlider || empty($result))
            {
                if (!empty($item['DETAIL_PICTURE']))
                {
                    if (!is_array($item['DETAIL_PICTURE']))
                        $item['DETAIL_PICTURE'] = CFile::GetFileArray($item['DETAIL_PICTURE']);
                    if (isset($item['DETAIL_PICTURE']['ID']))
                    {
                        array_unshift(
                            $result,
                            array(
                                'ID' => (int)$item['DETAIL_PICTURE']['ID'],
                                'SRC' => ($encode ? CHTTP::urnEncode($item['DETAIL_PICTURE']['SRC'], 'utf-8') : $item['DETAIL_PICTURE']['SRC']),
                                'WIDTH' => (int)$item['DETAIL_PICTURE']['WIDTH'],
                                'HEIGHT' => (int)$item['DETAIL_PICTURE']['HEIGHT'],
                                'ALT' => ($item['DETAIL_PICTURE']['DESCRIPTION'] ? $item['DETAIL_PICTURE']['DESCRIPTION'] : ($item['DETAIL_PICTURE']['ALT'] ? $item['DETAIL_PICTURE']['ALT'] : $item['NAME'] )),
                                'TITLE' => ($item['DETAIL_PICTURE']['DESCRIPTION'] ? $item['DETAIL_PICTURE']['DESCRIPTION'] : ($item['DETAIL_PICTURE']['TITLE'] ? $item['DETAIL_PICTURE']['TITLE'] : $item['NAME'] ))
                            )
                        );
                    }
                }
            }
        }
        return $result;
    }

	function GetTemplateOptions($siteID){
		// check stores
		static $bStores;
		if ($bStores === null){
			$bStores = false;
			if(CModule::IncludeModule('catalog')){
				if(class_exists('CCatalogStore')){
					$dbRes = CCatalogStore::GetList(array(), array(), false, false, array());
					if($c = $dbRes->SelectedRowsCount()){
						$bStores = true;
					}
				}
			}
		}

		$res = self::getModuleOptionsList();
		$arComponentOptions = $res["TEMPLATE_OPTIONS"];
		$arTemplateOptions = array();
		foreach($arComponentOptions as $value){
			$arTemplateOptions[$value["ID"]] = $value;
			if ($value['ID'] === 'STORES_SOURCE' && !$bStores) {
				$arTemplateOptions[$value["ID"]]["CURRENT_VALUE"] = 'IBLOCK';
			}
			elseif($value['ID'] === 'LOGO_IMAGE' || $value['ID'] === 'FAVICON_IMAGE' || $value['ID'] === 'APPLE_TOUCH_ICON_IMAGE'){
				$arTemplateOptions[$value["ID"]]["CURRENT_VALUE"] = COption::GetOptionString(self::moduleID, $value["ID"], $value["DEFAULT"], $siteID);
				$arValue = unserialize($arTemplateOptions[$value["ID"]]["CURRENT_VALUE"]);
				$arValue = (array)$arValue;
				$fileID = $arValue ? current($arValue) : false;
				if($fileID){
					if($value['ID'] === 'FAVICON_IMAGE'){
						$arTemplateOptions[$value["ID"]]["CURRENT_IMG"] = str_replace('//', '/', SITE_DIR.'/favicon.ico');
					}else{
						$arTemplateOptions[$value["ID"]]["CURRENT_IMG"] = CFIle::GetPath($fileID);
					}
				}
				else{
					if($value['ID'] === 'LOGO_IMAGE'){

					}
					elseif($value['ID'] === 'FAVICON_IMAGE'){
						$arTemplateOptions[$value["ID"]]["CURRENT_IMG"] = str_replace('//', '/', SITE_DIR.'/include/favicon.ico');
					}
					elseif($value['ID'] === 'APPLE_TOUCH_ICON_IMAGE'){
						$arTemplateOptions[$value["ID"]]["CURRENT_IMG"] = str_replace('//', '/', SITE_DIR.'/include/apple-touch-icon.png');
					}
				}

				if(!file_exists(str_replace('//', '/', $_SERVER['DOCUMENT_ROOT'].$arTemplateOptions[$value["ID"]]["CURRENT_IMG"]))){
					$arTemplateOptions[$value["ID"]]["CURRENT_IMG"] = '';
				}
				else{
					if($value['ID'] === 'FAVICON_IMAGE'){
						$arTemplateOptions[$value["ID"]]["CURRENT_IMG"] .= '?'.filemtime(str_replace('//', '/', $_SERVER['DOCUMENT_ROOT'].$arTemplateOptions[$value["ID"]]["CURRENT_IMG"]));
					}
				}
			}
			else{
				$arTemplateOptions[$value["ID"]]["CURRENT_VALUE"] = COption::GetOptionString(self::moduleID, $value["ID"], $value["DEFAULT"], $siteID);
				if($value['ID'] === 'HEAD'){
					if($value["VALUES"] && is_array($value["VALUES"])){
						foreach($value["VALUES"] as $arValue){
							if($arValue["VALUE"] === $arTemplateOptions['HEAD']["CURRENT_VALUE"]){
								$arTemplateOptions["LOGO_IMAGE"]["CURRENT_IMG"] = ($arTemplateOptions["LOGO_IMAGE"]["CURRENT_VALUE"] !== serialize(array())) ? $arTemplateOptions["LOGO_IMAGE"]["CURRENT_IMG"] : str_replace('//', '/', SITE_DIR.$arValue["IMG"]);
								$arTemplateOptions["HEAD"]["CURRENT_MENU"] = $arValue["MENU_TYPE"];
								$arTemplateOptions["HEAD"]["CURRENT_HEAD_COLOR"] = $arValue["HEAD_COLOR"];
								$arTemplateOptions["HEAD"]["CURRENT_MENU_COLOR"] = ($arValue["MENU_COLOR"] ? $arValue["MENU_COLOR"] : "none");
								break;
							}
						}
					}
				}
			}
		}

		return $arTemplateOptions;
	}

	static function getModuleOptionsList($onlyTemplate = false){
		// check stores
		static $arIsSiteWithStores;
		$by = "id"; $sort = "asc"; $arSites = array();
		$db_res = CSite::GetList($by , $sort ,array("ACTIVE"=>"Y"));
		while($res = $db_res->GetNext()){
			$arSites[] = $res;
		}
		foreach($arSites as $key => $arSite){
			if(COption::GetOptionString(self::moduleID, "SITE_INSTALLED", false, $arSite["ID"]) != "Y"){
				unset($arSites[$key]);
			}
			else{
				if ($arIsSiteWithStores[$arSite["ID"]] === null){
					$arIsSiteWithStores[$arSite["ID"]] = false;
					if(CModule::IncludeModule('catalog')){
						if(class_exists('CCatalogStore')){
							$dbRes = CCatalogStore::GetList(array(), array('ACTIVE' => 'Y', 'SITE_ID' => $arSite["ID"]), false, false, array());
							if($c = $dbRes->SelectedRowsCount()){
								$arIsSiteWithStores[$arSite["ID"]] = true;
							}
						}
					}
				}
			}
		}

		// template options
		$arTemplateOptions = array(
			array(
				"ID" => "COLOR_THEME",
				"NAME" => GetMessage("COLOR_THEME"),
				"TYPES" => array("COMPONENT"=>"COLOR", "MODULE" => "SELECTBOX"),
				"VALUES" => array(
					array("VALUE" => "YELLOW", "COMPONENT_VALUE" => "#ffad00", "NAME" => GetMessage("COLOR_THEME_YELLOW")),
					array("VALUE" => "ORANGE", "COMPONENT_VALUE" => "#ff6d00", "NAME" => GetMessage("COLOR_THEME_ORANGE")),
					array("VALUE" => "RED", "COMPONENT_VALUE" => "#de002b", "NAME" => GetMessage("COLOR_THEME_RED")),
					array("VALUE" => "MAGENTA", "COMPONENT_VALUE" => "#b82945", "NAME" => GetMessage("COLOR_THEME_MAGENTA")),
					array("VALUE" => "ORCHID", "COMPONENT_VALUE" => "#d75cb6", "NAME" => GetMessage("COLOR_THEME_ORCHID")),
					array("VALUE" => "NAVY", "COMPONENT_VALUE" => "#006dca", "NAME" => GetMessage("COLOR_THEME_NAVY")),
					array("VALUE" => "BLUE", "COMPONENT_VALUE" => "#01aae3", "NAME" => GetMessage("COLOR_THEME_BLUE")), //#00aed7
					array("VALUE" => "GREEN_SEA", "COMPONENT_VALUE" => "#01b1af", "NAME" => GetMessage("COLOR_THEME_GREEN_SEA")),
					array("VALUE" => "GREEN", "COMPONENT_VALUE" => "#009f4f", "NAME" => GetMessage("COLOR_THEME_GREEN")),
					array("VALUE" => "IRISH_GREEN", "COMPONENT_VALUE" => "#6db900", "NAME" => GetMessage("COLOR_THEME_IRISH_GREEN")),
					array("VALUE" => "CUSTOM", "COMPONENT_VALUE" => "", "NAME" => GetMessage("COLOR_THEME_CUSTOM")),
				),
				"DEFAULT" => "NAVY",
			),
			array(
				"ID" => "CUSTOM_COLOR_THEME",
				"NAME" => GetMessage("CUSTOM_COLOR_THEME"),
				"TYPES" => array("COMPONENT"=>"COLOR", "MODULE" => "text"),
				"DEFAULT" => "01aae3",
			),
			array(
				"ID" => "BGCOLOR_THEME",
				"NAME" => GetMessage("BGCOLOR_THEME"),
				"TYPES" => array("COMPONENT"=>"COLOR", "MODULE" => "SELECTBOX"),
				"VALUES" => array(
					array("VALUE" => "LIGHT", "COMPONENT_VALUE" => "#f6f6f7", "NAME" => GetMessage("BGCOLOR_THEME_LIGHT")),
					array("VALUE" => "DARK", "COMPONENT_VALUE" => "#272a39", "NAME" => GetMessage("BGCOLOR_THEME_DARK")),
					array("VALUE" => "CUSTOM", "COMPONENT_VALUE" => "", "NAME" => GetMessage("COLOR_THEME_CUSTOM")),
				),
				"DEFAULT" => "LIGHT",
			),
			array(
				"ID" => "BGCOLOR_THEME_FOOTER_SIDE",
				"NAME" => GetMessage("BGCOLOR_THEME_FOOTER_SIDE"),
				"TYPES" => array("COMPONENT"=>"TEXT", "MODULE" => "SELECTBOX"),
				"VALUES" => array(
					array("VALUE" => "FILL", "COMPONENT_VALUE" => "", "NAME" => GetMessage("YES_OPTION")),
					array("VALUE" => "NO_FILL", "COMPONENT_VALUE" => "", "NAME" => GetMessage("NO_OPTION")),
				),
				"DEFAULT" => "NO_FILL",
			),
			array(
				"ID" => "CUSTOM_BGCOLOR_THEME",
				"NAME" => GetMessage("CUSTOM_BGCOLOR_THEME"),
				"TYPES" => array("COMPONENT"=>"COLOR", "MODULE" => "text"),
				"DEFAULT" => "f6f6f7",
			),
			array(
				"ID" => "MENU_COLOR",
				"NAME" => GetMessage("MENU_COLOR"),
				"TYPES" => array("COMPONENT"=>"TEXT", "MODULE" => "SELECTBOX"),
				"VALUES" => array(
					array("VALUE" => "COLORED", "COMPONENT_VALUE" => "", "NAME" => GetMessage("MENU_COLOR_COLORED")),
					array("VALUE" => "LIGHT", "COMPONENT_VALUE" => "", "NAME" => GetMessage("MENU_COLOR_LIGHT")),
					array("VALUE" => "DARK", "COMPONENT_VALUE" => "", "NAME" => GetMessage("MENU_COLOR_DARK")),
				),
				"DEFAULT" => "COLORED",
			),
		);

		if(!$onlyTemplate){
			$arTemplateOptions[] = array(
				"ID" => "LOGO_IMAGE",
				"NAME" => GetMessage("LOGO_IMAGE"),
				"TYPES" => array("COMPONENT" => "TEXT", "MODULE" => "file"),
				"DEFAULT" => serialize(array()),
			);
			$arTemplateOptions[] = array(
				"ID" => "FAVICON_IMAGE",
				"NAME" => GetMessage("FAVICON_IMAGE"),
				"TYPES" => array("COMPONENT" => "TEXT", "MODULE" => "file"),
				"DEFAULT" => serialize(array()),
			);
			$arTemplateOptions[] = array(
				"ID" => "APPLE_TOUCH_ICON_IMAGE",
				"NAME" => GetMessage("APPLE_TOUCH_ICON_IMAGE"),
				"TYPES" => array("COMPONENT" => "TEXT", "MODULE" => "file"),
				"DEFAULT" => serialize(array()),
			);
		}

		$arTemplateOptions = array_merge($arTemplateOptions, array(
				array(
					"ID" => "BASKET",
					"NAME" => GetMessage("BASKET"),
					"TYPES" => array("COMPONENT"=>"TEXT", "MODULE" => "SELECTBOX"),
					"VALUES" => array(
						array("VALUE" => "NORMAL", "COMPONENT_VALUE" => "", "NAME" => GetMessage("BASKET_NORMAL")),
						array("VALUE" => "FLY", "COMPONENT_VALUE" => "", "NAME" => GetMessage("BASKET_FLY")),
					),
					"DEFAULT" => "FLY",
				)
			)
		);

		$arTemplateOptions = array_merge($arTemplateOptions, array(
				array(
					"ID" => "TYPE_SKU",
					"NAME" => GetMessage("TYPE_SKU"),
					"TYPES" => array("COMPONENT"=>"TEXT", "MODULE" => "SELECTBOX"),
					"VALUES" => array(
						array("VALUE" => "TYPE_1", "COMPONENT_VALUE" => "", "NAME" => GetMessage("TYPE_1")),
						array("VALUE" => "TYPE_2", "COMPONENT_VALUE" => "", "NAME" => GetMessage("TYPE_2")),
					),
					"DEFAULT" => "TYPE_1",
				),
				array(
					"ID" => "DETAIL_PICTURE_MODE",
					"NAME" => GetMessage("DETAIL_PICTURE_MODE"),
					"TYPES" => array("COMPONENT"=>"TEXT", "MODULE" => "SELECTBOX"),
					"VALUES" => array(
						array("VALUE" => "IMG", "COMPONENT_VALUE" => "", "NAME" => GetMessage("DETAIL_PICTURE_MODE_IMG")),
						array("VALUE" => "POPUP", "COMPONENT_VALUE" => "", "NAME" => GetMessage("DETAIL_PICTURE_MODE_POPUP")),
						array("VALUE" => "MAGNIFIER", "COMPONENT_VALUE" => "", "NAME" => GetMessage("DETAIL_PICTURE_MODE_MAGNIFIER")),
					),
					"DEFAULT" => "POPUP",
				),
				array(
					"ID" => "TYPE_VIEW_FILTER",
					"NAME" => GetMessage("TYPE_VIEW_FILTER"),
					"TYPES" => array("COMPONENT"=>"TEXT", "MODULE" => "SELECTBOX"),
					"VALUES" => array(
						array("VALUE" => "VERTICAL", "COMPONENT_VALUE" => "", "NAME" => GetMessage("VERTICAL")),
						array("VALUE" => "HORIZONTAL", "COMPONENT_VALUE" => "", "NAME" => GetMessage("HORIZONTAL")),
					),
					"DEFAULT" => "HORIZONTAL",
				),
				array(
					"ID" => "MENU_POSITION_MAIN",
					"NAME" => GetMessage("MENU_POSITION_MAIN"),
					"TYPES" => array("COMPONENT"=>"TEXT", "MODULE" => "SELECTBOX"),
					"VALUES" => array(
						array("VALUE" => "SHOW", "COMPONENT_VALUE" => "", "NAME" => GetMessage("YES")),
						array("VALUE" => "HIDE", "COMPONENT_VALUE" => "", "NAME" => GetMessage("NO")),
					),
					"DEFAULT" => "SHOW",
				),
				array(
					"ID" => "MENU_POSITION",
					"NAME" => GetMessage("MENU_POSITION"),
					"TYPES" => array("COMPONENT"=>"TEXT", "MODULE" => "SELECTBOX"),
					"VALUES" => array(
						array("VALUE" => "TOP", "COMPONENT_VALUE" => "", "NAME" => GetMessage("TOP_MENU_HOVER")),
						array("VALUE" => "LINE", "COMPONENT_VALUE" => "", "NAME" => GetMessage("LINE_MENU_HOVER")),
					),
					"DEFAULT" => "LINE",
				),
				array(
					"ID" => "VIEWED_TYPE",
					"NAME" => GetMessage("VIEWED_TYPE"),
					"TYPES" => array("COMPONENT"=>"TEXT", "MODULE" => "SELECTBOX"),
					"VALUES" => array(
						array("VALUE" => "LOCAL", "COMPONENT_VALUE" => "", "NAME" => GetMessage("VIEWED_TYPE_LOGIC_COOKIE")),
						array("VALUE" => "COMPONENT", "COMPONENT_VALUE" => "", "NAME" => GetMessage("VIEWED_TYPE_LOGIC_COMPONENT")),
					),
					"DEFAULT" => "COMPONENT",
				),
				array(
					"ID" => "STORES_SOURCE",
					"NAME" => GetMessage("STORES_SOURCE"),
					"TYPES" => array("COMPONENT"=>"TEXT", "MODULE" => "SELECTBOX"),
					"VALUES" => (
						$arIsSiteWithStores[$arSite["ID"]] ?
							array(
								array("VALUE" => "STORES", "COMPONENT_VALUE" => "", "NAME" => GetMessage("STORES_SOURCE_STORES")),
								array("VALUE" => "IBLOCK", "COMPONENT_VALUE" => "", "NAME" => GetMessage("STORES_SOURCE_STORES_IBLOCK")),
							) :
							array(
								array("VALUE" => "IBLOCK", "COMPONENT_VALUE" => "", "NAME" => GetMessage("STORES_SOURCE_STORES_IBLOCK")),
							)
						),
					"DEFAULT" => "IBLOCK",
				),
			)
		);

		$arComponentOptions = array();
		$arModuleOptions = array(GetMessage("TEMPLATE_OPTIONS"));
		$arModuleOptions[] = array("THEME_SWITCHER", GetMessage("THEME_SWITCHER"), 'N', array('checkbox'));

		foreach($arTemplateOptions as $key => $arTemplateOption){
			$arModuleValues = array(strToLower($arTemplateOption["TYPES"]["MODULE"]), array());
			if($arTemplateOption["VALUES"] && is_array($arTemplateOption["VALUES"])){
				foreach($arTemplateOption["VALUES"] as $key => $value){
					$arModuleValues[1][$value["VALUE"]] = $value["NAME"];
				}
			}
			$arComponentValues = array();
			if($arTemplateOption["VALUES"] && is_array($arTemplateOption["VALUES"])){
				$arComponentValues = $arTemplateOption["VALUES"];
			}
			if($arTemplateOption["ID"] !== 'BANNER_WIDTH' && $arTemplateOption["ID"] !== 'STORES'){
				$arModuleOptions[] = array($arTemplateOption["ID"], $arTemplateOption["NAME"], $arTemplateOption["DEFAULT"], $arModuleValues);
			}
			$arComponentOptions[] = array("ID" => $arTemplateOption["ID"], "NAME" => $arTemplateOption["NAME"], "TYPE" => $arTemplateOption["TYPES"]["COMPONENT"], "VALUES" => $arComponentValues, "DEFAULT" => $arTemplateOption["DEFAULT"]);
		}
		$arModuleOptions[] = array("NO_LOGO_BG", GetMessage("NO_LOGO_BG"), "N", array("checkbox"));
		$arModuleOptions[] = array("PHONE_MASK", GetMessage("PHONE_MASK"), "+7 (999) 999-99-99", array("text", 15));
		$arModuleOptions[] = array("VALIDATE_PHONE_MASK", GetMessage("VALIDATE_PHONE_MASK"), "^[+][7] [(][0-9]{3}[)] [0-9]{3}[-][0-9]{2}[-][0-9]{2}$", array("text", 50));
		$arModuleOptions[] = array("SHOW_BREADCRUMBS_CATALOG_SUBSECTIONS", GetMessage("SHOW_BREADCRUMBS_CATALOG_SUBSECTIONS"), "Y", array("checkbox"));
		$arModuleOptions[] = array("SHOW_BASKET_PRINT", GetMessage("SHOW_BASKET_PRINT"), "Y", array("checkbox"));
		$arModuleOptions[] = array("SHOW_SECTION_DESCRIPTION", GetMessage("SHOW_SECTION_DESCRIPTION"), "BOTTOM", array("selectbox", array('TOP' => GetMessage('TOP_SECTION'), 'BOTTOM' => GetMessage('BOTTOM_SECTION'), 'BOTH' => GetMessage('BOTH_SECTION'))));

		$arFielDescription = array(
			"DESCRIPTION" => GetMessage("DESCRIPTION_SECTION")."(DESCRIPTION)",
			"UF_SECTION_DESCR" => GetMessage("SEO_DESCRIPTION_SECTION")."(UF_SECTION_DESCR)",

		);
		
		$arModuleOptions[] = array("TOP_SECTION_DESCRIPTION_POSITION", GetMessage("TOP_SECTION_DESCRIPTION"), "UF_SECTION_DESCR", array("selectbox", $arFielDescription));
		$arModuleOptions[] = array("BOTTOM_SECTION_DESCRIPTION_POSITION", GetMessage("BOTTOM_SECTION_DESCRIPTION"), "DESCRIPTION", array("selectbox", $arFielDescription));

		$arModuleOptions[] = array("MAX_DEPTH_MENU", GetMessage("MAX_DEPTH_MENU"), "4", array("selectbox", array(2=>2,3=>3,4=>4)));
		$arModuleOptions[] = array("CATALOG_IBLOCK_ID", GetMessage("CATALOG_IBLOCK_ID"), "", array("selectbox_iblock"));

		$arModuleOptions[] = array("HIDE_SITE_NAME_TITLE", GetMessage("HIDE_SITE_NAME_TITLE"), "N", array("checkbox"));

		if(!$onlyTemplate){
			// scroll to top button options
			$arModuleOptions[] = GetMessage("SCROLLTOTOP_OPTIONS");
			$arModuleOptions[] = array(
				"SCROLLTOTOP_TYPE",
				GetMessage("SCROLLTOTOP_TYPE"),
				"ROUND_COLOR",
				array(
					"selectbox",
					array(
						'NONE' => GetMessage('SCROLLTOTOP_TYPE_NONE'),
						'ROUND_COLOR' => GetMessage('SCROLLTOTOP_TYPE_ROUND_COLOR'),
						'ROUND_GREY' => GetMessage('SCROLLTOTOP_TYPE_ROUND_GREY'),
						'ROUND_WHITE' => GetMessage('SCROLLTOTOP_TYPE_ROUND_WHITE'),
						'RECT_COLOR' => GetMessage('SCROLLTOTOP_TYPE_RECT_COLOR'),
						'RECT_GREY' => GetMessage('SCROLLTOTOP_TYPE_RECT_GREY'),
						'RECT_WHITE' => GetMessage('SCROLLTOTOP_TYPE_RECT_WHITE'),
					),
				),
			);
			$arModuleOptions[] = array(
				"SCROLLTOTOP_POSITION",
				GetMessage("SCROLLTOTOP_POSITION"),
				"PADDING",
				array(
					"selectbox",
					array(
						'TOUCH' => GetMessage('SCROLLTOTOP_POSITION_TOUCH'),
						'PADDING' => GetMessage('SCROLLTOTOP_POSITION_PADDING'),
					),
				),
			);

			// oneClick Buy
			$arModuleOptions[] = GetMessage("ONECLICKBUY_OPTIONS");
			$arModuleOptions[] = array("SHOW_ONECLICKBUY_ON_BASKET_PAGE", GetMessage("SHOW_ONECLICKBUY_ON_BASKET_PAGE_TITLE"), "Y", array("checkbox"));
			$arModuleOptions[] = array("ONECLICKBUY_PERSON_TYPE", GetMessage("ONECLICKBUY_PERSON_TYPE"), "1", array("selectbox", array()));
			$arModuleOptions[] = array("ONECLICKBUY_DELIVERY", GetMessage("ONECLICKBUY_DELIVERY"), "2", array("selectbox", array()));
			$arModuleOptions[] = array("ONECLICKBUY_PAYMENT", GetMessage("ONECLICKBUY_PAYMENT"), "1", array("selectbox", array()));
			// $arModuleOptions[] = array("ONECLICKBUY_CURRENCY", GetMessage("ONECLICKBUY_CURRENCY"), "RUB", array("selectbox", array()));
			$arModuleOptions[] = array("ONECLICKBUY_PROPERTIES", GetMessage("ONECLICKBUY_PROPERTIES"),
				$arOneClickPropertiesList = "FIO,PHONE,EMAIL,COMMENT",
				array("multiselectbox",
					$arOneClickPropertiesList = array(
						"FIO" => GetMessage('ONECLICKBUY_PROPERTIES_FIO'),
						"PHONE" => GetMessage('ONECLICKBUY_PROPERTIES_PHONE'),
						"EMAIL" => GetMessage('ONECLICKBUY_PROPERTIES_EMAIL'),
						"COMMENT" => GetMessage('ONECLICKBUY_PROPERTIES_COMMENT'),
					),
				)
			);
			$arModuleOptions[] = array("ONECLICKBUY_REQUIRED_PROPERTIES", GetMessage("ONECLICKBUY_REQUIRED_PROPERTIES"), "FIO,PHONE", array("multiselectbox", $arOneClickPropertiesList));

			// main index page options
			$arModuleOptions[] = GetMessage("INDEXPAGE_OPTIONS");

			$arModuleOptions[] = array(
				"BANNER_ANIMATIONTYPE",
				GetMessage("BANNER_ANIMATIONTYPE"),
				"SLIDE_HORIZONTAL",
				array(
					"selectbox",
					array(
						"SLIDE_HORIZONTAL" => GetMessage("ANIMATION_SLIDE_HORIZONTAL"),
						"SLIDE_VERTICAL" => GetMessage("ANIMATION_SLIDE_VERTICAL"),
						"FADE" => GetMessage("ANIMATION_FADE"),
					),
				),
			);
			$arModuleOptions[] = array("BANNER_SLIDESSHOWSPEED", GetMessage("BANNER_SLIDESSHOWSPEED"), "5000", array("text", "5"));
			$arModuleOptions[] = array("BANNER_ANIMATIONSPEED", GetMessage("BANNER_ANIMATIONSPEED"), "600", array("text", "5"));

			// add to basket options
			$arModuleOptions[] = GetMessage("ADDTOBASKET_OPTIONS");
			$arModuleOptions[] = array("SHOW_BASKET_ONADDTOCART", GetMessage("SHOW_BASKET_ONADDTOCART"), "Y", array("checkbox"));
			$arModuleOptions[] = array("USE_PRODUCT_QUANTITY_LIST", GetMessage("USE_PRODUCT_QUANTITY_LIST"), "Y", array("checkbox"));
			$arModuleOptions[] = array("USE_PRODUCT_QUANTITY_DETAIL", GetMessage("USE_PRODUCT_QUANTITY_DETAIL"), "Y", array("checkbox"));
			$arModuleOptions[] = array(
				"BUYNOPRICEGGOODS",
				GetMessage("BUYNOPRICEGGOODS"),
				"NOTHING",
				array(
					"selectbox",
					array(
						"ORDER" => GetMessage("BUYNOPRICEGGOODS_ORDER"),
						"NOTHING" => GetMessage("BUYNOPRICEGGOODS_NOTHING"),
					),
				),
			);
			$arModuleOptions[] = array(
				"BUYMISSINGGOODS",
				GetMessage("BUYMISSINGGOODS"),
				"ADD",
				array(
					"selectbox",
					array(
						"ADD" => GetMessage("BUYMISSINGGOODS_ADD"),
						"ORDER" => GetMessage("BUYMISSINGGOODS_ORDER"),
						"SUBSCRIBE" => GetMessage("BUYMISSINGGOODS_SUBSCRIBE"),
						"NOTHING" => GetMessage("BUYMISSINGGOODS_NOTHING"),
					),
				),
			);

			// show quantity options
			$arModuleOptions[] = GetMessage("QUANTITY_OPTIONS");
			$arGroups = array();
			$DefaultGroupID = 0;
			$rsGroups = CGroup::GetList($by = "id", $order = "asc", array("ACTIVE" => "Y"));
			while($arItem = $rsGroups->Fetch()){
				$arGroups[$arItem["ID"]] = $arItem["NAME"];
				if($arItem["ANONYMOUS"] == "Y"){
					$DefaultGroupID = $arItem["ID"];
				}
			}
			$arGroupMultiselect = array("multiselectbox", $arGroups);
			$arModuleOptions[] = array("SHOW_QUANTITY_FOR_GROUPS", GetMessage("SHOW_QUANTITY_FOR_GROUPS"), $DefaultGroupID, $arGroupMultiselect);
			$arModuleOptions[] = array("SHOW_QUANTITY_COUNT_FOR_GROUPS", GetMessage("SHOW_QUANTITY_COUNT_FOR_GROUPS"), $DefaultGroupID, $arGroupMultiselect);
			$arModuleOptions[] = array("note" => GetMessage("SHOW_QUANTITY_NOTE"));
			$arModuleOptions[] = array("USE_WORD_EXPRESSION", GetMessage("USE_WORD_EXPRESSION"), "Y", array("checkbox"));
			$arModuleOptions[] = array("MAX_AMOUNT", GetMessage("MAX_AMOUNT"), "10", array("text", "4"));
			$arModuleOptions[] = array("MIN_AMOUNT", GetMessage("MIN_AMOUNT"), "2", array("text", "4"));

			// expression options
			$arModuleOptions[] = GetMessage("EXPRESSIONS_OPTIONS");
			$arModuleOptions[] = array("EXPRESSION_SUBSCRIBE_BUTTON", GetMessage("EXPRESSION_SUBSCRIBE_BUTTON"), GetMessage("EXPRESSION_SUBSCRIBE_BUTTON_DEFAULT"), array("text", "20"));
			$arModuleOptions[] = array("EXPRESSION_SUBSCRIBED_BUTTON", GetMessage("EXPRESSION_SUBSCRIBED_BUTTON"), GetMessage("EXPRESSION_SUBSCRIBED_BUTTON_DEFAULT"), array("text", "20"));
			$arModuleOptions[] = array("EXPRESSION_ORDER_BUTTON", GetMessage("EXPRESSION_ORDER_BUTTON"), GetMessage("EXPRESSION_ORDER_BUTTON_DEFAULT"), array("text", "20"));
			$arModuleOptions[] = array("EXPRESSION_ORDER_TEXT", GetMessage("EXPRESSION_ORDER_TEXT"), GetMessage("EXPRESSION_ORDER_TEXT_DEFAULT"), array("textarea", "2", "50"));
			$arModuleOptions[] = array("EXPRESSION_FOR_EXISTS", GetMessage("EXPRESSION_FOR_EXISTS"), GetMessage("EXPRESSION_FOR_EXISTS_DEFAULT"), array("text", "20"));
			$arModuleOptions[] = array("EXPRESSION_FOR_NOTEXISTS", GetMessage("EXPRESSION_FOR_NOTEXISTS"), GetMessage("EXPRESSION_FOR_NOTEXISTS_DEFAULT"), array("text", "20"));
			$arModuleOptions[] = array("EXPRESSION_FOR_MIN", GetMessage("EXPRESSION_FOR_MIN"), GetMessage("EXPRESSION_FOR_MIN_DEFAULT"), array("text", "20"));
			$arModuleOptions[] = array("EXPRESSION_FOR_MID", GetMessage("EXPRESSION_FOR_MID"), GetMessage("EXPRESSION_FOR_MID_DEFAULT"), array("text", "20"));
			$arModuleOptions[] = array("EXPRESSION_FOR_MAX", GetMessage("EXPRESSION_FOR_MAX"), GetMessage("EXPRESSION_FOR_MAX_DEFAULT"), array("text", "20"));
			$arModuleOptions[] = array("EXPRESSION_FOR_FREE_DELIVERY", GetMessage("EXPRESSION_FOR_FREE_DELIVERY"), GetMessage("EXPRESSION_FOR_FREE_DELIVERY_DEFAULT"), array("text", "20"));

			// show min prices order
			$arModuleOptions[] = GetMessage("MIN_ORDER_PRICES");
			$arModuleOptions[] = array("MIN_ORDER_PRICE", GetMessage("MIN_ORDER_PRICE"), 1000, array("text", "20"));
			$arModuleOptions[] = array("MIN_ORDER_PRICE_TEXT", GetMessage("MIN_ORDER_PRICE_TEXT"), GetMessage("MIN_ORDER_PRICE_TEXT_EXAMPLE"), array("textarea", "3", "70"));

			// show yandex counter
			$arModuleOptions[] = GetMessage("YANDEX_GOOGLE_COUNTER_BLOCK");
			$arModuleOptions[] = array("YANDEX_COUNTER", GetMessage("YANDEX_COUNTER_TITLE"), '', array("textarea", "10", "50"));
			$arModuleOptions[] = array("YANDEX_ECOMERCE", GetMessage("YANDEX_ECOMERCE_TITLE"), 'N', array("checkbox"));
			$arModuleOptions[] = array("GOOGLE_COUNTER", GetMessage("GOOGLE_COUNTER_TITLE"), '', array("textarea", "10", "50"));
			$arModuleOptions[] = array("GOOGLE_ECOMERCE", GetMessage("GOOGLE_ECOMERCE_TITLE"), 'N', array("checkbox"));
			$arModuleOptions[] = array("BASKET_ADD_EVENT", GetMessage("BASKET_ADD_EVENT_TITLE"), "addToCart", array("text", "20"));
			$arModuleOptions[] = array("BASKET_REMOVE_EVENT", GetMessage("BASKET_REMOVE_EVENT_TITLE"), "removeFromCart", array("text", "20"));
			$arModuleOptions[] = array("CHECKOUT_ORDER_EVENT", GetMessage("CHECKOUT_ORDER_EVENT_TITLE"), "checkout", array("text", "20"));

			$arTabs = array();
			foreach($arSites as $key => $arSite){
				$arTabs[] = array(
					"DIV" => "edit".($key+1),
					"TAB" => GetMessage("MAIN_OPTIONS", array("#SITE_NAME#" => $arSite["NAME"], "#SITE_ID#" => $arSite["ID"])),
					"ICON" => "settings",
					"TITLE" => GetMessage("MAIN_OPTIONS_TITLE"),
					"PAGE_TYPE" => "site_settings",
					"SITE_ID" => $arSite["ID"],
					"OPTIONS" => $arModuleOptions,
				);
			}
		}

		return array("TABS" => $arTabs, "TEMPLATE_OPTIONS" => $arComponentOptions);
	}

	function SetJSOptions(){
		global $APPLICATION, $TEMPLATE_OPTIONS, $THEME_SWITCHER, $STARTTIME;
		$MESS["MIN_ORDER_PRICE_TEXT"]=COption::GetOptionString(self::moduleID, "MIN_ORDER_PRICE_TEXT", GetMessage("MIN_ORDER_PRICE_TEXT_EXAMPLE"), SITE_ID);
		?>
		<script type="text/javascript">
		BX.message(<?=CUtil::PhpToJSObject( $MESS, false )?>);

		var arOptimusOptions = ({
			"SITE_DIR" : "<?=SITE_DIR?>",
			"SITE_ID" : "<?=SITE_ID?>",
			"FORM" : ({
				"ASK_FORM_ID" : "ASK",
				"SERVICES_FORM_ID" : "SERVICES",
				"FEEDBACK_FORM_ID" : "FEEDBACK",
				"CALLBACK_FORM_ID" : "CALLBACK",
				"RESUME_FORM_ID" : "RESUME",
				"TOORDER_FORM_ID" : "TOORDER"
			}),
			"PAGES" : ({
				"FRONT_PAGE" : "<?=self::IsMainPage()?>",
				"BASKET_PAGE" : "<?=self::IsBasketPage()?>",
				"ORDER_PAGE" : "<?=self::IsOrderPage()?>",
				"PERSONAL_PAGE" : "<?=self::IsPersonalPage()?>",
				"CATALOG_PAGE" : "<?=self::IsCatalogPage()?>"
			}),
			"PRICES" : ({
				"MIN_PRICE" : "<?=trim(COption::GetOptionString(self::moduleID, "MIN_ORDER_PRICE", "1000", SITE_ID));?>",
			}),
			"THEME" : ({
				"THEME_SWITCHER" : "<?=strToLower(trim($THEME_SWITCHER))?>",
				"COLOR_THEME" : "<?=strToLower(trim($TEMPLATE_OPTIONS["COLOR_THEME"]["CURRENT_VALUE"]))?>",
				"CUSTOM_COLOR_THEME" : "<?=strToLower(trim($TEMPLATE_OPTIONS["CUSTOM_COLOR_THEME"]["CURRENT_VALUE"]))?>",
				"LOGO_IMAGE" : "<?=trim($TEMPLATE_OPTIONS["LOGO_IMAGE"]["CURRENT_IMG"])?>",
				"FAVICON_IMAGE" : "<?=trim($TEMPLATE_OPTIONS["FAVICON_IMAGE"]["CURRENT_IMG"])?>",
				"APPLE_TOUCH_ICON_IMAGE" : "<?=trim($TEMPLATE_OPTIONS["APPLE_TOUCH_ICON_IMAGE"]["CURRENT_IMG"])?>",
				"BANNER_WIDTH" : "<?=strToLower(trim($TEMPLATE_OPTIONS["BANNER_WIDTH"]["CURRENT_VALUE"]))?>",
				"BANNER_ANIMATIONTYPE" : "<?=trim(COption::GetOptionString(self::moduleID, "BANNER_ANIMATIONTYPE", "SLIDE_HORIZONTAL", SITE_ID));?>",
				"BANNER_SLIDESSHOWSPEED" : "<?=trim(COption::GetOptionString(self::moduleID, "BANNER_SLIDESSHOWSPEED", "5000", SITE_ID));?>",
				"BANNER_ANIMATIONSPEED" : "<?=trim(COption::GetOptionString(self::moduleID, "BANNER_ANIMATIONSPEED", "600", SITE_ID));?>",
				"HEAD" : ({
					"VALUE" : "<?=strToLower(trim($TEMPLATE_OPTIONS["HEAD"]["CURRENT_VALUE"]))?>",
					"MENU" : "<?=strToLower(trim($TEMPLATE_OPTIONS["HEAD"]["CURRENT_MENU"]))?>",
					"MENU_COLOR" : "<?=strToLower(trim($TEMPLATE_OPTIONS["HEAD"]["CURRENT_MENU_COLOR"]))?>",
					"HEAD_COLOR" : "<?=strToLower(trim($TEMPLATE_OPTIONS["HEAD"]["CURRENT_HEAD_COLOR"]))?>",
				}),
				"BASKET" : "<?=strToLower(trim($TEMPLATE_OPTIONS["BASKET"]["CURRENT_VALUE"]))?>",
				"STORES" : "<?=strToLower(trim($TEMPLATE_OPTIONS["STORES"]["CURRENT_VALUE"]))?>",
				"STORES_SOURCE" : "<?=strToLower(trim($TEMPLATE_OPTIONS["STORES_SOURCE"]["CURRENT_VALUE"]))?>",
				"TYPE_SKU" : "<?=strToLower(trim($TEMPLATE_OPTIONS["TYPE_SKU"]["CURRENT_VALUE"]))?>",
				"TYPE_VIEW_FILTER" : "<?=strToLower(trim($TEMPLATE_OPTIONS["TYPE_VIEW_FILTER"]["CURRENT_VALUE"]))?>",
				"SHOW_BASKET_ONADDTOCART" : "<?=trim(COption::GetOptionString(self::moduleID, "SHOW_BASKET_ONADDTOCART", "Y", SITE_ID))?>",
				"SHOW_BASKET_PRINT" : "<?=trim(COption::GetOptionString(self::moduleID, "SHOW_BASKET_PRINT", "Y", SITE_ID))?>",
				"SHOW_ONECLICKBUY_ON_BASKET_PAGE" : "<?=trim(COption::GetOptionString(self::moduleID, "SHOW_ONECLICKBUY_ON_BASKET_PAGE", "Y", SITE_ID))?>",
				"PHONE_MASK" : "<?=trim(COption::GetOptionString(self::moduleID, "PHONE_MASK", "+9 (999) 999-99-99", SITE_ID));?>",
				"VALIDATE_PHONE_MASK" : "<?=trim(COption::GetOptionString(self::moduleID, "VALIDATE_PHONE_MASK", "^[+][0-9] [(][0-9]{3}[)] [0-9]{3}[-][0-9]{2}[-][0-9]{2}$", SITE_ID));?>",
				"SCROLLTOTOP_TYPE" : "<?=trim(COption::GetOptionString(self::moduleID, "SCROLLTOTOP_TYPE", "ROUND_COLOR", SITE_ID))?>",
				"SCROLLTOTOP_POSITION" : "<?=trim(COption::GetOptionString(self::moduleID, "SCROLLTOTOP_POSITION", "PADDING", SITE_ID))?>",
				"MENU_POSITION" : "<?=strToLower(trim($TEMPLATE_OPTIONS["MENU_POSITION"]["CURRENT_VALUE"]))?>",
			}),
			"COUNTERS":({
				"YANDEX_COUNTER" : "<?=strlen(trim(COption::GetOptionString(self::moduleID, "YANDEX_COUNTER", false, SITE_ID)))?>",
				"GOOGLE_COUNTER" : "<?=strlen(trim(COption::GetOptionString(self::moduleID, "GOOGLE_COUNTER", false, SITE_ID)))?>",
				"YANDEX_ECOMERCE" : "<?=trim(COption::GetOptionString(self::moduleID, "YANDEX_ECOMERCE", false, SITE_ID))?>",
				"GOOGLE_ECOMERCE" : "<?=trim(COption::GetOptionString(self::moduleID, "GOOGLE_ECOMERCE", false, SITE_ID))?>",
				"TYPE":{
					"ONE_CLICK":"<?=GetMessage("ONE_CLICK_BUY");?>",
					"QUICK_ORDER":"<?=GetMessage("QUICK_ORDER");?>",
				},
				"GOOGLE_EVENTS":{
					"ADD2BASKET": "<?=trim(COption::GetOptionString(self::moduleID, "BASKET_ADD_EVENT", "addToCart", SITE_ID))?>",
					"REMOVE_BASKET": "<?=trim(COption::GetOptionString(self::moduleID, "BASKET_REMOVE_EVENT", "removeFromCart", SITE_ID))?>",
					"CHECKOUT_ORDER": "<?=trim(COption::GetOptionString(self::moduleID, "CHECKOUT_ORDER_EVENT", "checkout", SITE_ID))?>",
				}
			}),
			"JS_ITEM_CLICK":({
				"precision" : 6,
				"precisionFactor" : Math.pow(10,6)
			})
		});

		$(document).ready(function(){
			$.extend( $.validator.messages, {
				required: BX.message('JS_REQUIRED'),
				email: BX.message('JS_FORMAT'),
				equalTo: BX.message('JS_PASSWORD_COPY'),
				minlength: BX.message('JS_PASSWORD_LENGTH'),
				remote: BX.message('JS_ERROR')
			});

			$.validator.addMethod(
				'regexp', function( value, element, regexp ){
					var re = new RegExp( regexp );
					return this.optional( element ) || re.test( value );
				},
				BX.message('JS_FORMAT')
			);

			$.validator.addMethod(
				'filesize', function( value, element, param ){
					return this.optional( element ) || ( element.files[0].size <= param )
				},
				BX.message('JS_FILE_SIZE')
			);

			$.validator.addMethod(
				'date', function( value, element, param ) {
					var status = false;
					if(!value || value.length <= 0){
						status = false;
					}
					else{
						// html5 date allways yyyy-mm-dd
						var re = new RegExp('^([0-9]{4})(.)([0-9]{2})(.)([0-9]{2})$');
						var matches = re.exec(value);
						if(matches){
							var composedDate = new Date(matches[1], (matches[3] - 1), matches[5]);
							status = ((composedDate.getMonth() == (matches[3] - 1)) && (composedDate.getDate() == matches[5]) && (composedDate.getFullYear() == matches[1]));
						}
						else{
							// firefox
							var re = new RegExp('^([0-9]{2})(.)([0-9]{2})(.)([0-9]{4})$');
							var matches = re.exec(value);
							if(matches){
								var composedDate = new Date(matches[5], (matches[3] - 1), matches[1]);
								status = ((composedDate.getMonth() == (matches[3] - 1)) && (composedDate.getDate() == matches[1]) && (composedDate.getFullYear() == matches[5]));
							}
						}
					}
					return status;
				}, BX.message('JS_DATE')
			);

			$.validator.addMethod(
				'extension', function(value, element, param){
					param = typeof param === 'string' ? param.replace(/,/g, '|') : 'png|jpe?g|gif';
					return this.optional(element) || value.match(new RegExp('.(' + param + ')$', 'i'));
				}, BX.message('JS_FILE_EXT')
			);

			$.validator.addMethod(
				'captcha', function( value, element, params ){
					return $.validator.methods.remote.call(this, value, element,{
						url: arOptimusOptions['SITE_DIR'] + 'ajax/check-captcha.php',
						type: 'post',
						data:{
							captcha_word: value,
							captcha_sid: function(){
								return $(element).closest('form').find('input[name="captcha_sid"]').val();
							}
						}
					});
				},
				BX.message('JS_ERROR')
			);

			$.validator.addClassRules({
				'phone':{
					regexp: arOptimusOptions['THEME']['VALIDATE_PHONE_MASK']
				},
				'confirm_password':{
					equalTo: 'input[name="REGISTER\[PASSWORD\]"]',
					minlength: 6
				},
				'password':{
					minlength: 6
				},
				'inputfile':{
					extension: arOptimusOptions['THEME']['VALIDATE_FILE_EXT'],
					filesize: 5000000
				},
				'captcha':{
					captcha: ''
				}
			});

			if(arOptimusOptions['THEME']['PHONE_MASK']){
				$('input.phone').inputmask('mask', {'mask': arOptimusOptions['THEME']['PHONE_MASK']});
			}

			jqmEd('feedback', arOptimusOptions['FORM']['FEEDBACK_FORM_ID']);
			jqmEd('ask', arOptimusOptions['FORM']['ASK_FORM_ID'], '.ask_btn');
			jqmEd('services', arOptimusOptions['FORM']['SERVICES_FORM_ID'], '.services_btn','','.services_btn');
			if($('.resume_send').length){
				$('.resume_send').live('click', function(e){
					$("body").append("<span class='resume_send_wr' style='display:none;'></span>");
					jqmEd('resume', arOptimusOptions['FORM']['RESUME_FORM_ID'], '.resume_send_wr','', this);
					$("body .resume_send_wr").click();
					$("body .resume_send_wr").remove();
				})
			}
			jqmEd('callback', arOptimusOptions['FORM']['CALLBACK_FORM_ID'], '.callback_btn');

		});
		</script>
		<?/*fix reset POST*/
		if($_SERVER["REQUEST_METHOD"]=="POST" && $_POST["color_theme"]){
			LocalRedirect($_SERVER["HTTP_REFERER"]);
		}?>
	<?}

	function checkAllowDelivery($summ, $currency){
		$ERROR = false;
		$min_price = \Bitrix\Main\Config\Option::get(self::moduleID, "MIN_ORDER_PRICE", 1000, SITE_ID);
		$error_text = "";
		if( $summ < $min_price ){
			$ERROR = true;
			$error_text = \Bitrix\Main\Config\Option::get(self::moduleID, "MIN_ORDER_PRICE_TEXT", GetMessage("MIN_ORDER_PRICE_TEXT_EXAMPLE") );
			$error_text = str_replace( '#PRICE#', SaleFormatCurrency($min_price,$currency), $error_text );
			if($currency)
				$error_text = str_replace( '#PRICE#', SaleFormatCurrency($min_price,$currency), $error_text );
			else
				$error_text = str_replace( '#PRICE#', $min_price, $error_text );
		}
		return $arError=array( "ERROR" => $ERROR, "TEXT" => $error_text );
	}

	function showMoreText( $text ){
		$arText = explode( "#MORE_TEXT#", $text);
		if( $arText[1] ){
			$str = $arText[0];
			$str .= '<div class="wrap_more_item">';
				$str .= '<div class="more_text_item">';
				$str .= $arText[1];
				$str .= '</div>';
				$str .= '<div class="open_more"><span class="text"><i class="arrow"></i><span class="pseudo">'.GetMessage("EXPAND_BLOCK").'</span></span></div>';
			$str .= '</div>';
		}else{
			$str = $text;
		}
		return $str;
	}

	function IsCompositeEnabled(){
		if(class_exists('CHTMLPagesCache')){
			if(method_exists('CHTMLPagesCache', 'GetOptions')){
				if($arHTMLCacheOptions = CHTMLPagesCache::GetOptions()){
					if(method_exists('CHTMLPagesCache', 'isOn')){
						if (CHTMLPagesCache::isOn()){
							if(isset($arHTMLCacheOptions['AUTO_COMPOSITE']) && $arHTMLCacheOptions['AUTO_COMPOSITE'] === 'Y'){
								return 'AUTO_COMPOSITE';
							}
							else{
								return 'COMPOSITE';
							}
						}
					}
					else{
						if($arHTMLCacheOptions['COMPOSITE'] === 'Y'){
							return 'COMPOSITE';
						}
					}
				}
			}
		}

		return false;
	}

	function EnableComposite($auto = false){
		if(class_exists('CHTMLPagesCache')){
			if(method_exists('CHTMLPagesCache', 'GetOptions')){
				if($arHTMLCacheOptions = CHTMLPagesCache::GetOptions()){
					$arHTMLCacheOptions['COMPOSITE'] = 'Y';
					$arHTMLCacheOptions['AUTO_UPDATE'] = 'Y'; // standart mode
					$arHTMLCacheOptions['AUTO_UPDATE_TTL'] = '0'; // no ttl delay
					$arHTMLCacheOptions['AUTO_COMPOSITE'] = ($auto ? 'Y' : 'N'); // auto composite mode
					CHTMLPagesCache::SetEnabled(true);
					CHTMLPagesCache::SetOptions($arHTMLCacheOptions);
					bx_accelerator_reset();
				}
			}
		}
	}

	function __AdmSettingsSaveOption_EX($module_id, $arOption){
		if(!is_array($arOption)){
			return false;
		}

		$arControllerOption = CControllerClient::GetInstalledOptions($module_id);
		if(isset($arControllerOption[$arOption[0]])){
			return false;
		}

		$name = $arOption[0];
		$val = $_REQUEST[$name];
		$siteID = end(explode("_", $arOption[0]));
		$name = substr($name, 0, (strlen($name)-strlen($siteID)-1));

		if(array_key_exists(4, $arOption) && $arOption[4] == 'Y'){
			if($arOption[3][0] == 'checkbox'){
				$val = 'N';
			}
			else{
				return false;
			}
		}

		if($arOption[3][0] == "checkbox" && $val != "Y"){
			$val = "N";
		}
		elseif($arOption[3][0] == "multiselectbox"){
			$val = @implode(",", $val);
		}
		elseif($arOption[3][0] == "file"){
			$val = $arValueDefault = serialize(array());
			if(isset($_REQUEST[$name.'_'.$siteID.'_del']) || (isset($_FILES[$arOption[0]]) && strlen($_FILES[$arOption[0]]['tmp_name']['0']))){
				$arValues = unserialize(COption::GetOptionString($module_id, $name, $arValueDefault, $siteID));
				$arValues = (array)$arValues;
				foreach($arValues as $fileID){
					CFile::Delete($fileID);
				}
			}

			if(isset($_FILES[$arOption[0]]) && (strlen($_FILES[$arOption[0]]['tmp_name']['n0']) || strlen($_FILES[$arOption[0]]['tmp_name']['0']))){
				$arValues = array();
				$absFilePath = (strlen($_FILES[$arOption[0]]['tmp_name']['n0']) ? $_FILES[$arOption[0]]['tmp_name']['n0'] : $_FILES[$arOption[0]]['tmp_name']['0']);
				$arOriginalName = (strlen($_FILES[$arOption[0]]['name']['n0']) ? $_FILES[$arOption[0]]['name']['n0'] : $_FILES[$arOption[0]]['name']['0']);
				if(file_exists($absFilePath)){
					$arFile = CFile::MakeFileArray($absFilePath);
					$arFile['name'] = $arOriginalName; // for original file extension

					if($bIsIco = strpos($arOriginalName, '.ico') !== false){
						$script_files = COption::GetOptionString("fileman", "~script_files", "php,php3,php4,php5,php6,phtml,pl,asp,aspx,cgi,dll,exe,ico,shtm,shtml,fcg,fcgi,fpl,asmx,pht,py,psp,var");
						$arScriptFiles = explode(',', $script_files);
						if(($p = array_search('ico', $arScriptFiles)) !== false){
							unset($arScriptFiles[$p]);
						}
						$tmp = implode(',', $arScriptFiles);
						COption::SetOptionString("fileman", "~script_files", $tmp);
					}

					if($fileID = CFile::SaveFile($arFile, self::moduleID)){
						$arValues[] = $fileID;
					}

					if($bIsIco){
						COption::SetOptionString("fileman", "~script_files", $script_files);
					}
				}
				$val = serialize($arValues);
			}

			if(!isset($_FILES[$arOption[0]]) || (!strlen($_FILES[$arOption[0]]['tmp_name']['n0']) && !strlen($_FILES[$arOption[0]]['tmp_name']['0']) && !isset($_REQUEST[$name.'_'.$siteID.'_del']))){
				return;
			}
		}
		if($name === 'FAVICON_IMAGE'){
			self::CopyFaviconToSiteDir($val, $siteID); //copy favicon for search bots
		}

		if(strpos($name, 'CUSTOM_COLOR_THEME') !== false || strpos($name, 'CUSTOM_BGCOLOR_THEME') !== false){
			$val = str_replace('#', '', $val);
			$val = strlen($val) ? $val : $arOption[2];
		}

		COption::SetOptionString($module_id, $name, $val, $arOption[1], $siteID);
	}

	static function CopyFaviconToSiteDir($arValue, $siteID = ''){
		if(($siteID)){
			$arValue=unserialize($arValue);
			if($arValue[0]){
				$imageSrc = $_SERVER['DOCUMENT_ROOT'].CFile::GetPath($arValue[0]);
			}
			else{
				if($arTemplate = self::GetSiteTemplate($siteID)){
					$imageSrc = str_replace('//', '/', $arTemplate['PATH'].'/images/favicon.ico');
				}
			}
			$arSite = CSite::GetByID($siteID)->Fetch();

			@unlink($imageDest = $arSite['ABS_DOC_ROOT'].'/'.$arSite['DIR'].'/favicon.ico');
			if(file_exists($imageSrc)){
				@copy($imageSrc, $arSite['ABS_DOC_ROOT'].'/'.$arSite['DIR'].'/favicon.ico');
			}else{
				@copy($arSite['ABS_DOC_ROOT'].'/'.$arSite['DIR'].'/include/favicon.ico', $arSite['ABS_DOC_ROOT'].'/'.$arSite['DIR'].'/favicon.ico');
			}
		}
	}

	static function GetSiteTemplate($siteID = ''){
		$arTemplate = array();

		if(strlen($siteID)){
			$dbRes = CSite::GetTemplateList($siteID);
			while($arTemplate = $dbRes->Fetch()){
				if(!strlen($arTemplate['CONDITION'])){
					if(file_exists(($arTemplate['PATH'] = $_SERVER['DOCUMENT_ROOT'].'/bitrix/templates/'.$arTemplate['TEMPLATE']))){
						break;
					}
					elseif(file_exists(($arTemplate['PATH'] = $_SERVER['DOCUMENT_ROOT'].'/local/templates/'.$arTemplate['TEMPLATE']))){
						break;
					}
				}
			}
		}

		return $arTemplate;
	}

	function __AdmSettingsDrawRow_EX($module_id, $Option, $siteID){
		$arControllerOption = CControllerClient::GetInstalledOptions($module_id);
		if(!is_array($Option)):?><tr class="heading"><td colspan="2"><?=$Option?></td></tr><?
		elseif(isset($Option["note"])):
		?>
			<tr>
				<td colspan="2" align="center">
					<?echo BeginNote('align="center"');?>
					<?=$Option["note"]?>
					<?echo EndNote();?>
				</td>
			</tr>
		<?
		else:
			$name  = substr($Option[0], 0, (strlen($Option[0])-strlen($siteID)-1));
			$val = COption::GetOptionString($module_id, $name, $Option[2], $siteID);
			$type = $Option[3];
			$disabled = array_key_exists(4, $Option) && $Option[4] == 'Y' ? ' disabled' : '';
			$sup_text = array_key_exists(5, $Option) ? $Option[5] : '';
			$style = "";
			if($name == "TOP_SECTION_DESCRIPTION_POSITION" || $name == "BOTTOM_SECTION_DESCRIPTION_POSITION")
			{
				$type_description = \Bitrix\Main\Config\Option::get(self::moduleID, "SHOW_SECTION_DESCRIPTION", "BOTTOM", $siteID );
				if($type_description != "BOTH")
					$style = "style='display:none;'";
			}
		?>
			<tr <?=$style;?>>
				<td<?if($type[0]=="multiselectbox" || $type[0]=="textarea" || $type[0]=="statictext" || $type[0]=="statichtml") echo ' class="adm-detail-valign-top"'?> width="50%"><?
					if($type[0]=="checkbox") echo "<label for='".htmlspecialcharsbx($Option[0])."'>".$Option[1]."</label>";
					else echo $Option[1];
					if (strlen($sup_text) > 0) { ?><span class="required"><sup><?=$sup_text?></sup></span><? }
				?></td>
				<td width="50%"><?
				if($type[0]=="checkbox"): ?><input type="checkbox" <?if(isset($arControllerOption[$Option[0]]))echo ' disabled title="'.GetMessage("MAIN_ADMIN_SET_CONTROLLER_ALT").'"';?> id="<?echo htmlspecialcharsbx($Option[0])?>" name="<?echo htmlspecialcharsbx($Option[0])?>" value="Y"<?if($val=="Y")echo" checked";?><?=$disabled?><?if($type[2]<>'') echo " ".$type[2]?>><?
				elseif($type[0]=="text" || $type[0]=="password"): ?><input type="<?echo $type[0]?>"<?if(isset($arControllerOption[$Option[0]]))echo ' disabled title="'.GetMessage("MAIN_ADMIN_SET_CONTROLLER_ALT").'"';?> size="<?echo $type[1]?>" maxlength="255" value="<?echo htmlspecialcharsbx($val)?>" name="<?echo htmlspecialcharsbx($Option[0])?>"<?=$disabled?><?=($type[0]=="password"? ' autocomplete="off"':'')?>><?
				elseif($type[0]=="selectbox"):
					$arr = $type[1];
					if(!is_array($arr))
						$arr = array();
					$arr_keys = array_keys($arr);
					?><select name="<?echo htmlspecialcharsbx($Option[0])?>" <?if(isset($arControllerOption[$Option[0]]))echo ' disabled title="'.GetMessage("MAIN_ADMIN_SET_CONTROLLER_ALT").'"';?> <?=$disabled?>><?
						$count = count($arr_keys);
						for($j=0; $j<$count; $j++): ?><option value="<?echo $arr_keys[$j]?>"<?if($val==$arr_keys[$j])echo" selected"?>><?echo htmlspecialcharsbx($arr[$arr_keys[$j]])?></option><? endfor;
						?></select>
				<?elseif($type[0]=="selectbox_iblock"):

					\Bitrix\Main\Loader::includeModule('iblock');
					$rsIBlock=CIBlock::GetList(array("SORT"=>"ASC", "ID"=>"DESC"), array("LID"=>$siteID));
					$arIBlocks=array();
					while($arIBlock=$rsIBlock->Fetch()){
						$arIBlocks[$arIBlock["ID"]]["NAME"]="(".$arIBlock["ID"].") ".$arIBlock["NAME"]."[".$arIBlock["CODE"]."]";
						$arIBlocks[$arIBlock["ID"]]["CODE"]=$arIBlock["CODE"];
					}
					$arr_keys = array_keys($arIBlocks);
					?>
					<select name="<?echo htmlspecialcharsbx($Option[0])?>" <?if(isset($arControllerOption[$Option[0]]))echo ' disabled title="'.GetMessage("MAIN_ADMIN_SET_CONTROLLER_ALT").'"';?> <?=$disabled?>>
						<?if($arIBlocks){
							foreach($arIBlocks as $key => $arValue) {
								$selected="";
								if(!$val && $arValue["CODE"]=="aspro_optimus_catalog"){
									$selected="selected";
								}elseif($val && $val==$key){
									$selected="selected";
								}?>
								<option value="<?=$key;?>" <?=$selected;?>><?=htmlspecialcharsbx($arValue["NAME"]);?></option>
							<?}
						}else{?>
							<option value="">-</option>
						<?}?>
					</select><?
				elseif($type[0]=="multiselectbox"):
					$arr = $type[1];
					if(!is_array($arr)) $arr = array();
					$arr_keys = array_keys($arr);
					$arr_val = explode(",",$val);
					?><select size="5" <?if(isset($arControllerOption[$Option[0]]))echo ' disabled title="'.GetMessage("MAIN_ADMIN_SET_CONTROLLER_ALT").'"';?> multiple name="<?echo htmlspecialcharsbx($Option[0])?>[]"<?=$disabled?>><?
						$count = count($arr_keys);
						for($j=0; $j<$count; $j++): ?><option value="<?echo $arr_keys[$j]?>"<?if(in_array($arr_keys[$j],$arr_val)) echo " selected"?>><?echo htmlspecialcharsbx($arr[$arr_keys[$j]])?></option><? endfor;
					?></select><?
				elseif($type[0]=="textarea"):?><textarea <?if(isset($arControllerOption[$Option[0]]))echo ' disabled title="'.GetMessage("MAIN_ADMIN_SET_CONTROLLER_ALT").'"';?> rows="<?echo $type[1]?>" cols="<?echo $type[2]?>" name="<?echo htmlspecialcharsbx($Option[0])?>"<?=$disabled?>><?echo htmlspecialcharsbx($val)?></textarea><?
				elseif($type[0]=='file'):
					$val = unserialize($val);
					$Option['MULTIPLE'] = 'N';
					if(strpos($Option[0], 'LOGO_IMAGE') !== false) {
						$arOption['WIDTH'] = 163;
						$arOption['HEIGHT'] = 36;
					}
					elseif(strpos($Option[0], 'FAVICON_IMAGE') !== false) {
						$arOption['WIDTH'] = 16;
						$arOption['HEIGHT'] = 16;
					}
					elseif(strpos($Option[0], 'APPLE_TOUCH_ICON_IMAGE') !== false) {
						$arOption['WIDTH'] = 180;
						$arOption['HEIGHT'] = 180;
					}
					self::__ShowFilePropertyField($Option[0], $Option, $val);
				elseif($type[0]=="statictext"): echo htmlspecialcharsbx($val);
				elseif($type[0]=="statichtml"): echo $val;
				endif;
				?></td>
			</tr>
		<?
		endif;
	}

	function __AdmSettingsDrawCustomRow($html){
		echo '<tr><td colspan="2">'.$html.'</td></tr>';
	}

	protected function __ShowFilePropertyField($name, $arOption, $values){
		global $bCopy, $historyId;

		if(!is_array($values)){
			$values = array($values);
		}

		if($bCopy || empty($values)){
			$values = array('n0' => 0);
		}

		$optionWidth = $arOption['WIDTH'] ? $arOption['WIDTH'] : 200;
		$optionHeight = $arOption['HEIGHT'] ? $arOption['HEIGHT'] : 100;

		if($arOption['MULTIPLE'] == 'N'){
			foreach($values as $key => $val){
				if(is_array($val)){
					$file_id = $val['VALUE'];
				}
				else{
					$file_id = $val;
				}
				if($historyId > 0){
					echo CFileInput::Show($name.'['.$key.']', $file_id,
						array(
							'IMAGE' => $arOption['IMAGE'],
							'PATH' => 'Y',
							'FILE_SIZE' => 'Y',
							'DIMENSIONS' => 'Y',
							'IMAGE_POPUP' => 'Y',
							'MAX_SIZE' => array(
								'W' => $optionWidth,
								'H' => $optionHeight,
							),
						)
					);
				}
				else{
					echo CFileInput::Show($name.'['.$key.']', $file_id,
						array(
							'IMAGE' => $arOption['IMAGE'],
							'PATH' => 'Y',
							'FILE_SIZE' => 'Y',
							'DIMENSIONS' => 'Y',
							'IMAGE_POPUP' => 'Y',
							'MAX_SIZE' => array(
							'W' => $optionWidth,
							'H' => $optionHeight,
							),
						),
						array(
							'upload' => true,
							'medialib' => true,
							'file_dialog' => true,
							'cloud' => true,
							'del' => true,
							'description' => $arOption['WITH_DESCRIPTION'] == 'Y',
						)
					);
				}
				break;
			}
		}
		else{
			$inputName = array();
			foreach($values as $key => $val){
				if(is_array($val)){
					$inputName[$name.'['.$key.']'] = $val['VALUE'];
				}
				else{
					$inputName[$name.'['.$key.']'] = $val;
				}
			}
			if($historyId > 0){
				echo CFileInput::ShowMultiple($inputName, $name.'[n#IND#]',
					array(
						'IMAGE' => $arOption['IMAGE'],
						'PATH' => 'Y',
						'FILE_SIZE' => 'Y',
						'DIMENSIONS' => 'Y',
						'IMAGE_POPUP' => 'Y',
						'MAX_SIZE' => array(
							'W' => $optionWidth,
							'H' => $optionHeight,
						),
					),
				false);
			}
			else{
				echo CFileInput::ShowMultiple($inputName, $name.'[n#IND#]',
					array(
						'IMAGE' => $arOption['IMAGE'],
						'PATH' => 'Y',
						'FILE_SIZE' => 'Y',
						'DIMENSIONS' => 'Y',
						'IMAGE_POPUP' => 'Y',
						'MAX_SIZE' => array(
							'W' => $optionWidth,
							'H' => $optionHeight,
						),
					),
				false,
					array(
						'upload' => true,
						'medialib' => true,
						'file_dialog' => true,
						'cloud' => true,
						'del' => true,
						'description' => $arOption['WITH_DESCRIPTION'] == 'Y',
					)
				);
			}
		}
	}

	static function InsertCounters(&$html){
		if(defined("ADMIN_SECTION")/* || $_SERVER["HTTP_BX_CACHE_MODE"] == "HTMLCACHE"*/){
			return;
		}

		define("LOAD_COUNTERS", true);
		global $APPLICATION;
		if(defined("LOAD_COUNTERS")  && (strpos($APPLICATION->GetCurPage(),'personal')===false)){
			$counter = '';
			$yandex_counter = \Bitrix\Main\Config\Option::get(self::moduleID, "YANDEX_COUNTER", false, SITE_ID);
			if($yandex_counter){
				$counter .= '
<script>
	var yandexEvents = new function(){
		var myWatchers = new Array();
		this.addEventListener = function( watcher ){
			myWatchers.push( watcher );
		};

		this.raiseEvents = function( eventId ){
			for( var thisEventIndex in myWatchers ){
				myWatchers[thisEventIndex]( eventId );
			}
		};
	};
	window.onload=function(){
		window.dataLayer = window.dataLayer || [];
	}
</script>
';
				$counter .= $yandex_counter;
			}

			$google_counter = \Bitrix\Main\Config\Option::get(self::moduleID, "GOOGLE_COUNTER", false, SITE_ID);
			if( $google_counter && $google_ecomerce=="Y" ){
				$counter1 .=$google_counter;
				$html = str_replace( '<body id="main">', '<body id="main">'.$counter1, $html );
			}
			if($google_counter){
				$counter .= $google_counter;
			}

			if(strlen($counter)){
				$html = str_replace('</body>', $counter.'</body>', $html);
			}
		}
	}

	function clearBasketCacheHandler($orderID, $arFields, $arParams){
		COptimusCache::ClearCacheByTag('sale_basket');
		unset($_SESSION['ASPRO_BASKET_COUNTERS']);
		if(isset($arFields) && $arFields)
		{
			if(isset($arFields["ID"]) && $arFields["ID"])
			{
				\Bitrix\Main\Loader::includeModule("sale");
				global $USER;
				$USER_ID = ($USER_ID = $USER->GetID()) ? $USER_ID : 0;
				$arUser = $arUser = COptimusCache::CUser_GetList(array("SORT" => "ASC", "CACHE" => array("MULTI" => "N", "TAG" => COptimusCache::GetUserCacheTag($USER_ID))), array("ID" => $USER_ID), array("FIELDS" => array("ID", "PERSONAL_PHONE")));
				if(!$arUser["PERSONAL_PHONE"])
				{
					$rsOrder = CSaleOrderPropsValue::GetList(array(), array("ORDER_ID" => $arFields["ID"]));
					$arOrderProps = array();
					while($item = $rsOrder->Fetch())
					{
						$arOrderProps[$item["CODE"]] = $item;
					}
					if(isset($arOrderProps["PHONE"]) && $arOrderProps["PHONE"] && (isset($arOrderProps["PHONE"]["VALUE"]) && $arOrderProps["PHONE"]["VALUE"]))
					{
						$user = new CUser;
						$fields = Array(
							"PERSONAL_PHONE" => $arOrderProps["PHONE"]["VALUE"],						
						);
						$user->Update($arUser["ID"], $fields);
					}
					
				}
			}
		}
	}

	function OnBeforeUserUpdateHandler(&$arFields){
		if(strlen($arFields["NAME"]))
			$arFields["NAME"] = trim($arFields["NAME"]);
		if(strlen($arFields["NAME"]) && !strlen($arFields["LAST_NAME"]) && !strlen($arFields["SECOND_NAME"])){
			$arName = explode(' ', $arFields["NAME"]);

			if($arName){
				$arFields["NAME"] = "";
				$arFields["SECOND_NAME"] = "";
				foreach($arName as $i => $name){
					if(!$i){
						$arFields["LAST_NAME"] = $name;
					}
					else{
						if(!strlen($arFields["NAME"])){
							$arFields["NAME"] = $name;
						}
						elseif(!strlen($arFields["SECOND_NAME"])){
							$arFields["SECOND_NAME"] = $name;
						}
					}
				}
			}
		}
		if($_REQUEST["confirmorder"]=="Y"  && !strlen($arFields["SECOND_NAME"]) && $_REQUEST["ORDER_PROP_1"]){
			$arNames = explode(' ', $_REQUEST["ORDER_PROP_1"]);
			if($arNames[2]){
				$arFields["SECOND_NAME"]=$arNames[2];
			}
		}
		if(strlen($arFields["EMAIL"])){
			$bEmailError = false;

			$rsUser = CUser::GetList($by = "ID", $order = "ASC", array("=EMAIL" => $arFields["EMAIL"], "!ID" => $arFields["ID"]));
			if(!$bEmailError = intval($rsUser->SelectedRowsCount()) > 0){
				$rsUser = CUser::GetList($by = "ID", $order = "ASC", array("LOGIN" => $arFields["EMAIL"], "!ID" => $arFields["ID"]));
				$bEmailError = intval($rsUser->SelectedRowsCount()) > 0;
			}

			if($bEmailError){
				global $APPLICATION;
				$APPLICATION->throwException(GetMessage('EMAIL_IS_ALREADY_EXISTS', array('#EMAIL#' => $arFields["EMAIL"])));
				return false;
			}
			else{
				// !admin
				global $USER;
				if(!$USER->IsAdmin()){
					$arFields["LOGIN"] = $arFields["EMAIL"];
				}
			}
		}
		return $arFields;
	}

	function GetYearsItems($iblock_id){
		$arYears=array();
		$rsItems=CIBlockElement::GetList(array(), array("IBLOCK_ID" => $iblock_id, "ACTIVE" => "Y", "GLOBAL_ACTIVE" => "Y"), false, false, array("ID", "DATE_ACTIVE_FROM"));
		while($arItem=$rsItems->Fetch()){
			if($arItem["DATE_ACTIVE_FROM"]){
				$date = explode(' ', $arItem["DATE_ACTIVE_FROM"]);
				$date = $date[0];
				$date = explode('.', $date);
				$arYears[$date[2]] = $date[2];
			}
		}
		return $arYears;
	}

	function removeDirectory($dir){
		if($objs = glob($dir."/*")){
			foreach($objs as $obj){
				if(is_dir($obj)){
					self::removeDirectory($obj);
				}
				else{
					if(!unlink($obj)){
						if(chmod($obj, 0777)){
							unlink($obj);
						}
					}
				}
			}
		}
		if(!rmdir($dir)){
			if(chmod($dir, 0777)){
				rmdir($dir);
			}
		}
	}

    function inputClean($input, $sql = false){
       /* $input = htmlentities($input, ENT_QUOTES, LANG_CHARSET);
        if(get_magic_quotes_gpc ())
        {
            $input = stripslashes ($input);
        }
        if ($sql)
        {
            $input = mysql_real_escape_string ($input);
        }
        $input = strip_tags($input);
        $input=str_replace ("\n"," ", $input);
        $input=str_replace ("\r","", $input); */
        return $input;
    }

    static function getBasketCounters(){
    	global $USER;
    	$USER_ID = ($USER_ID = $USER->GetID()) ? $USER_ID : 0;
    	$arResult = false;

    	if(isset($_SESSION['ASPRO_BASKET_COUNTERS'])){
    		if(!is_array($_SESSION['ASPRO_BASKET_COUNTERS']) || (is_array($_SESSION['ASPRO_BASKET_COUNTERS']) && count($_SESSION['ASPRO_BASKET_COUNTERS']) && !isset($_SESSION['ASPRO_BASKET_COUNTERS'][$USER_ID]))){
    			unset($_SESSION['ASPRO_BASKET_COUNTERS']);
    		}
    		else{
		    	$arResult = $_SESSION['ASPRO_BASKET_COUNTERS'][$USER_ID];
    		}
    	}

    	if(!$arResult || !is_array($arResult)){
    		// set default value
    		$arResult = array('READY' => array('COUNT' => 0, 'TITLE' => '', 'HREF' => SITE_DIR.'basket/'), 'DELAY' => array('COUNT' => 0, 'TITLE' => '', 'HREF' => SITE_DIR.'basket/'), 'COMPARE' => array('COUNT' => 0, 'TITLE' => GetMessage('COMPARE_BLOCK'), 'HREF' => SITE_DIR.'catalog/compare.php'), 'PERSONAL' => array('ID' => $USER_ID, 'SRC' => '', 'TITLE' => GetMessage("USER_AUTH"), 'HREF' => SITE_DIR.'auth/'), 'DEFAULT' => true);

    		// get user avatar
	    	if($isAuthorized = ($USER->isAuthorized() ? true : false)){
				$arResult['PERSONAL']['TITLE'] = GetMessage("USER_CABINET");

	    		$arUser = COptimusCache::CUser_GetList(array("SORT" => "ASC", "CACHE" => array("MULTI" => "N", "TAG" => COptimusCache::GetUserCacheTag($USER_ID))), array("ID" => $USER_ID), array("FIELDS" => array("ID", "PERSONAL_PHOTO")));
				if($arUser["PERSONAL_PHOTO"]){
					$arPhoto = CFile::ResizeImageGet($arUser["PERSONAL_PHOTO"], array("width" => 50, "height" => 50), BX_RESIZE_IMAGE_EXACT, true);
					$arResult['PERSONAL']['SRC'] = $arPhoto['src'];
				}
	    	}
    	}

    	$_SESSION['ASPRO_BASKET_COUNTERS'] = array($USER_ID => $arResult);
    	return $arResult;
    }

    static function updateBasketCounters($arValue){
    	global $USER;
    	$USER_ID = ($USER_ID = $USER->GetID()) ? $USER_ID : 0;

    	$arResult = self::getBasketCounters();
    	if($arValue && is_array($arValue)){
    		$arResult = array_replace_recursive($arResult, $arValue);
    	}
    	$arResult['DEFAULT'] = false;

    	$_SESSION['ASPRO_BASKET_COUNTERS'] = array($USER_ID => $arResult);
    	return $arResult;
    }

    static function clearBasketCounters(){
    	unset($_SESSION['ASPRO_BASKET_COUNTERS']);
    }


	function correctInstall(){
		if(COption::GetOptionString(self::moduleID, "WIZARD_DEMO_INSTALLED") == "Y"){
			if(CModule::IncludeModule("main")){
				require_once($_SERVER["DOCUMENT_ROOT"].BX_ROOT."/modules/main/classes/general/wizard.php");
				@set_time_limit(0);
				if(!CWizardUtil::DeleteWizard(self::wizardID)){if(!DeleteDirFilesEx($_SERVER["DOCUMENT_ROOT"]."/bitrix/wizards/".self::partnerName."/".self::solutionName."/")){self::removeDirectory($_SERVER["DOCUMENT_ROOT"]."/bitrix/wizards/".self::partnerName."/".self::solutionName."/");}}
				UnRegisterModuleDependences("main", "OnBeforeProlog", self::moduleID, get_class(), "correctInstall");
				COption::SetOptionString(self::moduleID, "WIZARD_DEMO_INSTALLED", "N");
			}
		}
	}

	function newAction($action = "unknown"){
		$socket = fsockopen('bi.aspro.ru', 80, $errno, $errstr, 10);
		if($socket){
			if(CModule::IncludeModule("main")){
				global $APPLICATION;
				require_once($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/main/classes/general/update_client.php");
				$errorMessage = "";
				$serverIP = ($_SERVER["HTTP_X_REAL_IP"] ? $_SERVER["HTTP_X_REAL_IP"] : $_SERVER["SERVER_ADDR"]);
				$arUpdateList = CUpdateClient::GetUpdatesList($errorMessage, "ru", "Y");
				if(array_key_exists("CLIENT", $arUpdateList) && $arUpdateList["CLIENT"][0]["@"]["LICENSE"]){
					$edition = $arUpdateList["CLIENT"][0]["@"]["LICENSE"];
				}
				else{
					$edition = "UNKNOWN";
				}
				$data = json_encode(
					array(
						"client" => "aspro",
						"install_date" => date("Y-m-d H:i:s"),
						"solution_code" => self::moduleID,
						"ip" => $serverIP,
						"http_host" => $_SERVER["HTTP_HOST"],
						"bitrix_version" => SM_VERSION,
						"bitrix_edition" => $APPLICATION->ConvertCharset($edition, SITE_CHARSET, "utf-8"),
						"bitrix_key_hash" => md5(CUpdateClient::GetLicenseKey()),
						"site_name" => $APPLICATION->ConvertCharset(COption::GetOptionString("main", "site_name"), SITE_CHARSET, "utf-8"),
						"site_url" => $APPLICATION->ConvertCharset(COption::GetOptionString("main", "server_name"), SITE_CHARSET, "utf-8"),
						"email_default" => $APPLICATION->ConvertCharset(COption::GetOptionString("main", "email_from"), SITE_CHARSET, "utf-8"),
						"action" => $action,
					)
				);
				fwrite($socket, "POST /rest/bitrix/installs HTTP/1.1\r\n");
				fwrite($socket, "Host: bi.aspro.ru\r\n");
				fwrite($socket, "Content-type: application/x-www-form-urlencoded\r\n");
				fwrite($socket, "Content-length:".strlen($data)."\r\n");
				fwrite($socket, "Accept:*/*\r\n");
				fwrite($socket, "User-agent:Bitrix Installer\r\n");
				fwrite($socket, "Connection:Close\r\n");
				fwrite($socket, "\r\n");
				fwrite($socket, "$data\r\n");
				fwrite($socket, "\r\n");
				$answer = '';
				while(!feof($socket)){
					$answer.= fgets($socket, 4096);
				}
				fclose($socket);
			}
		}
	}

	function DoIBlockAfterSave($arg1, $arg2 = false){
		$ELEMENT_ID = false;
		$IBLOCK_ID = false;
		$OFFERS_IBLOCK_ID = false;
		$OFFERS_PROPERTY_ID = false;
		if (CModule::IncludeModule('currency'))
			$strDefaultCurrency = CCurrency::GetBaseCurrency();

		//Check for catalog event
		if(is_array($arg2) && $arg2["PRODUCT_ID"] > 0){
			//Get iblock element
			$rsPriceElement = CIBlockElement::GetList(
				array(),
				array(
					"ID" => $arg2["PRODUCT_ID"],
				),
				false,
				false,
				array("ID", "IBLOCK_ID")
			);
			if($arPriceElement = $rsPriceElement->Fetch()){
				$arCatalog = CCatalog::GetByID($arPriceElement["IBLOCK_ID"]);
				if(is_array($arCatalog)){
					//Check if it is offers iblock
					if($arCatalog["OFFERS"] == "Y"){
						//Find product element
						$rsElement = CIBlockElement::GetProperty(
							$arPriceElement["IBLOCK_ID"],
							$arPriceElement["ID"],
							"sort",
							"asc",
							array("ID" => $arCatalog["SKU_PROPERTY_ID"])
						);
						$arElement = $rsElement->Fetch();
						if($arElement && $arElement["VALUE"] > 0)
						{
							$ELEMENT_ID = $arElement["VALUE"];
							$IBLOCK_ID = $arCatalog["PRODUCT_IBLOCK_ID"];
							$OFFERS_IBLOCK_ID = $arCatalog["IBLOCK_ID"];
							$OFFERS_PROPERTY_ID = $arCatalog["SKU_PROPERTY_ID"];
						}
					}
					//or iblock which has offers
					elseif($arCatalog["OFFERS_IBLOCK_ID"] > 0){
						$ELEMENT_ID = $arPriceElement["ID"];
						$IBLOCK_ID = $arPriceElement["IBLOCK_ID"];
						$OFFERS_IBLOCK_ID = $arCatalog["OFFERS_IBLOCK_ID"];
						$OFFERS_PROPERTY_ID = $arCatalog["OFFERS_PROPERTY_ID"];
					}
					//or it's regular catalog
					else{
						$ELEMENT_ID = $arPriceElement["ID"];
						$IBLOCK_ID = $arPriceElement["IBLOCK_ID"];
						$OFFERS_IBLOCK_ID = false;
						$OFFERS_PROPERTY_ID = false;
					}
				}
			}
		}
		//Check for iblock event
		elseif(is_array($arg1) && $arg1["ID"] > 0 && $arg1["IBLOCK_ID"] > 0){
			//Check if iblock has offers
			$arOffers = CIBlockPriceTools::GetOffersIBlock($arg1["IBLOCK_ID"]);
			if(is_array($arOffers)){
				$ELEMENT_ID = $arg1["ID"];
				$IBLOCK_ID = $arg1["IBLOCK_ID"];
				$OFFERS_IBLOCK_ID = $arOffers["OFFERS_IBLOCK_ID"];
				$OFFERS_PROPERTY_ID = $arOffers["OFFERS_PROPERTY_ID"];
			}
		}

		if($ELEMENT_ID){
			static $arPropCache = array();
			static $arPropArray=array();

			if(!array_key_exists($IBLOCK_ID, $arPropCache)){
				//Check for MINIMAL_PRICE property
				$rsProperty = CIBlockProperty::GetByID("MINIMUM_PRICE", $IBLOCK_ID);
				$arProperty = $rsProperty->Fetch();
				if($arProperty){
					$arPropCache[$IBLOCK_ID] = $arProperty["ID"];
					$arPropArray["MINIMUM_PRICE"]=$arProperty["ID"];
				}else{
					$arPropCache[$IBLOCK_ID] = false;
				}
				$rsProperty = CIBlockProperty::GetByID("IN_STOCK", $IBLOCK_ID);
				$arProperty = $rsProperty->Fetch();
				if($arProperty){
					$arPropCache[$IBLOCK_ID] = $arProperty["ID"];
					$arPropArray["IN_STOCK"]=$arProperty["ID"];
				}else{
					if(!$arPropCache[$IBLOCK_ID])
						$arPropCache[$IBLOCK_ID] = false;
				}
			}

			if($arPropCache[$IBLOCK_ID]){
				//Compose elements filter
				if($OFFERS_IBLOCK_ID){
					$rsOffers = CIBlockElement::GetList(
						array(),
						array(
							"IBLOCK_ID" => $OFFERS_IBLOCK_ID,
							"PROPERTY_".$OFFERS_PROPERTY_ID => $ELEMENT_ID,
							"ACTIVE" => "Y"
						),
						false,
						false,
						array("ID")
					);
					while($arOffer = $rsOffers->Fetch())
						$arProductID[] = $arOffer["ID"];

					if (!is_array($arProductID))
						$arProductID = array($ELEMENT_ID);
				}
				else
					$arProductID = array($ELEMENT_ID);

				if($arPropArray["MINIMUM_PRICE"]){
					$minPrice = false;
					$maxPrice = false;
					//Get prices
					$rsPrices = CPrice::GetList(
						array(),
						array(
							"PRODUCT_ID" => $arProductID,
						)
					);
					while($arPrice = $rsPrices->Fetch()){
						if (CModule::IncludeModule('currency') && $strDefaultCurrency != $arPrice['CURRENCY'])
							$arPrice["PRICE"] = CCurrencyRates::ConvertCurrency($arPrice["PRICE"], $arPrice["CURRENCY"], $strDefaultCurrency);

						$PRICE = $arPrice["PRICE"];

						if($minPrice === false || $minPrice > $PRICE)
							$minPrice = $PRICE;

						if($maxPrice === false || $maxPrice < $PRICE)
							$maxPrice = $PRICE;
					}

					//Save found minimal price into property
					if($minPrice !== false){
						CIBlockElement::SetPropertyValuesEx(
							$ELEMENT_ID,
							$IBLOCK_ID,
							array(
								"MINIMUM_PRICE" => $minPrice,
								"MAXIMUM_PRICE" => $maxPrice,
							)
						);
					}
				}
				if($arPropArray["IN_STOCK"]){
					$quantity=0;
					$rsQuantity = CCatalogProduct::GetList(
				        array("QUANTITY" => "DESC"),
				        array("ID" => $arProductID),
				        false,
				        false,
				        array("QUANTITY")
				    );
					while($arQuantity = $rsQuantity->Fetch()){
						if($arQuantity["QUANTITY"]>0)
							$quantity+=$arQuantity["QUANTITY"];
					}
					if($quantity>0){
						$rsPropStock = CIBlockPropertyEnum::GetList(Array("DEF"=>"DESC", "SORT"=>"ASC"), Array("IBLOCK_ID"=>$IBLOCK_ID, "CODE"=>"IN_STOCK"));
						if($arPropStock=$rsPropStock->Fetch()){
							$idProp=$arPropStock["ID"];
						}

						CIBlockElement::SetPropertyValuesEx(
							$ELEMENT_ID,
							$IBLOCK_ID,
							array(
								"IN_STOCK" => $idProp,
							)
						);
					}else{
						CIBlockElement::SetPropertyValuesEx(
							$ELEMENT_ID,
							$IBLOCK_ID,
							array(
								"IN_STOCK" => "",
							)
						);
					}
					if(class_exists('\Bitrix\Iblock\PropertyIndex\Manager')){
						\Bitrix\Iblock\PropertyIndex\Manager::updateElementIndex($IBLOCK_ID, $ELEMENT_ID);
					}
				}
			}
		}
	}

	function setStockProduct($ID, $arFields){
		//Get iblock element
		$rsPriceElement = CIBlockElement::GetList(
			array(),
			array(
				"ID" => $ID,
			),
			false,
			false,
			array("ID", "IBLOCK_ID")
		);
		if($arPriceElement = $rsPriceElement->Fetch()){
			$arCatalog = CCatalog::GetByID($arPriceElement["IBLOCK_ID"]);
			if(is_array($arCatalog)){
				//Check if it is offers iblock
				if($arCatalog["OFFERS"] == "Y"){
					//Find product element
					$rsElement = CIBlockElement::GetProperty(
						$arPriceElement["IBLOCK_ID"],
						$arPriceElement["ID"],
						"sort",
						"asc",
						array("ID" => $arCatalog["SKU_PROPERTY_ID"])
					);
					$arElement = $rsElement->Fetch();
					if($arElement && $arElement["VALUE"] > 0)
					{
						$ELEMENT_ID = $arElement["VALUE"];
						$IBLOCK_ID = $arCatalog["PRODUCT_IBLOCK_ID"];
						$OFFERS_IBLOCK_ID = $arCatalog["IBLOCK_ID"];
						$OFFERS_PROPERTY_ID = $arCatalog["SKU_PROPERTY_ID"];
					}
				}
				//or iblock which has offers
				elseif($arCatalog["OFFERS_IBLOCK_ID"] > 0){
					$ELEMENT_ID = $arPriceElement["ID"];
					$IBLOCK_ID = $arPriceElement["IBLOCK_ID"];
					$OFFERS_IBLOCK_ID = $arCatalog["OFFERS_IBLOCK_ID"];
					$OFFERS_PROPERTY_ID = $arCatalog["OFFERS_PROPERTY_ID"];
				}
				//or it's regular catalog
				else{
					$ELEMENT_ID = $arPriceElement["ID"];
					$IBLOCK_ID = $arPriceElement["IBLOCK_ID"];
					$OFFERS_IBLOCK_ID = false;
					$OFFERS_PROPERTY_ID = false;
				}
			}
		}
		if($ELEMENT_ID){
			static $arPropCache = array();
			static $arPropArray=array();

			if(!array_key_exists($IBLOCK_ID, $arPropCache)){
				//Check for IN_STOCK property
				$rsProperty = CIBlockProperty::GetByID("IN_STOCK", $IBLOCK_ID);
				$arProperty = $rsProperty->Fetch();
				if($arProperty){
					$arPropCache[$IBLOCK_ID] = $arProperty["ID"];
					$arPropArray["IN_STOCK"]=$arProperty["ID"];
				}else{
					if(!$arPropCache[$IBLOCK_ID])
						$arPropCache[$IBLOCK_ID] = false;
				}
			}
			if($arPropCache[$IBLOCK_ID]){
				//Compose elements filter
				if($OFFERS_IBLOCK_ID){
					$rsOffers = CIBlockElement::GetList(
						array(),
						array(
							"IBLOCK_ID" => $OFFERS_IBLOCK_ID,
							"PROPERTY_".$OFFERS_PROPERTY_ID => $ELEMENT_ID,
							"ACTIVE" => "Y"
						),
						false,
						false,
						array("ID")
					);
					while($arOffer = $rsOffers->Fetch())
						$arProductID[] = $arOffer["ID"];

					if (!is_array($arProductID))
						$arProductID = array($ELEMENT_ID);
				}
				else
					$arProductID = array($ELEMENT_ID);
				if($arPropArray["IN_STOCK"]){
					$quantity=0;
					$rsQuantity = CCatalogProduct::GetList(
				        array("QUANTITY" => "DESC"),
				        array("ID" => $arProductID),
				        false,
				        false,
				        array("QUANTITY")
				    );
					while($arQuantity = $rsQuantity->Fetch()){
						if($arQuantity["QUANTITY"]>0)
							$quantity+=$arQuantity["QUANTITY"];
					}
					if($quantity>0){
						$rsPropStock = CIBlockPropertyEnum::GetList(Array("DEF"=>"DESC", "SORT"=>"ASC"), Array("IBLOCK_ID"=>$IBLOCK_ID, "CODE"=>"IN_STOCK"));
						if($arPropStock=$rsPropStock->Fetch()){
							$idProp=$arPropStock["ID"];
						}

						CIBlockElement::SetPropertyValuesEx(
							$ELEMENT_ID,
							$IBLOCK_ID,
							array(
								"IN_STOCK" => $idProp,
							)
						);
					}else{
						CIBlockElement::SetPropertyValuesEx(
							$ELEMENT_ID,
							$IBLOCK_ID,
							array(
								"IN_STOCK" => "",
							)
						);
					}
					if(class_exists('\Bitrix\Iblock\PropertyIndex\Manager')){
						\Bitrix\Iblock\PropertyIndex\Manager::updateElementIndex($IBLOCK_ID, $ELEMENT_ID);
					}
				}
			}
		}
	}

	function getViewedProducts($userID=false, $siteID=false){
		global $TEMPLATE_OPTIONS, $STARTTIME;
		$arResult = array();
		$siteID = $siteID ? $siteID : SITE_ID;
		$localKey = 'OPTIMUS_VIEWED_ITEMS_'.$siteID;

		if($IsViewedTypeLocal = ($TEMPLATE_OPTIONS['VIEWED_TYPE']['CURRENT_VALUE'] === 'LOCAL')){
			$arViewed = (isset($_COOKIE[$localKey]) && strlen($_COOKIE[$localKey])) ? json_decode($_COOKIE[$localKey], true) : array();

			if($arViewed && is_array($arViewed)){
				$viewedDays = COption::GetOptionString("sale", "viewed_time", "5");
				$viewedCntMax = COption::GetOptionString("sale", "viewed_count", "10");
				$DIETIME = $STARTTIME - $viewedDays * 86400000;

				// delete old items
				foreach($arViewed as $ID => $arItem){
					if($arItem[0] < $DIETIME){
						unset($arViewed[$ID]);
						continue;
					}

					$arResult[$ID] = $arItem[0];
				}

				// sort by ACTIVE_FROM
				arsort($arResult);

				// make IDs array
				$arResult = array_keys($arResult);

				// only $viewedCntMax items
				$arResult = array_slice($arResult, 0, $viewedCntMax);
			}
		}
		else{
			\Bitrix\Main\Loader::includeModule('sale');
			\Bitrix\Main\Loader::includeModule('catalog');
			$userID = $userID ? $userID : (int)CSaleBasket::GetBasketUserID(false);

			$viewedIterator = \Bitrix\Catalog\CatalogViewedProductTable::GetList(array(
				'select' => array('PRODUCT_ID', 'ELEMENT_ID'),
				'filter' => array('=FUSER_ID' => $userID, '=SITE_ID' => $siteID),
				'order' => array('DATE_VISIT' => 'DESC'),
				'limit' => 8
			));
			while($viewedProduct = $viewedIterator->fetch()){
				$viewedProduct['ELEMENT_ID'] = (int)$viewedProduct['ELEMENT_ID'];
				$viewedProduct['PRODUCT_ID'] = (int)$viewedProduct['PRODUCT_ID'];
				$arResult[$viewedProduct['PRODUCT_ID']] = $viewedProduct['ELEMENT_ID'];
			}
		}

		return $arResult;
	}

	function setFooterTitle(){
		global $APPLICATION, $arSite;
		if(\Bitrix\Main\Config\Option::get("aspro.optimus", "HIDE_SITE_NAME_TITLE", "N")=="N"){
			if(!COptimus::IsMainPage()){
				if(strlen($APPLICATION->GetPageProperty('title')) > 1){
					$title = $APPLICATION->GetPageProperty('title');
				}
				else{
					$title = $APPLICATION->GetTitle();
				}
				$APPLICATION->SetPageProperty("title", $title.' - '.$arSite['SITE_NAME']);
			}
			else{
				if(strlen($APPLICATION->GetPageProperty('title')) > 1){
					$title =  $APPLICATION->GetPageProperty('title');
				}
				else{
					$title =  $APPLICATION->GetTitle();
				}
				if(!empty($title)){
					$APPLICATION->SetPageProperty("title", $title);
				}
				else{
					$APPLICATION->SetPageProperty("title", $arSite['SITE_NAME']);
				}
			}
		}
	}

	function getBasketItems($iblockID=0, $field="PRODUCT_ID"){
		$basket_items = $delay_items = $subscribe_items = $not_available_items = array();
		$arItems=array();
		if(CModule::IncludeModule("sale")){
			$arBasketItems=array();
			$dbRes = CSaleBasket::GetList(array("NAME" => "ASC", "ID" => "ASC"), array("FUSER_ID" => CSaleBasket::GetBasketUserID(), "LID" => SITE_ID, "ORDER_ID" => "NULL"), false, false, array("ID", "PRODUCT_ID", "DELAY", "SUBSCRIBE", "CAN_BUY", "TYPE", "SET_PARENT_ID"));
			while($item = $dbRes->Fetch()){
				$arBasketItems[] = $item;
			}

			global $compare_items;
			if(!is_array($compare_items)){
				$compare_items = array();
				$iblockID=((isset($iblockID) && $iblockID) ? $iblockID : \Bitrix\Main\Config\Option::get(self::moduleID, "CATALOG_IBLOCK_ID", COptimusCache::$arIBlocks[SITE_ID]['aspro_optimus_catalog']['aspro_optimus_catalog'][0], SITE_ID ));
				if($iblockID && isset($_SESSION["CATALOG_COMPARE_LIST"][$iblockID]["ITEMS"])){
					$compare_items = array_keys($_SESSION["CATALOG_COMPARE_LIST"][$iblockID]["ITEMS"]);
				}
			}
			if($arBasketItems){
				foreach($arBasketItems as $arBasketItem){
					if(CSaleBasketHelper::isSetItem($arBasketItem)) // set item
						continue;
					if($arBasketItem["DELAY"]=="N" && $arBasketItem["CAN_BUY"] == "Y" && $arBasketItem["SUBSCRIBE"] == "N"){
						$basket_items[] = $arBasketItem[$field];
					}
					elseif($arBasketItem["DELAY"]=="Y" && $arBasketItem["CAN_BUY"] == "Y" && $arBasketItem["SUBSCRIBE"] == "N"){
						$delay_items[] = $arBasketItem[$field];
					}
					elseif($arBasketItem["SUBSCRIBE"]=="Y"){
						$subscribe_items[] = $arBasketItem[$field];
					}else{
						$not_available_items[] = $arBasketItem[$field];
					}
				}
			}
			$arItems["BASKET"]=array_combine($basket_items, $basket_items);
			$arItems["DELAY"]=array_combine($delay_items, $delay_items);
			$arItems["SUBSCRIBE"]=array_combine($subscribe_items, $subscribe_items);
			$arItems["NOT_AVAILABLE"]=array_combine($not_available_items, $not_available_items);
			$arItems["COMPARE"]=array_combine($compare_items, $compare_items);

		}
		return $arItems;
	}

	function showFooterBasket(){
		Bitrix\Main\Page\Frame::getInstance()->startDynamicWithID("basketitems-block");

		$arItems=self::getBasketItems();

		if(CModule::IncludeModule("currency")){
			CJSCore::Init(array('currency'));
			$currencyFormat = CCurrencyLang::GetFormatDescription(CSaleLang::GetLangCurrency(SITE_ID));
		}
		?>
		<script type="text/javascript">
			<?if(is_array($currencyFormat)):?>
				function jsPriceFormat(_number){
					BX.Currency.setCurrencyFormat('<?=CSaleLang::GetLangCurrency(SITE_ID);?>', <? echo CUtil::PhpToJSObject($currencyFormat, false, true); ?>);
					return BX.Currency.currencyFormat(_number, '<?=CSaleLang::GetLangCurrency(SITE_ID);?>', true);
				}
			<?endif;?>
		</script>
		<script type="text/javascript">
			var arBasketAspro = <? echo CUtil::PhpToJSObject($arItems, false, true); ?>;
			$(document).ready(function(){
				<?if(is_array($arItems["BASKET"]) && !empty($arItems["BASKET"])):?>
					<?foreach( $arItems["BASKET"] as $key=>$item ){?>
						$('.to-cart[data-item=<?=$key?>]').hide();
						$('.counter_block[data-item=<?=$key?>]').hide();
						$('.in-cart[data-item=<?=$key?>]').show();
						$('.in-cart[data-item=<?=$key?>]').closest('.button_block').addClass('wide');
					<?}?>
				<?endif;?>
				<?if(is_array($arItems["DELAY"]) && !empty($arItems["DELAY"])):?>
					<?foreach( $arItems["DELAY"] as $key=>$item ){?>
						$('.wish_item.to[data-item=<?=$key?>]').hide();
						$('.wish_item.in[data-item=<?=$key?>]').show();
						if ($('.wish_item[data-item=<?=$key?>]').find(".value.added").length) {
							$('.wish_item[data-item=<?=$key?>]').addClass("added");
							$('.wish_item[data-item=<?=$key?>]').find(".value").hide();
							$('.wish_item[data-item=<?=$key?>]').find(".value.added").css('display','block');
						}
					<?}?>
				<?endif;?>
				<?if(is_array($arItems["SUBSCRIBE"]) && !empty($arItems["SUBSCRIBE"])):?>
					<?foreach( $arItems["SUBSCRIBE"] as $key=>$item ){?>
						$('.to-subscribe[data-item=<?=$key?>]').hide();
						$('.in-subscribe[data-item=<?=$key?>]').show();
					<?}?>
				<?endif;?>
				<?if(is_array($arItems["COMPARE"]) && !empty($arItems["COMPARE"])):?>
					<?foreach( $arItems["COMPARE"] as $key=>$item ){?>
						$('.compare_item.to[data-item=<?=$key?>]').hide();
						$('.compare_item.in[data-item=<?=$key?>]').show();
						if ($('.compare_item[data-item=<?=$key?>]').find(".value.added").length){
							$('.compare_item[data-item=<?=$key?>]').addClass("added");
							$('.compare_item[data-item=<?=$key?>]').find(".value").hide();
							$('.compare_item[data-item=<?=$key?>]').find(".value.added").css('display','block');
						}
					<?}?>
				<?endif;?>
			});
		</script>
		<?Bitrix\Main\Page\Frame::getInstance()->finishDynamicWithID("basketitems-block", "");
	}

	static function GetIBlockAllElementsFilter(&$arParams){
		$arFilter = array('IBLOCK_ID' => $arParams['IBLOCK_ID'], 'INCLUDE_SUBSECTIONS' => 'Y');
		if(isset($arParams['CHECK_DATES']) && $arParams['CHECK_DATES'] == 'Y'){
			$arFilter = array_merge($arFilter, array('ACTIVE' => 'Y', 'ACTIVE_DATE' => 'Y'));
		}
		if(isset($arParams['SHOW_DEACTIVATED']) && $arParams['SHOW_DEACTIVATED'] === 'N'){ // for catalog component
			$arFilter = array_merge($arFilter, array('ACTIVE' => 'Y'));
		}
		if(strlen($arParams['FILTER_NAME']) && (array)$GLOBALS[$arParams['FILTER_NAME']]){
			$arFilter = array_merge($arFilter, (array)$GLOBALS[$arParams['FILTER_NAME']]);
		}
		return $arFilter;
	}

	function prepareShopListArray($arShops){
		$arFormatShops=array();

		$arPlacemarks = array();

		if(is_array($arShops)){
			foreach($arShops as $i => $arShop){
				if(isset($arShop['IBLOCK_ID'])){
					$arShop['TITLE'] = ($arShop['FIELDS']['NAME'] ? $arShop['NAME'] : '');
					$imageID = (($arShop['FIELDS']['PREVIEW_PICTURE'] && $arShop["PREVIEW_PICTURE"]['ID']) ? $arShop["PREVIEW_PICTURE"]['ID'] : (($arShop['FIELD_CODE']['DETAIL_PICTURE'] && $arShop["DETAIL_PICTURE"]['ID']) ? $arShop["DETAIL_PICTURE"]['ID'] : false));
					$arShop['IMAGE'] = ($imageID ? CFile::ResizeImageGet($imageID, array('width' => 100, 'height' => 69), BX_RESIZE_IMAGE_EXACT) : '');
					$arShop['ADDRESS'] = $arShop['DISPLAY_PROPERTIES']['ADDRESS']['VALUE'];
					$arShop['ADDRESS'] = $arShop['TITLE'].((strlen($arShop['TITLE']) && strlen($arShop['ADDRESS'])) ? ', ' : '').$arShop['ADDRESS'];
					$arShop['PHONE'] = $arShop['DISPLAY_PROPERTIES']['PHONE']['VALUE'];
					$arShop['EMAIL'] = $arShop['DISPLAY_PROPERTIES']['EMAIL']['VALUE'];
					if($arShop['DISPLAY_PROPERTIES']['SCHEDULE']['VALUE']['TYPE'] == 'html'){
						$arShop['SCHEDULE'] = htmlspecialchars_decode($arShop['DISPLAY_PROPERTIES']['SCHEDULE']['~VALUE']['TEXT']);
					}
					else{
						$arShop['SCHEDULE'] = nl2br($arShop['DISPLAY_PROPERTIES']['SCHEDULE']['~VALUE']['TEXT']);
					}
					$arShop['URL'] = $arShop['DETAIL_PAGE_URL'];
					$arShop['METRO_PLACEMARK_HTML'] = '';
					if($arShop['METRO'] = $arShop['DISPLAY_PROPERTIES']['METRO']['VALUE']){
						if(!is_array($arShop['METRO'])){
							$arShop['METRO'] = array($arShop['METRO']);
						}
						foreach($arShop['METRO'] as $metro){
							$arShop['METRO_PLACEMARK_HTML'] .= '<div class="metro"><i></i>'.$metro.'</div>';
						}
					}
					$arShop['DESCRIPTION'] = $arShop['DETAIL_TEXT'];
					$arShop['GPS_S'] = false;
					$arShop['GPS_N'] = false;
					if($arStoreMap = explode(',', $arShop['DISPLAY_PROPERTIES']['MAP']['VALUE'])){
						$arShop['GPS_S'] = $arStoreMap[0];
						$arShop['GPS_N'] = $arStoreMap[1];
					}

					if($arShop['GPS_S'] && $arShop['GPS_N']){
						$mapLAT += $arShop['GPS_S'];
						$mapLON += $arShop['GPS_N'];
						$str_phones = '';
						if($arShop['PHONE'])
						{
							$str_phones .= '<div class="phone">';
							foreach($arShop['PHONE'] as $phone)
							{
								$str_phones .= '<br><a rel="nofollow" href="tel:'.str_replace(array(' ', ',', '-', '(', ')'), '', $phone).'">'.$phone.'</a>';
							}
							$str_phones .= '</div>';
						}
						$arPlacemarks[] = array(
							"ID" => $arShop["ID"],
							"LAT" => $arShop['GPS_S'],
							"LON" => $arShop['GPS_N'],
							"TEXT" => $arShop["TITLE"],
							"HTML" => '<div class="title">'.(strlen($arShop["URL"]) ? '<a href="'.$arShop["URL"].'">' : '').$arShop["ADDRESS"].(strlen($arShop["URL"]) ? '</a>' : '').'</div><div class="info-content">'.($arShop['METRO'] ? $arShop['METRO_PLACEMARK_HTML'] : '').(strlen($arShop['SCHEDULE']) ? '<div class="schedule">'.$arShop['SCHEDULE'].'</div>' : '').$str_phones.(strlen($arShop['EMAIL']) ? '<div class="email"><a rel="nofollow" href="mailto:'.$arShop['EMAIL'].'">'.$arShop['EMAIL'].'</a></div>' : '').'</div>'.(strlen($arShop['URL']) ? '<a rel="nofollow" class="button" href="'.$arShop["URL"].'"><span>'.GetMessage('DETAIL').'</span></a>' : '')
						);
					}
				}
				else{
					$str_phones = '';
					if($arShop['PHONE'])
					{
						$arShop['PHONE'] = explode(",", $arShop['PHONE']);
						$str_phones .= '<div class="phone">';
						foreach($arShop['PHONE'] as $phone)
						{
							$str_phones .= '<br><a rel="nofollow" href="tel:'.str_replace(array(' ', ',', '-', '(', ')'), '', $phone).'">'.$phone.'</a>';
						}
						$str_phones .= '</div>';
					}
					if($arShop['GPS_S'] && $arShop['GPS_N']){
						$mapLAT += $arShop['GPS_N'];
						$mapLON += $arShop['GPS_S'];
						$arPlacemarks[] = array(
							"ID" => $arShop["ID"],
							"LON" => $arShop['GPS_S'],
							"LAT" => $arShop['GPS_N'],
							"TEXT" => $arShop["TITLE"],
							"HTML" => '<div class="title">'.(strlen($arShop["URL"]) ? '<a href="'.$arShop["URL"].'">' : '').$arShop["ADDRESS"].(strlen($arShop["URL"]) ? '</a>' : '').'</div><div class="info-content">'.($arShop['METRO'] ? $arShop['METRO_PLACEMARK_HTML'] : '').(strlen($arShop['SCHEDULE']) ? '<div class="schedule">'.$arShop['SCHEDULE'].'</div>' : '').$str_phones.(strlen($arShop['EMAIL']) ? '<div class="email"><a rel="nofollow" href="mailto:'.$arShop['EMAIL'].'">'.$arShop['EMAIL'].'</a></div>' : '').'</div>'.(strlen($arShop['URL']) ? '<a rel="nofollow" class="button" href="'.$arShop["URL"].'"><span>'.GetMessage('DETAIL').'</span></a>' : '')
						);
					}
				}
				$arShops[$i] = $arShop;
			}
		}
		$arFormatShops["SHOPS"]=$arShops;
		$arFormatShops["PLACEMARKS"]=$arPlacemarks;
		$arFormatShops["POINTS"]=array(
			"LAT" => $mapLAT,
			"LON" => $mapLON,
		);

		return $arFormatShops;
	}

	function prepareShopDetailArray($arShop, $arParams){
		$mapLAT = $mapLON = 0;
		$arPlacemarks = array();
		$arPhotos = array();
		$arFormatShops=array();

		if(is_array($arShop)){
			if(isset($arShop['IBLOCK_ID'])){
				$arShop['LIST_URL'] = $arShop['LIST_PAGE_URL'];
				$arShop['TITLE'] = (in_array('NAME', $arParams['FIELD_CODE']) ? $arShop['NAME'] : '');
				$arShop['ADDRESS'] = $arShop['DISPLAY_PROPERTIES']['ADDRESS']['VALUE'];
				$arShop['ADDRESS'] = $arShop['TITLE'].((strlen($arShop['TITLE']) && strlen($arShop['ADDRESS'])) ? ', ' : '').$arShop['ADDRESS'];
				$arShop['PHONE'] = $arShop['DISPLAY_PROPERTIES']['PHONE']['VALUE'];
				$arShop['EMAIL'] = $arShop['DISPLAY_PROPERTIES']['EMAIL']['VALUE'];
				if($arShop['DISPLAY_PROPERTIES']['SCHEDULE']['VALUE']['TYPE'] == 'html'){
					$arShop['SCHEDULE'] = htmlspecialchars_decode($arShop['DISPLAY_PROPERTIES']['SCHEDULE']['~VALUE']['TEXT']);
				}
				else{
					$arShop['SCHEDULE'] = nl2br($arShop['DISPLAY_PROPERTIES']['SCHEDULE']['~VALUE']['TEXT']);
				}
				$arShop['URL'] = $arShop['DETAIL_PAGE_URL'];
				$arShop['METRO_PLACEMARK_HTML'] = '';
				if($arShop['METRO'] = $arShop['DISPLAY_PROPERTIES']['METRO']['VALUE']){
					if(!is_array($arShop['METRO'])){
						$arShop['METRO'] = array($arShop['METRO']);
					}
					foreach($arShop['METRO'] as $metro){
						$arShop['METRO_PLACEMARK_HTML'] .= '<div class="metro"><i></i>'.$metro.'</div>';
					}
				}
				$arShop['GPS_S'] = false;
				$arShop['GPS_N'] = false;
				if($arStoreMap = explode(',', $arShop['DISPLAY_PROPERTIES']['MAP']['VALUE'])){
					$arShop['GPS_S'] = $arStoreMap[0];
					$arShop['GPS_N'] = $arStoreMap[1];
				}

				if($arShop['GPS_S'] && $arShop['GPS_N']){
					$mapLAT += $arShop['GPS_S'];
					$mapLON += $arShop['GPS_N'];
					$str_phones = '';
					if($arShop['PHONE'])
					{
						$str_phones .= '<div class="phone">';
						foreach($arShop['PHONE'] as $phone)
						{
							$str_phones .= '<br><a rel="nofollow" href="tel:'.str_replace(array(' ', ',', '-', '(', ')'), '', $phone).'">'.$phone.'</a>';
						}
						$str_phones .= '</div>';
					}
					$arPlacemarks[] = array(
						"ID" => $arShop["ID"],
						"LAT" => $arShop['GPS_S'],
						"LON" => $arShop['GPS_N'],
						"TEXT" => $arShop["TITLE"],
						"HTML" => '<div class="title">'.(strlen($arShop["URL"]) ? '<a href="'.$arShop["URL"].'">' : '').$arShop["ADDRESS"].(strlen($arShop["URL"]) ? '</a>' : '').'</div><div class="info-content">'.($arShop['METRO'] ? $arShop['METRO_PLACEMARK_HTML'] : '').(strlen($arShop['SCHEDULE']) ? '<div class="schedule">'.$arShop['SCHEDULE'].'</div>' : '').$str_phones.(strlen($arShop['EMAIL']) ? '<div class="email"><a rel="nofollow" href="mailto:'.$arShop['EMAIL'].'">'.$arShop['EMAIL'].'</a></div>' : '').'</div>'.(strlen($arShop['URL']) ? '<a rel="nofollow" class="button" href="'.$arShop["URL"].'"><span>'.GetMessage('DETAIL').'</span></a>' : '')
					);
				}
			}
			else{
				$arShop["TITLE"] = htmlspecialchars_decode($arShop["TITLE"]);
				$arShop["ADDRESS"] = htmlspecialchars_decode($arShop["ADDRESS"]);
				$arShop["ADDRESS"] = (strlen($arShop["TITLE"]) ? $arShop["TITLE"].', ' : '').$arShop["ADDRESS"];
				$arShop["DESCRIPTION"] = htmlspecialchars_decode($arShop['DESCRIPTION']);
				$arShop['SCHEDULE'] = htmlspecialchars_decode($arShop['SCHEDULE']);

				$str_phones = '';
				if($arShop['PHONE'])
				{
					$arShop['PHONE'] = explode(",", $arShop['PHONE']);
					$str_phones .= '<div class="phone">';
					foreach($arShop['PHONE'] as $phone)
					{
						$str_phones .= '<br><a rel="nofollow" href="tel:'.str_replace(array(' ', ',', '-', '(', ')'), '', $phone).'">'.$phone.'</a>';
					}
					$str_phones .= '</div>';
				}
				if($arShop['GPS_S'] && $arShop['GPS_N']){
					$mapLAT += $arShop['GPS_N'];
					$mapLON += $arShop['GPS_S'];
					$arPlacemarks[] = array(
						"ID" => $arShop["ID"],
						"LON" => $arShop['GPS_S'],
						"LAT" => $arShop['GPS_N'],
						"TEXT" => $arShop["TITLE"],
						"HTML" => '<div class="title">'.(strlen($arShop["URL"]) ? '<a href="'.$arShop["URL"].'">' : '').$arShop["ADDRESS"].(strlen($arShop["URL"]) ? '</a>' : '').'</div><div class="info-content">'.($arShop['METRO'] ? $arShop['METRO_PLACEMARK_HTML'] : '').(strlen($arShop['SCHEDULE']) ? '<div class="schedule">'.$arShop['SCHEDULE'].'</div>' : '').$str_phones.(strlen($arShop['EMAIL']) ? '<div class="email"><a rel="nofollow" href="mailto:'.$arShop['EMAIL'].'">'.$arShop['EMAIL'].'</a></div>' : '').'</div>'.(strlen($arShop['URL']) ? '<a rel="nofollow" class="button" href="'.$arShop["URL"].'"><span>'.GetMessage('DETAIL').'</span></a>' : '')
					);
				}
			}
		}
		$arFormatShops["SHOP"]=$arShop;
		$arFormatShops["PLACEMARKS"]=$arPlacemarks;
		$arFormatShops["POINTS"]=array(
			"LAT" => $mapLAT,
			"LON" => $mapLON,
		);

		return $arFormatShops;

	}

	function drawShopsList($arShops, $arParams, $showMap="Y"){
		global $APPLICATION;
		$mapLAT = $mapLON = 0;
		$arPlacemarks = array();

		if(is_array($arShops)){
			foreach($arShops as $i => $arShop){
				if(isset($arShop['IBLOCK_ID'])){
					$arShop['TITLE'] = (in_array('NAME', $arParams['FIELD_CODE']) ? $arShop['NAME'] : '');

					$imageID = ((in_array('PREVIEW_PICTURE', $arParams['FIELD_CODE']) && $arShop["PREVIEW_PICTURE"]['ID']) ? $arShop["PREVIEW_PICTURE"]['ID'] : ((in_array('DETAIL_PICTURE', $arParams['FIELD_CODE']) && $arShop["DETAIL_PICTURE"]['ID']) ? $arShop["DETAIL_PICTURE"]['ID'] : false));
					$arShop['IMAGE'] = ($imageID ? CFile::ResizeImageGet($imageID, array('width' => 100, 'height' => 69), BX_RESIZE_IMAGE_EXACT) : '');
					$arShop['ADDRESS'] = $arShop['DISPLAY_PROPERTIES']['ADDRESS']['VALUE'];
					$arShop['ADDRESS'] = $arShop['TITLE'].((strlen($arShop['TITLE']) && strlen($arShop['ADDRESS'])) ? ', ' : '').$arShop['ADDRESS'];
					$arShop['PHONE'] =  $arShop['DISPLAY_PROPERTIES']['PHONE']['VALUE'];
					$arShop['EMAIL'] = $arShop['DISPLAY_PROPERTIES']['EMAIL']['VALUE'];

					if(strToLower($arShop['DISPLAY_PROPERTIES']['SCHEDULE']['VALUE']['TYPE']) == 'html'){
						$arShop['SCHEDULE'] = htmlspecialchars_decode($arShop['DISPLAY_PROPERTIES']['SCHEDULE']['~VALUE']['TEXT']);
					}
					else{
						$arShop['SCHEDULE'] = nl2br($arShop['DISPLAY_PROPERTIES']['SCHEDULE']['~VALUE']['TEXT']);
					}
					$arShop['URL'] = $arShop['DETAIL_PAGE_URL'];
					$arShop['METRO_PLACEMARK_HTML'] = '';
					if($arShop['METRO'] = $arShop['DISPLAY_PROPERTIES']['METRO']['VALUE']){
						if(!is_array($arShop['METRO'])){
							$arShop['METRO'] = array($arShop['METRO']);
						}
						foreach($arShop['METRO'] as $metro){
							$arShop['METRO_PLACEMARK_HTML'] .= '<div class="metro"><i></i>'.$metro.'</div>';
						}
					}
					$arShop['DESCRIPTION'] = $arShop['DETAIL_TEXT'];
					$arShop['GPS_S'] = false;
					$arShop['GPS_N'] = false;
					if($arStoreMap = explode(',', $arShop['DISPLAY_PROPERTIES']['MAP']['VALUE'])){
						$arShop['GPS_S'] = $arStoreMap[0];
						$arShop['GPS_N'] = $arStoreMap[1];
					}

					if($arShop['GPS_S'] && $arShop['GPS_N']){
						$mapLAT += $arShop['GPS_S'];
						$mapLON += $arShop['GPS_N'];
						$str_phones = '';
						if($arShop['PHONE'])
						{
							foreach($arShop['PHONE'] as $phone)
							{
								$str_phones .= '<div class="phone"><a rel="nofollow" href="tel:'.str_replace(array(' ', ',', '-', '(', ')'), '', $phone).'">'.$phone.'</a></div>';
							}
						}
						$arPlacemarks[] = array(
							"ID" => $arShop["ID"],
							"LAT" => $arShop['GPS_S'],
							"LON" => $arShop['GPS_N'],
							"TEXT" => $arShop["TITLE"],
							"HTML" => '<div class="title">'.(strlen($arShop["URL"]) ? '<a href="'.$arShop["URL"].'">' : '').$arShop["ADDRESS"].(strlen($arShop["URL"]) ? '</a>' : '').'</div><div class="info-content">'.($arShop['METRO'] ? $arShop['METRO_PLACEMARK_HTML'] : '').(strlen($arShop['SCHEDULE']) ? '<div class="schedule">'.$arShop['SCHEDULE'].'</div>' : '').$str_phones.(strlen($arShop['EMAIL']) ? '<div class="email"><a rel="nofollow" href="mailto:'.$arShop['EMAIL'].'">'.$arShop['EMAIL'].'</a></div>' : '').'</div>'.(strlen($arShop['URL']) ? '<a rel="nofollow" class="button" href="'.$arShop["URL"].'"><span>'.GetMessage('DETAIL').'</span></a>' : '')
						);
					}
				}
				else{
					$str_phones = '';
					if($arShop['PHONE'])
					{
						$arShop['PHONE'] = explode(",", $arShop['PHONE']);
						foreach($arShop['PHONE'] as $phone)
						{
							$str_phones .= '<div class="phone"><a rel="nofollow" href="tel:'.str_replace(array(' ', ',', '-', '(', ')'), '', $phone).'">'.$phone.'</a></div>';
						}
					}
					if($arShop['GPS_S'] && $arShop['GPS_N']){
						$mapLAT += $arShop['GPS_N'];
						$mapLON += $arShop['GPS_S'];
						$arPlacemarks[] = array(
							"ID" => $arShop["ID"],
							"LON" => $arShop['GPS_S'],
							"LAT" => $arShop['GPS_N'],
							"TEXT" => $arShop["TITLE"],
							"HTML" => '<div class="title">'.(strlen($arShop["URL"]) ? '<a href="'.$arShop["URL"].'">' : '').$arShop["ADDRESS"].(strlen($arShop["URL"]) ? '</a>' : '').'</div><div class="info-content">'.($arShop['METRO'] ? $arShop['METRO_PLACEMARK_HTML'] : '').(strlen($arShop['SCHEDULE']) ? '<div class="schedule">'.$arShop['SCHEDULE'].'</div>' : '').$str_phones.(strlen($arShop['EMAIL']) ? '<div class="email"><a rel="nofollow" href="mailto:'.$arShop['EMAIL'].'">'.$arShop['EMAIL'].'</a></div>' : '').'</div>'.(strlen($arShop['URL']) ? '<a rel="nofollow" class="button" href="'.$arShop["URL"].'"><span>'.GetMessage('DETAIL').'</span></a>' : '')
						);
					}
				}
				$arShops[$i] = $arShop;
			}
			?>
			<?if($arShops):?>
				<?if(abs($mapLAT) > 0 && abs($mapLON) > 0 && $showMap=="Y"):?>
					<?
					$mapLAT = floatval($mapLAT / count($arShops));
					$mapLON = floatval($mapLON / count($arShops));
					?>
					<div class="contacts_map">
						<?if($arParams["MAP_TYPE"] != "0"):?>
							<?$APPLICATION->IncludeComponent(
								"bitrix:map.google.view",
								"map",
								array(
									"INIT_MAP_TYPE" => "ROADMAP",
									"MAP_DATA" => serialize(array("google_lat" => $mapLAT, "google_lon" => $mapLON, "google_scale" => 15, "PLACEMARKS" => $arPlacemarks)),
									"MAP_WIDTH" => "100%",
									"MAP_HEIGHT" => "400",
									"CONTROLS" => array(
									),
									"OPTIONS" => array(
										0 => "ENABLE_DBLCLICK_ZOOM",
										1 => "ENABLE_DRAGGING",
									),
									"MAP_ID" => "",
									"ZOOM_BLOCK" => array(
										"POSITION" => "right center",
									),
									"API_KEY" => $arParams["GOOGLE_API_KEY"],
									"COMPOSITE_FRAME_MODE" => "A",
									"COMPOSITE_FRAME_TYPE" => "AUTO"
								),
								false, array("HIDE_ICONS" =>"Y")
							);?>
						<?else:?>
							<?$APPLICATION->IncludeComponent(
								"bitrix:map.yandex.view",
								"",
								array(
									"INIT_MAP_TYPE" => "ROADMAP",
									"MAP_DATA" => serialize(array("yandex_lat" => $mapLAT, "yandex_lon" => $mapLON, "yandex_scale" => 4, "PLACEMARKS" => $arPlacemarks)),
									"MAP_WIDTH" => "100%",
									"MAP_HEIGHT" => "400",
									"CONTROLS" => array(
										0 => "ZOOM",
										1 => "SMALLZOOM",
										3 => "TYPECONTROL",
										4 => "SCALELINE",
									),
									"OPTIONS" => array(
										0 => "ENABLE_DBLCLICK_ZOOM",
										1 => "ENABLE_DRAGGING",
									),
									"MAP_ID" => "",
									"ZOOM_BLOCK" => array(
										"POSITION" => "right center",
									),
									"COMPONENT_TEMPLATE" => "map",
									"API_KEY" => $arParams["GOOGLE_API_KEY"],
									"COMPOSITE_FRAME_MODE" => "A",
									"COMPOSITE_FRAME_TYPE" => "AUTO"
								),
								false, array("HIDE_ICONS" =>"Y")
							);?>
						<?endif;?>
					</div>
				<?endif;?>
				<div class="wrapper_inner">
					<div class="shops list">
						<div class="items">
							<?foreach($arShops as $arShop):?>
								<div class="item <?=(strlen($arShop["IMAGE"]["src"]) ? '' : 'wi')?>" data-ID="<?=$arShop['ID']?>">
									<div class="image">
										<?if(strlen($arShop["IMAGE"]["src"])):?>
											<?if(strlen($arShop['URL'])):?>
												<a href="<?=$arShop['URL']?>"><img src="<?=$arShop["IMAGE"]["src"]?>" alt="<?=$arShop["ADDRESS"]?>" title="<?=$arShop["ADDRESS"]?>" /></a>
											<?else:?>
												<img src="<?=$arShop["IMAGE"]["src"]?>" alt="<?=$arShop["ADDRESS"]?>" title="<?=$arShop["ADDRESS"]?>" />
											<?endif;?>
										<?endif;?>
									</div>
									<div class="rubber">
										<div class="title_metro">
											<?if(strlen($arShop["ADDRESS"])):?>
												<?if(strlen($arShop['URL'])):?>
													<a href="<?=$arShop['URL']?>"><div class="title"><?=$arShop["ADDRESS"]?></div></a>
												<?else:?>
													<div class="title"><?=$arShop["ADDRESS"]?></div>
												<?endif;?>
											<?endif;?>
											<?if($arShop["METRO"]):?>
												<?foreach($arShop['METRO'] as $metro):?>
													<div class="metro"><i></i><?=$metro?></div>
												<?endforeach;?>
											<?endif;?>
										</div>
										<div class="schedule_phone_email">
											<div class="schedule"><?=$arShop["SCHEDULE"]?></div>
											<div class="phone_email">
												<?if($arShop["PHONE"]):?>
													<?foreach($arShop["PHONE"] as $phone):?>
														<div class="phone"><a rel="nofollow" href="tel:<?=str_replace(array(' ', ',', '-', '(', ')'), '', $phone);?>"><?=$phone;?></a></div>
													<?endforeach;?>
												<?endif;?>
												<?if(strlen($arShop["EMAIL"])):?>
													<div class="email"><a rel="nofollow" href="mailto:<?=$arShop["EMAIL"]?>"><?=$arShop["EMAIL"]?></a></div>
												<?endif;?>
											</div>
										</div>
									</div>
								</div>
							<?endforeach;?>
						</div>
					</div>
				</div>
				<div class="clearboth"></div>
			<?endif;?>
			<?
		}
		else{
			LocalRedirect(SITE_DIR.'contacts/');
		}
	}

	function drawShopDetail($arShop, $arParams, $showMap="Y"){
		global $APPLICATION;
		$mapLAT = $mapLON = 0;
		$arPlacemarks = array();
		$arPhotos = array();

		if(is_array($arShop)){
			if(isset($arShop['IBLOCK_ID'])){
				$arShop['LIST_URL'] = $arShop['LIST_PAGE_URL'];
				$arShop['TITLE'] = (in_array('NAME', $arParams['FIELD_CODE']) ? $arShop['NAME'] : '');
				$arShop['ADDRESS'] = $arShop['DISPLAY_PROPERTIES']['ADDRESS']['VALUE'];
				$arShop['ADDRESS'] = $arShop['TITLE'].((strlen($arShop['TITLE']) && strlen($arShop['ADDRESS'])) ? ', ' : '').$arShop['ADDRESS'];
				$arShop['PHONE'] = $arShop['DISPLAY_PROPERTIES']['PHONE']['VALUE'];
				$arShop['EMAIL'] = $arShop['DISPLAY_PROPERTIES']['EMAIL']['VALUE'];
				if(strToLower($arShop['DISPLAY_PROPERTIES']['SCHEDULE']['VALUE']['TYPE']) == 'html'){
					$arShop['SCHEDULE'] = htmlspecialchars_decode($arShop['DISPLAY_PROPERTIES']['SCHEDULE']['~VALUE']['TEXT']);
				}
				else{
					$arShop['SCHEDULE'] = nl2br($arShop['DISPLAY_PROPERTIES']['SCHEDULE']['~VALUE']['TEXT']);
				}
				$arShop['URL'] = $arShop['DETAIL_PAGE_URL'];
				$arShop['METRO_PLACEMARK_HTML'] = '';
				if($arShop['METRO'] = $arShop['DISPLAY_PROPERTIES']['METRO']['VALUE']){
					if(!is_array($arShop['METRO'])){
						$arShop['METRO'] = array($arShop['METRO']);
					}
					foreach($arShop['METRO'] as $metro){
						$arShop['METRO_PLACEMARK_HTML'] .= '<div class="metro"><i></i>'.$metro.'</div>';
					}
				}
				$arShop['DESCRIPTION'] = $arShop['DETAIL_TEXT'];
				$imageID = ((in_array('DETAIL_PICTURE', $arParams['FIELD_CODE']) && $arShop["DETAIL_PICTURE"]['ID']) ? $arShop["DETAIL_PICTURE"]['ID'] : false);
				if($imageID){
					$arShop['IMAGE'] = CFile::ResizeImageGet($imageID, array('width' => 210, 'height' => 143), BX_RESIZE_IMAGE_EXACT);
					$arPhotos[] = array(
						'ID' => $arShop["DETAIL_PICTURE"]['ID'],
						'ORIGINAL' => ($arShop["DETAIL_PICTURE"]['SRC'] ? $arShop["DETAIL_PICTURE"]['SRC'] : $arShop['IMAGE']),
						'PREVIEW' => $arShop['IMAGE'],
						'DESCRIPTION' => (strlen($arShop["DETAIL_PICTURE"]['DESCRIPTION']) ? $arShop["DETAIL_PICTURE"]['DESCRIPTION'] : $arShop['ADDRESS']),
					);
				}
				if(is_array($arShop['DISPLAY_PROPERTIES']['MORE_PHOTOS']['VALUE'])) {
					foreach($arShop['DISPLAY_PROPERTIES']['MORE_PHOTOS']['VALUE'] as $i => $photoID){
						$arPhotos[] = array(
							'ID' => $photoID,
							'ORIGINAL' => CFile::GetPath($photoID),
							'PREVIEW' => CFile::ResizeImageGet($photoID, array('width' => 210, 'height' => 143), BX_RESIZE_IMAGE_EXACT),
							'DESCRIPTION' => $arShop['DISPLAY_PROPERTIES']['MORE_PHOTOS']['DESCRIPTION'][$i],
						);
					}
				}

				$arShop['GPS_S'] = false;
				$arShop['GPS_N'] = false;
				if($arStoreMap = explode(',', $arShop['DISPLAY_PROPERTIES']['MAP']['VALUE'])){
					$arShop['GPS_S'] = $arStoreMap[0];
					$arShop['GPS_N'] = $arStoreMap[1];
				}

				if($arShop['GPS_S'] && $arShop['GPS_N']){
					$mapLAT += $arShop['GPS_S'];
					$mapLON += $arShop['GPS_N'];
					$str_phones = '';
					if($arShop['PHONE'])
					{
						foreach($arShop['PHONE'] as $phone)
						{
							$str_phones .= '<div class="phone"><a rel="nofollow" href="tel:'.str_replace(array(' ', ',', '-', '(', ')'), '', $phone).'">'.$phone.'</a></div>';
						}
					}
					$arPlacemarks[] = array(
						"ID" => $arShop["ID"],
						"LAT" => $arShop['GPS_S'],
						"LON" => $arShop['GPS_N'],
						"TEXT" => $arShop["TITLE"],
						"HTML" => '<div class="title">'.(strlen($arShop["URL"]) ? '<a href="'.$arShop["URL"].'">' : '').$arShop["ADDRESS"].(strlen($arShop["URL"]) ? '</a>' : '').'</div><div class="info-content">'.($arShop['METRO'] ? $arShop['METRO_PLACEMARK_HTML'] : '').(strlen($arShop['SCHEDULE']) ? '<div class="schedule">'.$arShop['SCHEDULE'].'</div>' : '').$str_phones.(strlen($arShop['EMAIL']) ? '<div class="email"><a rel="nofollow" href="mailto:'.$arShop['EMAIL'].'">'.$arShop['EMAIL'].'</a></div>' : '').'</div>'.(strlen($arShop['URL']) ? '<a rel="nofollow" class="button" href="'.$arShop["URL"].'"><span>'.GetMessage('DETAIL').'</span></a>' : '')
					);
				}
			}
			else{
				$arShop["TITLE"] = htmlspecialchars_decode($arShop["TITLE"]);
				$arShop["ADDRESS"] = htmlspecialchars_decode($arShop["ADDRESS"]);
				$arShop["ADDRESS"] = (strlen($arShop["TITLE"]) ? $arShop["TITLE"].', ' : '').$arShop["ADDRESS"];
				$arShop["DESCRIPTION"] = htmlspecialchars_decode($arShop['DESCRIPTION']);
				$arShop['SCHEDULE'] = htmlspecialchars_decode($arShop['SCHEDULE']);
				if($arShop["IMAGE_ID"]  && $arShop["IMAGE_ID"] != "null"){
					$arShop['IMAGE'] = CFile::ResizeImageGet($arShop["IMAGE_ID"], array('width' => 210, 'height' => 143), BX_RESIZE_IMAGE_EXACT);
					$arPhotos[] = array(
						'ID' => $arShop["PREVIEW_PICTURE"]['ID'],
						'ORIGINAL' => CFile::GetPath($arShop["IMAGE_ID"]),
						'PREVIEW' => $arShop['IMAGE'],
						'DESCRIPTION' => (strlen($arShop["PREVIEW_PICTURE"]['DESCRIPTION']) ? $arShop["PREVIEW_PICTURE"]['DESCRIPTION'] : $arShop["ADDRESS"]),
					);
				}
				if(is_array($arShop['MORE_PHOTOS'])) {
					foreach($arShop['MORE_PHOTOS'] as $photoID){
						$arPhotos[] = array(
							'ID' => $photoID,
							'ORIGINAL' => CFile::GetPath($photoID),
							'PREVIEW' => CFile::ResizeImageGet($photoID, array('width' => 210, 'height' => 143), BX_RESIZE_IMAGE_EXACT),
							'DESCRIPTION' => $arShop["ADDRESS"],
						);
					}
				}

				$str_phones = '';
				if($arShop['PHONE'])
				{
					$arShop['PHONE'] = explode(",", $arShop['PHONE']);
					foreach($arShop['PHONE'] as $phone)
					{
						$str_phones .= '<div class="phone"><a rel="nofollow" href="tel:'.str_replace(array(' ', ',', '-', '(', ')'), '', $phone).'">'.$phone.'</a></div>';
					}
				}
				if($arShop['GPS_S'] && $arShop['GPS_N']){
					$mapLAT += $arShop['GPS_N'];
					$mapLON += $arShop['GPS_S'];
					$arPlacemarks[] = array(
						"ID" => $arShop["ID"],
						"LON" => $arShop['GPS_S'],
						"LAT" => $arShop['GPS_N'],
						"TEXT" => $arShop["TITLE"],
						"HTML" => '<div class="title">'.(strlen($arShop["URL"]) ? '<a href="'.$arShop["URL"].'">' : '').$arShop["ADDRESS"].(strlen($arShop["URL"]) ? '</a>' : '').'</div><div class="info-content">'.($arShop['METRO'] ? $arShop['METRO_PLACEMARK_HTML'] : '').(strlen($arShop['SCHEDULE']) ? '<div class="schedule">'.$arShop['SCHEDULE'].'</div>' : '').$str_phones.(strlen($arShop['EMAIL']) ? '<div class="email"><a rel="nofollow" href="mailto:'.$arShop['EMAIL'].'">'.$arShop['EMAIL'].'</a></div>' : '').'</div>'.(strlen($arShop['URL']) ? '<a rel="nofollow" class="button" href="'.$arShop["URL"].'"><span>'.GetMessage('DETAIL').'</span></a>' : '')
					);
				}
			}
			?>
			<?if(abs($mapLAT) > 0 && abs($mapLON) > 0 && $showMap=="Y"):?>
				<div class="contacts_map">
					<?if($arParams["MAP_TYPE"] != "0"):?>
						<?$APPLICATION->IncludeComponent(
							"bitrix:map.google.view",
							"map",
							array(
								"INIT_MAP_TYPE" => "ROADMAP",
								"MAP_DATA" => serialize(array("google_lat" => $mapLAT, "google_lon" => $mapLON, "google_scale" => 16, "PLACEMARKS" => $arPlacemarks)),
								"MAP_WIDTH" => "100%",
								"MAP_HEIGHT" => "400",
								"CONTROLS" => array(
								),
								"OPTIONS" => array(
									0 => "ENABLE_DBLCLICK_ZOOM",
									1 => "ENABLE_DRAGGING",
								),
								"MAP_ID" => "",
								"ZOOM_BLOCK" => array(
									"POSITION" => "right center",
								),
								"COMPONENT_TEMPLATE" => "map",
								"API_KEY" => $arParams["GOOGLE_API_KEY"],
								"COMPOSITE_FRAME_MODE" => "A",
								"COMPOSITE_FRAME_TYPE" => "AUTO"
							),
							false, array("HIDE_ICONS" =>"Y")
						);?>
					<?else:?>
						<?$APPLICATION->IncludeComponent(
							"bitrix:map.yandex.view",
							"",
							array(
								"INIT_MAP_TYPE" => "ROADMAP",
								"MAP_DATA" => serialize(array("yandex_lat" => $mapLAT, "yandex_lon" => $mapLON, "yandex_scale" => 17, "PLACEMARKS" => $arPlacemarks)),
								"MAP_WIDTH" => "100%",
								"MAP_HEIGHT" => "400",
								"CONTROLS" => array(
									0 => "ZOOM",
									1 => "SMALLZOOM",
									3 => "TYPECONTROL",
									4 => "SCALELINE",
								),
								"OPTIONS" => array(
									0 => "ENABLE_DBLCLICK_ZOOM",
									1 => "ENABLE_DRAGGING",
								),
								"MAP_ID" => "",
								"ZOOM_BLOCK" => array(
									"POSITION" => "right center",
								),
								"COMPONENT_TEMPLATE" => "map",
								"API_KEY" => $arParams["GOOGLE_API_KEY"],
								"COMPOSITE_FRAME_MODE" => "A",
								"COMPOSITE_FRAME_TYPE" => "AUTO"
							),
							false, array("HIDE_ICONS" =>"Y")
						);?>
					<?endif;?>
				</div>
			<?endif;?>
			<div class="wrapper_inner shop detail">
				<div class="contacts_left">
					<div class="store_description">
						<?if(strlen($arShop['ADDRESS'])):?>
							<div class="store_property">
								<div class="title"><?=GetMessage('ADDRESS')?></div>
								<div class="value"><?=$arShop['ADDRESS']?></div>
							</div>
						<?endif;?>
						<?if($arShop['METRO']):?>
							<div class="store_property metro">
								<div class="title"><?=GetMessage('METRO')?></div>
								<?foreach($arShop['METRO'] as $metro):?>
									<div class="value"><i></i><?=$metro?></div>
								<?endforeach;?>
							</div>
						<?endif;?>
						<?if($arShop['PHONE']):?>
							<div class="store_property">
								<div class="title"><?=GetMessage('PHONE')?></div>
								<div class="value">
									<?foreach($arShop["PHONE"] as $phone):?>
										<div class="phone"><a rel="nofollow" href="tel:<?=str_replace(array(' ', ',', '-', '(', ')'), '', $phone);?>"><?=$phone;?></a></div>
									<?endforeach;?>
								</div>
							</div>
						<?endif;?>
						<?if(strlen($arShop['EMAIL'])):?>
							<div class="store_property">
								<div class="title">Email</div>
								<div class="value"><a rel="nofollow" href="mailto:<?=$arShop['EMAIL']?>"><?=$arShop['EMAIL']?></a></div>
							</div>
						<?endif;?>
						<?if(strlen($arShop['SCHEDULE'])):?>
							<div class="store_property">
								<div class="title"><?=GetMessage('SCHEDULE')?></div>
								<div class="value"><?=$arShop['SCHEDULE']?></div>
							</div>
						<?endif;?>
					</div>
				</div>
				<div class="contacts_right">
					<?if($arShop['DESCRIPTION']):?>
						<blockquote><?=$arShop['DESCRIPTION']?></blockquote>
					<?endif;?>
					<?if($arPhotos):?>
						<!-- noindex-->
						<?foreach($arPhotos as $arPhoto):?>
							<a class="fancy" data-fancybox-group="item_slider" title="<?=$arPhoto['DESCRIPTION']?>" href="<?=$arPhoto['ORIGINAL']?>"><img title="<?=$arPhoto['DESCRIPTION']?>" alt="<?=$arPhoto['DESCRIPTION']?>" src="<?=$arPhoto['PREVIEW']['src']?>"></a>
						<?endforeach;?>
						<!-- /noindex-->
					<?endif;?>
				</div>
				<div class="clearboth"></div>
				<!-- noindex--><a rel="nofollow" href="<?=$arShop['LIST_URL']?>" class="back"><?=GetMessage('BACK_STORE_LIST')?></a><!-- /noindex-->
			</div>
			<div class="clearboth"></div>
			<?
		}
		else{
			LocalRedirect(SITE_DIR.'contacts/');
		}
	}

}
?>46   12145|/aspro.optimus/install/index.php|9efd9e6<?
global $MESS;
$strPath2Lang = str_replace("\\", "/", __FILE__);
$strPath2Lang = substr($strPath2Lang, 0, strlen($strPath2Lang)-strlen("/install/index.php"));
include(GetLangFileName($strPath2Lang."/lang/", "/install/index.php"));

class aspro_optimus extends CModule {
	const solutionName	= 'optimus';
	const partnerName = 'aspro';
	const moduleClass = 'COptimus';

	var $MODULE_ID = "aspro.optimus";
	var $MODULE_VERSION;
	var $MODULE_VERSION_DATE;
	var $MODULE_NAME;
	var $MODULE_DESCRIPTION;
	var $MODULE_CSS;
	var $MODULE_GROUP_RIGHTS = "Y";

	function aspro_optimus(){
		$arModuleVersion = array();

		$path = str_replace("\\", "/", __FILE__);
		$path = substr($path, 0, strlen($path) - strlen("/index.php"));
		include($path."/version.php");

		$this->MODULE_VERSION = $arModuleVersion["VERSION"];
		$this->MODULE_VERSION_DATE = $arModuleVersion["VERSION_DATE"];
		$this->MODULE_NAME = GetMessage("SCOM_INSTALL_NAME_OPTIMUS"); 
		$this->MODULE_DESCRIPTION = GetMessage("SCOM_INSTALL_DESCRIPTION_OPTIMUS");
		$this->PARTNER_NAME = GetMessage("SPER_PARTNER");
		$this->PARTNER_URI = GetMessage("PARTNER_URI");
	}
	
	function checkValid(){
		return true;
	}

	function InstallDB($install_wizard = true){
		global $DB, $DBType, $APPLICATION;

		if(preg_match ( '/.bitrixlabs.ru/' , $_SERVER["HTTP_HOST"])){
			RegisterModuleDependences("main", "OnBeforeProlog", "aspro.optimus", "COptimus", "correctInstall");
		}

		RegisterModule("aspro.optimus"); 
		RegisterModuleDependences("main", "OnBeforeProlog", "aspro.optimus", "COptimus", "ShowPanel");
		
		return true;
	}

	function UnInstallDB($arParams = array()){
		global $DB, $DBType, $APPLICATION;
		
		UnRegisterModule("aspro.optimus");
		
		return true;
	}

	function InstallEvents(){
		RegisterModuleDependences("iblock", "OnAfterIBlockAdd", "aspro.optimus", "COptimusCache", "ClearTagIBlock");
		RegisterModuleDependences("iblock", "OnAfterIBlockUpdate", "aspro.optimus", "COptimusCache", "ClearTagIBlock");
		RegisterModuleDependences("iblock", "OnBeforeIBlockDelete", "aspro.optimus", "COptimusCache", "ClearTagIBlockBeforeDelete");
		RegisterModuleDependences("iblock", "OnAfterIBlockElementAdd", "aspro.optimus", "COptimusCache", "ClearTagIBlockElement");
		RegisterModuleDependences("iblock", "OnAfterIBlockElementUpdate", "aspro.optimus", "COptimusCache", "ClearTagIBlockElement");
		RegisterModuleDependences("iblock", "OnAfterIBlockElementDelete", "aspro.optimus", "COptimusCache", "ClearTagIBlockElement");
		RegisterModuleDependences("iblock", "OnAfterIBlockSectionAdd", "aspro.optimus", "COptimusCache", "ClearTagIBlockSection");
		RegisterModuleDependences("iblock", "OnAfterIBlockSectionUpdate", "aspro.optimus", "COptimusCache", "ClearTagIBlockSection");
		RegisterModuleDependences("iblock", "OnBeforeIBlockSectionDelete", "aspro.optimus", "COptimusCache", "ClearTagIBlockSectionBeforeDelete");
		RegisterModuleDependences("main", "OnAfterUserUpdate", "aspro.optimus", "COptimusCache", "ClearTagByUser");

		RegisterModuleDependences("main", "OnBeforeUserRegister", "aspro.optimus", "COptimus", "OnBeforeUserUpdateHandler");
		RegisterModuleDependences("main", "OnBeforeUserAdd", "aspro.optimus", "COptimus", "OnBeforeUserUpdateHandler");
		RegisterModuleDependences("main", "OnBeforeUserUpdate", "aspro.optimus", "COptimus","OnBeforeUserUpdateHandler");
		RegisterModuleDependences("main", "OnEndBufferContent", "aspro.optimus", "COptimus", "InsertCounters");
		RegisterModuleDependences("sale", "OnSaleComponentOrderOneStepComplete", "aspro.optimus", "COptimus", "clearBasketCacheHandler");
		RegisterModuleDependences("sale", "OnBasketAdd", "aspro.optimus", "COptimus", "clearBasketCacheHandler");
		RegisterModuleDependences("iblock", "OnAfterIBlockElementUpdate", "aspro.optimus", "COptimus", "DoIBlockAfterSave");
		RegisterModuleDependences("iblock", "OnAfterIBlockElementAdd", "aspro.optimus", "COptimus", "DoIBlockAfterSave");
		RegisterModuleDependences("catalog", "OnPriceAdd", "aspro.optimus", "COptimus", "DoIBlockAfterSave");
		RegisterModuleDependences("catalog", "OnPriceUpdate", "aspro.optimus", "COptimus", "DoIBlockAfterSave");
		RegisterModuleDependences("catalog", "OnProductUpdate", "aspro.optimus", "COptimus", "setStockProduct");
		RegisterModuleDependences("catalog", "OnProductAdd", "aspro.optimus", "COptimus", "setStockProduct");

		RegisterModuleDependences("sender", "onPresetTemplateList", "aspro.optimus", "\Aspro\Solution\CAsproMarketing", "senderTemplateList");

		if(class_exists('\Bitrix\Main\EventManager')){
			$eventManager = \Bitrix\Main\EventManager::getInstance();
			$eventManager->registerEventHandler('sale', 'OnSaleOrderSaved', 'aspro.optimus', 'COptimus', 'BeforeSendEvent', 10);
		}
		
		return true;
	}

	function UnInstallEvents(){
		UnRegisterModuleDependences("iblock", "OnAfterIBlockAdd", "aspro.optimus", "COptimusCache", "ClearTagIBlock");
		UnRegisterModuleDependences("iblock", "OnAfterIBlockUpdate", "aspro.optimus", "COptimusCache", "ClearTagIBlock");
		UnRegisterModuleDependences("iblock", "OnBeforeIBlockDelete", "aspro.optimus", "COptimusCache", "ClearTagIBlockBeforeDelete");
		UnRegisterModuleDependences("iblock", "OnAfterIBlockElementAdd", "aspro.optimus", "COptimusCache", "ClearTagIBlockElement");
		UnRegisterModuleDependences("iblock", "OnAfterIBlockElementUpdate", "aspro.optimus", "COptimusCache", "ClearTagIBlockElement");
		UnRegisterModuleDependences("iblock", "OnAfterIBlockElementDelete", "aspro.optimus", "COptimusCache", "ClearTagIBlockElement");
		UnRegisterModuleDependences("iblock", "OnAfterIBlockSectionAdd", "aspro.optimus", "COptimusCache", "ClearTagIBlockSection");
		UnRegisterModuleDependences("iblock", "OnAfterIBlockSectionUpdate", "aspro.optimus", "COptimusCache", "ClearTagIBlockSection");
		UnRegisterModuleDependences("iblock", "OnBeforeIBlockSectionDelete", "aspro.optimus", "COptimusCache", "ClearTagIBlockSectionBeforeDelete");
		UnRegisterModuleDependences("main", "OnAfterUserUpdate", "aspro.optimus", "COptimusCache", "ClearTagByUser");

		UnRegisterModuleDependences("main", "OnBeforeUserRegister", "aspro.optimus", "COptimus", "OnBeforeUserUpdateHandler");
		UnRegisterModuleDependences("main", "OnBeforeUserAdd", "aspro.optimus", "COptimus", "OnBeforeUserUpdateHandler");
		UnRegisterModuleDependences("main", "OnBeforeUserUpdate", "aspro.optimus", "COptimus","OnBeforeUserUpdateHandler");
		UnRegisterModuleDependences("main", "OnBeforeProlog", "aspro.optimus", "COptimus", "ShowPanel");
		UnRegisterModuleDependences("main", "OnEndBufferContent", "aspro.optimus", "COptimus", "InsertCounters");
		UnRegisterModuleDependences("sale", "OnSaleComponentOrderOneStepComplete", "aspro.optimus", "COptimus", "clearBasketCacheHandler");
		UnRegisterModuleDependences("sale", "OnBasketAdd", "aspro.optimus", "COptimus", "clearBasketCacheHandler");
		UnRegisterModuleDependences("iblock", "OnAfterIBlockElementUpdate", "aspro.optimus", "COptimus", "DoIBlockAfterSave");
		UnRegisterModuleDependences("iblock", "OnAfterIBlockElementAdd", "aspro.optimus", "COptimus", "DoIBlockAfterSave");
		UnRegisterModuleDependences("catalog", "OnPriceAdd", "aspro.optimus", "COptimus", "DoIBlockAfterSave");
		UnRegisterModuleDependences("catalog", "OnPriceUpdate", "aspro.optimus", "COptimus", "DoIBlockAfterSave");
		UnRegisterModuleDependences("catalog", "OnProductUpdate", "aspro.optimus", "COptimus", "setStockProduct");
		UnRegisterModuleDependences("catalog", "OnProductAdd", "aspro.optimus", "COptimus", "setStockProduct");

		UnRegisterModuleDependences("sender", "onPresetTemplateList", "aspro.optimus", "\Aspro\Solution\CAsproMarketing", "senderTemplateList");

		if(class_exists('\Bitrix\Main\EventManager')){
			$eventManager = \Bitrix\Main\EventManager::getInstance();
			$eventManager->unregisterEventHandler('sale', 'OnSaleOrderSaved', 'aspro.optimus', 'COptimus', 'BeforeSendEvent', 10);
		}
		
		return true;
	}
	
	function removeDirectory($dir){
		if($objs = glob($dir."/*")){
			foreach($objs as $obj){
				if(is_dir($obj)){
					COptimus::removeDirectory($obj);
				}
				else{
					if(!unlink($obj)){
						if(chmod($obj, 0777)){
							unlink($obj);
						}
					}
				}
			}
		}
		if(!rmdir($dir)){
			if(chmod($dir, 0777)){
				rmdir($dir);
			}
		}
	}

	function InstallFiles(){
		CopyDirFiles(__DIR__.'/admin/', $_SERVER['DOCUMENT_ROOT'].'/bitrix/admin', true);
		CopyDirFiles(__DIR__.'/css/', $_SERVER['DOCUMENT_ROOT'].'/bitrix/css/'.self::partnerName.'.'.self::solutionName, true, true);
		CopyDirFiles(__DIR__.'/js/', $_SERVER['DOCUMENT_ROOT'].'/bitrix/js/'.self::partnerName.'.'.self::solutionName, true, true);
		CopyDirFiles(__DIR__.'/images/', $_SERVER['DOCUMENT_ROOT'].'/bitrix/images/'.self::partnerName.'.'.self::solutionName, true, true);
		CopyDirFiles(__DIR__.'/components/', $_SERVER['DOCUMENT_ROOT'].'/bitrix/components', true, true);
		CopyDirFiles(__DIR__.'/wizards/', $_SERVER['DOCUMENT_ROOT'].'/bitrix/wizards', true, true);

		$this->InstallGadget();

		if(preg_match('/.bitrixlabs.ru/', $_SERVER["HTTP_HOST"])){
			@set_time_limit(0);
			require_once($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/fileman/include.php");
			CFileMan::DeleteEx(array('s1', '/bitrix/modules/'.$this->MODULE_ID.'/install/wizards'));
			CFileMan::DeleteEx(array('s1', '/bitrix/modules/'.$this->MODULE_ID.'/install/gadgets'));
		}

		return true;
	}

	function InstallPublic(){
	}

	function UnInstallFiles(){
		DeleteDirFiles(__DIR__.'/admin/', $_SERVER['DOCUMENT_ROOT'].'/bitrix/admin');
		DeleteDirFilesEx('/bitrix/css/'.self::partnerName.'.'.self::solutionName.'/');
		DeleteDirFilesEx('/bitrix/js/'.self::partnerName.'.'.self::solutionName.'/');
		DeleteDirFilesEx('/bitrix/images/'.self::partnerName.'.'.self::solutionName.'/');
		DeleteDirFilesEx('/bitrix/wizards/'.self::partnerName.'/'.self::solutionName.'/');

		$this->UnInstallGadget();

		return true;
	}

	function InstallGadget(){
		CopyDirFiles(__DIR__.'/gadgets/', $_SERVER['DOCUMENT_ROOT'].'/bitrix/gadgets/', true, true);

		$gadget_id = strtoupper(self::solutionName);
		$gdid = $gadget_id."@".rand();
		if(class_exists('CUserOptions')){
			$arUserOptions = CUserOptions::GetOption('intranet', '~gadgets_admin_index', false, false);
			if(is_array($arUserOptions) && isset($arUserOptions[0])){
				foreach($arUserOptions[0]['GADGETS'] as $tempid => $tempgadget){
					$p = strpos($tempid, '@');
					$gadget_id_tmp = ($p === false ? $tempid : substr($tempid, 0, $p));

					if($gadget_id_tmp == $gadget_id){
						return false;
					}
					if($tempgadget['COLUMN'] == 0){
						++$arUserOptions[0]['GADGETS'][$tempid]['ROW'];
					}
				}
				$arUserOptions[0]['GADGETS'][$gdid] = array('COLUMN' => 0, 'ROW' => 0);
				CUserOptions::SetOption('intranet', '~gadgets_admin_index', $arUserOptions, false, false);
			}
		}

		return true;
	}

	function UnInstallGadget(){
		$gadget_id = strtoupper(self::solutionName);
		if(class_exists('CUserOptions')){
			$arUserOptions = CUserOptions::GetOption('intranet', '~gadgets_admin_index', false, false);
			if(is_array($arUserOptions) && isset($arUserOptions[0])){
				foreach($arUserOptions[0]['GADGETS'] as $tempid => $tempgadget){
					$p = strpos($tempid, '@');
					$gadget_id_tmp = ($p === false ? $tempid : substr($tempid, 0, $p));

					if($gadget_id_tmp == $gadget_id){
						unset($arUserOptions[0]['GADGETS'][$tempid]);
					}
				}
				CUserOptions::SetOption('intranet', '~gadgets_admin_index', $arUserOptions, false, false);
			}
		}

		DeleteDirFilesEx('/bitrix/gadgets/'.self::partnerName.'/'.self::solutionName.'/');

		return true;
	}

	function DoInstall(){
		global $APPLICATION, $step;

		$this->InstallFiles();
		$this->InstallDB(false);
		$this->InstallEvents();
		$this->InstallPublic();

		$APPLICATION->IncludeAdminFile(GetMessage("SCOM_INSTALL_TITLE"), $_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/aspro.optimus/install/step.php");
	}

	function DoUninstall(){
		global $APPLICATION, $step;

		$this->UnInstallDB();
		$this->UnInstallFiles();
		$this->UnInstallEvents();
		$APPLICATION->IncludeAdminFile(GetMessage("SCOM_UNINSTALL_TITLE"), $_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/aspro.optimus/install/unstep.php");
	}
}
?>44   723|/aspro.optimus/install/step.php|c7817d72<?if(!check_bitrix_sessid()) return;?>
<div class="adm-info-message-wrap adm-info-message-green">
	<div class="adm-info-message">
		<div class="adm-info-message-title"><?=GetMessage("OPTIMUS_MOD_INST_OK")?></div>
		<div class="adm-info-message-icon"></div>
	</div>
</div>
<?//=CAdminMessage::ShowNote(GetMessage("MOD_INST_OK"));?>
<form action="/bitrix/admin/wizard_list.php?lang=ru">
	<input type="submit" name="" value="<?=GetMessage("OPEN_WIZARDS_LIST")?>" style="margin-right: 10px;">
	<input type="button" value="<?=GetMessage("INSTALL_OPTIMUS_SITE")?>" style="margin-right: 30px;" onclick="document.location.href='/bitrix/admin/wizard_install.php?lang=ru&wizardName=aspro:optimus&<?=bitrix_sessid_get()?>';"> 
<form>
47   103|/aspro.optimus/install/version.php|3e93c2cb<?
$arModuleVersion = array(
	"VERSION" => "1.0.7",
	"VERSION_DATE" => "2016-11-25 00:00:00"
);
?>68   2501|/aspro.optimus/install/gadgets/aspro/optimus/index.php|5b72565a<?
if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED !== true) die();

$moduleID = strtolower($arGadget['GADGET_ID']);
$jsFunctionName = 'AsproGadget_GetDateSupport_'.str_replace('@', '', $arGadget['ID']);
$GLOBALS['APPLICATION']->SetAdditionalCSS('/bitrix/gadgets/aspro/'.$moduleID.'/styles.css');
?>
<div class="aspro-gadgets">
    <div class="aspro-gadgets-waiter"></div>
    <div class="<?=$moduleID;?>-aspro-gadgets-shield"></div>
    <div class="aspro-gadgets-title" title="<?=$arGadget['NAME']?>"><?=$arGadget['NAME']?></div>
    <div class="aspro-gadgets-content-layout"></div>
    <script type="text/javascript">
    if(typeof <?=$jsFunctionName?> !== 'function'){
        function <?=$jsFunctionName?>() {
            var obGadget = BX('t<?=$arGadget['ID']?>');
            if(obGadget){
                var obAsproGadget = BX.findChildren(obGadget, {'className':'aspro-gadgets'}, true);
                var obAsproGadgetLayout = BX.findChildren(obGadget, {'className':'aspro-gadgets-content-layout'}, true);
            }
            BX.ajax({
                url: '<?='/bitrix/gadgets/aspro/'.$moduleID.'/ajax.php'?>',
                method: 'POST',
                data: {'mid': '<?=$moduleID?>'},
                dataType: 'html',
                timeout: 30,
                async: true,
                processData: true,
                scriptsRunFirst: true,
                emulateOnload: true,
                start: true,
                cache: false,
                onsuccess: function(data){
                    if(obGadget){
                        if(obAsproGadget.length){
                            BX.addClass(obAsproGadget[0], 'aspro-gadgets-ready');
                        }
                        if(obAsproGadgetLayout.length){
                            BX.adjust(obAsproGadgetLayout[0], {html: data});
                        }
                    }
                },
                onfailure: function(){
                    if(obGadget){
                        if(obAsproGadget.length){
                            BX.addClass(obAsproGadget[0], 'aspro-gadgets-ready');
                        }
                        if(obAsproGadgetLayout.length){
                            BX.adjust(obAsproGadgetLayout[0], {html: '<div class="aspro-gadgets-title2 pink"><?=GetMessage('GD_ASPRO_ERROR')?></div>'});
                        }
                    }
                }
            });
        }
    }

    <?=$jsFunctionName?>();
    </script>
</div>67   3780|/aspro.optimus/install/gadgets/aspro/optimus/ajax.php|eeb1dace<?
require_once($_SERVER['DOCUMENT_ROOT'].'/bitrix/modules/main/include/prolog_admin_before.php');

if($_REQUEST && isset($_REQUEST['mid'])){
	if(strlen($moduleID = htmlspecialcharsbx($_REQUEST['mid']))){
		require_once($_SERVER['DOCUMENT_ROOT'].'/bitrix/modules/main/classes/general/update_client_partner.php');
		__IncludeLang(dirname(__FILE__).'/lang/'.LANGUAGE_ID.'/index.php');

		if(!function_exists('_vail_')){
			function _vail_($count, $arStr, $bStrOnly = false) {
				$ost10 = $count % 10;
				$ost100 = $count % 100;
				if(!$count || !$ost10 || ($ost100 > 10 && $ost100 < 20))
					return (!$bStrOnly ? intval($count).' ' : '').$arStr[2];
				if($ost10 == 1)
					return (!$bStrOnly ? intval($count).' ' : '').$arStr[0];
				if($ost10 > 1 && $ost10 < 5)
					return (!$bStrOnly ? intval($count).' ' : '').$arStr[1];
				return (!$bStrOnly ? intval($count).' ' : '').$arStr[2];
			}
		}

		$arInfo = array();
		$arRequestedModules = array('aspro.'.$moduleID);
		$arUpdateList = CUpdateClientPartner::GetUpdatesList($errorMessage, LANG, 'Y', $arRequestedModules, array('fullmoduleinfo' => 'Y'));
		if($arUpdateList && isset($arUpdateList['MODULE'])){
			foreach($arUpdateList['MODULE'] as $arModule){
				if($arModule['@']['ID'] === 'aspro.'.$moduleID){
					$arInfo = $arModule['@'];
					break;
				}
			}
		}

		if(!$arInfo && $arUpdateList && isset($arUpdateList['ERROR']) && isset($arUpdateList['CLIENT'])){
			if($arUpdateList['ERROR'][0]['@']['TYPE'] === 'SYS_ERROR_AB_ACTIVE'){
				$arInfo = $arUpdateList['CLIENT'][0]['@'];
			}
		}
		?>
		<?if($arInfo):?>
			<?
			if($dateSupportTo = strtotime($arInfo['DATE_TO'])){
				$dateSupportTo += 86399;
				$bSupportActive = $dateSupportTo >= time();
				$bSupportLess14 = $bSupportActive && ($dateSupportTo - 1209599 < time());
				$bSupportExpired = $dateSupportTo < time();
			}
			?>
			<?if($bSupportLess14 || !$bSupportActive):?>
				<?if($bSupportActive):?>
					<?$cnt = floor(($dateSupportTo - time()) / 86400)?>
					<div class="aspro-gadgets-title2 pink"><?=GetMessage('GD_ASPRO_EXPIRED_SOON', array('#DAYS_STR#' => ($cnt ? GetMessage('GD_ASPRO_THROUGH')._vail_($cnt, array(GetMessage('GD_ASPRO_DAYS0'), GetMessage('GD_ASPRO_DAYS1'), GetMessage('GD_ASPRO_DAYS2'))) : GetMessage('GD_ASPRO_DAYS0_TODAY'))))?></div>
				<?else:?>
					<div class="aspro-gadgets-title2 pink"><?=GetMessage('GD_ASPRO_EXPIRED')?></div>
				<?endif;?>
				<div class="aspro-gadget-bottom">
					<a class="aspro-gadgets-button" href="/bitrix/admin/aspro.<?=$moduleID?>_mc.php">
						<div class="aspro-gadgets-button-lamp"></div>
						<div class="aspro-gadgets-button-text"><?=GetMessage('GD_ASPRO_GET_MORE')?></div>
					</a>
					<a class="aspro-gadgets-button aspro-gadgets-button-buy" href="https://aspro.ru/support_marketplace/" target="_blank">
						<div class="aspro-gadgets-button-text"><?=GetMessage('GD_ASPRO_BUY')?></div>
					</a>
				</div>
			<?else:?>
				<div class="aspro-gadgets-title2"><?=GetMessage('GD_ASPRO_DATE_SUPPORT_TO', array('#DATE#' => date('d.m.Y', $dateSupportTo)))?></div>
				<div class="aspro-gadget-bottom">
					<a class="aspro-gadgets-button" href="/bitrix/admin/aspro.<?=$moduleID?>_mc.php">
						<div class="aspro-gadgets-button-lamp"></div>
						<div class="aspro-gadgets-button-text"><?=GetMessage('GD_ASPRO_GET_MORE')?></div>
					</a>
					<span class="aspro-gadgets-desc"><?=GetMessage('GD_ASPRO_DESCRIPTION')?></span>
				</div>
			<?endif;?>
		<?else:?>
			<?if($arUpdateList && isset($arUpdateList['ERROR'])):?>
				<div class="aspro-gadgets-title2 pink"><?=$arUpdateList['ERROR'][0]['#'].' ('.$arUpdateList['ERROR'][0]['@']['TYPE'].')'?></div>
			<?else:?>
				<div class="aspro-gadgets-title2 pink"><?=GetMessage('GD_ASPRO_ERROR')?></div>
			<?endif;?>
		<?endif;?>
		<?
	}
}
?>78   15426|/aspro.optimus/install/wizards/aspro/optimus/lang/ru/wizard.php|d9fa5f35<?
$MESS["WIZ_TEMPLATE_NAME"] = " ";
$MESS["WIZ_TEMPLATE_DESCRIPTION"] = "           :Optimus.";
$MESS["wiz_structure_data"] = "   -";
$MESS["wiz_restructure_data"] = "   -";
$MESS["wiz_rewrite_index"] = "  . <br><br>         .<br>      .<br><br> <b>!</b>         .";
$MESS["WIZ_COMPANY_LOGO"] = " (  193 X 43)";
$MESS["WIZ_COMPANY_NAME"] = "   ";
$MESS["WIZ_COMPANY_NAME_DEF"] = ": Optimus -  -";
$MESS["WIZ_COMPANY_COPY"] = " :";
$MESS["WIZ_COMPANY_COPY_DEF"] = ": Optimus -  -";
$MESS["WIZ_COMPANY_COPY_NOTE"] = "<b>".date("Y")." &copy; </b>    ";
$MESS["WIZ_COMPANY_TELEPHONE"] = "   ";
$MESS["WIZ_COMPANY_TELEPHONE2"] = "2   ";
$MESS["WIZ_COMPANY_TELEPHONE_DEF"] = "+7 000 000-00-00";
$MESS["WIZ_COMPANY_TELEPHONE_DEF2"] = "+7 000 000-00-00";
$MESS["WIZ_COMPANY_EMAIL"] = " E-mail:";
$MESS["WIZ_COMPANY_EMAIL_DEF"] = "info@".$_SERVER["SERVER_NAME"];
$MESS["WIZ_COMPANY_SKYPE"] = " Skype:";
$MESS["WIZ_COMPANY_SKYPE_DEF"] = "your.skype.ru";
$MESS["WIZ_COMPANY_ADDRESS"] = " :";
$MESS["WIZ_COMPANY_ADDRESS_DEF"] = "., .  19";
$MESS["WIZ_COMPANY_SCHEDULE"] = " :";
$MESS["WIZ_COMPANY_SCHEDULE_DEF"] = ". &ndash; .:  9:00  18:00";
$MESS["WIZ_SHOP_VK"] = "     :";
$MESS["WIZ_SHOP_VK_DEF"] = "http://vk.ru/aspro74";
$MESS["WIZ_SHOP_FACEBOOK"] = "     Facebook:";
$MESS["WIZ_SHOP_FACEBOOK_DEF"] = "http://www.facebook.com/aspro74";
$MESS["WIZ_SHOP_TWITTER"] = "     Twitter:";
$MESS["WIZ_SHOP_TWITTER_DEF"] = "http://twitter.com/aspro_ru";
$MESS["WIZ_SHOP_ODNOKLASSNIKI"] = "     :";
$MESS["WIZ_SHOP_ODNOKLASSNIKI_DEF"] = "http://www.odnoklassniki.ru/";
$MESS["WIZ_SHOP_YOUTUBE"] = "     Youtube:";
$MESS["WIZ_SHOP_YOUTUBE_DEF"] = "http://youtube.com/";
$MESS["WIZ_SHOP_GOOGLE"] = "     Google+:";
$MESS["WIZ_SHOP_GOOGLE_DEF"] = "http://google.com/";
$MESS["WIZ_SHOP_MAILRU"] = "       Mail.ru:";
$MESS["WIZ_SHOP_MAILRU_DEF"] = "http://www.my.mail.ru/";
$MESS["WIZ_SHOP_INSTAGRAM"] = "     Instagram:";
$MESS["WIZ_SHOP_INSTAGRAM_DEF"] = "http://instagram.com/";
$MESS["WIZ_SHOP_LIVEJOURNAL"] = "     Live Journal:";
$MESS["WIZ_SHOP_LIVEJOURNAL_DEF"] = "http://www.livejournal.com/";
$MESS["WIZ_REWRITE_INDEX_DESC"] = "  ";
$MESS["wiz_site_name"] = "-";
$MESS["WIZ_SHOP_LOCALIZATION"] = "  ";
$MESS["WIZ_SHOP_LOCALIZATION_RUSSIA"] = "";
$MESS["WIZ_SHOP_LOCALIZATION_UKRAINE"] = "";
$MESS["WIZ_SHOP_LOCALIZATION_KAZAKHSTAN"] = "";
$MESS["WIZ_SHOP_LOCATION"] = " ";
$MESS["WIZ_SHOP_LOCATION_DEF"] = "";
$MESS["WIZ_SHOP_LOCATION_DEF_UA"] = "";
$MESS["WIZ_SHOP_OF_NAME"] = " ";
$MESS["WIZ_SHOP_OF_NAME_DEF"] = " \"-\"";
$MESS["WIZ_SHOP_OF_NAME_DEF_UA"] = " \"-\"";
$MESS["WIZ_SHOP_BANK_TITLE"] = " ";
$MESS["WIZ_SHOP_BANK"] = "";
$MESS["WIZ_SHOP_BANK_DEF"] = " \" \", . ";
$MESS["WIZ_SHOP_BANKREKV_DEF"] = " 044525225";
$MESS["WIZ_SHOP_EMAIL"] = "Email     ";
$MESS["WIZ_SHOP_ADR"] = " ";
$MESS["WIZ_SHOP_ADR_DEF"] = ".  19";
$MESS["WIZ_SHOP_ADR_DEF_UA"] = "";
$MESS["WIZ_SHOP_BANKREKV"] = " ";
$MESS["WIZ_SHOP_INN"] = "";
$MESS["WIZ_SHOP_KPP"] = "";
$MESS["WIZ_SHOP_NS"] = " ";
$MESS["WIZ_SHOP_KS"] = " ";
$MESS["WIZ_SHOP_STAMP"] = " ";
$MESS["WIZ_SHOP_RECV_UA"] = " ";
$MESS["WIZ_SHOP_RECV_UA_DESC"] = "        (, , ,  )";
$MESS["WIZ_SHOP_COMPANY_UA"] = "     -";
$MESS["WIZ_SHOP_EGRPU_UA"] = "";
$MESS["WIZ_SHOP_INN_UA"] = "";
$MESS["WIZ_SHOP_NDS_UA"] = "  ";
$MESS["WIZ_SHOP_NS_UA"] = "  ";
$MESS["WIZ_SHOP_BANK_UA"] = "";
$MESS["WIZ_SHOP_MFO_UA"] = " ";
$MESS["WIZ_SHOP_PLACE_UA"] = "  ";
$MESS["WIZ_SHOP_FIO_UA"] = "        ";
$MESS["WIZ_SHOP_TAX_UA"] = " ";
$MESS["WIZ_SHOP_PRICE_BASE_TITLE"] = " :";
$MESS["WIZ_SHOP_PRICE_BASE_TEXT1"] = "  \": Optimus -  -\"            (BASE).      \"  (   )\"      .         .";
$MESS["WIZ_SHOP_PRICE_BASE_TEXT2"] = "   \"  (   )\"          .";
$MESS["WIZ_PERSON_TYPE_TITLE"] = " ";
$MESS["WIZ_PERSON_TYPE"] = "  ,      .          ,      .";
$MESS["WIZ_PERSON_TYPE_FIZ"] = " ";
$MESS["WIZ_PERSON_TYPE_UR"] = " ";
$MESS["WIZ_PERSON_TYPE_FIZ_UA"] = "  ";
$MESS["WIZ_PAY_SYSTEM_TITLE"] = " ";
$MESS["WIZ_PAY_SYSTEM"] = "  ,      .            (., , @mail.ru, ChronoPay  ..).          .";
$MESS["WIZ_PAY_SYSTEM_C"] = " (    )";
$MESS["WIZ_PAY_SYSTEM_S"] = "  (    )";
$MESS["WIZ_PAY_SYSTEM_O"] = "  (    )";
$MESS["WIZ_PAY_SYSTEM_B"] = "  (    )";
$MESS["WIZ_DELIVERY_TITLE"] = " ";
$MESS["WIZ_DELIVERY"] = "  ,     .             (EMS, UPS  ..).";
$MESS["WIZ_DELIVERY_C"] = "";
$MESS["WIZ_DELIVERY_S"] = "";
$MESS["WIZ_DELIVERY_R"] = " ";
$MESS["WIZ_DELIVERY_HINT"] = "                  .";
$MESS["WIZ_CATALOG_FILTER"] = " ";
$MESS["WIZ_CATALOG_FILTER_DESCR"] = "        ";
$MESS["WIZ_CATALOG_COMPARE"] = "  ";
$MESS["WIZ_CATALOG_COMPARE_DESCR"] = "      ";
$MESS["WIZ_CATALOG_SUBSCRIBE"] = "     ";
$MESS["WIZ_CATALOG_SUBSCRIBE_DESCR"] = "  ,     ";
$MESS["WIZ_CATALOG_COUNT"] = "   ";
$MESS["WIZ_CATALOG_VIEW"] = "   ";
$MESS["WIZ_CATALOG_VIEWS_TEXT"] = "    ";
$MESS["WIZ_CATALOG_VIEW_BAR"] = "";
$MESS["WIZ_CATALOG_VIEW_BAR_DESCR"] = " ,     ";
$MESS["WIZ_CATALOG_VIEW_LIST"] = "";
$MESS["WIZ_CATALOG_VIEW_LIST_DESCR"] = "      ,    ";
$MESS["WIZ_CATALOG_VIEW_PRICE_LIST"] = " ";
$MESS["WIZ_CATALOG_VIEW_PRICE_LIST_DESCR"] = " ,       ";
$MESS["WIZ_CATALOG_DETAIL_DESCR"] = "    ";
$MESS["WIZ_CATALOG_DETAIL_DESCR_TABS"] = "";
$MESS["WIZ_CATALOG_DETAIL_DESCR_TABS_DESCR"] = " ,       (  ,   ..)";
$MESS["WIZ_CATALOG_DETAIL_DESCR_LIST"] = "   ";
$MESS["WIZ_CATALOG_DETAIL_DESCR_LIST_DESCR"] = " ,        ";
$MESS["WIZ_CATALOG_DETAIL_SKU"] = "     SKU   ";
$MESS["WIZ_CATALOG_DETAIL_SKU_SELECT"] = " ";
$MESS["WIZ_CATALOG_DETAIL_SKU_SELECT_DESCR"] = "   ,  ,     (,    XL)";
$MESS["WIZ_CATALOG_DETAIL_SKU_LIST"] = " ";
$MESS["WIZ_CATALOG_DETAIL_SKU_LIST_DESCR"] = "       ";
$MESS["WIZ_CATALOG_USE_IDEA"] = "  ";
$MESS["WIZ_CATALOG_IDEA"] = "   ";
$MESS["WIZ_STEP_SITE_SET"] = "  ";
$MESS["WIZ_STEP_CT"] = " ";
$MESS["WIZ_STEP_SS"] = "  ";
$MESS["WIZ_STEP_PT"] = " ";
$MESS["WIZ_STEP_PS"] = "  ";
$MESS["WIZ_NO_PT"] = "      ";
$MESS["WIZ_NO_PS"] = "      ";
$MESS["wiz_site_desc"] = " -";
$MESS["wiz_keywords"] = "-, , ";
$MESS["wiz_meta_data"] = ":";
$MESS["wiz_meta_description"] = " :";
$MESS["wiz_meta_keywords"] = " :";
$MESS["wizard_store_mobile"] = "  ";
$MESS["WIZ_NO_MODULE_CATALOG"] = "    .     <a href='/bitrix/admin/module_admin.php'>  </a>   .";
$MESS["WIZ_NO_MODULE_"] = "   &laquo;: Optimus -  -&raquo;.     <a href='/bitrix/admin/partner_modules.php'>  </a>   .";
$MESS["WIZ_LOCATION_TITLE"] = "";
$MESS["WSL_STEP2_GFILE_USSR"] = "   (  )";
$MESS["WSL_STEP2_GFILE_USA"] = " ()";
$MESS["WSL_STEP2_GFILE_CNTR"] = " ()";
$MESS["WSL_STEP2_GFILE_NONE"] = " ";
?>78   15426|/aspro.optimus/install/wizards/aspro/optimus/lang/en/wizard.php|d9fa5f35<?
$MESS["WIZ_TEMPLATE_NAME"] = " ";
$MESS["WIZ_TEMPLATE_DESCRIPTION"] = "           :Optimus.";
$MESS["wiz_structure_data"] = "   -";
$MESS["wiz_restructure_data"] = "   -";
$MESS["wiz_rewrite_index"] = "  . <br><br>         .<br>      .<br><br> <b>!</b>         .";
$MESS["WIZ_COMPANY_LOGO"] = " (  193 X 43)";
$MESS["WIZ_COMPANY_NAME"] = "   ";
$MESS["WIZ_COMPANY_NAME_DEF"] = ": Optimus -  -";
$MESS["WIZ_COMPANY_COPY"] = " :";
$MESS["WIZ_COMPANY_COPY_DEF"] = ": Optimus -  -";
$MESS["WIZ_COMPANY_COPY_NOTE"] = "<b>".date("Y")." &copy; </b>    ";
$MESS["WIZ_COMPANY_TELEPHONE"] = "   ";
$MESS["WIZ_COMPANY_TELEPHONE2"] = "2   ";
$MESS["WIZ_COMPANY_TELEPHONE_DEF"] = "+7 000 000-00-00";
$MESS["WIZ_COMPANY_TELEPHONE_DEF2"] = "+7 000 000-00-00";
$MESS["WIZ_COMPANY_EMAIL"] = " E-mail:";
$MESS["WIZ_COMPANY_EMAIL_DEF"] = "info@".$_SERVER["SERVER_NAME"];
$MESS["WIZ_COMPANY_SKYPE"] = " Skype:";
$MESS["WIZ_COMPANY_SKYPE_DEF"] = "your.skype.ru";
$MESS["WIZ_COMPANY_ADDRESS"] = " :";
$MESS["WIZ_COMPANY_ADDRESS_DEF"] = "., .  19";
$MESS["WIZ_COMPANY_SCHEDULE"] = " :";
$MESS["WIZ_COMPANY_SCHEDULE_DEF"] = ". &ndash; .:  9:00  18:00";
$MESS["WIZ_SHOP_VK"] = "     :";
$MESS["WIZ_SHOP_VK_DEF"] = "http://vk.ru/aspro74";
$MESS["WIZ_SHOP_FACEBOOK"] = "     Facebook:";
$MESS["WIZ_SHOP_FACEBOOK_DEF"] = "http://www.facebook.com/aspro74";
$MESS["WIZ_SHOP_TWITTER"] = "     Twitter:";
$MESS["WIZ_SHOP_TWITTER_DEF"] = "http://twitter.com/aspro_ru";
$MESS["WIZ_SHOP_ODNOKLASSNIKI"] = "     :";
$MESS["WIZ_SHOP_ODNOKLASSNIKI_DEF"] = "http://www.odnoklassniki.ru/";
$MESS["WIZ_SHOP_YOUTUBE"] = "     Youtube:";
$MESS["WIZ_SHOP_YOUTUBE_DEF"] = "http://youtube.com/";
$MESS["WIZ_SHOP_GOOGLE"] = "     Google+:";
$MESS["WIZ_SHOP_GOOGLE_DEF"] = "http://google.com/";
$MESS["WIZ_SHOP_MAILRU"] = "       Mail.ru:";
$MESS["WIZ_SHOP_MAILRU_DEF"] = "http://www.my.mail.ru/";
$MESS["WIZ_SHOP_INSTAGRAM"] = "     Instagram:";
$MESS["WIZ_SHOP_INSTAGRAM_DEF"] = "http://instagram.com/";
$MESS["WIZ_SHOP_LIVEJOURNAL"] = "     Live Journal:";
$MESS["WIZ_SHOP_LIVEJOURNAL_DEF"] = "http://www.livejournal.com/";
$MESS["WIZ_REWRITE_INDEX_DESC"] = "  ";
$MESS["wiz_site_name"] = "-";
$MESS["WIZ_SHOP_LOCALIZATION"] = "  ";
$MESS["WIZ_SHOP_LOCALIZATION_RUSSIA"] = "";
$MESS["WIZ_SHOP_LOCALIZATION_UKRAINE"] = "";
$MESS["WIZ_SHOP_LOCALIZATION_KAZAKHSTAN"] = "";
$MESS["WIZ_SHOP_LOCATION"] = " ";
$MESS["WIZ_SHOP_LOCATION_DEF"] = "";
$MESS["WIZ_SHOP_LOCATION_DEF_UA"] = "";
$MESS["WIZ_SHOP_OF_NAME"] = " ";
$MESS["WIZ_SHOP_OF_NAME_DEF"] = " \"-\"";
$MESS["WIZ_SHOP_OF_NAME_DEF_UA"] = " \"-\"";
$MESS["WIZ_SHOP_BANK_TITLE"] = " ";
$MESS["WIZ_SHOP_BANK"] = "";
$MESS["WIZ_SHOP_BANK_DEF"] = " \" \", . ";
$MESS["WIZ_SHOP_BANKREKV_DEF"] = " 044525225";
$MESS["WIZ_SHOP_EMAIL"] = "Email     ";
$MESS["WIZ_SHOP_ADR"] = " ";
$MESS["WIZ_SHOP_ADR_DEF"] = ".  19";
$MESS["WIZ_SHOP_ADR_DEF_UA"] = "";
$MESS["WIZ_SHOP_BANKREKV"] = " ";
$MESS["WIZ_SHOP_INN"] = "";
$MESS["WIZ_SHOP_KPP"] = "";
$MESS["WIZ_SHOP_NS"] = " ";
$MESS["WIZ_SHOP_KS"] = " ";
$MESS["WIZ_SHOP_STAMP"] = " ";
$MESS["WIZ_SHOP_RECV_UA"] = " ";
$MESS["WIZ_SHOP_RECV_UA_DESC"] = "        (, , ,  )";
$MESS["WIZ_SHOP_COMPANY_UA"] = "     -";
$MESS["WIZ_SHOP_EGRPU_UA"] = "";
$MESS["WIZ_SHOP_INN_UA"] = "";
$MESS["WIZ_SHOP_NDS_UA"] = "  ";
$MESS["WIZ_SHOP_NS_UA"] = "  ";
$MESS["WIZ_SHOP_BANK_UA"] = "";
$MESS["WIZ_SHOP_MFO_UA"] = " ";
$MESS["WIZ_SHOP_PLACE_UA"] = "  ";
$MESS["WIZ_SHOP_FIO_UA"] = "        ";
$MESS["WIZ_SHOP_TAX_UA"] = " ";
$MESS["WIZ_SHOP_PRICE_BASE_TITLE"] = " :";
$MESS["WIZ_SHOP_PRICE_BASE_TEXT1"] = "  \": Optimus -  -\"            (BASE).      \"  (   )\"      .         .";
$MESS["WIZ_SHOP_PRICE_BASE_TEXT2"] = "   \"  (   )\"          .";
$MESS["WIZ_PERSON_TYPE_TITLE"] = " ";
$MESS["WIZ_PERSON_TYPE"] = "  ,      .          ,      .";
$MESS["WIZ_PERSON_TYPE_FIZ"] = " ";
$MESS["WIZ_PERSON_TYPE_UR"] = " ";
$MESS["WIZ_PERSON_TYPE_FIZ_UA"] = "  ";
$MESS["WIZ_PAY_SYSTEM_TITLE"] = " ";
$MESS["WIZ_PAY_SYSTEM"] = "  ,      .            (., , @mail.ru, ChronoPay  ..).          .";
$MESS["WIZ_PAY_SYSTEM_C"] = " (    )";
$MESS["WIZ_PAY_SYSTEM_S"] = "  (    )";
$MESS["WIZ_PAY_SYSTEM_O"] = "  (    )";
$MESS["WIZ_PAY_SYSTEM_B"] = "  (    )";
$MESS["WIZ_DELIVERY_TITLE"] = " ";
$MESS["WIZ_DELIVERY"] = "  ,     .             (EMS, UPS  ..).";
$MESS["WIZ_DELIVERY_C"] = "";
$MESS["WIZ_DELIVERY_S"] = "";
$MESS["WIZ_DELIVERY_R"] = " ";
$MESS["WIZ_DELIVERY_HINT"] = "                  .";
$MESS["WIZ_CATALOG_FILTER"] = " ";
$MESS["WIZ_CATALOG_FILTER_DESCR"] = "        ";
$MESS["WIZ_CATALOG_COMPARE"] = "  ";
$MESS["WIZ_CATALOG_COMPARE_DESCR"] = "      ";
$MESS["WIZ_CATALOG_SUBSCRIBE"] = "     ";
$MESS["WIZ_CATALOG_SUBSCRIBE_DESCR"] = "  ,     ";
$MESS["WIZ_CATALOG_COUNT"] = "   ";
$MESS["WIZ_CATALOG_VIEW"] = "   ";
$MESS["WIZ_CATALOG_VIEWS_TEXT"] = "    ";
$MESS["WIZ_CATALOG_VIEW_BAR"] = "";
$MESS["WIZ_CATALOG_VIEW_BAR_DESCR"] = " ,     ";
$MESS["WIZ_CATALOG_VIEW_LIST"] = "";
$MESS["WIZ_CATALOG_VIEW_LIST_DESCR"] = "      ,    ";
$MESS["WIZ_CATALOG_VIEW_PRICE_LIST"] = " ";
$MESS["WIZ_CATALOG_VIEW_PRICE_LIST_DESCR"] = " ,       ";
$MESS["WIZ_CATALOG_DETAIL_DESCR"] = "    ";
$MESS["WIZ_CATALOG_DETAIL_DESCR_TABS"] = "";
$MESS["WIZ_CATALOG_DETAIL_DESCR_TABS_DESCR"] = " ,       (  ,   ..)";
$MESS["WIZ_CATALOG_DETAIL_DESCR_LIST"] = "   ";
$MESS["WIZ_CATALOG_DETAIL_DESCR_LIST_DESCR"] = " ,        ";
$MESS["WIZ_CATALOG_DETAIL_SKU"] = "     SKU   ";
$MESS["WIZ_CATALOG_DETAIL_SKU_SELECT"] = " ";
$MESS["WIZ_CATALOG_DETAIL_SKU_SELECT_DESCR"] = "   ,  ,     (,    XL)";
$MESS["WIZ_CATALOG_DETAIL_SKU_LIST"] = " ";
$MESS["WIZ_CATALOG_DETAIL_SKU_LIST_DESCR"] = "       ";
$MESS["WIZ_CATALOG_USE_IDEA"] = "  ";
$MESS["WIZ_CATALOG_IDEA"] = "   ";
$MESS["WIZ_STEP_SITE_SET"] = "  ";
$MESS["WIZ_STEP_CT"] = " ";
$MESS["WIZ_STEP_SS"] = "  ";
$MESS["WIZ_STEP_PT"] = " ";
$MESS["WIZ_STEP_PS"] = "  ";
$MESS["WIZ_NO_PT"] = "      ";
$MESS["WIZ_NO_PS"] = "      ";
$MESS["wiz_site_desc"] = " -";
$MESS["wiz_keywords"] = "-, , ";
$MESS["wiz_meta_data"] = ":";
$MESS["wiz_meta_description"] = " :";
$MESS["wiz_meta_keywords"] = " :";
$MESS["wizard_store_mobile"] = "  ";
$MESS["WIZ_NO_MODULE_CATALOG"] = "    .     <a href='/bitrix/admin/module_admin.php'>  </a>   .";
$MESS["WIZ_NO_MODULE_"] = "   &laquo;: Optimus -  -&raquo;.     <a href='/bitrix/admin/partner_modules.php'>  </a>   .";
$MESS["WIZ_LOCATION_TITLE"] = "";
$MESS["WSL_STEP2_GFILE_USSR"] = "   (  )";
$MESS["WSL_STEP2_GFILE_USA"] = " ()";
$MESS["WSL_STEP2_GFILE_CNTR"] = " ()";
$MESS["WSL_STEP2_GFILE_NONE"] = " ";
?>101  2245|/aspro.optimus/install/wizards/aspro/optimus/site/public/ru/ajax/productStoreAmount.php|ae65b958<?require($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/main/include/prolog_before.php");?>
<?if($_POST["ELEMENT_ID"]){
	if($_POST["OFFERS_ID"]){
		foreach($_POST["OFFERS_ID"] as $id){?>
			<div class="sku_stores_<?=$id?>" style="display: none;">
				<?$APPLICATION->IncludeComponent("bitrix:catalog.store.amount", "main", array(
						"PER_PAGE" => "10",
						"USE_STORE_PHONE" => $_POST["USE_STORE_PHONE"],
						"SCHEDULE" => $_POST["SCHEDULE"],
						"USE_MIN_AMOUNT" => $_POST["USE_MIN_AMOUNT"],
						"MIN_AMOUNT" => $_POST["MIN_AMOUNT"],
						"ELEMENT_ID" => $id,
						"STORE_PATH"  =>  $_POST["STORE_PATH"],
						"MAIN_TITLE"  =>  $_POST["MAIN_TITLE"],
						"MAX_AMOUNT"=>$_POST["MAX_AMOUNT"],
						"USE_ONLY_MAX_AMOUNT" => $_POST["USE_ONLY_MAX_AMOUNT"],
						"SHOW_EMPTY_STORE" => $_POST['SHOW_EMPTY_STORE'],
						"SHOW_GENERAL_STORE_INFORMATION" => $_POST['SHOW_GENERAL_STORE_INFORMATION'],
						"USE_ONLY_MAX_AMOUNT" => $_POST["USE_ONLY_MAX_AMOUNT"],
						"USER_FIELDS" => $_POST['USER_FIELDS'],
						"FIELDS" => $_POST['FIELDS'],
						"STORES" => $_POST['STORES'],
						"CACHE_GROUPS" => "Y",
						"CACHE_TYPE" => "N",
					),
					false
				);?>
			</div>
		<?}
	}else{?>
		<?$APPLICATION->IncludeComponent("bitrix:catalog.store.amount", "main", array(
				"PER_PAGE" => "10",
				"USE_STORE_PHONE" => $_POST["USE_STORE_PHONE"],
				"SCHEDULE" => $_POST["SCHEDULE"],
				"USE_MIN_AMOUNT" => $_POST["USE_MIN_AMOUNT"],
				"MIN_AMOUNT" => $_POST["MIN_AMOUNT"],
				"ELEMENT_ID" => $_POST["ELEMENT_ID"],
				"STORE_PATH"  =>  $_POST["STORE_PATH"],
				"MAIN_TITLE"  =>  $_POST["MAIN_TITLE"],
				"MAX_AMOUNT"=>$_POST["MAX_AMOUNT"],
				"USE_ONLY_MAX_AMOUNT" => $_POST["USE_ONLY_MAX_AMOUNT"],
				"SHOW_EMPTY_STORE" => $_POST['SHOW_EMPTY_STORE'],
				"SHOW_GENERAL_STORE_INFORMATION" => $_POST['SHOW_GENERAL_STORE_INFORMATION'],
				"USE_ONLY_MAX_AMOUNT" => $_POST["USE_ONLY_MAX_AMOUNT"],
				"USER_FIELDS" => $_POST['USER_FIELDS'],
				"FIELDS" => $_POST['FIELDS'],
				"STORES" => $_POST['STORES'],
				"CACHE_GROUPS" => "Y",
				"CACHE_TYPE" => "N",
			),
			false
		);?>
	<?}
}?>
<?require($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/main/include/epilog_after.php");?>107  80|/aspro.optimus/install/wizards/aspro/optimus/site/public/ru/personal/order/payment/.section.php|4221ef4a<?
$sSectionName = " ";
$arDirProperties = Array(

);
?>105  314|/aspro.optimus/install/wizards/aspro/optimus/site/public/ru/personal/order/payment/index.php|db238eb5<?
require($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/main/include/prolog_before.php");
$APPLICATION->SetTitle(" ");
?><?$APPLICATION->IncludeComponent(
	"bitrix:sale.order.payment",
	"",
	Array(
	)
);?><?require($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/main/include/epilog_after.php");?>107  343|/aspro.optimus/install/wizards/aspro/optimus/site/public/ru/personal/subscribe/unsubscribe.php|7e832b5f<?
require($_SERVER["DOCUMENT_ROOT"]."/bitrix/header.php");
$APPLICATION->SetTitle("  ");
?>
<?$APPLICATION->IncludeComponent(
	"bitrix:main.mail.unsubscribe",
	"",
	Array(
		"COMPOSITE_FRAME_MODE" => "A",
		"COMPOSITE_FRAME_TYPE" => "AUTO"
	)
);?>
<?require($_SERVER["DOCUMENT_ROOT"]."/bitrix/footer.php");?>113  291476|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/template_styles.min.css|257a5154.header-cart-block .cart.empty_cart>span.icon,.popup .popup-intro.grey{filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#e9e9e9', endColorstr='#d5d5d5', GradientType=0 )}.props_list,table.colored_table{border-collapse:collapse}.start_promo .item,.start_promo .item span.main_wrap{-webkit-backface-visibility:hidden;-moz-backface-visibility:hidden;-ms-backface-visibility:hidden}*{margin:0;padding:0;box-sizing:content-box}html{width:100%}article,aside,footer,header,nav,section{display:block}.bx-core-waitwindow,div[id^=wait_comp]{display:none}.right_block ol,.right_block ul{margin:0 0 27px}.right_block ol li:before,.right_block ul li:before{padding:0;margin-left:0;width:20px;display:inline-block;vertical-align:top;zoom:1;position:absolute;top:0;left:0}.right_block ol li,.right_block ul li{margin:0 0 4px;padding-left:20px;position:relative}#panel+div[id*=bx_incl_area]{min-height:0!important}.print body{background:#fff!important}.title_block{display:inline-block;margin:0 38px 0 0;font-size:20px;color:#1d2029;line-height:30px;font-weight:500}.bold,a.back{font-weight:600}.icon_more{text-decoration:none;font-size:10px;text-transform:uppercase;background:url(images/arrows.png) -1px -78px no-repeat;padding:0 0 0 23px;margin:10px 0 0;display:inline-block}:hover{transition:background-color ease .1s}a:hover{text-decoration:none!important}.transition_bg{transition:background-color ease .5s}.wrapp,.wrapper,.wrapper_inner{box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;position:relative;zoom:1;z-index:2}.wrapp{max-width:1000px;padding:0 10px;margin:0 auto}.wrapper_inner{padding:0 24px;max-width:1208px;margin:0 auto;background:#fff}.wrapper_inner.wides{max-width:1172px}.wrapper_inner.wides_big{max-width:1182px}.wrapper_inner1.wides{margin:0 -10px}.wrapper_inner1.wides.float_banners{margin:0}.left_block{width:220px;float:left;position:relative;zoom:1;z-index:390;padding-top:0}.right_block{padding-left:244px;overflow:visible;position:relative}.news-list{overflow:hidden}#content .right_block.catalog .catalog_list,#content .right_block.catalog .catalog_table{left:0;right:-20px;position:relative;zoom:1}#content .right_block.catalog .catalog_block{margin-top:20px}#content .right_block.catalog .catalog_section_list{margin-left:11px}.clearfix{clear:both}.rows_block{font-size:0;margin:0 -6px}.rows_block:after,.rows_block:before{display:table;content:" "}.rows_block:after{clear:both}.rows_block *{box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.rows_block .item_block{display:inline-block;vertical-align:top;padding:6px}.rows_block .col-80{width:80%}.rows_block .col-75{width:75%}.rows_block .col-66{width:66.66%}.rows_block .col-5{width:20%}.rows_block .col-4{width:25%}.rows_block .col-3{width:33.33%}.rows_block .col-2{width:50%}.rows_block .col-1{width:100%}.hover{cursor:pointer}.grey_bg{background:#f7f7f9}hr{padding:0;margin:0;height:1px}hr.white{background:#fff}hr.black{background:#000}hr.grey{background:#E5E5E5}.wrapper_block{position:relative;clear:both}.top_border{border-top:1px solid #e5e5e5}font.notetext{color:#333}.wrap_md,.wrap_md_row{font-size:0;margin:0}.wrap_md_row{margin:0 -15px}.md-25,.md-33,.md-50,.md-66,.md-75,.wrap_md .iblock,.wrap_md .news_wrap,.wrap_md .subscribe_wrap{display:inline-block;vertical-align:top;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;font-size:13px}.md-75{width:75%}.md-66{width:66.66%}.md-50{width:50%}.md-33{width:33.33%}.md-25{width:25%}.wrap_md_row>div{padding:0 15px}.wrap_md .img img{max-width:100%}.wrap_md .big{padding:0 0 0 20px}.wrap_md .big p{font-size:14px;color:#333}.wrap_md .big .title_block{margin-bottom:8px}.border-radius{-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.box-sizing{box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.hidden{display:none!important;visibility:hidden}.hidden_block{visibility:hidden;opacity:0}.display-block{display:block!important;visibility:visible}.f-right{float:right}.f-left,.middle{float:left}.clear{width:100%;clear:both;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.clearfix:after{content:".";display:block;height:0;clear:both;visibility:hidden}.top_block{font-size:0;margin:0 0 24px;padding:42px 0 0}.top_block a{font-size:12px;text-decoration:none}#header{margin:-1px 0 7px;padding:16px 0 18px;z-index:100;right:0;left:0}.header_wrap #header{padding:0!important;margin:-1px 0 0!important}.basket_normal .header_wrap #header .middle-h-row{height:58px}.header_wrap #header>.wrapper_inner{padding-top:16px;padding-bottom:18px}.basket_normal .header_wrap #header>.wrapper_inner{padding-top:6px;z-index:4}.basket_fly .header_wrap #header>.wrapper_inner{z-index:9}.has_menu #header{margin-bottom:0;padding-bottom:16px}.has_menu.m_color_colored #header{padding-bottom:15px}.head_type_1 #header{border-bottom:1px solid #e5e5e5}.middle{position:relative;width:100%}.wide_page .middle{float:none}.middle:after{content:'';clear:both;display:table}#footer{position:relative;zoom:1;clear:both;z-index:1}.flexslider .wrapper_inner{background:0 0}.bg_image_site{display:block;opacity:0;width:100%;height:100%;min-height:100%;min-width:100%;position:absolute;top:0;left:0;right:0;z-index:0;background-position:top center;background-repeat:no-repeat}.bg_image_site.fixed{position:fixed}.bg_image_site.opacity{transition:opacity .4s ease}input::-moz-input-placeholder,input::-ms-input-placeholder,input::-o-input-placeholder,input::-webkit-input-placeholder{color:#6a6a6a}input[type=text]:focus,input[type=password]:focus,input[type=email]:focus,select:focus,textarea:focus{outline:0}input[type=text],input[type=password],input[type=email],select,textarea{box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;background:#f7f7f7;border:1px solid #eaebec;border-radius:2px;box-shadow:none;color:#383838;height:auto;font-size:13px;padding:8px 13px 7px;width:100%}textarea{resize:none;min-height:90px}input[readonly],select[readonly],textarea[readonly]{background:#FFF}input:not(.button){line-height:20px}input.big{padding:10px 13px 9px}input.grey{background:#eee}input.medium{padding:8px 13px 7px}input.error,textarea.error{background:#ffefef}.bxml-dialog input[type=text]{width:auto;padding:initial;border-color:initial}.bx-ie input[type=text],.bx-ie input[type=password],.bx-ie input[type=email]{padding-bottom:10px}.bx-ie .bx-sls .bx-ui-sls-fake,.bx-ie .bx-sls .bx-ui-sls-route{padding-bottom:0}form[name=bx_auth_services] .form-control input{margin:5px 0 20px}form[name=bx_auth_services] .form-control span,form[name=bx_auth_servicesform_inline] #bx-auth-services>div span{display:inline-block;font-size:12px;padding:0 10px 0 0;vertical-align:top}a.scroll-to-top{-moz-transition:opacity .3s;-ms-transition:opacity .3s;-o-transition:opacity .3s;-webkit-transition:opacity .3s;transition:opacity .3s;position:fixed;text-align:center;text-decoration:none;display:block;background:url(images/scroll.png) center 14px no-repeat #404040;width:44px;height:44px;border-radius:50%;right:75px;left:inherit;bottom:55px;opacity:0;z-index:1040;cursor:pointer}a.scroll-to-top.visible{opacity:1}a.scroll-to-top.RECT_WHITE,a.scroll-to-top.ROUND_WHITE{background-color:#fff}a.scroll-to-top.RECT_GREY,a.scroll-to-top.ROUND_GREY{background-color:#e3e3e3}a.scroll-to-top.RECT_COLOR,a.scroll-to-top.RECT_GREY,a.scroll-to-top.RECT_WHITE{border-radius:2px}a.scroll-to-top.TOUCH{border-radius:2px 0 0 2px;width:50px;height:50px;right:0}a.scroll-to-top.RECT_COLOR,a.scroll-to-top.ROUND_COLOR{background-position:center 14px}a.scroll-to-top.RECT_GREY,a.scroll-to-top.RECT_WHITE,a.scroll-to-top.ROUND_GREY,a.scroll-to-top.ROUND_WHITE{background-position:center -70px}a.scroll-to-top.RECT_COLOR.TOUCH{background-position:center 17px}a.scroll-to-top.RECT_GREY.TOUCH,a.scroll-to-top.RECT_WHITE.TOUCH{background-position:center -67px}.order-checkout .sof-req,form .star{font-size:12px;font-weight:400;line-height:0;margin:0 0 0 4px;position:relative;color:#e62222}.form.ASK{display:none}.form_block .form.ASK,.popup .form.ASK{display:block}.form-control{position:relative;margin-bottom:19px}.form-control label{display:block;font-size:13px;margin-bottom:6px}.form .form_body{margin:0 0 9px;position:relative}.form .form_desc{margin-bottom:15px}.form .form_result{margin-bottom:30px}.form .form_result,.form .form_result.success *{color:#333}.form .form_desc>*,.form .form_result>*{margin:0}.form .form_footer{margin:0 0 23px}.form .form_footer .button+.button{margin-left:13px}.form .form_left{width:56%;float:left}.form .form_right{left:56%;padding-left:30px;position:absolute;right:0}.form.b .form_left,.form.b .form_right{float:none;left:inherit;margin:0;max-width:inherit;padding:0;position:relative;right:inherit;width:100%}.form textarea{min-height:193px}label.error{color:#e62222!important;font-size:10px;position:absolute;top:0;right:0;font-weight:400}.h label.error{display:none!important}.popup .form .form_head{border-bottom:2px solid;padding:34px 75px 35px 35px}.popup .form .form_head h2{margin:0}.popup .form .form_desc{margin-bottom:0;margin-top:15px}.popup .form .form_result{margin:0;padding:30px 35px 0}.popup .form .form_body{margin:0;padding:29px 35px 6px}.popup .form .form_footer{padding:0 35px 12px}.popup.show .form .form_result{padding-bottom:30px}.error_block_auth{color:#e62222!important;font-size:12px}.captcha-row{position:relative;max-width:418px}.captcha-row .captcha_input{bottom:0;height:59px;left:216px;max-width:184px;position:absolute;right:0}.captcha-row .captcha_input label.error{white-space:nowrap}.captcha-row .captcha_input input[name=captcha_word]{bottom:0;position:absolute}.captcha-row .captcha_image{height:37px;position:relative;width:217px}.captcha-row .captcha_image img{height:37px;border:none;vertical-align:top;width:100%;width:180px}.captcha_reload{border:1px solid transparent;cursor:pointer;height:35px;left:179px;position:absolute;top:0;width:36px}#header .middle-h-row form.basket_wrapp,.authorization-cols .col.authorization .soc-avt,.basket_fly .module-cart table.colored tbody td,.detail_picture_block .picture_description,.module-order-history .module-orders-list .tr-d:hover td,.popup .form-description-wrapp,.popup .form_description,.question-list,.staff_wrapp .item .contacts,table.offers_table td{border-top:1px solid #e7e7e7}.module-cart .colored tbody,.module-cart .colored tfoot,.module-orders-list td.drop-cell,.viewed_products_column .view-item{border-left:1px solid #e7e7e7;border-right:1px solid #e7e7e7}.captcha_reload::after,.captcha_reload::before{content:"";display:block;position:absolute}.captcha_reload::before{border-radius:25px;height:25px;left:5px;top:5px;width:25px}.captcha_reload::after{background:url(images/icons_wish.png) -67px -82px rgba(0,0,0,0);height:13px;left:10px;top:11px;transition:background .7s ease-in-out 0s;width:15px}.captcha_reload:hover:before{background:#383838}.captcha_reload.loading:after{-webkit-animation:spinner .5s linear infinite!important;animation:spinner .5s linear infinite!important;-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;-ms-transform-style:preserve-3d;-o-transform-style:preserve-3d;transform-style:preserve-3d}.captcha_reload:hover:after,.more_text_ajax.loading:after{-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;-ms-transform-style:preserve-3d}.captcha_reload:hover:after{-webkit-animation:spinner .5s ease-out 1;animation:spinner .5s ease 1;-o-transform-style:preserve-3d;transform-style:preserve-3d}.captcha-row.b .captcha_image,.captcha-row.b .captcha_input{height:37px;left:inherit;margin:0;max-width:inherit;position:relative;right:inherit}.captcha-row.b .captcha_input label.error{top:-68px}.captcha-row.b .captcha_image{margin-bottom:9px}.captcha-row .captcha_image .captcha_reload{right:0;text-indent:-9999px}.basket_popup_wrapp .item-title .cost-cell,.basket_popup_wrapp .item-title .one-item,.basket_sort ul.tabs li span,.bx_compare .prop_title_table .data_table_props tr td:first-child,.bx_filter_container_title .hint .hint_icon i,.bx_modal_body .item_block_title,.bx_order_make .bx_description .name,.catalog_detail .bx_item_set_hor_container_big .title,.catalog_detail .set_wrapp .title,.char_name .hint .icon i,.filter_block ul li span,.item-title .props .item_prop .value,.jobs_wrapp .item .salary,.location-block-wrapper .bx-sls .bx-ui-sls-fake,.location-block-wrapper .bx-sls .bx-ui-sls-route,.medium,.module-cart table td.name-cell div[class^=bx_item_detail_] .titles,.module-orders-list tbody td,.module-pagination .nums a,.no_products,.popup .popup-intro .pop-up-title,.props_block .char_value,.registraion-page .top p,.row_values .wrap_weight,b,h4.hover:hover,strong{color:#383838}.basket_wrapp table tbody td,.border_block_wide table td,.bottom.middle td>.coupon .coupon-t,.bx_filter .bx_filter_select_text,.bx_filter_select_popup ul li label,.bx_filter_vertical .bx_filter_block input:checked+label span,.bx_filter_vertical .bx_filter_block label:hover span,.bx_filter_vertical input[type=checkbox]+label.sku span,.catalog_detail .stock_board .title,.colored_table tbody tr td,.common_select *,.coupons_list .bx_ordercart_coupon,.filter label span,.forum-quote tbody tr td a,.module-cart .row_values .price,.module-cart table tr td.count-cell,.module-cart tfoot td .item_title,.reviews-header-title a,.reviews-post-table .reviews-text,.sku_props .bx_item_detail_size ul li,.sort_header .sort_filter a.current,.sort_header .sort_filter a:hover,.stores_block .stores_text_wrapp{color:#373737}#header .basket_fly .basket_title,#header .catalog_menu ul.menu>li.current>a,#header .catalog_menu ul.menu>li>a,#header .menu>li .child_wrapp a.current:not(.title),#header .wrapper_middle_menu .menu>li .child.submenu .child_wrapp a.current:not(.title),.articles-list.news .item:hover .item-title a,.avtorization-call.enter,.basket_sort ul.tabs li .wrap_li>span *,.basket_sort ul.tabs li.cur .wrap_li>span,.basket_sort ul.tabs li.cur .wrap_li>span *,.basket_sort ul.tabs li.cur span,.basket_sort ul.tabs li:hover .wrap_li>span,.basket_sort ul.tabs li:hover .wrap_li>span *,.basket_wrapp .basket_block .title,.basket_wrapp .basket_empty .wraps_icon_block.basket .count span,.basket_wrapp .basket_fly .basket_count.empty .wraps_icon_block.basket .count span,.basket_wrapp .empty_cart:not(.bcart) .wraps_icon_block .count span a,.basket_wrapp .wraps_icon_block .count .text,.basket_wrapp .wraps_icon_block .count a,.bx_compare .compare_view .item_block:hover a,.bx_filter .bx_filter_popup_result a,.catalog_item:hover .item-title a,.cost.prices .price,.footer_bottom .submenu_top .menu_item a,.footer_top .sblock .wrap_more_text,.footer_top .sblock .wrap_more_text div,.form-control .forgot:hover,.header_wrap .top-h-row .menu li>a:hover,.img_block_capcha .reload:hover,.item .date_small,.item-stock .store_link:hover,.item-title a:hover,.item_wrap:hover .item-title a,.jobs_wrapp .item .name tr:hover .link,.link:hover,.main-nav ul.menu>li>a,.module-cart .name-cell a:hover,.more_text_ajax:hover,.news .item .info .date,.phones .order_wrap_btn:hover,.phones .phone_wrap a,.sale_block .text,.sale_block .value,.search_middle_block .middle_form .noborder,.section_item_inner .section_info ul li a:hover,.set_block .item:hover .item_info a,.stores .stores_list .item a:hover span,.top-h-row .menu li.current>a,.view_sale_block .values,.white #header .catalog_menu ul.menu>li a,.wrapper.has_menu .white #header .catalog_menu ul.menu>li:hover>a,a:hover,body #header ul.menu li .child.submenu.line .child_wrapp>a,body .main-nav .menu>li.current>a,body .white #header ul.menu li .child.submenu .child_wrapp a:hover,body .wrapper.has_menu #header ul.menu li .child.submenu .child_wrapp a:not(.title):hover,li.item:hover a,ul.menu .child li.menu_item a:hover,ul.menu .child li.menu_title a,ul.menu li .depth3 a.title:hover,ul.mini-menu li a{color:#1d2029}a.dark_link,ul.menu .see_more,ul.menu .see_more a{color:#1d2029!important}.block_wr.dark,.bx_filter .bx_filter_popup_result,.bx_item_set_hor .bx_item_set_hor_item a.remove,.captcha_reload:before,.cart_shell .remove-cell a:hover,.colored #header .catalog_menu ul.menu>li,.h_color_colored .header_wrap #header,.h_color_white .header_wrap #header .middle-h-row .logo_wrapp .logo a,.left_block .internal_sections_list .child_wrapp ul.child li.cur:after,.left_block .internal_sections_list .child_wrapp ul.child li:hover:after,.left_block .internal_sections_list .title .inner_block:before,.left_block .internal_sections_list li.cur,.left_block .internal_sections_list li:hover,.module-cart .remove-cell a:hover,.more_text_ajax:before,.registraion-page .top p:after,.start_promo .item i.title span,.start_promo .item p span,.stores .all_map{background-color:#ddd}.articles-list .item .right-data .preview-text,.bx_filter_vertical .bx_filter_block label span,.bx_filter_vertical .bx_filter_block label:hover span,.bx_order_make .bx_block.r1x3.pt8,.bx_order_make .float .bx_description .name,.catalog_detail .form_wr,.catalog_detail .stock_board .txt,.colored_table thead tr,.cost.prices .price_name,.count-cell div.error,.display_list .list_item .preview_text,.display_list .list_item .props_list td,.file_type .description,.form-control label,.item-title .props .item_prop .title,.module-cart table td.name-cell .item_props .item_prop .property_value,.module-cart table td.name-cell div[class^=bx_item_detail_] .values,.module-cart thead tr,.module-order-history .module-orders-list td.drop-cell .item-shell thead td,.module-order-history .order_property.d td,.news .item .info .preview,.orderdetail .module-orders-list.colored tbody td:first-child,.reviews-post-reply-buttons a,.reviews-post-table,.soc-avt,.social_block .row .title,.top-h-row .menu li a{color:#888}#footer .copyright,#footer .copyright *,.footer_bottom .all_menu_block ul li a,.header_wrap.colored .top-h-row .menu li a,.stores .stores_list .item .store_text .value{color:#545454}.header_wrap.colored .main-nav ul.menu>li>a{color:#fff}.bx_compare .compare_view.data_table_props td,.catalog_detail .like_icons>div,.info_item .top_info .article,.item-stock,.share_wrapp .text.button,.share_wrapp .text.button:hover{color:#6d6d6d}.btn_big,.bx_modal_container .bx_modal_small_title,.card_popup_frame.popup .basket_empty *,.card_popup_frame.popup .total_wrapp,.catalog_detail .availability-row .value a,.catalog_detail .bx_item_set_hor_container_big .total_wrapp .total_title .price,.catalog_detail a.compare_item .value,.catalog_detail a.wish_item .value,.compare_button span,.compare_wrapp a.compare_link,.left_block .internal_sections_list .title a,.module-cart .colored tfoot td.row_values,.module-cart .summ-cell,.module-cart .summ-cell *,.module_products_list .basket_button.read_more span,.module_products_list .price-cell .price,.top-h-row .phone span,.top-h-row .phone span a,table.title-search-result .price,ul.mini-menu li a,ul.tabs li span,ul.tabs li.cur:hover span,ul.tabs li:active span{color:#1d2029}#header .basket_fly .opener .count,.catalog_detail .stock_board .title,.filter_button span,.front_slider .price,.module_products_list .basket_button.to-cart span,.module_products_list .basket_button.to-order span,.module_products_list .basket_button.to-subscribe span,.page_not_found td.description .title404,.popup-window-titlebar .popup-window-top-row .popup-window-center-column span div,table.colored td.name{color:#212121}#header .catalog_menu ul.menu.full.opened>li:not(.current):hover a,#header ul.menu.adaptive>li a,#header ul.menu.full.opened>li:not(.current):hover a,.specials_slider.product_slider .basket_button.in-cart span{color:#fff}.catalog_detail .stock_board .txt,.display_list .list_item .props_list td,.header-cart-block .cart .delay_link,.header-cart-block .cart .summ,.index_bottom .info_column .about_column,.smartfilter,.smartfilter input{color:#636363}.catalog_detail .bx_item_set_hor_container_big .total_wrapp .total_title,.display_list .availability-row .value,.module-cart [data-id=total_buttons] .description,.module-pagination .nums a,.show_number,.show_number *{color:#777}.catalog_detail .element_detail_text,.tabs_content li.video{color:#7e7e7e}.tooltip .tooltip_close:hover{color:#333}.display_list .available_block,.display_list .noavailable_block{color:#888}.bx_item_set_hor .bx_item_set_hor_item .price.detail,.catalog_detail .set_wrapp .item .price.detail,.module-cart .cost-cell .discount,.module-cart .cost-cell .discount strike,.module-cart .count-cell .measure,.module_products_list .price-cell .price.discount{color:#999}.top-h-row .h-user-block .have-user a.exit,.top-h-row .h-user-block .have-user a.exit span,.top-h-row .menu li a{color:#919191}#footer .copyright .grey{color:#a0a0a0}.front_slider .price.discount{color:#adadad}.order-checkout .sof-req,.pay-status-cell.not_payed,form div.r div.error{color:#cb0000}#bx_auth_servform input[type=submit]:hover,.basket_button:hover,.basket_button:hover span,.button22:hover span,.button30.back_button span,.button30.fast_order span,.button30.grey span,.button30:hover,.button30:hover span,.bx_filter_container_title .hint .hint_icon:hover,.compare_button:hover span,.filter_button:hover span,.popup .bx-auth-service-form input[type=submit]:hover,.popup .soc-avt .row a:hover{color:#fff}.articles-list .item .item-title a:hover,.articles-list .item:hover .item-title a,.pseudo:hover,a.avtorization-call.enter:hover{border-bottom-color:#919191}.props_table td{border-bottom:1px dotted #b4b4b4}#header .basket_fly li[item-section=AnDelCanBuy] .module-cart .colored tfoot td.total_wrapp,#order_form_div .sale_order_table.props td,#order_form_div .title,#order_form_div form .title,#order_form_div hr,.ask_small_block .ask_btn_block,.basket_fly li[item-section=AnDelCanBuy] .module-cart table.colored tbody,.catalog_detail hr,.differences_table td,.popup .form-description-wrapp,.popup .form_description,.viewed_products_column .view-list,table.colored td{border-bottom:1px solid #e7e7e7}table.offers_table td{border-bottom:0 none}table.colored tr.nb td{border-bottom:none}.module-cart .colored tbody,.module-cart .colored tfoot{border-bottom:1px solid #e7e7e7}.module-order-history .module-orders-list .tr-d.opened td.item-name-cell,.module-order-history .module-orders-list .tr-d:hover td.item-name-cell{border-left:1px solid #e7e7e7}.module-cart .colored tfoot tr[data-id=total_buttons] td .basket_update,.module-order-history .module-orders-list .tr-d.opened td.order-status-cell,.module-order-history .module-orders-list .tr-d:hover td.order-status-cell{border-right:1px solid #e7e7e7}.jobs_wrapp .item span.icon,.staff_wrapp .section .icon{background:#eef1f1}.catalog_detail .tabs.main_tabs>li{background:#f2f2f2}.differences tr.hovered:hover,.popup .form-description-wrapp,.search-page form,table.colored.item-shell thead td{background:#fafafa}.adaptive_filter,body{background:#fff}body{background:#f6f6f7}#footer .phone .icon,.item_slider ul.slides li{background:#fff}.item_slider .slides a.line_link{cursor:default}.item_slider .slides li.current:before,.wrapper.basket_normal #header .basket_fly{display:none}#header .basket_fly{background:#fff;box-shadow:rgba(44,44,44,.4) 0 6px 18px;-moz-box-shadow:rgba(44,44,44,.4) 0 6px 18px;-webkit-box-shadow:rgba(44,44,44,.4) 0 6px 18px;min-height:283px}#header .basket_fly:not(.loaded){background:url(images/waiter.gif) center center no-repeat #fff}table.title-search-result td.title-search-all{background:#fff!important}.header-cart-block .cart.empty_cart>span.icon{background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2U5ZTllOSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNkNWQ1ZDUiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);background:-moz-linear-gradient(top,#e9e9e9 0,#d5d5d5 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#e9e9e9),color-stop(100%,#d5d5d5));background:-webkit-linear-gradient(top,#e9e9e9 0,#d5d5d5 100%);background:-o-linear-gradient(top,#e9e9e9 0,#d5d5d5 100%);background:-ms-linear-gradient(top,#e9e9e9 0,#d5d5d5 100%);background:linear-gradient(to bottom,#e9e9e9 0,#d5d5d5 100%);border-bottom:1px solid #cacaca}.popup .popup-intro.grey{border-bottom:1px solid #bfbfbf;background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2U5ZTllOSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNkNWQ1ZDUiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);background:-moz-linear-gradient(top,#e9e9e9 0,#d5d5d5 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#e9e9e9),color-stop(100%,#d5d5d5));background:-webkit-linear-gradient(top,#e9e9e9 0,#d5d5d5 100%);background:-o-linear-gradient(top,#e9e9e9 0,#d5d5d5 100%);background:-ms-linear-gradient(top,#e9e9e9 0,#d5d5d5 100%);background:linear-gradient(to bottom,#e9e9e9 0,#d5d5d5 100%)}.module-cart .colored tfoot tr[data-id=total_buttons] td .top_shadow{box-shadow:0 1px 2px #e7e7e7 inset;-moz-box-shadow:0 1px 2px #e7e7e7 inset;-o-box-shadow:0 1px 2px #e7e7e7 inset;-webkit-box-shadow:0 1px 2px #e7e7e7 inset}.top-h-row .search input[id^=title-search-input]{color:#b2b2b2;box-shadow:0 0 1px #ededed;-moz-box-shadow:0 0 1px #ededed;-o-box-shadow:0 0 1px #ededed;-webkit-box-shadow:0 0 1px #ededed;border-color:#e6e7e8}.middle-h-row .search input[id^=title-search-input]{color:#b2b2b2;box-shadow:0 0 1px #ededed;-moz-box-shadow:0 0 1px #ededed;-o-box-shadow:0 0 1px #ededed;-webkit-box-shadow:0 0 1px #ededed;border-color:#f2f3f4}.middle-h-row .search input[id^=title-search-input]:focus{color:#b2b2b2;box-shadow:0 0 1px #ddd;-moz-box-shadow:0 0 1px #ddd;-o-box-shadow:0 0 1px #ddd;-webkit-box-shadow:0 0 1px #ddd;border-color:#e8e9ea}table.title-search-result img.item_preview{box-shadow:0 0 15px 5px #fff;-moz-box-shadow:0 0 15px 5px #fff;-o-box-shadow:0 0 15px 5px #fff;-webkit-box-shadow:0 0 15px 5px #fff}table.colored_table{width:100%;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.colored_table thead{border:1px solid #E5E5E5}.colored_table tbody,.colored_table tbody tr td{border-bottom:1px solid #E7E7E7}.colored_table thead tr{background:#F7F7F7}.colored_table tr td{padding:8px 29px}.colored_table tbody{border-left:1px solid #E7E7E7;border-right:1px solid #E7E7E7}.btn_big:hover,.front_slider .read_more:hover{text-shadow:0 1px 0 rgba(0,0,0,.2);-moz-text-shadow:0 1px 0 rgba(0,0,0,.2);-o-text-shadow:0 1px 0 rgba(0,0,0,.2);-webkit-text-shadow:0 1px 0 rgba(0,0,0,.2);border-bottom:2px solid #212121!important;background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+)!important;background:-moz-linear-gradient(top,#848484 0,#464646 100%)!important;background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#848484),color-stop(100%,#464646))!important;background:-webkit-linear-gradient(top,#848484 0,#464646 100%)!important;background:-o-linear-gradient(top,#848484 0,#464646 100%)!important;background:-ms-linear-gradient(top,#848484 0,#464646 100%)!important;background:linear-gradient(to bottom,#848484 0,#464646 100%)!important;filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#848484', endColorstr='#464646', GradientType=0 )!important;color:#fff!important;box-shadow:0 -1px 0 #555 inset;-moz-box-shadow:0 -1px 0 #555 inset;-o-box-shadow:0 -1px 0 #555 inset;-webkit-box-shadow:0 -1px 0 #555 inset}ul.menu li .child.cat_menu hr{border-bottom:1px solid #fff;background:#e7e7e7}.breadcrumbs .dropdown,ul.menu .child .child_wrapp{background:#f5f5f6;box-shadow:0 1px 5px #fafafa;-moz-box-shadow:0 1px 5px #fafafa;-o-box-shadow:0 1px 5px #fafafa;-webkit-box-shadow:0 1px 5px #fafafa}.module_products_list .basket_button.read_more span,.specials_slider.product_slider .catalog_item:hover .basket_button.read_more span{background-position:1px -408px}.top-h-row .search input[id^=title-search-input]:focus{border-color:#ddd;box-shadow:0 0 1px #eee;-moz-box-shadow:0 0 1px #eee;-webkit-box-shadow:0 0 1px #eee;-o-box-shadow:0 0 1px #eee}.question-list .ans{color:#444;border:1px solid #e8e8e8;background:#f2f2f2;border-bottom:1px solid #bdbdbd}.question-list .ans .arr{border-bottom:10px solid #f2f2f2}input.error,textarea.error{border-color:#cb0000}input#COUPON.error{border-color:#cb0000!important}input#COUPON.good{border-color:#00cb00!important}h2.feedback_title{color:#221f26}.bx-touch .bx_item_set_hor_container_big .bx_item_set_del,.bx_item_set_hor_container_big .bx_item_set_hor_item:hover .bx_item_set_del,.bx_kit_item:hover .bx_kit_item_del{background:#e62222}.button30.fast_order{background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwYjBkOCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDdkYjkiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);background:-moz-linear-gradient(top,#00b0d8 0,#007db9 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#00b0d8),color-stop(100%,#007db9));background:-webkit-linear-gradient(top,#00b0d8 0,#007db9 100%);background:-o-linear-gradient(top,#00b0d8 0,#007db9 100%);background:-ms-linear-gradient(top,#00b0d8 0,#007db9 100%);background:linear-gradient(to bottom,#00b0d8 0,#007db9 100%);filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#00b0d8', endColorstr='#007db9', GradientType=0 );border-bottom:1px solid #00699d}.button30.fast_order span{text-shadow:0 1px 1px #006f9c;-moz-text-shadow:0 1px 1px #006f9c;-o-text-shadow:0 1px 1px #006f9c;-webkit-text-shadow:0 1px 1px #006f9c}.bx_filter_container_title>span.name span{color:#221f26;border-bottom:1px dotted #6e6e6e}.bx_filter_vertical .bx_filter_container_title i.arr{background:url(../images/arrows_small.png) -15px -21px no-repeat #fafafa}.bx_filter_vertical .for_button{border-top:1px solid #dadada}.smartfilter .bx_ui_slider_track{background:#dadada}.compare_wrapp{background:#fcfcfc;border:1px solid #f1f1f1;box-shadow:0 0 1px #e7e7e7 inset;-moz-box-shadow:0 0 1px #e7e7e7 inset;-o-box-shadow:0 0 1px #e7e7e7 inset;-webkit-box-shadow:0 0 1px #e7e7e7 inset}.popup,div[id^=CatalogSetConstructor] .popup-window{background:#fff}.popup .close:hover,.popup-window-close-icon.popup-window-titlebar-close-icon:hover{background:#fff;box-shadow:0 0 3px rgba(0,0,0,.2);-moz-box-shadow:0 0 3px rgba(0,0,0,.2);-o-box-shadow:0 0 3px rgba(0,0,0,.2);-webkit-box-shadow:0 0 3px rgba(0,0,0,.2)}.popup .pop-up-title,.popup-window-titlebar .popup-window-top-row .popup-window-center-column span div{text-shadow:0 1px 0 rgba(255,255,255,.57);-moz-text-shadow:0 1px 0 rgba(255,255,255,.57);-o-text-shadow:0 1px 0 rgba(255,255,255,.57);-webkit-text-shadow:0 1px 0 rgba(255,255,255,.57)}.jqmOverlay,.popup-window-overlay{background:rgba(0,0,0,.4);filter:alpha(opacity=100)!important;-moz-opacity:1!important;-khtml-opacity:1!important;opacity:1!important}.bx_filter_vertical .bx_filter_block.scrollable{background:#fff;border:1px solid #cbcbcb;box-shadow:0 0 0 1px #eee inset;-moz-box-shadow:0 0 0 1px #eee inset;-o-box-shadow:0 0 0 1px #eee inset;-webkit-box-shadow:0 0 0 1px #eee inset}.popup-window-overlay{background:rgba(255,255,255,.2)!important}.top-h-row .menu .separator{border-left:1px dotted #c8c8c8}.cart_empty,.count-cell div.error,.module-cart{background:#fff;margin:0 0 20px}.question-list .q a:hover span{border-color:#b4b4b4}.flexslider .light,.flexslider .light .banner_text,.flexslider .light .banner_title,.flexslider .light .banner_title a{color:#fff}.flexslider .light .banner_title{text-shadow:0 0 10px rgba(0,0,0,.3)}.flexslider .light .banner_text{text-shadow:0 0 5px rgba(0,0,0,.6)}.flexslider .dark .banner_title,.flexslider .dark .banner_title a{color:#202020}.flexslider .dark .banner_text{color:#222}body .top_slider_wrapp .flexslider .slides>li .wrapper_inner>table{width:100%}.flexslider .target{position:absolute;width:100%;left:0;right:0;top:0;height:100%;z-index:10}.catalog_block .catalog_item .basket_button.read_more span,.catalog_block .catalog_item .basket_button.to-cart span,.catalog_block .catalog_item .basket_button.to-order span,.catalog_block .catalog_item .basket_button.to-subscribe span{color:#000}.catalog_block .catalog_item .basket_button.in-subscribe span,.specials_slider.product_slider .basket_button.in-subscribe span{color:#fff}.rss_feed_icon:hover{color:#fff!important}.button22.grey:hover span{color:#fff}.button22.grey span{color:#000}.item .dark_block_animate{opacity:0;background-color:rgba(0,0,0,.5);-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";-webkit-transition:opacity .8s cubic-bezier(.19,1,.22,1);transition:opacity .8s cubic-bezier(.19,1,.22,1);position:absolute;display:block;width:100%;height:100%;z-index:2}.item:hover .dark_block_animate{opacity:1;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)"}.scale_block_animate{-webkit-transition:-webkit-transform .6s cubic-bezier(.19,1,.22,1);transition:transform .6s cubic-bezier(.19,1,.22,1);overflow:hidden;position:relative;z-index:1}.menu_top_block li.full .dropdown li .dropdown,header .menu_top_block>li>.dropdown li .dropdown{transition:opacity 0s ease .2s,visibility 0s ease .2s}.item:not(.touch_class):hover .scale_block_animate,.touch_class .scale_block_animate{-webkit-transform:scale(1.25);transform:scale(1.25)}.top-h-row .h-user-block,.top-h-row .search,.top-h-row ul.menu{float:left}.basket_normal #header .top_br{width:100%;height:1px;background:#eaebec;margin:0 0 15px}#header .catalog_menu .wrapper_middle_menu{position:relative}#header .catalog_menu .wrapper_middle_menu .inc_menu{padding-left:220px}.top-h-row .menu.topest{margin:0 0 -1px;padding:0;white-space:nowrap;height:31px;font-size:0;overflow:hidden;width:40%}.top-h-row .menu.topest:hover{overflow:visible}.top-h-row .menu.topest li{display:inline-block;vertical-align:top;padding:0;list-style:none;font-size:12px;line-height:18px;white-space:normal}.top-h-row .menu.topest>li{margin:0 0 0 30px;text-align:center}.top-h-row .menu.topest li:before{display:none}.top-h-row .menu.topest>li:first-child{margin-left:0}.top-h-row .menu.topest li a{position:relative;display:block;padding:9px 0 0}.top-h-row .menu>li>a{color:#777}.top-h-row .menu.topest li.selected>a{color:#333}.top-h-row .menu.topest li.selected>a:after{content:"";position:absolute;left:0;right:0;bottom:-1px;height:1px;z-index:1}.top-h-row .menu.topest li.more{position:relative;padding:10px 0 16px;width:20px;cursor:pointer;z-index:999}.top-h-row .menu.topest li.more>span{display:block;font-weight:700;line-height:15px;letter-spacing:1.5px;color:#777}.top-h-row .menu.topest li.more .dropdown{padding:0;left:-17px;width:191px;margin:0;-webkit-box-shadow:0 0 20px 0 rgba(0,0,0,.07);-moz-box-shadow:0 0 20px 0 rgba(0,0,0,.07);box-shadow:0 0 20px 0 rgba(0,0,0,.07);position:absolute;opacity:0;visibility:hidden;top:90%;z-index:999}.top-h-row .bg_user,.top-h-row .h-user-block a.icon:before{z-index:2;width:21px;height:21px;top:-4px;position:absolute}.top-h-row .menu.topest li.more:hover>.dropdown{opacity:1;visibility:visible;background:#fff}.top-h-row .menu.topest li.more .dropdown>li{margin:0;padding:0;font-size:13px;line-height:14px;border-top:1px solid #f3f3f3;text-align:left;width:100%}.top-h-row .menu.topest li.more .dropdown>li:before{display:none}.top-h-row .menu.topest li.more .dropdown>li:first-child{border-top:none}.top-h-row .menu.topest li.more .dropdown>li>a{line-height:14px;padding:12px 20px 15px}.top-h-row .menu.topest li.more .dropdown>li>a:hover{background:#fbfbfb}.dropdown .has-childs .dropdown .menu_item,.menu_top_block .dropdown .dropdown .menu_item{padding:0 10px 0 0;display:inline-block;width:auto}.top-h-row .phones{float:left;box-sizing:content-box;padding:5px 10px 0 5%}.top-h-row .phone_wrap .phone_text>a{display:inline-block;margin:0 7px 0 0}.top-h-row .phone_wrap{position:relative}.top-h-row .phone_block .phone_wrap .icons{position:absolute;left:0;top:7px;margin:0;width:12px;height:12px;line-height:12px;font-size:14px}.top-h-row .phone_block .phone_wrap .phone_text{padding:0 0 0 18px}.top-h-row .phone_block .order_wrap_btn{margin-left:11px}.top-h-row .order_wrap_btn .callback_btn{font-size:12px;text-transform:none}.phones .phone_wrap{display:inline-block}.phones .phone_wrap a{text-decoration:none;cursor:default}.phone_wrap>span{display:inline-block;vertical-align:middle;position:relative}.order_wrap_btn .callback_btn{display:inline-block;font-size:10px;text-transform:uppercase;letter-spacing:.1px}.phone_wrap .icons{border-radius:100%;color:#000;font-size:16px;margin:2px 5px 0;width:35px;height:35px;text-align:center;line-height:36px}.middle_phone .phone_wrap .icons{position:absolute;left:0;top:50%;margin-top:-16px;color:#fff;background:#ddd}.phone_block .phone_wrap .icons{background:0 0}.middle_phone .phone_wrap .phone_text{padding:0 0 0 48px;display:block}.phone_wrap .phone_text>a{display:block}.top-h-row .phone_wrap .icons{margin-right:8px;display:inline-block;margin-top:2px}.phones .order_wrap_btn{margin:1px 0 0 20px;display:inline-block;vertical-align:middle}.footer_top .phones .order_wrap_btn{margin-left:23px;font-size:12px}.phones .order_wrap_btn:hover{cursor:pointer}.top-h-row .h-user-block{margin-top:8px;float:right;position:relative}.top-h-row .h-user-block a{color:#666;position:relative;text-decoration:none}.top-h-row .h-user-block a.icon{padding:0 19px 0 28px}.top-h-row .h-user-block a.icon:before{left:0;background:url(images/ai.png) -423px -3px no-repeat;content:""}.top-h-row .h-user-block a.icon.reg:before{background-color:#ddd;border-radius:100%}.top-h-row .h-user-block a.icon.has-img:before{display:none}.top-h-row .h-user-block .module-enter{font-size:12px}.top-h-row .bg_user{left:0;border-radius:100%;background-color:#a1a2ac;display:block}#header .middle-h-row .logo_wrapp .logo a{display:inline-block;display:block;zoom:1;vertical-align:middle;margin:0}#header .middle-h-row .logo_wrapp .logo a img{display:block}#header .middle-h-row td{vertical-align:middle;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.counter_block,.menu_top_block *,header .wrapper_middle_menu *{box-sizing:border-box}#header .middle-h-row td.text_wrapp{width:26%;padding:0 3px 0 49px}.bx-ie #header .middle-h-row .logo_wrapp .logo{min-height:47px;line-height:47px}.bx-ie .basket_fly #header .middle-h-row .logo_wrapp .logo{min-height:48px;line-height:48px}#header .middle-h-row .center_block{width:100%;padding:0 45px 0 34px}.has_menu #header .middle-h-row .center_block{padding:2px 40px 0 56px}#header .middle-h-row .main-nav ul.menu>li>a{padding:0 10px}#header .middle-h-row .logo_wrapp .logo div{line-height:61px}.wrapper.has_menu #header .catalog_menu ul.menu>li.current>a,body #header .catalog_menu ul.menu>li,body #header .catalog_menu ul.menu>li:not(.current):not(.stretch):hover,body #header .catalog_menu ul.menu>li>a{border:0}ul.menu li a i{display:inline-block;height:5px;width:8px;background:url(images/arrows.png) no-repeat;zoom:1;position:absolute;top:7px}.wrapper.has_menu .catalog_menu ul.menu li a i{background-position:-1px -143px}.wrapper.m_color_white .catalog_menu ul.menu li a i{background-position:-34px -143px}ul.menu li.more a i{position:static;margin:0 0 2px 11px}.icons_fa:after,li.has-child:before{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.breadcrumbs .dropdown_wrapp,.item .child_container .child_wrapp *,.popup .prompt.remember label,ul.menu .child,ul.menu .child a{font-family:Ubuntu,Arial,Helvetica,sans-serif}.menu_top_block.catalog_block{margin:-23px 0 26px}.light .menu_top_block.catalog_block{margin-top:-24px}.visible_on_ready{visibility:hidden}header .wrap_menu{position:relative;height:47px;border-radius:0;overflow:hidden;background:#fff}.menu_light .wrapper_middle_menu{border:1px solid #e5e5e5;border-left-width:0;border-right-width:0}header .menu_light .menu_top_block>li.catalog>a,header .menu_light .wrap_menu{background:#fff}.header_wrap #header .catalog_menu.menu_light ul.menu>li>a{color:#1d2029}.menu_light .menu_top_block li.catalog>a:before{background-position:0 -42px}.menu_light .menu_top_block li.catalog>a:after{display:none}header .menu_light .menu_top_block li.catalog:after{color:#8a8a8a}header .menu_dark .wrap_menu{background:#424f60}header .menu_dark ul.menu>li:not(.catalog):hover>a{background-color:#556170}.menu_top_block{margin:0;padding:0;position:relative;white-space:nowrap;font-size:0}header .menu_top_block{border-radius:4px;z-index:101}header .menu_top_block>li{display:inline-block;vertical-align:top;font-size:16px;font-weight:500;line-height:22px}.menu_top_block li{margin:0;padding:0;position:relative;white-space:normal}.menu_top_block.catalog_block .dropdown>li.full>a,.menu_top_block>li>a{position:relative;display:block;padding:12px 22px 13px;color:#FFF;white-space:normal}.menu_top_block.catalog_block .dropdown>li.full>a{color:#555}.header_wrap #header .catalog_menu ul.menu>li{height:47px;background:0 0}.header_wrap #header .catalog_menu ul.menu>li.catalog{width:220px}.header_wrap #header .catalog_menu ul.menu.adaptive>li .text,.header_wrap #header .catalog_menu ul.menu>li>a{color:#fff;border:0!important;text-transform:uppercase;font-size:13px;font-weight:600;text-decoration:none}.light .header_wrap #header .catalog_menu ul.menu.adaptive>li .text{color:#1d2029}.light .header_wrap #header .catalog_menu ul.menu.adaptive.opened>li .text,.light .header_wrap #header .catalog_menu ul.menu.adaptive>li:hover .text{color:#fff}.light .header_wrap #header .catalog_menu ul.menu.adaptive>li:after{background-position:0 -42px!important}.light .header_wrap #header .catalog_menu ul.menu.adaptive.opened>li:after,.light .header_wrap #header .catalog_menu ul.menu.adaptive>li:hover:after{background-position:0 0!important}.menu_top_block li .dropdown{position:absolute;width:220px;margin:0;background:#FFF;border:none;-webkit-box-shadow:0 1px 5px 0 rgba(0,0,0,.2);-moz-box-shadow:0 1px 5px 0 rgba(0,0,0,.2);box-shadow:0 1px 5px 0 rgba(0,0,0,.2);display:none;opacity:1;visibility:visible}.menu_top_block.catalogfirst li.full .dropdown,.menu_top_block>li.full .dropdown,header .menu_top_block li.catalog>.dropdown{box-shadow:none}.left_menu>li>a,body .menu_top_block.catalog_block .dropdown>li.full>a,header .menu_top_block li.catalog>.dropdown>li>a{border:1px solid #eaebec;border-bottom-width:0;background:#f9f9f9;position:relative}body .menu_top_block.catalog_block .dropdown>li.full:first-child>a{border-top-width:0}.left_menu>li:last-child>a,body .menu_top_block.catalog_block .dropdown>li:last-child>a,header .menu_top_block li.catalog>.dropdown>li:last-child>a{border-bottom-width:1px}.menu_top_block.catalog_block .dropdown>li.full:hover>a,header .menu_top_block li.catalog>.dropdown>li.current>a,header .menu_top_block li.catalog>.dropdown>li:hover>a{background:#fff}.menu_top_block.catalog_block .dropdown>li.full.current:hover>a:after,.menu_top_block.catalog_block .dropdown>li.full.current>a,.menu_top_block.catalog_block .dropdown>li.full.current>a:after,header .menu_top_block li.catalog>.dropdown>li.current:hover>a,header .menu_top_block li.catalog>.dropdown>li.current:hover>a:after,header .menu_top_block li.catalog>.dropdown>li.current>a,header .menu_top_block li.catalog>.dropdown>li.current>a:after{color:#fff!important}.left_menu>li:hover>a:before,.menu_top_block.catalog_block .dropdown>li.full:hover>a:before,header .menu_top_block li.catalog>.dropdown>li:hover>a:before{content:"";position:absolute;left:0;top:0;width:3px;height:100%;background:#ddd;display:block}.menu_top_block.catalog_block .dropdown>li>.dropdown,header .menu_top_block>li>.dropdown{z-index:3;display:none;top:auto;left:0;margin:0;min-width:100%;opacity:1;visibility:visible}.menu_top_block.catalog_block>.dropdown>li,header .menu_top_block li .dropdown>li{display:block;width:100%}.light header .inc_menu .menu_top_block>li>.dropdown{margin-top:1px!important}.menu_top_block li.full .dropdown li .dropdown{background:0 0;opacity:0;display:block;visibility:hidden;box-shadow:none;border:none;width:100%;position:static;top:auto;left:auto;margin:11px 0 0}body .menu_top_block li.full .dropdown>li>a{padding:0;background:rgba(0,0,0,0);font-size:13px;line-height:16px}body .menu_top_block li.full .dropdown>li>a.section1{background:#fff!important}.menu_top_block li .dropdown>li>a{display:block;padding:11px 33px 13px 15px;font-size:13px;text-align:left}body .menu_top_block li .dropdown>li>a{color:#555;background:#FFF}header .menu_top_block>li:not(.catalog) .dropdown>li>a{border-bottom:1px solid #eaebec}header .menu_top_block li .dropdown>li:last-child>a{border-bottom-width:0}.menu_top_block.catalog_block .dropdown>li>.dropdown,header .menu_top_block li .dropdown>li>.dropdown{left:100%;top:0;width:241px}header .menu_top_block li .dropdown>li>.dropdown{top:1px}.menu_top_block .dropdown>li.full>.dropdown,.menu_top_block.catalogfirst li.full>.dropdown{padding:20px 0;box-shadow:0 20px 20px 0 rgba(0,0,0,.1);opacity:0;display:none;transition:opacity 0s ease .33s,visibility 0s ease .33s;visibility:hidden;min-width:500px}.menu_top_block li.full:hover>.dropdown{display:block}.menu_top_block.catalog_block .dropdown>li.full>.dropdown,.menu_top_block.catalogfirst li.full>.dropdown{box-shadow:0 2px 10px 0 rgba(0,0,0,.1);max-width:940px;width:940px}.hide_catalog .menu_top_block.catalog_block{display:none}header .menu_top_block li .dropdown li:hover>.dropdown{z-index:1;opacity:1;visibility:visible}.menu_top_block li.full:hover>.dropdown,.menu_top_block li.full:hover>.dropdown .dropdown,header .menu_top_block.catalogfirst li.full:hover>.dropdown,header .menu_top_block.catalogfirst li.full:hover>.dropdown .dropdown{opacity:1;visibility:visible}.menu_top_block li.full{position:initial}.menu_top_block li.full.m_line{position:relative;z-index:20}.menu_top_block li.full.m_line .dropdown{min-height:auto!important}header .catalog_menu_ext{position:absolute;top:0;left:0;width:220px}header .menu_top_block>li.more>a:before{content:"";position:absolute;left:50%;top:50%;margin:-2px 0 0 -8px;width:15px;height:3px;background:url(images/ai.png) -157px -10px no-repeat}header .menu_light .menu_top_block>li.more>a:before{background-position:-118px -10px}.left_menu>li>a,.menu_top_block.catalog_block .dropdown>li.full>a,header .menu_top_block li .dropdown>li>a{display:block;padding:11px 31px 13px 17px;background:#f9f9f9;text-decoration:none;text-align:left}body header#header .catalog_menu .menu_top_block>li.current>a,header .menu_top_block li .dropdown>li.current>a,header .menu_top_block li .dropdown>li:hover>a{color:#fff}header .menu_top_block>li.more>a{height:47px}.menu_top_block li.catalog>a,.menu_top_block.catalog_block .dropdown>li>a{position:relative;padding-left:41px;padding-right:120px}.menu_top_block li.catalog>a:after,.menu_top_block li.catalog>a:before{position:absolute;content:"";display:block}.menu_top_block.catalog_block .dropdown>li>a{padding:11px 31px 13px 17px}.menu_top_block li.catalog>a:before{top:12px;left:12px;width:20px;height:20px;background:url(images/ai.png) no-repeat}.menu_top_block li.catalog>a:after{top:0;right:0;width:1px;height:100%;background:#fff;opacity:.1}body .menu_top_block.catalog_block .dropdown>li>a{font-size:13px;color:#555}.menu_top_block.catalog_block .dropdown>li.full>.dropdown>li,header .menu.top.catalogfirst li.full>.dropdown>li{padding:5px 30px 20px 24px;float:left;width:33%}.menu_top_block.catalog_block .dropdown>li.full>.dropdown>li>.image,header .menu_top_block.catalogfirst li.full>.dropdown>li>.image{width:50px;height:50px;line-height:50px;text-align:center;float:left}.menu_top_block.catalog_block .dropdown>li.full>.dropdown>li>.image img,header .menu_top_block.catalogfirst li.full>.dropdown>li>.image img{vertical-align:middle}.menu_top_block.catalog_block .dropdown>li.full>.dropdown>li>a,header .menu_top_block.catalogfirst li.full>.dropdown>li>a{font-size:13px;line-height:20px;padding:10px 0 0 70px;font-weight:600;background:0 0;color:#333}.menu_top_block.catalog_block .dropdown>li.full>.dropdown>li.current>a.section,.menu_top_block.catalog_block .dropdown>li.full>.dropdown>li>a:hover,header .menu_top_block.catalogfirst li.full>.dropdown>li>a.section:hover{color:#333}.menu_top_block.catalog_block .dropdown>li.full>.dropdown>li>.dropdown,header .menu_top_block.catalogfirst li.full>.dropdown>li>.dropdown{padding:0 0 0 70px;margin-top:9px;text-align:left}.menu_top_block li.full>.dropdown>li:nth-child(3n+1){clear:both}header .menu_top_block li .dropdown>li>.dropdown.toleft{border-right:1px solid #e9e9e9;border-left:none;left:inherit;right:100%}header .menu_top_block li .dropdown>li.has-child a{position:relative}.left_menu>li.has-childs>a:after,.menu_top_block.catalog_block .dropdown>li.has-child>a:after,header .menu_top_block li .dropdown>li.has-child>a:after,header .menu_top_block li.catalog:after{content:"\f107";color:#fff;position:absolute;right:16px;top:50%;margin:-3px 0 0;width:12px;height:8px;display:block!important}.bx-firefox .left_menu>li.has-childs>a:after,.bx-firefox .menu_top_block.catalog_block .dropdown>li.has-child>a:after,.bx-firefox header .menu_top_block li .dropdown>li.has-child>a:after,.bx-firefox header .menu_top_block li.catalog:after{margin-top:-4px}.left_menu>li.has-childs>a:after,header .menu_top_block li.catalog:after{font-size:13px;top:21px;text-align:right;cursor:pointer}.left_menu>li.has-childs>a:after,.menu_top_block.catalog_block .dropdown>li.has-child>a:after,header .menu_top_block li .dropdown>li.has-child>a:after{font-size:13px;top:19px;text-align:right;color:#8a8a8a;content:"\f105"}.left_menu>li.has-childs.current>a:after{color:#fff!important;content:"\f107"}header .menu_top_block li .dropdown>li:hover>a:after,header .menu_top_block li:not(.catalog) .dropdown>li.current>a:after{color:#fff}.light header .catalog_menu_ext .menu_top_block>li.catalog>a{background-color:#fff}.mobile_menu_wrapper{position:relative}header .mobile_menu{display:none;position:absolute;top:0;left:0;width:100%;background:#fff;z-index:999}#header .catalog_menu .wrap_menu ul.menu.adaptive:hover{cursor:pointer}#header .catalog_menu .wrap_menu ul.menu.adaptive>li.menu_opener{border:0;display:block;width:100%;padding:0 17px}.header_wrap #header .catalog_menu ul.menu.adaptive>li{height:47px;line-height:47px;position:relative}.header_wrap #header .catalog_menu ul.menu.adaptive>li:after{position:absolute;top:12px;right:17px;content:"";display:block!important;width:20px;height:20px;background:url(images/ai.png) no-repeat}.mobile_menu_wrapper .mobile_menu li{background:#f9f9f9;border-top:1px solid #eaebec;position:relative}.mobile_menu_wrapper .mobile_menu li:before{display:none}.mobile_menu_wrapper .mobile_menu li.has-child:before{display:block;content:"\f107";color:#1d2029;position:absolute;right:16px;top:12px;width:12px;height:8px}#header .wrapper_middle_menu.wrap_menu ul.mobile_menu li.current:before,.mobile_menu_wrapper .mobile_menu li.has-child:hover:before{color:#fff}.mobile_menu_wrapper .mobile_menu li a{padding:0 31px 0 17px;display:block;font-size:13px;text-decoration:none;height:40px;line-height:41px;border-bottom:1px solid transparent;color:#333}#header .wrapper_middle_menu.wrap_menu ul.mobile_menu li.current>a,#header .wrapper_middle_menu.wrap_menu ul.mobile_menu li:hover>a{color:#fff!important}ul.mobile_menu .dropdown{font-size:13px;display:none;margin:0;padding:0 0 0 20px}ul.mobile_menu .search{box-shadow:0 1px 1px 0 rgba(0,0,0,.3);width:100%;display:block!important;padding:13px;background:#e0e7ea!important;border:none;position:absolute;right:0;top:100%;z-index:9}ul.mobile_menu .search .search-input-div{width:100%;padding-right:63px}ul.mobile_menu .search .search-button-div{position:absolute;right:14px;top:13px}ul.mobile_menu .search .search-button-div button{padding:9px 13px 10px;border-top-left-radius:0;border-bottom-left-radius:0}ul.mobile_menu .search .search-input-div input{border:0;font-size:13px}body #header .catalog_menu .child{margin-top:0;padding-top:0}body #header ul.menu li .child .child_wrapp{border:0;background:#f7f7f9;box-shadow:0 2px 5px rgba(0,0,0,.15);border-radius:0;padding:35px 40px 17px}body #header ul.menu.bottom li .child .child_wrapp:not(.clearfix){padding:27px 40px 21px}.breadcrumbs .dropdown_wrapp,ul.menu .child{z-index:500;position:absolute;text-transform:none;font-size:11px;padding-top:20px}ul.menu .child{margin-top:0;padding-top:32px}.basket_fly ul.menu .child,.bx-firefox .wrapper ul.menu .child,.bx-ie .wrapper ul.menu .child{margin-top:-1px}ul.menu .child a{text-transform:none}ul.menu .child li.menu_title{display:block;margin:0 0 6px}ul.menu .child li.menu_title a{font-weight:400;font-size:14px;text-decoration:none;padding:0}ul.menu .child li.menu_item a{font-size:12px;text-decoration:none;padding:0;margin:0 8px 0 0;line-height:20px}ul.menu .child .child_wrapp .depth3>a,ul.menu .child .child_wrapp>a{display:block;text-decoration:none;line-height:20px;text-transform:none}ul.menu .child .child_wrapp .depth3>a{margin-left:15px}ul.menu .child .child_wrapp .depth3 a.title,ul.menu .more .child .child_wrapp .depth3>a{margin-left:0}ul.menu .more .child .child_wrapp .depth3>a.title{color:#000;margin-bottom:5px;font-size:12px}ul.menu .more .child .child_wrapp .depth3{margin-bottom:8px}.wrapper.has_menu .white #header .catalog_menu ul.menu>li.current,.wrapper.has_menu .white #header .catalog_menu ul.menu>li:not(.current):hover{background:0 0}.wrapper.has_menu .white #header .catalog_menu ul.menu>li.active,.wrapper.has_menu .white #header .catalog_menu ul.menu>li.active:hover{background:#efefef}body #header ul.menu li .child.line .child_wrapp{padding:0;box-shadow:0 2px 5px rgba(0,0,0,.15)}body #header ul.menu li .child.line .child_wrapp>a{padding:9px 20px 10px;border-bottom:1px solid #fff;background:#f7f7f9}body #header ul.menu li .child.line .child_wrapp>a.current,body #header ul.menu li .child.line .child_wrapp>a:hover{background:#fff}.search_middle_block{position:relative}.search_middle_block .form-control{margin:0}.bx-ie .search_middle_block .form-control input.big{line-height:17px}.top-h-row input.big{padding:8px 13px 7px}.middle-h-row .search_middle_block.active .middle_form{width:96%;display:block;opacity:1;visibility:visible}.middle-h-row .search_middle_block .middle_form{opacity:0;visibility:hidden;width:0;top:-1px;right:32px;position:absolute;-webkit-transition:width .25s ease-in;-moz-transition:width .25s ease-in;-o-transition:width .25s ease-in;transition:all .25s ease-in;overflow:hidden}#header .middle-h-row .center_block .stitle_form .button:hover,.basket_wrapp .basket_block .link:hover+.wraps_icon_block:before,.basket_wrapp .wraps_icon_block:hover:before,.center_block .search_block .icon:hover,.top-h-row.form_mobile_block .button:hover{opacity:.8}.middle-h-row .search .small_block{font-size:14px;color:#969696;padding:8px 45px 9px 15px;border-radius:4px}.bx-firefox .middle-h-row .search .small_block{padding-top:7px;padding-bottom:10px}.search_middle_block.active .middle_form{right:32px}.search_middle_block.active+.search_block{position:relative}.middle-h-row .search_middle_block .middle_form .noborder{background:0 0;border:0;display:inline-block;width:auto;position:absolute;right:0;top:0;padding:11px 13px 14px;text-transform:none}.bx-chrome .middle-h-row .search_middle_block .middle_form .noborder{padding-top:13px}.middle-h-row .search_middle_block .middle_form .big{padding-right:100px;background:#e7e7e7;border-color:transparent;padding-left:18px}.center_block .search_block .icon.open,.h_color_colored .header_wrap .center_block .search_block .icon.open{background-position:-169px -175px;right:-10px;top:2px;position:absolute;width:40px;height:38px}#header .middle-h-row .center_block .search{margin:0;position:relative;zoom:1;display:none;width:100%}#header .middle-h-row .center_block .middle_phone{display:none;min-width:174px}.wrapper #header .middle-h-row .center_block .middle_phone,.wrapper #header .middle-h-row .center_block .search{display:inline-block;vertical-align:middle;transition:margin ease .25s}.middle_phone .phones .phone_text a{font-size:18px;font-weight:600;display:block;line-height:18px}.middle_phone .phones .order_wrap_btn{display:block;margin:0 0 0 48px}.header_wrap.colored .middle_phone .phones .order_wrap_btn{color:#fff}body table.title-search-result td.title-search-all a:hover span.text{border-bottom-width:0}#header .middle-h-row .center_block .stitle_form .button,.top-h-row .form_mobile_block .button{width:39px;height:39px;background:url(images/ai.png) -65px 8px no-repeat;position:absolute;top:0;right:0;border:0}.bx-ie #header .middle-h-row .center_block .stitle_form .button{top:-2px}.top-h-row .form_mobile_block .button{text-indent:-9999px;top:1px}#header .middle-h-row .center_block .stitle_form .text{padding:10px 45px 9px 13px;background:#eee;border-color:transparent;height:41px}.stitle_form .form-control{margin-bottom:0;padding:0;border:0;height:auto}#header ul.menu.full>li.search_row #search-submit-button i,.middle-h-row .search #search-submit-button i,.top-h-row .search #search-submit-button i{background:url(images/icons_wish.png) -60px -173px no-repeat}#header ul.menu.full>li.search_row #search-submit-button i{background-position-y:-173px}#header ul.menu.full>li.search_row #search-submit-button:hover i,.middle-h-row .search #search-submit-button:hover i,.top-h-row .search #search-submit-button:hover i{background-position:-138px -132px}.center_block .search_block{float:right}.center_block .search_block .icon{display:inline-block;width:18px;height:20px;background:url(images/icons_wish.png) -66px -177px no-repeat;position:relative;top:10px;cursor:pointer}.basket_wrapp .wraps_icon_block.ndelay:hover:before{opacity:1}.top-h-row .form_mobile_block .search_middle_block{display:none}.basket_fly #header .middle-h-row .basket_wrapp .middle_phone{min-width:190px;white-space:nowrap;position:relative;top:9px}.basket_fly .basket_wrapp .basket_fly .wraps_icon_block{display:inline-block;float:none;top:39%;margin:0 6px 0 0}.basket_fly .basket_wrapp .basket_fly .small .wraps_icon_block{margin-right:6px}.basket_fly .basket_wrapp .basket_fly .wraps_icon_block.delay .count span{background:#ddd;color:#fff}#header .basket_fly .opener{position:absolute;width:60px;left:-60px;border-radius:4px 0 0 4px;-moz-border-radius:4px 0 0 4px;-webkit-border-radius:4px 0 0 4px;top:0;background:#424f60;overflow:hidden}#header .basket_fly .opener>div{display:inline-block;text-align:center;width:60px;height:60px;cursor:pointer;vertical-align:top;zoom:1;position:relative}#header .basket_fly .opener>div .count.empty_items,#header .basket_fly tr.hidden{display:none}#header .basket_fly .opener .wish_count.empty .icon{background:0 0}.basket_sort ul.tabs li{height:auto;padding-bottom:3px;margin-right:8px;margin-top:0}.middle .basket_sort ul.tabs li:first-child{padding-left:0}.basket_sort ul.tabs li:last-child{margin-right:0}.basket_sort ul.tabs li.cur div{border-bottom:2px solid #ddd}.basket_sort ul.tabs li span{font-size:16px;line-height:20px;font-weight:500;border-bottom:0}.basket_sort ul.tabs li .wrap_li>span{padding-bottom:6px;padding-top:3px}.basket_sort .remove_all_basket{position:relative;margin:0;float:right;display:none;padding:6px 12px 5px}.basket_sort .remove_all_basket.cur{display:block}.basket_sort .basket_print:before,.basket_sort .remove_all_basket:before,.bx_sort_container .wrap_remove_button .button:before{content:"";display:inline-block;height:14px;width:9px;background:url(images/close_icons.png) -2px -26px no-repeat;vertical-align:middle;margin:0 7px 0 0}.basket_sort .basket_print:before{background:url(images/ai.png) -28px -85px no-repeat;width:16px;top:-1px;position:relative}#header .basket_fly .opener>div:after{background:#e7edf2;opacity:.2;content:"";display:block;width:100%;height:1px;position:absolute;bottom:0;left:0}#header .basket_fly .opener>div:last-child:after{display:none}#header .basket_fly .opener>div:not(.basket_count):hover{background:#5e6978}#header .middle-h-row .basket_wrapp{vertical-align:middle;text-align:right}#header .basket_wrapp .module-cart td,.basket_wrapp .module-cart td,.counter_block{vertical-align:top}.basket_wrapp .module-cart td,.coupons_list{text-align:left}#header .middle-h-row .basket_fly .basket_wrapp{margin-top:27px;padding-top:0}.middle .tabs_content.basket{margin:27px 0 0}.basket_wrapp .module-cart{margin-top:0}.basket_wrapp .module-cart.delayed{overflow-x:hidden;overflow-y:auto;padding:0 0 26px}.coupons_list{padding:0 0 0 84px}.coupons_list .bx_ordercart_coupon{clear:both;position:relative;margin:14px 0 0}.coupons_list .bx_ordercart_coupon+.bx_ordercart_coupon{margin-top:9px}.coupons_list .bx_ordercart_coupon .coupon_text{background:#fff;display:inline-block;position:relative;padding:0 10px 0 0}.coupons_list .bx_ordercart_coupon .coupon_text:before{content:"";display:inline-block;height:9px;width:11px;background:url(images/icons_wish.png) -19px -3px no-repeat;margin:0 6px 0 0}.coupons_list .bx_ordercart_coupon:before{content:"";width:100%;display:block;height:1px;border-bottom:1px dotted #C3C3C3;top:50%;position:absolute}.coupons_list .bx_ordercart_coupon.not_found .coupon_text:before{background-position:-102px -86px}.coupons_list .bx_ordercart_coupon.not_apply .coupon_text:before{background-position:-4px -3px}.coupons_list .bx_ordercart_coupon .remove{position:absolute;top:2px;right:0;z-index:1}.coupons_list .bx_ordercart_coupon .bx_ordercart_coupon_notes{float:right;background:#fff;display:inline-block;position:relative;padding:0 27px 0 10px}#header .basket_wrapp .module-cart.delayed{max-height:250px}.basket_wrapp .module-cart thead tr{background:#f7f7f7}.basket_wrapp .module-cart .goods{max-height:260px;overflow-y:auto;border-bottom:1px solid #e7e7e7}.basket_wrapp .module-cart .cost.prices .price{margin-left:0}#header .basket_fly{border-radius:0 0 0 2px;-moz-border-radius:0 0 0 2px;-webkit-border-radius:0 0 0 2px;top:180px;z-index:100;position:fixed;width:800px;right:-800px}.basket_wrapp .basket_sort ul.tabs{position:relative;zoom:1}.basket_wrapp .basket_sort{padding:0}.middle .basket_wrapp{margin:-13px 0 0}#header .basket_wrapp .basket_sort{padding:25px 10px 0 15px;text-align:left}.basket_wrapp .module-cart .quantity-th,body .basket_wrapp .module-cart td.count-cell{text-align:center}.middle .module-cart thead{border:1px solid #e5e5e5}#header .basket_fly .module-cart .colored tbody{border-left-width:0;border-right-width:0;border-bottom:none}#header .basket_fly .coupon{white-space:nowrap}#header .basket_fly .basket_title{font-size:26px;margin-right:48px;margin-left:13px;font-weight:600}#header .basket_fly .basket_wrapp .itog tfoot .row_titles{text-align:right}.basket_wrapp .module-cart table td{padding:8px 10px}.middle .basket_wrapp .module-cart table td{padding:8px 25px}.middle .basket_wrapp .module-cart table tbody td{padding-bottom:19px}.middle .basket_wrapp .module-cart table tbody td .item_props .item_prop{display:block}.basket_wrapp .module-cart table tbody td{padding:0 10px 19px}.middle .module-cart table tbody td{padding:0 29px 19px}#header .basket_wrapp .module-cart table tbody td{padding-bottom:9px}#header .basket_fly .module-cart table td.thumb-cell{padding:11px 18px 10px 29px}.middle .basket_wrapp .module-cart table td.thumb-cell{padding-top:19px;padding-right:1px;width:153px}#header .basket_fly .module-cart table td.name-cell{padding-top:32px;min-width:150px}.module-cart table td.name-cell .item_props .item_prop,.module-cart table td.name-cell div[class^=bx_item_detail_]{clear:both;font-size:12px;font-weight:400;display:block}.module-cart table td.name-cell div[class^=bx_item_detail_] span.titles{float:left;line-height:16px}.module-cart table td.name-cell div[class^=bx_item_detail_] .values{float:left;margin:0 0 0 3px;line-height:16px}.module-cart table td.name-cell div[class^=bx_item_detail_] .values ul li:before{content:"";display:none}.module-cart table td.name-cell div[class^=bx_item_detail_] .values ul li,.module-cart table td.name-cell div[class^=bx_item_detail_] .values ul li *{line-height:16px}.module-cart table td.name-cell div[class^=bx_item_detail_] .values ul li.bx_active{display:block;background:0 0;color:#888}.module-cart table td.name-cell div[class^=bx_item_detail_] .values ul li{display:none}.middle .module-cart table td.name-cell{padding-top:54px;white-space:normal}#header .basket_fly .module-cart table td.cost-cell{padding-top:33px;width:200px}#header .basket_fly .module-cart table td.cost-cell.notes{padding-top:10px}.middle .module-cart table td.cost-cell{padding-top:55px;width:230px}.middle .module-cart table td.cost-cell.notes{padding-top:32px}#header .basket_fly .module-cart table tr td.count-cell{padding-top:26px;width:132px}.module-cart table tr td.count-cell{font-size:14px;line-height:16px}.middle .module-cart table td.delay-cell,.middle .module-cart table td.remove-cell{padding:0 5px}#header .basket_fly .module-cart.delayed table tr td.count-cell{padding-top:34px}.middle .module-cart table tr td.count-cell{padding-top:42px;width:185px}.middle .module-cart.delayed table tr td.count-cell{padding-top:56px}#header .basket_fly .module-cart table td.summ-cell{width:150px;padding-top:33px}.middle .module-cart table td.summ-cell{width:200px;padding-top:56px}.basket_wrapp .module-cart .cost-cell .cost.prices,.basket_wrapp .module-cart .cost-cell .cost.prices .price_name{text-align:left}.basket_wrapp .module-cart .cost .price,.basket_wrapp .module-cart .cost .price.discount strike{color:#373737}.basket_wrapp .module-cart .cost.prices .price{margin-top:0}.basket_wrapp .module-cart .cost.prices .price:not(.discount){margin-right:4px;float:left;white-space:nowrap}.basket_wrapp .module-cart .cost.prices .sale_block{margin-top:4px}#header .basket_fly .module-cart table td.delay-cell{padding-top:25px;padding-bottom:0}.middle .module-cart table tbody td.delay-cell{padding-top:48px;width:43px}#header .basket_fly li[item-section=DelDelCanBuy] .module-cart table td.delay-cell .icon{float:left;top:0}.basket_wrapp .module-cart .summ-cell .cost.prices .price{margin:0}#header .basket_fly .module-cart table td.remove-cell{width:20px;padding-top:5px;padding-right:5px}.middle .module-cart table td.remove-cell{width:20px;padding-top:5px}#header .module-cart table td.cell{padding-top:32px}.middle .module-cart table td.cell,.middle .module-cart table td.weight-cell{padding-top:55px}.counter_block{border:1px solid #e5e5e5;font-size:0;width:84px;margin:0 auto;display:inline-block;border-radius:2px;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;height:30px}.counter_block.big_basket{width:122px;text-align:center;height:auto}.counter_block input[type=text]{width:34px;border:0;border-left:1px solid #e5e5e5;border-right:1px solid #e5e5e5;background:#f7f7f7;color:#666;font-size:13px;height:28px;border-radius:0;text-align:center;line-height:13px}.bx-firefox .counter_block input[type=text]{padding-top:7px}.counter_block.big_basket input[type=text]{font-size:13px;height:34px;width:65px}.counter_block .minus,.counter_block .plus{font-size:0;line-height:28px;height:28px;width:24px;display:inline-block;cursor:pointer;vertical-align:top}.counter_block.big_basket>span{line-height:34px;height:34px;width:28px}.module_product_list .counter_block .minus,.module_product_list .counter_block .plus{height:24px;width:24px}.counter_block>span:before{opacity:.7;display:inline-block;content:"";width:24px;height:28px;background:url(images/ai.png) -21px -191px no-repeat;vertical-align:middle}.counter_block.big_basket>span.minus:before{background-position:-82px -191px}.counter_block.big_basket>span.plus:before{background-position:-52px -191px}.counter_block>span.plus:before{background-position:5px -191px}.counter_block>span:hover:before{opacity:1}.counter_block input[type=text]{padding:7px 3px}.counter_wrapp{font-size:0;padding:15px 0 0;white-space:nowrap}.counter_wrapp .counter_block{margin:0 10px 0 0}.button_block{display:inline-block;vertical-align:top}.counter_wrapp .button_block.wide{display:block;margin:0;width:100%}.counter_wrapp .button_block.wide .button{display:block}.button.in-cart i{display:inline-block;width:11px;height:13px;background:url(images/icons_wish.png) -49px -5px no-repeat;vertical-align:middle;margin:0 8px 0 0}#header .basket_fly .module-cart .colored tfoot td.total_wrapp.hidden,.basket_wrapp .module-cart table.bottom.middle td.row_values .item_title{display:none}.count-cell div.error,.count-cell div.error *{line-height:15px;font-size:12px;margin:6px 0 10px}#header .count-cell div.error,#header .count-cell div.error *{font-size:11px}.catalog_detail a.compare_item i,.catalog_detail a.wish_item i,.display_list a.compare_item i,.display_list a.wish_item i,.module-cart a.wish_item .icon i{background:url(images/icons_wish.png) no-repeat}.module-cart a.wish_item .icon i{background-position:5px -14px}.module-cart a.wish_item.to_basket .icon i{background-position:-31px -200px}.catalog_detail .big_btn.slide_offer{margin:0 0 20px}.catalog_detail .button.one_click{white-space:nowrap}.catalog_detail .tabs_section .tabs_content .prices_tab{overflow-x:auto}#header .basket_fly .module-cart table td.thumb-cell a{width:70px;height:70px;line-height:70px;text-align:center}.module-cart table td.thumb-cell a{width:100px;height:100px;line-height:100px;text-align:center}#header .basket_fly .module-cart .colored tfoot{border:0}.module-cart .colored tfoot td{border-bottom:0;padding:26px 0 22px;vertical-align:top}.module-cart .colored tfoot .bottom_btn td{padding:35px 15px 52px}#header .module-cart .colored tfoot .bottom_btn td{padding-bottom:28px;padding-top:29px}.module-cart tfoot .bottom_btn td .description{font-size:12px;line-height:16px;color:#b3b3b3;margin-top:13px;width:100%;text-align:left}.module-cart tfoot .bottom_btn td .description *{line-height:16px}.module-cart td .text .close,.module-cart tfoot .bottom_btn td .close{float:none;opacity:1;text-shadow:none}#header .basket_fly .module-cart .colored tfoot td.total_wrapp{padding:0}#header .basket_fly .module-cart .colored tfoot td.total_wrapp .more_row{margin:20px}.module-cart .colored tfoot td.row_titles{text-align:right;margin:0}.module-cart .colored tfoot td.row_titles .item_title{margin:0 43px 0 0}.module-cart .colored tfoot td.row_values .wrap_prices{width:202px}.module-cart .colored tfoot td.row_values .wrap_prices .price+.price{margin-top:0}.bottom.middle td>.coupon{float:left}.bottom.middle td>.coupon .coupon-t{width:70px;float:left;line-height:16px;margin:0 14px 0 0;text-align:left}.bottom.middle td>.coupon #COUPON{width:267px;max-width:267px;float:left;margin:0 3px 0 0}.bottom.middle td>.coupon .coupon_wrap{position:relative;display:inline-block;vertical-align:top}.bottom.middle td>.coupon .coupon_wrap label.error{top:-16px;right:3px}.bottom.middle .total.item_title{float:right;margin-top:11px}.bottom.middle .top_total_row{border-bottom:1px solid #e5e5e5}.basket_wrapp .module-cart table.bottom.middle td.row_titles .item_title{display:none}.basket_wrapp .module-cart table.bottom.middle .bottom_btn .backet_back_wrapp{padding-left:0!important}.basket_wrapp .module-cart table.bottom.middle .bottom_btn .backet_back_wrapp>*+*{margin-top:17px}.basket_wrapp .module-cart table.bottom.middle .bottom_btn .basket_checkout_wrapp{text-align:right;white-space:nowrap}.basket_wrapp .module-cart table.bottom.middle .bottom_btn .basket_checkout_wrapp .basket_checkout{float:right;width:175px;white-space:normal}.basket_wrapp .module-cart table.bottom.middle .bottom_btn .basket_checkout_wrapp .description{text-align:right}.basket_wrapp .module-cart table.bottom.middle .bottom_btn .basket_fast_order_wrapp{white-space:nowrap}.basket_wrapp .module-cart table.bottom.middle .bottom_btn .basket_fast_order_wrapp .basket_fast_order{width:175px;white-space:normal}.basket_wrapp .module-cart table.bottom.middle .bottom_btn .basket_fast_order_wrapp .button{display:block}.basket_wrapp .module-cart table.bottom.middle .bottom_btn td:last-of-type{padding-right:0!important;text-align:left}.basket_wrapp .module-cart table.bottom.middle .bottom_btn td:last-of-type>*{float:left!important}.basket_wrapp .module-cart table.bottom.middle .bottom_btn td:last-of-type .description{text-align:left}.basket_wrapp .module-cart table.bottom.middle .bottom_btn td.to_leftside{float:left!important;height:inherit!important;margin:0!important}.basket_wrapp .module-cart table.bottom.middle .bottom_btn td.to_leftside>:last-of-type{margin-bottom:18px}.basket_wrapp .module-cart table.bottom.middle .bottom_btn td.to_leftside .description{display:none}.basket_wrapp .module-cart table.bottom.middle .bottom_btn td.to_leftside:last-of-type>*{margin-bottom:0}.basket_wrapp .module-cart table.bottom.middle .bottom_btn td.empty:not(.to_leftside){padding:0!important}.basket_wrapp .module-cart table.bottom.middle td{display:inline-block!important;float:left!important;margin-top:30px;padding:0 50px 0 0;vertical-align:top;margin-bottom:18px}.basket_wrapp .module-cart table.bottom.middle .bottom_btn{display:block;overflow:hidden;padding-top:35px}.basket_wrapp .module-cart table.bottom.middle .bottom_btn td{display:inline-block!important;float:left!important;padding:0 50px 0 0;vertical-align:top;margin-top:0}.basket_wrapp .module-cart table.bottom.middle td.row_values{float:right!important;margin-top:39px;padding-right:0!important;width:246px;padding-left:25px}.basket_wrapp .module-cart table.bottom.middle td.row_titles{text-align:right;padding-right:25px;padding-left:0!important}.basket_wrapp .module-cart table.bottom.middle .bottom_btn .back_btn .basket_checkout,.basket_wrapp .module-cart table.bottom.middle .bottom_btn .back_btn .basket_fast_order{display:none}.basket_normal .basket_wrapp .header-cart>div,.top_inner .content_menu>div{min-height:0!important}.basket_wrapp .wrapp_all_icons{width:207px;padding:20px 0 0}.basket_normal .basket_wrapp .wrapp_all_icons{width:231px;display:inline-block;text-align:left}.basket_wrapp .icon_block,.basket_wrapp .wraps_icon_block{width:17px;height:16px;position:relative;float:left}.bx-firefox .basket_normal .basket_wrapp .wrapp_all_icons,.bx-ie .basket_normal .basket_wrapp .wrapp_all_icons{padding-top:21px}.basket_wrapp .header-compare-block,.basket_wrapp .wraps_icon_block{margin:0 37px 0 0}.basket_normal .basket_wrapp .header-compare-block{margin-right:33px}.header-compare-block{opacity:0}.basket_wrapp .wraps_icon_block{cursor:pointer}.basket_wrapp .wraps_icon_block:before{background:url(images/ai.png) no-repeat;width:20px;height:19px;-moz-transition:all .3s ease;-o-transition:all .3s ease;-ms-transition:all .3s ease;transition:all .3s ease;display:block;content:"";position:relative;top:0}.basket_wrapp .clicked>a,.basket_wrapp .wraps_icon_block.user_auth.w_img:before{display:none}.basket_wrapp .wraps_icon_block.delay:before{background-position:-220px -49px;width:21px;top:-2px}.basket_wrapp .wraps_icon_block.compare:before{background-position:-259px -49px;width:21px;top:-5px}.basket_wrapp .wraps_icon_block.delay.ndelay{cursor:default}.basket_wrapp .wraps_icon_block.basket:before{background-position:-177px -48px;top:-2px}.basket_wrapp .wraps_icon_block.user_reg:before{background-position:-294px -51px;top:-4px;height:20px}.basket_wrapp .wraps_icon_block.user_auth.no_img:before{background-position:-332px -47px;top:-8px;height:28px;width:27px;left:-2px}.basket_wrapp .wraps_icon_block.user_auth.w_img{width:28px;height:28px;left:3px;top:14px!important;border:2px solid #fff;border-radius:100%;overflow:hidden}.basket_wrapp .basket_block .wraps_icon_block .link{z-index:1}.basket_wrapp .opener>div>a{position:absolute;top:0;left:0;width:100%;height:100%;z-index:2}.basket_normal .basket_wrapp #compare_line .wraps_icon_block:before{background-position:-202px -4px;width:21px;top:0}.basket_normal .basket_wrapp #compare_line .wraps_icon_block.fill:before{background-position:-239px -5px}.basket_normal .basket_wrapp .wraps_icon_block.delay:before{background-position:-280px -4px;width:21px;top:-1px}.basket_normal .basket_wrapp .wraps_icon_block.delay.fill:before{background-position:-392px -4px}.basket_normal .basket_wrapp .wraps_icon_block.basket:before{background-position:-321px -4px;width:21px;top:10px;left:9px}.basket_normal .basket_wrapp .wraps_icon_block.basket.fill:before{background-position:-354px -4px}.basket_normal .basket_wrapp .wraps_icon_block.basket{background:#eaebec;border-radius:4px;width:40px;height:39px;top:-11px;margin-bottom:-6px}.basket_normal .basket_wrapp .wraps_icon_block.basket .count{top:-4px;right:-6px}.basket_wrapp .header-cart{float:left}.basket_wrapp .basket_block{position:relative}.basket_wrapp .link{display:block;position:absolute;left:-10px;top:-13px;right:-15px;bottom:-27px;z-index:2}.basket_wrapp .wraps_icon_block .count{position:absolute;right:-17px;top:-15px;left:auto;text-align:center;opacity:1;font-size:12px;line-height:13px}.basket_wrapp .basket_empty .wraps_icon_block.basket .count span,.basket_wrapp .basket_fly .basket_count .wraps_icon_block.basket .count span,.basket_wrapp .basket_fly .basket_count.empty .wraps_icon_block.basket .count span,.basket_wrapp .empty_cart:not(.bcart) .wraps_icon_block.basket .count span{background:#424f60;color:#fff}.basket_wrapp .empty_cart .wraps_icon_block.basket .count,.basket_wrapp .empty_cart.ecart.bcart .wraps_icon_block.basket .count,.basket_wrapp .nitems.ecart .wraps_icon_block.basket .count{opacity:0}.basket_wrapp .empty_cart.bcart .wraps_icon_block.basket .count{opacity:1}.basket_wrapp .wraps_icon_block .count>span{width:20px;background:#e3e3e3;display:block;height:20px;vertical-align:middle;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;line-height:20px}.basket_normal .basket_wrapp .wraps_icon_block .count span{height:19px;padding-top:1px;line-height:19px}.bx-firefox .basket_wrapp .wraps_icon_block .count span .items{position:relative;top:-1px}.basket_wrapp .wraps_icon_block .count .text,.basket_wrapp .wraps_icon_block .count a{display:block;text-decoration:none;font-size:11px}.basket_wrapp .basket_block .link{bottom:-24px;z-index:2}.basket_wrapp .basket_block .text{margin:-7px 0 0}.basket_wrapp .basket_block .text *{line-height:18px}.basket_wrapp .basket_block .title{font-size:14px}.basket_wrapp .basket_block .text .value{color:#5f5f5f;line-height:16px;max-width:67px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.basket_wrapp .wraps_icon_block.basket{margin-right:19px}.basket_wrapp .wraps_icon_block.basket .count a{color:#fff}.basket_normal .popup{background:0 0;box-shadow:none;min-width:0;z-index:11;width:141px;position:absolute;top:auto;right:0;left:auto;border-radius:0}.basket_normal .basket_wrapp .wraps_icon_block .count span{box-shadow:0 0 0 2px #fff}.basket_normal .popup.card_popup_frame .basket_popup_wrapp{margin:0;width:397px;position:absolute;right:-11px;top:56px;display:none;border-top:2px solid #ddd;background:#FFF;-webkit-box-shadow:0 2px 5px 0 rgba(0,0,0,.15);-moz-box-shadow:0 2px 5px 0 rgba(0,0,0,.15);box-shadow:0 2px 5px 0 rgba(0,0,0,.15)}#basket_line .popup{display:block}.item-title .props{margin:0 0 6px}.item-title .props .item_prop,.item-title .props .item_prop .title{line-height:16px;font-size:12px}.item-title .props .item_prop .title{padding:0 4px 0 0}.popup .cart_shell td.thumb-cell{padding:20px 10px 10px 20px}.popup .basket_popup_wrapp .cart_shell .item-title{padding:16px 20px 16px 10px;position:relative}.popup .cart_shell tr:first-child td{border-top:0}#header .popup .cart_shell td{border-top:1px solid #e5e5e5;vertical-align:top}.popup .cart_shell .cost-cell .price{margin-top:1px}.card_popup_frame.popup .remove-cell{position:absolute;top:18px;right:5px;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.best_block.tab_slider_wrapp ul.tabs_content li.tab *,.start_promo .item,.tizers_block .item{box-sizing:border-box}.catalog_item .item-title a.remove:hover,.catalog_item:hover .item-title a.remove{border:0}.basket_popup_wrapp .item-title .one-item span,.popup .basket_popup_wrapp .item-title .cost-cell span{font-size:13px;line-height:16px}.basket_popup_wrapp .item-title .one-item{float:left}.basket_popup_wrapp .item-title .cost-cell{float:right}.bx_item_set_hor .bx_item_set_hor_item a.remove,.bx_item_set_hor .bx_item_set_hor_item a.remove i,.cart_shell .remove-cell a,.cart_shell .remove-cell a i,.module-cart .remove-cell a,.module-cart .remove-cell a i,.remove,.remove i,.remove_item .remove a,.remove_item .remove a i{border-radius:20px;-moz-border-radius:20px;-webkit-border-radius:20px;display:inline-block;height:17px;width:17px;cursor:pointer}.bx_item_set_hor .bx_item_set_hor_item a.remove i,.cart_shell .remove-cell a i,.module-cart .remove-cell a i,.remove i{background:url(images/close_icons.png) 3px -23px no-repeat}.bx_item_set_hor .bx_item_set_hor_item a.remove i,.cart_shell .remove-cell a:hover i,.module-cart .remove-cell a:hover i,.remove:hover i{background-position:-17px -23px}.card_popup_frame.popup .total_wrapp{background:#f7f7f7}.card_popup_frame.popup .total_wrapp .price,.card_popup_frame.popup .total_wrapp .total span{font-size:13px;line-height:16px;float:left}.card_popup_frame.popup .total_wrapp .total{white-space:nowrap;margin:0 0 20px;padding:15px 20px 14px;border-bottom:1px solid #e5e5e5;border-top:1px solid #e5e5e5}.card_popup_frame.popup .total_wrapp .total .price{float:right;padding:1px 0 0}.total_wrapp .but_row1{text-align:center;padding:0 20px 20px}.top_slider_wrapp .flexslider .wrapper_inner,body .flex-direction-nav li,body .flexslider li{padding:0}.top_slider_wrapp .flex-direction-nav{opacity:0;visibility:hidden;-moz-transition:all .3s ease;-o-transition:all .3s ease;-ms-transition:all .3s ease;transition:all .3s ease}.top_slider_wrapp:hover .flex-direction-nav{opacity:1;visibility:visible}.flex-control-paging li a,.front_slider_wrapp .flex-control-nav li a{display:inline-block;height:10px;width:10px;background:url(images/slider_pagination.png) no-repeat;cursor:pointer;font-size:0}.flex-control-nav li a{background-position:-20px -20px}.top_slider_wrapp .flex-control-nav li a{background-position:-24px 0}.flex-control-nav li a:not(.touch):hover,.flex-control-paging li a.flex-active,.front_slider_wrapp .flex-control-paging li a.flex-active{background-position:-2px -20px}.flex-control-paging li a:active{background-position:-1px -39px}.top_slider_wrapp .flex-control-paging li a.flex-active,.top_slider_wrapp .flex-control-paging li a:hover{background-position:0 0}body .top_slider_wrapp .flex-direction-nav li{background:#fff}.top_slider_wrapp .flex-direction-nav li,.top_slider_wrapp .flex-direction-nav li a{height:42px;width:42px}.top_slider_wrapp .flex-direction-nav li{position:absolute;top:50%;margin-top:-19px;right:20px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;z-index:2}.top_slider_wrapp .flex-direction-nav li:first-child{left:20px}.top_slider_wrapp .flex-direction-nav li a{background-image:url(images/arrows.png)}.top_slider_wrapp .flex-direction-nav li.flex-nav-prev a.flex-prev{background-position:15px -95px}.top_slider_wrapp .flex-direction-nav li.flex-nav-prev:hover a.flex-prev{background-position:15px 11px}.top_slider_wrapp .flex-direction-nav li.flex-nav-next a.flex-next{background-position:-19px -95px}.top_slider_wrapp .flex-direction-nav li.flex-nav-next:hover a.flex-next{background-position:-19px 11px}.top_slider_wrapp .flexslider .banner_title span{font-size:30px;line-height:33px;font-weight:600}.top_slider_wrapp .flexslider .text.center .banner_buttons,.top_slider_wrapp .flexslider .text.center .banner_title{text-align:center}.top_slider_wrapp .flexslider .text.center .banner_buttons{margin-top:25px}.top_slider_wrapp .flexslider .slides>li:after{content:"";position:absolute;bottom:0;width:100%;height:2px;background:#ddd;left:0;right:0;display:block;z-index:2}.bx-mac .top_slider_wrapp .flexslider .slides>li{position:relative;left:-1px}.news_blocks{border:1px solid #eaebec;border-radius:2px;margin:0 0 20px;padding:10px 19px 21px}.news_blocks .top_block{padding:0 0 12px;margin:0}.news_blocks .top_block .title_block{font-size:16px;color:#1d2029}.news_blocks .top_block a{float:right;padding:7px 0 0}.news_blocks .info_block .item{padding:0 0 20px;margin:0 0 20px;border-bottom:1px solid #ebeef1;overflow:hidden}.news_blocks .info_block .item:last-child{border-bottom-width:0;padding:0;margin:0}.news_blocks .info_block .item .image{border-radius:100%;width:60px;height:60px;overflow:hidden;float:left;box-shadow:inset 0 0 3px 0 rgba(0,0,0,.15)}.news_blocks .info_block .item .image+.info{padding:0 0 0 80px}.tizers_block *{line-height:18px}.tizers_block{font-size:0;margin:0 -10px;text-align:center}.tizers_block .item{display:inline-block;vertical-align:middle;font-size:0;width:25%;color:#000;padding:0 10px;-moz-transition:all .1s ease;-o-transition:all .1s ease;-ms-transition:all .1s ease;transition:all .1s ease;margin:0 0 26px;white-space:nowrap}.tizers_block .item .img,.tizers_block .item .title{font-size:13px;display:inline-block;vertical-align:middle;color:#555}.tizers_block .item .img{max-width:60px;margin:0 20px 0 0}.tizers_block .item .title{width:60%;text-align:left;margin:-6px 0 0;white-space:normal}.tizers_block .item a{font-size:12px;text-decoration:none;color:#000;line-height:16px;display:block}.start_promo{width:100%}.start_promo .item{border:1px solid #fff;border-bottom-width:2px;overflow:hidden;position:relative;width:25%;padding-bottom:24%;float:left;height:0;-moz-transition:all .1s ease;-o-transition:all .1s ease;-ms-transition:all .1s ease;transition:all .1s ease}.start_promo .item.wide100,.start_promo .item:nth-child(3n){border-right-width:0}.start_promo .item.normal:nth-child(3n){border-right-width:1px}.start_promo .item img{max-height:268px;position:absolute;left:0;vertical-align:middle}.start_promo .item .opacity_block{position:absolute;display:block;width:100%;height:100%;background-color:#FFF}.start_promo .item:hover .opacity_block{opacity:.1;z-index:11}.start_promo .item.wide50{width:50%}.start_promo .item.wide100{width:100%}.start_promo .item span.main_wrap{max-width:195px;bottom:20px;left:20px;position:absolute;z-index:10;color:#fff;backface-visibility:hidden;display:none}.start_promo .item span.main_wrap i{display:block;font-style:normal}.start_promo .item.wide50 span.main_wrap{max-width:340px}.start_promo .item.wide100 span.main_wrap{max-width:500px}.start_promo .item p,.start_promo .item p *{color:#fff}.start_promo .item p{margin-bottom:0;line-height:15px}.wrapper_inner .start_promo .item i span p span{line-height:16px;padding:0 7px 7px;position:relative;margin:-11px 0 0}.wrapper_inner .start_promo .item i span p:first-child span{line-height:27px;padding-bottom:1px;margin-top:0}.wrapper_inner .start_promo .item i span p .tizer_text{margin:3px 0 0;padding-top:5px}.start_promo .item a,.start_promo .item a:hover{color:#fff;text-decoration:none}.start_promo .item i.title span{font-weight:700;font-size:18px}.bx-ie .start_promo.t1 .item i.title{position:relative;line-height:1;color:#fff;display:inline;white-space:pre-wrap;border:0 solid #00a7df;border-width:.25em 0}.bx-ie .start_promo.t1.title,.bx-ie .start_promo1 .title:after{background-color:#00a7df}.start_promo .item i.price{margin-top:10px}.start_promo .item i.price span{font-size:16px;display:inline-block;line-height:19px}.start_promo .catalog_btn{margin:20px 0 40px;text-align:center}.start_promo .item i.price span,.start_promo .item i.title span{box-decoration-break:clone}.wrap_tizer{position:absolute;bottom:20px;z-index:2;width:100%;color:#fff;transition:all ease .5s}.wrap_tizer .wrap_outer{position:relative;left:-3px;padding:3px 0 5px;font-size:16px;line-height:16px;background:#23618C;color:#FFF;display:inline}.wrap_tizer .wrap_outer.title{font-weight:500;font-size:18px}.wrap_tizer .wr_block{transition:all ease .1s}.wrap_tizer .wr_block.price{opacity:0;visibility:hidden;height:0;color:#fff;font-size:13px;max-height:54px;overflow:hidden}.item:hover .wrap_tizer .wr_block.price{height:auto;opacity:1;visibility:visible;display:block;margin:10px 0 0}.wr_block.price .wrap_outer_desc{line-height:18px;font-size:13px}.wrap_tizer.center_blocks{text-align:center}.wrap_tizer.right_blocks{text-align:right;padding:0}.wrap_tizer.dark_text .wrap_outer .inner_text{color:#1d1a1a}.wrap_tizer .wrapper_inner_tizer{padding:0 33px 0 20px}.wrap_tizer.right_blocks .wrap_outer{left:-13px}.wrap_tizer.right_blocks .wrapper_inner_tizer{padding-right:20px}.bx-firefox .wrap_tizer .wr_block.price{margin-top:11px}.wrap_tizer .wr_block.price .wrap_outer,.wrap_tizer .wr_block.price .wrap_outer .outer_text{padding-top:4px}.wrap_tizer .wrap_outer .outer_text{position:relative;left:15px;background:#23618C;padding:3px 0 5px}.wrap_tizer .wrap_outer .inner_text{position:relative;left:-7px;color:#FFF;font-style:normal;background:#23618C;z-index:1}.wr>li{margin-left:15px;background:#fff!important;margin-right:0;float:left;box-shadow:none;border:0 solid transparent;transition:all .2s ease;opacity:0}.best_block.tab_slider_wrapp ul.tabs_content li.tab .catalog_block .catalog_item_wrapp .catalog_item .inner_wrap,.news_akc_block .item{-webkit-transition:box-shadow ease-out .2s,border ease-out .2s;-moz-transition:box-shadow ease-out .2s,border ease-out .2s;-o-transition:box-shadow ease-out .2s,border ease-out .2s}.right_block .wr li{margin-left:12px}.flex-viewport .wr li:first-child{margin-left:0}.flex-viewport .wr>li.hover,.flex-viewport .wr>li:hover{border:0 solid transparent;box-shadow:0 0 14px rgba(0,0,0,.1);-moz-box-shadow:0 0 14px rgba(0,0,0,.1);-o-box-shadow:0 0 14px rgba(0,0,0,.1);-webkit-box-shadow:0 0 14px rgba(0,0,0,.1);height:auto!important}.specials.tab_slider_wrapp,.specials_slider_wrapp,.tab_slider_wrapp{padding:20px 0 2px;clear:both;font-size:0}.tab_slider_wrapp{padding-top:20px}.catalog_detail+.clearfix+.tab_slider_wrapp,.catalog_detail+.tab_slider_wrapp{border-top:1px solid #eaebec;padding-top:21px}.catalog_detail .form .form_footer,.specials_slider_wrapp ul.tabs,.tab_slider_wrapp ul.tabs{margin:0}.specials_slider_wrapp ul.tabs>li,.tab_slider_wrapp ul.tabs>li{margin:10px 14px 0 0;-moz-border-radius:0;border-radius:0;height:auto}.specials_slider_wrapp ul.tabs>li span,.tab_slider_wrapp ul.tabs>li span{font-size:16px;line-height:20px;text-transform:none;border-bottom-width:0;padding:0 0 5px;font-weight:500}.specials_slider_wrapp ul.tabs>li:hover span,.tab_slider_wrapp ul.tabs>li:hover span{color:#000}.specials_slider_wrapp ul.tabs>li:first-child,.tab_slider_wrapp ul.tabs>li:first-child{padding-left:0}.specials_slider_wrapp ul.tabs li.cur,.tab_slider_wrapp ul.tabs li.cur{background:0 0}.specials_slider_wrapp ul.tabs li.cur span,.tab_slider_wrapp ul.tabs li.cur span{color:#000;border-bottom:2px solid #ddd}.specials_slider_wrapp ul.tabs li.cur:hover span,.tab_slider_wrapp ul.tabs li.cur:hover span{color:#333}.specials.tab_slider_wrapp ul.tabs_content{margin-bottom:35px}.best_block.tab_slider_wrapp ul.tabs_content{margin:16px -6px 0;padding:0}.best_block.tab_slider_wrapp ul.tabs_content li.tab{margin:0;padding:0;position:static;overflow:visible}.best_block.tab_slider_wrapp ul.tabs_content li.tab>ul{margin:0}.best_block.tab_slider_wrapp ul.tabs_content li.tab .catalog_block{font-size:0}.best_block.tab_slider_wrapp ul.tabs_content li.tab .catalog_block>div{display:inline-block;vertical-align:top;width:25%;padding:6px;float:none;margin:0}.bx-ie .best_block.tab_slider_wrapp ul.tabs_content li.tab .catalog_block>div{float:left}.best_block.tab_slider_wrapp ul.tabs_content li.tab .catalog_block .catalog_item_wrapp.col-3{width:33%}.best_block.tab_slider_wrapp ul.tabs_content li.tab .catalog_block .catalog_item_wrapp.col-2{width:50%}.best_block.tab_slider_wrapp ul.tabs_content li.tab .catalog_block .catalog_item_wrapp .catalog_item{margin:0;padding:0;overflow:visible}.best_block.tab_slider_wrapp ul.tabs_content li.tab .catalog_block .catalog_item_wrapp .catalog_item .inner_wrap{padding:20px;border:1px solid #eaebec;background:#fff;transition:box-shadow ease-out .2s,border ease-out .2s}.footer_button{opacity:0;visibility:hidden;height:0;-webkit-transition:all .1s ease;-moz-transition:all .1s ease;transition:all .1s ease;text-align:center;font-size:13px;color:#333}.footer_button .name{color:#777}.footer_button .char .char_item{margin:0 0 3px;line-height:18px}.footer_button .char .char_item:last-child{margin-bottom:0}.item .catalog_item:hover .footer_button{opacity:1;visibility:visible;margin:11px 0 0;height:auto}.best_block.tab_slider_wrapp .item .catalog_item:hover .item_info,.block .catalog_block .catalog_item_wrapp .catalog_item:hover .item_info{height:auto!important}.best_block.tab_slider_wrapp ul.tabs_content li.tab .catalog_block .catalog_item_wrapp .catalog_item:hover .inner_wrap{border-color:#fff;box-shadow:0 0 20px 0 rgba(0,0,0,.15)}.best_block.tab_slider_wrapp .item .catalog_item .item_info{transition:height ease .8s 1.2s;text-align:center}.tab_slider_wrapp:not(.specials) .top_blocks{position:relative;padding:32px 0 0;border-top:1px solid #e5e5e5}.best_block.tab_slider_wrapp .top_blocks{padding:0;border-top-width:0}.catalog_block.items .image_wrapper_block{margin:0 auto 10px}.stickers{left:0;top:14px;position:absolute;z-index:2;line-height:20px}.stickers .sticker_sale_text,.stickers [class*=sticker_]{display:inline-block;color:#fff;width:auto;font-size:12px;line-height:12px;position:relative;box-sizing:border-box}.stickers [class*=sticker_]{background-color:#4fad00;height:24px;margin:0 0 2px;padding:6px 10px 0}.bx-ie .stickers [class*=sticker_]{padding-top:5px}.stickers *{text-align:left}.stickers .sticker_sale_text{background-image:none;background-color:#e52929;padding:6px 10px 0}.stickers .sticker_sale_text:before,.stickers [class*=sticker_]:before{position:absolute;top:0;right:-5px;content:"";width:5px;height:100%;display:block;background:url(images/ai.png) -3px -43px no-repeat}.stickers [class*=sticker_]:before{background-position:-3px -81px}.stickers .sticker_sale_text:before{background-position:-75px -43px}.stickers .sticker_hit{background-color:#2992d9}body .stickers .sticker_hit:before{background-position:-3px -162px}.stickers .sticker_stock{background-color:#ffc438;color:#333}body .stickers .sticker_stock:before{background-position:-3px -108px}.stickers .sticker_recommend{background-color:#893ca9}body .stickers .sticker_recommend:before{background-position:-3px -135px}.item .stickers{left:-25px}.display_list .item .stickers{left:-20px;top:7px}.catalog_block .catalog_item_wrapp .catalog_item .cost.prices{margin:11px 0 0;line-height:0}.catalog_block .cost.prices .price{margin-bottom:8px!important}.rating{height:20px;margin:0 0 9px}.rating .iblock-vote{display:inline-block;margin:6px auto 0}.description .rating .iblock-vote{margin-top:4px}.similar_products_wrapp .content_inner.tab{overflow:hidden}.wrapper_block .top_block{margin-bottom:30px}.recomendation.wrapper_block .top_block{border-top:1px solid #e5e5e5;margin-bottom:20px;padding-top:22px}.detail_footer .top_block{border-top:1px solid #E5E5E5;position:relative}.wrapper_block .all_wrapp{position:relative}.wrapper_block .all_wrapp .content_inner.absolute{position:absolute;z-index:111;zoom:1;overflow:hidden}.tabs_content .flex-viewport,.wrapper_block .flex-viewport{overflow:visible!important;margin-top:26px}.specials_slider>li,.tabs_slider>li,.wrapper_block .wr>li{width:178px!important;padding:20px 20px 12px;opacity:0;min-height:305px}.specials_slider>li.hover,.specials_slider>li:hover,.tabs_slider li.hover,.tabs_slider>li:hover,.wrapper_block .wr li.hover,.wrapper_block .wr>li:hover{padding:20px}.image_wrapper_block,.image_wrapper_block a{max-width:170px;min-width:70px;height:170px;line-height:170px;margin:0 auto;padding:0;vertical-align:middle;text-align:center;zoom:1;display:block}.image_wrapper_block a,.list_item .image_wrapper_block,.list_item .image_wrapper_block a,.table.catalog .module_products_list .foto-cell .image_wrapper_block,.table.catalog .module_products_list .foto-cell .image_wrapper_block a{position:relative}.image_wrapper_block a{background-position:50% 50%;background-repeat:no-repeat}.image_wrapper_block{margin:0}.image_wrapper_block img{position:absolute;margin:auto;top:0;bottom:0;left:0;right:0;border:0;vertical-align:middle;max-width:100%}.like_icons{position:absolute;top:14px;right:14px;z-index:53}.like_icons span{display:block;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;background:#fff;opacity:0;visibility:hidden;transition:opacity .3s ease;margin:0 0 5px;overflow:hidden}.brands_slider_wrapp li img,.news_block .news_items .item .image img{-webkit-transition:all ease-out .2s;-moz-transition:all ease-out .2s;-o-transition:all ease-out .2s}.like_icons span.added{opacity:.6;visibility:visible}.catalog_item.hover .image_wrapper_block .like_icons span,.catalog_item:not(.touch):hover .image_wrapper_block .like_icons span,.catalog_item_wrapp:hover .like_icons span,.item_main_info .like_icons span{opacity:1;visibility:visible}.like_icons span i{width:26px;height:26px;display:block;background:url(images/icons_wish.png) no-repeat}.like_icons .wish_item i{background-position:3px -18px}.like_icons .compare_item i{background-position:-20px -18px}.like_icons .wish_item.added i{background-position:3px -46px}.like_icons .compare_item.added i{background-position:-20px -46px}.like_icons span:hover{cursor:pointer;background-color:#e3e3e3}.like_icons .wish_item:hover i{background-position:3px -74px}.like_icons .compare_item:hover i{background-position:-20px -74px}.like_icons .wish_item.added:hover i{background-position:3px -46px}.like_icons .compare_item.added:hover i{background-position:-20px -46px}.basket .catalog_item .stickers,.bottom_slider .catalog_item .stickers{left:-24px;top:-6px}.basket .like_icons,.bottom_slider .like_icons{top:-6px;right:-10px}.description_wrapp .like_icons{position:static;font-size:0;margin:23px 0 0;border-top:1px solid #f6f6f7;padding:14px 0 0}.description_wrapp .like_icons>div{display:inline-block;vertical-align:top;font-size:13px;padding:0 30px 0 0}.description_wrapp .like_icons span,.description_wrapp .like_icons span div,.description_wrapp .like_icons span i{vertical-align:middle;display:inline-block}.description_wrapp .like_icons span{opacity:1;visibility:visible;white-space:nowrap}.description_wrapp .like_icons span div{margin:0;padding:0 0 0 10px}.description_wrapp .like_icons span:not(.added):hover{background-color:#fff}.description_wrapp .like_icons span:not(.added):hover i{background-color:#e3e3e3}.list_item .description_wrapp .like_icons span.added,.list_item .description_wrapp .like_icons span.added:hover{background:#fff}.list_item .description_wrapp .like_icons span i{overflow:hidden;border-radius:2px}.description_wrapp .like_icons span:not(.added):hover div{color:#333}.flex-viewport .catalog_item .item_info{border-top-width:0;margin:9px 0 0;box-sizing:initial;padding:5px 0}.brands_slider.slides *,.brands_slider_wrapp,.stores .stores_list{box-sizing:border-box}.flex-viewport .catalog_item .item_info .item-title a:hover,.flex-viewport .catalog_item:hover .item_info .item-title a{border-bottom-width:0}.flex-viewport li:hover a{text-decoration:none}.all_wrapp.basket .flex-viewport li:hover .item_info{height:auto!important}.cost.prices .price,.module-cart .row_titles .item_title,.module-cart .row_values .price{font-size:18px;font-weight:600;line-height:15px}.compare_view .item_block .cost.prices .price{margin:10px 5px 0 0}.information .cost.prices .price{line-height:20px}.cost.prices .price.only_price{margin:8px auto 2px;display:inline-block;float:none;white-space:normal}.cost.prices .price .measure{font-size:15px}.cost.prices .price_name{font-size:12px;line-height:15px;margin:8px 0 5px;clear:both}.information .cost.prices .price_name:first-of-type{margin-top:0}.information .cost.prices .price_name{margin-top:12px}.cost.prices .price.discount{display:inline-block;vertical-align:top;margin-top:0;float:none}.cost .price{margin-right:7px;margin-left:7px}.catalog_detail .cost .price,.list .cost .price,.table .cost .price{margin-left:0}.cost .price.discount span,.cost .price.discount strike,.row_values .price.discount span,.row_values .price.discount strike{font-size:13px;line-height:15px;font-weight:400;color:#666;text-decoration:line-through}.display_list .cost.prices .price{font-size:18px}.row_titles .w_title{margin-bottom:5px}.sale_block{margin:3px 0 2px;clear:both}.sale_block .text,.sale_block .value{float:left;background:#ffd02e;padding:4px 8px 3px;font-size:11px;line-height:15px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;margin-top:1px;margin-bottom:1px}.sale_block .value{margin-right:2px}body .wrapper .catalog_item .item_info .buttons_block{margin-top:17px;text-align:center}.brands_slider_wrapp{padding:25px 30px 27px;border-top:1px solid #eaebec;margin:45px 0 0;overflow:hidden;max-height:100px}.brands_slider_wrapp ul.brands_slider li a{margin:0 10px;display:block}.brands_slider_wrapp ul.brands_slider li:before{display:none}.brands_slider_wrapp .flex-viewport{height:48px;overflow:hidden}.brands_slider>li{line-height:48px;text-align:center;float:left}.brands_slider_navigation ul.flex-direction-nav{position:relative;height:0;zoom:1}.brands_slider>li a{text-decoration:none}.brands_slider_wrapp li img{transition:all ease-out .2s;-moz-opacity:.5;-khtml-opacity:.5;opacity:.5;filter:url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale");filter:gray;-webkit-filter:grayscale(100%);max-width:120px}.brands_slider_wrapp li img:hover{-moz-opacity:1;khtml-opacity:1;opacity:1;filter:none;-webkit-filter:grayscale(0)}.brands_slider_wrapp .flex-direction-nav li a,.brands_slider_wrapp .flex-direction-nav li span,.custom_flex .flex-direction-nav li a,.custom_flex .flex-direction-nav li span,.module-pagination .flex-direction-nav li a{background:url(images/arrows2.png) 3px -20px no-repeat}.brands_slider_wrapp .flex-direction-nav li .flex-next,.custom_flex .flex-direction-nav li.flex-nav-next a,.custom_flex .flex-direction-nav li.flex-nav-next span,.module-pagination .flex-direction-nav li.flex-nav-next a{background-position:-72px -20px}.brands_slider_wrapp.flexslider .flex-direction-nav li:hover,.custom_flex .flex-direction-nav li:hover,.custom_flex .flex-direction-nav li:hover a,.custom_flex .flex-direction-nav li:hover span,.module-pagination .flex-direction-nav li:hover,.module-pagination .flex-direction-nav li:hover a{background-color:#fff!important}.brands_slider_wrapp .flex-direction-nav li:hover a.flex-next,.custom_flex .flex-direction-nav li.flex-nav-next:hover a,.custom_flex .flex-direction-nav li.flex-nav-next:hover span,.module-pagination .flex-direction-nav li.flex-nav-next:hover a{background-position:-71px 4px}.brands_slider_wrapp .flex-direction-nav li:hover a,.custom_flex .flex-direction-nav li:hover a,.custom_flex .flex-direction-nav li:hover span,.module-pagination .flex-direction-nav li:hover a{background-position:3px 4px}.brands_slider.slides>li{margin:0 0 0 30px;padding:0!important}.brands_slider.slides>li:first-child{margin-left:0}.brands_slider_wrapp .flex-direction-nav>li{position:absolute;top:50%;z-index:2;margin-top:-15px}.news,.subscribe-form{position:relative}.brands_slider_wrapp .flex-direction-nav>li.flex-nav-prev{left:0}.brands_slider_wrapp .flex-direction-nav>li.flex-nav-next{right:0}.brands_slider_wrapp.flexslider .slides img{display:inline-block;vertical-align:middle}.wrap_md .news_wrap{width:68%;margin:0 0 38px}.news_block .news_items{font-size:0}.news_block .news_items .item{display:inline-block;width:50%;vertical-align:top;padding:0 20px 17px 0}.news_block .news_items .item .image{float:left;width:90px;height:90px;margin-top:5px;text-align:center}.news_block .news_items .item .image img{display:inline-block;max-width:100%;max-height:100%;vertical-align:middle;transition:all ease-out .2s}.news_block .news_items .item .image+.info{padding-left:110px}.news .item .info .date{font-size:11px;line-height:20px;font-weight:500}.news .item .info .name{font-size:13px;text-decoration:none;margin:1px 0 0;font-weight:500;display:block}.news .item .info .name:hover{text-decoration:underline;color:#333}.news .item .info .preview{margin:6px 0 0;font-size:12px}.wrap_md .subscribe_wrap{width:32%;margin:0 0 62px}.subscribe-form{margin:0 0 20px;background:#f6f6f7;border-radius:2px 2px 0 0}.subscribe-form:before{content:"";width:100%;height:2px;display:block;position:absolute;bottom:0;left:0;right:0;background:#ddd}.subscribe-form .wrap_bg{padding:14px 19px 21px;border:1px solid #eaebec;border-radius:2px 2px 0 0}.subscribe-form .top_block{margin:0;padding:0}.subscribe-form .top_block .title,.subscribe-form .top_block .title div{font-size:16px;font-weight:500;color:#1d2029;margin:0 0 8px}.subscribe-form .top_block .more,.subscribe-form .top_block .more div{font-size:13px;color:#666;line-height:16px}.subscribe-form form.sform{font-size:0;margin:15px 0 0}.subscribe-form form.sform>div{display:inline-block;vertical-align:top}.subscribe-form .email_wrap,.subscribe-form_footer .email_wrap{position:relative;margin-right:5px;width:100%}.subscribe-form .email_wrap{margin:0}.subscribe-form .email_wrap .email_input{background:#fff;font-size:14px;padding:5px 43px 5px 13px}.bx-firefox .subscribe-form .email_wrap .email_input{padding-top:4px;padding-bottom:6px}.bx-ie .subscribe-form .email_wrap .email_input{height:32px}.subscribe-form input.send_btn{position:absolute;top:0;right:0;font-size:0;text-indent:-9999px;width:33px;height:32px;background:url(images/ai.png) -23px -39px no-repeat #ddd;border-radius:0 2px 2px 0}.subscribe-form label.error,.subscribe-form_footer label.error{position:absolute;top:-19px;right:0}.news_akc_block .top_block{padding:13px 0 0;margin:0 0 13px}.news_akc_block .top_block a{font-size:13px}.news_akc_block .img{height:137px;line-height:137px;text-align:center;overflow:hidden}.news_akc_block .img img{vertical-align:middle;-webkit-transition:all ease-out .2s;-moz-transition:all ease-out .2s;-o-transition:all ease-out .2s;transition:all ease-out .2s;max-width:100%}.news_akc_block .item .info{padding:13px 20px 18px;line-height:18px}.news_akc_block .item .info .date{line-height:18px;font-size:11px;color:#666;margin:0 0 2px}.news_akc_block .item .info .name{font-size:14px;display:block}.news_akc_block .item{box-shadow:0 0 1px #a2a6aa inset;transition:box-shadow ease-out .2s,border ease-out .2s}.news_akc_block .item:hover{box-shadow:0 0 20px 0 rgba(0,0,0,.15)}.block_wr{position:relative}.block_wr .bg_map{position:absolute;top:0;left:0;width:100%;height:100%;background:url(images/map_large.png) center 0 no-repeat;opacity:.07}.block_wr.light{background:#f7f7f9}.block_wr.dark .bg_map{opacity:.03}.stores{font-size:0;padding:0 0 55px}.block_wr .top_block{margin-bottom:29px}.block_wr.dark .stores .stores_list .item .store_text .value,.block_wr.dark .stores .stores_list .item a span,.block_wr.dark .top_block .title_block{color:#fff}.block_wr .top_block a{display:none}.stores .all_map,.stores .stores_list{display:inline-block;vertical-align:top}.stores .stores_list{position:relative;max-width:844px;width:75%}.news_akc_block .flex-control-paging,.stores .flex-control-paging{padding-bottom:0;margin:0;position:absolute}.stores .stores_list .stores_list_wr>li:hover{box-shadow:none;border:1px solid #FFF}.stores .stores_list .stores_navigation{top:-60px}.news_akc_block .flex-direction-nav,.stores_list .flex-direction-nav{right:0;position:absolute;top:0;z-index:50;margin:0}.stores_list .flex-direction-nav{top:-60px}.bx-ie .stores .stores_list .stores_navigation,.bx-ie .stores_list.t1 .flex-direction-nav{top:-70px}.stores .stores_list .item{padding:19px 25px;border:1px solid #FFF}.stores .stores_list .item .wrapp_block{overflow:hidden;line-height:0}.block_wr.dark .stores_list .item{background:0 0!important}.stores .stores_list .item a{text-decoration:none;display:inline-block;margin:0 0 8px}.stores .stores_list .item a span{font-size:14px;line-height:22px;font-weight:600;border-bottom-width:0}.block_wr.dark .stores .stores_list .item a:hover span{color:#333}.stores .stores_list .item a .icon{display:inline-block;width:8px;height:10px;background:url(images/icons_wish.png) -2px -182px no-repeat;float:left;margin:6px 0 0}.block_wr.dark .stores .stores_list .item a .icon{background:url(images/icons_wish.png) -13px -182px no-repeat}.stores .stores_list .item a .text{padding:0 0 0 23px;display:block}.stores .stores_list .item .store_text{margin:0 0 3px;font-size:12px}.stores .stores_list .item .store_text:last-child{margin-bottom:0}.stores .stores_list .item .store_text .title{color:#8e8c8c;float:left;line-height:20px}.block_wr.dark .stores .stores_list .item .store_text .title{color:#fff;opacity:.5}.stores .stores_list .item .store_text .value{display:block;padding:0 0 0 63px;clear:right;line-height:20px}.stores .all_map{width:268px;margin:0 0 0 20px}.block_wr.dark .stores .all_map{background:#fff}.stores .all_map a{display:block;padding:24px 30px 31px 42px;text-decoration:none;font-weight:600;font-size:0}.stores .all_map a.wrapp_block{display:table-cell;vertical-align:middle;padding-bottom:20px;padding-top:20px}.stores .all_map a>div{display:inline-block;vertical-align:middle}.stores .all_map a .icon{width:53px;height:58px;background:url(images/icons_wish.png) -61px -4px no-repeat;margin:0 30px 0 0}.block_wr.dark .stores .all_map a .icon{background:url(images/icons_wish.png) -128px -4px no-repeat}.stores .all_map a .text{font-size:14px;line-height:18px;width:105px}.light .stores .all_map a{color:#fff}.block_wr.dark .flex-direction-nav li:hover a.flex-prev{background-position:10px -50px}.block_wr.dark .flex-direction-nav li:hover a.flex-next{background-position:-27px -50px}.block_wr.dark .flex-direction-nav li:hover{background:#fff}.wrap_more_item .more_text_item{display:none;overflow:hidden}.md-50.img{padding:35px 10px 0 0;text-align:center;overflow:hidden}.md-50 img{max-width:100%}.md-50.big{padding:50px 0 56px 10px}.md-50 .title_block{margin:2px 0 25px}.viewed_block .rows_block{margin:0 -5px;white-space:nowrap}.viewed_block .rows_block .item_block{padding:0 5px}.viewed_block .title_block{margin:20px 0 6px}.viewed_block .outer_wrap{padding:10px;overflow:hidden;margin:0 -10px}#footer .footer_bottom_inner .phones .icons,#footer ul{margin:0}.viewed_block .item_block .item{width:136px;padding:20px 12px 10px;border:1px solid #eaebec;background:#8a8a8a;opacity:.05;border-radius:4px;-webkit-transition:box-shadow ease-out .2s,border ease-out .2s;-moz-transition:box-shadow ease-out .2s,border ease-out .2s;-o-transition:box-shadow ease-out .2s,border ease-out .2s;transition:box-shadow ease-out .2s,border ease-out .2s}.viewed_block .item_block .item.has-item:hover{box-shadow:0 0 20px 0 rgba(0,0,0,.15)}.viewed_block .item_block .item.has-item{background:#fff;opacity:1}.viewed_block .image_wrapper_block,.viewed_block .image_wrapper_block a{height:85px;line-height:85px}.viewed_block .image_wrapper_block img{max-height:100%}.viewed_block div.item-title a,.viewed_block div.item-title a span{line-height:18px}.viewed_block .cost .price,.viewed_block .cost.prices .price .measure{font-size:14px}.viewed_block .item_info{text-align:center;padding:10px 0 0}.viewed_block .dark_link{color:#555!important}.viewed_block .item_block .item-title{max-height:57px}.viewed_block{border-bottom:1px solid #eaebec;padding:0 0 20px}#footer .wrapper_inner{background:#f6f6f7}#footer .footer_bottom_inner{padding:25px 0 39px}#footer ul,#footer ul li{vertical-align:top}#footer .footer_bottom_inner .phone_block{font-size:10px;white-space:nowrap;padding:0 13px 0 0}#footer .footer_bottom_inner .phones .phone_wrap,#footer .footer_bottom_inner .phones .phone_wrap a{display:block}#footer .footer_bottom_inner .phones .phone_wrap a{font-size:18px;font-weight:500}#footer .footer_bottom_inner .phones,#footer .footer_bottom_inner .social_wrapper{float:right}#footer .footer_bottom_inner .phones .order_wrap_btn{margin:0 0 16px 38px}#footer .copyright,#footer .copyright *{font-size:12px;line-height:18px}#footer .copyright{padding:0 0 17px;font-size:13px;opacity:.6}#footer .mobile_copy{display:none}.pay_system_icons i{display:inline-block;height:20px;width:34px;background:url(images/pay_icons.png) no-repeat;margin:0 11px 0 0}.pay_system_icons span i:last-child{margin-right:0}.pay_system_icons i.mastercard{background-position:0 -1px}.pay_system_icons i.visa{background-position:-46px -1px}.pay_system_icons i.yandex_money{background-position:-94px -1px;width:21px}.pay_system_icons i.webmoney{background-position:-128px -1px;margin-right:7px}.pay_system_icons i.qiwi{background-position:-172px -1px;margin-right:0}#footer .footer_inner .rows_block .item_block{padding-top:0;padding-bottom:0}#footer .footer_inner .menu_item a{display:inline-block;line-height:18px}#footer .footer_inner .submenu_top .menu_item a{text-transform:uppercase;font-weight:600;font-size:13px}#footer .footer_inner .submenu .menu_item{margin:0;line-height:18px;padding-left:0}#footer .footer_inner .submenu .menu_item a.dark_link{font-size:13px}.submenu a.dark_link{color:#666!important}#footer .footer_inner .submenu .menu_item:before{display:none}#footer .footer_bottom_inner .links.rows_block{margin:0 -5px;max-width:165px;min-width:165px}#footer .footer_bottom_inner .links.rows_block .item_block{padding:5px}#footer .footer_bottom_inner .small_title{color:#888;font-size:13px;margin:0 0 3px;font-weight:400}.bx-authform-social ul li .bx-authform-social-icon,.soc_icons .item_block a{width:31px;height:31px;display:block;background:url(images/social_icons.png) -2px -2px no-repeat;transition:opacity ease .5s}.soc_icons .item_block a:hover{opacity:.8}.soc_icons .item_block .odn{background-position:-42px -2px}.soc_icons .item_block .fb{background-position:-82px -2px}.soc_icons .item_block .tw{background-position:-2px -42px}.soc_icons .item_block .inst{background-position:-122px -122px}.soc_icons .item_block .mail{background-position:-122px -2px}.soc_icons .item_block .youtube{background-position:-82px -122px}.soc_icons .item_block .google_plus{background-position:-42px -122px}.bx-authform-social ul{font-size:0;line-height:0}.bx-authform-social ul li{width:31px;height:31px;margin:0 5px 5px 0}.popup.show{border-radius:0}.popup .popup-intro{background:#fff!important;border-bottom:2px solid #ddd;border-bottom-width:2px!important}.popup .popup-intro .pop-up-title{font-size:26px;font-weight:500;line-height:18px;text-shadow:none;padding:35px 35px 36px}.popup .close,.popup .close i,.popup-window-close-icon.popup-window-titlebar-close-icon{display:inline-block;width:19px;height:19px;border-radius:19px;-moz-border-radius:19px;-webkit-border-radius:19px}.popup .close{margin:0;position:absolute;right:33px;top:37px;cursor:pointer}.popup-window-close-icon.popup-window-titlebar-close-icon:hover,.popup.show .close:hover{box-shadow:none}.popup-window-close-icon.popup-window-titlebar-close-icon:after{background-position:1px 2px!important}.popup .close i{background-position:-1px -46px!important}.bx-ie .popup .close:hover i,.bx-ie .popup-window-close-icon.popup-window-titlebar-close-icon:hover:after,.popup .close:hover i,.popup-window-close-icon.popup-window-titlebar-close-icon:hover:after{background-position:-15px 2px!important}.popup .close,.popup .close i{display:block;border-radius:0;width:14px;height:14px;opacity:1}.popup .close:hover i{background-position:-30px -46px!important}.form-control label .star{margin:0;top:0}.form-block-wr label .star{margin-left:4px}.popup .form-wr{padding:29px 35px 35px}.popup .form-control{margin:0 0 19px}.popup .but-r{padding:2px 0 0}.popup .form_txt{padding:32px 30px 20px}.popup .but-r .buttons{margin-top:17px}div[id^=wait_comp]{display:none}.popup .label_block_capcha{width:48%}.popup .img_block_capcha{width:52%}.form_body div.form-control,.middle_info .sku_props .form-control,.popup div.form-control{background-color:#fff;border:0 solid #d5dadc;box-shadow:none;border-radius:0;height:auto;padding:0}.form_body div.form-control label,.popup div.form-control label{font-weight:400}.popup.enter_frame{max-width:700px;width:610px}.auth_wrapp .main_info{width:62%;border-right:1px solid #e5e5e5}.auth_wrapp .socserv{width:38%;padding:51px 35px 0}.form_wrapp .reg_new{margin:22px 0 0}.more_text_small{font-size:12px;color:#b3b3b3;line-height:16px;padding:11px 0 0}.popup .prompt.remember label{font-size:12px;display:inline-block;zoom:1;vertical-align:middle;margin:0;top:-4px;position:relative;font-weight:400}.popup .prompt.remember{display:inline-block;zoom:1;vertical-align:middle;float:none;margin:5px 0 0;white-space:nowrap}.popup .reg-new{padding:24px 35px 30px;text-align:left;background:#f7f7f7;border-top:1px solid #e5e5e5}.popup .prompt.remember input{width:auto;margin:0 4px 0 0}.popup .forgot{margin:2px 0 0 5px;float:right}.r .forgot{font-size:11px;position:relative;top:-2px;margin-left:5px;outline:0}.popup .captcha_wrapp input[type=text]{max-width:180px}.soc-avt{color:#888;font-size:12px}.soc-avt.inline{padding:0}.soc-avt .row{margin:12px 0 0}.soc-avt .row .auth span{display:none}.catalog_detail .b-share a span,.soc-avt .row a i.soc-icon,.soc-serv-main .row a i{width:31px;height:31px;display:inline-block;background:url(images/social_icons.png) -2px -2px no-repeat;transition:opacity .5s ease}.catalog_detail .b-share a,.soc-avt .row a{height:31px;width:31px;float:left;line-height:32px;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;text-decoration:none;cursor:pointer;padding:0}.authorization-cols .col.authorization .soc-avt .row a,.catalog_detail .b-share a,.soc-avt .row a,.soc-serv-main .row a{margin:0 5px 5px 0}.soc-avt .row .button.short{font-size:10px;line-height:16px;text-transform:uppercase;width:auto;position:relative;top:-1px}.bx-firefox .soc-avt .row .button.short{padding-top:9px;padding-bottom:10px}.soc-avt .row input[type=text]{margin:9px 5px 15px 0;width:100%!important}.popup .soc-avt .row input[type=text]{background:#fff}.soc-avt .row form input[type=text]+label+span:not(.bx-ss-icon),.soc-avt .row form input[type=text]+span:not(.bx-ss-icon){font-size:12px;padding:0 10px 0 0}.soc-avt .row #bx_auth_serv_formOpenID input[type=text],.soc-avt .row #bx_auth_serv_form_inlineOpenID input[type=text]{width:100%}#bx_auth_servform,.bx-auth-service-form{position:relative;clear:both}#bx_auth_servform>div,.bx-auth-service-form>div{position:relative;margin:19px 0 0}.soc-avt .row label.error{top:-10px;left:0}.soc-avt .row #bx_auth_serv_formOpenID label.error{top:8px}.soc-avt .icon{text-indent:0;padding:0}.bx-authform-social ul li .bx-authform-social-icon.odnoklassniki,.catalog_detail .b-share .b-share-btn__odnoklassniki span,.soc-avt .row a i.soc-icon.odnoklassniki,.soc-serv-main .row a i.soc-icon.odnoklassniki{background-position:-42px -2px}.soc-avt .row a i.soc-icon.liveid,.soc-serv-main .row a i.soc-icon.liveid{background-position:-2px -82px}.bx-authform-social ul li .bx-authform-social-icon.google,.soc-avt .row a i.soc-icon.google,.soc-serv-main .row a i.soc-icon.google{background-position:-42px -42px}.bx-authform-social ul li .bx-authform-social-icon.google-plus,.soc-avt .row a i.soc-icon.google-plus,.soc-serv-main .row a i.soc-icon.google-plus{background-position:-42px -122px}.bx-authform-social ul li .bx-authform-social-icon.vkontakte,.soc-avt .row a i.soc-icon.vkontakte,.soc-serv-main .row a i.soc-icon.vkontakte{background-position:-2px -2px}.bx-authform-social ul li .bx-authform-social-icon.mymailru,.catalog_detail .b-share .b-share-btn__moimir span,.soc-avt .row a i.soc-icon.mymailru,.soc-serv-main .row a i.soc-icon.mymailru{background-position:-122px -2px}.bx-authform-social ul li .bx-authform-social-icon.twitter,.catalog_detail .b-share .b-share-btn__twitter span,.soc-avt .row a i.soc-icon.twitter,.soc-serv-main .row a i.soc-icon.twitter{background-position:-2px -42px}.bx-authform-social ul li .bx-authform-social-icon.facebook,.catalog_detail .b-share .b-share-btn__facebook span,.soc-avt .row a i.soc-icon.facebook,.soc-serv-main .row a i.soc-icon.facebook{background-position:-82px -2px}.bx-authform-social ul li .bx-authform-social-icon.livejournal,.soc-avt .row a i.soc-icon.livejournal,.soc-serv-main .row a i.soc-icon.livejournal{background-position:-122px -42px}.bx-authform-social ul li .bx-authform-social-icon.yandex,.soc-avt .row a i.soc-icon.yandex,.soc-serv-main .row a i.soc-icon.yandex{background-position:-82px -42px}.bx-authform-social ul li .bx-authform-social-icon.openid-mail-ru,.soc-avt .row a i.soc-icon.openid-mail-ru,.soc-serv-main .row a i.soc-icon.openid-mail-ru{background-position:-122px -82px}.bx-authform-social ul li .bx-authform-social-icon.liveinternet,.soc-avt .row a i.soc-icon.liveinternet,.soc-serv-main .row a i.soc-icon.liveinternet{background-position:-82px -82px}.bx-authform-social ul li .bx-authform-social-icon.blogger,.soc-avt .row a i.soc-icon.blogger,.soc-serv-main .row a i.soc-icon.blogger{background-position:-42px -82px}.bx-authform-social ul li .bx-authform-social-icon.openid,.soc-avt .row a i.soc-icon.openid,.soc-serv-main .row a i.soc-icon.openid{background-position:-2px -122px}.catalog_detail .b-share .b-share-btn__gplus span,.soc-avt .row a i.soc-icon.gplus,.soc-serv-main .row a i.soc-icon.gplus{background-position:-42px -122px}.soc-avt .row a i:hover{opacity:.8}.bx_scu_scroller_container .missing,.disabled{opacity:.4}.index_bottom{margin-bottom:20px}.banners_column{margin:0 0 20px}.small_banners_block .advt_banner{margin-top:20px}.small_banners_block .advt_banner:first-child{margin-top:0}.index_bottom .small_banners_block{margin-bottom:0}.small_banners_block img{max-width:100%;display:block}.index_bottom .banners_column{width:220px;float:left}.breadcrumbs{margin:-7px 0 11px}.breadcrumbs a{text-decoration:none}.breadcrumbs>.separator{position:relative;zoom:1;bottom:0;display:inline-block;line-height:18px;margin:0 9px;border:0!important}.breadcrumbs .drop:hover .separator{background:url(images/bredcrumb_arrow.png) -1px 0 no-repeat rgba(0,0,0,0);border:0!important;bottom:3px;display:inline-block;height:15px;line-height:18px;margin:0 4px;position:absolute;width:14px;z-index:1;font-size:0}.container .breadcrumbs a span,.container .breadcrumbs span{color:#b6b5b5;font-size:12px}.registraion-page .form-block{padding:0 44px}.registraion-page .main_info{width:73%;padding:38px 61px 25px 0;border-right:1px solid #e5e5e5}.registraion-page .top p{position:relative;padding:0 0 17px 42px}.registraion-page .top p:before{content:"";display:inline-block;width:13px;height:9px;background:url(images/icons_wish.png) -36px -4px no-repeat;vertical-align:top;margin:12px 21px 0 -35px;position:relative;z-index:2}.registraion-page .top p:after{content:"";display:inline-block;width:26px;height:26px;position:absolute;top:3px;left:0;border-radius:26px}.iblock.label_block{width:59%;position:relative;vertical-align:top}.iblock.label_block label{padding:0;margin-bottom:4px}.registraion-page .main_info .form-control{margin:0 0 19px}.iblock.text_block{width:41%;padding:20px 0 0 25px;color:#b3b3b3;line-height:16px;vertical-align:top;font-size:12px}.iblock.text_block *{line-height:16px}.registraion-page .form-block .form-control input[type=password]{width:100%}.label_block_capcha{position:relative;width:43%}.img_block_capcha{width:48%;padding:24px 0 0 18px;vertical-align:bottom}.img_block_capcha img{float:right}.img_block_capcha .reload{cursor:pointer}.registraion-page .social_block{width:27%;padding:34px 0 38px 45px}.registraion-page .social_block .row .title{margin:0 0 10px}.registraion-page .main_info .form-control.register-captcha{margin-bottom:29px;max-width:100%}.captcha-row.register-captcha .captcha_image{width:auto}.right_block:after{content:'';clear:both;display:table}#content .right_block.catalog{zoom:1;padding:0 0 0 210px;margin:-3px 0 0;overflow:visible}#content .right_block .inner_wrapper{position:relative;zoom:1;z-index:2}#content .left_block.catalog{margin-top:29px;width:210px}#content .left_block.catalog.horizontal{margin-top:3px}.catalog .item_wrap.hover,.catalog .item_wrap:not(.touch):hover{z-index:1;box-shadow:0 0 20px rgba(0,0,0,.1);-moz-box-shadow:0 0 20px rgba(0,0,0,.1);-o-box-shadow:0 0 20px rgba(0,0,0,.1);-webkit-box-shadow:0 0 20px rgba(0,0,0,.1)}.catalog .block .item_wrap.hover,.catalog .block .item_wrap:not(.touch):hover{border:1px solid #fff}.group_description{float:left}.catalog.right_block .group_description{padding:14px 0 25px;width:100%}.catalog.right_block .bottom_nav+.group_description{padding-top:19px}div.item-title{overflow:hidden;text-overflow:ellipsis;text-overflow:-o-ellipsis-lastline;display:-webkit-box;-webkit-line-clamp:50;-webkit-box-orient:vertical;white-space:normal}div.item-title a,div.item-title a span{font-size:13px;line-height:20px;display:block;font-weight:500}div.item-title a span{padding:0}.item-stock{font-size:12px;line-height:15px;margin:6px 0 2px;white-space:nowrap}.item-stock>span{display:inline-block;vertical-align:top;font-size:12px;color:#888}.item-stock .icon{width:14px;height:14px;background:url(images/ai.png) -92px -48px no-repeat;margin:1px 6px 0 0}.item-stock .icon.stock{background-position:-111px -50px}.counter_wrapp .more_text{color:#b3b3b3;font-size:11px;line-height:14px;margin:16px 0 0;white-space:normal}.ajax_load_btn{text-align:center;margin:1px 0 15px;border:1px solid #eaebec;cursor:pointer}.ajax_load_btn:hover{border-color:#babbbc}.bottom_nav{padding-bottom:20px}.bottom_nav.block{padding-bottom:25px}.bottom_nav .module-pagination{padding-bottom:0}.module-pagination .nums{display:inline-block;position:relative}.more_text_ajax{font-size:13px;line-height:20px;font-weight:400;cursor:pointer;display:inline-block;position:relative;padding:10px 0 10px 34px;color:#666}.more_text_ajax:after{content:"";display:block;position:absolute;width:17px;height:17px;left:5px;top:11px;background:url(images/ai.png) -464px -4px no-repeat #ddd;-webkit-transition:background .7s ease-in-out;-moz-transition:background .7s ease-in-out;-o-transition:background .7s ease-in-out;transition:background .7s ease-in-out}.more_text_ajax.loading:after{-webkit-animation:spinner .5s linear infinite!important;animation:spinner .5s linear infinite!important;transform-style:preserve-3d}.ajax_load_btn:hover .more_text_ajax:after,.more_text_ajax:hover:after{-webkit-animation:spinner .5s ease-out 1;animation:spinner .5s ease 1;-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;-ms-transform-style:preserve-3d;transform-style:preserve-3d}@-webkit-keyframes spinner{from{-webkit-transform:rotate(360deg)}to{-webkit-transform:rotate(0)}}@keyframes spinner{from{-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg)}to{-moz-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0)}}.no_goods{padding:30px 30px 63px;border-top:1px solid #e5e5e5}.catalog_block_view.no_goods{border-top-width:0}.no_goods .no_products{position:relative;float:left;background:url(images/empty.png) no-repeat;margin:0 0 -8px}.no_goods .no_products:after,.no_goods .no_products:before{content:"";position:absolute}.no_goods .no_products:before{width:54px;height:54px;background:#DDD;left:0;top:8px;border-radius:100%}.no_goods .no_products:after{width:22px;height:22px;background:url(images/empty.png) no-repeat;top:23px;left:16px}.no_goods .button{float:right;margin:17px 0 0}.wrap_text_empty{padding:10px 0 15px 97px}.catalog_section_list.rows_block{margin:0 -6px}.catalog_section_list .item_block{padding:6px}.catalog_section_list .section_item{line-height:20px;font-size:12px;padding:30px;zoom:1;vertical-align:top;border:1px solid #eaebec;transition:box-shadow ease .2s,border ease-out .2s}.catalog_section_list .section_item:hover{box-shadow:0 0 20px rgba(0,0,0,.1);border-color:#fff}.catalog_section_list .section_item ul{margin:0}.section_item_inner .section_info a,.section_item_inner .section_info ul li.name a:hover{border-bottom:0;font-weight:400;line-height:20px;font-size:13px}.section_info .dark_link{color:#666!important}.section_info .dark_link span{color:#222!important}.catalog_section_list .section_item li.name a{text-decoration:none}.catalog_section_list .section_item li.name a span{font-size:16px;font-weight:500;line-height:18px}.catalog_section_list .section_item li.name{display:block;margin-bottom:8px}.catalog_section_list .section_item li.sect{display:inline-block;padding:0 8px 0 0;margin:0}.catalog_section_list .section_item .image{width:140px;text-align:center}.catalog_section_list .section_item .desc .desc_wrapp{display:inline-block;padding:0;margin:11px 0 0;color:#888;font-size:13px}.catalog_section_list.section .desc .desc_wrapp{margin-top:0}.catalog_section_list.section .section_item li.name{margin-bottom:5px}.catalog_section_list.section{margin-bottom:20px}.articles-list .item .left-data{width:120px;float:left}.articles-list .item .left-data a{display:block}.articles-list .item .left-data a img{vertical-align:middle}.articles-list .item-title a span{display:inline-block}.articles-list .item .right-data .preview-text{font-size:13px;margin:0 0 -5px}.articles-list .item .item-title{margin-bottom:9px}.articles-list .item .item-title a span{font-size:16px}.articles-list .item .item-title a{text-decoration:none}.articles-list .item .right-data{margin-left:150px;overflow:visible}.bx_filter .form-control{margin-bottom:0}.bx_filter .bx_filter_section{border:1px solid #eaebec;background:#f9f9f9;border-radius:2px;position:relative}.bx_filter_param_label.disabled{opacity:.4;cursor:default}.bx_filter .bx_filter_parameters_box{padding:13px 19px 14px;border-bottom:1px solid #eaebec}.bx_filter .bx_filter_parameters_box:hover{background:#fdfdfd}.bx_filter .bx_filter_button_box{clear:both;text-align:center;padding:19px 17px 19px 19px}.bx_filter .bx_filter_parameters_box_title{font-size:13px;display:block;font-weight:600;cursor:pointer;position:relative;padding:0 35px 0 0;color:#333}.bx_filter .bx_filter_parameters_box_title>div,.bx_filter .bx_filter_parameters_box_title>span{position:relative;display:inline-block}.bx_filter_parameters_box_title .hint .icon{position:relative;left:auto;right:-9px;z-index:200}.bx_filter .bx_filter_parameters_box_title:after,.bx_filter .bx_filter_parameters_box_title:before{position:absolute;content:''}.bx_filter .bx_filter_parameters_box_title:after{width:8px;height:5px;right:-3px;top:1px;content:"\f107";font-size:16px;color:#888}.bx_filter .active .bx_filter_parameters_box_title:after{content:"\f106"}.bx_filter .smartfilter .bx_ui_slider_track .bx_ui_slider_handle:hover{border-color:#000}.bx_filter .bx_filter_parameters_box_container .button.bx_filter_search_reset{color:#939393;border-color:#f6f6f7;padding-left:27px;padding-right:0}.bx_filter .bx_filter_parameters_box_container .button.bx_filter_search_reset:hover{border-color:#f6f6f7;background:0 0;color:#333}.bx_filter_search_reset:after{content:"\f00d";position:absolute;top:8px;left:11px}.bx_filter_button_box .bx_filter_block,.bx_filter_parameters_box.active .bx_filter_block{display:block}.bx_filter_vertical input[type=checkbox]+label,.filter input[type=checkbox]+label{padding-left:5px;position:relative;z-index:100;cursor:pointer;outline:0}.filter.label_block input+label{padding-left:23px;font-size:13px;color:#888}.bx_filter_vertical input[type=checkbox]+label.dib,.bx_filter_vertical input[type=checkbox]+label.pal{padding:0;margin-bottom:9px;margin-right:0}.bx_filter_vertical input[type=checkbox]+label.dib>span,.bx_filter_vertical input[type=checkbox]+label.pal>span{margin:0 9px 0 0}.bx_filter_vertical input[type=checkbox]+label.sku,.sku_props .bx_item_detail_size ul li{display:inline-block;font-size:10px;border:1px solid #888;padding:0 10px;text-align:center;margin:0 5px 5px 0;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;cursor:pointer;border-radius:2px}.bx_filter_vertical input[type=checkbox]+label.sku{float:left}.bx_filter_vertical input[type=checkbox]+label.sku span,.sku_props .bx_item_detail_size ul li span{font-size:10px;position:relative;display:block}.bx_filter_vertical input[type=checkbox]+label.sku:hover span,.bx_filter_vertical input[type=checkbox]:checked+label.sku span{color:#fff}.bx_filter_vertical input[type=checkbox]+label.disabled{cursor:default}.filter input[type=checkbox],.filter input[type=radio]{display:none}.sku_props{margin:0 0 2px}.information .sku_props{margin-top:11px}.buy_block .sku_props{margin:0}.sku_props .wrapper_sku>div{margin:0 0 8px}.sku_props .wrapper_sku>div:last-child{margin-bottom:0}.bx_catalog_item_scu ul{font-size:0;margin:0}.bx_catalog_item_scu ul li,.bx_ordercart .bx_scu_scroller_container .bx_scu ul li{position:relative;z-index:9;cursor:pointer;outline:0;font-size:11px;margin:0 0 9px;padding:0 9px 0 0;display:inline-block}.gifts .bx_catalog_item_scu ul li{margin-left:0}.sku_props ul li:before{display:none}.sku_props .bx_item_section_name{color:#888;font-size:12px}.bx_filter_vertical input[type=checkbox]+label.sku.disabled:hover{background:#fff;color:#373737;border-color:#e5e5e5}.bx_filter_vertical input[type=checkbox]+label.sku.disabled:hover span{color:#373737}.bx_filter_vertical .bx_filter_block label:hover span.disabled *{color:#888}.bx_filter_vertical .bx_filter_block.limited_block{max-height:250px;overflow-y:auto}.button_block .to-order.button{border-color:#888;color:#888}.button.in-cart,.button.in-cart:hover{background:#4fad00}.bx_filter_vertical input[type=checkbox]+label:not(.disabled):hover:before,.bx_filter_vertical input[type=checkbox]:checked+label:before,.filter input[type=checkbox]+label:hover:before,.filter input[type=checkbox]:checked+label:before,.filter input[type=radio]+label:hover:before,.filter input[type=radio]:checked+label:before{display:inline-block;z-index:3}.bx_filter_vertical input[type=checkbox]:checked+label:before,.bx_filter_vertical input[type=checkbox]:checked+label:not(.disabled):hover:before,.filter input[type=checkbox]:checked+label:before,.filter input[type=checkbox]:checked+label:hover:before,.filter input[type=radio]:checked+label:before,.filter input[type=radio]:checked+label:hover:before{z-index:-1}.bx_filter_vertical .filter input[type=radio]:checked+label:before{z-index:0}.bg_block:before,.bx_filter_vertical input[type=checkbox]+label:before,.filter input[type=checkbox]+label:before,.filter input[type=radio]+label:before{font-size:0;content:".";display:none;height:13px;width:13px;position:absolute;left:0;top:0;background:#ddd;z-index:-1;border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px}.bg_block:after,.bx_filter_vertical input[type=checkbox]+label:after,.filter input[type=checkbox]+label:after{font-size:0;content:".";display:block;height:13px;width:13px;position:absolute;left:0;top:0;background:url(images/input_icons.png) 0 -19px no-repeat;z-index:2;border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px}.bx_filter_vertical input[type=checkbox]:checked+label:after,.filter input[type=checkbox]:checked+label:after{background-position:0 3px}.bx_filter_vertical input[type=checkbox]+label.disabled:after{background-position:0 -41px}.filter input[type=radio]:checked+label:after{background:url(images/input_icons.png) 1px -27px no-repeat;box-shadow:none}.bx_filter_vertical input[type=checkbox]+label.nab:after,.bx_filter_vertical input[type=checkbox]+label.nab:hover:before,.bx_filter_vertical input[type=checkbox]:checked+label.nab:before{display:none}.bg_block1:after,.filter input[type=radio]+label:after{font-size:0;content:".";display:block;height:13px;width:13px;position:absolute;left:0;top:0;background:#fff;z-index:2;border-radius:100%;-moz-border-radius:100%;-webkit-border-radius:100%;box-shadow:0 0 0 1px #ccc inset;-moz-box-shadow:0 0 0 1px #ccc inset;-webkit-box-shadow:0 0 0 1px #ccc inset}.bg_block:before,.filter input[type=radio]+label:before{height:13px;width:13px;border-radius:100%;-moz-border-radius:100%;-webkit-border-radius:100%;top:0}.bg_block:after,.bg_block:before{width:26px;height:26px;display:inline-block}.bg_block:after{background:url(images/icons_wish.png) -36px -5px no-repeat;width:12px;height:8px;left:-36px;top:12px}.bg_block:before{z-index:2;top:3px;left:-44px}.filter.radio input[type=radio]+label:after,.filter.radio input[type=radio]+label:before{width:13px;height:13px}.filter.radio input[type=radio]+label.disabled:after,.filter.radio input[type=radio]+label.disabled:hover:before{background:#ccc}.filter.radio input[type=radio]+label.disabled{cursor:default}.filter.radio input[type=radio]:checked+label:after{background-position:0 -98px}.bx_filter .bx_filter_parameters_box.active .bx_filter_block i{font-size:15px;font-style:normal;color:#596b70;display:block;padding-bottom:3px}.bx_filter .bx_filter_parameters_box_container{margin-top:15px}.bx_filter .bx_filter_parameters_box_container.pict_block{margin-top:17px}.bx_filter .bx_filter_button_box .bx_filter_parameters_box_container{margin-top:0;font-size:0}.bx-firefox .bx_filter .bx_filter_button_box .bx_filter_parameters_box_container #set_filter.button{margin-right:3px}.bx_filter .bx_filter_parameters_box_container_block{font-size:11px;float:left;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:50%;color:#3f3f3f}.bx_filter .bx_filter_parameters_box_container .bx_filter_parameters_box_container_block:nth-child(2){text-align:right;padding-left:8px}.bx_filter .bx_filter_parameters_box_container .bx_filter_parameters_box_container_block:nth-child(1){padding-right:8px}.bx_filter .bx_filter_parameters_box_container .bx_filter_input_container input{padding:5px 8px 4px;background:#fff}.bx_filter .divider{width:8px;height:1px;position:absolute;top:15px;left:50%;margin-left:-4px;background:#e5e5e5}.bx_filter .bx_filter_parameters_box_container .bx_filter_calendar_container{max-width:100%;position:relative}.bx_filter .bx_filter_parameters_box_container .bx_filter_calendar_container input.calendar{padding:0 23px 0 4px;font-size:15px}.bx_filter .bx_filter_parameters_box_container .bx_filter_input_container img.calendar-icon{display:block;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;font-size:18px;top:0;right:3px}.bx_filter #modef_mobile,.bx_filter .expand_block,.filter_horizontal .bx_filter .bx_filter_popup_result.right a{display:none}.wrapp_all_inputs.wrap_md .iblock{width:100%}.filter_horizontal{padding:0;overflow:hidden}.filter_horizontal .wrapp_all_inputs.wrap_md .wrapp_change_inputs{width:30%;position:relative;margin:0 0 4px}.filter_horizontal .wrapp_all_inputs.wrap_md .wrapp_slider{width:70%;padding:0 0 0 50px}.filter_horizontal .smartfilter .bx_ui_slider_track{margin-top:16px}.filter_horizontal .bx_filter .bx_filter_button_box{text-align:left}.filter_horizontal .bx_filter_vertical input[type=checkbox]+label:not(.dib){float:left;margin-right:5px}.filter_horizontal .bx_filter .bx_filter_popup_result.right{left:0;background:0 0;position:relative;color:#888;margin:0;padding-left:0;line-height:20px;vertical-align:middle}.right_block .filter_horizontal .bx_filter .bx_filter_popup_result{top:-1px!important}.bx_filter .bx_ui_slider_part{position:absolute;top:-3px;width:1px;height:10px;background:0 0}.bx_filter .bx_ui_slider_part.p1{left:-1px}.bx_filter .bx_ui_slider_part.p2{left:25%}.bx_filter .bx_ui_slider_part.p3{left:50%}.bx_filter .bx_ui_slider_part.p4{left:75%}.bx_filter .bx_ui_slider_part.p5{right:1px}.bx_filter .bx_ui_slider_part span{font-size:10px;position:absolute;top:-22px;left:50%;display:block;width:100px;margin-left:-50px;text-align:center;color:#b1b1b1}.bx_filter .bx_ui_slider_part.p2 span,.bx_filter .bx_ui_slider_part.p3 span,.bx_filter .bx_ui_slider_part.p4 span{color:#b1b1b1;display:none}.bx_filter .bx_ui_slider_part.first span{text-align:left;left:0;margin-left:0}.bx_filter .bx_ui_slider_part.last span{text-align:right;left:auto;right:0;margin-left:0}.bx_filter .bx_ui_slider_pricebar,.bx_filter .bx_ui_slider_pricebar_V,.bx_filter .bx_ui_slider_pricebar_VD,.bx_filter .bx_ui_slider_pricebar_VN,.bx_filter .bx_ui_slider_range{position:absolute;top:0;bottom:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;border-right:1px solid #FFF}.bx_filter .bx_ui_slider_range{z-index:auto;background:#ccc}.bx_filter .bx_ui_slider_pricebar{z-index:100}.bx_filter .bx_ui_slider_pricebar_VD{z-index:60;background:#979797}.bx_filter .bx_ui_slider_pricebar_VN{z-index:70;background:#e5e5e5}.bx_filter .bx_ui_slider_pricebar_V{z-index:80;background:#ccc}.bx_filter .bx_ui_slider_handle{position:absolute;top:100%;width:22px;height:22px}.bx_filter .bx_ui_slider_handle:hover{-webkit-cursor:grab;-ms-cursor:grab;-o-cursor:grab;cursor:grab}.bx_filter .bx_ui_slider_handle:active{-webkit-cursor:grabbing;-ms-cursor:grabbing;-o-cursor:grabbing;cursor:grabbing}.bx_filter .bx_ui_slider_handle.left{left:0;margin-left:-8px}.bx_filter .bx_ui_slider_handle.right{right:0;margin-right:-10px}.bx_filter .bx_filter_select_block,.common_select .common_select-link{position:relative;display:block;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;height:30px;margin:0 0 5px;padding:0 33px 0 7px;border-radius:2px;background:#f7f7f7;border:1px solid #e5e5e5;cursor:pointer}.bx_filter .bx_filter_select_text,.common_select .common_select-link .ik_select_link_text{font-size:12px;line-height:28px;max-width:100%;height:30px;cursor:pointer;vertical-align:middle;white-space:nowrap;text-overflow:ellipsis;-ms-text-overflow:ellipsis}.bx_filter .bx_filter_select_block:hover .bx_filter_select_arrow,.common_select .common_select-link.opened .trigger,.common_select .common_select-link:hover .trigger{background:#e3e3e3}.bx_filter .bx_filter_select_block:hover .bx_filter_select_arrow:before,.common_select .common_select-link.opened .trigger:before,.common_select .common_select-link:hover .trigger:before{background-position:-36px -174px}.bx_filter .bx_filter_select_text.fix{min-width:120px}.bx_filter .bx_filter_select_text label{cursor:pointer}.bx_filter .bx_filter_select_arrow,.common_select .common_select-link .trigger{position:absolute;top:0;right:0;width:26px;height:28px;cursor:pointer;border-left:1px solid #E5E5E5;background:#fff;text-align:center;line-height:32px}.bx_filter .bx_filter_select_arrow:before,.common_select .common_select-link .trigger:before{content:"";display:inline-block;width:7px;height:4px;background:url(images/arrows.png) -1px -174px no-repeat}.common_select select,.ik_select_dropdown.common_select-dd ul li:before{display:none}.common_select{width:100%!important;font-size:0}.ik_select_dropdown.common_select-dd{background:#fff;box-shadow:0 1px 4px rgba(0,0,0,.2)}.scroller{overflow:auto;width:100%;height:100%;border:0}.ik_select_list .ik_select_list_inner{position:static!important}.ik_select_option_disabled{pointer-events:none;cursor:default;display:none}.ik_select_list .ik_select_list_inner ul li{text-align:left;padding:4px 9px;cursor:pointer}.bx_filter_select_popup ul li label:hover,.ik_select_list .ik_select_list_inner ul li:hover{background:#e3e3e3}.bx_filter_select_popup ul li label.selected,.ik_select_list .ik_select_list_inner ul li.ik_select_active{background:#ddd;color:#fff}.common_select .icon_color,.ik_select_list .icon_color{display:inline-block;width:16px;height:16px;vertical-align:top;border:2px solid #FFF;margin:0 7px 0 0}.bx_filter_vertical input[type=checkbox],.filter input[type=radio],div[id^=smartFilterDropDown] .popup-window-bottom-row,div[id^=smartFilterDropDown] .popup-window-left-column,div[id^=smartFilterDropDown] .popup-window-right-column,div[id^=smartFilterDropDown] .popup-window-top-row{display:none}.common_select .icon_color{margin-top:4px}.common_select .common_select-link.img,.ik_select_list .ik_select_list_inner ul li.img{padding-left:4px}.ik_select_list .ik_select_list_inner ul li.img{padding-left:5px}.bx_section .common_select-link,.catalog_detail .common_select .common_select-link{height:37px}.bx_section .common_select-link .ik_select_link_text,.catalog_detail .common_select .common_select-link .ik_select_link_text{line-height:35px}.bx_section .common_select-link .trigger,.catalog_detail .common_select .common_select-link .trigger{line-height:40px;height:35px;width:34px}.catalog_detail .common_select .icon_color{margin-top:7px;margin-left:4px}.detail_page .ik_select_list .ik_select_list_inner ul li,.order_page .ik_select_list .ik_select_list_inner ul li{padding:8px 9px 9px}.detail_page .ik_select_list .ik_select_list_inner ul li.img,.order_page .ik_select_list .ik_select_list_inner ul li.img{padding-left:9px}.catalog_detail .sku_props .bx_item_detail_size ul li{margin:0 6px 6px 0}div[id^=smartFilterDropDown]{max-width:170px;width:100%;max-height:205px;overflow-y:auto}div[id^=smartFilterDropDown] .popup-window{width:100%;border:0;box-shadow:0 1px 4px rgba(0,0,0,.2);border-radius:2px}.bx_filter_select_popup{padding:0}.bx_filter_select_popup ul{margin:0;padding:0;list-style:none}.bx_filter_select_popup ul li{display:block;text-align:left;vertical-align:middle}.bx_filter_select_popup ul li:first-child{border:0!important;padding:0!important;margin:0!important}.bx_filter_select_popup ul li:before{display:none}.bx_filter_select_popup ul li label{font-size:12px;display:block;overflow:hidden;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;cursor:pointer;padding:4px 9px;vertical-align:middle;white-space:nowrap;text-overflow:ellipsis;-ms-text-overflow:ellipsis}.bx_filter_select_popup ul li label.disabled{color:#b8b8b8;background:0 0}.bx_filter.bx_horizontal .bx_filter_parameters_box.tags{width:100%;clear:both}.bx_filter .bx_filter_tag{padding:18px;border:1px solid #aed5e0;border-radius:5px;background:rgba(151,214,233,.33)}.bx_filter .bx_tag_link{font-size:12px;text-decoration:none;color:#68939e;border-bottom:1px solid;text-shadow:none}.bx_filter .bx_tag_link.active,.bx_filter .bx_tag_link:hover{color:#1d3d46;border-bottom:none}.bx_filter .bx_filter_param_label,.filter label{position:relative;display:block;margin:0 0 2px}.bx_filter .bx_filter_param_label.dib,.radio.filter label{display:inline-block}.radio.filter label{line-height:12px;cursor:pointer}.bx_filter .bx_filter_param_text{line-height:30px;position:relative;display:inline-block;margin:0 5px 0 4px;vertical-align:middle;text-align:center;cursor:pointer}.bx_filter .disabled .bx_filter_param_text{cursor:default}.bx_filter_select_popup .bx_filter_param_label.active{background:#f3f8fa}.bx_filter_input_checkbox{position:relative;display:block;clear:both;min-height:20px}.bx_filter .sku .bx_filter_input_checkbox{min-height:auto}.bx_filter_input_checkbox input[type=checkbox],.bx_filter_input_checkbox input[type=radio]{position:relative;top:4px;float:left}.bx_filter .bx_filter_input_checkbox .bx_filter_param_text,.filter label>span{display:block;line-height:14px;margin-left:18px;text-align:left}.bx_filter .filter label>span{margin:0}.bx_filter .sku .bx_filter_input_checkbox .bx_filter_param_text,.sku_props .bx_item_detail_size ul li span{display:block;line-height:15px;margin:0;text-align:center;padding:7px 0;font-size:13px}.bx_item_list_you_looked_horizontal .bx_item_detail_size ul li.active:hover span{color:#fff}.bx_filter .bx_filter_input_checkbox input+.bx_filter_param_text{line-height:21px}.bx_catalog_item_scu .bx_item_detail_scu ul li .cnt,.bx_filter .bx_filter_param_btn{display:inline-block;width:26px;height:26px;text-align:center;text-decoration:none;color:#000;vertical-align:middle;box-shadow:0 0 1px rgba(0,0,0,.1) inset;border-radius:2px;background:#fff;-webkit-transition:border .3s ease,box-shadow .1s ease,color .3s ease;-moz-transition:border .3s ease,box-shadow .1s ease,color .3s ease;-ms-transition:border .3s ease,box-shadow .1s ease,color .3s ease;-o-transition:border .3s ease,box-shadow .1s ease,color .3s ease;transition:border .3s ease,box-shadow .1s ease,color .3s ease}.bx_filter .bx_filter_param_label.active .bx_filter_param_btn{border-color:#fff}.bx_filter .bx_filter_param_label.disabled .bx_filter_param_btn.bx_color_sl{background:0 0;box-shadow:none;position:relative}.bx_filter .bx_filter_select_text_icon,.bx_filter_select_popup .bx_filter_select_text_icon{line-height:33px;position:relative;display:inline-block;width:24px;height:24px;margin-top:-2px;margin-right:2px;vertical-align:middle;border-radius:2px}.bx_catalog_item_scu .bx_item_detail_scu ul li .cnt_item,.bx_filter .bx_filter_btn_color_icon,.bx_filter_select_popup .bx_filter_btn_color_icon,.bx_scu_scroller_container ul li .cnt_item{line-height:26px;position:relative;top:0;border-radius:1px;display:inline-block;width:26px;height:26px;border:0 solid #fff;vertical-align:middle;-webkit-background-size:cover;background-size:cover;box-shadow:0 0 0 1px rgba(0,0,0,.1) inset}.bx_filter .bx_filter_param_label.active .bx_filter_btn_color_icon{box-shadow:0 0 0 2px #fff inset,0 0 0 2px #ddd}.bx_catalog_item_scu .bx_item_detail_scu ul li:not(.active):not(.bx_active) .cnt_item:hover,.bx_filter .bx_filter_btn_color_icon:hover,.bx_scu_scroller_container ul li:not(.active):not(.bx_active) .cnt_item:hover{box-shadow:0 0 0 2px rgba(0,0,0,.1) inset}.bx_filter .bx_filter_select_text .bx_filter_btn_color_icon,.popup-window .bx_filter_btn_color_icon{border-radius:0;width:16px;height:16px}.bx_catalog_item_scu .bx_item_detail_scu ul li.active span:not(.cnt_item),.bx_filter .bx_filter_param_label.active .bx_filter_param_btn,.bx_filter label.pal:hover .bx_filter_param_btn{background:#ddd}.bx_catalog_item_scu .bx_item_detail_scu ul li:hover span:not(.cnt_item),.bx_filter label.dib:not(.active):hover .bx_filter_param_btn{background:#e5e5e5}.bx_filter label.dib.disabled:hover .bx_filter_param_btn{background:#fff}.bx_filter .pict{display:inline-block;margin:-2px 0 0;float:left}.bx_filter_select_popup .bx_filter_btn_color_icon{margin:0 0 0 -3px;top:0;vertical-align:middle}.bx_filter_select_popup .bx_filter_param_text{margin:0 0 0 3px}.bx_filter .bx_filter_select_block .bx_filter_btn_color_icon{top:-1px!important;margin:0 0 0 -2px}.bx_filter_btn_color_icon.all{position:relative;border:none;box-shadow:none}.bx_filter_btn_color_icon.all:after,.bx_filter_btn_color_icon.all:before{position:absolute;width:60%;height:60%;background:#fff;content:" ";box-shadow:inset 0 0 0 1px rgba(0,0,0,.2)}.bx_filter_btn_color_icon.all:after{right:0;bottom:0}.bx_filter_btn_color_icon.all:before{top:0;left:0}.bx_filter .bx_filter_popup_result{font-size:12px;font-weight:400;line-height:51px;position:absolute;z-index:930;display:none;margin-top:-14px;margin-left:-4px;padding:0 20px;white-space:nowrap;color:#fff}.bx_filter .bx_filter_popup_result a{margin:0 0 0 18px}.bx_filter .bx_filter_popup_result.right{left:102%}.bx_filter .bx_filter_popup_result.left{right:102%}.bx_filter .button{padding-left:11px;padding-right:12px}.bx-firefox .bx_filter .button{padding-right:10px}.bx_filter .button#set_filter{margin:0 10px 0 0}.bx_filter .bx_filter_block .clb{clear:both}.sort_header{height:29px;position:relative;zoom:1;opacity:1}.sort_header.view_block{border-bottom:1px solid #e5e5e5}.sort_header .sort_display{float:right;font-size:0}.sort_header .sort_filter{float:left}.sort_header .sort_filter a{display:inline-block;text-decoration:none;color:#a5a3a3;margin:0 20px 0 0}.sort_header .sort_filter a:last-child{margin-right:0}.sort_header .sort_filter a .icon{content:"";display:none;background:url(images/sort_icons.png) -42px 3px no-repeat;width:15px;height:13px;vertical-align:top;margin:0 3px 0 0}.sort_header .sort_filter a.SHOWS .icon{background-position:-20px -77px}.sort_header .sort_filter a.SHOWS.current .icon,.sort_header .sort_filter a.SHOWS:hover .icon{background-position:-2px -77px}.sort_header .sort_filter a.NAME .icon{background-position:-20px -95px}.sort_header .sort_filter a.NAME.current .icon,.sort_header .sort_filter a.NAME:hover .icon{background-position:-2px -95px}.sort_header .sort_filter a.PRICE .icon{background-position:-20px -114px}.sort_header .sort_filter a.PRICE.current.icon,.sort_header .sort_filter a.PRICE:hover .icon{background-position:-2px -114px}.sort_header .sort_filter a.QUANTITY .icon{background-position:-21px -134px}.sort_header .sort_filter a.QUANTITY.current.icon,.sort_header .sort_filter a.QUANTITY:hover .icon{background-position:-2px -134px}.sort_header .sort_filter a span{font-size:12px;line-height:13px}.sort_header .sort_filter a i.arr:after{content:"\f106";position:absolute;top:1px;left:5px}.sort_header .sort_filter a>span{vertical-align:top;float:left}.sort_header .sort_filter a i.arr{display:inline-block;height:20px;width:18px;position:relative}.sort_header .sort_filter a:hover i.arr{background-position:-25px 3px}.sort_header .sort_filter a.current.desc i.arr,.sort_header .sort_filter a.current.desc:hover i.arr{background-position:5px 3px}.sort_header .sort_filter a.desc i.arr:after{content:"\f107"}.sort_header .sort_filter a.current i.arr,.sort_header .sort_filter a.current:hover i.arr{background-position:-23px 3px}.sort_display a,.sort_display a i{display:inline-block;height:13px;width:13px;line-height:20px}.sort_display a{margin:0 0 0 15px}.sort_display a i{background:url(images/sort_icons.png) no-repeat}.sort_display a.block i{background-position:-1px -41px}.sort_display a.block.current i,.sort_display a.block:hover i{background-position:-1px -23px}.sort_display a.list i{background-position:-19px -41px}.sort_display a.list.current i,.sort_display a.list:hover i{background-position:-19px -23px}.sort_display a.table i{background-position:-37px -41px}.sort_display a.table.current i,.sort_display a.table:hover i{background-position:-37px -23px}.left_block .internal_sections_list .title{padding:14px 19px 13px;position:relative;white-space:nowrap;font-size:13px;line-height:18px;font-weight:500;border:1px solid #e5e5e5}.left_block .internal_sections_list .title .inner_block{position:relative;cursor:pointer}.left_block .internal_sections_list .title .hider{display:inline-block;height:5px;width:8px;background:url(images/arrows.png) -35px -162px no-repeat;cursor:pointer;top:7px;right:0;position:absolute}.left_block .internal_sections_list .title .inner_block:before{width:16px;height:16px;right:-4px;margin-top:1px;border-radius:16px;display:none;content:"";position:absolute}.left_block .internal_sections_list .title .inner_block:hover:before{display:block}.left_block .internal_sections_list .title .inner_block:hover .hider{background-position:-19px -143px;top:6px}.left_block .internal_sections_list .title .hider.opened{background-position:-1px -162px}.left_block .internal_sections_list .title .inner_block:hover .hider.opened{background-position:-1px -143px;top:7px}.left_block .internal_sections_list ul.sections_list_wrapp{margin:1px 0 0}.left_block .internal_sections_list ul.sections_list_wrapp>li.item:first-child{border-top:0}.left_block .internal_sections_list li{position:relative;zoom:1;background:#f7f7f7}.bx_filter_container_title,.left_block .internal_sections_list ul.sections_list_wrapp>li.item{border-top:1px solid #fff}.left_block .internal_sections_list li.depth3{margin-bottom:0}.left_block .internal_sections_list li.depth3 .menu_title{text-decoration:none;padding-bottom:6px}.left_block .internal_sections_list li a{text-decoration:none;padding:9px 19px;width:100%;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;display:inline-block;overflow:hidden;vertical-align:top;zoom:1}.left_block .internal_sections_list li a span{font-size:12px;line-height:16px}.left_block .internal_sections_list li.cur a span{border-bottom:1px solid transparent}.left_block .internal_sections_list ul.sections_list_wrapp>li.item:hover>a{z-index:100}.left_block .internal_sections_list .child_wrapp ul>li{background:#fff;position:relative;display:block;margin-left:9px}.left_block .internal_sections_list .child_wrapp ul.child li:after{content:"";display:block!important;position:absolute;left:0;top:10px;width:2px;height:2px;background:#1d1a1a}.left_block .internal_sections_list ul.sections_list_wrapp>li.item.cur .child_container{display:block}.left_block .internal_sections_list .child_wrapp.depth3{max-width:420px;padding-bottom:10px}.left_block .internal_sections_list .child_wrapp .child li.depth3 a.menu_item{font-size:12px;margin-left:10px;padding-top:0;padding-left:10px;display:block;position:relative}.left_block .internal_sections_list .child_wrapp .child li.depth3 a.menu_item:before{content:"";display:block;position:absolute;left:1px;top:7px;width:2px;height:2px;background:#1d1a1a}.left_block .internal_sections_list .child_wrapp .child li>a{text-decoration:none;border:0;padding-left:9px}.left_block .internal_sections_list .child_wrapp a{line-height:16px;height:inherit;font-size:12px;padding:3px 10px}.left_block .internal_sections_list .child_wrapp a.title{text-decoration:none}.item .child_container{display:none;z-index:10;background:#f6f6f7;border-bottom:1px solid #eaebec}.item .child_container .child_wrapp{border:0;padding:8px 10px;max-height:500px;overflow:auto}.item .child_container .child_wrapp .menu_title a{font-size:12px;text-decoration:none;font-weight:600}.item .child_container .child_wrapp ul>li{position:relative;display:block}.item.cur .child_container,.item.current .child_container{display:block}.item .child_container .child_wrapp .child li>a{text-decoration:none;border:0;padding-left:9px;color:#666}.item .child_container .child_wrapp .child li>a.menu_item{padding-left:17px}.item .child_container .child_wrapp a{line-height:16px;height:inherit;font-size:12px;padding:3px 10px}.item .child_container .child_wrapp a.title{text-decoration:none}.wraps .item{position:relative}.wraps>.wrapper_inner{padding-top:24px;padding-bottom:50px;z-index:0}.wraps .item .child_right_container{opacity:0;display:block;transition:opacity .2s ease .2s,visibility .2s ease .2s;visibility:hidden;z-index:3;top:0;left:100%;margin:0;min-width:100%;position:absolute;background:#fff;color:#333;box-shadow:0 0 7px rgba(0,0,0,.36)}.wrapp_stockers .like_icons span,.wraps .item:hover .child_right_container{opacity:1;visibility:visible}.wraps .item .child_right_container li.menu_item a{color:#333;padding:0}.wraps .item .child_right_container .child{font-size:0}.child_right_container .menu_item{display:inline-block;vertical-align:top;margin:0 0 2px;padding:10px;font-size:12px}.child_right_container .menu_item .image{width:66px;height:56px;display:table-cell;vertical-align:middle;text-align:center}.child_right_container .menu_item .image img{vertical-align:middle}.child_right_container .menu_item .text{height:56px;display:table-cell;vertical-align:middle;padding:0 12px;text-align:left}.display_list .item_wrap{border-left:1px solid #e7e7e7;border-right:1px solid #e7e7e7;border-bottom:1px solid #e7e7e7}.display_list .item_wrap.prev{border-bottom-color:#fff}.display_list .item_wrap:hover{border-color:#fff!important}.display_list .list_item_wrapp:first-child{border-top:1px solid #e7e7e7}.display_list .list_item_wrapp+div .list_item_wrapp{border-top-width:0}.display_list .description_wrapp .wrapp_stockers{margin:0;font-size:0}.display_list .description_wrapp .wrapp_stockers .rating{margin:0}.display_list .description_wrapp .wrapp_stockers>div{display:inline-block;vertical-align:top;margin:0;padding:8px 23px 0 0}.display_list .item-title a,.display_list .item-title a span{font-size:18px}.wrapp_stockers .like_icons{font-size:0;height:30px}.display_list .article_block{font-size:12px;color:#888}.display_list .description_wrapp .wrapp_stockers .article_block,.display_list .description_wrapp .wrapp_stockers .item-stock{padding-top:11px}.display_list .description_wrapp .wrapp_stockers .article_block{padding-top:9px}.wrapp_stockers .like_icons>div{display:inline-block;margin:0 5px 0 0}.wrapp_stockers .like_icons>div.offers_compare{margin:0 19px 0 0}.display_list .item-stock{margin:0 0 0 14px}.display_list .list_item .preview_text{line-height:18px;margin:14px 0 0;font-size:13px}.display_list .list_item .show_props a span{font-size:12px;line-height:18px}.display_list .list_item .show_props{margin:10px 0 -3px}.char_title{color:#333!important}.show_props .char_title{position:relative;cursor:pointer}.show_props .char_title:after{content:"\f107";padding:0 0 0 5px}.show_props .char_title.opened:after{content:"\f106"}.display_list .list_item .show_props a i.icon{top:0;position:relative;margin-right:7px;border-radius:11px;-moz-border-radius:11px;-webkit-border-radius:11px;background:#383838;vertical-align:middle}.display_list .list_item .show_props a.opened i.icon b{background-position:-34px -185px}.display_list .list_item .show_props a i.icon,.display_list .list_item .show_props a i.icon b{display:inline-block;height:11px;width:11px}.display_list .list_item .show_props a i.icon b{background:url(images/arrows.png) 2px -185px no-repeat}.display_list .list_item .props_list_wrapp{display:none;margin:0;padding:10px 0 0}.display_list .sale_block{margin-top:5px}.bx_item_detail_scu .bx_scu_scroller_container{position:relative;z-index:1;margin:7px 0 0}.bx_item_detail_size .bx_size_scroller_container{margin:4px 0 0}.ik_select_dropdown ul li.missing,.sku_props ul li.missing{opacity:.4}.unshow_un_props .sku_props ul li.missing,.unshow_un_props ul li.missing{display:none}.catalog .catalog_block{padding:0;width:100%}.ajax_load.block .top_wrapper,.catalog .top_wrapper{margin-top:12px}.bottom_nav.block,.search.block .bottom_nav{position:relative;top:5px;float:left;width:100%}.catalog .catalog_block:after{content:"";display:block}.catalog_block .counter_wrapp{margin-bottom:0;padding-top:0;margin-top:-1px;white-space:nowrap}.catalog_block .sku_props+.counter_wrapp,.catalog_block .woffers{padding-top:17px}.catalog_block .hover_block{opacity:0;visibility:hidden;max-height:0;-webkit-transition:all .15s ease;-webkit-transition-delay:.5s;-moz-transition:all .15s ease;transition:all .15s ease;transition-delay:50ms;padding:17px 0 0}.catalog_block .hover_block .sku_props{margin:0;padding:0 0 2px}.catalog_block .image_wrapper_block{margin:0 0 15px}.catalog_block .catalog_item_wrapp:nth-child(4n) .item_wrap,.module_products_list .wrapp_stockers .like_icons>div:last-child{margin-right:0}.shadow_delay{transition-delay:.22s!important}.catalog_block:not(.items) .item_wrap{height:auto!important;position:relative;z-index:51;background:#fff;padding-bottom:0}.tabs_slider .catalog_block .item_wrap.hover,.tabs_slider .catalog_block .item_wrap:not(.touch):hover{z-index:58;padding-bottom:20px}.catalog_block .item_wrap.hover .hover_block,.catalog_block .item_wrap:not(.touch):hover .hover_block{opacity:1;visibility:visible;max-height:500px}.catalog_block+.bottom_nav .ajax_load_btn{padding:0;position:relative;top:-22px;margin-bottom:-2px}.catalog_block .counter_wrapp .more_text,.catalog_block .wrap_nav{display:none}.catalog_block .view_sale_block .values{margin-bottom:3px;height:36px}.catalog_block .catalog_item_wrapp:nth-child(4n){width:210px}.module_products_list .foto-cell .image_wrapper_block,.module_products_list .foto-cell .image_wrapper_block a{max-width:50px;min-width:30px;height:50px;line-height:50px;position:relative}.module_products_list .cost.prices .price.discount{margin:0;vertical-align:text-top;position:relative;top:-1px}.module_products_list .counter_wrapp{padding:0;white-space:nowrap}.module_products_list .counter_wrapp .button_block{white-space:normal}.module_products_list .counter_wrapp .button_block.wide{display:inline-block;width:auto}.adaptive_button,.adaptive_button .more_text,.bx_compare .bx_sort_container ul li:not(.current):before,.module_products_list .counter_wrapp .more_text{display:none}.table table.module_products_list{float:none}.bx_compare .bx_sort_container{position:relative}.bx_compare .bx_sort_container ul.tabs-head{margin:0}.bx_compare .bx_sort_container ul.tabs-head>li{margin:0 4px -1px 0;border-radius:2px 2px 0 0}.bx_compare .bx_sort_container ul.tabs-head>li:hover{background:#fff}.bx_sort_container .wrap_remove_button{position:absolute;top:-7px;right:0}.bx_compare .frame{margin:0 0 0 230px;position:relative;overflow:hidden}.bx_compare .frame .wraps{width:10000%!important;overflow:hidden;font-size:0}.bx_compare .frame.props .wraps{margin-left:-230px}.bx_compare .compare_view td{width:230px;min-width:230px;max-width:230px;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;padding:40px 20px 20px;font-size:13px;position:relative;text-align:left;vertical-align:top;overflow:hidden}.bx_compare .frame.border::after{background:#e5e5e5;content:"";height:100%;position:absolute;right:0;top:0;width:1px}.bx_compare .compare_view .item_block{margin:0 20px 0 0;position:relative}.bx_compare .compare_view .item_block a{font-weight:500}.bx_compare .compare_view .item_block .title{display:block;padding:14px 0 0}.bx_compare .compare_view.data_table_props tr td .remove i{display:none}.bx_compare .compare_view.data_table_props td{border:1px solid #e5e5e5;padding:10px 27px 13px 18px;transition:none 0s ease 0s}.bx_compare .data_table_props tr td:first-of-type{font-weight:600;visibility:hidden}.prop_title_table{position:absolute;left:0;width:231px;overflow:hidden;z-index:1}.prop_title_table .data_table_props td{opacity:0;visibility:hidden}.bx_compare .prop_title_table .data_table_props tr td:first-child{display:table-cell;opacity:1;visibility:visible}.bx_compare .prop_title_table .data_table_props tr td .remove i{display:inline-block}.bx_compare .remove{position:absolute;top:0;z-index:1;right:0}.bx_compare .compare_view.top .remove{right:-13px;top:-13px}.bx_compare .compare_view.clone .remove{right:15px;top:12px;display:none}.bx_compare .compare_view.data_table_props tr.hovered td{background:#f7f7f7}.bx_compare .compare_view.data_table_props tr.hovered td .remove{display:block}.bx_compare .slider_navigation,.bx_filtren_container ul li,.bx_filtren_container ul li:before{display:none}.wrapp_scrollbar{position:relative;margin:21px 0 33px 230px}.bx_filtren_container ul{font-size:0;margin:41px 0 5px}.bx_filtren_container ul li.visible{display:inline-block;vertical-align:top;margin:0 5px 5px 0}.bx_filtren_container ul li span{font-size:12px;line-height:16px;text-transform:none}.wrapp_scrollbar .wr_scrollbar{margin:0 38px 1em;background:#e5e5e5;height:1px;opacity:0}.wr_scrollbar .scrollbar{height:5px;line-height:0;display:none;position:relative;top:-3px;cursor:pointer}.wr_scrollbar .scrollbar .handle{width:100px;height:3px;position:relative;top:2px;background:#292a33;cursor:pointer;border-radius:3px}.thumbs_navigation ul li,.thumbs_navigation ul li:hover{background-color:transparent}.wr_scrollbar .scrollbar .handle .mousearea{position:absolute;top:-9px;left:0;width:100%;height:20px}.video_block{text-align:center;margin:0 0 30px}.video_block .description{text-align:left}.catalog_detail .item_main_info .stickers{top:25px;left:0}.offers_img,.offers_img a{transition:opacity .1s ease;text-align:center}.offers_img.wof{opacity:0}.img_wrapper .wrapp_thumbs{position:relative}.thumbs_navigation ul li{position:absolute;top:50%;margin-top:-14px;z-index:2}.catalog_detail .item_slider .like_icons span,.img_wrapper .thumbs_navigation .flex-direction-nav{margin:0}.img_wrapper .thumbs_navigation ol li{display:none}.img_wrapper .thumbs_navigation ul li.flex-nav-prev{left:-38px}.img_wrapper .thumbs_navigation ul li.flex-nav-next{right:-37px}.info_item .middle_info,.info_item .top_info{padding:24px 0 3px;overflow:hidden}.info_item .top_info .item_block{vertical-align:middle;line-height:0}.info_item .top_info{padding:14px 0 19px;border-bottom:1px solid #F2F2F2}.info_item .top_info .rows_block+.preview_text{padding-top:13px}.catalog_detail .item_slider .like_icons{top:-6px;right:-16px}.like_wrapper{position:relative}.color_link:hover{color:#1d2029!important}.catalog_detail #ask_block .form-control{height:auto;border:none;padding:0;box-shadow:none}.catalog_detail #ask_block .form-control label{font-weight:400}.catalog_detail .top_info .like_icons .wish_item.added span.value:before{background-position:5px -44px}.catalog_detail .top_info .like_icons .compare_item span.value:before{background-position:-20px -13px}.catalog_detail .top_info .like_icons .compare_item.added span.value:before{background-position:-18px -44px}.catalog_detail .top_info .like_icons span{font-size:11px;opacity:1;visibility:visible;border:0;display:inline-block;vertical-align:middle;margin:0;background:0 0}.catalog_detail .top_info .like_icons span:hover{background:0 0}.catalog_detail .top_info .like_icons span.value span{display:inline-block;margin:1px 7px 0 0}.info_item .top_info .article{font-size:13px;color:#666;line-height:18px}.info_item .top_info .article .value{padding:5px 0;margin:0}.info_item .top_info .brand{float:right;font-size:13px}.info_item .top_info .brand img{display:block;max-width:100%}.info_item .preview_text{color:#333;max-height:42px;overflow:hidden;padding:0 0 3px}.info_item .middle_info .prices .price{font-size:26px;line-height:20px;padding-right:5px}.info_item .middle_info .prices .discount *{margin-top:12px;font-size:16px}.info_item .middle_info .prices .sale_block{margin:11px 0 0}.info_item .middle_info .view_sale_block{margin-top:9px}.info_item .middle_info .item-stock{margin:14px 0 0}.info_item .middle_info .item-stock .store_view{cursor:pointer}.info_item .middle_info .prices_block{padding:0 0 22px}.info_item .middle_info .prices_block .rating{margin:16px 0 0}.info_item .middle_info .buy_block{font-size:0;line-height:0}.info_item .middle_info .buy_block>div{display:inline-block;vertical-align:top}.info_item .middle_info .buy_block .wrapp_one_click{padding-bottom:22px!important}.info_item .middle_info .buy_block .buys_wrapp,.info_item .middle_info .buy_block .sku_props+.counter_wrapp{padding-top:15px}.ajax_load.table .counter_wrapp{padding-top:0}.ajax_load .counter_wrapp.woffers,.info_item .middle_info .buy_block .sku_props+.counter_wrapp.woffers{transition:opacity .1s ease;opacity:0}.info_item .middle_info .buy_block .counter_wrapp{padding:0 12px 0 0;white-space:nowrap}.info_item .middle_info .buy_block .counter_wrapp>div{margin-bottom:22px!important}.info_item .middle_info .buy_block .counter_wrapp .more_text{font-size:12px;white-space:normal}.noffer .info_item .middle_info .buy_block .one_click{opacity:1}.info_item .middle_info .preview_text{padding:22px 0 0;font-size:13px;line-height:18px}.buy .counter_wrapp{padding:0}.catalog_detail .info_item .middle_info .buy_block .buys_wrapp.offer_buy_block{padding-top:0}.catalog_detail .buy_block .offer_buy_block>div{display:inline-block;vertical-align:top;font-size:0;line-height:0;white-space:nowrap}.top_info .more_block{cursor:pointer;font-size:13px}.top_info .more_block:after{content:"\f107";padding:0 0 0 5px}.catalog_detail .counter_wrapp .counter_block{margin-right:12px}.catalog_detail .w_icons.button.to-cart:before{position:absolute;top:10px;left:19px;background:url(images/ai.png) -460px -49px no-repeat;width:17px;height:16px;content:"";display:block}.catalog_detail .w_icons.button.to-cart{padding-left:46px;white-space:nowrap}.catalog_detail .offers_table .w_icons.button.to-cart:before{top:7px}.slides>li.catalog_item,.specials.tab_slider_wrapp .tabs_content .tabs_slider>li,.tabs_slider>li.catalog_item{border:1px solid #eaebec}.slides>li.catalog_item:hover,.specials.tab_slider_wrapp .tabs_content .tabs_slider>li:hover,.tabs_slider>li.catalog_item:hover{border:1px solid #fff}.catalog_detail .tizers_block_detail{border-top:1px solid #eaebec}.catalog_detail .tizer .inner_wrapper{padding:18px 20px;font-size:13px;line-height:16px;color:#555}.catalog_detail .tizer .image{width:45px;height:40px;line-height:40px;float:left;text-align:center}.catalog_detail .tizer .image+.text{padding-left:55px}.catalog_detail .tabs_section{margin:-10px 0 0}.catalog_detail .tabs_section .tabs-head li{margin-top:10px}.catalog_detail .stock_board{padding:20px 15px 19px 84px;background:#f7f7f7;margin:0 0 22px;position:relative;font-size:13px}.catalog_detail .stock_board:before{content:"";display:inline-block;position:absolute;width:45px;height:45px;background:url(images/icons_goods.png) -1px -139px no-repeat;left:25px;top:21px}.catalog_detail .stock_board .title{font-size:15px;font-weight:500}.catalog_detail .stock_board .read_more{font-size:13px}.catalog_detail .stock_board .txt{margin:5px 0 4px;line-height:18px}.share_wrapp{position:relative}.share_wrapp .text.button{font-size:13px;border-color:#888;text-transform:none;padding:7px 10px 8px 32px;position:relative;color:#888;line-height:15px}.share_wrapp .text.button:before{content:"";display:inline-block;position:absolute;width:12px;height:14px;background:url(images/ai.png) -426px -50px no-repeat;left:13px;top:8px;opacity:.7}.share_wrapp .text.button:hover{border-color:444444;color:444444}.share_wrapp .text.button:hover:before{opacity:1}.share_wrapp .shares{display:none;position:absolute;top:42px;left:-5px;z-index:2;background:#fff;box-shadow:0 0 15px rgba(0,0,0,.12);border-radius:2px;margin:0 -20px;width:155px}.share_wrapp .shares .b-share{padding:20px 20px 15px!important}.share_wrapp .shares .b-share a{padding:0!important}.share_wrapp .shares .b-share a:nth-child(3n){margin-right:0}.share_wrapp .shares:after{content:'';position:absolute;width:0;height:0;border:11px solid transparent;border-bottom-color:#fff;left:50%;top:-16px;margin-left:-11px}.contacts_map:before,.icon_error_block:after,.module-map .infoBox .close_info:after,.module-map .infoBox .inner::after{content:" "}.catalog_detail .element_detail_text{font-size:12px;line-height:15px;padding:0 0 39px}.catalog_detail .element_detail_text .sh{width:120px;float:left}.catalog_detail .element_detail_text .price_txt{padding-left:129px;color:#b3b3b3;font-size:12px}.catalog_detail .props_list{width:100%;margin:0;color:#555}.catalog_detail .tabs_content .char_block{margin-bottom:30px}.catalog_detail .props_list td{font-size:13px;vertical-align:top;background:url(images/dott.png) 0 12px repeat-x;width:50%}.catalog_detail .props_list td.char_value span{padding:0 0 0 10px}.props_list .hint{position:absolute;top:0;right:-10px;z-index:1}.props_list .hint .icon{background:#e5e5e5;border-radius:100%}.catalog_detail .tabs_content .descr_div>div{padding-bottom:4px}.catalog_detail .tabs_content .descr_div .char_block{width:50%;padding:0 40px 36px 0;margin-bottom:0}.catalog_detail .tabs_content .descr_div .char_block.wide{width:100%}.catalog_detail .tabs_content .descr_div .char_block+.serv{padding:0 0 0 10px}.catalog_detail .tabs_content .serv{width:50%}.catalog_detail .tabs_content .serv.block_view{padding:0}.props_block .char{margin:12px 0;display:inline-block;width:15%;text-align:left;padding:0 10px 0 0;vertical-align:top}.props_block .char_name{text-align:left;font-weight:400;font-size:12px}.bottom_slider .catalog_item,.bottom_slider .catalog_item .buttons_block,.bx_ordercart .module-cart thead tr td.item{text-align:center}.props_block .char_value{font-weight:500;font-size:14px}.catalog_detail .tabs_content .props_block .char{font-size:13px}.catalog_detail .tabs_content .props_block .char .hint{position:absolute;top:0;right:-19px}.catalog_detail .p_block .item-stock .value .store_view{border-bottom:1px dotted}.catalog_detail .item-stock .value .store_view:hover{color:#1d2029}.catalog_detail .wrapp_docs{width:25%;padding:0 20px 0 0}.button.wicon i{background-position:-91px -206px;margin:0 10px 0 5px}.catalog_detail .show_btn{width:15%;float:left}.catalog_detail .form_wr{width:85%;font-size:12px;padding:0 0 0 21px;float:left}.catalog_detail .buy_block .button.in-cart i{background-position:-36px -3px;margin-right:10px;width:12px}.forms .text_block{width:29%;font-size:13px;padding:0 60px 0 0}.forms .form_block{width:71%}.catalog_detail .info_item .middle_info .buy_block .sku_props{display:block}.bx_item_detail_scu .bx_scu_scroller_container{margin-left:2px}.middle_info .bx_catalog_item_scu .bx_item_detail_scu ul li .cnt_item{width:46px;height:46px;border:2px solid #fff}.middle_info .sku_props .bx_scu_scroller_container,.middle_info .sku_props .bx_size_scroller_container{margin-top:11px}.middle_info .sku_props .wrapper_sku>div{margin-bottom:15px}.bottom_slider .catalog_item .cost.prices,.wr .catalog_item .cost.prices{margin:11px 0 0}.bottom_slider .catalog_item:hover .item_info{height:auto!important}.bottom_slider .catalog_item .buttons_block .button{float:none}.reviews-reply-field .lhe-stat-toolbar-cont{border:1px solid #E5E5E5;border-bottom-width:0;box-sizing:border-box;border-radius:2px 2px 0 0;background-color:#F7F7F7}.reviews-reply-field iframe{border:1px solid #E5E5E5!important;box-sizing:border-box;border-radius:0 0 2px 2px;background-color:#F7F7F7}.reviews-reply-field-upload{padding:11px 0 19px}.forum-upload-file-attach{font-size:13px}.reviews-reply-field input[type=checkbox]{display:none}.filter label span{line-height:14px}.reviews-reply-field-settings{padding:0 0 16px}.reviews-post-reply-buttons{margin:0 0 2px}.reviews-reply-buttons .button:first-child{margin:0 13px 0 0}.reviews-post-reply-buttons a{font-size:11px}.reviews-reply-fields label,.reviews-reply-header{margin:0 0 2px;display:block}.reviews-reply-fields{margin:0 0 19px}.reviews-block-container{margin:0 0 30px}.reviews-post-table{font-size:12px;border-bottom:1px solid #e5e5e5;width:100%;margin:0 0 13px}.reviews-post-table thead td .message-post-date{line-height:14px;padding-left:16px;font-size:10px;background:url(images/clock_small.png) -2px -4px no-repeat;margin-left:10px;display:inline-block}.reviews-post-reply-buttons span.separator{background-color:#E0E0E0;display:inline-block;margin:0 4px;height:8px;line-height:5px;width:1px}.reviews-post-table .reviews-text{margin:3px 0}.forum-quote{background:#f8f2d4;width:100%;margin:5px 0 0}blockquote.bx-quote{background:#f8f2d4!important}.forum-quote tr th{text-indent:-9999px;display:none}.forum-quote tbody tr td{border:1px solid #ddd;padding:8px 13px 0;background:url(images/font_quote.gif) -1px -1px no-repeat}.forum-quote tbody tr td a,.reviews-header-title a{cursor:default}.reviews-reply-field-captcha .text_block{padding:0 10px 0 0;font-size:12px}.reviews-reply-field-captcha .capch_block{padding:17px 0 0;line-height:0}div.reviews-header-box{color:#fff}.reviews-note-box,div.reviews-info-box{border:1px solid #ddd;padding:10px;margin:0 0 20px}div.reviews-code-box{font-size:12px;width:100%;border-width:1px solid #ddd;background:#f8f2d4}div.reviews-code-box ol,div.reviews-code-box ol li,div.reviews-code-box ol li span{margin:0;padding:0;border:none}div.reviews-code-box ol{list-style:decimal;margin-left:3em;padding:.5em 0}div.reviews-code-box ol li{list-style:decimal-leading-zero;list-style-position:outside!important;padding:0 .5em 0 1.5em!important;margin:0;line-height:1.5em}.reviews-note-box p{margin-bottom:0}.reviews-note-box .reviews-note-error{color:#e62222}.bx_ordercart .module-cart table td.custom .no_img,.bx_ordercart .module-cart table td.name-cell.no_img{padding-top:8px}.bx_ordercart .module-cart table td.cost-cell.no_img{padding-top:9px}.bx_ordercart .module-cart table td.cost-cell.notes.no_img{padding-top:6px}.bx_ordercart .module-cart table tbody td.custom{padding-top:9px}.bx_ordercart.basket_wrapp{margin:0}.bx_ordercart .module-cart td{white-space:nowrap}.bx_ordercart_order_sum{width:100%;margin:0}.bx_ordercart_order_sum td{font-size:14px;padding-top:5px;padding-bottom:5px}.bx_ordercart_order_sum td.custom_t1{width:89%;padding:0 29px 0 0;text-align:right}.bx_ordercart_order_sum td.fwb{font-weight:600;vertical-align:top;padding-top:5px}.bx_ordercart_order_sum td.fwb strike{font-size:12px;font-weight:500}.bx_section_bottom h3{margin-bottom:29px}.bx_section_bottom .bx_block{margin-bottom:20px}.bx_ordercart_order_pay_center{text-align:right;margin:0 0 5px}.confirm .bx_section{padding-left:88px}.confirm h3{position:relative;padding:5px 0 12px}.sale_order_full_table.pay{margin:35px 0 0}.confirm h5{margin-bottom:10px}#order_form_div .confirm .button{font-size:10px;padding-top:11px;padding-bottom:10px}#order_form_div input[type=submit]{font-size:10px;padding:11px 21px 10px 20px;text-transform:uppercase;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;outline:0;cursor:pointer;line-height:16px;background:#DDD;color:#000;text-decoration:none;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;text-align:center;display:inline-block;border:none;position:relative;font-family:Ubuntu,Arial,Helvetica,sans-serif;letter-spacing:.4px}.jobs_wrapp .item.opened,.module-order-history .module-orders-list .tr-d:hover td{background:#f7f7f7}.bx_ordercart_order_pay .bx_ordercart_order_pay_right{margin:0}.border_block{padding:38px 43px;border:1px solid #E5E5E5;position:relative}.form-block-wr .main .iblock,.soc-serv-main{font-size:12px}.form-block-wr .but-r{padding:26px 0 0}.soc-serv-main .soc-serv-title-grey{padding:0 0 14px}.passw .text_block{padding-top:35px}.adaptive{display:none}.filter_block{padding:17px 24px 14px;overflow:hidden}.filter_block ul{font-size:0;margin:0;float:left}.filter_block ul li{font-size:13px;display:inline-block;vertical-align:top;font-weight:600;padding:0 25px 0 0}.filter_block ul li:before{display:none}.filter_block ul li:last-child{padding-right:0}.filter_year{float:right;margin:-5px 0;width:100px}.filter_year .common_select .common_select-link{margin:0}.module-orders-list.colored thead td{padding-bottom:9px}.module-orders-list.colored tbody td{padding:15px 5px}.module-orders-list.colored tbody td.not_payed{color:#e62222}.module-order-history .module-orders-list .status.delivered,.module-orders-list.colored tbody td.payed{color:#37ac09}.module-orders-list .status.canceled{color:#e62222}.module-order-history.orderdetail .module-orders-list tr td.price,.module-orders-list.colored tbody td.price-cell,.module-orders-list.colored tbody td.summ-cell{font-weight:600;white-space:nowrap}tr.drop td{border-top-width:0}.module-order-history .empty_history{padding:20px 0}.module-order-history.orderdetail .module-orders-list tr td{border:1px solid #e5e5e5;padding:11px 19px 14px;text-align:left}.module-order-history.orderdetail .module-orders-list tr.title td{border:0;padding:0}.module-order-history.orderdetail h4{margin:36px 0 27px}.module-order-history.orderdetail .module-orders-list tr td.vimg{text-align:center;border-right-width:0}.module-order-history.orderdetail .module-orders-list tr td.vimg+.vname{border-left-width:0}.module-order-history .module-orders-list .drop-cell .not-payed .text{font-size:13px;width:73%;padding:0 10px 0 0}.module-order-history .module-orders-list .drop-cell .not-payed .pays{width:27%;text-align:right}.module-order-history.orderdetail .result-row{margin:19px 0 0}.module-order-history.orderdetail .result-row .result{padding:0}.module-order-history.orderdetail .result-row .result td{padding:0;border:0}.module-order-history.orderdetail .module-orders-list thead tr td{padding:8px 12px 9px;background:#f7f7f7;border-left-width:0;border-right-width:0}.module-order-history.orderdetail .module-orders-list.goods tr td{border-left-width:0;border-right-width:0}.module-order-history.orderdetail .module-orders-list.goods tr td:first-child{border-left-width:1px}.module-order-history.orderdetail .module-orders-list.goods tr td:last-child{border-right-width:1px}.module-order-history.orderdetail .module-orders-list tr td .bx_ol_sku_prop td{border:0;padding:0;font-size:12px}.forgot{font-size:12px;float:right}.but-r .buttons{margin:21px 0 0}.soc-serv-main .row{margin:0}.bx-touch .fancybox-nav span{visibility:visible}.back .back{margin:10px 0 0;display:inline-block}.specials_slider_wrapp ul.tabs_content,.tab_slider_wrapp ul.tabs_content{margin:1px -8px 20px -5px;padding:0 8px 0 5px}.specials_slider_wrapp ul.tabs_content li.tab,.tab_slider_wrapp ul.tabs_content li.tab{margin:0 -5px;padding:0 5px}.common_product .content_inner{margin:-13px -13px 0;padding:13px 13px 0}.common_product .flex-viewport,.common_product .flex-viewport ul.slides{margin:0 -13px;padding:0 13px}.subscribe-edit .more_text_small{padding-left:20px}.subscribe-edit h5{font-size:13px;margin-bottom:5px}.data-table.top .left_blocks{width:40%}.data-table.top .right_blocks{width:60%}.search-page-wrap .form-control{float:left;margin:0 10px 0 0}.similar_products_wrapp h3{margin-bottom:37px;padding:7px 0 0}.similar_products_wrapp .slider_navigation.top_big{top:-66px}.similar_products_wrapp .wrapper_block .all_wrapp{margin:0}.similar_products_wrapp .wrapper_block .all_wrapp .catalog_item:hover .item_info{height:auto!important}.similar_products_wrapp .wrapper_block .all_wrapp .like_icons{top:0;right:-10px}.similar_products_wrapp .wrapper_block .all_wrapp .stickers{left:-24px;top:0}.row{margin:30px -15px 0;font-size:0}.row .item_block{padding:0 15px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.row .item_block>a{display:block;overflow:hidden}.articles-list.lists_block .item .left-data img,.row .item_block>a img{vertical-align:middle;max-height:100%;max-width:100%}.articles-list.vertical .item{display:inline-block;vertical-align:top;width:33.33%;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;margin:0 0 37px;overflow:hidden}.articles-list.vertical .item_block.item{padding:0 15px;border-bottom-width:0;margin-top:0}.articles-list.vertical .item_block.item .left-data{float:none;width:100%;text-align:center;max-width:initial}.articles-list.vertical .item_block.item .left-data a{height:190px;line-height:185px;margin:0 0 14px}.articles-list .item_block.item .left-data a{overflow:hidden}.articles-list.vertical .item_block.item .left-data img{max-height:100%;max-width:100%}.articles-list.vertical .item_block.item .right-data{float:none;width:100%;text-align:left;margin:0}.articles-list.vertical .item .date_small{margin:0 0 5px}.articles-list.vertical .item .item-title{margin-bottom:7px}.articles-list.vertical .item .item-title a span{font-size:14px}.articles-list.vertical .item_block.item .right-data .preview-text{margin:0;padding:0}.articles-list.lists_block .item .left-data{max-width:190px;width:22%;text-align:center;display:inline-block;vertical-align:top}.articles-list.lists_block.faq .item .left-data{max-width:175px}.articles-list.lists_block .item{margin-top:30px;padding:0 0 30px;border-bottom:1px solid #e5e5e5}.articles-list.lists_block .item:first-child{margin-top:0}.articles-list.lists_block .right-data{padding:0 30px 2px;margin-left:0;display:inline-block;vertical-align:top;width:78%;box-sizing:border-box}.articles-list.lists_block+.module-pagination{border-top-width:0;float:left;width:100%}.ask_big_block,.ask_small_block{border:1px solid #e5e5e5}.articles-list.lists_block .item .left-data img{max-height:initial}.articles-list.lists_block.news,.content_wr_float{float:left;width:100%}.right_side.wide{width:230px}.left_side.wide{padding-right:240px}.ask_small_block .ask_btn_block{padding:29px 20px;text-align:center}.ask_small_block .description{font-size:13px;line-height:18px;padding:19px 24px}.ask_big_block{min-height:30px;margin:17px 0 20px;padding:29px 40px}.ask_big_block .ask_btn_block{float:left}.ask_big_block .description{padding-left:175px;line-height:16px}.news_detail_wrapp.big .detail_picture_block{height:188px;line-height:185px;padding:5px}.margin.preview_text{margin:0 0 36px}.galley.row{margin:0 -10px}.galley.row .item_block{padding:0 10px 20px;margin:0 0 20px}.galley.row .item_block>a{height:143px;line-height:140px}.left_side.wide .common_product .content_inner{margin-right:-16px}.job.border_block{margin:0 0 37px}.job.border_block .wrap_md>div{font-size:13px}.job.border_block .text{width:57%;padding:0 46px 0 0}.job.border_block .phone{width:23%;padding:0 10px 0 0}.job.border_block .phone .wrap_phones{overflow:hidden}.job.border_block .medium{color:#888;font-size:12px;line-height:15px;margin-bottom:4px;display:inline-block;vertical-align:top}.job.border_block .grey{display:inline-block;vertical-align:top;width:100%;margin-bottom:23px;font-size:13px;line-height:20px;color:#383838}.job.border_block .but{width:20%;text-align:right}.job.border_block .grey a{display:block}.jobs_wrapp{border:1px solid #E5E5E5}h3.jobs{margin-bottom:28px}.jobs_wrapp .item:first-child{margin-top:0;border-top-width:0}.jobs_wrapp .item,.shops.list .item{border-top:1px solid #e5e5e5}.jobs_wrapp .item .name{cursor:pointer}.jobs_wrapp .item .salary_wrapp{text-align:right}.jobs_wrapp .item .salary{font-size:14px;margin:1px 0 0;padding:0 42px 0 10px;white-space:nowrap;font-weight:500}.jobs_wrapp .item tr td{vertical-align:top;padding-top:24px;padding-bottom:18px}.jobs_wrapp .item tr td:first-of-type{padding-left:28px}.jobs_wrapp .item tr td:last-of-type{padding-right:19px}.jobs_wrapp .item .name .title .salary{padding:5px 0 0;display:none}.jobs_wrapp .item .name .title h4{margin:0;text-align:left}.jobs_wrapp .item .item_title{font-size:16px}.jobs_wrapp .item .description_wrapp{margin:-7px 0 0;display:none;padding:0 19px 29px 28px}.jobs_wrapp .item .description_wrapp .description{margin:0 0 25px}.jobs_wrapp .item .opener_icon{position:relative;top:-3px}.contacts_map{margin-top:4px;margin-bottom:16px;position:relative;min-height:400px}.contacts_map:before{background:url(images/map.png) center center no-repeat rgba(255,255,255,.55);height:100%;left:0;opacity:.07;position:absolute;top:0;width:100%}.bx-google-map{background-color:transparent!important}.contacts_left{float:left;width:270px}.contacts_right{margin-left:285px}.contacts_right .fancy{display:inline-block;vertical-align:top;zoom:1;width:210px;height:143px;margin:0 20px 20px 0;float:left;text-align:center;line-height:140px}.contacts_right .fancy img,.shops.list .item .image img{vertical-align:middle;max-width:100%;max-height:100%}body .contacts_right blockquote{margin:39px 0 34px}.store_property{margin-bottom:23px;word-break:break-word}.store_property .title{color:#888;font-size:12px;line-height:15px;margin-bottom:4px}.store_property .value{color:#383838;font-size:13px;line-height:20px}.store_property .value a{display:block}.module-contacts-map-layout{position:relative;overflow:hidden}.module-contacts-map-layout .map{height:559px}.module-contacts-map-layout .controls{position:absolute;z-index:2;width:29px;height:57px;background:url(images/map_con.png) no-repeat;margin:-29px 0 0;right:20px;top:50%}.module-contacts-map-layout .controls.left{left:18px;top:50%}.module-contacts-map-layout .sh{width:100%;height:5px;z-index:10;box-shadow:0 0 10px rgba(0,0,0,.35);position:absolute;left:0}.module-contacts-map-layout .sh.top{top:-7px}.module-contacts-map-layout .sh.bottom{bottom:-7px}.module-map .controls .zoomIn,.module-map .controls .zoomOut{height:28px;cursor:pointer;font-size:0}.module-map .infoBox{background:#fff;left:50%;position:absolute;top:auto;font-family:Ubuntu,sans-serif}.module-map .infoBox .wrap-big{padding:25px 30px 30px;position:relative;width:230px;color:#383838;line-height:18px}.module-map .infoBox .close_info{position:absolute;border-radius:50%;cursor:pointer;font-size:0;top:6px;right:5px;height:15px;width:15px;z-index:6}.module-map .infoBox .close_info:after{background:url(images/close_icons.png) -2px -28px no-repeat rgba(0,0,0,0);position:absolute;cursor:pointer;height:7px;width:7px;top:4px;left:4px;z-index:7}.module-map .infoBox .close_info:hover{background-color:grey}.module-map .infoBox .close_info:hover:after{background-position:-22px -28px}.module-map .infoBox .inner::after{background:url(images/shadow.png) center top no-repeat rgba(0,0,0,0);bottom:-9px;height:10px;left:0;position:absolute;right:0;z-index:60}.module-map .infoBox b{font-size:14px;line-height:18px}.module-map .infoBox .title{font-size:13px;font-weight:700;line-height:20px;margin-bottom:11px}.module-map .infoBox .email,.module-map .infoBox .metro,.module-map .infoBox .phone,.module-map .infoBox .schedule{margin-bottom:5px}.module-map .infoBox .button{margin-top:10px}.module-map .infoBox .metro>i,.shops.list .item .metro i,.store_property.metro .value i,.stores_list .store_text.metro .value i{background:url(images/icons_wish.png) -1px -237px no-repeat rgba(0,0,0,0);display:block;float:left;height:9px;margin:5px 6px 0 0;width:14px}.shops.list .item{position:relative;overflow:hidden;min-height:69px;padding:30px 0;color:#383838}.shops.list .item:first-of-type{border-top:none;padding-top:14px}.faq_ask,.faq_section{border:1px solid #e5e5e5}.shops.list .item .image{width:100px;position:absolute;left:0;height:69px;line-height:66px;text-align:center}.shops.list .item.wi .image{display:none!important}.shops.list .item .rubber{margin-left:130px;overflow:hidden}.shops.list .item .rubber>div{float:left;overflow:hidden;padding-top:11px;word-break:break-all}.shops.list .item.wi .rubber{margin-left:0}.shops.list .item .title_metro{width:50%;margin-top:-1px;padding-right:3%}.shops.list .item .schedule_phone_email{width:47%;font-size:0}.shops.list .item .schedule{width:60%;padding-right:3%;display:inline-block;box-sizing:border-box;font-size:13px;vertical-align:top}.shops.list .item .phone_email{display:inline-block;width:40%;font-size:13px}.shops.list .item .title{font-size:15px;font-weight:500;margin-bottom:5px}.shops.list .item .metro{margin-bottom:5px}.shops.list .item .metro i,.store_property.metro .value i,.stores_list .store_text.metro .value i{margin-top:7px}.shop.detail a.back{display:inline-block;font-weight:700;margin-top:35px}.faq_ask{padding:44px}.faq_ask .form .form_footer{margin-bottom:0}.button.faq_button{float:left;padding:9px 18px 10px 39px;text-align:center;width:97px;position:relative;white-space:nowrap}.button.faq_button>span{display:inline}.button.faq_button.opened>span,.button.faq_button>span:last-of-type{display:none}.button.faq_button.opened>span:last-of-type{display:inline}.button.faq_button i{background:url(images/arrows.png) 1px -441px rgba(0,0,0,0);display:block;height:9px;left:18px;position:absolute;top:13px;width:12px}.faq.list .item.opened,.staff.list .staff_section.opened .staff_section_title{background-color:#f7f7f7}.basket_fly .basket_fly .icon_error_block:after,.catalog_item .stickers{left:0}.button.faq_button.opened i{background-position:-17px -441px}.faq_desc{margin-left:183px;margin-top:-4px}.faq_ask .form{margin:23px 0 0}.faq_ask .form_head h4{display:none}.faq.list{margin:36px 0 0}.faq_section{margin:28px 0 26px}.faq.list .item{padding:19px 24px 22px;border-bottom:1px solid #e5e5e5}.faq.list .item:last-of-type{border:none}.faq.list .item .q{font-weight:700;position:relative}.faq.list .item .q .opener_icon{position:absolute;right:-3px;top:-5px}.faq.list .item .q a{display:block;padding:0 20px 0 0}.faq.list .item .a{display:none;padding-top:14px}.staff.list .staff_section{border:1px solid #e5e5e5;border-bottom:none;position:relative}.staff.list .staff_section:last-of-type{border-bottom:1px solid #e5e5e5}.staff.list .staff_section_title{position:relative}.staff.list .staff_section_title h4{margin:0}.staff.list .staff_section_title a{display:block;padding:25px 29px 27px}.staff.list .staff_section_title .opener_icon{position:absolute;right:21px;top:18px}.icon_error_block,.staff.list .item{position:relative;box-sizing:border-box}.staff.list .staff_section_items{overflow:hidden}.staff.list .staff_section .staff_section_items{display:none;border-top:1px solid #e5e5e5;padding:39px 39px 0}.staff.list .item{width:50%;float:left;overflow:hidden;margin-bottom:40px}.staff.list .item:nth-child(2n+1){padding-right:13px;clear:both}.staff.list .item:nth-child(2n){padding-left:12px}.staff.list .item .image{height:170px;line-height:167px;width:170px;text-align:center;float:left}#bx-composite-banner,.basket_print,.icon_error_block{text-align:left}.staff.list .item .image img{vertical-align:middle;max-width:100%;max-height:100%}.staff.list .item .info{margin-left:195px}.staff.list .item.wi .info{margin-left:0}.staff.list .item .name{color:#383838;font-size:16px;font-weight:700;margin:-4px 0 1px}.staff.list .item .post{font-size:12px}.staff.list .item .phone{margin-top:13px}.staff.list .item .email{margin-top:7px}.staff.list .item .email>div,.staff.list .item .phone>div{color:#383838;font-size:12px;margin-bottom:-3px}#bx-composite-banner a.bx-composite-btn{border:1px solid #e8e8e8;margin:7px 0 0}.empty_cart .card_popup_frame.popup .basket_empty{display:block}.empty_cart .card_popup_frame.popup .total_wrapp,.iblock .icon_error_block:after{display:none}.button_wrap .button,body .wrapper .button{-webkit-appearance:none}.iblock .icon_error_block{float:right}.icon_error_block{min-height:34px;padding-left:50px;width:100%}.basket_fly .icon_error_block{width:inherit}.basket_fly .module-cart .colored tfoot td.row_titles .item_title{margin-top:2px}.icon_error_block:after{background:url(images/warning_white.png) no-repeat #e62222;top:0;height:40px;width:40px;left:0;position:absolute;z-index:60;display:block}.backet_back_wrapp .basket_back,.basket_print{display:inline-block;vertical-align:top}.icon_error_block b{font-size:15px}.basket_print{margin:0 15px 0 0}.basket_print:hover{color:#383838}.basket_print:hover i{background-color:#383838}#header .middle-h-row .logo_wrapp .logo.nofill_y a,.print .counter_block input{background:0 0!important}.basket_wrapp .module-cart table.bottom .bottom_btn .backet_back_wrapp.error .iblock.back_btn{padding-right:0}.basket_wrapp .module-cart table.bottom.middle.error td.row_values{padding-left:21px}.basket_fly .basket_fly .icon_error_block{text-align:left;float:left;padding:0 0 0 60px}.view_sale_block.offers{display:none}.subscribe-edit .data-table tbody td:last-child{padding-left:20px}.catalog_detail .cost.prices .price_name,.catalog_detail .item-stock,.catalog_detail .item-stock>span{font-size:12px}.catalog_detail .info_item .middle_info .prices .price{margin-top:3px;float:none}.catalog_detail .info_item .middle_info .prices .price.discount{margin-top:4px;margin-bottom:1px}.catalog_detail .info_item .middle_info .prices .sale_block{margin-bottom:4px}.catalog_detail .cost.prices .sale_block+.price_name{margin-top:15px}.catalog_detail .middle_info .cost.prices .price+.price_name{padding:0;margin-top:12px}.catalog_detail .cost.prices .price_name:first-of-type{margin-top:0}.print .basket_print_desc{margin:30px 0 50px;overflow:hidden}.print #header .middle-h-row .basket_wrapp,.print #header .middle-h-row .center_block>*,.print #header .middle-h-row .center_block>.middle_phone .order_wrap_btn,.print #panel,.print .basket_sort,.print .bigdata_recommended_products_container,.print .bigdata_recommended_products_items,.print .bottom_btn,.print .breadcrumbs,.print .catalog_menu,.print .counter_block span,.print .coupon,.print .delay-cell,.print .footer,.print .remove-cell,.print .style-switcher,.print .top-h-row,.print footer{display:none!important}.print div#jivo-iframe-container{display:none!important;visibility:hidden}.print #header,.print .bottom.middle .top_total_row,.print .counter_block,.print .counter_block input{border-color:transparent!important}.print .row_values{width:178px!important}.print #header .middle-h-row .center_block>.middle_phone,.print .wrapper.has_menu #header .phones,.print .wrapper.has_menu #header .wrapper_inner .middle-h-row .center_block .middle_phone{display:block!important;text-align:right}.print .wrapper.has_menu #header .middle-h-row .center_block .middle_phone .phone_text a{font-size:19px}.print .basket_fly #header .middle-h-row .center_block{padding-right:0}.print h1{padding-top-top:20px}.print .basket_print_desc .store_property{display:inline-block;float:left;margin-right:3%;vertical-align:top;width:22%}#header .middle-h-row .logo_wrapp .logo a.print_img,.print_basket{display:none}.print .basket_print_desc .store_property:last-of-type{margin-right:0}.print body .wrapper #header{margin-bottom:0!important}.print .wrapper{padding-bottom:0}.print table{page-break-inside:auto}.print tr{page-break-inside:avoid;page-break-after:auto}.stores_block_wrap .stores_block .stores_text_wrapp.image_block .imgs{width:100px;display:inline-block;vertical-align:top;margin:0;float:left;text-align:center}.stores_block_wrap .stores_block .stores_text_wrapp.image_block .imgs img{vertical-align:middle}.stores_block_wrap .stores_block .stores_text_wrapp .main_info{max-width:500px}.stores_block_wrap .stores_block .stores_text_wrapp.image_block .main_info{width:100%;margin:0 0 0 120px;max-width:auto}.stores_block_wrap .stores_block .stores_text_wrapp.image_block .main_info>span{display:block;padding:0;max-width:300px}.stores_block_wrap .stores_block .stores_text_wrapp span.p10{padding:0 0 0 5px}.stores_block_wrap .stores_block.w_image:before{top:22px}.stores_block_wrap .stores_block.wo_image .item-stock{top:50%;position:absolute;right:0;margin-top:-10px}.catalog_detail .offers_table .many_prices .price.discount,.set_wrapp.set_block .cost.prices .price.discount{margin-top:0}.container iframe,.container object,.container video{display:block;margin:0 auto;max-width:100%}.group_description_block{font-size:14px;color:#333}.group_description_block.top{padding:25px 0 20px}.group_description_block.bottom{padding:20px 0}ul.slider_navigation.top_big .flex-direction-nav{display:none}ul.slider_navigation.top_big .flex-direction-nav:first-child{display:block}.module_products_list.errors{border:none}.hide_class{display:none}.module-form-block-wr .form-block input[disabled=disabled],.module-form-block-wr .form-block textarea[disabled=disabled]{background:#fff}.basket_wrapp .module-cart table.bottom.middle .bottom_btn td.last_blockk{float:right!important}.basket_wrapp .module-cart table.bottom.middle .bottom_btn td.last_blockk:last-of-type{padding-right:50px!important}.popup_button_basket_wr{text-align:center;margin:30px 0 0}.ajax_text .wrapper{padding:0}.ajax_text table tr td{padding-top:10px}.ajax_text table tr td:last-child{padding-left:20px;width:150px}.ajax_text table tr td label{display:block}.ajax_text table tr td label input{margin-right:5px;outline:0}.ajax_text .ik_select{width:100%!important;font-size:0}.catalog_detail .bx-modal-container{border:none;border-top:1px solid #ebeaec;border-radius:0}.catalog_detail .bx-modal-container *{box-sizing:border-box;font-size:13px}.catalog_detail .bx-modal-container .bx-added-item-table-cell-del,.catalog_detail .bx-modal-container .bx-added-item-table-cell-img,.catalog_detail .bx-modal-container .bx-added-item-table-cell-price,.catalog_detail .bx-modal-container .catalog_detail .bx-added-item-table-cell-itemname{padding:5px}.iblock-vote.small div.star-active{cursor:default;background:url(images/ai.png) -137px -51px no-repeat;width:15px;height:14px;overflow:hidden}.iblock-vote.small div.star-empty{background-position:-152px -51px}.iblock-vote.small div.star-over{background-position:-137px -51px}.bx_item_list_you_looked_horizontal .tabs_slider>li,.wrapper_block .wr>li{opacity:1;text-align:center}.bx_item_list_you_looked_horizontal .bx_item_detail_scu .bx_scu ul li{float:none;height:auto;margin:0}.bx_item_list_you_looked_horizontal .cost.prices .price.discount{margin-top:1px}.bx_item_list_you_looked_horizontal .cost.prices{margin:11px 0 0}.bottom_slider .like_icons span,.bx_item_list_you_looked_horizontal .like_icons span{overflow:hidden}.bx_item_list_you_looked_horizontal .catalog_item{border:1px solid #eaebec}.bx_item_list_you_looked_horizontal .tabs_slider.wr .catalog_item:hover{border:1px solid #fff}.bx_item_list_you_looked_horizontal .common_product{border-top:1px solid #eaebec;margin-top:20px;padding:21px 0 0}.bx_item_list_you_looked_horizontal .top_block{padding-top:0;margin-bottom:19px}.bx_item_list_you_looked_horizontal ul.slider_navigation.top_big{top:19px}.catalog_item .image_wrapper_block{margin:0 auto}body .bx_item_list_you_looked_horizontal{border-bottom-width:0}#basket_form_container{padding:0}#basket_form_container .top_control{float:right;margin:2px 0 0}#basket_form_container .top_control .btn{margin:0 0 0 10px;padding-right:40px;border-color:#ddd;font-size:13px;line-height:20px;color:#333}#basket_form_container .top_control .btn:first-child{margin-left:0}#basket_form_container .top_control .btn:hover{color:#FFF}#basket_form_container .top_control .delete_all{display:block;margin:0;padding-top:8px;padding-bottom:7px}#basket_items_list .error_text{font-size:14px;line-height:20px;border-radius:0;padding:15px 29px;background:#fee;color:#e83333}.bx_ordercart .bx_ordercart_order_pay_left{overflow:hidden}.bx_ordercart .bx_ordercart_order_pay,.bx_ordercart .bx_ordercart_order_pay_center,.bx_ordercart .bx_ordercart_order_pay_center .checkout,.bx_ordercart .bx_ordercart_order_pay_center span,.bx_ordercart .bx_ordercart_order_pay_left,.bx_ordercart .bx_ordercart_order_pay_right,.bx_ordercart .bx_ordercart_order_sum,.bx_ordercart .bx_ordercart_order_table_container .bx_ordercart_itemtitle a,.bx_ordercart .bx_ordercart_order_table_container table,.bx_ordercart .bx_ordercart_order_table_container table tbody,.bx_ordercart .bx_ordercart_order_table_container table tbody tr,.bx_ordercart .bx_ordercart_order_table_container table tbody tr td,.bx_ordercart .bx_ordercart_order_table_container tbody td.price .current_price{top:0;-webkit-transition:all .1s ease;-moz-transition:all .1s ease;-ms-transition:all .1s ease;-o-transition:all .1s ease;transition:all .1s ease}.bx_ordercart .bx_ordercart_order_pay_center .checkout{border-radius:2px}.bx_ordercart_order_pay_left{padding:0 0 40px}.bx_ordercart_order_pay_right{padding:0 0 40px;margin-top:10px}.bx_ordercart .bx_ordercart_order_table_container{border-radius:0;border:1px solid #f3f3f3;background:#FFF}.bx_ordercart .bx_ordercart_order_table_container table td{padding:0 10px;line-height:20px}.bx_ordercart .bx_ordercart_order_table_container table td.margin{width:0;min-height:0;padding:0}.bx_ordercart .bx_ordercart_order_table_container table thead td{padding:7px 9px 8px 12px;font-size:13px;line-height:20px;background:0 0;color:#999}.bx_ordercart .bx_ordercart_order_table_container table thead td.item{padding-left:159px}.bx_ordercart .bx_ordercart_order_table_container table tbody td{border-bottom:none;padding:24px 9px;border-top:1px solid #f3f3f3}.bx_ordercart .bx_ordercart_order_table_container table td.custom:last-of-type{width:210px}.bx_ordercart .bx_ordercart_photo_container{padding:0;border-radius:0;border:none}.bx_ordercart .bx_ordercart_order_table_container tbody td.itemphoto{max-width:189px}.bx_ordercart .bx_ordercart_order_table_container tbody td.itemphoto>div{max-width:130px;height:130px;line-height:130px}.bx_ordercart .bx_ordercart_order_table_container .bx_ordercart_itemtitle{margin:0 0 15px;font-size:18px;font-weight:500;line-height:20px;color:#333}.bx_ordercart .bx_ordercart_order_table_container .bx_ordercart_itemtitle a{font-size:16px;font-weight:500;line-height:20px;color:#333}.bx_ordercart .bx_ordercart_order_table_container .bx_ordercart_photo{position:relative;left:auto;top:auto;right:auto;bottom:auto;background-size:auto;height:130px}.bx_ordercart .bx_ordercart_order_table_container tbody td.item{width:535px;padding-top:47px}.bx_ordercart .bx_item_detail_size_small_noadaptive{width:auto;margin:0}.bx_ordercart .bx_item_detail_size_small_noadaptive .bx_item_section_name_gray{display:block;margin:0 0 10px;font-size:12px;color:#888}.bx_item_list_you_looked_horizontal .bx_item_detail_scu .bx_item_section_name_gray,.bx_item_list_you_looked_horizontal .bx_item_detail_size .bx_item_section_name_gray{font-size:12px;color:#888}.bx_ordercart .bx_item_detail_size_small_noadaptive .bx_size_scroller_container{margin:0}.bx_ordercart .bx_item_detail_size_small_noadaptive .bx_size{overflow:visible!important}.bx_ordercart .bx_item_detail_size_small_noadaptive ul{margin:-3px 0 0 -3px;width:auto!important;white-space:normal}.bx-touch .bx_ordercart .bx_item_detail_size_small_noadaptive .bx_size ul{margin-left:-3px!important}.bx_ordercart .bx_item_detail_size_small_noadaptive ul li{width:auto!important;height:auto;padding:0;margin:0 6px 6px 0}.bx_ordercart .bx_item_detail_size_small_noadaptive ul li:before{display:none}.bx_ordercart .bx_item_detail_size_small_noadaptive ul li:first-child{margin-left:0}.bx_ordercart .bx_item_detail_size_small_noadaptive ul li a{padding:7px 10px;left:auto;top:auto;right:auto;bottom:auto;font-size:13px;line-height:15px;color:#777;position:relative;display:block;margin:0;min-width:9px;border:1px solid #e6e6e6;overflow:hidden;text-align:center;cursor:pointer}.bx_ordercart .bx_item_detail_size_small_noadaptive ul li.bx_active a,.bx_ordercart .bx_item_detail_size_small_noadaptive ul li:active a{border-width:1px}.bx_ordercart .bx_item_detail_size_small_noadaptive ul li.bx_active a{cursor:default}.bx_ordercart .bx_item_detail_size_small_noadaptive ul:after{content:"";display:table;clear:both}.bx_ordercart .bx_ordercart_order_table_container .bx_ordercart_itemart{margin:-3px 0 10px;font-size:13px;line-height:20px;color:#777}.bx_ordercart .bx_item_detail_scu_small_noadaptive{width:auto;margin:5px 0 0}.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu_scroller_container{margin:0}.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_item_section_name_gray{margin:0 0 7px;display:block;font-size:12px;color:#999}.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul{position:relative;margin:0;max-width:180px!important;width:auto!important}.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul:after{content:"";display:table;clear:both}.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li{height:auto;width:auto!important}.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li:before{display:none}.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li:first-child{margin-left:0}.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li a{position:relative;top:2px;right:auto;bottom:auto;left:2px;display:inline;border:0}.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li a span{display:block;position:relative;top:auto;right:auto;bottom:auto;left:auto}.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li:hover a{background:#FFF;border:0}.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li:not(.bx_active):active a{padding:0}.bx-retina .bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li a{border:none}.bx-retina .bx_ordercart.bx_blue .bx_item_detail_scu_small_noadaptive .bx_scu ul li .cnt{border-image:none!important}.bx-retina .bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li.bx_active a{border:none}.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li.bx_active:active a{padding:0;border:none}.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li.bx_active a{padding:0;cursor:default;border:none}.bx_ordercart .bx_ordercart_order_table_container table tbody td.price{padding-top:47px;width:245px;white-space:nowrap}.bx_ordercart .bx_ordercart_order_table_container tbody td.price .current_price{display:inline-block;vertical-align:top;font-size:16px;line-height:20px;color:#333;font-weight:500}.bx_ordercart .bx_ordercart_order_table_container tbody td.price .type_price,.bx_ordercart .bx_ordercart_order_table_container tbody td.price .type_price_value{margin:-1px 0 0;font-size:11px;line-height:14px;color:#aeaeae}.bx_ordercart .bx_ordercart_order_table_container tbody td.price .type_price{display:none}.bx_ordercart .bx_ordercart_order_table_container tbody td.custom{color:#333;width:200px;padding-top:46px;line-height:26px}.bx_ordercart .bx_ordercart_order_table_container tbody td.custom .centered{margin:16px 0 0;position:relative;display:inline-block;vertical-align:top}.bx_ordercart .bx_ordercart_order_table_container tbody td.custom>div:not(.centered){text-align:left!important;font-size:16px;font-weight:500;line-height:22px;color:#333}.bx_ordercart .bx_ordercart_order_table_container table.counter{position:relative;overflow:hidden;margin:-22px auto 0;width:84px;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.bx_ordercart .bx_ordercart_order_table_container table.counter td:first-child{background:#fff;border-radius:2px;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;height:30px;box-sizing:border-box;border:1px solid #e5e5e5!important;font-size:0}.bx_ordercart .bx_ordercart_order_table_container table.counter td:last-child{text-align:center!important;font-size:13px;line-height:20px;color:#777}.bx_ordercart .bx_ordercart_order_table_container table.counter td{display:block}.bx_ordercart .bx_ordercart_order_table_container table.counter input{border:none;border-left:1px solid #e5e5e5;border-right:1px solid #e5e5e5;background:#f7f7f7;max-width:34px!important;width:100%;padding:10px 0;font-size:13px;font-weight:500;line-height:13px;height:28px;color:#333;text-align:center;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}#basket_quantity_control,.basket_quantity_control td{padding:0!important}.basket_quantity_control{display:block;overflow:hidden}.basket_quantity_control a{position:absolute;left:1px;top:1px;width:24px;height:28px;cursor:pointer;background:0 0;border-radius:0;border:none}.basket_quantity_control a:before{content:"";position:absolute;left:50%;top:50%;width:11px;height:11px;margin:-5px 0 0 -5px;background:url(images/ai.png) -27px -200px no-repeat;opacity:.7}.basket_quantity_control a.plus{right:1px;left:auto;margin:0}.basket_quantity_control a.minus{margin:0;border-radius:0}.basket_quantity_control a.minus:hover:before{opacity:1}.basket_quantity_control a.plus:before{background-position:-1px -200px}.basket_quantity_control a.plus:hover:before{opacity:1}.bx_ordercart .bx_ordercart_order_table_container tbody td.price .old_price{vertical-align:top;margin:0 0 0 2px;font-size:13px;line-height:20px;color:#777}.bx_ordercart .bx_ordercart_order_table_container tbody td.control{position:relative;width:135px;padding-top:40px;font-size:0;line-height:0}.bx_ordercart .bx_ordercart_order_table_container tbody td.control br{display:none}.bx_ordercart .bx_ordercart_order_table_container tbody td.control a{position:relative;font-size:0;line-height:0}.bx_ordercart #basket_items_not_available tbody td.control a:last-of-type,.bx_ordercart #basket_items_subscribed tbody td.control a:first-of-type,.bx_ordercart tbody td.control a:first-of-type{position:absolute;right:9px;top:9px;width:17px;height:17px;border-radius:100%}.bx_ordercart #basket_items_not_available tbody td.control a:last-of-type:before,.bx_ordercart #basket_items_subscribed tbody td.control a:first-of-type:before,.bx_ordercart tbody td.control a:first-of-type:before{content:"";position:absolute;left:50%;top:50%;margin:-5px 0 0 -5px;width:10px;height:10px;background:url(images/close_icons.png) 0 -27px no-repeat}.bx_ordercart #basket_items_not_available tbody td.control a:last-of-type:hover:before,.bx_ordercart #basket_items_subscribed tbody td.control a:first-of-type:hover:before,.bx_ordercart tbody td.control a:first-of-type:hover:before{background-position:-21px -27px}.bx_ordercart tbody td.control a:last-of-type{display:inline-block;width:25px;height:25px;background:url(images/icons_wish.png) 3px -17px no-repeat}.bx_ordercart #basket_items_not_available tbody td.control a:last-of-type,.bx_ordercart #basket_items_subscribed tbody td.control a:last-of-type{background-image:none}.bx_ordercart #basket_items_not_available tbody td.control a:first-of-type{display:none}.bx_ordercart tbody td.control a:last-of-type:hover{background-position:3px -73px}.bx_ordercart #basket_items_delayed tbody td.control a:first-of-type{position:relative;right:auto;top:auto;display:inline-block;width:25px;height:25px;background:url(images/icons_wish.png) -31px -201px no-repeat}.bx_ordercart #basket_items_delayed tbody td.control a:first-of-type:before,.bx_ordercart .bx_ordercart_order_table_container .bx_ordercart_brand{display:none}.bx_ordercart #basket_items_delayed tbody td.control a:first-of-type:hover{background-position:-147px -175px}.bx_ordercart #basket_items_delayed tbody td.control a:last-of-type{position:absolute;right:9px;top:9px;width:17px;height:17px;background:0 0;border-radius:100%}.bx_ordercart #basket_items_delayed tbody td.control a:last-of-type:before{content:"";position:absolute;left:50%;top:50%;margin:-5px 0 0 -5px;width:10px;height:10px;background:url(images/close_icons.png) 0 -27px no-repeat}.bx_ordercart #basket_items_delayed tbody td.control a:last-of-type:hover:before{background-position:-21px -27px}.bx_slide_left,.bx_slide_right{display:none!important}.bx_ordercart .bx_ordercart_order_pay{margin:35px 0 0;padding:0}.bx_ordercart .bx_ordercart_coupon{margin:16px 0 0}.bx_ordercart .bx_ordercart_coupon:first-of-type{margin-top:0;margin-bottom:-21px}.bx_ordercart .bx_ordercart_coupon span{margin:0 20px 0 0;width:150px;float:left;font-size:14px;line-height:15px;color:#373737;white-space:normal;text-align:left}.bx_ordercart .bx_ordercart_coupon .input{padding:0 0 0 170px}.bx_ordercart .bx_ordercart_coupon #coupon{width:100%;box-shadow:none;border:1px solid #eaebec;padding:8px 45px 7px 15px;height:auto;font-size:14px;line-height:20px;font-weight:400;color:#333;background:#FFF;border-radius:2px}.bx_ordercart .bx_ordercart_order_pay .bx_bt_button{position:absolute;right:0;top:0;width:35px;height:37px;padding:0;font-size:0;line-height:0;-webkit-transition:all .1s ease-in-out;-moz-transition:all .1s ease-in-out;transition:all .1s ease-in-out;border-radius:0 2px 2px 0}.bx_ordercart .bx_ordercart_order_pay .bx_bt_button:before{content:"";position:absolute;left:50%;top:50%;margin:-6px 0 0 -7px;width:14px;height:12px;background:url(images/ai.png) -33px -49px no-repeat;cursor:pointer}.bx_ordercart .bx_ordercart_order_pay .bx_bt_button:active{box-shadow:none}.bx_ordercart .bx_ordercart_coupon:not(:first-of-type){position:relative;margin-left:100px;padding:0 0 0 30px}.bx_ordercart .bx_ordercart_coupon:not(:first-of-type):before{content:"";position:absolute;top:6px;left:8px;width:11px;height:11px;background:url(images/icons_wish.png) -102px -86px no-repeat}.bx_ordercart .bx_ordercart_coupon:not(:first-of-type).good:before{background-position:-19px -3px}.bx_ordercart .bx_ordercart_coupon .bx_ordercart_coupon_notes{float:right;margin:0;padding:0;border:none;box-shadow:none;border-radius:0;display:block;opacity:1;position:relative;top:auto;left:auto;font-size:14px;line-height:20px;color:#333;background:0 0}.bx_ordercart .bx_ordercart_coupon .bx_ordercart_coupon_notes:first-letter{text-transform:uppercase}.bx_ordercart .bx_ordercart_coupon input{padding:0;height:auto;width:auto;float:none;border:none;background:0 0;box-shadow:none;font-size:14px;font-weight:400;line-height:20px;color:#333;border-radius:0}.bx_ordercart .bx_ordercart_coupon input.bad{box-shadow:none;border:none;background:0 0}.bx_ordercart .bx_ordercart_coupon input.disabled{color:#333}.bx_ordercart .bx_ordercart_order_pay .bx_ordercart_coupon span.bad,.bx_ordercart .bx_ordercart_order_pay .bx_ordercart_coupon span.disabled{float:right;width:17px;height:17px;margin:3px 0 0 3px;border-radius:100%;background:url(images/close_icons.png) 3px -23px no-repeat}.bx_ordercart .bx_ordercart_coupon span.bad:hover,.bx_ordercart .bx_ordercart_coupon span.disabled:hover{background-position:-17px -23px}.bx_ordercart .bx_ordercart_coupon input.good{height:auto;width:auto;float:left;border:none;background:0 0;box-shadow:none;font-size:14px;font-weight:400;line-height:20px;color:#333;border-radius:0}.bx_ordercart .bx_ordercart_coupon span.good{float:right;width:17px;height:17px;margin:3px 0 0 3px;border-radius:100%;background:url(images/close_icons.png) 3px -23px no-repeat}.bx_ordercart .bx_ordercart_coupon span.good:hover{background-position:-17px -23px}.bx_ordercart #basket_items .custom div[id^=discount_value]{font-size:14px;font-weight:400;line-height:24px}.bx_ordercart .bx_ordercart_coupon:after{content:"";display:table;clear:both}.bx_ordercart .bx_ordercart_order_pay_center{margin:0;padding:40px 0 0;border:none;border-top:1px solid #f3f3f3}.bx_ordercart .bx_ordercart_order_pay_center .oneclickbuy{margin:0 0 0 36px;line-height:20px;font-weight:600;-webkit-transition:all .1s ease-in-out;-moz-transition:all .1s ease-in-out;transition:all .1s ease-in-out}.bx_ordercart .bx_ordercart_order_sum{width:304px;color:#333}.bx_ordercart .bx_ordercart_order_sum tr{text-align:left}.bx_ordercart .bx_ordercart_order_sum tr td{max-width:145px;text-align:right;display:inline-block}.bx_ordercart .bx_ordercart_order_sum tr td.fwb{padding-top:10px;font-weight:500;font-size:16px;line-height:20px}.bx_ordercart .bx_ordercart_order_sum tr td:first-child{width:110px;margin:0 36px 0 0;font-weight:500;font-size:16px;line-height:20px}.bx_ordercart .bx_ordercart_order_sum tr #allSum_FORMATED,.bx_ordercart .bx_ordercart_order_sum tr #allSum_wVAT_FORMATED{white-space:nowrap;font-weight:500;font-size:20px;line-height:20px;overflow:hidden;text-overflow:ellipsis}.bx_ordercart .bx_ordercart_order_sum tr td.custom_t2{font-size:15px;line-height:20px;color:#333;overflow:hidden;text-overflow:ellipsis}.bx_item_list_you_looked_horizontal{margin:0;border-radius:0;border:none}.container .bx_item_list_you_looked_horizontal .bx_item_list_title{position:relative;margin:0 0 13px;font-size:20px;color:#1d2029;line-height:30px;font-weight:500;text-transform:none;background:0 0;text-align:left;padding:27px 0 0}.container .bx_item_list_you_looked_horizontal .bx_item_list_title:before{background:#eaebec;width:100%;height:1px;display:block;position:absolute;top:5px;left:0;right:0;content:""}.bx_item_list_you_looked_horizontal .bx_item_list_section .bx_catalog_item{border:1px solid #eaebec;padding:20px 26px 7px;text-align:center}.bx_item_list_you_looked_horizontal .bx_catalog_item:hover{border:1px solid #fff}.bx_item_list_you_looked_horizontal .bx_catalog_item_images,.bx_item_list_you_looked_horizontal .bx_catalog_item_images_double{background-size:initial;padding-top:100%}.bx-no-touch .bx_item_list_you_looked_horizontal .bx_catalog_item.double:hover .bx_catalog_item_images_double,.bx_item_list_you_looked_horizontal .bx_catalog_item_images_double{display:none}.bx-no-touch .bx_item_list_you_looked_horizontal .bx_catalog_item.double:hover .bx_catalog_item_images{animation:none;opacity:1}.bx-no-touch .bx_item_list_you_looked_horizontal .bx_catalog_item:hover .bx_catalog_item_container{animation:none;border:none;box-shadow:0 0 14px rgba(0,0,0,.1);-moz-box-shadow:0 0 14px rgba(0,0,0,.1);-o-box-shadow:0 0 14px rgba(0,0,0,.1);-webkit-box-shadow:0 0 14px rgba(0,0,0,.1);padding:20px 26px 7px}.bx_item_list_you_looked_horizontal .bx_stick_disc.bottom{display:none!important}.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_stick.top{top:0}.bx_item_list_you_looked_horizontal .bx_catalog_item_title{height:auto;margin:0 0 12px}.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_catalog_item_title a{font-size:14px;font-weight:500;overflow:visible;white-space:normal}.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_catalog_item_title a:hover{color:#1d2029}.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_stick{left:-27px;text-shadow:none;font-weight:400;height:24px;margin:0 0 2px;background-image:none;background-color:#e52929;display:inline-block;color:#fff;width:auto;font-size:12px;line-height:12px;padding:6px 10px 0;position:absolute;box-sizing:border-box}.bx_item_list_you_looked_horizontal .bx_catalog_item_price{margin:0 0 14px}.bx_item_list_you_looked_horizontal .bx_catalog_item_price .bx_price{font-size:18px;font-weight:600;line-height:15px;padding:0}.bx_item_list_you_looked_horizontal .bx_catalog_item_controls .bx_catalog_item_controls_blockone a,.bx_item_list_you_looked_horizontal .bx_catalog_item_controls .bx_catalog_item_controls_blocktwo a{text-shadow:none;padding:7px 11px;font-weight:400;cursor:pointer;font-size:13px;line-height:16px;border-radius:2px;text-align:center;width:auto;height:auto;margin:0 0 12px;border:0}.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_catalog_item_container .bx_catalog_item_articul{display:none!important}.bx_item_list_you_looked_horizontal .bx_item_detail_scu .bx_scu ul li{position:relative;z-index:100;cursor:pointer;outline:0;font-size:11px;padding:0 9px 0 0;display:inline-block;padding-top:0!important;width:auto!important}.bx_item_list_you_looked_horizontal .bx_item_detail_scu .bx_scu ul li:before{display:none}.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_item_detail_scu .bx_scu ul li .cnt{border:none!important;position:initial;padding:0;overflow:visible}.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_item_detail_scu .bx_scu ul li .cnt_item{position:static!important}.bx_item_list_you_looked_horizontal .bx_item_detail_scu .bx_scu{overflow:visible}.bx_item_list_you_looked_horizontal .bx_item_detail_size{margin:0}.bx_item_list_you_looked_horizontal .bx_item_detail_size .bx_size>ul{margin:0!important}.bx_item_list_you_looked_horizontal .bx_item_detail_size ul li{display:inline-block;font-size:10px;border:1px solid #888;padding:0 10px;text-align:center;cursor:pointer;border-radius:2px;float:none;height:auto;width:auto!important;margin:0 5px 5px 0}.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_item_detail_size ul li span{color:#373737;display:block;line-height:15px;margin:0;text-align:center;padding:7px 0;font-size:13px;position:initial;border:none!important;background:0 0}.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_item_detail_size ul li.bx_active span{color:#fff}.bx_item_list_you_looked_horizontal ul li:before{display:none}.bx-no-touch .bx_item_list_you_looked_horizontal .bx_catalog_item:hover .bx_catalog_item_scu{margin:0 0 20px}.bx_item_list_you_looked_horizontal .bx_item_list_slide{height:auto!important;margin:0 -1%}.bx_ordercart .bx_ordercart_order_pay .bx_ordercart_order_pay_center .checkout{opacity:0;-webkit-appearance:none;padding:8px 21px 9px 20px;background:0 0;font-size:13px;line-height:20px;border:1px solid #ddd;text-shadow:none;-webkit-transition:all .1s ease-in-out;-moz-transition:all .1s ease-in-out;transition:all .1s ease-in-out}.bx_ordercart .bx_ordercart_order_pay .bx_ordercart_order_pay_center .checkout:hover{color:#FFF}.bx_ordercart .bx_ordercart_order_pay .bx_ordercart_order_pay_center .checkout:active{box-shadow:none;background:0 0}.bx_ordercart .bx_ordercart_order_pay .bx_ordercart_order_pay_center .catalog_back{margin:0;float:left;line-height:19px;font-weight:600}.bx_ordercart .bx_sort_container{margin:0 0 20px;min-height:0;font-size:15px;font-weight:500;line-height:22px}.bx_ordercart .bx_sort_container:after{content:"";display:table;clear:both}.bx_ordercart .bx_sort_container>span{display:none}.bx_ordercart .bx_sort_container a{float:left;display:block;position:relative;padding:7px 0 6px;background:#fff;color:#777;border-radius:0;line-height:20px;text-align:center;border:none;font-size:16px;font-weight:500;margin:0 20px 0 0}.bx_ordercart .bx_sort_container a:first-of-type{margin-left:0}.bx_ordercart .bx_sort_container a:not(.current):active{color:#777;text-shadow:none;box-shadow:none}.bx_ordercart .bx_sort_container a:hover{color:#333;background:#fff}.bx_ordercart .bx_sort_container a.current,.bx_ordercart .bx_sort_container a.current:hover{text-shadow:none;color:#1d2029;box-shadow:none;border-radius:0;cursor:default;background:#FFF}.bx_ordercart .bx_sort_container a.current:after{content:"";position:absolute;left:0;right:0;bottom:0;height:2px}.bx_ordercart .bx_sort_container .flat{display:inline!important}.bigdata_recommended_products_container{display:block;margin:39px 0 0}.bx_ordercart_order_pay_center .icon_error_wrapper{float:right}.bx_ordercart_order_pay_center:after{content:"";display:table;clear:both}.fademask_ext{position:fixed;top:0;left:0;background:#374246;width:100%;height:100%;min-height:100%;opacity:.8;z-index:1050}.middle>.container{width:100%!important;padding:0!important;position:relative}#content #bx-soa-order-form *{box-sizing:border-box;font-family:Ubuntu,Arial,Helvetica,sans-serif}#bx-soa-order-form{font-size:12px}#bx-soa-order .form-control:focus{outline:0;box-shadow:none;border-color:#E5E5E5}#content #bx-soa-order-form .row{margin-top:0}#content #bx-soa-order-form .row.bx-soa-more{margin-top:30px}.bx-soa-section.bx-selected .bx-soa-section-content,.bx-soa-section.bx-step-completed .bx-soa-section-content{padding:0;line-height:20px;font-size:14px;transition:none}.bx-soa-section{transition:none}#bx-soa-order .alert-danger{font-size:14px;line-height:20px;border-radius:0;padding:15px 29px;background:#fee;color:#e83333}#bx-soa-order .bx-soa-section{border-radius:0;margin:0 0 20px}#bx-soa-order .bx-soa-section.bx-selected{border:1px solid #f3f3f3}#bx-soa-order .bx-soa-section .bx-soa-section-title-container{padding:29px 19px 29px 79px;border-bottom:1px solid #f3f3f3;background:#fbfbfb;cursor:pointer}#bx-soa-order .bx-soa-section.bx-selected .bx-soa-section-title-container{cursor:default}#bx-soa-order .bx-soa-section .bx-soa-section-title{position:relative;font-size:20px;line-height:24px;color:#333;padding-left:0!important}#bx-soa-order .bx-soa-section .bx-soa-section-title:before{content:"";position:absolute;left:-50px;top:-3px;margin:0;width:30px;height:30px;background:url(images/order.png) no-repeat}#bx-soa-order .bx-soa-section.bx-step-completed .bx-soa-section-title:before{background-color:#52c200;background-position:-30px -30px!important}#bx-soa-order .bx-soa-section.bx-step-error:not(.bx-selected) .bx-soa-section-title:before{background:url(images/order.png) -60px -30px no-repeat!important}#bx-soa-order .bx-soa-editstep{display:inline-block;margin:1px 0 0;font-size:14px;line-height:20px;border:none}#bx-soa-order .bx-soa-editstep:first-letter{text-transform:uppercase}#bx-soa-order .bx-soa-editstep:hover{text-decoration:none}#bx-soa-order .bx-soa-section.bx-selected .bx-soa-editstep{display:none}#bx-soa-order #bx-soa-region{border:1px solid #f3f3f3}#bx-soa-order #bx-soa-region .bx_soa_location .form-group .bx-soa-custom-label{display:block}#bx-soa-order #bx-soa-region .bx_soa_location .form-group:first-child br,#bx-soa-order .bx-soa-section-title-count,.bx-sls .dropdown-fade2white{display:none}#bx-soa-order #bx-soa-region .bx_soa_location .form-group:first-child>label{margin:0 0 5px}#bx-soa-order #bx-soa-region .bx_soa_location .form-group.bx-soa-location-input-container{margin:0 0 25px}#bx-soa-order #bx-soa-region .bx_soa_location .radio-inline{margin:5px 40px 5px 0}#bx-soa-order .bx-soa .bx-soa-custom-label,#bx-soa-order .bx-soa .form-group label{margin:0 0 2px;padding:0;font-size:12px;line-height:20px;color:#777;z-index:1}#bx-soa-order div[class*=bx-sls] .quick-locations{margin:7px 0 12px}#bx-soa-order div[class*=bx-sls] .quick-locations .quick-location-tag{margin:3px 1px 1px;padding:5px 15px;height:auto;background:0 0;border:1px solid #ddd;font-size:14px;line-height:20px;-webkit-transition:all .1s ease-in-out;-moz-transition:all .1s ease-in-out;transition:all .1s ease-in-out}#bx-soa-order div[class*=bx-sls] .quick-locations .quick-location-tag:hover{color:#FFF}#bx-soa-order .bx-ui-sls-tree-trunk{font-size:14px;padding-left:45px}#bx-soa-order div[class*=bx-sls] .form-control.dropdown-block{font-size:14px;color:#333;line-height:20px;border:1px solid #ececec;background:#f7f7f7;padding-left:44px}.bx-soa-location-input-container .bx-ui-slst-pool>div{padding-left:44px}#bx-soa-order .bx-sls .form-control.dropdown-block{position:relative;padding:10px 17px 8px 49px;height:auto}#bx-soa-order div[class*=bx-sls] .form-control.dropdown-block .bx-ui-sls-container input{height:auto;padding-right:27px!important}div[class*=bx-sls] .dropdown-icon{position:absolute;left:17px;top:50%;margin:-8px 0 0;width:16px;height:16px;background:url(images/order_ext.png) -5px -75px no-repeat}div[class*=bx-sls] .bx-ui-sls-clear{position:absolute;margin:0;right:0;top:0;bottom:0;width:44px;height:auto;cursor:pointer;background:0 0}div[class*=bx-sls] .bx-ui-sls-clear:before{content:"";position:absolute;left:50%;top:50%;margin:-10px 0 0 -10px;width:20px;height:20px;background:url(images/order_ext.png) -82px -61px no-repeat!important;border-radius:100%}div[class*=bx-sls] .bx-ui-sls-clear:hover:before{background-position:-82px -82px!important;background-color:#ddd}.bx-sls .dropdown-block{background:#f7f7f7;padding:1px 44px;font-size:14px;color:#333;line-height:20px;border:1px solid #ececec;box-shadow:none}#bx-soa-order .bx-slst .dropdown-block.form-control{margin-bottom:10px}#bx-soa-order #bx-soa-orderSave{margin:40px 0 0;padding:0!important;text-align:center}#bx-soa-order #bx-soa-orderSave a{float:none!important;text-shadow:none;color:#FFF;padding:11px 40px 13px;font-size:17px;line-height:20px;font-weight:700}#bx-soa-order .bx-soa-more{border:none;padding:25px 29px 0;margin:27px -29px 0 -79px;border-top:1px solid #f1f1f1}#bx-soa-order .bx-soa-more .bx-soa-more-btn{padding:0}#bx-soa-order .bx-soa-more .bx-soa-more-btn .pull-left{background:0 0}#bx-soa-order .bx-soa-more .bx-soa-more-btn .pull-left:hover{color:#FFF}#bx-soa-order #bx-soa-region .bx_soa_location .form-group[data-property-id-row]{margin-top:20px}#bx-soa-order .alert .row{margin-top:0}#bx-soa-order .alert .row div{font-size:12px}#bx-soa-order .form-group{position:relative;font-size:14px}#bx-soa-order .form-group label[for=zipProperty]:not(.error){top:0;left:0;font-weight:400;cursor:text;display:block;font-size:12px;margin-bottom:2px;color:#777}#bx-soa-order .form-group.value_y label:not(.error){position:absolute;background:#FFF;font-size:12px;top:-10px;left:10px;padding:0 7px}#bx-soa-order .form-group.value_y input,#bx-soa-order .form-group.value_y textarea{background:#FFF}#bx-soa-order .bx-soa-reference{margin:-8px 0 0;padding:0;font-size:12px;line-height:14px;color:#999}#bx-soa-order .bx-soa .form-group .radio-inline{padding:0}#bx-soa-order .bx-soa .form-group .radio-inline label{display:inline-block;float:none;margin:0;font-size:15px;font-weight:500;color:#333;cursor:pointer;position:relative;padding:0 0 0 32px!important}#bx-soa-order .bx-soa .form-group .radio-inline label:before{content:"";display:block;position:absolute;left:0;top:-1px;width:20px;height:20px;background:#fbfbfb;border:1px solid #e9e9e9;border-radius:100%}#bx-soa-order .bx-soa .bx-soa-location-input-container:before,#bx-soa-order .bx-soa .form-group .radio-inline input,#bx-soa-order .bx-soa-tooltip .tooltip-arrow{display:none}#bx-soa-order .bx-soa .form-group .radio-inline label:hover:before,#bx-soa-order .bx-soa .form-group .radio-inline.checked label:before{border:none}#bx-soa-order .bx-soa .form-group .radio-inline.checked label{cursor:default}#bx-soa-order .form-group.has-error .form-control.dropdown-block,#bx-soa-order .form-group.has-error input,#bx-soa-order .has-error .form-control{border-color:#fe5252}#bx-soa-order .bx-soa .form-group .radio-inline.checked label:after{content:"";position:absolute;left:5px;top:5px;width:10px;height:8px;background:url(images/order_ext.png) -64px -9px no-repeat}#bx-soa-order .bx-soa-tooltip{position:absolute;bottom:-22px;left:17px;padding:0;background:0 0;max-width:100%;box-shadow:none;top:auto}#bx-soa-order .bx-soa-tooltip .tooltip-inner{max-width:100%;padding:0;font-size:12px;line-height:20px;color:#fe5252;background:0 0}#bx-soa-order .form-group.has-error{margin-bottom:41px!important}#bx-soa-order #bx-soa-delivery .bx-soa-section-title:before{background-position:-30px 0}#bx-soa-order #bx-soa-delivery .bx-soa-pp-price{white-space:nowrap}#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company:after,#bx-soa-order .bx-soa-pp-item-container:after{display:table;clear:both;content:""}#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company{clear:both;position:relative;float:none;border:none;margin:19px 0 0;padding:0 0 24px;width:auto;transition:none;cursor:pointer}#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company:first-child{margin-top:0}#bx-soa-order .bx-soa-pp-company-graf-container{position:relative;padding:0;border:1px solid #fbfbfb;border-radius:0;width:120px;height:72px;background:#fbfbfb;cursor:pointer}#bx-soa-order .bx-soa-pp-company.bx-selected .bx-soa-pp-company-graf-container .bx-soa-pp-company-image,#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company.bx-selected{cursor:default}#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company-graf-container{display:table-cell;vertical-align:middle}#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company-graf-container:before{content:"";position:absolute;top:7px;left:7px;width:20px;height:20px;border:1px solid #e5e5e5;background:#FFF;border-radius:100%;z-index:1}#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company.bx-selected .bx-soa-pp-company-graf-container:before,#bx-soa-order .bx-soa-pp-item-container:hover .bx-soa-pp-company-graf-container:before{border:none}#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company.bx-selected .bx-soa-pp-company-graf-container:after{content:"";position:absolute;left:12px;top:13px;width:10px;height:8px;background:url(images/order_ext.png) -64px -9px no-repeat;z-index:2}#bx-soa-order .bx-soa-pp-company-graf-container .bx-soa-pp-company-image{position:relative;border:1px solid #e5e5e5;width:118px;height:70px;top:auto;right:auto;bottom:auto;left:auto;background-position:center center!important;background-size:auto!important;background-repeat:no-repeat!important}#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company-graf-container input{display:none}#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company-smalltitle{display:table-cell;vertical-align:middle;padding:0 0 0 20px;font-size:15px;font-weight:500;line-height:20px;color:#777;text-align:left}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-company-block:after,#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company:after{display:table;clear:both;content:""}#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company.bx-selected .bx-soa-pp-company-smalltitle{color:#333}#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-delivery-cost{font-size:14px;line-height:20px;color:#333;padding:1px 5px;background:#fbfbfb;text-align:center;left:0;right:0;bottom:-24px;border:1px solid #e5e5e5;border-top:none}#bx-soa-order .bx-sls .bx-ui-sls-fake,#bx-soa-order .bx-sls .bx-ui-sls-route{font-family:Ubuntu,Arial,Helvetica,sans-serif}#bx-soa-order .bx-soa-pp-desc-container{padding-top:0}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company{position:relative;padding:22px 24px 20px;border:1px solid #e5e5e5;border-top:none;background:#fbfbfb;-moz-border-radius-bottomright:2px;-webkit-border-bottom-right-radius:2px;border-bottom-right-radius:2px;-moz-border-radius-bottomleft:2px;-webkit-border-bottom-left-radius:2px;border-bottom-left-radius:2px}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company:before{content:"";position:absolute;top:0;right:-1px;left:-1px;height:2px}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-company-image{margin:5px 0 0;background:#FFF;cursor:default;border-radius:0}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-company-block>br{display:none}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-company-desc{padding:10px 0 0;font-size:13px;line-height:20px;color:#777}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-list-description,#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-list-termin{display:inline-block;vertical-align:top;color:#333;font-size:15px;line-height:20px;font-weight:500}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company ul.bx-soa-pp-list{padding:0;margin:17px 0 0}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company ul.bx-soa-pp-list li{padding:0}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-list-termin{margin:0 3px 0 0}#bx-soa-order .bx-soa-pp-desc-container .checkbox input,#bx-soa-order .bx-soa-section.bx-active .bx-soa-section-content .bx-soa-pp-company-selected img{display:none}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company-logo{padding:0}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company-subTitle{margin:0 0 10px;font-size:15px;font-weight:500;line-height:20px;color:#383838}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-field label:not(.error){position:relative;top:auto;left:auto;margin:0 0 5px;padding:0;font-size:13px;line-height:20px;color:#777;background:0 0}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-field .bx-soa-service-small{margin:7px 0 0;font-size:12px;line-height:14px;color:#999}#bx-soa-order .bx-soa-pp-desc-container .checkbox{margin:21px 0 0}#bx-soa-order .bx-soa-pp-desc-container .checkbox:first-child{margin-top:0}#bx-soa-order .bx-soa-coupon-block,#bx-soa-order .bx-soa-coupon-label{display:inline-block;vertical-align:top}#bx-soa-order .bx-soa-pp-desc-container .checkbox label{position:relative;padding:0 0 0 27px;font-size:14px;line-height:20px;color:#333}#bx-soa-order .bx-soa-pp-desc-container .checkbox label:before{content:"";position:absolute;left:0;top:1px;width:18px;height:18px;border:1px solid #e9e9e9;background:#FFF;border-radius:2px}#bx-soa-order .bx-soa-pp-desc-container .checkbox label.checked:before,#bx-soa-order .bx-soa-pp-desc-container .checkbox label:hover:before{border:none}#bx-soa-order .bx-soa-pp-desc-container .checkbox label.checked:after{content:"";position:absolute;top:6px;left:4px;width:10px;height:8px;background:url(images/order_ext.png) -64px -9px no-repeat}#bx-soa-order .bx-soa-pp-desc-container .checkbox .bx-soa-service-small{margin:1px 0 0}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-field{margin:13px 0 0}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-field:first-of-type{margin-top:22px}#bx-soa-order .bx-soa-section,#bx-soa-order .bx-soa-section.bx-step-completed{border:1px solid #f3f3f3}#bx-soa-order .bx-soa-pp-company-block .form-control{font-size:12px}#bx-soa-order .form-control{margin-bottom:0}#bx-soa-order .bx-soa-section .bx-soa-section-content{padding:25px 29px 25px 79px;font-size:15px;line-height:20px;color:#333;transition:none}#bx-soa-order .bx-soa-section.bx-active .bx-soa-section-content strong{font-weight:500;margin:0}#bx-soa-order .bx-soa-coupon{margin:30px -29px -2px -79px;padding:25px 29px 0;border-top:1px solid #f3f3f3}#bx-soa-order #bx-soa-basket .bx-soa-coupon{margin:0 0 27px}#bx-soa-order #bx-soa-basket .bx-soa-more{margin:0 0 25px}#bx-soa-order .bx-soa-coupon-label{margin:2px 0 0;padding:0}#bx-soa-order .bx-soa-coupon label{margin:0;width:90px;font-size:14px;font-weight:400;line-height:15px;color:#333}#bx-soa-order .bx-soa-coupon.bx-soa-coupon-item-fixed .bx-soa-coupon-label{margin-top:0}#bx-soa-order .bx-soa-coupon-input{width:260px;display:block;position:relative;overflow:hidden;border-radius:2px}#bx-soa-order .bx-soa-coupon-input:after{content:"";position:absolute;top:-1px;bottom:-1px;right:0;margin:0;width:57px;height:auto;cursor:pointer;border:none;background:url(images/order_ext.png) -23px -28px no-repeat;-webkit-transform:rotate(0);-moz-transform:rotate(0);-o-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0)}#bx-soa-order .bx-soa-coupon-input:hover:after{background-position:14px -28px}#bx-soa-order .bx-soa-coupon-input input[type=text].form-control,#bx-soa-order textarea.form-control{padding:8px 67px 7px 17px;height:auto;color:#333;background:#fbfbfb;font-size:14px;line-height:20px;border-radius:2px;border:1px solid #eaebec}#bx-soa-order .bx-soa-coupon-input input[type=text].form-control:focus{background:#FFF}#bx-soa-order .bx-soa-pp-company-selected{padding-top:0;padding-bottom:0}#bx-soa-order .bx-soa-pp-price{padding:0;font-size:15px;font-weight:500;line-height:20px;color:#333}#bx-soa-order #bx-soa-paysystem .bx-soa-section-title:before{background-position:-60px 0}#bx-soa-order #bx-soa-properties .bx-soa-section-title:before{background-position:-90px 0}#bx-soa-order #bx-soa-properties .form-group:not([data-property-id-row]){margin:4px 0 0}#bx-soa-order #bx-soa-properties .form-group:not([data-property-id-row]):first-child{margin-top:0}#bx-soa-order #bx-soa-properties .form-group:not([data-property-id-row]) .bx-soa-custom-label{margin:0 3px 0 0;display:inline-block;vertical-align:top;font-size:15px;font-weight:500;line-height:20px;color:#333}#bx-soa-order #bx-soa-properties .form-group:not([data-property-id-row]) .bx-soa-custom-label:after{content:":"}#bx-soa-order #bx-soa-properties .form-group:not([data-property-id-row]) .bx-soa-custom-label .bx-authform-starrequired{display:none}#bx-soa-order #bx-soa-properties .form-group:not([data-property-id-row])>div{display:inline-block;vertical-align:top}#bx-soa-order #bx-soa-basket .bx-soa-section-title:before{background-position:0 -30px}#bx-soa-order .bx-soa-section .bx-soa-coupon-item{display:block}#bx-soa-order .bx-soa-section .bx-soa-section-content .bx-soa-coupon-item>strong{display:block;margin:16px 0 0;font-weight:400;text-transform:none;font-size:14px;line-height:20px;color:#333}#bx-soa-order .bx-soa-section .bx-soa-coupon-item .bx-soa-tooltip{float:right;display:block;margin:0 0 0 15px;opacity:1;position:relative;left:auto;bottom:auto}#bx-soa-order #bx-soa-paysystem .bx-soa-pp-item-container .bx-soa-pp-company{padding-bottom:0}#bx-soa-order .bx-soa-coupon-item .bx-soa-tooltip .tooltip-inner{font-size:14px;color:#333}#bx-soa-order .bx-soa-coupon-item .bx-soa-coupon-item-danger,#bx-soa-order .bx-soa-coupon-item .bx-soa-coupon-item-success,#bx-soa-order .bx-soa-coupon-item .bx-soa-coupon-item-used{position:relative;padding:0 0 0 30px;color:#333}#bx-soa-order .bx-soa-coupon-item .bx-soa-coupon-item-danger:before{content:"";position:absolute;top:0;left:0;width:20px;height:20px;background:url(images/order_ext.png) -32px -73px no-repeat}#bx-soa-order .bx-soa-coupon-item .bx-soa-coupon-item-used:before{content:"";position:absolute;top:0;left:0;width:20px;height:20px;background:url(images/order_ext.png) -26px -4px no-repeat}#bx-soa-order .bx-soa-coupon-item .bx-soa-coupon-item-success:before{content:"";position:absolute;top:0;left:0;width:20px;height:20px;background:url(images/order_ext.png) -5px -4px no-repeat}#bx-soa-order .bx-soa-coupon-item .bx-soa-coupon-remove{float:right;width:20px;height:20px;margin:2px 0 0 3px;border-radius:100%;background:url(images/order_ext.png) -82px -62px no-repeat}#bx-soa-order .bx-soa-coupon-item .bx-soa-coupon-remove:hover{background-position:-82px -82px}#bx-soa-order #bx-soa-properties .form-group{margin:0 0 30px}#bx-soa-order #bx-soa-properties.bx-selected .form-group label{position:relative;top:0;left:0;cursor:text;font-size:12px;margin-bottom:2px}#bx-soa-order #bx-soa-properties.bx-selected .form-group.value_y label{background:#FFF;top:-10px;left:10px;padding:0 7px}#bx-soa-order #bx-soa-properties .form-group textarea{height:106px;border:1px solid #ececec}#bx-soa-order #propsMap{margin:0 0 20px;height:332px!important}#bx-soa-order #propsMap>ymaps{height:332px!important}#bx-soa-order .bx-soa-cart-total{padding:30px 29px 40px;border:1px solid #f3f3f3;border-radius:0;background:#FFF}#bx-soa-order .bx-soa-cart-total .bx-soa-cart-total-line{margin:2px 0 0;padding:0;font-size:14px;line-height:20px;color:#333;border:none}#bx-soa-order .bx-soa-cart-total .bx-soa-cart-total-line:first-child{margin-top:0}#bx-soa-order .bx-soa-cart-total .bx-soa-cart-total-line .bx-soa-cart-t{width:46%;font-weight:400}#bx-soa-order .bx-soa-cart-total .bx-soa-cart-total-line .bx-soa-cart-d{width:54%;text-align:right}#bx-soa-order .bx-soa-cart-total .bx-soa-cart-total-line-total{margin:27px 0 0;padding:25px 0 0;border-top:1px solid #f3f3f3}#bx-soa-order .bx-soa-cart-total .bx-soa-cart-total-line-total .bx-soa-cart-t{font-size:16px;font-weight:500}#bx-soa-order .bx-soa-cart-total .bx-soa-cart-total-line-total .bx-soa-cart-d{font-size:18px!important;font-weight:500}#bx-soa-order .bx-soa-cart-total-button-container{padding:0;margin:26px 0 0}#bx-soa-order .bx-soa-cart-total-button-container .btn{padding:10px 12px 12px;font-size:17px!important}#bx-soa-order #bx-soa-basket .bx-soa-section-content{padding:0}#bx-soa-order #bx-soa-basket .bx-soa-coupon.bx-soa-coupon-item-fixed{margin:0 0 30px}#bx-soa-order #bx-soa-basket .bx-soa-item-table{margin:0 0 -1px}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr .bx-soa-item-td{padding:39px 10px 25px!important;border-top:none;border-bottom:1px solid #f3f3f3;position:relative}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr .bx-soa-item-td .bx-soa-info-shower{padding:0 20px 10px;display:inline-block}.bx-soa-info-shower+.bx-soa-item-info-block.bx-active{padding:0 20px}.bx-soa-info-block .bx-soa-info-line td{font-size:13px}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr:first-child .bx-soa-item-td .bx-soa-item-td-title{padding:0;font-size:13px;line-height:20px;color:#999}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr:first-child .bx-soa-item-td{padding:7px 10px 8px!important}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr .bx-soa-item-td:last-child{padding-right:24px!important}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-block{padding:0 0 0 14px}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-img-block{margin:0;padding:0;width:70px;height:70px;line-height:70px}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-img-block .bx-soa-item-imgcontainer{width:70px;height:70px;line-height:70px;padding:0;border-radius:0;border:none}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-content{padding:0 0 0 90px}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-title{margin:0 0 6px;padding:0;font-size:14px;font-weight:400;line-height:20px}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-title a{color:#333}#bx-soa-order #bx-soa-basket .bx-soa-item-content .bx-scu-container{max-width:100%;height:auto;margin:0 0 10px}#bx-soa-order #bx-soa-basket .bx-soa-item-content .bx-scu-container:after{background:0 0}#bx-soa-order #bx-soa-basket .bx-soa-item-content .bx-scu-container .bx-soa-item-td-title{margin:0;padding:0;font-size:12px;line-height:16px;color:#999}#bx-soa-order #bx-soa-basket .bx-soa-item-content .bx-scu-container .bx-soa-item-td-text{margin:0 0 0 6px;padding:0;font-size:12px;line-height:16px;color:#999}#bx-soa-order #bx-soa-basket .bx-soa-item-td-text small{display:block;margin:-1px 0 0;font-size:11px;line-height:14px;color:#aeaeae}#bx-soa-order #bx-soa-basket .bx-soa-item-properties.bx-text-right,#bx-soa-order #bx-soa-basket .bx-soa-item-properties.bx-text-right>div{text-align:left}#bx-soa-order #bx-soa-basket .bx-soa-item-td-text{line-height:20px}#bx-soa-order #bx-soa-basket .bx-price{font-size:18px;line-height:16px;color:#333}#bx-soa-order #bx-soa-basket .bx-soa-item-td-title{font-size:12px;color:#999;vertical-align:top}#bx-soa-order .bx-price-old{margin:0 0 0 4px!important;font-size:13px;font-weight:400!important;line-height:20px;color:#777}#bx-soa-order #bx-soa-total-mobile{margin:0 0 20px!important}.bx-soa-item-tr.bx-soa-item-info-container+.bx-soa-basket-info .bx-soa-item-td{border-top:1px solid #f3f3f3!important}.bx-soa-item-tr.bx-soa-item-info-container .bx-soa-item-td{border:none!important}#content noscript+b{display:none}.sale_order_full_table{position:relative;display:block;margin:0 auto;max-width:730px}.sale_order_full_table:first-of-type{margin-top:21px;padding:101px 0 0!important;text-align:center;color:#333;border:none!important}.sale_order_full_table:first-of-type:before{content:"";position:absolute;left:50%;top:0;margin:0 0 0 -35px;width:70px;height:70px;background:url(images/order_ext.png) -103px -5px no-repeat}.sale_order_full_table:last-of-type{border:1px solid #f3f3f3;padding:34px 39px}.sale_order_full_table:last-of-type tr:last-child td:first-child{padding-top:20px}.sale_order_full_table .ps_logo,.sale_order_full_table tbody,.sale_order_full_table tr{display:block}.sale_order_full_table .ps_logo br{display:none}.sale_order_full_table .ps_logo .pay_name{margin:0 0 22px;font-size:18px;font-weight:500;line-height:20px;color:#333}.sale_order_full_table .ps_logo .image{margin:0 25px 0 0;display:inline-block;vertical-align:middle;width:120px;height:72px;line-height:68px;text-align:center;border:1px solid #e5e5e5}.sale_order_full_table .ps_logo .paysystem_name{display:inline-block;vertical-align:middle;font-size:14px;line-height:20px;color:#333}.sale_order_full_table td>.tablebodytext{display:block;color:#333}.sale_order_full_table .tablebodytext br:first-of-type{display:none}.sale_order_full_table input[name=BuyButton]{margin:-7px 0 0;padding:7px 19px 9px;font-size:14px;line-height:20px;font-weight:700;border:1px solid transparent;-webkit-transition:all .1s ease-in-out;-moz-transition:all .1s ease-in-out;transition:all .1s ease-in-out}.sale_order_full_table form[name=ShopForm] .tablebodytext{display:block;margin:8px 0 0;font-size:12px;line-height:18px;color:#777}.sale_order_full_table form[name=ShopForm] .tablebodytext b{font-weight:400;color:#333}#bx-soa-order a{text-decoration:none}#bx-soa-order .bx-soa-cart-total .change_basket{font-size:16px;font-weight:600;position:relative;color:#333;border-bottom:1px solid #eaebec;margin:0 -29px 43px;padding:2px 29px 33px}#bx-soa-order .bx-soa-cart-total .change_basket .change_link{position:absolute;top:5px;right:29px;font-size:14px;font-weight:400}.bx-soa-auth .bx-authform-input-container input[type=text],.bx-soa-auth .bx-authform-input-container input[type=password]{box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;background:#f7f7f7;border:1px solid #eaebec;border-radius:2px;box-shadow:none;color:#383838;height:auto;font-size:12px;padding:8px 13px 7px;width:100%;line-height:20px}.bx-soa-auth .bx-authform-input-container label{font-size:12px;margin-bottom:2px;color:#777}#bx-soa-order input[type=email],#bx-soa-order input[type=password],#bx-soa-order input[type=text],#bx-soa-order select,#bx-soa-order textarea{font-size:14px}.sale_order_full_table input[name=BuyButton]{color:#fff}.magnifier{text-align:center;background:#fff}.magnifier img{vertical-align:middle;margin:auto;display:inline-block}.footer_inner.no_fill{background:#f6f6f7}.footer_inner.fill{background:0 0!important}.catalog_detail .bx-modal-container{padding-top:0}.catalog_detail .bx-modal-container .bx-modal-small-title{font-size:20px;margin-top:-5px;margin-left:16px}.catalog_detail .bx-modal-container .bx-original-item-container *{font-size:14px}.catalog_detail .bx-modal-container .bx-original-item-container>div{margin:20px 0 0;color:#555;padding:0 15px}.catalog_detail .bx-modal-container .bx-original-item-container .bx-added-item-new-price{padding:2px 0;display:inline-block}.catalog_detail .bx-modal-container .bx-catalog-set-item .bx-catalog-set-item-price-new,.catalog_detail .bx-modal-container .bx-original-item-container .bx-added-item-new-price{font-weight:600;color:#1d2029}.catalog_detail .bx-modal-container .bx-catalog-set-item .bx-catalog-set-item-price-new *,.catalog_detail .bx-modal-container .bx-original-item-container .bx-added-item-new-price *{color:#1d2029}.bx-modal-container .bx-catalog-set-item-price-old,.bx-modal-container .bx-catalog-set-item-price-old *,.catalog_detail .bx-modal-container .bx-catalog-set-item .bx-catalog-set-item-price-old{font-weight:400;color:#555}.catalog_detail .bx-modal-container a:hover{text-decoration:none}.catalog_detail .bx-modal-container .bx-item-set-current-price{color:#1d2029;font-size:24px;background:0 0;margin-bottom:0}.bx-modal-container .bx-item-set-economy-price{display:none}.catalog_detail .bx-modal-container .bx-constructor-container-result .bx-added-item-old-price{color:#666;font-size:15px}.catalog_detail .bx-modal-container .bx-constructor-container-result .btn-add{margin-top:13px;font-weight:600;font-size:13px;padding:7px 19px}.catalog_detail .bx-modal-container .btn.btn-add{border-color:transparent}.catalog_detail .bx-modal-container .bx-catalog-set-item{text-align:center}.catalog_detail .bx-modal-container .bx-catalog-set-item-img{padding-top:10px!important;max-height:200px;padding-bottom:50px;height:200px;line-height:135px}.catalog_detail .bx-modal-container .bx-catalog-set-item-img .bx-catalog-set-item-img-container{position:static}.catalog_detail .bx-modal-container .bx-catalog-set-item-img .bx-catalog-set-item-img-container img{position:static;transform:none;display:inline-block}.bx-modal-container .bx-catalog-set-item-title:after{display:none}.catalog_detail .bx-modal-container .bx-catalog-set-item .bx-catalog-set-item-title{height:auto;padding-bottom:2px}.catalog_detail .bx-modal-container .bx-catalog-set-item .bx-catalog-set-item-title a{font-size:14px;line-height:18px}.catalog_detail .bx-modal-container .bx-catalog-set-item-price{padding-top:0;min-height:auto}.catalog_detail .bx-modal-container .bx-catalog-set-item-price-old{padding-top:5px}.catalog_detail .bx-modal-container .bx-catalog-set-item .bx-catalog-set-item-add-btn{padding-top:9px}.catalog_detail .bx-modal-container .bx-catalog-set-topsale-slider-box{padding:20px 0 0}.personal_wrapper{float:left;width:100%}.personal_wrapper .row{margin-top:0}.personal_wrapper .inner_border{border:1px solid #e5e5e5}.sale-personal-section-index-block{background-color:#fbfbfb;border:1px solid #f3f3f3;border-radius:0;margin:0 0 20px;opacity:1;height:auto;text-transform:none}.personal_wrapper .orders_wrapper .sale-order-list-inner-row>div>a,.personal_wrapper form input[type=submit]{border-radius:2px;color:#fff!important;-webkit-transition:all .1s ease-in-out;-moz-transition:all .1s ease-in-out;line-height:16px;font-weight:400;text-shadow:none;text-transform:none;cursor:pointer}.sale-personal-section-index-block:hover{border-color:#e5e5e5}.sale-personal-section-row-flex{margin:0 -10px}.personal_wrapper .sale-personal-section-row-flex.row>div[class*=col-md-]{padding:0 10px}.sale-personal-section-index-block-name{font-size:17px;margin:12px 0 16px}.sale-personal-section-index-block-link{width:100%}.sale-personal-section-index-block-ico i{display:inline-block;width:50px;height:50px;background:url(images/icons_mask.png) no-repeat}.sale-personal-section-index-block-ico i.bill{background-position:-50px 0}.sale-personal-section-index-block-ico i.personal{background-position:-100px 0}.sale-personal-section-index-block-ico i.filter_orders{background-position:-150px 0}.sale-personal-section-index-block-ico i.profile{background-position:-200px 0}.sale-personal-section-index-block-ico i.cart{background-position:-250px 0}.sale-personal-section-index-block-ico i.subscribe{background-position:-300px 0}.sale-personal-section-index-block-ico i.contact{background-position:-350px 0}.personal_wrapper form input[type=submit]{margin:-7px 0 10px;padding:7px 12px 8px;font-size:14px;border:1px solid transparent;transition:all .1s ease-in-out}.personal_wrapper .orders_wrapper .sale-order-list-inner-row>div>a{font-family:Ubuntu,Arial,Helvetica,sans-serif;margin:0 0 16px;padding:7px 12px 8px;font-size:14px;border:1px solid transparent;transition:all .1s ease-in-out;text-decoration:none;display:block}.personal_wrapper .orders_wrapper .sale-order-list-inner-row>div>a:before{display:none}.personal_wrapper .orders_wrapper .sale-order-detail-about-order-inner-container-repeat>a,.personal_wrapper .orders_wrapper .sale-order-list-button,.sale-order-detail-payment-options-methods-button-element,.sale-order-detail-payment-options-methods-button-element-new-window{font-family:Ubuntu,Arial,Helvetica,sans-serif;border-radius:2px;margin:0 0 16px;padding:7px 12px 8px;font-size:14px;line-height:16px;font-weight:400;height:auto;text-shadow:none;border:1px solid transparent;-webkit-transition:all .1s ease-in-out;-moz-transition:all .1s ease-in-out;transition:all .1s ease-in-out;text-transform:none;text-decoration:none;display:inline-block;float:right}.personal_wrapper .row>span{font-size:13px}.personal_wrapper .row>div[class*=col-md-],.personal_wrapper .row>ul[class*=col-md-]{box-sizing:border-box;padding:0 15px;display:inline-block;font-size:12px;vertical-align:top}.personal_wrapper .sale-order-list-container,.personal_wrapper div[class*=col-md-]{padding:0 15px;box-sizing:border-box;display:inline-block}.personal_wrapper div[class*=col-xs]{padding:0 15px}.personal_wrapper .row div.sale-order-detail-payment-inner-row-template,.personal_wrapper .row div.sale-order-list-inner-row-template{display:none;text-align:left;width:100%;max-width:100%;margin:0;font-size:13px}.personal_wrapper .row div.sale-order-detail-payment-inner-row-template{margin-left:16.66666667%;padding-left:5px}.personal_wrapper .row.sale-order-list-inner-row div.sale-order-list-inner-row-template{padding:0 23px}.personal_wrapper .row div.sale-order-detail-about-order-inner-container-details,.personal_wrapper .row div.sale-order-detail-payment-options-shipment-composition-map{display:none}.personal_wrapper .col-md-12{width:100%}.personal_wrapper .col-md-11{width:91.66666667%}.personal_wrapper .col-md-10{width:83.33333333%}.personal_wrapper .col-md-9{width:75%}.personal_wrapper .col-md-8{width:66.66666667%}.personal_wrapper .col-md-7{width:58.33333333%}.personal_wrapper .col-md-6{width:50%}.personal_wrapper .col-md-5{width:41.66666667%}.personal_wrapper .col-md-4{width:33.33%}.personal_wrapper .col-md-3{width:25%}.personal_wrapper .col-md-2{width:16.66666667%}.personal_wrapper .col-md-1{width:8.33333333%}.orders_wrapper .visible-xs,.visible-lg,.visible-md,.visible-sm{display:none!important}.orders_wrapper .container-fluid{padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.orders_wrapper .container-fluid.sale-order-detail{padding-right:0;padding-left:0}.orders_wrapper .row .sale-order-payment-change-pp-list .sale-order-payment-change-pp-company{padding:7px}.orders_wrapper .row div.sale-order-list-repeat-container{padding:0}.orders_wrapper .row div.sale-order-list-inner-container{padding:0;border:none}.personal_wrapper i{font-size:0}.personal_wrapper .orders_wrapper .row.col-md-12.col-sm-12{border:1px solid #e5e5e5;padding:22px 22px 13px;margin:0 0 20px}.personal_wrapper .orders_wrapper .row.col-md-12.col-sm-12>a{font-weight:600;font-family:Ubuntu,Arial,Helvetica,sans-serif;font-size:13px}.personal_wrapper .orders_wrapper .row.col-md-12.col-sm-12>a:hover{color:#333}.personal_wrapper .orders_wrapper .sale-order-title{font-weight:500;font-family:Ubuntu,Arial,Helvetica,sans-serif;font-size:20px;color:#383838;line-height:24px;margin:14px 0 25px}.personal_wrapper .orders_wrapper .sale-order-list-container{border:1px solid #e5e5e5}.personal_wrapper .orders_wrapper .sale-order-detail-general-head,.personal_wrapper .orders_wrapper .sale-order-list-accomplished-title-container,.personal_wrapper .orders_wrapper .sale-order-list-title-container{background:#f7f7f7}.personal_wrapper .orders_wrapper .sale-order-detail-general-item,.personal_wrapper .orders_wrapper .sale-order-list-container .sale-order-list-accomplished-title,.personal_wrapper .orders_wrapper .sale-order-list-container .sale-order-list-title{font-weight:500;font-family:Ubuntu,Arial,Helvetica,sans-serif;font-size:16px;color:#383838;margin:20px 0 22px 7px}.personal_wrapper .orders_wrapper .sale-order-list-container .sale-order-list-inner-accomplished{border:none;border-top:1px solid #e5e5e5}.personal_wrapper .orders_wrapper .sale-order-list-accomplished-title-container .row>div{vertical-align:middle}.personal_wrapper .orders_wrapper .sale-order-list-accomplished-date,.personal_wrapper .orders_wrapper .sale-order-list-accomplished-date-number{margin:0;font-size:14px;color:#777;font-weight:400}.personal_wrapper .orders_wrapper .sale-order-list-accomplished-date-number{margin:0 5px 0 0}.personal_wrapper .orders_wrapper .sale-order-list-inner-row{padding:0 14px 5px}.personal_wrapper .orders_wrapper .sale-order-list-inner-accomplished .sale-order-list-inner-row{padding-top:21px}.personal_wrapper .orders_wrapper .sale-order-list-inner-row>div{width:auto;padding:0 8px}.personal_wrapper .orders_wrapper .sale-order-list-inner-row .sale-order-list-inner-row-body>div{vertical-align:top}.personal_wrapper .orders_wrapper .sale-order-list-inner-title-line{border-top:1px solid #e5e5e5;padding:20px 23px 8px;margin:10px 0 0}.personal_wrapper .orders_wrapper .sale-order-list-inner-title-line:first-child{margin:0}.personal_wrapper .orders_wrapper .sale-order-list-inner-title-line-item{color:#777;font-size:14px;font-weight:400;font-family:Ubuntu,Arial,Helvetica,sans-serif;text-transform:none}.personal_wrapper .orders_wrapper .sale-order-list-inner-title-line-border{display:none}.personal_wrapper .orders_wrapper .sale-order-list-payment-title,.personal_wrapper .orders_wrapper .sale-order-list-shipment-title{color:#383838;font-size:15px;font-weight:500;font-family:Ubuntu,Arial,Helvetica,sans-serif;text-transform:none}.personal_wrapper .orders_wrapper .sale-order-list-shipment-status-block,.personal_wrapper .orders_wrapper .sale-order-list-status-alert,.personal_wrapper .orders_wrapper .sale-order-list-status-success,.sale-order-detail-payment-options-methods-info-title-status-alert,.sale-order-detail-payment-options-methods-info-title-status-success,.sale-order-payment-change-status-alert,.sale-order-payment-change-status-success{margin:3px 0 3px 20px;padding-left:10px;padding-right:11px}.personal_wrapper .orders_wrapper .sale-order-list-status-alert,.sale-order-detail-payment-options-methods-info-title-status-alert,.sale-order-payment-change-status-alert{color:#e62222;border-color:#f7bcbc;background:#fdeeee}.personal_wrapper .orders_wrapper .sale-order-list-status-success,.sale-order-detail-payment-options-methods-info-title-status-success,.sale-order-payment-change-status-success{color:#4b8c03;border-color:#c9dcb3;background:#f1f6eb}.personal_wrapper .orders_wrapper .sale-order-list-change-payment:hover,.personal_wrapper .orders_wrapper .sale-order-list-payment-price .sale-order-list-payment-number,.personal_wrapper .orders_wrapper .sale-order-payment-change-payment-number{color:#333}.personal_wrapper .orders_wrapper .sale-order-list-shipment-status-block{padding-left:10px;padding-right:11px}.personal_wrapper .orders_wrapper .sale-order-list-change-payment{text-decoration:none;font-size:13px;position:relative;display:inline-block;padding:0 25px 0 0}.personal_wrapper .orders_wrapper .sale-order-list-change-payment:before{content:"";position:absolute;right:5px;top:4px;width:10px;height:6px;background:url(images/arrows.png) 0 -161px no-repeat;z-index:2}.personal_wrapper .orders_wrapper .sale-order-detail-about-order,.personal_wrapper .orders_wrapper .sale-order-detail-payment-options{margin-top:0}.personal_wrapper .orders_wrapper div.sale-order-detail-about-order-inner-container{padding-top:15px;padding-bottom:11px;border:none}.personal_wrapper .orders_wrapper div.sale-order-detail-payment-options-info{padding-top:18px;padding-bottom:22px}.personal_wrapper .orders_wrapper div.sale-order-detail-payment-options-methods,.personal_wrapper .orders_wrapper div.sale-order-detail-payment-options-shipment{padding:25px 0 26px}.personal_wrapper .orders_wrapper .row ul li:before{display:none}.personal_wrapper .orders_wrapper .sale-order-list-top-border{margin:15px 23px 22px;background:#E5E5E5}.personal_wrapper .orders_wrapper .sale-order-list-inner-row:last-of-type{padding-left:29px;padding-right:29px}.personal_wrapper .orders_wrapper .sale-order-list-inner-row:last-of-type .sale-order-list-top-border{margin-left:-14px;margin-right:-14px}.personal_wrapper .orders_wrapper .sale-order-list-inner-row .sale-order-list-cancel-container{float:right}.personal_wrapper .orders_wrapper .sale-order-list-inner-row .sale-order-list-shipment{padding:0 23px}.personal_wrapper .orders_wrapper .sale-order-list-inner-row:last-of-type>div:last-of-type a{background:#fff;color:#ddd!important;border:1px solid #ddd}.personal_wrapper .orders_wrapper .sale-order-payment-change-pp-list{padding:19px 0 0}.personal_wrapper .orders_wrapper .sale-order-payment-change-pp-list .sale-order-payment-change-pp-company{display:inline-block;vertical-align:top;width:50%;padding:2px 10px 15px 0;box-sizing:border-box}.personal_wrapper .orders_wrapper .sale-order-payment-change-pp-list .sale-order-payment-change-pp-company .sale-order-payment-change-pp-company-graf-container{position:relative;padding:0;border:none;border-radius:0;height:auto;cursor:pointer}.personal_wrapper .orders_wrapper .sale-order-payment-change-pp-list .sale-order-payment-change-pp-company .sale-order-payment-change-pp-company-smalltitle{display:block;vertical-align:middle;padding:0;font-size:15px;font-weight:500;line-height:20px;color:#777;text-align:left}.personal_wrapper .orders_wrapper .sale-order-payment-change-pp-list .sale-order-payment-change-pp-company .sale-order-payment-change-pp-company-image+.sale-order-payment-change-pp-company-smalltitle{display:table-cell;padding:0 0 0 20px}.personal_wrapper .orders_wrapper .sale-order-payment-change-pp-list .sale-order-payment-change-pp-company .sale-order-payment-change-pp-company-image{position:relative;display:table-cell;border:1px solid #e5e5e5;width:118px;height:70px;top:auto;right:auto;bottom:auto;left:auto;background-position:center center!important;background-size:auto!important;background-repeat:no-repeat!important;background-color:#fbfbfb}.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-info .sale-order-detail-payment-options-info-image,.sale-order-detail-payment-options-methods-container:before,div.payment-options-methods-row:before,div.payment-options-methods-row:last-child:after{display:none}.personal_wrapper .orders_wrapper .sale-order-list-inner-row>div>a.sale-order-list-cancel-payment{background:0 0;color:#ddd!important;padding-left:0}.personal_wrapper .orders_wrapper .sale-order-list-inner-row>div>a.sale-order-list-cancel-payment:hover{color:#333!important;background:0 0}.bx_my_order_cancel{font-size:13px}.bx_my_order_cancel a:hover{color:#333}.personal_wrapper .orders_wrapper .sale-order-detail-back-to-list-link-down,.personal_wrapper .orders_wrapper .sale-order-detail-back-to-list-link-up{font-weight:600}.personal_wrapper .orders_wrapper .sale-order-detail-general{border:1px solid #e5e5e5}.personal_wrapper .orders_wrapper .sale-order-detail-general-head{border-bottom:1px solid #e5e5e5}.personal_wrapper .orders_wrapper .sale-order-detail-about-order{margin-top:0;padding:0 7px}.personal_wrapper .orders_wrapper .sale-order-detail-about-order-container .sale-order-detail-about-order-title{background:#fff;color:#333;font-size:16px;font-weight:500}.sale-order-detail-about-order-title-element,.sale-order-detail-general-item,.sale-order-detail-payment-options-order-content-title-element,.sale-order-detail-payment-options-shipment-composition-title-element,.sale-order-detail-payment-options-title-element{color:#333;font-size:16px;font-weight:500;font-family:Ubuntu,Arial,Helvetica,sans-serif;margin-left:6px}.personal_wrapper .orders_wrapper .sale-order-detail-about-order-title-element{margin-left:0;margin-top:21px;margin-bottom:2px}.personal_wrapper .orders_wrapper .sale-order-detail-about-order-inner-container-name-title,.sale-order-detail-about-order-inner-container-price-title,.sale-order-detail-about-order-inner-container-status-title{font-size:14px;color:#888;font-family:Ubuntu,Arial,Helvetica,sans-serif}.personal_wrapper .orders_wrapper .sale-order-detail-about-order-inner-container-name-detail,.sale-order-detail-about-order-inner-container-price-detail,.sale-order-detail-about-order-inner-container-status-detail{font-size:15px;color:#333;font-weight:400;font-family:Ubuntu,Arial,Helvetica,sans-serif}.sale-order-detail-about-order-inner-container-price-detail{font-weight:500}.sale-order-detail-about-order-inner-container-name-read-less,.sale-order-detail-about-order-inner-container-name-read-more{font-weight:500;font-size:13px;text-decoration:none;position:relative;padding:0 25px 0 0;border:none}.sale-order-detail-about-order-inner-container-name-read-less:after,.sale-order-detail-about-order-inner-container-name-read-more:after{position:absolute;right:5px;top:7px;width:10px;height:6px;background:url(images/arrows.png) 0 -161px no-repeat;z-index:2}.sale-order-detail-about-order-inner-container-name-read-more:hover:after,.sale-order-detail-show-link:hover:after{background-position:0 -161px}.sale-order-detail-about-order-inner-container-name-read-less:after,.sale-order-detail-about-order-inner-container-name-read-less:hover:after{background-position:-35px -161px}.sale-order-detail-about-order-inner-container-details-title{color:#777;font-weight:500;font-family:Ubuntu,Arial,Helvetica,sans-serif;font-size:15px;border:none;border-top:1px solid #e5e5e5;padding:24px 0 5px;margin-bottom:0}.personal_wrapper .row div.sale-order-detail-about-order-inner-container-details{padding:9px 0 0}.personal_wrapper .sale-order-detail-about-order-inner-container-details-list{margin:0 0 24px}.sale-order-detail-about-order-inner-container-list-item,.sale-order-detail-about-order-inner-container-list-item-element,.sale-order-detail-about-order-inner-container-name-titile,.sale-order-detail-about-order-inner-container-price-title,.sale-order-detail-about-order-inner-container-status-title,.sale-order-detail-payment-options-order-content-item-title,.sale-order-detail-payment-options-shipment-composition-item-title{font-family:Ubuntu,Arial,Helvetica,sans-serif}.sale-order-detail-about-order-inner-container-list-item{color:#888}.sale-order-detail-about-order-inner-container-list-item .sale-order-detail-about-order-inner-container-list-item-element{color:#333;font-size:15px;font-weight:400}.sale-order-detail-about-order-inner-container-list-item-link{font-family:Ubuntu,Arial,Helvetica,sans-serif;font-weight:400}.sale-order-detail-about-order-inner-container-list-item-link:hover{color:#333}.sale-order-detail-payment-options-order-content-title-element,.sale-order-detail-payment-options-shipment-composition-title-element,.sale-order-detail-payment-options-title-element{margin-top:17px;margin-bottom:18px}.sale-order-detail-payment-options-order-content-title,.sale-order-detail-payment-options-shipment-composition-title,.sale-order-detail-payment-options-title{border:1px solid #e5e5e5;border-left-width:0;border-right-width:0}.sale-order-detail-payment-options-inner-container{border:none}.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-info .sale-order-detail-payment-options-info-container{width:100%;padding:3px 22px 0!important}.sale-order-detail-payment-options-info-order-number,.sale-order-detail-payment-options-info-total-price{font-family:Ubuntu,Arial,Helvetica,sans-serif;color:#383838;font-weight:500}.sale-order-detail-payment-options-info-total-price{color:#777;font-weight:400}.sale-order-detail-payment-options-info-total-price span,.sale-order-detail-payment-options-methods-info-total-price .sale-order-detail-sum-number{color:#383838}.personal_wrapper div.payment-options-methods-row{padding:0 7px 0 22px}.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-methods-info.opened{width:83.33333333%}.sale-order-detail-payment-options-methods-image-element,.sale-order-detail-payment-options-shipment-image-element{background-size:auto;border:1px solid #e5e5e5}.personal_wrapper .orders_wrapper .sale-order-detail-about-order-inner-container-status{width:30.3%}.personal_wrapper .orders_wrapper .sale-order-detail-about-order-inner-container-repeat{width:19.66666667%}.personal_wrapper .sale-order-detail-payment-options-methods-info-title,.personal_wrapper .sale-order-detail-payment-options-methods-shipment-list-item-title,.personal_wrapper .sale-order-payment-change-payment-title{font-family:Ubuntu,Arial,Helvetica,sans-serif;font-weight:500;color:#383838;font-size:15px}.sale-order-detail-payment-options-methods-info-total-price{font-family:Ubuntu,Arial,Helvetica,sans-serif;font-weight:400;font-size:13px}.sale-order-detail-hide-link,.sale-order-detail-payment-options-methods-info-change-link,.sale-order-detail-show-link{border:none;font-weight:500;font-size:13px;text-decoration:none;position:relative;padding:3px 25px 0 0;display:inline-block;margin:6px 0 0}.sale-order-detail-hide-link:after,.sale-order-detail-payment-options-methods-info-change-link:after,.sale-order-detail-show-link:after{position:absolute;right:5px;top:7px;width:10px;height:6px;background:url(images/arrows.png) 0 -161px no-repeat;z-index:2}.sale-order-detail-hide-link{display:none}.sale-order-detail-hide-link:after,.sale-order-detail-hide-link:hover:after{background-position:-35px -161px}.personal_wrapper .orders_wrapper div.sale-order-detail-payment-options-methods-template{position:static;opacity:1;display:none}.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-inner-container>.row:first-child div.sale-order-detail-payment-options-shipment{border:none}.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-inner-container .sale-order-detail-payment-options-shipment-container{padding:0 22px}.sale-order-detail-payment-options-shipment>div>div{vertical-align:top}.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment .sale-order-detail-payment-options-shipment-image-container{width:16.66666667%}.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment .sale-order-detail-payment-options-methods-shipment-list{width:66.66666667%}.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-methods-shipment-list-item-link{padding-top:0}.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment-composition-map{width:83.33333333%}.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment-composition-map>.row{margin:0 -1px 0 -7px}.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment-composition-container{border:1px solid #E5E5E5}.sale-order-detail-payment-options-shipment-composition-title{border:none;border-bottom:1px solid #E5E5E5;background:#fbfbfb}.personal_wrapper .sale-order-detail-order-section,.sale-order-detail-order-item-td .sale-order-detail-order-item-imgcontainer{border:none}.sale-order-detail-payment-options-shipment-composition-title .sale-order-detail-payment-options-shipment-composition-title-element{font-size:15px;margin-top:13px;margin-bottom:14px}.personal_wrapper .sale-order-detail-order-section-content.container-fluid{padding:0}.personal_wrapper .sale-order-detail-order-item-td{padding-top:6px;padding-bottom:3px;vertical-align:middle}.personal_wrapper .sale-order-detail-order-item-td-title{color:#999;padding-bottom:4px}.personal_wrapper .sale-order-detail-order-item-td:first-child .sale-order-detail-order-item-td-title{padding-left:21px}.personal_wrapper .sale-order-detail-order-item-properties{padding-top:6px}.sale-order-detail-order-item-td .sale-order-detail-order-item-block .sale-order-detail-order-item-img-block{padding-right:30px}.sale-order-detail-order-item-td .sale-order-detail-order-item-block .sale-order-detail-order-item-img-block+.sale-order-detail-order-item-content{padding:30px 0 0}.sale-order-detail-order-item-td .sale-order-detail-order-item-block a{font-size:13px;color:#383838;font-weight:400}.sale-order-detail-order-item-td .sale-order-detail-order-item-block{padding:0 0 0 22px}.sale-order-detail-payment-options-order-content .sale-order-detail-order-item-tr .sale-order-detail-order-item-properties:nth-child(3),.sale-order-detail-payment-options-order-content .sale-order-detail-order-item-tr .sale-order-detail-order-item-properties:nth-child(5),.sale-order-detail-payment-options-shipment-composition-container .sale-order-detail-order-item-properties,.sale-order-detail-payment-options-shipment-composition-container .sale-order-detail-order-item-td .sale-order-detail-order-item-td-text{text-align:center}.personal_wrapper .sale-order-detail-payment-options-order-content .sale-order-detail-order-item-tr:last-of-type .sale-order-detail-order-item-td{border-bottom:1px solid #e5e5e5}.sale-order-detail-total-payment ul{margin-bottom:0}.personal_wrapper .sale-order-detail-total-payment-list-left-item,.personal_wrapper .sale-order-detail-total-payment-list-right-item{color:#777;font-size:14px;font-family:Ubuntu,Arial,Helvetica,sans-serif;font-weight:400;line-height:20px}.personal_wrapper .sale-order-detail-total-payment-list-left-item:last-of-type,.personal_wrapper .sale-order-detail-total-payment-list-right-item:last-of-type{color:#333;font-size:16px;font-weight:500}.personal_wrapper .sale-personal-account-wallet-container{max-width:100%;background:#fbfbfb;border-bottom:1px solid #E5E5E5}.personal_wrapper .sale-personal-account-wallet-container .sale-personal-account-wallet-title{background:0 0;font-size:12px;color:#888;font-weight:400;font-family:Ubuntu,Arial,Helvetica,sans-serif;padding:18px 43px 8px}.personal_wrapper .sale-personal-account-wallet-container .sale-personal-account-wallet-list-container{background:0 0;color:#333}.personal_wrapper .sale-personal-account-wallet-container .sale-personal-account-wallet-list-item:before{background:url(images/icons_mask.png) -50px -5px no-repeat;width:50px;height:40px;margin:0;top:0;left:0}.personal_wrapper .sale-personal-account-wallet-container .sale-personal-account-wallet-list-item{padding:0 0 24px 70px;margin:0 30px 0 43px;font-size:0;line-height:0}.sale-personal-account-wallet-currency,.sale-personal-account-wallet-sum{float:none;display:inline-block;vertical-align:baseline;padding:0 26px 0 0}.sale-personal-account-wallet-sum{font-size:36px;line-height:40px;color:#333}.sale-personal-account-wallet-currency{font-size:20px;line-height:24px;color:#777}.btn.sale-account-pay-button{font-weight:400;height:auto;line-height:16px;font-family:Ubuntu,Arial,Helvetica,sans-serif}.personal_wrapper .sale-personal-section-account-sub-header{padding:0 20px 0 42px;font-size:18px;color:#333;margin:28px 0 20px}.personal_wrapper .bx-sap{padding:0 20px 38px 42px}.personal_wrapper .bx-sap .sale-acountpay-title{color:#777;margin-bottom:10px}.personal_wrapper .bx-sap .sale-acountpay-title+div{max-width:100%!important;color:#333}.personal_wrapper .bx-sap .sale-acountpay-title+div .form-group div{display:inline-block;vertical-align:middle;margin:0 10px 0 0}.sale-acountpay-fixedpay-list .sale-acountpay-fixedpay-item{margin-right:5px;background:0 0;border:1px solid #ddd;height:28px;line-height:28px}.sale-acountpay-fixedpay-list .sale-acountpay-fixedpay-item:hover{background:#ddd;color:#fff}.personal_wrapper .sale-acountpay-block{margin-bottom:7px}.personal_wrapper .sale-acountpay-pp.row>div{width:100%;padding:0;font-size:0}.bx-sap .row{margin-left:-7px;margin-right:-7px}.bx-sap .container-fluid>.row>.col-xs-12,.bx-sap .sale-acountpay-block{padding:7px}.sale-acountpay-block .sale-acountpay-title{margin-top:3px}.sale-acountpay-block .sale-acountpay-pp div .sale-acountpay-pp-company{display:inline-block;vertical-align:top;width:50%;padding:2px 7px 15px;box-sizing:border-box}.bx-sap .sale-acountpay-pp-company-graf-container{position:relative;padding:0;border:1px solid #fbfbfb;border-radius:0;width:120px;height:72px;background:#fbfbfb;display:table-cell;vertical-align:middle}.bx-sap .sale-acountpay-pp-company-smalltitle{display:table-cell;vertical-align:middle;padding:0 0 0 20px;font-size:15px;font-weight:500;line-height:20px;color:#777;text-align:left}.bx-sap .button,.personal_wrapper .bx-sap form input[type=submit]{font-size:14px;text-transform:none;padding:8px 12px 9px}.bx-sap .sale-acountpay-pp-company:not(.bx-selected):hover .sale-acountpay-pp-company-graf-container,.bx-sap .sale-acountpay-pp-company:not(.bx-selected):hover .sale-acountpay-pp-company-smalltitle{cursor:pointer}.bx-selected .sale-acountpay-pp-company-smalltitle{color:#333}.sale-acountpay-pp-company-graf-container .sale-acountpay-pp-company-image{background-size:auto}.bx-sap .sale-acountpay-pp-company-graf-container .sale-acountpay-pp-company-image{position:relative;border:1px solid #e5e5e5;width:118px;height:70px;top:auto;right:auto;bottom:auto;left:auto;background-position:center center!important;background-size:auto!important;background-repeat:no-repeat!important}.bx-sap .sale-acountpay-pp-company-graf-container:before{box-sizing:border-box;content:"";position:absolute;top:7px;left:7px;width:20px;height:20px;border:1px solid #e5e5e5;background:#FFF;border-radius:100%;z-index:1}.bx-sap .sale-acountpay-pp-company.bx-selected .sale-acountpay-pp-company-graf-container:after{box-sizing:border-box;content:"";position:absolute;left:12px;top:13px;width:10px;height:8px;background:url(images/order_ext.png) -64px -9px no-repeat;z-index:2}.bx-sap .sale-acountpay-pp-company-graf-container input{display:none}.personal_wrapper form[name=ShopForm] input[type=submit]{margin-right:10px}.sale-order-payment-change-pp.row .sale-paysystem-wrapper{margin:0}.sale-paysystem-wrapper span.tablebodytext{display:block;padding:0 0 20px}.sale-order-payment-change-pp.row .sale-paysystem-wrapper span.tablebodytext,.sale-order-payment-change-pp.row form{font-size:13px}.sale-paysystem-wrapper{border-color:#e5e5e5}.personal_wrapper .orders_wrapper .sale-order-detail-active-event .sale-order-detail-payment-options-methods-template{position:relative;left:0;opacity:1;display:block}.personal_wrapper .orders_wrapper .sale-order-detail-active-event .sale-order-detail-payment-options-methods-template .sale-paysystem-wrapper{border-width:0;padding-left:0;padding-bottom:0;padding-top:10px}.personal_wrapper .sale-paysystem-close{top:16px}.sale-personal-profile-list-container{width:100%;max-width:100%;margin-bottom:20px}.sale-personal-profile-list-container>tbody>tr>td,.sale-personal-profile-list-container>tbody>tr>th,.sale-personal-profile-list-container>tfoot>tr>th,.sale-personal-profile-list-container>thead>tr>td{padding:21px 22px;line-height:1.42857143;vertical-align:top;border-top:1px solid #e5e5e5;text-align:left;font-size:13px;color:#999;font-weight:400}.sale-personal-profile-list-container>tbody>tr>th{padding:9px 22px 10px}.sale-personal-profile-list-container>tbody>tr>th:first-child{border-left:1px solid #e5e5e5}.sale-personal-profile-list-container>tbody>tr>th:last-child{border-right:1px solid #e5e5e5}.sale-personal-profile-list-container>tbody>tr>td:nth-child(3){color:#383838}.sale-personal-profile-list-container a i{vertical-align:top;width:10px;height:10px;display:none}input.form-control{margin-bottom:0}.sale-profile-detail-form .form-group{margin-bottom:17px}.location-block-wrapper .dropdown-block.bx-ui-slst-input-block:hover,.sale-profile-detail-form .form-control:hover{box-shadow:none;border-color:#E5E5E5}.sale-personal-profile-list-actions>a{padding:0 17px 0 0}.sale-personal-profile-list-actions>a:last-of-type{padding-right:0}.sale-personal-profile-list-container>tbody>tr:hover{background:#f7f7f7}.sale-personal-profile-list-container>tbody>tr:hover>td:first-child{border-left-color:#E5E5E5}.sale-personal-profile-list-container>tbody>tr>td:first-child{border-left:1px solid #fff}.sale-personal-profile-list-container>tbody>tr:hover>td:last-child{border-right-color:#E5E5E5}.sale-personal-profile-list-container>tbody>tr>td:last-child{border-right:1px solid #fff}.sale-personal-profile-list-container>tbody>tr:last-child>td{border-bottom:1px solid #E5E5E5}.personal_wrapper .sale-profile-detail-link-list a{font-weight:600;position:relative;padding:0 0 0 24px}.personal_wrapper .sale-profile-detail-link-list a:before{content:"";position:absolute;top:2px;left:0;width:12px;height:10px;background:url(images/return_mask.png) no-repeat #ddd;z-index:1}.personal_wrapper .sale-profile-detail-link-list a:hover:before{background-color:#1d1a1a}.personal_wrapper .sale-profile-detail-form{border:1px solid #e5e5e5;padding:15px;box-sizing:border-box}.personal_wrapper .sale-profile-detail-form .sale-personal-profile-detail-form-title-row{margin:0;width:100%}.personal_wrapper .sale-profile-detail-form .sale-personal-profile-detail-form-title-row h4{border:none}.personal_wrapper .sale-personal-profile-detail-form-title-row h4{font-size:18px;line-height:22px;margin-bottom:14px}.sale-profile-detail-form .form-group>*{display:block;width:100%;text-align:left;padding:0 15px;box-sizing:border-box}.sale-profile-detail-form .form-group>label{color:#888;font-size:13px;margin:0 0 6px}.sale-profile-detail-form .form-group>div{color:#383838}.personal_wrapper .sale-profile-detail-form .sale-personal-profile-btn-block{;width:100%;font-size: 0;margin:0px;}.personal_wrapper .sale-profile-detail-form .sale-personal-profile-btn-block>input[type=submit]{margin:0 20px 20px 0}.personal_wrapper input[type=submit]:last-of-type{background:#fff;color:#ddd!important;border:1px solid #ddd}.personal_wrapper .sale-order-payment-change-pp input[type=submit]{background:#ddd;color:#fff!important;border:1px solid}.personal_wrapper .sale-personal-profile-btn-block input[type=submit]{margin:0 1px 0 0}@media print{.print table,.print td,.print tr{page-break-after:auto}.print div.error{font-size:8px!important}.print td,.print tr{page-break-inside:avoid}.print thead{display:table-header-group}.print tfoot{display:table-footer-group}}@media (min-width:1024px){.start_promo .item{border-bottom-width:1px}}.bx-touch .bx_ordercart .bx_sort_container span{display:inline-block}.bx-touch .bx_ordercart .bx_sort_container>span{display:none}.bx-touch #basket_form .bx_ordercart .bx_sort_container a{width:auto;margin-bottom:0;border:none;padding:7px 0 6px;margin-right:15px}@media (max-width:767px){.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_stick{left:-16px}}109  315117|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/template_styles.css|94a3e3ee*{margin:0;padding:0;box-sizing:content-box;}
html{width:100%;}
header, nav, section, article, aside, footer{display:block;}
div[id^=wait_comp], .bx-core-waitwindow{display:none;}
.right_block ul, .right_block ol{ margin:0 0 27px;}
.right_block ul li:before , .right_block ol li:before{padding:0px;margin-left:0px;width:20px;display:inline-block;vertical-align:top;*display:inline;zoom:1;position:absolute;top:0px;left:0px;}
.right_block ul li, .right_block ol li{margin:0 0 4px;padding-left:20px;position:relative;}

#panel + div[id*=bx_incl_area]{min-height: 0px !important;}

.print body{background:#fff !important;}

.title_block{display:inline-block;margin:0px 38px 0px 0px;font-size:20px;color:#1d2029;line-height:30px;font-weight:500;}
.icon_more{text-decoration:none;font-size:10px;text-transform:uppercase;background:url('images/arrows.png') -1px -78px no-repeat;padding:0px 0px 0px 23px;margin:10px 0px 0px;display:inline-block;}

a.back{font-weight:600;}
*:hover{transition:background-color ease 0.1s;}
a:hover{text-decoration:none !important;}
.transition_bg{transition:background-color ease 0.5s;}

/*common*/
.wrapper, .wrapper_inner, .wrapp{box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;position:relative;zoom:1;z-index:2;}

.wrapp{max-width:1000px;padding:0 10px;margin:0 auto;}
.wrapper_inner{padding:0 24px;max-width:1208px;margin:0 auto;background: #fff;}
.wrapper_inner.wides{max-width:1172px;}
.wrapper_inner.wides_big{max-width:1182px;}
.wrapper_inner1.wides{margin: 0px -10px;}
.wrapper_inner1.wides.float_banners{margin: 0px 0px 0px;}

.left_block{width: 220px;float: left;position: relative;zoom: 1;z-index: 390;padding-top:0px;}
.right_block{padding-left: 244px;overflow:visible;position:relative;}

.news-list{overflow: hidden;}

#content  .right_block.catalog .catalog_list, #content  .right_block.catalog .catalog_table{ left: 0; right: -20px; position: relative; zoom: 1; }
#content .right_block.catalog .catalog_block{margin-top: 20px;}
#content .right_block.catalog .catalog_section_list{ margin-left: 11px; }
.clearfix{clear:both;}

.rows_block{font-size:0px;margin:0px -6px;}
.rows_block:after, .rows_block:before {display: table;content: " ";}
.rows_block:after{clear:both;}
.rows_block *{box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;}
.rows_block .item_block{display:inline-block;vertical-align:top;padding:6px 6px;}
.rows_block .col-80{width:80%;}
.rows_block .col-75{width:75%;}
.rows_block .col-66{width:66.66%;}
.rows_block .col-5{width:20%;}
.rows_block .col-4{width:25%;}
.rows_block .col-3{width:33.33%;}
.rows_block .col-2{width:50%;}
.rows_block .col-1{width:100%;}

.hover{cursor:pointer;}

.grey_bg{background:#f7f7f9;}
hr{padding:0px;margin:0px;height:1px;}
hr.white{background:#fff;}
hr.black{background:#000;}
hr.grey{background:#E5E5E5;}

.wrapper_block{position:relative;clear:both;}
.top_border{border-top:1px solid #e5e5e5;}

font.notetext{color:#333;}

.wrap_md, .wrap_md_row {font-size:0px;margin:0px;}
.wrap_md_row{margin:0px -15px;}
.md-75, .md-66, .md-33, .md-25, .md-50, .wrap_md .news_wrap, .wrap_md .subscribe_wrap, .wrap_md .iblock{display:inline-block;vertical-align:top;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;font-size:13px;}
.md-75{width:75%;}
.md-66{width:66.66%;}
.md-50{width:50%;}
.md-33{width:33.33%;}
.md-25{width:25%;}
.wrap_md_row > div{padding:0px 15px;}

.wrap_md .img img{max-width:100%;}
.wrap_md .big{padding:0px 0px 0px 20px;}
.wrap_md .big p{font-size:14px;color:#333333;}
.wrap_md .big .title_block{margin-bottom: 8px;}

.border-radius{-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;}
.box-sizing{box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;}
.hidden{display:none !important;visibility:hidden;}
.hidden_block{visibility:hidden;opacity:0;}
.display-block{display:block !important;visibility:visible;}
.bold{font-weight:600;}
.f-right{float:right;}
.f-left {float:left;}
.clear{width:100%;clear:both;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;}
.clearfix:after{content:".";display:block;height:0;clear:both;visibility:hidden;}

.top_block{font-size:0px;margin:0px 0px 24px;padding:42px 0px 0px;}
.top_block a{font-size:12px;text-decoration:none;}

#header{margin:-1px 0px 7px;padding:16px 0px 18px;z-index:100;right:0;left:0;/*border-bottom:1px solid #e5e5e5;*/}
.header_wrap #header{padding:0px !important;margin: -1px 0px 0px !important;}
.basket_normal .header_wrap #header .middle-h-row{height:58px;}
.header_wrap #header > .wrapper_inner{padding-top: 16px;padding-bottom: 18px;}
.basket_normal .header_wrap #header > .wrapper_inner{padding-top: 6px;z-index:4;}
.basket_fly .header_wrap #header > .wrapper_inner{z-index:9;}
.has_menu #header{margin-bottom:0px;padding-bottom:16px;}
.has_menu.m_color_colored #header{padding-bottom:15px;}
.head_type_1 #header{border-bottom:1px solid #e5e5e5;}
.middle{position:relative;float:left;width: 100%;}
.wide_page .middle{float:none;}
.middle:after{content:'';clear:both;display:table;}

#footer{position:relative;zoom:1;z-index:0;/*background:#f6f6f7;*/clear: both;z-index:1;}

.flexslider .wrapper_inner{background:none;}

.bg_image_site{display:block;opacity:0;width:100%;height:100%;min-height:100%;min-width:100%;position: absolute;top: 0px;left:0px;right:0px;z-index:0;background-position:top center;background-repeat:no-repeat;}
.bg_image_site.fixed{position:fixed;}
.bg_image_site.opacity{transition:opacity 0.4s ease;}

/* INPUTS */
input::-webkit-input-placeholder, input::-moz-input-placeholder, input::-ms-input-placeholder, input::-o-input-placeholder{color:#6a6a6a;}
input[type="text"]:focus, input[type="password"]:focus, input[type="email"]:focus, textarea:focus, select:focus{outline:none;}
input[type="text"], input[type="password"], input[type="email"], select, textarea{
	box-sizing:border-box;
	-moz-box-sizing:border-box;
	-o-box-sizing:border-box;
	-webkit-box-sizing:border-box;
	background:#f7f7f7;
	border:1px solid #eaebec;
	border-radius:2px;
	box-shadow:none;
	color:#383838;
	height:auto;
	font-size:13px;
	padding:8px 13px 7px;
	width:100%;

}
textarea{resize:none;min-height:90px;}
input[readonly], select[readonly], textarea[readonly]{background:#FFF;}
input:not(.button){line-height:20px;}
input.big{padding:10px 13px 9px;}
input.grey{background:#eeeeee;}
input.medium{padding:8px 13px 7px;}
input.error, textarea.error{border-color:#e62222;background:#ffefef;}
.bxml-dialog input[type="text"]{width:auto;padding:initial;border-color:initial;}
.bx-ie input[type="text"], .bx-ie  input[type="password"], .bx-ie  input[type="email"]{padding-bottom:10px;}
.bx-ie .bx-sls .bx-ui-sls-fake, .bx-ie .bx-sls .bx-ui-sls-route{padding-bottom:0px;}
form[name="bx_auth_services"] .form-control input{margin:5px 0px 20px;}
form[name="bx_auth_services"] .form-control span{display: inline-block; font-size: 12px; padding: 0 10px 0 0; vertical-align: top;}
form[name="bx_auth_servicesform_inline"] #bx-auth-services > div span{display: inline-block; font-size: 12px; padding: 0 10px 0 0; vertical-align: top;}

/* SCROLL TO TOP */
a.scroll-to-top{-moz-transition:opacity 0.3s;-ms-transition:opacity 0.3s;-o-transition:opacity 0.3s;-webkit-transition:opacity 0.3s;transition:opacity 0.3s;opacity:0;position:fixed;text-align:center;text-decoration:none;display:block;background:#404040 url("images/scroll.png") no-repeat scroll center 14px;width:44px;height:44px;border-radius:50%;right:75px;left:inherit;bottom:55px;opacity:0;z-index:1040;cursor:pointer;}
a.scroll-to-top.visible{opacity:1;}
a.scroll-to-top.ROUND_WHITE, a.scroll-to-top.RECT_WHITE{background-color:#fff;}
a.scroll-to-top.ROUND_GREY, a.scroll-to-top.RECT_GREY{background-color:#e3e3e3;}
a.scroll-to-top.RECT_COLOR, a.scroll-to-top.RECT_GREY, a.scroll-to-top.RECT_WHITE{border-radius:2px;}
a.scroll-to-top.TOUCH{border-radius:2px 0 0 2px;width:50px;height:50px;right:0;}

a.scroll-to-top.ROUND_COLOR, a.scroll-to-top.RECT_COLOR{background-position:center 14px;}
a.scroll-to-top.ROUND_WHITE, a.scroll-to-top.RECT_WHITE, a.scroll-to-top.ROUND_GREY, a.scroll-to-top.RECT_GREY{background-position:center -70px;}
a.scroll-to-top.RECT_COLOR.TOUCH{background-position:center 17px;}
a.scroll-to-top.RECT_GREY.TOUCH, a.scroll-to-top.RECT_WHITE.TOUCH{background-position:center -67px;}

/* FORMS */
form .star, .order-checkout .sof-req{font-size:12px;font-weight:normal;line-height:0;margin:0 0 0 4px;position:relative;color:#e62222;}
.form.ASK{display:none;}
.popup .form.ASK, .form_block .form.ASK{display:block;}
.form-control{position:relative;margin-bottom:19px;}
.form-control label{display:block;font-size:13px;margin-bottom:6px;}
.form .form_body{margin:0 0 9px;position:relative;}
.form .form_desc{margin-bottom:15px;}
.form .form_result{margin-bottom:30px;}
.form .form_result, .form .form_result.success *{color:#333;}
.form  .form_result > *, .form  .form_desc > *{margin:0;}
.form .form_footer{margin:0 0 23px 0;}
.form .form_footer .button + .button{margin-left:13px;}
.form  .form_left{width:56%;float:left;}
.form  .form_right{left:56%;padding-left:30px;position:absolute;right:0;}
.form.b .form_left, .form.b .form_right{float:none;left:inherit;margin:0;max-width:inherit;padding:0;position:relative;right:inherit;width:100%;}
.form textarea{min-height:193px;}
label.error{color:#e62222 !important;font-size:10px;position:absolute;top:0;right:0px;font-weight: 400;}
.h label.error{display:none !important;}
.popup .form .form_head{border-bottom:2px solid;padding:34px 75px 35px 35px;}
.popup .form .form_head h2{margin:0;}
.popup  .form .form_desc{margin-bottom:0;margin-top:15px;}
.popup .form .form_result{margin:0;padding:30px 35px 0;}
.popup .form .form_body{margin:0;padding:29px 35px 6px;}
.popup .form .form_footer{padding:0 35px 12px;}
.popup.show .form .form_result{padding-bottom:30px;}
.error_block_auth{color:#e62222 !important;font-size:12px;}

/* CAPTCHA */
.captcha-row{position:relative;max-width:418px;}
.captcha-row   .captcha_input{bottom:0;height:59px;left:216px;max-width:184px;position:absolute;right:0;}
.captcha-row   .captcha_input label.error{white-space:nowrap;}
.captcha-row   .captcha_input input[name="captcha_word"]{bottom:0;position:absolute;}
.captcha-row   .captcha_image{height:37px;position:relative;width:217px;}
.captcha-row .captcha_image img{height:37px;border:none;vertical-align:top;width:100%;width:180px;}
.captcha_reload{border:1px solid transparent;cursor:pointer;height:35px;left:179px;position:absolute;top:0;width:36px;}
.captcha_reload::before, .captcha_reload::after{content:"";display:block;position:absolute;}
.captcha_reload::before{border-radius:25px;height:25px;left:5px;top:5px;width:25px;}
.captcha_reload::after{background:rgba(0, 0, 0, 0) url("images/icons_wish.png") repeat scroll -67px -82px;height:13px;left:10px;top:11px;transition:background 0.7s ease-in-out 0s;width:15px;}
.captcha_reload:hover:before{background:#383838;}
.captcha_reload.loading:after{-webkit-animation:spinner .5s linear infinite !important;animation:spinner .5s linear infinite !important;-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d; -ms-transform-style:preserve-3d; -o-transform-style:preserve-3d;transform-style:preserve-3d;}
.captcha_reload:hover:after{-webkit-animation:spinner .5s ease-out 1;animation:spinner .5s ease 1;-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d; -ms-transform-style:preserve-3d;-o-transform-style:preserve-3d;transform-style:preserve-3d;}
.captcha-row.b .captcha_input, .captcha-row.b .captcha_image{height:37px;left:inherit;margin:0;max-width:inherit;position:relative;right:inherit;}
.captcha-row.b .captcha_input label.error{top:-68px;}
.captcha-row.b .captcha_image{margin-bottom:9px;}
.captcha-row .captcha_image .captcha_reload{right:0;text-indent:-9999px;}

/* FORMS */
/*colors and bg*/
b, strong, .popup .popup-intro .pop-up-title, .registraion-page .top p, .basket_popup_wrapp .item-title .one-item, .basket_popup_wrapp .item-title .cost-cell, .basket_sort ul.tabs li span, .module-cart table td.name-cell div[class^=bx_item_detail_] .titles, .item-title  .props .item_prop .value, .module-pagination .nums a, .no_products, .bx_compare .prop_title_table .data_table_props tr td:first-child, .catalog_detail .set_wrapp .title, .catalog_detail .bx_item_set_hor_container_big .title, .bx_modal_body .item_block_title, .props_block .char_value, .char_name .hint .icon i, .bx_filter_container_title .hint .hint_icon i, .location-block-wrapper .bx-sls .bx-ui-sls-fake, .location-block-wrapper .bx-sls .bx-ui-sls-route, .bx_order_make .bx_description .name, h4.hover:hover, .filter_block  ul li span, .module-orders-list tbody td, .jobs_wrapp .item .salary, .medium, .row_values .wrap_weight {color:#383838;}
.module-cart tfoot td .item_title, .bottom.middle td > .coupon .coupon-t, .module-cart .row_values .price, .module-cart table tr td.count-cell, .sort_header .sort_filter a.current, .sort_header .sort_filter a:hover, .bx_filter_vertical .bx_filter_block label:hover span, .bx_filter_vertical .bx_filter_block input:checked+ label span, .bx_filter .bx_filter_select_text, .bx_filter_vertical input[type="checkbox"] + label.sku span, .bx_filter_select_popup ul li label, .common_select *, .sku_props .bx_item_detail_size ul li, .catalog_detail .stock_board .title, .filter label span, .reviews-post-table .reviews-text, .forum-quote tbody tr td a, .reviews-header-title a, .stores_block .stores_text_wrapp, .coupons_list .bx_ordercart_coupon, .basket_wrapp table tbody td, .border_block_wide table td, .colored_table tbody tr td{color:#373737;}

a:hover, .link:hover, .header_wrap .top-h-row .menu li > a:hover, .top-h-row .menu li.current > a, .phones .phone_wrap a, .phones .order_wrap_btn:hover, .avtorization-call.enter, .main-nav ul.menu > li > a, ul.mini-menu li a, body .main-nav .menu > li.current > a, .white #header .catalog_menu ul.menu > li a, ul.menu .child li.menu_title a, ul.menu .child li.menu_item a:hover, #header .catalog_menu ul.menu > li > a, #header .catalog_menu ul.menu > li.current > a, .wrapper.has_menu .white #header .catalog_menu ul.menu > li:hover > a, body .white #header ul.menu li .child.submenu .child_wrapp a:hover, body .wrapper.has_menu #header ul.menu li .child.submenu .child_wrapp a:not(.title):hover, ul.menu li .depth3 a.title:hover, #header .wrapper_middle_menu .menu > li .child.submenu .child_wrapp a.current:not(.title), #header .menu > li .child_wrapp a.current:not(.title), body #header ul.menu li .child.submenu.line .child_wrapp > a, .search_middle_block .middle_form .noborder, .basket_wrapp .wraps_icon_block .count a, .basket_wrapp .wraps_icon_block .count .text, .basket_wrapp .basket_block .title, .cost.prices .price, .sale_block .text, .sale_block .value, .news .item .info .date, .stores .stores_list .item a:hover span, .footer_top .sblock .wrap_more_text, .footer_top .sblock .wrap_more_text div, .footer_bottom .submenu_top .menu_item a, .img_block_capcha .reload:hover, .form-control .forgot:hover, #header .basket_fly .basket_title, .basket_sort ul.tabs li.cur span, .basket_sort ul.tabs li:hover .wrap_li > span, .basket_sort ul.tabs li:hover .wrap_li > span *, .module-cart .name-cell a:hover, .basket_sort ul.tabs li.cur .wrap_li > span, .basket_sort ul.tabs li.cur .wrap_li > span *, .basket_sort ul.tabs li .wrap_li > span *, .section_item_inner .section_info ul li a:hover, .bx_filter .bx_filter_popup_result a, .catalog_item:hover .item-title a, .item-title a:hover, li.item:hover a, .item_wrap:hover .item-title a, .view_sale_block .values, .more_text_ajax:hover, .bx_compare .compare_view .item_block:hover a, .item-stock .store_link:hover, .set_block .item:hover .item_info a, .item .date_small, .articles-list.news .item:hover .item-title a, .jobs_wrapp .item .name tr:hover .link, .basket_wrapp .empty_cart:not(.bcart) .wraps_icon_block .count span a, .basket_wrapp .basket_empty .wraps_icon_block.basket .count span, .basket_wrapp .basket_fly .basket_count.empty .wraps_icon_block.basket .count span{color:#1d2029;}
ul.menu .see_more, ul.menu .see_more a, a.dark_link{color:#1d2029 !important;}

.h_color_colored .header_wrap #header, .h_color_white .header_wrap #header .middle-h-row .logo_wrapp .logo a, .colored #header .catalog_menu ul.menu > li, .module-cart .remove-cell a:hover, .cart_shell .remove-cell a:hover, .bx_item_set_hor .bx_item_set_hor_item a.remove, .start_promo .item i.title span, .start_promo .item p span, .block_wr.dark, .stores .all_map, .registraion-page .top p:after, .more_text_ajax:before, .captcha_reload:before, .left_block .internal_sections_list .child_wrapp ul.child li.cur:after, .left_block .internal_sections_list .child_wrapp ul.child li:hover:after, .left_block .internal_sections_list li.cur, .left_block .internal_sections_list li:hover, .left_block .internal_sections_list .title .inner_block:before, .bx_filter .bx_filter_popup_result{background-color:#ddd;}

.top-h-row .menu li a, .cost.prices .price_name, .news .item .info .preview, .form-control label, .social_block  .row .title, .module-cart thead tr, .count-cell div.error, .module-cart table td.name-cell div[class^=bx_item_detail_] .values, .item-title  .props .item_prop .title, .bx_filter_vertical .bx_filter_block label span, .display_list .list_item .preview_text, .display_list .list_item  .props_list td, .articles-list .item .right-data .preview-text, .bx_filter_vertical .bx_filter_block label:hover span, .catalog_detail .stock_board .txt, .file_type .description, .catalog_detail .form_wr, .reviews-post-reply-buttons a, .reviews-post-table, .bx_order_make .bx_block.r1x3.pt8, .bx_order_make .float .bx_description .name, .module-order-history .module-orders-list td.drop-cell .item-shell thead td, .module-order-history .order_property.d td, .orderdetail .module-orders-list.colored tbody td:first-child, .soc-avt, .module-cart table td.name-cell .item_props .item_prop .property_value, .colored_table thead tr{color:#888888;}

.header_wrap.colored .top-h-row .menu li a, .stores .stores_list .item .store_text .value, #footer  .copyright, #footer  .copyright *, .footer_bottom .all_menu_block ul li a{color:#545454;}
.header_wrap.colored .main-nav ul.menu > li > a{color:#fff;}
.item-stock, .bx_compare .compare_view.data_table_props td, .catalog_detail .like_icons  > div, .info_item .top_info .article, .share_wrapp .text.button , .share_wrapp .text.button:hover{color:#6d6d6d;}

/* the most common styles are sorted for quick changes */
table.title-search-result .price, .card_popup_frame.popup .total_wrapp, .module_products_list .price-cell .price,
.compare_wrapp a.compare_link, .module-cart .colored tfoot td.row_values, .module-cart .summ-cell,
.module-cart .summ-cell *, .catalog_detail .availability-row .value a, .catalog_detail a.wish_item .value,
.catalog_detail a.compare_item  .value, ul.tabs li.cur:hover span,
ul.tabs li:active span, .module_products_list .basket_button.read_more span,
ul.mini-menu li a, .top-h-row   .phone span, .top-h-row  .phone span a, ul.tabs li span,
.compare_button span, .left_block .internal_sections_list .title a, .btn_big, .catalog_detail .bx_item_set_hor_container_big .total_wrapp .total_title .price,
.bx_modal_container .bx_modal_small_title, .card_popup_frame.popup .basket_empty *{color:#1d2029;}
.filter_button span, .catalog_detail .stock_board .title, .module_products_list .basket_button.to-cart span,
.module_products_list .basket_button.to-subscribe span, .module_products_list .basket_button.to-order span, table.colored td.name, .front_slider .price, .page_not_found td.description .title404,
.popup-window-titlebar .popup-window-top-row .popup-window-center-column span div, #header .basket_fly .opener .count{color:#212121;}

#header .catalog_menu ul.menu.full.opened > li:not(.current):hover a, #header ul.menu.full.opened > li:not(.current):hover a, #header ul.menu.adaptive > li a, .specials_slider.product_slider .basket_button.in-cart span{color:#fff;}

.display_list .list_item  .props_list td, .smartfilter, .smartfilter input, .catalog_detail .stock_board .txt, .index_bottom .info_column .about_column, .header-cart-block .cart .summ, .header-cart-block .cart .delay_link{color:#636363;}

.show_number, .show_number *, .module-cart [data-id="total_buttons"] .description, .module-pagination .nums a, .catalog_detail .bx_item_set_hor_container_big .total_wrapp .total_title, .display_list .availability-row .value{color:#777;}
.catalog_detail .element_detail_text, .tabs_content li.video{	color:#7e7e7e;}
.tooltip .tooltip_close:hover{	color:#333;}
.display_list .available_block, .display_list .noavailable_block{	color:#888;}
.module_products_list .price-cell .price.discount, .module-cart .cost-cell .discount, .module-cart .cost-cell .discount strike,
.module-cart .count-cell .measure, .catalog_detail .set_wrapp .item .price.detail, .bx_item_set_hor .bx_item_set_hor_item .price.detail{color:#999;}
.top-h-row .h-user-block .have-user a.exit, .top-h-row .h-user-block .have-user a.exit span, .top-h-row .menu li a{color:#919191;}
#footer  .copyright .grey{color:#a0a0a0;}
.front_slider .price.discount{color:#adadad;}
form div.r div.error, .order-checkout .sof-req, .pay-status-cell.not_payed{color:#cb0000;}
.basket_button:hover, .button30:hover, .basket_button:hover span, .button22:hover span, .button30:hover span, .compare_button:hover span, .filter_button:hover span,
.button30.fast_order span, .button30.back_button span, .button30.grey span, .bx_filter_container_title .hint .hint_icon:hover, .popup .soc-avt .row a:hover,
.popup .bx-auth-service-form input[type='submit']:hover, #bx_auth_servform input[type=submit]:hover{color:#fff;}

/* borders */
a.avtorization-call.enter:hover, .pseudo:hover, .articles-list .item:hover .item-title a, .articles-list .item .item-title a:hover{border-bottom-color:#919191;}
.props_table td{border-bottom:1px dotted #b4b4b4;}

.staff_wrapp .item .contacts, .question-list , .detail_picture_block .picture_description,
.authorization-cols .col.authorization .soc-avt, .popup .form-description-wrapp, .popup .form_description, .basket_fly .module-cart table.colored tbody td, #header .middle-h-row form.basket_wrapp{border-top:1px solid #e7e7e7;}
table.colored td, .catalog_detail hr, .viewed_products_column .view-list, .ask_small_block .ask_btn_block, .popup .form-description-wrapp, .popup .form_description,
#order_form_div .title , #order_form_div hr, #order_form_div form .title, #order_form_div .sale_order_table.props td, .differences_table td, .basket_fly li[item-section="AnDelCanBuy"] .module-cart table.colored tbody,
#header .basket_fly li[item-section="AnDelCanBuy"] .module-cart .colored tfoot td.total_wrapp{border-bottom:1px solid #e7e7e7;}
table.offers_table td{border-bottom: 0 none;border-top:1px solid #e7e7e7;}
table.colored tr.nb td{border-bottom:none;}
.module-cart .colored tbody, .module-cart .colored tfoot{border-left:1px solid #e7e7e7;border-right:1px solid #e7e7e7;border-bottom:1px solid #e7e7e7;}
.viewed_products_column .view-item, .module-orders-list td.drop-cell{border-left:1px solid #e7e7e7;border-right:1px solid #e7e7e7;}
.module-order-history .module-orders-list .tr-d:hover td{border-top:1px solid #e7e7e7;}
.module-order-history .module-orders-list .tr-d:hover td.item-name-cell, .module-order-history .module-orders-list .tr-d.opened td.item-name-cell{border-left:1px solid #e7e7e7;}
.module-order-history .module-orders-list .tr-d:hover td.order-status-cell, .module-order-history .module-orders-list .tr-d.opened td.order-status-cell,
.module-cart .colored tfoot tr[data-id="total_buttons"] td .basket_update{border-right:1px solid #e7e7e7;}

/* backgrounds */
.jobs_wrapp .item span.icon, .staff_wrapp .section .icon{background:#eef1f1;}
.catalog_detail .tabs.main_tabs > li{background:#f2f2f2;}
table.colored.item-shell thead td, .popup .form-description-wrapp, .differences tr.hovered:hover, .search-page form{background:#fafafa;}
body, .adaptive_filter{background:#fff;}
body{background:#f6f6f7;}
#footer .phone .icon{background:#fff;}
.item_slider ul.slides li {background:#fff;}
.item_slider .slides a.line_link{cursor:default;}
.item_slider .slides li.current:before{display:none;}
.wrapper.basket_normal #header .basket_fly{display:none;}
#header .basket_fly{background:#fff;box-shadow:rgba(44, 44, 44, 0.4) 0px 6px 18px;-moz-box-shadow:rgba(44, 44, 44, 0.4) 0px 6px 18px;-webkit-box-shadow:rgba(44, 44, 44, 0.4) 0px 6px 18px;min-height:283px;}
#header .basket_fly:not(.loaded){background:url('images/waiter.gif') no-repeat center center #fff;}
table.title-search-result td.title-search-all{background:#fff !important;}

.header-cart-block .cart.empty_cart > span.icon{
	background:#e9e9e9;
	background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2U5ZTllOSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNkNWQ1ZDUiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
	background:-moz-linear-gradient(top,  #e9e9e9 0%, #d5d5d5 100%);
	background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,#e9e9e9), color-stop(100%,#d5d5d5));
	background:-webkit-linear-gradient(top,  #e9e9e9 0%,#d5d5d5 100%);
	background:-o-linear-gradient(top,  #e9e9e9 0%,#d5d5d5 100%);
	background:-ms-linear-gradient(top,  #e9e9e9 0%,#d5d5d5 100%);
	background:linear-gradient(to bottom,  #e9e9e9 0%,#d5d5d5 100%);
	filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#e9e9e9', endColorstr='#d5d5d5',GradientType=0 );
	border-bottom:1px solid #cacaca;
}
.popup .popup-intro.grey{
	border-bottom:1px solid #bfbfbf;
	background:#e9e9e9;
	background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2U5ZTllOSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNkNWQ1ZDUiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
	background:-moz-linear-gradient(top,  #e9e9e9 0%, #d5d5d5 100%);
	background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,#e9e9e9), color-stop(100%,#d5d5d5));
	background:-webkit-linear-gradient(top,  #e9e9e9 0%,#d5d5d5 100%);
	background:-o-linear-gradient(top,  #e9e9e9 0%,#d5d5d5 100%);
	background:-ms-linear-gradient(top,  #e9e9e9 0%,#d5d5d5 100%);
	background:linear-gradient(to bottom,  #e9e9e9 0%,#d5d5d5 100%);
	filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#e9e9e9', endColorstr='#d5d5d5',GradientType=0 );
}

.module-cart .colored tfoot tr[data-id="total_buttons"] td .top_shadow{box-shadow:0 1px 2px #e7e7e7 inset;-moz-box-shadow:0 1px 2px #e7e7e7 inset;-o-box-shadow:0 1px 2px #e7e7e7 inset;-webkit-box-shadow:0 1px 2px #e7e7e7 inset;}
.top-h-row  .search input[id^=title-search-input]{color:#b2b2b2;box-shadow:0 0 1px #ededed;-moz-box-shadow:0 0 1px #ededed;-o-box-shadow:0 0 1px #ededed;-webkit-box-shadow:0 0 1px #ededed;border-color:#e6e7e8;}
.middle-h-row  .search input[id^=title-search-input]{color:#b2b2b2;box-shadow:0 0 1px #ededed;-moz-box-shadow:0 0 1px #ededed;-o-box-shadow:0 0 1px #ededed;-webkit-box-shadow:0 0 1px #ededed;border-color:#f2f3f4;}
.middle-h-row  .search input[id^=title-search-input]:focus{color:#b2b2b2;box-shadow:0 0 1px #ddd;-moz-box-shadow:0 0 1px #ddd;-o-box-shadow:0 0 1px #ddd;-webkit-box-shadow:0 0 1px #ddd;border-color:#e8e9ea;}
table.title-search-result img.item_preview{box-shadow:0 0 15px 5px #fff;-moz-box-shadow:0 0 15px 5px #fff;-o-box-shadow:0 0 15px 5px #fff;-webkit-box-shadow:0 0 15px 5px #fff;}

/*table*/
table.colored_table{width:100%;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;border-collapse:collapse;}
.colored_table thead{border:1px solid #E5E5E5;}
.colored_table thead tr{background:#F7F7F7;}
.colored_table tr td{padding:8px 29px;}
.colored_table tbody{border-left:1px solid #E7E7E7;border-right:1px solid #E7E7E7;border-bottom:1px solid #E7E7E7;}
.colored_table tbody tr td{border-bottom:1px solid #E7E7E7;}

/* unsorted styles*/
.front_slider .read_more:hover, .btn_big:hover{
	text-shadow:0 1px 0 rgba(0,0,0,.2);
	-moz-text-shadow:0 1px 0 rgba(0,0,0,.2);
	-o-text-shadow:0 1px 0 rgba(0,0,0,.2);
	-webkit-text-shadow:0 1px 0 rgba(0,0,0,.2);
	color:#fff;
	border-bottom:2px solid #212121 !important;
	background:#848484 !important;
	background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+) !important;
	background:-moz-linear-gradient(top, #848484 0%, #464646 100%) !important;
	background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,#848484), color-stop(100%,#464646)) !important;
	background:-webkit-linear-gradient(top, #848484 0%,#464646 100%) !important;
	background:-o-linear-gradient(top, #848484 0%,#464646 100%) !important;
	background:-ms-linear-gradient(top, #848484 0%,#464646 100%) !important;
	background:linear-gradient(to bottom, #848484 0%,#464646 100%) !important;
	filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#848484', endColorstr='#464646',GradientType=0 ) !important;
	color:#fff !important;
	box-shadow:0px -1px 0 #555 inset;
	-moz-box-shadow:0px -1px 0 #555 inset;
	-o-box-shadow:0px -1px 0 #555 inset;
	-webkit-box-shadow:0px -1px 0 #555 inset;
}
ul.menu li .child.cat_menu hr{border-bottom:1px solid #fff;background:#e7e7e7;}
ul.menu .child .child_wrapp, .breadcrumbs .dropdown{background:#f5f5f6;box-shadow:0 1px 5px #fafafa;-moz-box-shadow:0 1px 5px #fafafa;-o-box-shadow:0 1px 5px #fafafa;-webkit-box-shadow:0 1px 5px #fafafa;}
.specials_slider.product_slider .catalog_item:hover .basket_button.read_more span{background-position:1px -408px;}
.module_products_list .basket_button.read_more span{background-position:1px -408px;}
.top-h-row .search input[id^=title-search-input]:focus{border-color:#ddd;box-shadow:0 0 1px #eee;-moz-box-shadow:0 0 1px #eee;-webkit-box-shadow:0 0 1px #eee;-o-box-shadow:0 0 1px #eee;}
.question-list .ans{color:#444;border:1px solid #e8e8e8;background:#f2f2f2;border-bottom:1px solid #bdbdbd;}
.question-list .ans .arr{border-bottom:10px solid #f2f2f2;}
input.error, textarea.error{border-color:#cb0000;}
input#COUPON.error{border-color:#cb0000 !important;}
input#COUPON.good{border-color:#00cb00 !important;}
h2.feedback_title{color:#221f26;}
.bx-touch .bx_item_set_hor_container_big .bx_item_set_del, .bx_item_set_hor_container_big .bx_item_set_hor_item:hover .bx_item_set_del, .bx_kit_item:hover .bx_kit_item_del{background:#e62222;}
.button30.fast_order{
	background:#00b0d8;
	background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwYjBkOCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDdkYjkiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
	background:-moz-linear-gradient(top,  #00b0d8 0%, #007db9 100%);
	background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,#00b0d8), color-stop(100%,#007db9));
	background:-webkit-linear-gradient(top,  #00b0d8 0%,#007db9 100%);
	background:-o-linear-gradient(top,  #00b0d8 0%,#007db9 100%);
	background:-ms-linear-gradient(top,  #00b0d8 0%,#007db9 100%);
	background:linear-gradient(to bottom,  #00b0d8 0%,#007db9 100%);
	filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#00b0d8', endColorstr='#007db9',GradientType=0 );
	border-bottom:1px solid #00699d;
}
.button30.fast_order span{text-shadow:0 1px 1px #006f9c;-moz-text-shadow:0 1px 1px #006f9c;-o-text-shadow:0 1px 1px #006f9c;-webkit-text-shadow:0 1px 1px #006f9c;}
.bx_filter_container_title > span.name span{color:#221f26;border-bottom:1px dotted #6e6e6e;}
.bx_filter_vertical .bx_filter_container_title i.arr{background:#fafafa url("../images/arrows_small.png") -15px -21px no-repeat;}
.bx_filter_vertical .for_button{border-top:1px solid #dadada;}
.smartfilter .bx_ui_slider_track{background:#dadada;}
.compare_wrapp{background:#fcfcfc;border:1px solid #f1f1f1;box-shadow:0 0px 1px #e7e7e7 inset;-moz-box-shadow:0 0px 1px #e7e7e7 inset;-o-box-shadow:0 0px 1px #e7e7e7 inset;-webkit-box-shadow:0 0px 1px #e7e7e7 inset;}
.popup, div[id^="CatalogSetConstructor"]  .popup-window{background:#fff;}
.popup .close:hover, .popup-window-close-icon.popup-window-titlebar-close-icon:hover{background:#fff;box-shadow:0px 0px 3px rgba(0,0,0,.2);-moz-box-shadow:0px 0px 3px rgba(0,0,0,.2);-o-box-shadow:0px 0px 3px rgba(0,0,0,.2);-webkit-box-shadow:0px 0px 3px rgba(0,0,0,.2);}
.popup .pop-up-title, .popup-window-titlebar .popup-window-top-row .popup-window-center-column span div{text-shadow:0 1px 0 rgba(255, 255, 255, .57);-moz-text-shadow:0 1px 0 rgba(255, 255, 255, .57);-o-text-shadow:0 1px 0 rgba(255, 255, 255, .57);-webkit-text-shadow:0 1px 0 rgba(255, 255, 255, .57);}
.jqmOverlay, .popup-window-overlay{background:rgba(0,0,0, .4);filter:progid:DXImageTransform.Microsoft.Alpha(opacity=100) !important;-moz-opacity:1 !important;-khtml-opacity:1 !important;opacity:1 !important;}
.bx_filter_vertical .bx_filter_block.scrollable{background:#fff;border:1px solid #cbcbcb;box-shadow:0 0 0px 1px #eee inset;-moz-box-shadow:0 0 0px 1px #eee inset;-o-box-shadow:0 0 0px 1px #eee inset;-webkit-box-shadow:0 0 0px 1px #eee inset;}
.popup-window-overlay{background: rgba(255,255,255,.2) !important;}

.top-h-row .menu .separator{border-left:1px dotted #c8c8c8;}
.cart_empty, .module-cart, .count-cell div.error{background:#fff;  margin:0px 0px 20px;}
.question-list .q a:hover span{border-color:#b4b4b4;}
.flexslider .light, .flexslider .light .banner_title, .flexslider .light .banner_text, .flexslider .light  .banner_title a{color:#fff;}

.flexslider .light .banner_title{text-shadow:0px 0px 10px rgba(0, 0, 0, 0.3);}
.flexslider .light .banner_text {text-shadow:0px 0px 5px rgba(0, 0, 0, 0.6);}

.flexslider .dark  .banner_title, .flexslider .dark  .banner_title a{color:#202020;}
.flexslider .dark  .banner_text{color:#222;}

body .top_slider_wrapp .flexslider .slides > li .wrapper_inner > table{width:100%;}
.flexslider .target{position: absolute;width: 100%;left: 0px;right: 0px;top: 0px;height: 100%;z-index: 10;}

.catalog_block .catalog_item .basket_button.to-cart span, .catalog_block .catalog_item .basket_button.read_more span, .catalog_block .catalog_item .basket_button.to-subscribe span, .catalog_block .catalog_item .basket_button.to-order span{color:#000;}
.catalog_block .catalog_item .basket_button.in-subscribe span, .specials_slider.product_slider .basket_button.in-subscribe span{color:#fff;}

.rss_feed_icon:hover{color:#fff !important;}
.button22.grey:hover span{color:#fff;}
.button22.grey span{color:#000;}

.item .dark_block_animate{opacity:0;background-color: rgba(0,0,0,.5);-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";-webkit-transition: opacity .8s cubic-bezier(.19, 1, .22, 1);transition: opacity .8s cubic-bezier(.19, 1, .22, 1);position: absolute;display: block;width: 100%;height: 100%;z-index:2;}
.item:hover .dark_block_animate{opacity:1;-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=1)";}
.scale_block_animate{-webkit-transition: -webkit-transform 0.6s cubic-bezier(0.19, 1, 0.22, 1);transition: transform 0.6s cubic-bezier(0.19, 1, 0.22, 1);overflow:hidden;position:relative;z-index:1;}
.item:not(.touch_class):hover .scale_block_animate, .touch_class .scale_block_animate{-webkit-transform: scale(1.25);transform: scale(1.25);}

/*top header row*/
.top-h-row  .h-user-block, .top-h-row   .search, .top-h-row ul.menu{float:left;}
.basket_normal #header .top_br{width:100%;height:1px;background:#eaebec;margin: 0px 0px 15px;}

/*top menu*/
#header .catalog_menu .wrapper_middle_menu{position:relative;}
#header .catalog_menu .wrapper_middle_menu .inc_menu{padding-left: 220px;}

.top-h-row .menu.topest{margin:0 0 -1px;padding:0;white-space:nowrap;height:31px;font-size:0;overflow:hidden;width: 40%;}
.top-h-row .menu.topest:hover{overflow:visible;}
.top-h-row .menu.topest li{display:inline-block;vertical-align:top;padding:0;list-style:none;font-size:12px;line-height:18px;white-space:normal;}
.top-h-row .menu.topest>li{margin:0 0 0 30px;text-align:center;}
.top-h-row .menu.topest li:before{display:none;}
.top-h-row .menu.topest>li:first-child{margin-left:0;}
.top-h-row .menu.topest li a{position:relative;display:block;padding:9px 0 0px;}
.top-h-row .menu >li>a{color:#777777;}
.top-h-row .menu.topest li.selected>a{color:#333;}
.top-h-row .menu.topest li.selected>a:after{content:"";position:absolute;left:0;right:0;bottom:-1px;height:1px;z-index:1;}
.top-h-row .menu.topest li.more{position:relative;padding:10px 0 16px;width:20px;cursor:pointer;z-index:999;}
.top-h-row .menu.topest li.more>span{display:block;font-weight:bold;line-height:15px;letter-spacing:1.5px;color:#777777;}
.top-h-row .menu.topest li.more .dropdown{margin:0;padding:0;left:-17px;width:191px;margin:0;-webkit-box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.07);-moz-box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.07);box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.07);position: absolute;opacity:0;visibility:hidden;top:90%;z-index: 999;}
.top-h-row .menu.topest li.more:hover>.dropdown{opacity:1;visibility:visible;background:#fff;}
.top-h-row .menu.topest li.more .dropdown>li{margin:0;padding:0;font-size:13px;line-height:14px;border-top:1px solid #f3f3f3;text-align:left;width:100%;}
.top-h-row .menu.topest li.more .dropdown>li:before{display:none;}
.top-h-row .menu.topest li.more .dropdown>li:first-child{border-top:none;}
.top-h-row .menu.topest li.more .dropdown>li>a{line-height:14px;padding:12px 20px 15px;}
.top-h-row .menu.topest li.more .dropdown>li>a:hover{background:#fbfbfb;}

.dropdown .has-childs .dropdown .menu_item, .menu_top_block .dropdown .dropdown .menu_item{padding:0px 10px 0px 0px; display:inline-block;width: auto;}

/*top phone*/
.top-h-row .phones{float:left;/*width:26%;*/box-sizing:content-box;padding:5px 10px 0px 5%;}
.top-h-row .phone_wrap .phone_text > a{display:inline-block;margin: 0px 7px 0px 0px;}

.top-h-row .phone_wrap{position: relative;}
.top-h-row .phone_block .phone_wrap .icons{position: absolute;left:0px;top:7px;margin: 0px;width: 12px;height: 12px;line-height: 12px;font-size: 14px;}
.top-h-row .phone_block .phone_wrap .phone_text{padding: 0px 0px 0px 18px;}
.top-h-row .phone_block .order_wrap_btn{margin-left: 11px;}
.top-h-row .order_wrap_btn .callback_btn{font-size:12px;text-transform:none;}

.phones .phone_wrap{display:inline-block;}
.phones .phone_wrap a{text-decoration:none;cursor:default;}
.phone_wrap > span{display:inline-block;vertical-align:middle;position:relative;}
.order_wrap_btn .callback_btn{display:inline-block;font-size:10px;text-transform:uppercase;letter-spacing:0.1px;}
.phone_wrap .icons{border-radius: 100%;color: #000;font-size: 16px;margin: 2px 5px 0px;width: 35px;height: 35px;text-align: center;line-height: 36px;}
.middle_phone .phone_wrap .icons{position:absolute;left:0;top:50%;margin-top:-16px;color: #fff;background:#ddd;}

.phone_block .phone_wrap .icons{background:none;}
.middle_phone .phone_wrap .phone_text{padding:0 0 0 48px;display:block;}
.phone_wrap .phone_text > a{display:block;}
.top-h-row .phone_wrap .icons{margin-right:8px;display:inline-block;margin-top:2px;}
.phones .order_wrap_btn{margin:1px 0px 0px 20px;display:inline-block;vertical-align:middle;}
.footer_top .phones .order_wrap_btn{margin-left:23px;font-size:12px;}
.phones .order_wrap_btn:hover{cursor:pointer;}

/*user top block*/
.top-h-row .h-user-block{margin-top:8px;float:right;position:relative;}
.top-h-row .h-user-block a{color:#666666;position:relative;text-decoration:none;}
.top-h-row .h-user-block a.icon{padding: 0px 19px 0px 28px;}
.top-h-row .h-user-block a.icon:before{position:absolute;left:0px;top:-4px;width:21px;height:21px;background:url('images/ai.png') -423px -3px no-repeat;content:"";z-index:2;}
.top-h-row .h-user-block a.icon.reg:before{background-color: #ddd;border-radius: 100%;}
.top-h-row .h-user-block a.icon.has-img:before{display:none;}
.top-h-row .h-user-block .module-enter{font-size:12px;}

.top-h-row .bg_user{position:absolute;left:0px;top:-4px;width:21px;height:21px;border-radius:100%;background-color:#a1a2ac;display:block;z-index:2;}

/*bottom header row*/
#header .middle-h-row .logo_wrapp .logo a{display:inline-block;*display:inline;display:block;zoom:1;vertical-align:middle;margin:0px 0px 0px 0px;}
#header .middle-h-row .logo_wrapp .logo a img{display:block;}
#header .middle-h-row td{vertical-align:middle;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;}
#header .middle-h-row td.text_wrapp{width: 26%;padding: 0px 3px 0px 49px;}

.bx-ie #header .middle-h-row .logo_wrapp .logo{min-height:47px;line-height:47px;}
.bx-ie .basket_fly #header .middle-h-row .logo_wrapp .logo{min-height:48px;line-height:48px;}
#header .middle-h-row .center_block{width:100%;padding:0px 45px 0 34px;}
.has_menu #header .middle-h-row .center_block{padding:2px 40px 0px 56px;}
#header .middle-h-row .main-nav  ul.menu > li > a{padding:0px 10px;}

/*header bottom menu*/
#header .middle-h-row .logo_wrapp .logo div{line-height:61px;}

body #header .catalog_menu ul.menu > li, body #header .catalog_menu ul.menu > li > a, .wrapper.has_menu #header .catalog_menu ul.menu > li.current > a{border:0px;}
body #header .catalog_menu ul.menu > li:not(.current):not(.stretch):hover{border:0px;}

ul.menu li a i{display:inline-block;height:5px;width:8px;background:url('images/arrows.png') 0px 0px no-repeat;zoom:1;position:absolute;top:7px;}
.wrapper.has_menu .catalog_menu ul.menu li a i{background-position:-1px -143px;}
.wrapper.m_color_white .catalog_menu ul.menu li a i{background-position:-34px -143px;}
ul.menu li.more a i{position:static;margin:0px 0 2px 11px;}

.icons_fa:after, li.has-child:before{display: inline-block;font: normal normal normal 14px/1 FontAwesome;font-size: inherit;text-rendering: auto;-webkit-font-smoothing: antialiased;-moz-osx-font-smoothing: grayscale;}

/*header menu start*/
.menu_top_block.catalog_block{margin: -23px 0px 26px;}
.light .menu_top_block.catalog_block{margin-top:-24px;}

.visible_on_ready{visibility:hidden;}
header .wrap_menu {position: relative;height: 47px;border-radius: 0px;overflow: hidden;background:#fff;}

/*light menu*/
.menu_light .wrapper_middle_menu{border:1px solid #e5e5e5;border-left-width:0px;border-right-width:0px;}

header .menu_light .wrap_menu, header .menu_light .menu_top_block >li.catalog >a{background:#fff;}
.header_wrap #header .catalog_menu.menu_light ul.menu > li > a{color:#1d2029;}
.menu_light .menu_top_block li.catalog > a:before{background-position:0px -42px;}
.menu_light .menu_top_block li.catalog > a:after{display:none;}
header .menu_light .menu_top_block li.catalog:after{color:#8a8a8a;}

/*dark menu*/
header .menu_dark .wrap_menu{background:#424f60;}
header .menu_dark ul.menu > li:not(.catalog):hover > a{background-color: #556170;}

.menu_top_block {margin: 0;padding: 0;position: relative;white-space: nowrap;font-size: 0;}
header .menu_top_block {border-radius: 4px;z-index: 101;}
header .wrapper_middle_menu *, .menu_top_block *{box-sizing:border-box;}
header .menu_top_block>li {display: inline-block;vertical-align: top;font-size: 16px;font-weight: 500;line-height: 22px;}
.menu_top_block li{margin: 0;padding: 0;position: relative;white-space: normal;}
.menu_top_block>li>a, .menu_top_block.catalog_block .dropdown>li.full>a {/*overflow: hidden;*/position: relative;display: block;padding: 12px 22px 13px;color: #FFF;white-space: normal;}

.menu_top_block.catalog_block .dropdown>li.full>a{color: #555555;}

.header_wrap #header .catalog_menu ul.menu > li{height:47px;background:none;}
.header_wrap #header .catalog_menu ul.menu > li.catalog{width:220px;}
.header_wrap #header .catalog_menu ul.menu > li > a, .header_wrap #header .catalog_menu ul.menu.adaptive > li .text{color:#fff;border: 0px !important;text-transform: uppercase;font-size:13px;font-weight:600;text-decoration: none;}

.light .header_wrap #header .catalog_menu ul.menu.adaptive > li .text{color:#1d2029;}
.light .header_wrap #header .catalog_menu ul.menu.adaptive > li:hover .text, .light .header_wrap #header .catalog_menu ul.menu.adaptive.opened > li .text{color:#fff;}
.light .header_wrap #header .catalog_menu ul.menu.adaptive > li:after{background-position: 0px -42px !important;}
.light .header_wrap #header .catalog_menu ul.menu.adaptive > li:hover:after, .light .header_wrap #header .catalog_menu ul.menu.adaptive.opened > li:after{background-position: 0px 0px !important;}

.menu_top_block li .dropdown {position: absolute;width: 220px;margin: 0;background: #FFF;border: none;-webkit-box-shadow: 0px 1px 5px 0px rgba(0, 0, 0, 0.2);-moz-box-shadow: 0px 1px 5px 0px rgba(0, 0, 0, 0.2);box-shadow: 0px 1px 5px 0px rgba(0, 0, 0, 0.2);
    display: none;opacity: 1;visibility: visible;}
header .menu_top_block li.catalog>.dropdown{box-shadow:none;}
header .menu_top_block li.catalog>.dropdown>li>a, body .menu_top_block.catalog_block .dropdown >li.full>a, .left_menu > li> a{border:1px solid #eaebec;border-bottom-width:0px;background:#f9f9f9;position:relative;}
body .menu_top_block.catalog_block .dropdown >li.full:first-child>a{border-top-width:0px;}
header .menu_top_block li.catalog>.dropdown>li:last-child>a, body .menu_top_block.catalog_block .dropdown >li:last-child>a, .left_menu > li:last-child> a{border-bottom-width:1px;}
header .menu_top_block li.catalog>.dropdown>li:hover>a,header .menu_top_block li.catalog>.dropdown>li.current>a, .menu_top_block.catalog_block .dropdown >li.full:hover>a{background:#fff;}
.menu_top_block.catalog_block .dropdown >li.full.current>a, .menu_top_block.catalog_block .dropdown >li.full.current>a:after, .menu_top_block.catalog_block .dropdown >li.full.current:hover>a:after, header .menu_top_block li.catalog>.dropdown>li.current>a, header .menu_top_block li.catalog>.dropdown>li.current>a:after,
header .menu_top_block li.catalog>.dropdown>li.current:hover>a:after, header .menu_top_block li.catalog>.dropdown>li.current:hover>a{color:#fff !important;}
header .menu_top_block li.catalog>.dropdown>li:hover>a:before, .menu_top_block.catalog_block .dropdown >li.full:hover>a:before, .left_menu > li:hover> a:before{content: "";position: absolute;left: 0px;top: 0px;width: 3px;height: 100%;background:#ddd;display:block;}
header .menu_top_block>li>.dropdown, .menu_top_block.catalog_block .dropdown>li>.dropdown {z-index: 3;display: none;top: auto;left: 0;margin: 0;min-width: 100%;opacity: 1;visibility: visible;}
header .menu_top_block li .dropdown>li, .menu_top_block.catalog_block >.dropdown>li {display: block;width: 100%;}

.light header .inc_menu .menu_top_block>li>.dropdown{margin-top: 1px !important;}

.menu_top_block li.full .dropdown li .dropdown {background:transparent; opacity: 0;display: block;visibility:hidden; box-shadow: none;border: none;width: 100%;position: static;top: auto;left: auto;margin: 11px 0 0;transition: opacity 0s ease .2s, visibility 0s ease .2s;}

body .menu_top_block li.full .dropdown>li>a {padding: 0;background: rgba(0, 0, 0, 0) none repeat scroll 0 0;font-size: 13px;line-height: 16px;}
body .menu_top_block li.full .dropdown>li>a.section1{background:#fff !important;}

.menu_top_block li .dropdown>li>a {display: block;padding: 11px 33px 13px 15px;font-size:13px;text-align: left;}
body .menu_top_block li .dropdown>li>a {color:#555555;background: #FFF;}
header .menu_top_block> li:not(.catalog) .dropdown>li>a {border-bottom:1px solid #eaebec;}
header .menu_top_block li .dropdown>li:last-child>a {border-bottom-width:0px;}

header .menu_top_block li .dropdown>li>.dropdown, .menu_top_block.catalog_block .dropdown>li>.dropdown {left: 100%;top: 0;width: 241px;}
header .menu_top_block li .dropdown>li>.dropdown{top:1px;}
header .menu_top_block>li>.dropdown li .dropdown {transition: opacity 0s ease .2s, visibility 0s ease .2s;}
.menu_top_block>li.full .dropdown, .menu_top_block.catalogfirst li.full .dropdown {box-shadow: none;}
.menu_top_block .dropdown>li.full>.dropdown, .menu_top_block.catalogfirst li.full>.dropdown {padding: 20px 0 20px;box-shadow: 0 20px 20px 0 rgba(0, 0, 0, 0.1);opacity: 0;display: none;transition: opacity 0s ease .33s, visibility 0s ease .33s;visibility: hidden;min-width:500px;}
.menu_top_block:not(.catalog_block):hover li.full>.dropdown, header .menu_top_block li:not(.full):hover>.dropdown, .menu_top_block.catalog_block .dropdown> li:hover>.dropdown {/*display: block;*/}
.menu_top_block li.full:hover>.dropdown{display:block;}
.menu_top_block.catalogfirst li.full>.dropdown, .menu_top_block.catalog_block .dropdown> li.full>.dropdown {box-shadow: 0px 2px 10px 0px rgba(0, 0, 0, 0.1);max-width:940px;width:940px;}
.hide_catalog .menu_top_block.catalog_block{display:none;}

header .menu_top_block li .dropdown li:hover>.dropdown {z-index: 1;opacity: 1;visibility: visible;}
.menu_top_block li.full:hover>.dropdown, header .menu_top_block.catalogfirst li.full:hover>.dropdown {opacity: 1;visibility: visible;}
.menu_top_block li.full:hover> .dropdown .dropdown, header .menu_top_block.catalogfirst li.full:hover>.dropdown .dropdown {opacity: 1;visibility: visible;}
.menu_top_block li.full {position: initial;}
.menu_top_block li.full.m_line {position: relative;z-index:20; }
.menu_top_block li.full.m_line .dropdown{min-height: auto !important;}

header .catalog_menu_ext{position:absolute;top:0px;left:0px;width: 220px;}
header .menu_top_block>li.more>a:before {content: "";position: absolute;left: 50%;top: 50%;margin: -2px 0 0 -8px;width: 15px;height: 3px;background: url(images/ai.png) -157px -10px no-repeat;}
header .menu_light .menu_top_block>li.more>a:before {background-position:-118px -10px;}

header .menu_top_block li .dropdown>li>a, .menu_top_block.catalog_block .dropdown>li.full>a, .left_menu > li> a {display: block;padding: 11px 31px 13px 17px;background: #f9f9f9;text-decoration:none;text-align:left;}
header .menu_top_block li .dropdown>li:hover>a, header .menu_top_block li .dropdown>li.current >a, body header#header .catalog_menu .menu_top_block >li.current >a{color:#fff;}
header .menu_top_block>li.more>a {height: 47px;}

.menu_top_block li.catalog > a, .menu_top_block.catalog_block .dropdown> li > a{position:relative;padding-left: 41px;padding-right: 120px;}
.menu_top_block.catalog_block .dropdown> li > a{padding: 11px 31px 13px 17px;}
.menu_top_block li.catalog > a:before{position:absolute;top:12px;left:12px;content:"";display:block;width:20px;height:20px;background:url('images/ai.png') 0px 0px no-repeat;}
.menu_top_block li.catalog > a:after{position:absolute;top:0px;right:0px;content:"";display:block;width:1px;height:100%;background:#fff;opacity:0.1;}
body .menu_top_block.catalog_block .dropdown> li > a{font-size:13px;color:#555555;}

.menu_top_block.catalog_block .dropdown> li.full>.dropdown>li, header .menu.top.catalogfirst li.full>.dropdown>li {padding: 5px 30px 20px 24px;float: left;width: 33%;}

.menu_top_block.catalog_block .dropdown>li.full>.dropdown>li>.image, header .menu_top_block.catalogfirst li.full>.dropdown>li>.image {width:50px;height: 50px;line-height: 50px;text-align: center;float:left;}
.menu_top_block.catalog_block .dropdown>li.full>.dropdown>li>.image img, header .menu_top_block.catalogfirst li.full>.dropdown>li>.image img {vertical-align: middle;}
.menu_top_block.catalog_block .dropdown>li.full>.dropdown>li>a, header .menu_top_block.catalogfirst li.full>.dropdown>li>a {font-size: 13px;line-height: 20px;padding: 10px 0px 0px 70px;font-weight:600;background:none;color: #333333;}
.menu_top_block.catalog_block .dropdown>li.full>.dropdown>li>a:hover, header .menu_top_block.catalogfirst li.full>.dropdown>li>a.section:hover, .menu_top_block.catalog_block .dropdown>li.full>.dropdown>li.current>a.section{color: #333333;}
.menu_top_block.catalog_block .dropdown>li.full>.dropdown>li>.dropdown, header .menu_top_block.catalogfirst li.full>.dropdown>li>.dropdown{padding:0px 0px 0px 70px;margin-top: 9px;text-align:left;}

.menu_top_block li.full>.dropdown>li:nth-child(3n+1){clear: both;}

header .menu_top_block li .dropdown>li>.dropdown.toleft{border-right:1px solid #e9e9e9;border-left:none;left:inherit;right:100%;}

header .menu_top_block li .dropdown>li.has-child a{position:relative;}
header .menu_top_block li.catalog:after, .menu_top_block.catalog_block .dropdown>li.has-child>a:after, header .menu_top_block li .dropdown>li.has-child>a:after, .left_menu > li.has-childs> a:after{content: "\f107";color:#fff;position: absolute;right: 16px;top: 50%;margin: -3px 0 0 0px;width: 12px;height: 8px;/*background: url(images/ai.png) -3px -28px no-repeat;*/display:block !important;}
.bx-firefox header .menu_top_block li.catalog:after, .bx-firefox .menu_top_block.catalog_block .dropdown>li.has-child>a:after, .bx-firefox header .menu_top_block li .dropdown>li.has-child>a:after, .bx-firefox .left_menu > li.has-childs> a:after{margin-top:-4px;}
header .menu_top_block li.catalog:after, .left_menu > li.has-childs> a:after{font-size:13px;top: 21px;text-align:right;cursor: pointer;}
header .menu_top_block li .dropdown>li.has-child>a:after, .menu_top_block.catalog_block .dropdown>li.has-child>a:after, .left_menu > li.has-childs> a:after{font-size: 13px;top: 19px;text-align: right;color: #8a8a8a;content: "\f105";}
.left_menu > li.has-childs.current> a:after{color:#fff !important;content:"\f107";}

header .menu_top_block li .dropdown>li:hover>a:after, header .menu_top_block li:not(.catalog) .dropdown>li.current >a:after{color:#fff;}
.light header .catalog_menu_ext .menu_top_block >li.catalog >a{background-color:#fff;}

/*mobile start*/
.mobile_menu_wrapper{position:relative;}
header .mobile_menu{display:none;position:absolute;top:0px;left:0px;width:100%;background: #fff;z-index: 999;}
#header .catalog_menu .wrap_menu ul.menu.adaptive:hover{cursor:pointer;}
#header .catalog_menu .wrap_menu ul.menu.adaptive > li.menu_opener{border:0px;display: block;width: 100%;padding: 0px 17px;}
.header_wrap #header .catalog_menu ul.menu.adaptive > li{height:47px;line-height: 47px;position:relative;}
.header_wrap #header .catalog_menu ul.menu.adaptive > li:after{position: absolute;top:12px; right:17px;content: "";display: block !important;width: 20px;height: 20px;background: url('images/ai.png') 0px 0px no-repeat;}

.mobile_menu_wrapper .mobile_menu li{background: #f9f9f9;border-top: 1px solid #eaebec;position: relative;}
.mobile_menu_wrapper .mobile_menu li:before{display:none;}
.mobile_menu_wrapper .mobile_menu li.has-child:before{display:block;content: "\f107";color: #1d2029;position: absolute;right: 16px;top: 12px;width: 12px;height: 8px;}
.mobile_menu_wrapper .mobile_menu li.has-child:hover:before, #header .wrapper_middle_menu.wrap_menu ul.mobile_menu li.current:before{color: #fff;}
.mobile_menu_wrapper .mobile_menu li a{padding: 0px 31px 0px 17px;display:block;font-size: 13px;text-decoration: none;height: 40px;line-height: 41px;border-bottom: 1px solid rgba(0, 0, 0, 0);color:#333333;}
#header .wrapper_middle_menu.wrap_menu ul.mobile_menu li:hover > a, #header .wrapper_middle_menu.wrap_menu ul.mobile_menu li.current > a{color:#fff !important;}

ul.mobile_menu  .dropdown{font-size:13px;display:none;margin: 0;padding: 0 0 0 20px;}

ul.mobile_menu .search{box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.3);width: 100%;display: block !important;padding: 13px;background: none repeat scroll 0 0 #e0e7ea !important;border: medium none;position: absolute;right: 0;top: 100%;z-index: 9;}
ul.mobile_menu .search .search-input-div{width: 100%;padding-right: 63px;}
ul.mobile_menu .search .search-button-div {position: absolute;right: 14px;top: 13px;}
ul.mobile_menu .search .search-button-div button{padding:9px 13px 10px;border-top-left-radius:0px;border-bottom-left-radius:0px;}
ul.mobile_menu .search .search-input-div input{border: 0px;font-size: 13px;}
/*mobile end*/

/*header menu end*/

/*child menu*/
body #header .catalog_menu .child{margin-top:0px;padding-top:0px;}
body #header ul.menu li .child .child_wrapp{border:0px;background:#f7f7f9;box-shadow:0px 2px 5px rgba(0,0,0,.15);border-radius:0px;padding:35px 40px 17px;}
body #header ul.menu.bottom li .child .child_wrapp:not(.clearfix){padding:27px 40px 21px;}
ul.menu .child, .breadcrumbs .dropdown_wrapp{z-index:500;position:absolute;text-transform:none;font-size:11px;font-family:Ubuntu, Arial, Helvetica, sans-serif;padding-top:20px;}
ul.menu .child{margin-top:0px;padding-top:32px;}
.basket_fly ul.menu .child{margin-top:-1px;}
.bx-firefox .wrapper   ul.menu .child, .bx-ie .wrapper   ul.menu .child{margin-top:-1px;}
ul.menu .child a{font-family:Ubuntu, Arial, Helvetica, sans-serif;text-transform:none;}
ul.menu .child li.menu_title{display:block;margin:0px 0px 6px;}
ul.menu .child li.menu_title a{font-weight:400;font-size:14px;text-decoration:none;padding:0;}
ul.menu .child li.menu_item a{font-size:12px;text-decoration:none;padding:0;margin:0px 8px 0px 0px;line-height:20px;}
ul.menu .child .child_wrapp > a, ul.menu .child .child_wrapp .depth3 > a{display:block;text-decoration:none;line-height:20px;text-transform:none;}
ul.menu .child .child_wrapp .depth3 > a{margin-left:15px;}
ul.menu .more .child .child_wrapp .depth3 > a, ul.menu .child .child_wrapp .depth3 a.title{margin-left:0;}
ul.menu .more .child .child_wrapp .depth3 > a.title{color:#000;margin-bottom:5px;font-size:12px;}
ul.menu .more .child .child_wrapp .depth3{margin-bottom:8px;}
.wrapper.has_menu .white #header .catalog_menu ul.menu > li.current, .wrapper.has_menu .white #header .catalog_menu ul.menu > li:not(.current):hover{background:none;}
.wrapper.has_menu .white #header .catalog_menu ul.menu > li.active, .wrapper.has_menu .white #header .catalog_menu ul.menu > li.active:hover{background:#efefef;}

/*child line menu*/
body #header ul.menu li .child.line .child_wrapp{padding:0px;box-shadow:0px 2px 5px rgba(0,0,0,.15);}
body #header ul.menu li .child.line .child_wrapp > a{padding:9px 20px 10px;border-bottom:1px solid #fff;background:#f7f7f9;}
body #header ul.menu li .child.line .child_wrapp > a:hover, body #header ul.menu li .child.line .child_wrapp > a.current{background:#fff;}

/*header search*/
.search_middle_block{position:relative;}
.search_middle_block .form-control{margin:0px;}
.bx-ie .search_middle_block .form-control input.big{line-height:17px;}
.top-h-row input.big{padding:8px 13px 7px;}
.middle-h-row .search_middle_block.active .middle_form{width:96%;display:block;opacity:1;visibility:visible;}
.middle-h-row .search_middle_block .middle_form{opacity:0;visibility:hidden;width:0%;top:-1px;right:32px;position:absolute;-webkit-transition:width 0.25s ease-in;-moz-transition:width 0.25s ease-in;-o-transition:width 0.25s ease-in;transition:all 0.25s ease-in;overflow:hidden;}

.middle-h-row .search .small_block{font-size:14px;color:#969696;padding: 8px 45px 9px 15px;border-radius: 4px;}
.bx-firefox .middle-h-row .search .small_block{padding-top:7px;padding-bottom:10px;}
.search_middle_block.active  .middle_form { right:32px;}
.search_middle_block.active + .search_block{position:relative;}
.middle-h-row .search_middle_block .middle_form .noborder{background:none;border:0px;display:inline-block;width:auto;position:absolute;right:0px;top:0px;padding:11px 13px 14px;text-transform:none;}
.bx-chrome .middle-h-row .search_middle_block .middle_form .noborder{padding-top:13px;}
.middle-h-row .search_middle_block .middle_form .big{padding-right:100px;background:#e7e7e7;border-color:transparent;padding-left:18px;}
.center_block .search_block .icon.open, .h_color_colored .header_wrap .center_block .search_block .icon.open{background-position:-169px -175px;right:-10px;top:2px;position:absolute;width:40px;height:38px;}

#header .middle-h-row .center_block .search{margin:0 0px 0 0px;position:relative;zoom:1;display:none;width:100%;}
#header .middle-h-row .center_block .middle_phone{display:none;}
.wrapper #header .middle-h-row .center_block .search, .wrapper #header .middle-h-row .center_block .middle_phone{display:inline-block;vertical-align:middle;transition:margin ease 0.25s;}
#header .middle-h-row .center_block .middle_phone{min-width:174px;}
.middle_phone .phones .phone_text a{font-size:18px;font-weight:600;display: block;line-height: 18px;}
.middle_phone .phones .order_wrap_btn{display:block;margin: 0px 0px 0px 48px;}
.header_wrap.colored .middle_phone .phones .order_wrap_btn{color:#fff;}
body table.title-search-result td.title-search-all a:hover span.text{border-bottom-width:0px;}

#header .middle-h-row .center_block .stitle_form .button, .top-h-row .form_mobile_block .button{width:39px;height:39px;background:url('images/ai.png') -65px 8px no-repeat;position:absolute;top:0px;right:0px;border:0px;}
.bx-ie #header .middle-h-row .center_block .stitle_form .button{top:-2px;}
.top-h-row .form_mobile_block .button{text-indent:-9999px;top:1px;}
#header .middle-h-row .center_block .stitle_form .button:hover, .top-h-row.form_mobile_block .button:hover{opacity:0.8;}
#header .middle-h-row .center_block .stitle_form .text{padding:10px 45px 9px 13px;background:#eee;border-color:transparent;height:41px;}
.stitle_form .form-control{margin-bottom:0px;padding:0px;border: 0px;height: auto;}
.top-h-row .search #search-submit-button i, .middle-h-row .search #search-submit-button i, #header ul.menu.full > li.search_row #search-submit-button i{background:url('images/icons_wish.png') -60px -173px no-repeat;}
#header ul.menu.full > li.search_row #search-submit-button i {background-position-y:-173px;}
.top-h-row .search #search-submit-button:hover i, .middle-h-row .search #search-submit-button:hover i, #header ul.menu.full > li.search_row #search-submit-button:hover i{background-position:-138px -132px;}
.center_block .search_block{float:right;}
.center_block .search_block .icon{display:inline-block;width:18px;height:20px;background:url('images/icons_wish.png') -66px -177px no-repeat;position:relative;top:10px;cursor:pointer;}
.center_block .search_block .icon:hover, .basket_wrapp .wraps_icon_block:hover:before, .basket_wrapp .basket_block .link:hover + .wraps_icon_block:before{opacity:0.8;}
.basket_wrapp .wraps_icon_block.ndelay:hover:before{opacity:1;}
.top-h-row .form_mobile_block .search_middle_block{display:none;}

/*basket fly*/
.basket_fly  #header .middle-h-row .basket_wrapp .middle_phone{min-width:190px;white-space:nowrap;position: relative;top: 9px;}
.basket_fly .basket_wrapp .basket_fly .wraps_icon_block{display:inline-block;float:none;top:39%;margin:0px 6px 0px 0px;}
.basket_fly .basket_wrapp .basket_fly .small .wraps_icon_block{margin-right:6px;}
.basket_fly .basket_wrapp .basket_fly .wraps_icon_block.delay .count span{background: #ddd;color: #fff;}
#header .basket_fly .opener{position:absolute;width:60px;left:-60px;border-radius:4px 0 0 4px; -moz-border-radius:4px 0 0 4px; -webkit-border-radius:4px 0 0 4px; top:0px;background:#424f60;overflow: hidden;}
#header .basket_fly .opener >div{display:inline-block;text-align:center;width:60px;height:60px;cursor:pointer;vertical-align:top;*display:inline-block;zoom:1;}
#header .basket_fly .opener >div .count.empty_items{display:none;}

#header .basket_fly .opener .wish_count.empty .icon{background:transparent;}
#header .basket_fly tr.hidden{display:none;}

.basket_sort ul.tabs li{height:auto;padding-bottom:3px;margin-right:8px;margin-top:0;}
.middle .basket_sort ul.tabs li:first-child{padding-left:0px;}
.basket_sort ul.tabs li:last-child{margin-right:0px;}
.basket_sort ul.tabs li.cur div{border-bottom:2px solid #ddd;}
.basket_sort ul.tabs li span{font-size:16px;line-height:20px;font-weight:500;border-bottom:0px;}
.basket_sort ul.tabs li .wrap_li > span{padding-bottom:6px;padding-top:3px;}
.basket_sort .remove_all_basket{position:relative;margin:0px;float:right;display:none;padding:6px 12px 5px;}
.basket_sort .remove_all_basket.cur{display:block;}
.basket_sort .remove_all_basket:before, .bx_sort_container .wrap_remove_button .button:before, .basket_sort .basket_print:before{content:"";display:inline-block;height:14px;width:9px;background:url('images/close_icons.png') -2px -26px no-repeat;vertical-align:middle;margin:0px 7px 0px 0px;}
.basket_sort .basket_print:before{background:url('images/ai.png') -28px -85px no-repeat;width: 16px;top: -1px;position: relative;}
#header .basket_fly .opener >div{position:relative;}
#header .basket_fly .opener >div:after{background:#e7edf2;opacity:0.2;content:"";display:block;width:100%;height:1px;position:absolute;bottom:0px;left:0px;}
#header .basket_fly .opener >div:last-child:after{display:none;}
#header .basket_fly .opener >div:not(.basket_count):hover{background:#5e6978;}

#header .middle-h-row .basket_wrapp{vertical-align:middle;text-align: right;}
#header .middle-h-row .basket_fly .basket_wrapp{margin-top:27px;padding-top:0px;}
.middle .tabs_content.basket{margin:27px 0px 0px;}
.basket_wrapp .module-cart{margin-top:0;}
.basket_wrapp .module-cart.delayed{overflow-x:hidden;overflow-y:auto;padding:0px 0px 26px;}
.coupons_list{text-align:left;padding:0px 0px 0px 84px;}
.coupons_list .bx_ordercart_coupon{clear:both;position:relative;margin:14px 0px 0px;}
.coupons_list .bx_ordercart_coupon + .bx_ordercart_coupon{margin-top:9px;}
.coupons_list .bx_ordercart_coupon .coupon_text{background:#fff;display:inline-block;position:relative;padding:0px 10px 0px 0px;}
.coupons_list .bx_ordercart_coupon .coupon_text:before{content:"";display:inline-block;height:9px;width:11px;background:url('images/icons_wish.png') -19px -3px no-repeat;margin:0px 6px 0px 0px;}
.coupons_list .bx_ordercart_coupon:before{content:"";width:100%;display:block;height:1px;border-bottom:1px dotted #C3C3C3;top:50%;position:absolute;}
.coupons_list .bx_ordercart_coupon.not_found .coupon_text:before{background-position:-102px -86px;}
.coupons_list .bx_ordercart_coupon.not_apply .coupon_text:before{background-position:-4px -3px;}
.coupons_list .bx_ordercart_coupon .remove{position:absolute;top:2px;right:0px;z-index:1;}
.coupons_list .bx_ordercart_coupon .bx_ordercart_coupon_notes{float:right;background:#fff;display:inline-block;position:relative;padding:0px 27px 0px 10px;}
#header .basket_wrapp .module-cart.delayed{max-height:250px;}
.basket_wrapp .module-cart thead tr{background:#f7f7f7;}
.basket_wrapp .module-cart .goods{max-height:260px;overflow-y:auto;/*overflow-x:hidden;*/ border-bottom:1px solid #e7e7e7;}
.basket_wrapp .module-cart .cost.prices .price{margin-left:0px;}
#header .basket_fly{border-radius:0 0 0 2px;-moz-border-radius:0 0 0 2px;-webkit-border-radius:0 0 0 2px;top:180px;z-index:100;position:fixed;width:800px;right:-800px;}
.basket_wrapp .basket_sort ul.tabs{position:relative;zoom:1;}
.basket_wrapp .basket_sort{padding:0px;}
.middle .basket_wrapp{margin:-13px 0px 0px;}
#header .basket_wrapp .basket_sort{padding:25px 10px 0px 15px;text-align:left;}
.basket_wrapp .module-cart td, #header .basket_wrapp .module-cart td{vertical-align:top;}
.basket_wrapp .module-cart td{text-align:left;}
.basket_wrapp .module-cart .quantity-th, body .basket_wrapp .module-cart td.count-cell{text-align:center;}
.middle .module-cart thead{border:1px solid #e5e5e5;}
#header .basket_fly .module-cart .colored tbody{border-left-width:0px;border-right-width:0px;border-bottom:none;}
#header .basket_fly .coupon{white-space:nowrap;}
#header .basket_fly .basket_title{font-size:26px;	margin-right:48px;margin-left:13px;font-weight:600;}
#header .basket_fly .basket_wrapp .itog tfoot  .row_titles{text-align:right;}
.basket_wrapp .module-cart table td{padding:8px 10px;}
.middle .basket_wrapp .module-cart table td{padding:8px 25px;}
.middle .basket_wrapp .module-cart table tbody td{padding-bottom:19px;}
.middle .basket_wrapp .module-cart table tbody td .item_props .item_prop{display:block;}
.basket_wrapp .module-cart table tbody td{padding:0px 10px 19px;}
.middle  .module-cart table tbody td{padding:0px 29px 19px;}
#header .basket_wrapp .module-cart table tbody td{padding-bottom:9px;}
#header .basket_fly .module-cart table td.thumb-cell{padding:11px 18px 10px 29px;}
.middle .basket_wrapp .module-cart table td.thumb-cell{padding-top:19px;padding-right:1px;width:153px;}
#header .basket_fly .module-cart table td.name-cell{padding-top:32px;min-width:150px;}
.module-cart table td.name-cell div[class^=bx_item_detail_], .module-cart table td.name-cell .item_props .item_prop {clear:both;font-size:12px;font-weight:normal;display:block;}
.module-cart table td.name-cell div[class^=bx_item_detail_] span.titles{float:left;line-height:16px;}
.module-cart table td.name-cell div[class^=bx_item_detail_] .values{float:left;margin:0px 0px 0px 3px;line-height:16px;}
.module-cart table td.name-cell div[class^=bx_item_detail_] .values ul li:before{content:"";display:none;}
.module-cart table td.name-cell div[class^=bx_item_detail_] .values ul li *, .module-cart table td.name-cell div[class^=bx_item_detail_] .values ul li{line-height:16px;}
.module-cart table td.name-cell div[class^=bx_item_detail_] .values ul li.bx_active{display:block;}
.module-cart table td.name-cell div[class^=bx_item_detail_] .values ul li{display:none;}
.module-cart table td.name-cell div[class^=bx_item_detail_] .values ul li.bx_active{background:none; color:#888;}
.middle .module-cart table td.name-cell{padding-top:54px;white-space:normal;}
#header .basket_fly .module-cart table td.cost-cell{padding-top:33px;width:200px;}
#header .basket_fly .module-cart table td.cost-cell.notes{padding-top:10px;}
.middle .module-cart table td.cost-cell{padding-top:55px;width:230px;}
.middle .module-cart table td.cost-cell.notes{padding-top:32px;}
#header .basket_fly .module-cart table tr td.count-cell{padding-top:26px;width:132px;}
.module-cart table tr td.count-cell{font-size:14px;line-height:16px;}
.middle .module-cart table td.delay-cell, .middle .module-cart table td.remove-cell{padding:0px 5px;}
.middle .module-cart table td.remove-cell{width:auto;}

#header .basket_fly .module-cart.delayed  table tr td.count-cell{padding-top:34px;}
.middle .module-cart  table tr td.count-cell{padding-top:42px;width:185px;}
.middle .module-cart.delayed  table tr td.count-cell{padding-top:56px;}
#header .basket_fly .module-cart table td.summ-cell{width:150px;padding-top:33px;}
.middle .module-cart table td.summ-cell{width:200px;padding-top:56px;}
.basket_wrapp .module-cart .cost-cell .cost.prices {text-align:left;}
.basket_wrapp .module-cart .cost-cell .cost.prices .price_name{text-align:left;}
.basket_wrapp .module-cart .cost .price.discount strike, .basket_wrapp .module-cart .cost .price{color:#373737;}
.basket_wrapp .module-cart .cost.prices .price{margin-top:0px;}
.basket_wrapp .module-cart .cost.prices .price:not(.discount){margin-right:4px;float:left;white-space:nowrap;}
.basket_wrapp .module-cart .cost.prices .sale_block{margin-top:4px;}
#header .basket_fly .module-cart table td.delay-cell{padding-top:25px;padding-bottom:0px;}
.middle .module-cart table tbody td.delay-cell{padding-top:48px;width:43px;}
#header .basket_fly li[item-section="DelDelCanBuy"] .module-cart table td.delay-cell .icon{float:left;top:0px;}
.basket_wrapp .module-cart .summ-cell .cost.prices .price{margin:0px;}
#header .basket_fly .module-cart table td.remove-cell{width:20px;padding-top:5px;padding-right:5px;}
.middle .module-cart table td.remove-cell{width:20px;padding-top:5px;}
#header .module-cart table td.cell{padding-top:32px;}
.middle .module-cart table td.cell, .middle .module-cart table td.weight-cell{padding-top:55px;}

.counter_block{box-sizing: border-box;border:1px solid #e5e5e5;font-size:0px;width:84px;margin:0px auto;display:inline-block;vertical-align:top;border-radius:2px;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;height:30px;}
.counter_block.big_basket{width:122px;text-align:center;height:auto;}
.counter_block input[type="text"]{width:34px;border:0px;border-left:1px solid #e5e5e5;border-right:1px solid #e5e5e5;background:#f7f7f7;color:#666666;font-size:13px;height:28px;border-radius:0px;text-align:center;  line-height:13px;}
.bx-firefox .counter_block input[type="text"]{padding-top:7px;}
.counter_block.big_basket input[type="text"]{font-size:13px;height:34px;width:65px;}
.counter_block .plus, .counter_block .minus{font-size:0;line-height:28px;height:28px;width:24px;display:inline-block;cursor:pointer;vertical-align:top;}
.counter_block.big_basket > span{line-height:34px;height:34px;width:28px;}
.module_product_list .counter_block .plus, .module_product_list .counter_block .minus{height:24px;width:24px;}

.counter_block > span:before{opacity:0.7;display:inline-block;content:"";width:24px;height:28px;background:url('images/ai.png') -21px -191px no-repeat;vertical-align:middle;}

.counter_block.big_basket > span.minus:before{background-position:-82px -191px;}
.counter_block.big_basket > span.plus:before{background-position:-52px -191px;}
.counter_block > span.plus:before{background-position:5px -191px;}
.counter_block > span:hover:before{opacity:1;}
.counter_block input[type="text"]{padding:7px 3px 7px;}

.counter_wrapp{font-size:0px;padding:15px 0px 0px;    white-space: nowrap;}
.counter_wrapp .counter_block{margin:0px 10px 0px 0px;}
.button_block{display:inline-block;vertical-align:top;}
.counter_wrapp .button_block.wide{display:block;margin:0px;width:100%;}
.counter_wrapp .button_block.wide .button{display:block;}
.button.in-cart i{display:inline-block;width:11px;height:13px;background:url('images/icons_wish.png') -49px -5px no-repeat;vertical-align:middle;margin:0px 8px 0px 0px;}


.count-cell div.error *, .count-cell div.error{line-height:15px;font-size:12px;margin:6px 0px 10px;}
#header .count-cell div.error *, #header .count-cell div.error{font-size:11px;}

.catalog_detail a.wish_item i, .catalog_detail a.compare_item i, .display_list a.wish_item i, .display_list a.compare_item i, .module-cart a.wish_item .icon i{background:url('images/icons_wish.png') 0px 0px no-repeat;}
.module-cart a.wish_item  .icon i{background-position:5px -14px;}
.module-cart a.wish_item.to_basket  .icon i{background-position:-31px -200px;}
.catalog_detail .big_btn.slide_offer{margin: 0px 0px 20px;}
.catalog_detail .button.one_click{white-space:nowrap;}
.catalog_detail .tabs_section .tabs_content .prices_tab{overflow-x: auto;}

#header .basket_fly .module-cart table td.thumb-cell a{width:70px;height:70px;line-height:70px;text-align:center;}
.module-cart table td.thumb-cell a{width:100px;height:100px;line-height:100px;text-align:center;}
#header .basket_fly .module-cart .colored tfoot{border:0;}
.module-cart .colored tfoot td{border-bottom:0;padding:26px 0px 22px;vertical-align:top;}
.module-cart .colored tfoot .bottom_btn td{padding:35px 15px 52px;}
#header .module-cart .colored tfoot .bottom_btn td{padding-bottom:28px;}
#header .module-cart .colored tfoot .bottom_btn td{padding-top:29px;}
.module-cart tfoot .bottom_btn td .description{font-size:12px;line-height:16px;color:#b3b3b3;margin-top:13px;width:100%;text-align: left;}
.module-cart tfoot .bottom_btn td .description *{line-height:16px;}
.module-cart tfoot .bottom_btn td .close, .module-cart td .text .close{float:none;opacity:1;text-shadow:none;}
#header .basket_fly .module-cart .colored tfoot td.total_wrapp {padding:0;}
#header .basket_fly .module-cart .colored tfoot td.total_wrapp.hidden{display:none;}
#header .basket_fly .module-cart .colored tfoot td.total_wrapp  .more_row{margin:20px;}
.module-cart .colored tfoot td.row_titles{text-align:right;margin:0px;}
.module-cart .colored tfoot td.row_titles .item_title{margin:0px 43px 0px 0px;}
.module-cart .colored tfoot td.row_values .wrap_prices{width:202px;}
.module-cart .colored tfoot td.row_values .wrap_prices .price + .price{margin-top:0px;}
.basket_wrapp .module-cart table.bottom.middle td.row_values .item_title{display:none;}
.bottom.middle td > .coupon{float:left;}
.bottom.middle td > .coupon .coupon-t{width:70px;float:left;line-height:16px;margin:0px 14px 0px 0px;text-align:left;}
.bottom.middle td > .coupon #COUPON{width:267px;max-width:267px;float:left;margin:0px 3px 0px 0px;}
.bottom.middle td > .coupon .coupon_wrap{ position:relative;display:inline-block;vertical-align:top;}
.bottom.middle td > .coupon .coupon_wrap label.error{ top:-16px;right:3px;}
.bottom.middle .total.item_title{float:right;margin-top:11px;}
.bottom.middle .top_total_row{border-bottom:1px solid #e5e5e5;}

.basket_wrapp .module-cart table.bottom.middle td.row_titles .item_title{display: none; }
.basket_wrapp .module-cart table.bottom.middle .bottom_btn .backet_back_wrapp {padding-left:0px !important;}
.basket_wrapp .module-cart table.bottom.middle .bottom_btn .backet_back_wrapp > * + *{margin-top:17px;}
.basket_wrapp .module-cart table.bottom.middle .bottom_btn .basket_print_wrapp {}
.basket_wrapp .module-cart table.bottom.middle .bottom_btn .basket_checkout_wrapp{text-align:right;white-space:nowrap;}
.basket_wrapp .module-cart table.bottom.middle .bottom_btn .basket_checkout_wrapp .basket_checkout{float:right;width:175px;white-space:normal;}
.basket_wrapp .module-cart table.bottom.middle .bottom_btn .basket_checkout_wrapp .description{text-align:right;}
.basket_wrapp .module-cart table.bottom.middle .bottom_btn .basket_fast_order_wrapp{white-space:nowrap;}
.basket_wrapp .module-cart table.bottom.middle .bottom_btn .basket_fast_order_wrapp .basket_fast_order{width:175px;white-space:normal;}
.basket_wrapp .module-cart table.bottom.middle .bottom_btn .basket_fast_order_wrapp .button{display:block;}
.basket_wrapp .module-cart table.bottom.middle .bottom_btn td:last-of-type{padding-right:0 !important;text-align: left;}
.basket_wrapp .module-cart table.bottom.middle .bottom_btn td:last-of-type > *{float:left !important;}
.basket_wrapp .module-cart table.bottom.middle .bottom_btn td:last-of-type .description{text-align: left;}
.basket_wrapp .module-cart table.bottom.middle .bottom_btn td.to_leftside{float:left !important;height:inherit !important;margin:0 !important;}
.basket_wrapp .module-cart table.bottom.middle .bottom_btn td.to_leftside > *:last-of-type{margin-bottom:18px;}
.basket_wrapp .module-cart table.bottom.middle .bottom_btn td.to_leftside .description{display:none;}
.basket_wrapp .module-cart table.bottom.middle .bottom_btn td.to_leftside:last-of-type > *{margin-bottom: 0;}
.basket_wrapp .module-cart table.bottom.middle .bottom_btn td.empty:not(.to_leftside){padding:0 !important;}
.basket_wrapp .module-cart table.bottom.middle td {
    display: inline-block !important;
    float: left !important;
    margin-top: 30px;
    padding: 0 50px 0 0;
    vertical-align: top;
    margin-bottom: 18px;
}
.basket_wrapp .module-cart table.bottom.middle .bottom_btn {display: block;overflow: hidden;padding-top:35px;}
.basket_wrapp .module-cart table.bottom.middle .bottom_btn td {
    display: inline-block !important;
    float: left !important;
    padding: 0 50px 0 0;
    vertical-align: top;
    margin-top: 0;
}
.basket_wrapp .module-cart table.bottom.middle td.row_values {
    float: right !important;
    margin-top: 39px;
    padding-left: 25px;
    padding-right: 0 !important;
    width: 246px;
    width:246px;
    padding-right:0;
    padding-left:25px;
}
.basket_wrapp .module-cart table.bottom.middle td.row_titles{text-align:right;padding-right:25px;padding-left:0 !important;}
.basket_wrapp .module-cart table.bottom.middle .bottom_btn .back_btn  .basket_checkout, .basket_wrapp .module-cart table.bottom.middle .bottom_btn .back_btn  .basket_fast_order {display:none;}

.top_inner .content_menu > div, .basket_normal .basket_wrapp  .header-cart > div{min-height:0px !important;}

/*header compare*/
.basket_wrapp  .wrapp_all_icons{width:207px;padding:20px 0px 0px;}
.basket_normal .basket_wrapp  .wrapp_all_icons{width:231px;display: inline-block;text-align: left;}
.bx-firefox .basket_normal .basket_wrapp  .wrapp_all_icons, .bx-ie .basket_normal .basket_wrapp  .wrapp_all_icons{padding-top:21px;}
.basket_wrapp .header-compare-block, .basket_wrapp .wraps_icon_block{margin:0px 37px 0px 0px;}
.basket_normal .basket_wrapp .header-compare-block{margin-right:33px;}
.basket_wrapp .icon_block{position:relative;width:17px;height:16px;float:left;}
.header-compare-block{opacity:0;}
.basket_wrapp .wraps_icon_block{width:17px;height:16px;position:relative;float:left;cursor:pointer;}
.basket_wrapp .wraps_icon_block:before{background:url('images/ai.png') 0px 0px no-repeat;width:20px;height:19px;-moz-transition:all 0.3s ease;-o-transition:all 0.3s ease;-ms-transition:all 0.3s ease;transition:all 0.3s ease;display:block;content:"";position:relative;top:0px;}
.basket_wrapp .wraps_icon_block.delay:before{background-position:-220px -49px;width:21px;top:-2px;}
.basket_wrapp .wraps_icon_block.compare:before{background-position:-259px -49px;width:21px;top:-5px;}
.basket_wrapp .wraps_icon_block.delay.ndelay{cursor:default;}
.basket_wrapp .wraps_icon_block.basket:before{background-position:-177px -48px;top:-2px;}
.basket_wrapp .user_block .wraps_icon_block.user_auth{}
.basket_wrapp .wraps_icon_block.user_reg:before{background-position:-294px -51px;top:-4px;height:20px;}
.basket_wrapp .wraps_icon_block.user_auth.no_img:before{background-position: -332px -47px;top: -8px;height: 28px;width: 27px;left: -2px;}
.basket_wrapp .wraps_icon_block.user_auth.w_img:before{display:none;}
.basket_wrapp .wraps_icon_block.user_auth.w_img{width:28px;height:28px;left: 3px;top: 14px !important;border: 2px solid #fff;border-radius: 100%;overflow: hidden;}
.basket_wrapp .basket_block .wraps_icon_block .link{z-index:1;}
.basket_wrapp .opener >div > a{position: absolute;top: 0px;left: 0px;width: 100%;height: 100%;z-index: 2;}
.basket_wrapp .clicked > a{display:none;}

.basket_normal .basket_wrapp #compare_line .wraps_icon_block:before{background-position:-202px -4px;width:21px;top:0px;}
.basket_normal .basket_wrapp #compare_line .wraps_icon_block.fill:before{background-position:-239px -5px;}
.basket_normal .basket_wrapp .wraps_icon_block.delay:before{background-position:-280px -4px;width:21px;top:-1px;}
.basket_normal .basket_wrapp .wraps_icon_block.delay.fill:before{background-position:-392px -4px;}
.basket_normal .basket_wrapp .wraps_icon_block.basket:before{background-position:-321px -4px;width:21px;top: 10px;left: 9px;}
.basket_normal .basket_wrapp .wraps_icon_block.basket.fill:before{background-position:-354px -4px;}
.basket_normal .basket_wrapp .wraps_icon_block.basket{background:#eaebec;border-radius:4px;width: 40px;height: 39px;top: -11px;margin-bottom: -6px;}

.basket_normal .basket_wrapp .wraps_icon_block.basket .count{top:-4px;right:-6px;}

/*header cart*/
.basket_wrapp  .header-cart{float:left;}
.basket_wrapp .basket_block{position:relative;}
.basket_wrapp .link{display:block;position:absolute;left:-10px;top:-13px;right:-15px;bottom:-27px;z-index:2;}
.basket_wrapp .wraps_icon_block .count{position:absolute;right:-17px;top:-15px;left:auto;text-align:center;opacity:1;font-size: 12px;line-height: 13px;}
.basket_wrapp .empty_cart:not(.bcart) .wraps_icon_block.basket .count span, .basket_wrapp .basket_empty .wraps_icon_block.basket .count span, .basket_wrapp .basket_fly .basket_count.empty .wraps_icon_block.basket .count span{background: #424f60;color: #fff;}
.basket_wrapp .basket_fly .basket_count .wraps_icon_block.basket .count span{background: #424f60;color: #fff;}
.basket_wrapp .empty_cart .wraps_icon_block.basket .count, .basket_wrapp .empty_cart.ecart.bcart .wraps_icon_block.basket .count, .basket_wrapp .nitems.ecart .wraps_icon_block.basket .count{opacity:0;}
.basket_wrapp .empty_cart.bcart .wraps_icon_block.basket .count{opacity:1}
.basket_wrapp .wraps_icon_block .count > span{width:20px;background:#e3e3e3;display:block;height:20px;vertical-align:middle;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;line-height:20px;}
.basket_normal .basket_wrapp .wraps_icon_block .count span{height:19px;padding-top:1px;line-height:19px;}
.bx-firefox .basket_wrapp .wraps_icon_block .count span .items{position: relative;top: -1px;}
.basket_wrapp .wraps_icon_block .count a, .basket_wrapp .wraps_icon_block .count .text{display:block;text-decoration:none;font-size:11px;}
.basket_wrapp .basket_block .link{bottom:-24px;z-index:2;}
.basket_wrapp .basket_block .text{margin:-7px 0px 0px;}
.basket_wrapp .basket_block .text *{line-height:18px;}
.basket_wrapp .basket_block .title{font-size:14px;}
.basket_wrapp .basket_block .text .value{color:#5f5f5f;line-height:16px;max-width:67px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;}
.basket_wrapp .wraps_icon_block.basket{margin-right:19px;}
.basket_wrapp .wraps_icon_block.basket .count a{color:#fff;}

.basket_normal .popup{background:none;box-shadow:none;min-width:0px;z-index:11;width:141px;position:absolute;top:auto;right:0;left:auto;border-radius:0;}
.basket_normal .popup.card_popup_frame .basket_popup_wrapp{margin:0;}
.basket_normal .basket_wrapp .wraps_icon_block .count span{box-shadow: 0px 0px 0px 2px #fff;}

.basket_normal .popup.card_popup_frame .basket_popup_wrapp{width:397px;position:absolute;right:-11px;top:56px;display:none;border-top:2px solid #ddd;background:#FFFFFF;
-webkit-box-shadow:0px 2px 5px 0px rgba(0, 0, 0, 0.15);
-moz-box-shadow:0px 2px 5px 0px rgba(0, 0, 0, 0.15);
box-shadow:0px 2px 5px 0px rgba(0, 0, 0, 0.15);}
#basket_line .popup{display:block;}
.item-title  .props{margin:0px 0px 6px;}
.item-title  .props .item_prop, .item-title  .props .item_prop .title{line-height:16px;font-size:12px;}
.item-title  .props .item_prop .title{padding:0px 4px 0px 0px;}
.popup .cart_shell td.thumb-cell{padding:20px 10px 10px 20px;}
.popup .basket_popup_wrapp .cart_shell .item-title{padding:16px 20px 16px 10px;position:relative;}
.popup .cart_shell tr:first-child td{border-top:0px;}
#header .popup .cart_shell td{border-top:1px solid #e5e5e5;vertical-align:top;}

.popup .cart_shell .cost-cell .price{margin-top:1px;}
.card_popup_frame.popup  .remove-cell{position:absolute;top:18px;right:5px;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;}
.catalog_item:hover .item-title a.remove, .catalog_item .item-title a.remove:hover{border:0px;}
.basket_popup_wrapp .item-title .one-item span, .popup .basket_popup_wrapp .item-title .cost-cell span{font-size:13px;line-height:16px;}
.basket_popup_wrapp .item-title .one-item{float:left;}
.basket_popup_wrapp .item-title .cost-cell{float:right;}
.module-cart .remove-cell a, .module-cart .remove-cell a i, .cart_shell .remove-cell a, .cart_shell .remove-cell a i, .remove_item .remove a, .remove_item .remove a i,
.bx_item_set_hor .bx_item_set_hor_item a.remove, .bx_item_set_hor .bx_item_set_hor_item a.remove i, .remove, .remove i
{border-radius:20px;-moz-border-radius:20px;-webkit-border-radius:20px;display:inline-block;height:17px;width:17px;cursor:pointer;}
.module-cart .remove-cell a i, .cart_shell .remove-cell a i, .bx_item_set_hor .bx_item_set_hor_item a.remove i, .remove i{background:url('images/close_icons.png') 3px -23px no-repeat;}
.module-cart .remove-cell a:hover i, .cart_shell .remove-cell a:hover i, .bx_item_set_hor .bx_item_set_hor_item a.remove i, .remove:hover i{background-position:-17px -23px;}

.card_popup_frame.popup .total_wrapp{background:#f7f7f7;}
.card_popup_frame.popup .total_wrapp .total span, .card_popup_frame.popup .total_wrapp .price{font-size:13px;line-height:16px;float:left;}
.card_popup_frame.popup .total_wrapp .total{ white-space:nowrap;margin:0 0px 20px 0px;padding:15px 20px 14px 20px;border-bottom:1px solid #e5e5e5;border-top:1px solid #e5e5e5;}
.card_popup_frame.popup .total_wrapp .total .price{float:right;padding:1px 0px 0px;}
.total_wrapp .but_row1{text-align:center;padding:0px 20px 20px 20px;}

/*Top flexslider*/
.top_slider_wrapp .flex-direction-nav{opacity:0;visibility:hidden;-moz-transition:all 0.3s ease;-o-transition:all 0.3s ease;-ms-transition:all 0.3s ease;transition:all 0.3s ease;}
.top_slider_wrapp:hover .flex-direction-nav{opacity:1;visibility:visible;}
.flex-control-paging li a, .front_slider_wrapp .flex-control-nav  li a{display:inline-block;height:10px;width:10px;background:url('images/slider_pagination.png') 0px 0px no-repeat;cursor:pointer;font-size:0;}
.flex-control-nav  li a{background-position:-20px -20px;}
.top_slider_wrapp .flex-control-nav li a{background-position:-24px 0px;}
.flex-control-nav  li a:not(.touch):hover, .front_slider_wrapp .flex-control-paging li a.flex-active, .flex-control-paging li a.flex-active{background-position:-2px -20px;}
.flex-control-paging li a:active{background-position:-1px -39px;}
.top_slider_wrapp  .flex-control-paging li a:hover, .top_slider_wrapp  .flex-control-paging li a.flex-active{background-position:0px 0px;}
body .top_slider_wrapp .flex-direction-nav li{background:#fff;}
body .flexslider li, body .flex-direction-nav li{padding:0px;}
.top_slider_wrapp .flex-direction-nav li, .top_slider_wrapp .flex-direction-nav li a{height:42px;width:42px;}
.top_slider_wrapp .flex-direction-nav li{position:absolute;/*top:179px;*/top:50%;margin-top:-19px;right:20px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;z-index:2;}
.top_slider_wrapp .flex-direction-nav li:first-child{left:20px;}
.top_slider_wrapp .flex-direction-nav li a{background-image:url('images/arrows.png');}
.top_slider_wrapp .flex-direction-nav li.flex-nav-prev a.flex-prev{background-position:15px -95px;}
.top_slider_wrapp .flex-direction-nav li.flex-nav-prev:hover a.flex-prev{background-position:15px 11px;}
.top_slider_wrapp .flex-direction-nav li.flex-nav-next a.flex-next{background-position:-19px -95px;}
.top_slider_wrapp .flex-direction-nav li.flex-nav-next:hover a.flex-next{background-position:-19px 11px;}

.top_slider_wrapp .flexslider .banner_title span{font-size:30px;line-height:33px;font-weight:600;}
.top_slider_wrapp .flexslider  .text.center .banner_title, .top_slider_wrapp .flexslider  .text.center .banner_buttons{text-align:center;}
.top_slider_wrapp .flexslider  .text.center .banner_buttons{margin-top:25px;}
.top_slider_wrapp .flexslider .wrapper_inner{padding:0px;}
.top_slider_wrapp .flexslider .slides > li:after{content:"";position:absolute;bottom:0px;width:100%;height:2px;background:#ddd;left:0px;right:0px;display:block;z-index:2;}
.bx-mac .top_slider_wrapp .flexslider .slides > li{position:relative;left:-1px;}

/*news left start*/
.news_blocks{border:1px solid #eaebec;border-radius:2px;margin:0px 0px 20px;padding: 10px 19px 21px;}
.news_blocks .top_block{padding: 0px 0px 12px;margin:0px;}
.news_blocks .top_block .title_block{font-size:16px;color:#1d2029;}
.news_blocks .top_block a{float: right;padding: 7px 0px 0px;}

.news_blocks .info_block .item{padding:0px 0px 20px;margin:0px 0px 20px;border-bottom:1px solid #ebeef1;overflow: hidden;}
.news_blocks .info_block .item:last-child{border-bottom-width:0px;padding:0px;margin:0px;}
.news_blocks .info_block .item .image{border-radius:100%;width: 60px;height: 60px;overflow: hidden;float: left;box-shadow: inset 0 0 3px 0 rgba(0, 0, 0, .15);}
.news_blocks .info_block .item .image+.info{padding:0px 0px 0px 80px;}
/*news left end*/

/*Start page teasers block*/
.tizers_block *{line-height:18px;}
.tizers_block{font-size:0px;margin:0px -10px 0px;text-align:center;}
.tizers_block .item{display:inline-block;vertical-align:middle;font-size:0px;width:25%;color:#000000;box-sizing:border-box;padding:0px 10px 0px; -moz-transition:all 0.1s ease;-o-transition:all 0.1s ease;-ms-transition:all 0.1s ease;transition:all 0.1s ease;margin:0px 0px 26px;white-space:nowrap;}
.tizers_block .item .img, .tizers_block .item .title{font-size:13px;display:inline-block;vertical-align:middle;color:#555555;}
.tizers_block .item .img{max-width:60px;margin:0px 20px 0px 0px;}
.tizers_block .item .title{width:60%;text-align:left;margin:-6px 0px 0px;  white-space:normal;}
.tizers_block .item a{font-size:12px;text-decoration:none;color:#000000;line-height:16px;display:block;}

/* Start page float banners block */
.start_promo{width:100%;}
.start_promo .item{float:left;width:25%;border:1px solid #fff;border-bottom-width:2px;box-sizing:border-box; overflow:hidden;   position:relative;width:25%;padding-bottom:24%;float:left;height:0;-moz-transition:all 0.1s ease;-o-transition:all 0.1s ease;-ms-transition:all 0.1s ease;transition:all 0.1s ease;-webkit-backface-visibility:hidden;-moz-backface-visibility:hidden;
    -ms-backface-visibility:hidden;}

.start_promo .item:nth-child(3n), .start_promo  .item.wide100{border-right-width:0px;}
.start_promo .item.normal:nth-child(3n) {border-right-width: 1px;}
.start_promo .item img{max-height:268px; position:absolute;left:0;vertical-align:middle;}
.start_promo .item .opacity_block{position:absolute;display:block;width:100%;height:100%;background-color:#FFF;}
.start_promo .item:hover .opacity_block{opacity:0.1;z-index:11;}
.start_promo .item.wide50{width:50%;}
.start_promo .item.wide100{width:100%;}
.start_promo .item span.main_wrap{display:block; max-width:195px; bottom:20px;left:20px; position:absolute;z-index:10;color:#fff;-webkit-backface-visibility:hidden;-moz-backface-visibility:hidden;    -ms-backface-visibility:hidden;backface-visibility:hidden;display:none;}

.start_promo .item span.main_wrap i {display:block;font-style:normal;}

.start_promo .item.wide50 span.main_wrap{max-width:340px;}
.start_promo .item.wide100 span.main_wrap{max-width:500px;}
.start_promo .item p *, .start_promo .item p {color:#fff;}
.start_promo .item p{margin-bottom:0px;line-height:15px;}
.wrapper_inner .start_promo .item i span p span{line-height:16px;padding:0px 7px 7px;position:relative;margin:-11px 0px 0px;}
.wrapper_inner .start_promo .item i span p:first-child span{line-height:27px;padding-bottom:1px;margin-top:0px;}
.wrapper_inner .start_promo .item i span p .tizer_text{margin:3px 0px 0px;padding-top:5px;}

.start_promo .item  a{color:#fff;text-decoration:none;}
.start_promo .item  a:hover{color:#fff;text-decoration:none;}
.start_promo .item i.title span{font-weight:bold;font-size:18px;}
.bx-ie .start_promo.t1 .item i.title{position:relative;line-height:1;color:#fff;display:inline;white-space:pre-wrap;border:0 solid #00a7df;border-width:0.25em 0;}
.bx-ie .start_promo.t1.title, .bx-ie .start_promo1 .title:after{background-color:#00a7df;}
.start_promo .item i.price{margin-top:10px;}
.start_promo .item i.price span{font-size:16px;display:inline-block;line-height:19px;}
.start_promo .catalog_btn{margin:20px 0px 40px;text-align:center;}
.start_promo .item i.title span, .start_promo .item i.price span{box-decoration-break:clone;}

.wrap_tizer{position:absolute;bottom:20px;z-index:2;width:100%;color:#fff;transition: all ease 0.5s;}
.item:hover .wrap_tizer{}
.wrap_tizer .wrap_outer{position:relative;left:-3px;padding:3px 0 5px;font-size:16px; line-height:16px;background:#23618C;color:#FFF;display:inline;}
.wrap_tizer .wrap_outer.title{font-weight:500;font-size:18px;}
.wrap_tizer .wr_block{transition: all ease 0.1s;}
.wrap_tizer .wr_block.price{opacity: 0;visibility: hidden;height: 0px;color: #fff;font-size: 13px;max-height: 54px;overflow: hidden;}
.item:hover .wrap_tizer .wr_block.price{height: auto;opacity: 1;visibility: visible;display: block;margin: 10px 0px 0px;}
.wr_block.price .wrap_outer_desc{line-height:18px;font-size:13px;}
.wrap_tizer.center_blocks{text-align:center;}
.wrap_tizer.right_blocks{text-align:right;padding:0px;}
.wrap_tizer.dark_text .wrap_outer .inner_text{color:#1d1a1a;}
.wrap_tizer .wrapper_inner_tizer{padding: 0 33px 0 20px;}
.wrap_tizer.right_blocks .wrap_outer{left: -13px;}
.wrap_tizer.right_blocks .wrapper_inner_tizer{padding-right: 20px;}

.bx-firefox .wrap_tizer .wr_block.price{margin-top:11px;}
.wrap_tizer .wr_block.price .wrap_outer, .wrap_tizer .wr_block.price .wrap_outer .outer_text {padding-top:4px;}
.wrap_tizer .wrap_outer .outer_text{position:relative;left:15px;background:#23618C;padding:3px 0 5px;}
.wrap_tizer .wrap_outer .inner_text{position:relative;left:-7px;color:#FFF;font-style:normal;background:#23618C;z-index:1;}


/*flexslider*/
.wr > li{margin-left:15px;background:#fff !important;margin-right:0px;float:left;box-shadow:none;border:0px solid transparent;transition:all 0.2s ease;opacity:0;}
.right_block .wr li{margin-left:12px;}
.flex-viewport .wr li:first-child{margin-left:0px;}
.flex-viewport .wr > li:hover, .flex-viewport .wr > li.hover{border:0px solid transparent;box-shadow:0px 0px 14px rgba(0,0,0,0.10);-moz-box-shadow:0px 0px 14px rgba(0,0,0,0.10);-o-box-shadow:0px 0px 14px rgba(0,0,0,0.10);-webkit-box-shadow:0px 0px 14px rgba(0,0,0,0.10);height:auto !important;}

/*tabs*/
.specials_slider_wrapp, .tab_slider_wrapp, .specials.tab_slider_wrapp{padding:20px 0px 2px;clear: both;font-size: 0px;}
.tab_slider_wrapp{padding-top:20px;}
.catalog_detail + .tab_slider_wrapp, .catalog_detail + .clearfix + .tab_slider_wrapp {border-top: 1px solid #eaebec;padding-top: 21px;}
.catalog_detail .form .form_footer{margin:0;}
.specials_slider_wrapp ul.tabs, .tab_slider_wrapp  ul.tabs{margin:0px 0px 0px;}
.specials_slider_wrapp ul.tabs > li, .tab_slider_wrapp ul.tabs > li{margin:10px 14px 0 0;-moz-border-radius:0px;border-radius:0px;height:auto;}
.specials_slider_wrapp ul.tabs > li span, .tab_slider_wrapp ul.tabs > li span{font-size:16px;line-height:20px;text-transform:none;border-bottom-width:0px;padding:0px 0px 5px 0px;font-weight:500;}
.specials_slider_wrapp ul.tabs > li:hover span, .tab_slider_wrapp ul.tabs > li:hover span{color:#000000;}
.specials_slider_wrapp ul.tabs > li:first-child, .tab_slider_wrapp ul.tabs > li:first-child{padding-left:0px;}
.specials_slider_wrapp ul.tabs li.cur, .tab_slider_wrapp ul.tabs li.cur{background:none;}
.specials_slider_wrapp ul.tabs li.cur span, .tab_slider_wrapp ul.tabs li.cur span{color:#000000;border-bottom:2px solid #ddd;}
.specials_slider_wrapp ul.tabs li.cur:hover span, .tab_slider_wrapp ul.tabs li.cur:hover span{color:#333;}
.specials.tab_slider_wrapp ul.tabs_content{margin-bottom:35px;}

/*special front start*/
.best_block.tab_slider_wrapp ul.tabs_content{margin:16px -6px 0px;padding: 0px;}
.best_block.tab_slider_wrapp ul.tabs_content li.tab{margin:0px;padding:0px;position:static;overflow: visible;}
.best_block.tab_slider_wrapp ul.tabs_content li.tab > ul{margin:0px;}
.best_block.tab_slider_wrapp ul.tabs_content li.tab * {box-sizing:border-box;}
.best_block.tab_slider_wrapp ul.tabs_content li.tab .catalog_block{font-size:0px;}
.best_block.tab_slider_wrapp ul.tabs_content li.tab .catalog_block >div {display:inline-block;vertical-align:top;width:25%;padding:6px 6px;float:none;margin:0px;}
.bx-ie .best_block.tab_slider_wrapp ul.tabs_content li.tab .catalog_block >div{float:left;}
.best_block.tab_slider_wrapp ul.tabs_content li.tab .catalog_block .catalog_item_wrapp.col-3{width:33%;}
.best_block.tab_slider_wrapp ul.tabs_content li.tab .catalog_block .catalog_item_wrapp.col-2{width:50%;}
.best_block.tab_slider_wrapp ul.tabs_content li.tab .catalog_block .catalog_item_wrapp .catalog_item{margin:0px;padding:0px;overflow: visible;}
.best_block.tab_slider_wrapp ul.tabs_content li.tab .catalog_block .catalog_item_wrapp .catalog_item .inner_wrap{padding:20px;border:1px solid #eaebec;background: #fff;-webkit-transition: box-shadow ease-out 0.2s, border ease-out 0.2s;-moz-transition: box-shadow ease-out 0.2s, border ease-out 0.2s;-o-transition: box-shadow ease-out 0.2s, border ease-out 0.2s;
    transition: box-shadow ease-out 0.2s, border ease-out 0.2s;}
.footer_button{opacity: 0; visibility: hidden;height: 0;-webkit-transition: all .1s ease;-moz-transition: all .1s ease;transition: all .1s ease;text-align: center;font-size:13px;color:#333;}
.footer_button .name{color:#777;}
.footer_button .char .char_item{margin:0px 0px 3px;line-height: 18px;}
.footer_button .char .char_item:last-child{margin-bottom:0px;}
.item .catalog_item:hover .footer_button{opacity: 1;visibility: visible;height: 30px;margin: 11px 0px 0px;height:auto;}
.best_block.tab_slider_wrapp .item .catalog_item:hover .item_info, .block .catalog_block .catalog_item_wrapp .catalog_item:hover .item_info{height:auto !important;}
.best_block.tab_slider_wrapp ul.tabs_content li.tab .catalog_block .catalog_item_wrapp .catalog_item:hover .inner_wrap {border-color:#fff;box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.15);}
.best_block.tab_slider_wrapp .item .catalog_item .item_info {transition: height ease 0.8s 1.2s; text-align: center;}

.tab_slider_wrapp:not(.specials) .top_blocks{position:relative;padding:32px 0px 0px;border-top:1px solid #e5e5e5;}
.best_block.tab_slider_wrapp .top_blocks{padding:0px;border-top-width:0px;}

.catalog_block.items .image_wrapper_block{margin:0px auto 10px;}

.stickers{left:0px;top:14px;position:absolute;z-index: 2;line-height: 20px;}
.stickers [class*="sticker_"]{background-color: #4fad00;width:auto;height:24px;margin: 0px 0px 2px;position:relative;display:inline-block;color:#fff;font-size: 12px;line-height: 12px;padding: 6px 10px 0px;box-sizing: border-box;}
.bx-ie .stickers [class*="sticker_"]{padding-top:5px;}

.stickers *{text-align:left;}
.stickers .sticker_sale_text{background-image:none;background-color:#e52929;display:inline-block;color:#fff;width: auto;font-size: 12px;line-height: 12px;padding: 6px 10px 0px;position:relative;box-sizing: border-box;}
.stickers .sticker_sale_text:before, .stickers [class*="sticker_"]:before{position:absolute;top:0px;right:-5px;content:"";width:5px;height:100%;display:block;background:url('images/ai.png') -3px -43px no-repeat;}
.stickers [class*="sticker_"]:before{background-position:-3px -81px;}
.stickers .sticker_sale_text:before{background-position:-75px -43px;}
.stickers .sticker_hit{background-color:#2992d9;}
body .stickers .sticker_hit:before{background-position:-3px -162px;}
.stickers .sticker_stock{background-color:#ffc438;color: #333;}
body .stickers .sticker_stock:before{background-position:-3px -108px;}
.stickers .sticker_recommend{background-color:#893ca9;}
body .stickers .sticker_recommend:before{background-position:-3px -135px;}

.item .stickers{left: -25px;}
.display_list .item .stickers{left: -20px;top:7px;}

.catalog_block .catalog_item_wrapp .catalog_item .cost.prices{margin:11px 0px 0px;line-height:0px;}
.catalog_block .cost.prices .price{margin-bottom:8px !important;}

.rating{height: 20px;margin: 0px 0px 9px;}
.rating .iblock-vote{display:inline-block;margin:6px auto 0px;}
.description .rating .iblock-vote{margin-top:4px;}

/*special front end*/

.similar_products_wrapp .content_inner.tab{overflow:hidden;}

.wrapper_block .top_block{margin-bottom:30px;}
.recomendation.wrapper_block .top_block {border-top:1px solid #e5e5e5;margin-bottom: 20px;padding-top: 22px;}
.detail_footer .top_block{border-top:1px solid #E5E5E5;position:relative;/*z-index:-1;*/}
.wrapper_block .all_wrapp{position:relative;}
.wrapper_block .all_wrapp .content_inner.absolute{position:absolute;z-index:111;zoom:1;overflow:hidden;}
.tabs_content .flex-viewport, .wrapper_block .flex-viewport{overflow:visible !important;margin-top:26px;}
.specials_slider > li, .tabs_slider > li, .wrapper_block .wr > li{width:178px !important;padding:20px 20px 12px;opacity:0;min-height:305px;}
.specials_slider > li:hover, .tabs_slider > li:hover, .wrapper_block .wr > li:hover, .specials_slider > li.hover, .tabs_slider li.hover, .wrapper_block .wr li.hover{padding:20px 20px 20px;}

.image_wrapper_block, .image_wrapper_block a{max-width:170px;min-width:70px;height:170px;line-height:170px;margin:0 auto;padding:0px;vertical-align:middle;text-align:center;zoom:1;display:block;}
.list_item .image_wrapper_block, .list_item .image_wrapper_block a{position:relative;}
.table.catalog .module_products_list .foto-cell .image_wrapper_block, .table.catalog .module_products_list .foto-cell .image_wrapper_block a{position:relative;}
.image_wrapper_block a{position:relative;}
.image_wrapper_block a{background-position:50% 50%;background-repeat:no-repeat;}
.image_wrapper_block{margin:0px;}
.image_wrapper_block img{position:absolute;margin:auto;top:0;bottom:0;left:0;right:0;border:0;vertical-align:middle;max-width:100%;}

/*likes*/
.like_icons{position:absolute;top:14px;right:14px;z-index:53;}
.like_icons span {display:block;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;background:#fff;opacity:0;visibility:hidden;transition:opacity 0.3s ease;margin:0px 0px 5px;overflow: hidden;}
.like_icons span.added{opacity:0.6;visibility:visible;}
.catalog_item:not(.touch):hover .image_wrapper_block .like_icons span, .catalog_item.hover .image_wrapper_block .like_icons span{opacity:1;visibility:visible;}
.like_icons span i{width:26px;height:26px;display:block;background:url('images/icons_wish.png') 0px 0px no-repeat;}
.like_icons .wish_item i{background-position:3px -18px;}
.like_icons .compare_item i{background-position:-20px -18px;}
.like_icons .wish_item.added i{background-position:3px -46px;}
.like_icons .compare_item.added  i{background-position:-20px -46px;}
.like_icons span:hover{cursor:pointer;background-color:#e3e3e3;}
.like_icons .wish_item:hover i{background-position:3px -74px;}
.like_icons .compare_item:hover i{background-position:-20px -74px;}
.like_icons .wish_item.added:hover i{background-position:3px -46px;}
.like_icons .compare_item.added:hover i{background-position:-20px -46px;}

.bottom_slider .catalog_item .stickers, .basket .catalog_item .stickers{left: -24px;top: -6px;}
.bottom_slider .like_icons, .basket .like_icons{top: -6px;right: -10px;}

.catalog_item_wrapp:hover .like_icons span{opacity:1;visibility:visible;}

.description_wrapp .like_icons{position:static;font-size: 0px;margin: 23px 0px 0px;border-top: 1px solid #f6f6f7;padding: 14px 0px 0px;}
.description_wrapp .like_icons > div{display:inline-block;vertical-align:top;font-size: 13px;padding:0px 30px 0px 0px}
.description_wrapp .like_icons span{opacity: 1;visibility: visible;display:inline-block;vertical-align:middle;white-space: nowrap;}
.description_wrapp .like_icons span i{display:inline-block;vertical-align:middle;}
.description_wrapp .like_icons span div{margin:0px;display:inline-block;vertical-align:middle;padding: 0px 0px 0px 10px;}
.description_wrapp .like_icons span:not(.added):hover{background-color:#fff;}
.description_wrapp .like_icons span:not(.added):hover i{background-color:#e3e3e3;}
.list_item .description_wrapp .like_icons span.added, .list_item .description_wrapp .like_icons span.added:hover{background:#fff;}
.list_item .description_wrapp .like_icons span i{overflow: hidden;border-radius: 2px;}
.description_wrapp .like_icons span:not(.added):hover div{color: #333;}

.item_main_info .like_icons span{opacity: 1;visibility: visible;}


/*title and stock*/
.flex-viewport .catalog_item .item_info{border-top-width:0px;margin:9px 0px 0px;box-sizing:initial;padding:5px 0px;}
.flex-viewport .catalog_item .item_info .item-title a:hover, .flex-viewport .catalog_item:hover .item_info .item-title a{border-bottom-width:0px;}
.flex-viewport li:hover a{text-decoration:none;}
.all_wrapp.basket .flex-viewport li:hover .item_info{height:auto !important;}

/*price*/
.cost.prices .price, .module-cart .row_titles .item_title, .module-cart .row_values .price{font-size:18px;font-weight:600;line-height:15px;}
.compare_view .item_block .cost.prices .price{margin: 10px 5px 0px 0px;}
.information .cost.prices .price{line-height:20px;}
.cost.prices .price.only_price{margin:8px auto 2px;display: inline-block;float: none;white-space:normal;}
.cost.prices .price .measure{font-size:15px;}
.cost.prices .price_name{font-size:12px;line-height:15px;margin:8px 0px 5px;clear:both;}
.information .cost.prices .price_name:first-of-type{margin-top:0px;}
.information .cost.prices .price_name{margin-top:12px;}

.cost.prices .price.discount{display:inline-block;vertical-align:top;margin-top:0px;float:none;}
.cost .price{margin-right:7px;margin-left: 7px;}
.catalog_detail .cost .price, .table .cost .price, .list .cost .price{margin-left: 0px;}
.cost .price.discount strike, .row_values .price.discount strike, .cost .price.discount span, .row_values .price.discount span{font-size:13px;line-height:15px;font-weight:normal;color: #666;text-decoration:line-through;}
.display_list .cost.prices .price{font-size: 18px;}

.row_titles .w_title { margin-bottom: 5px; }

/*sales*/
.sale_block{margin:3px 0px 2px;clear:both;}
.sale_block .text, .sale_block .value{float:left;background:#ffd02e;padding:4px 8px 3px;font-size:11px;line-height:15px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;margin-top:1px;margin-bottom:1px;}
.sale_block .value{margin-right:2px;}

body .wrapper .catalog_item .item_info .buttons_block{margin-top:17px;text-align:center;}

/*brands front start*/
.brands_slider_wrapp{padding:25px 30px 27px;border-top: 1px solid #eaebec;margin: 45px 0px 0px;box-sizing: border-box;overflow: hidden;max-height:100px;}
.brands_slider_wrapp ul.brands_slider li a{margin:0 10px;display:block;}
.brands_slider_wrapp ul.brands_slider li:before{display:none;}
.brands_slider_wrapp .flex-viewport{height:48px;overflow:hidden;}
.brands_slider > li{line-height:48px;text-align:center;float:left;}
.brands_slider_navigation ul.flex-direction-nav{position:relative;height:0;zoom:1;}
.brands_slider > li a{text-decoration:none;}
.brands_slider_wrapp li img{
	-webkit-transition:all ease-out 0.2s;
    -moz-transition:all ease-out 0.2s;
    -o-transition:all ease-out 0.2s;
    transition:all ease-out 0.2s;
	filter:progid:DXImageTransform.Microsoft.Alpha(opacity=50);
	-moz-opacity:0.5;
	-khtml-opacity:0.5;
	opacity:0.5;
	filter:url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale");/* Firefox 10+, Firefox on Android */
	filter:gray;/* IE6-9 */
	-webkit-filter:grayscale(100%);
	max-width:120px;
}
.brands_slider_wrapp li img:hover{filter:progid:DXImageTransform.Microsoft.Alpha(opacity=100);-moz-opacity:1;khtml-opacity:1;opacity:1;filter:none;-webkit-filter:grayscale(0%);}
.brands_slider_wrapp .flex-direction-nav li a, .brands_slider_wrapp .flex-direction-nav li span, .module-pagination .flex-direction-nav li a, .custom_flex .flex-direction-nav li a, .custom_flex .flex-direction-nav li span{background:url('images/arrows2.png') 3px -20px no-repeat;}
.brands_slider_wrapp .flex-direction-nav li .flex-next, .module-pagination .flex-direction-nav li.flex-nav-next a, .custom_flex .flex-direction-nav li.flex-nav-next a, .custom_flex .flex-direction-nav li.flex-nav-next span{background-position:-72px -20px;}
.brands_slider_wrapp.flexslider .flex-direction-nav li:hover, .module-pagination .flex-direction-nav li:hover, .module-pagination .flex-direction-nav li:hover a, .custom_flex .flex-direction-nav li:hover, .custom_flex .flex-direction-nav li:hover a, .custom_flex .flex-direction-nav li:hover span {background-color: #fff !important;}
.brands_slider_wrapp .flex-direction-nav li:hover a.flex-next, .module-pagination .flex-direction-nav li.flex-nav-next:hover a, .custom_flex .flex-direction-nav li.flex-nav-next:hover a, .custom_flex .flex-direction-nav li.flex-nav-next:hover span{background-position:-71px 4px;}
.brands_slider_wrapp .flex-direction-nav li:hover a, .module-pagination .flex-direction-nav li:hover a, .custom_flex .flex-direction-nav li:hover a, .custom_flex .flex-direction-nav li:hover span{background-position:3px 4px;}

/*flex*/
.brands_slider.slides *{box-sizing:border-box;}
.brands_slider.slides >li{margin: 0px 0px 0px 30px;padding: 0px !important;}
.brands_slider.slides > li:first-child {margin-left: 0px;}
.brands_slider_wrapp .flex-direction-nav >li {position: absolute;top: 50%;z-index: 2;margin-top: -15px;}
.brands_slider_wrapp .flex-direction-nav >li.flex-nav-prev {left:0px;}
.brands_slider_wrapp .flex-direction-nav >li.flex-nav-next {right:0px;}

.brands_slider_wrapp.flexslider .slides img{display:inline-block;vertical-align: middle;}

/*brands front end*/

/*news*/
.wrap_md .news_wrap{width:68%;margin:0px 0px 38px;}
.news_block .news_items{font-size:0px;}
.news_block .news_items .item{display:inline-block;width:50%;vertical-align:top;padding:0px 20px 17px 0px;}
.news_block .news_items .item .image{float:left;width:90px;height:90px;margin-top:5px;text-align:center;}
.news_block .news_items .item .image img{display:inline-block;max-width:100%;max-height:100%;vertical-align:middle;-webkit-transition:all ease-out .2s;-moz-transition:all ease-out .2s;-o-transition:all ease-out .2s;transition:all ease-out .2s;}
.news_block .news_items .item .image + .info{padding-left:110px;}
.news{position:relative;}
.news .item .info .date{font-size:11px;line-height:20px;font-weight:500;}
.news .item .info .name{font-size:13px;text-decoration:none;margin:1px 0px 0px;font-weight:500;display:block;}
.news .item .info .name:hover{text-decoration:underline;  color:#333;}
.news .item .info .preview{margin:6px 0px 0px;font-size:12px;}

/*subscribe form*/
.wrap_md .subscribe_wrap{width:32%;margin:0px 0px 62px;}
.subscribe-form{margin:0px 0px 20px;background:#f6f6f7;border-radius:2px 2px 0px 0px;position:relative;}
.subscribe-form:before{content:"";width:100%;height:2px;display:block;position:absolute;bottom:0px;left:0px;right:0px;background:#ddd;}
.subscribe-form .wrap_bg{padding:14px 19px 21px;border:1px solid #eaebec;border-radius: 2px 2px 0px 0px;}
.subscribe-form .top_block{margin:0px;padding:0px;}
.subscribe-form .top_block .title, .subscribe-form .top_block .title div{font-size:16px;font-weight:500;color:#1d2029;margin:0px 0px 8px;}
.subscribe-form .top_block .more, .subscribe-form .top_block .more div{font-size:13px;color:#666666;line-height:16px;}

.subscribe-form form.sform{font-size:0px;margin:15px 0 0;}
.subscribe-form form.sform > div{display:inline-block;vertical-align:top;}
.subscribe-form .email_wrap, .subscribe-form_footer .email_wrap{position:relative;margin-right:5px;width:100%;}
.subscribe-form .email_wrap{margin:0px;}
.subscribe-form .email_wrap .email_input{background:#fff;font-size: 14px;padding: 5px 43px 5px 13px;}
.bx-firefox .subscribe-form .email_wrap .email_input{padding-top:4px;padding-bottom:6px;}
.bx-ie .subscribe-form .email_wrap .email_input{height:32px;}
.subscribe-form input.send_btn{position:absolute;top:0px;right:0px;font-size: 0px;text-indent: -9999px;width: 33px;height:32px;background:#ddd url('images/ai.png') -23px -39px no-repeat;border-radius: 0px 2px 2px 0px;}
.subscribe-form label.error, .subscribe-form_footer label.error{position:absolute;top:-19px;right:0px;}

/*akc front start*/
.news_akc_block .top_block{padding: 13px 0px 0px;margin: 0px 0px 13px;}
.news_akc_block .top_block a{font-size:13px;}
.news_akc_block .img{height:137px;line-height:137px;text-align:center;overflow:hidden;}
.news_akc_block .img img{vertical-align:middle;-webkit-transition:all ease-out .2s;-moz-transition:all ease-out .2s;-o-transition:all ease-out .2s;transition:all ease-out .2s;max-width: 100%;}
.news_akc_block .item .info{padding:13px 20px 18px;line-height:18px;}
.news_akc_block .item .info .date{line-height:18px;font-size:11px;color:#666;margin:0px 0px 2px;}
.news_akc_block .item .info .name{font-size:14px;display:block;}

.news_akc_block .item{box-shadow: 0 0 1px #a2a6aa inset;-webkit-transition: box-shadow ease-out 0.2s, border ease-out 0.2s;-moz-transition: box-shadow ease-out 0.2s, border ease-out 0.2s;-o-transition: box-shadow ease-out 0.2s, border ease-out 0.2s;transition: box-shadow ease-out 0.2s, border ease-out 0.2s;}
.news_akc_block .item:hover{box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.15);}

/*akc front end*/

/*stores list front*/
.block_wr{position:relative;}
.block_wr .bg_map{position:absolute;top:0px;left:0px;width:100%;height:100%;background:url('images/map_large.png') center 0px no-repeat;opacity:.07;}
.block_wr.light{background:#f7f7f9;}
.block_wr.dark .bg_map{opacity:0.03;}
.stores{font-size:0px;padding:0px 0px 55px;}
.block_wr .top_block{margin-bottom:29px;}
.block_wr.dark .top_block  .title_block, .block_wr.dark .stores .stores_list .item a span, .block_wr.dark .stores .stores_list .item .store_text .value {color:#fff;}
.block_wr .top_block a{display:none;}
.stores .stores_list, .stores .all_map{display:inline-block;vertical-align:top;}
.stores .stores_list{position:relative;max-width:844px;width:75%;box-sizing:border-box;}
.stores .flex-control-paging, .news_akc_block .flex-control-paging{padding-bottom:0px;margin:0px;position:absolute;}
.stores .stores_list .stores_list_wr > li:hover{box-shadow:none;border:1px solid #FFF;}
.stores .stores_list .stores_navigation{top:-60px;}
.stores_list .flex-direction-nav, .news_akc_block .flex-direction-nav{right:0px;position:absolute;top:0px;z-index:50;margin:0px;}
.stores_list .flex-direction-nav{top:-60px;}
.bx-ie .stores_list.t1 .flex-direction-nav{top:-70px;}
.bx-ie .stores .stores_list .stores_navigation{top:-70px;}
.stores .stores_list .item{padding:19px 25px 19px;border:1px solid #FFF;}
.stores .stores_list .item .wrapp_block{overflow:hidden;line-height:0px;}
.block_wr.dark .stores_list .item{background:transparent !important;}
.stores .stores_list .item a {text-decoration:none;display:inline-block;margin:0px 0px 8px;}
.stores .stores_list .item a span{font-size:14px;line-height:22px;font-weight:600;border-bottom-width:0px;}
.block_wr.dark .stores .stores_list .item a:hover span{color:#333;}
.stores .stores_list .item a .icon{display:inline-block;width:8px;height:10px;background:url('images/icons_wish.png') -2px -182px no-repeat;float:left;margin:6px 0px 0px;}
.block_wr.dark .stores .stores_list .item a .icon{background:url('images/icons_wish.png') -13px -182px no-repeat;}
.stores .stores_list .item a .text{padding:0px 0px 0px 23px;display:block;}
.stores .stores_list .item .store_text{margin:0px 0px 3px;font-size:12px;}
.stores .stores_list .item .store_text:last-child{margin-bottom:0px;}
.stores .stores_list .item .store_text .title{color:#8e8c8c;float:left;line-height:20px;}
.block_wr.dark .stores .stores_list .item .store_text .title{color:#fff;opacity:0.5;}
.stores .stores_list .item .store_text .value{display:block;padding:0px 0px 0px 63px;clear:right;line-height:20px;}
.stores .all_map{width:268px;margin:0px 0px 0px 20px;}
.block_wr.dark .stores .all_map{background:#fff;}
.stores .all_map a{display:block;padding:24px 30px 31px 42px;text-decoration:none;font-weight:600;font-size:0px;}
.stores .all_map a.wrapp_block{display:table-cell;vertical-align:middle;padding-bottom:20px;padding-top:20px;}
.stores .all_map a  > div{display:inline-block;vertical-align:middle;}
.stores .all_map a .icon{width:53px;height:58px;background:url('images/icons_wish.png') -61px -4px no-repeat;margin:0px 30px 0px 0px;}
.block_wr.dark .stores .all_map a .icon{background:url('images/icons_wish.png') -128px -4px no-repeat;}
.stores .all_map a .text{font-size:14px;line-height:18px;width:105px;}
.light .stores .all_map a{color:#fff;}

.block_wr.dark .flex-direction-nav li:hover a.flex-prev{background-position:10px -50px;}
.block_wr.dark .flex-direction-nav li:hover a.flex-next{background-position:-27px -50px;}
.block_wr.dark .flex-direction-nav li:hover{background:#fff;}

/*company text front*/
.wrap_more_item .more_text_item{display:none;overflow:hidden;}
.md-50.img{padding:35px 10px 0px 0px;text-align:center;overflow:hidden;}
.md-50 img{max-width:100%;}
.md-50.big{padding:50px 0px 56px 10px;}
.md-50 .title_block{margin:2px 0px 25px;}

/*viewed front*/
.viewed_block .rows_block{margin:0px -5px;white-space: nowrap;}
.viewed_block .rows_block .item_block{padding:0px 5px;}
.viewed_block .title_block{margin: 20px 0px 6px;}
.viewed_block .outer_wrap{padding:10px;overflow: hidden;margin:0px -10px;}
.viewed_block .item_block{}
.viewed_block .item_block .item{width:136px;padding: 20px 12px 10px;border: 1px solid #eaebec;background:#8a8a8a;opacity:0.05;border-radius:4px;-webkit-transition: box-shadow ease-out 0.2s, border ease-out 0.2s;-moz-transition: box-shadow ease-out 0.2s, border ease-out 0.2s;-o-transition: box-shadow ease-out 0.2s, border ease-out 0.2s;transition: box-shadow ease-out 0.2s, border ease-out 0.2s;}
.viewed_block .item_block .item.has-item:hover{box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.15);}
.viewed_block .item_block .item.has-item{background:#fff;opacity:1}
.viewed_block .image_wrapper_block, .viewed_block .image_wrapper_block a{height:85px;line-height:85px;}
.viewed_block .image_wrapper_block img{max-height: 100%;}
.viewed_block div.item-title a,.viewed_block div.item-title a span{line-height:18px;}
.viewed_block .cost .price, .viewed_block .cost.prices .price .measure{font-size:14px;}
.viewed_block .item_info{text-align: center;padding: 10px 0px 0px;}
.viewed_block .dark_link{color:#555 !important;}
.viewed_block .item_block .item-title{max-height: 57px;}

.viewed_block{border-bottom: 1px solid #eaebec;padding: 0px 0px 20px;}

/*footer start*/
#footer .wrapper_inner{background: #f6f6f7;}
#footer .footer_bottom_inner{padding: 25px 0px 39px;}

#footer ul, #footer ul li{vertical-align:top;}
#footer ul{margin:0px;}

/*footer phone*/
#footer .footer_bottom_inner .phone_block{font-size:10px;white-space: nowrap;padding: 0px 13px 0px 0px;}
#footer .footer_bottom_inner .phones .phone_wrap, #footer .footer_bottom_inner .phones .phone_wrap a{display:block;}
#footer .footer_bottom_inner .phones .phone_wrap a{font-size:18px;font-weight:500;}
#footer .footer_bottom_inner .phones, #footer .footer_bottom_inner .social_wrapper{float:right;}
#footer .footer_bottom_inner .phones .icons{margin: 0px 0px 0px;}
#footer .footer_bottom_inner .phones .order_wrap_btn{margin: 0px 0px 16px 38px;}

/*copyright*/
#footer  .copyright, #footer  .copyright *{font-size:12px;line-height:18px;}
#footer  .copyright{padding:0px 0px 17px;font-size: 13px;opacity: 0.6;}

#footer .mobile_copy{display:none;}

/*pay icons*/
.pay_system_icons i{display:inline-block;height:20px;width:34px;background:url(images/pay_icons.png) no-repeat;margin:0px 11px 0px 0px;}
.pay_system_icons span i:last-child{margin-right:0px;}
.pay_system_icons i.mastercard{background-position:0px -1px;}
.pay_system_icons i.visa{background-position:-46px -1px;}
.pay_system_icons i.yandex_money{background-position:-94px -1px;width:21px;}
.pay_system_icons i.webmoney{background-position:-128px -1px;margin-right:7px;}
.pay_system_icons i.qiwi{background-position:-172px -1px;margin-right:0px;}

/*footer menu*/
#footer .footer_inner .rows_block .item_block{padding-top:0px;padding-bottom:0px;}
#footer .footer_inner .menu_item a{display:inline-block;line-height:18px;}
#footer .footer_inner .submenu_top .menu_item a{text-transform:uppercase;font-weight:600;font-size:13px;}
#footer .footer_inner .submenu .menu_item{margin:0px;line-height: 18px;padding-left:0px;}
#footer .footer_inner .submenu .menu_item a.dark_link{font-size:13px;}
.submenu a.dark_link{color:#666666 !important;}
#footer .footer_inner .submenu .menu_item:before{display:none;}

/*footer social*/
#footer .footer_bottom_inner .links.rows_block{margin:0px -5px;max-width: 165px;min-width: 165px;}
#footer .footer_bottom_inner .links.rows_block .item_block{padding:5px 5px;}

#footer .footer_bottom_inner .small_title{color:#888888;font-size:13px;font-weight:500;margin: 0px 0px 3px;font-weight: 400;}

.soc_icons .item_block a, .bx-authform-social ul li .bx-authform-social-icon{width:31px;height:31px;display:block;background:url('images/social_icons.png') -2px -2px no-repeat;transition:opacity ease 0.5s;}
.soc_icons .item_block a:hover{opacity:0.8;}
.soc_icons .item_block .odn{background-position: -42px -2px;}
.soc_icons .item_block .fb{background-position: -82px -2px;}
.soc_icons .item_block .tw{background-position: -2px -42px;}
.soc_icons .item_block .inst{background-position: -122px -122px;}
.soc_icons .item_block .mail{background-position: -122px -2px;}
.soc_icons .item_block .youtube{background-position: -82px -122px;}
.soc_icons .item_block .google_plus{background-position: -42px -122px;}

.bx-authform-social ul{font-size: 0px;line-height: 0px;}
.bx-authform-social ul li{width:31px;height:31px;margin: 0px 5px 5px 0;}

/*popup*/
.popup.show{border-radius:0px;}
.popup .popup-intro{background:#fff !important;border-bottom:2px solid #ddd;border-bottom-width:2px !important;}
.popup .popup-intro .pop-up-title{font-size:26px;font-weight:500;line-height:18px;text-shadow:none;padding:35px 35px 36px;}
.popup .close, .popup .close  i, .popup-window-close-icon.popup-window-titlebar-close-icon{display:inline-block;width:19px;height:19px;border-radius:19px;-moz-border-radius:19px;-webkit-border-radius:19px;}
.popup .close{margin:0;position:absolute;right:33px;top:37px;cursor:pointer;}
.popup.show .close:hover, .popup-window-close-icon.popup-window-titlebar-close-icon:hover{box-shadow:none;}
.popup-window-close-icon.popup-window-titlebar-close-icon:after{background-position:1px 2px !important;}
.popup .close i{background-position:-1px -46px !important;}
.popup .close:hover i, .popup-window-close-icon.popup-window-titlebar-close-icon:hover:after{background-position:-15px 2px !important;}
.popup .close, .popup .close i{display: block;border-radius:0px;width:14px;height:14px;opacity:1;}
.bx-ie .popup .close:hover i, .bx-ie .popup-window-close-icon.popup-window-titlebar-close-icon:hover:after{background-position:-15px 2px !important;}
.popup .close:hover i{background-position: -30px -46px !important;}
.form-control label .star{margin:0;top:0px;}
.form-block-wr label .star{margin-left:4px;}
.popup .form-wr{padding:29px 35px 35px;}
.popup .form-control{margin:0px 0px 19px;}
.popup .but-r{padding:2px 0px 0px;}
.popup .form_txt{padding:32px 30px 20px;}
.popup .but-r .buttons{margin-top:17px;}
div[id^=wait_comp]{display:none;}
.popup .label_block_capcha{width:48%;}
.popup .img_block_capcha{width:52%;}

.popup div.form-control, .form_body div.form-control, .middle_info .sku_props .form-control{background-color:#fff;border: 0px solid #d5dadc;box-shadow: none;border-radius: 0px;height:auto;padding:0px;}
.popup div.form-control label, .form_body div.form-control label{font-weight:400;}

/*popup auth*/
.popup.enter_frame{max-width:700px;width:610px;}
.auth_wrapp .main_info{width:62%;border-right:1px solid #e5e5e5;}
.auth_wrapp .socserv{width:38%;padding:51px 35px 0px 35px;}
.form_wrapp .reg_new{margin:22px 0px 0px 0px;}
.more_text_small{font-size:12px;color:#b3b3b3;line-height:16px;padding:11px 0px 0px;}
.popup .prompt.remember label{font-size:12px;font-weight:normal;display:inline-block;zoom:1;vertical-align:middle;margin:0;top:-4px;position:relative;font-weight:normal;font-family:Ubuntu, Arial, Helvetica,  sans-serif;}
.popup .prompt.remember{display:inline-block;zoom:1;vertical-align:middle;float:none;margin:5px 0px 0px;white-space:nowrap;}
.popup .reg-new{padding:24px 35px 30px;text-align:left;background:#f7f7f7;border-top:1px solid #e5e5e5;}
.popup .prompt.remember  input{width:auto;margin:0px 4px 0px 0px;}
.popup .forgot{margin:2px 0px 0px 5px;float:right;}
.r .forgot {font-size:11px;position:relative;top:-2px;margin-left:5px;outline:none;}
.popup .captcha_wrapp input[type="text"]{max-width:180px;}
.soc-avt{color:#888;font-size:12px;}
.soc-avt.inline{padding:0px;}
.soc-avt .row{margin:12px 0px 0px;}
.soc-avt .row .auth span{display:none;}
.soc-avt .row a i.soc-icon, .soc-serv-main .row a i, .catalog_detail .b-share a span {width:31px;height:31px;display:inline-block;background:url('images/social_icons.png') -2px -2px no-repeat;transition:opacity 0.5s ease;}
.soc-avt .row a, .catalog_detail .b-share a{height:31px;width:31px;float:left;line-height:32px;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;text-decoration:none;cursor:pointer;padding:0px;}
.authorization-cols .col.authorization .soc-avt .row a, .soc-serv-main .row a, .soc-avt .row a, .catalog_detail .b-share a{margin:0px 5px 5px 0;}
.soc-avt .row .button.short{font-size:10px;line-height:16px;text-transform:uppercase;width:auto;}
.soc-avt .row .button.short{position:relative;top:-1px;}
.bx-firefox .soc-avt .row .button.short{padding-top:9px;padding-bottom:10px;}
.soc-avt .row input[type="text"]{margin:9px 5px 15px 0px;}
.popup .soc-avt .row input[type="text"]{background:#fff;}
.soc-avt .row form input[type="text"] + span:not(.bx-ss-icon), .soc-avt .row form input[type="text"] + label + span:not(.bx-ss-icon){font-size:12px;padding:0px 10px 0px 0px;}
.soc-avt .row input[type="text"]{width:100% !important;}
.soc-avt .row #bx_auth_serv_formOpenID input[type="text"], .soc-avt .row  #bx_auth_serv_form_inlineOpenID input[type="text"]{width:100%;}
#bx_auth_servform, .bx-auth-service-form{position:relative;clear:both;}
#bx_auth_servform > div, .bx-auth-service-form > div{position:relative;margin:19px 0px 0px;}
.soc-avt .row label.error{top:-10px;left:0px;}
.soc-avt .row #bx_auth_serv_formOpenID label.error{top:8px;}
.soc-avt .icon{text-indent:0px;padding:0px;}

.soc-avt .row a i.soc-icon.odnoklassniki, .soc-serv-main .row a i.soc-icon.odnoklassniki, .catalog_detail .b-share .b-share-btn__odnoklassniki span, .bx-authform-social ul li .bx-authform-social-icon.odnoklassniki {background-position:-42px -2px;}
.soc-avt .row a i.soc-icon.liveid, .soc-serv-main .row a i.soc-icon.liveid{background-position:-2px -82px;}
.soc-avt .row a i.soc-icon.google, .soc-serv-main .row a i.soc-icon.google, .bx-authform-social ul li .bx-authform-social-icon.google{background-position:-42px -42px;}
.soc-avt .row a i.soc-icon.google-plus, .soc-serv-main .row a i.soc-icon.google-plus, .bx-authform-social ul li .bx-authform-social-icon.google-plus{background-position:-42px -122px;}
.soc-avt .row a i.soc-icon.vkontakte, .soc-serv-main .row a i.soc-icon.vkontakte, .bx-authform-social ul li .bx-authform-social-icon.vkontakte{background-position:-2px -2px;}
.soc-avt .row a i.soc-icon.mymailru, .soc-serv-main .row a i.soc-icon.mymailru, .catalog_detail .b-share .b-share-btn__moimir span, .bx-authform-social ul li .bx-authform-social-icon.mymailru{background-position:-122px -2px;}
.soc-avt .row a i.soc-icon.twitter, .soc-serv-main .row a i.soc-icon.twitter, .catalog_detail .b-share .b-share-btn__twitter span, .bx-authform-social ul li .bx-authform-social-icon.twitter{background-position:-2px -42px;}
.soc-avt .row a i.soc-icon.facebook, .soc-serv-main .row a i.soc-icon.facebook, .catalog_detail .b-share .b-share-btn__facebook span, .bx-authform-social ul li .bx-authform-social-icon.facebook{background-position:-82px -2px;}
.soc-avt .row a i.soc-icon.livejournal, .soc-serv-main .row a i.soc-icon.livejournal, .bx-authform-social ul li .bx-authform-social-icon.livejournal{background-position:-122px -42px;}
.soc-avt .row a i.soc-icon.yandex, .soc-serv-main .row a i.soc-icon.yandex, .bx-authform-social ul li .bx-authform-social-icon.yandex{background-position:-82px -42px;}
.soc-avt .row a i.soc-icon.openid-mail-ru, .soc-serv-main .row a i.soc-icon.openid-mail-ru, .bx-authform-social ul li .bx-authform-social-icon.openid-mail-ru{background-position:-122px -82px;}
.soc-avt .row a i.soc-icon.liveinternet, .soc-serv-main .row a i.soc-icon.liveinternet, .bx-authform-social ul li .bx-authform-social-icon.liveinternet{background-position:-82px -82px;}
.soc-avt .row a i.soc-icon.blogger, .soc-serv-main .row a i.soc-icon.blogger, .bx-authform-social ul li .bx-authform-social-icon.blogger{background-position:-42px -82px;}
.soc-avt .row a i.soc-icon.openid, .soc-serv-main .row a i.soc-icon.openid, .bx-authform-social ul li .bx-authform-social-icon.openid{background-position:-2px -122px;}
.soc-avt .row a i.soc-icon.gplus, .soc-serv-main .row a i.soc-icon.gplus, .catalog_detail .b-share .b-share-btn__gplus span {background-position: -42px -122px;}
.soc-avt .row a i:hover{opacity:0.8;}

/*left menu*/
.index_bottom { margin-bottom: 20px; }
.banners_column{margin:0px 0px 20px;}
.small_banners_block .advt_banner { margin-top: 20px; }
.small_banners_block .advt_banner:first-child { margin-top: 0; }
.index_bottom .small_banners_block { margin-bottom: 0; }
.small_banners_block img{ max-width: 100%;    display: block; }
.index_bottom .banners_column { width: 220px; float: left; }


/*breadcrumbs*/
.breadcrumbs{margin:-7px 0px 11px;}
.breadcrumbs a{text-decoration:none;}
.breadcrumbs > .separator{position:relative;zoom:1;bottom:0px;display:inline-block;line-height:18px;margin:0 9px;border:0 !important;}
.breadcrumbs .drop:hover .separator{background:rgba(0, 0, 0, 0) url("images/bredcrumb_arrow.png") no-repeat scroll -1px 0;border:0 none !important;bottom:3px;display:inline-block;height:15px;line-height:18px;margin:0 4px;position:absolute;width:14px;z-index:1;font-size:0;}
.container .breadcrumbs a span, .container .breadcrumbs span{color:#b6b5b5;font-size:12px;}

/*register*/
.registraion-page .form-block{padding:0px 44px;}
.registraion-page .main_info{width:73%;padding:38px 61px 25px 0px;border-right:1px solid #e5e5e5;}
.registraion-page .top p{position:relative;padding:0px 0px 17px 42px;}
.registraion-page .top p:before{content:"";display:inline-block;width:13px;height:9px;background:url('images/icons_wish.png') -36px -4px no-repeat;vertical-align:top;margin:12px 21px 0px -35px;position:relative;z-index:2;}
.registraion-page .top p:after{content:"";display:inline-block;width:26px;height:26px;position:absolute;top:3px;left:0px;border-radius:26px;}
.iblock.label_block{width:59%;position:relative;vertical-align:top;}
.iblock.label_block label{padding:0px;margin-bottom:4px;}
.registraion-page .main_info .form-control{ margin:0px 0px 19px;}
.iblock.text_block{width:41%;padding:20px 0px 0px 25px;color:#b3b3b3;line-height:16px;vertical-align:top;font-size:12px;}
.iblock.text_block *{line-height:16px;}
.registraion-page .form-block .form-control input[type="password"]{width:100%;}
.label_block_capcha{position:relative;width:43%;}
.img_block_capcha{width:48%;padding:24px 0px 0px 18px;vertical-align:bottom;}
.img_block_capcha img{float:right;}
.img_block_capcha .reload{cursor:pointer;}
.registraion-page .social_block{width:27%;padding:34px 0px 38px 45px;}
.registraion-page .social_block  .row .title{margin:0px 0px 10px;}
.registraion-page .main_info .form-control.register-captcha{margin-bottom:29px;max-width:100%;}
.captcha-row.register-captcha .captcha_image{width:auto;}

/* catalog */
/* base catalog styles */
.right_block:after{content: '';clear: both;display: table;}
#content .right_block.catalog{zoom:1;padding:0px 0px 0px 210px;margin:-3px 0 0;overflow:visible;}
#content .right_block .inner_wrapper{position:relative;zoom:1;z-index:2;}
#content .left_block.catalog{margin-top:29px;width:210px;}
#content .left_block.catalog.horizontal{margin-top:3px;}
.catalog .item_wrap{}
.catalog .item_wrap:not(.touch):hover, .catalog .item_wrap.hover{z-index:1;box-shadow:0px 0px 20px rgba(0,0,0,0.10);-moz-box-shadow:0px 0px 20px rgba(0,0,0,0.10);-o-box-shadow:0px 0px 20px rgba(0,0,0,0.10);-webkit-box-shadow:0px 0px 20px rgba(0,0,0,0.10);}
.catalog .block .item_wrap:not(.touch):hover, .catalog .block .item_wrap.hover{border:1px solid #fff;}

.group_description{float:left;}
.catalog.right_block .group_description {padding: 14px 0 25px;width:100%;}
.catalog.right_block .bottom_nav + .group_description {padding-top: 19px;}

div.item-title{overflow:hidden;text-overflow:ellipsis;text-overflow:-o-ellipsis-lastline;display:-webkit-box;-webkit-line-clamp:50;-webkit-box-orient:vertical;white-space:normal;}
div.item-title a, div.item-title a span{font-size:13px;line-height:20px;display:block;font-weight:500;}
div.item-title a span {padding:0px 0px 0px;}

.item-stock{font-size:12px;line-height:15px;margin:6px 0px 2px;white-space: nowrap;}
.item-stock > span{display:inline-block;vertical-align:top;font-size:12px;color: #888;}
.item-stock .icon{width:14px;height:14px;background:url('images/ai.png') -92px -48px no-repeat;margin:1px 6px 0px 0px;}
.item-stock .icon.stock{background-position:-111px -50px;}
.counter_wrapp .more_text{color:#b3b3b3;font-size:11px;line-height:14px;margin:16px 0px 0px;white-space: normal;}

.ajax_load_btn{text-align:center;margin:1px 0px 15px;border: 1px solid #eaebec;cursor:pointer;}
.ajax_load_btn:hover{border-color: #babbbc;}

.bottom_nav{padding-bottom: 20px;}
.bottom_nav.block{padding-bottom: 25px;}
.bottom_nav .module-pagination{padding-bottom: 0;}
.module-pagination .nums{display:inline-block;position:relative;}
.more_text_ajax{font-size:13px;line-height:20px;font-weight:400;cursor:pointer;display:inline-block;position:relative;padding:10px 0px 10px 34px;color:#666666;}
.more_text_ajax:after{content:"";display:block;position:absolute;}
.more_text_ajax:after{width:17px;height:17px;left:5px;top:11px;background: #ddd url('images/ai.png') -464px -4px no-repeat;-webkit-transition:background 0.7s ease-in-out;-moz-transition:background 0.7s ease-in-out; -o-transition:background 0.7s ease-in-out; transition:background 0.7s ease-in-out;}
.more_text_ajax.loading:after{-webkit-animation:spinner .5s linear infinite !important;animation:spinner .5s linear infinite !important;-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d; -ms-transform-style:preserve-3d; transform-style:preserve-3d;}
.more_text_ajax:hover:after, .ajax_load_btn:hover .more_text_ajax:after{-webkit-animation:spinner .5s ease-out 1;animation:spinner .5s ease 1;-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d; -ms-transform-style:preserve-3d; transform-style:preserve-3d;}
/* WebKit  Opera */
@-webkit-keyframes spinner{
	from{
		-webkit-transform:rotate(360deg);
	}
	to{
		-webkit-transform:rotate(0deg);
	}
}
/* Other */
@keyframes spinner{
	from{
		-moz-transform:rotate(360deg);
		-ms-transform:rotate(360deg);
		transform:rotate(360deg);
	}
	to{
		-moz-transform:rotate(0deg);
		-ms-transform:rotate(0deg);
		transform:rotate(0deg);
	}
}
.no_goods{padding:30px 30px 63px;border-top:1px solid #e5e5e5;}
.catalog_block_view.no_goods{border-top-width:0px;}
.no_goods .no_products{position:relative;float:left;background:url('images/empty.png') 0px 0px no-repeat;margin:0px 0px -8px;}
.no_goods .no_products:before{content:"";position:absolute;width:54px;height:54px;background:#DDD;left:0px;top:8px;border-radius:100%;}
.no_goods .no_products:after{content:"";position:absolute;width:22px;height:22px;background:url('images/empty.png') 0px 0px no-repeat;top:23px;left:16px;}
.no_goods .button{float:right;margin:17px 0px 0px;}
.wrap_text_empty{padding:10px 0px 15px 97px;}

/*root level*/
.catalog_section_list.rows_block{margin:0px -6px;}
.catalog_section_list .item_block{padding:6px 6px;}
.catalog_section_list .section_item{line-height:20px;font-size:12px;padding:30px 30px;zoom:1;vertical-align:top;border:1px solid #eaebec;transition:box-shadow ease 0.2s, border ease-out 0.2s;}
.catalog_section_list .section_item:hover{box-shadow: 0px 0px 20px rgba(0,0,0,0.1);border-color:#fff;}
.catalog_section_list .section_item ul{margin: 0px;}

.section_item_inner .section_info a, .section_item_inner .section_info ul li.name a:hover{border-bottom:0px;font-weight:400;line-height:20px;font-size: 13px;}
.section_info .dark_link{color:#666666 !important;}
.section_info .dark_link span{color:#222222 !important;}
.catalog_section_list .section_item li.name a{text-decoration:none;}
.catalog_section_list .section_item li.name a span{font-size:16px;font-weight:500;line-height:18px;}
.catalog_section_list .section_item li.name{display:block;margin-bottom:8px;}
.catalog_section_list .section_item li.sect{display:inline-block;padding:0px 8px 0px 0px;margin: 0px;}
.catalog_section_list .section_item .image{width:140px;text-align: center;}
.catalog_section_list .section_item .desc .desc_wrapp{display:inline-block;padding:0px;margin:11px 0px 0px;color:#888888;font-size: 13px;}
.catalog_section_list.section .desc .desc_wrapp{margin-top:0px;}
.catalog_section_list.section .section_item li.name{margin-bottom:5px;}
.catalog_section_list.section{margin-bottom: 20px;}

/*catalog subscection*/
.articles-list .item .left-data{width:120px;float:left;}
.articles-list .item .left-data a{display:block;}
.articles-list .item .left-data a img{vertical-align:middle;}
.articles-list .item-title a span{display:inline-block;}
.articles-list .item .right-data .preview-text{font-size:13px;margin:0px 0px -5px;}
.articles-list .item .item-title{margin-bottom:9px;}
.articles-list .item .item-title a span{font-size:16px;}
.articles-list .item .item-title a{text-decoration:none;}
.articles-list .item .right-data{margin-left:150px;overflow:visible;}

/*filter*/
.bx_filter .form-control{margin-bottom:0;}
.bx_filter .bx_filter_section{border:1px solid #eaebec;background:#f9f9f9;border-radius:2px;position:relative;}
.bx_filter_param_label.disabled{opacity:0.4;cursor:default;}
.bx_filter .bx_filter_parameters_box{padding:13px 19px 14px;border-bottom:1px solid #eaebec;}
.bx_filter .bx_filter_parameters_box:hover{background:#fdfdfd;}
.bx_filter .bx_filter_button_box{clear:both;}
.bx_filter .bx_filter_button_box {text-align:center;padding:19px 17px 19px 19px;}
.bx_filter .bx_filter_parameters_box_title{font-size:13px;display:block;font-weight:600;cursor:pointer;position:relative;padding:0px 35px 0px 0px;color: #333;}
.bx_filter .bx_filter_parameters_box_title >span, .bx_filter .bx_filter_parameters_box_title >div{position:relative;display:inline-block;}
.bx_filter_parameters_box_title .hint .icon {position:relative;left:auto;right:-9px;z-index:200;}
.bx_filter .bx_filter_parameters_box_title:after, .bx_filter .bx_filter_parameters_box_title:before{position:absolute;content:'';}
.bx_filter .bx_filter_parameters_box_title:after{width:8px;height:5px;right:-3px;top:1px;content: "\f107";font-size: 16px;color: #888;}
.bx_filter .active .bx_filter_parameters_box_title:after{content: "\f106";}

.bx_filter .smartfilter .bx_ui_slider_track .bx_ui_slider_handle:hover{border-color:#000;}
.bx_filter .bx_filter_parameters_box_container .button.bx_filter_search_reset{color:#939393;border-color:#f6f6f7;}
.bx_filter .bx_filter_parameters_box_container .button.bx_filter_search_reset{padding-left:27px;padding-right:0px;}
.bx_filter .bx_filter_parameters_box_container .button.bx_filter_search_reset:hover{border-color:#f6f6f7;background:none;color:#333333;}
.bx_filter_search_reset:after{content:"\f00d";position: absolute;top: 8px;left: 11px;}

.bx_filter_button_box .bx_filter_block, .bx_filter_parameters_box.active .bx_filter_block{display:block;}
.bx_filter_vertical input[type="checkbox"] + label, .filter input[type="checkbox"] + label{padding-left:5px;position:relative;z-index:100;cursor:pointer;outline:none;}
.filter.label_block input + label{padding-left:23px;font-size:13px;color:#888;}
.bx_filter_vertical input[type="checkbox"] + label.dib, .bx_filter_vertical input[type="checkbox"] + label.pal{padding:0px 0px 0px 0px;margin-bottom:9px;margin-right:0px;}
.bx_filter_vertical input[type="checkbox"] + label.dib >span, .bx_filter_vertical input[type="checkbox"] + label.pal >span{margin:0px 9px 0px 0px;}
.bx_filter_vertical input[type="checkbox"] + label.sku, .sku_props .bx_item_detail_size ul li{display:inline-block;font-size:10px;border:1px solid #888888;padding:0 10px;text-align:center;margin:0px 5px 5px 0px;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;cursor:pointer;border-radius:2px;}
.bx_filter_vertical input[type="checkbox"] + label.sku{float:left;}

.bx_filter_vertical input[type="checkbox"] + label.sku span, .sku_props .bx_item_detail_size ul li span{font-size:10px;position:relative;display:block;}
.bx_filter_vertical input[type="checkbox"] + label.sku:hover span, .bx_filter_vertical input[type="checkbox"]:checked + label.sku span{color:#fff;}

.bx_filter_vertical input[type="checkbox"] + label.disabled{cursor:default;}
.filter input[type="checkbox"], .filter input[type="radio"]{display:none;}
.sku_props{margin:0px 0px 2px;}
.information .sku_props{margin-top:11px;}
.buy_block .sku_props{margin:0px;}
.sku_props .wrapper_sku > div{margin:0px 0px 8px;}
.sku_props .wrapper_sku > div:last-child{margin-bottom:0px;}
.bx_catalog_item_scu ul{font-size:0px;margin:0px;}
.bx_catalog_item_scu ul li, .bx_ordercart .bx_scu_scroller_container .bx_scu ul li{position:relative;z-index:9;cursor:pointer;outline:none;font-size:11px;margin:0px 0px 9px;padding:0px 9px 0px 0px;display:inline-block;}
.gifts .bx_catalog_item_scu ul li{margin-left:0px;}
.bx_scu_scroller_container .missing{opacity:0.4;}
.sku_props ul li:before{display:none;}
.sku_props .bx_item_section_name{color:#888888;font-size:12px;}
.bx_filter_vertical input[type="checkbox"] + label.sku.disabled:hover{background:#fff;color:#373737;border-color:#e5e5e5;}
.bx_filter_vertical input[type="checkbox"] + label.sku.disabled:hover span{color:#373737;}
.disabled{opacity:0.4;}
.bx_filter_vertical .bx_filter_block label:hover span.disabled *{color:#888;}
.bx_filter_vertical .bx_filter_block.limited_block{max-height:250px;overflow-y:auto;}

.button_block .to-order.button{border-color:#888888; color:#888888;}
.button.in-cart, .button.in-cart:hover{background:#4fad00;}

.bx_filter_vertical input[type="checkbox"]:checked + label:before, .bx_filter_vertical input[type="checkbox"] + label:not(.disabled):hover:before, .filter input[type="checkbox"]:checked + label:before, .filter input[type="checkbox"] + label:hover:before, .filter input[type="radio"]:checked + label:before,.filter input[type="radio"] + label:hover:before{display:inline-block;z-index:3;}
.bx_filter_vertical input[type="checkbox"]:checked + label:before, .bx_filter_vertical input[type="checkbox"]:checked + label:not(.disabled):hover:before, .filter  input[type="checkbox"]:checked + label:before, .filter input[type="checkbox"]:checked + label:hover:before, .filter input[type="radio"]:checked + label:before, .filter input[type="radio"]:checked + label:hover:before{z-index:-1;}
.bx_filter_vertical .filter input[type="radio"]:checked + label:before{z-index:0;}
.bx_filter_vertical input[type="checkbox"] + label:before, .filter input[type="checkbox"] + label:before, .filter input[type="radio"] + label:before, .bg_block:before{font-size:0;content:".";display:none;height:13px;width:13px;position:absolute;left:0px;top:0px;background:#ddd;z-index:-1;border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px;}
.bx_filter_vertical input[type="checkbox"] + label:after, .filter input[type="checkbox"] + label:after, .bg_block:after{font-size:0;content:".";display:block;height:13px;width:13px;position:absolute;left:0px;top:0px;background:url('images/input_icons.png') 0px -19px no-repeat;z-index:2;border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px;}
.bx_filter_vertical input[type="checkbox"]:checked + label:after, .filter input[type="checkbox"]:checked + label:after{background-position:0px 3px;}
.bx_filter_vertical input[type="checkbox"] + label.disabled:after{background-position:0px -41px;}
.filter input[type="radio"]:checked + label:after{background:url('images/input_icons.png') 1px -27px no-repeat;box-shadow:none;}
.bx_filter_vertical input[type="checkbox"]:checked + label.nab:before, .bx_filter_vertical input[type="checkbox"]+ label.nab:hover:before, .bx_filter_vertical input[type="checkbox"] + label.nab:after{display:none;}
.filter input[type="radio"] + label:after, .bg_block1:after{font-size:0;content:".";display:block;height:13px;width:13px;position:absolute;left:0px;top:0px;background:#ffffff;z-index:2;border-radius:100%;-moz-border-radius:100%;-webkit-border-radius:100%;box-shadow:0px 0px 0px 1px #cccccc inset;-moz-box-shadow:0px 0px 0px 1px #cccccc inset;-webkit-box-shadow:0px 0px 0px 1px #cccccc inset;}
.filter input[type="radio"] + label:before, .bg_block:before{height:13px;width:13px;border-radius:100%;-moz-border-radius:100%;-webkit-border-radius:100%;top:0px;}
.bg_block:before, .bg_block:after{width:26px;height:26px;display:inline-block;}
.bg_block:after{background:url('images/icons_wish.png') -36px -5px no-repeat;width:12px;height:8px;left:-36px;top:12px;}
.bg_block:before{z-index:2;top:3px;left:-44px;}
.filter.radio input[type="radio"] + label:after, .filter.radio input[type="radio"] + label:before{width:13px;height:13px;}
.filter.radio input[type="radio"] + label.disabled:hover:before, .filter.radio input[type="radio"] + label.disabled:after{background:#cccccc;}
.filter.radio input[type="radio"] + label.disabled{cursor:default;}
.filter.radio input[type="radio"]:checked + label:after{background-position:0px -98px;}
.bx_filter .bx_filter_parameters_box.active .bx_filter_block i{font-size:15px;font-style:normal;color:#596b70;display:block;padding-bottom:3px;}
.bx_filter .bx_filter_parameters_box_container{margin-top:15px;}
.bx_filter .bx_filter_parameters_box_container.pict_block{margin-top:17px;}
.bx_filter .bx_filter_button_box .bx_filter_parameters_box_container{margin-top:0px;font-size:0px;}
.bx-firefox .bx_filter .bx_filter_button_box .bx_filter_parameters_box_container #set_filter.button{margin-right: 3px;}
.bx_filter .bx_filter_parameters_box_container_block{font-size:11px;float:left;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:50%;color:#3f3f3f;}
.bx_filter .bx_filter_parameters_box_container .bx_filter_parameters_box_container_block:nth-child(2){text-align:right;}
.bx_filter .bx_filter_parameters_box_container .bx_filter_parameters_box_container_block:nth-child(1){padding-right:8px;}
.bx_filter .bx_filter_parameters_box_container .bx_filter_parameters_box_container_block:nth-child(2){padding-left:8px;}
.bx_filter .bx_filter_parameters_box_container .bx_filter_input_container input{padding:5px 8px 4px;background:#fff;}
.bx_filter .divider{width:8px;height:1px;position:absolute;top:15px;left:50%;margin-left:-4px;background:#e5e5e5;}
.bx_filter .bx_filter_parameters_box_container .bx_filter_calendar_container{max-width:100%;position:relative;}
.bx_filter .bx_filter_parameters_box_container .bx_filter_calendar_container input.calendar{padding:0 23px 0 4px;font-size:15px;}
.bx_filter .bx_filter_parameters_box_container .bx_filter_input_container img.calendar-icon{display:block;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;font-size:18px;top:0px;right:3px;}

.wrapp_all_inputs.wrap_md .iblock{width:100%;}
.filter_horizontal{padding:0px;overflow:hidden;}
.filter_horizontal .wrapp_all_inputs.wrap_md .wrapp_change_inputs {width:30%;position:relative;margin:0px 0px 4px;}
.filter_horizontal .wrapp_all_inputs.wrap_md .wrapp_slider  {width:70%;padding:0px 0px 0px 50px;}
.filter_horizontal .smartfilter .bx_ui_slider_track{margin-top:16px;}
.filter_horizontal .bx_filter .bx_filter_button_box{text-align:left;}
.filter_horizontal .bx_filter_vertical input[type="checkbox"] + label:not(.dib){float:left;margin-right:5px;}
.filter_horizontal .bx_filter .bx_filter_popup_result.right{left:0px;background:transparent;position:relative;color:#888;margin:0px;padding-left:0px;line-height:20px;vertical-align: middle;}
.filter_horizontal .bx_filter .bx_filter_popup_result.right a{display:none;}

.right_block .filter_horizontal .bx_filter .bx_filter_popup_result{top: -1px !important;}
.bx_filter .expand_block{display:none;}

.bx_filter #modef_mobile{display:none;}

/*Track*/
.bx_filter .bx_ui_slider_part{position:absolute;top:-3px;width:1px;height:10px;background:#e5e5e5;background: none;}
.bx_filter .bx_ui_slider_part.p1{left:-1px;}
.bx_filter .bx_ui_slider_part.p2{left:25%;}
.bx_filter .bx_ui_slider_part.p3{left:50%;}
.bx_filter .bx_ui_slider_part.p4{left:75%;}
.bx_filter .bx_ui_slider_part.p5{right:1px;}
.bx_filter .bx_ui_slider_part span{font-size:10px;position:absolute;top:-22px;left:50%;display:block;width:100px;margin-left:-50px;text-align:center;color:#b1b1b1;}
.bx_filter .bx_ui_slider_part.p2 span,
.bx_filter .bx_ui_slider_part.p3 span,
.bx_filter .bx_ui_slider_part.p4 span{color:#b1b1b1;display:none;}
.bx_filter .bx_ui_slider_part.first span{text-align:left;left:0px;margin-left:0px;}
.bx_filter .bx_ui_slider_part.last span{text-align:right;left:auto;right:0px;margin-left:0px;}
.bx_filter .bx_ui_slider_range,
.bx_filter .bx_ui_slider_pricebar,
.bx_filter .bx_ui_slider_pricebar_VD,
.bx_filter .bx_ui_slider_pricebar_VN,
.bx_filter .bx_ui_slider_pricebar_V{position:absolute;top:0px;bottom:0px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;border-right:1px solid #FFF;}
.bx_filter .bx_ui_slider_range{z-index:auto;background:#cccccc;}
.bx_filter .bx_ui_slider_pricebar{z-index:100;}
.bx_filter .bx_ui_slider_pricebar_VD{z-index:60;background:#979797;}
.bx_filter .bx_ui_slider_pricebar_VN{z-index:70;background:#e5e5e5;}
.bx_filter .bx_ui_slider_pricebar_V{z-index:80;background:#cccccc;}
.bx_filter .bx_ui_slider_handle{position:absolute;top:100%;width:22px;height:22px;}
.bx_filter .bx_ui_slider_handle:hover{-webkit-cursor:grab;-ms-cursor:grab;-o-cursor:grab;cursor:grab;}
.bx_filter .bx_ui_slider_handle:active{-webkit-cursor:grabbing;-ms-cursor:grabbing;-o-cursor:grabbing;cursor:grabbing;}
.bx_filter .bx_ui_slider_handle.left{left:0;margin-left:-8px;}
.bx_filter .bx_ui_slider_handle.right{right:0;margin-right:-10px;}

/*Select*/
.bx_filter .bx_filter_select_block, .common_select .common_select-link{position:relative;display:block;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;height:30px;margin:0 0px 5px;padding:0 33px 0 7px;border-radius:2px;background:#f7f7f7;border:1px solid #e5e5e5;cursor:pointer;}
.bx_filter .bx_filter_select_text, .common_select .common_select-link .ik_select_link_text{font-size:12px;line-height:28px;max-width:100%;height:30px;cursor:pointer;vertical-align:middle;white-space:nowrap;text-overflow:ellipsis;-ms-text-overflow:ellipsis;}
.bx_filter .bx_filter_select_block:hover .bx_filter_select_arrow, .common_select .common_select-link:hover .trigger, .common_select .common_select-link.opened .trigger{background:#e3e3e3;}
.bx_filter .bx_filter_select_block:hover .bx_filter_select_arrow:before, .common_select .common_select-link:hover .trigger:before, .common_select .common_select-link.opened .trigger:before{background-position:-36px -174px;}
.bx_filter .bx_filter_select_text.fix{min-width:120px;}
.bx_filter .bx_filter_select_text label{cursor:pointer;}
.bx_filter .bx_filter_select_arrow, .common_select .common_select-link .trigger{position:absolute;top:0;right:0;width:26px;height:28px;cursor:pointer;border-left:1px solid #E5E5E5;background:#fff;text-align:center;line-height:32px;}
.bx_filter .bx_filter_select_arrow:before, .common_select .common_select-link .trigger:before{content:"";display:inline-block;width:7px;height:4px; background:url('images/arrows.png') -1px -174px no-repeat;}

.common_select{width:100% !important;font-size:0px;}
.common_select select{display:none;}
.ik_select_dropdown.common_select-dd{background:#fff;box-shadow:0px 1px 4px rgba(0,0,0,.2);}
.ik_select_dropdown.common_select-dd ul li:before{display:none;}
.scroller{overflow:auto;width:100%;height:100%;border:0;}
.ik_select_list .ik_select_list_inner{position:static !important;}
.ik_select_option_disabled{pointer-events:none;cursor:default;display:none;}
.ik_select_list .ik_select_list_inner ul li{text-align:left;padding:4px 9px 4px 9px;cursor:pointer;}
.ik_select_list .ik_select_list_inner ul li:hover, .bx_filter_select_popup ul li label:hover{background:#e3e3e3;}
.ik_select_list .ik_select_list_inner ul li.ik_select_active, .bx_filter_select_popup ul li label.selected{background:#ddd;color:#fff;}
.ik_select_list .icon_color, .common_select .icon_color{display:inline-block;width:16px;height:16px;vertical-align:top;border:2px solid #FFF;margin:0px 7px 0px 0px;}
.common_select .icon_color {margin-top:4px;}
.common_select .common_select-link.img, .ik_select_list .ik_select_list_inner ul li.img{padding-left:4px;}
.ik_select_list .ik_select_list_inner ul li.img{padding-left:5px;}

.catalog_detail .common_select .common_select-link, .bx_section  .common_select-link{height:37px;}
.catalog_detail .common_select .common_select-link .ik_select_link_text, .bx_section .common_select-link .ik_select_link_text{line-height:35px;}
.catalog_detail .common_select .common_select-link .trigger, .bx_section .common_select-link .trigger{line-height:40px;height:35px;width:34px;}
.catalog_detail .common_select .icon_color{margin-top:7px;margin-left:4px;}
.detail_page .ik_select_list .ik_select_list_inner ul li , .order_page .ik_select_list .ik_select_list_inner ul li{padding:8px 9px 9px 9px;}
.detail_page .ik_select_list .ik_select_list_inner ul li.img, .order_page .ik_select_list .ik_select_list_inner ul li.img{padding-left:9px;}
.catalog_detail .sku_props .bx_item_detail_size ul li{margin:0px 6px 6px 0px;}
.bx_filter_vertical input[type="checkbox"], .filter input[type="radio"] {display:none;}

/*Select popup*/
div[id^=smartFilterDropDown]{max-width:170px;width:100%;max-height: 205px;overflow-y: auto;}
div[id^=smartFilterDropDown] .popup-window{width:100%;border:0px;box-shadow:0px 1px 4px rgba(0,0,0,.2);border-radius:2px;}
div[id^=smartFilterDropDown] .popup-window-top-row, div[id^=smartFilterDropDown] .popup-window-left-column, div[id^=smartFilterDropDown] .popup-window-right-column, div[id^=smartFilterDropDown] .popup-window-bottom-row{display:none;}
.popup-window .popup-window-content{}
.bx_filter_select_popup{padding:0;}
.bx_filter_select_popup ul{margin:0;padding:0;list-style:none;}
.bx_filter_select_popup ul li{display:block;text-align:left;vertical-align:middle;}
.bx_filter_select_popup ul li:first-child{border:0px !important;padding:0px !important;margin:0px !important;}
.bx_filter_select_popup ul li:before{display:none;}
.bx_filter_select_popup ul li label{font-size:12px;display:block;overflow:hidden;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;cursor:pointer;padding:4px 9px 4px 9px;vertical-align:middle;white-space:nowrap;text-overflow:ellipsis;-ms-text-overflow:ellipsis;}
.bx_filter_select_popup ul li label.disabled{color:#b8b8b8;background:transparent;}

/*TAGS*/
.bx_filter.bx_horizontal .bx_filter_parameters_box.tags{width:100%;clear:both}
.bx_filter .bx_filter_tag{padding:18px;border:1px solid #aed5e0;border-radius:5px;background:rgba(151,214,233,.33);}
.bx_filter .bx_tag_link{font-size:12px;text-decoration:none;color:#68939e;border-bottom:1px solid;text-shadow:none;}
.bx_filter .bx_tag_link.active,
.bx_filter .bx_tag_link:hover{color:#1d3d46;border-bottom:none;}

/*LABEL*/
.bx_filter .bx_filter_param_label, .filter label{position:relative;display:block;margin:0px 0px 2px;}
.radio.filter label{display:inline-block;line-height:12px;cursor:pointer;}
.bx_filter .bx_filter_param_label:last-child{}
.bx_filter .bx_filter_param_label.dib{display:inline-block;}
.bx_filter .bx_filter_param_text{line-height:30px;position:relative;display:inline-block;margin:0 5px 0px 4px;vertical-align:middle;text-align:center;cursor:pointer;}
.bx_filter .disabled  .bx_filter_param_text{cursor:default;}
.bx_filter .bx_filter_param_label.disabled .bx_filter_param_text{}
.bx_filter_select_popup .bx_filter_param_label.active{background:#f3f8fa;}

/*Checkbox / Radio*/

.bx_filter_input_checkbox{position:relative;display:block;clear:both;min-height:20px;}
.bx_filter .sku .bx_filter_input_checkbox{min-height:auto;}
.bx_filter_input_checkbox input[type=radio],
.bx_filter_input_checkbox input[type=checkbox]{position:relative;top:4px;float:left;}
.bx_filter .bx_filter_input_checkbox .bx_filter_param_text, .filter label > span{display:block;line-height:14px;margin-left:18px;text-align:left;}
.bx_filter .filter label > span{margin:0px;}
.bx_filter .sku .bx_filter_input_checkbox .bx_filter_param_text, .sku_props .bx_item_detail_size ul li span{display:block;line-height:15px;margin:0px;text-align:center;padding:7px 0px 7px;font-size:13px;}
.bx_item_list_you_looked_horizontal .bx_item_detail_size ul li.active:hover span{color:#fff;}
.bx_filter .bx_filter_input_checkbox input + .bx_filter_param_text{line-height:21px;}

/*BTN*/
.bx_filter .bx_filter_param_btn, .bx_catalog_item_scu .bx_item_detail_scu ul li .cnt{
	display:inline-block;
	width:26px;
	height:26px;
	text-align:center;
	text-decoration:none;
	color:#000;
	vertical-align:middle;
	box-shadow:0px 0px 1px rgba(0,0,0,.1) inset;
	border-radius:2px;
	background:#fff;
	-webkit-transition:border .3s ease, box-shadow .1s ease, color .3s ease;
	-moz-transition:border .3s ease, box-shadow .1s ease, color .3s ease;
	-ms-transition:border .3s ease, box-shadow .1s ease, color .3s ease;
	-o-transition:border .3s ease, box-shadow .1s ease, color .3s ease;
	transition:border .3s ease, box-shadow .1s ease, color .3s ease;
}
.bx_filter .bx_filter_param_label.active .bx_filter_param_btn{border-color:#fff;}

/* --- colors */
.bx_filter .bx_filter_param_label.disabled .bx_filter_param_btn.bx_color_sl{background:transparent;box-shadow:none}
.bx_filter .bx_filter_param_label.disabled .bx_filter_param_btn.bx_color_sl{position:relative;}

/*icon*/
.bx_filter_select_popup .bx_filter_select_text_icon,
.bx_filter .bx_filter_select_text_icon{line-height:33px;position:relative;display:inline-block;width:24px;height:24px;margin-top:-2px;margin-right:2px;vertical-align:middle;border-radius:2px;}
.bx_filter_select_popup .bx_filter_btn_color_icon,
.bx_filter .bx_filter_btn_color_icon, .bx_catalog_item_scu .bx_item_detail_scu ul li .cnt_item, .bx_scu_scroller_container ul li .cnt_item{line-height:26px;position:relative;top:0px;border-radius:1px;display:inline-block;width:26px;height:26px;border:0px solid #fff;vertical-align:middle;
	-webkit-background-size:cover;background-size:cover;box-shadow:0px 0px 0px 1px rgba(0,0,0,.1) inset;}


.bx_filter .bx_filter_param_label.active .bx_filter_btn_color_icon{box-shadow: 0px 0px 0px 2px #fff inset, 0px 0px 0px 2px #ddd;}
.bx_filter .bx_filter_btn_color_icon:hover, .bx_catalog_item_scu .bx_item_detail_scu ul li:not(.active):not(.bx_active) .cnt_item:hover, .bx_scu_scroller_container ul li:not(.active):not(.bx_active) .cnt_item:hover/*, .bx_scu_scroller_container ul li:not(.bx_active) .cnt_item:hover*/{box-shadow:0px 0px 0px 2px rgba(0,0,0,.1) inset;}
.bx_filter .bx_filter_select_text .bx_filter_btn_color_icon, .popup-window .bx_filter_btn_color_icon{border-radius:0px;width:16px;height:16px;}
.bx_filter label.pal:hover .bx_filter_param_btn, .bx_filter .bx_filter_param_label.active .bx_filter_param_btn, .bx_catalog_item_scu .bx_item_detail_scu ul  li.active span:not(.cnt_item){background:#ddd;}
.bx_filter label.dib:not(.active):hover .bx_filter_param_btn, .bx_catalog_item_scu .bx_item_detail_scu ul li:hover span:not(.cnt_item){background:#e5e5e5;}
.bx_filter label.dib.disabled:hover .bx_filter_param_btn{background:#fff;}
.bx_filter .pict{display:inline-block;margin:-2px 0px 0px;float:left;}
.bx_filter_select_popup .bx_filter_btn_color_icon{margin:0 0px 0px -3px;top:0;vertical-align:middle;}
.bx_filter_select_popup .bx_filter_param_text{margin:0 0px 0px 3px;}
.bx_filter .bx_filter_select_block .bx_filter_btn_color_icon{top:-1px !important;margin:0px 0px 0px -2px;}
.bx_filter_btn_color_icon.all{position:relative;border:none;box-shadow:none}
.bx_filter_btn_color_icon.all:after,
.bx_filter_btn_color_icon.all:before{position:absolute;width:60%;height:60%;background:#fff;content:" ";box-shadow:inset 0 0 0 1px rgba(0,0,0,.2);}
.bx_filter_btn_color_icon.all:after{right:0;bottom:0;}
.bx_filter_btn_color_icon.all:before{top:0;left:0;}
.bx_filter .bx_filter_popup_result{font-size:12px;font-weight:400;line-height:51px;position:absolute;z-index:930;display:none;margin-top:-14px;margin-left:-4px;padding:0 20px;white-space:nowrap;color:#fff;}
.bx_filter .bx_filter_popup_result a{margin:0px 0px 0px 18px;}
.bx_filter .bx_filter_popup_result.right{left:102%;}
.bx_filter .bx_filter_popup_result.left{right:102%;}
.bx_filter .button{padding-left:11px;padding-right:12px;}
.bx-firefox .bx_filter .button{padding-right:10px;}
.bx_filter .button#set_filter{margin:0px 10px 0px 0px;}
.bx_filter .bx_filter_block .clb{clear:both;}

/*sort catalog*/
.sort_header{height:29px;position:relative;zoom:1;/*display:none;*/opacity:1;}
.sort_header.view_block{border-bottom:1px solid #e5e5e5;}
.sort_header .sort_display{float:right;font-size:0;}
.sort_header .sort_filter{float:left;}
.sort_header .sort_filter a{display:inline-block;text-decoration:none;color:#a5a3a3;margin:0px 20px 0px 0px;}
.sort_header .sort_filter a:last-child{margin-right:0px;}
.sort_header .sort_filter a .icon{content:"";display:none;background:url('images/sort_icons.png')  -42px 3px no-repeat;width:15px;height:13px;vertical-align:top;margin:0px 3px 0px 0px;}
.sort_header .sort_filter a.SHOWS .icon{background-position:-20px -77px;}
.sort_header .sort_filter a.SHOWS:hover .icon,.sort_header .sort_filter a.SHOWS.current .icon{background-position:-2px -77px;}
.sort_header .sort_filter a.NAME .icon{background-position:-20px -95px;}
.sort_header .sort_filter a.NAME:hover .icon,.sort_header .sort_filter a.NAME.current .icon{background-position:-2px -95px;}
.sort_header .sort_filter a.PRICE .icon{background-position:-20px -114px;}
.sort_header .sort_filter a.PRICE:hover .icon,.sort_header .sort_filter a.PRICE.current.icon{background-position:-2px -114px;}
.sort_header .sort_filter a.QUANTITY .icon{background-position:-21px -134px;}
.sort_header .sort_filter a.QUANTITY:hover .icon,.sort_header .sort_filter a.QUANTITY.current.icon{background-position:-2px -134px;}
.sort_header .sort_filter a span{font-size:12px;line-height:13px;}
.sort_header .sort_filter a i.arr{display:inline-block;height:20px;width:18px;}
.sort_header .sort_filter a i.arr:after{content:"\f106";position:absolute;top: 1px;left: 5px;}
.sort_header .sort_filter a > span{vertical-align:top;float:left;}
.sort_header .sort_filter a i.arr{/*background:none;background:url('images/sort_icons.png')  -42px 3px no-repeat;*/position:relative;}
.sort_header .sort_filter a:hover i.arr{background-position:-25px 3px;}
.sort_header .sort_filter a.current.desc:hover i.arr, .sort_header .sort_filter a.current.desc i.arr{background-position:5px 3px;}
.sort_header .sort_filter a.desc i.arr:after{content:"\f107";}
.sort_header .sort_filter a.current:hover i.arr, .sort_header .sort_filter a.current i.arr{background-position:-23px 3px;}
.sort_display a, .sort_display a i{display:inline-block;height:13px;width:13px;line-height:20px;}
.sort_display a{margin:0px 0px 0px 15px;}
.sort_display a i{background:url('images/sort_icons.png') 0 0 no-repeat;}
.sort_display a.block i{background-position:-1px -41px;}
.sort_display a.block.current i, .sort_display a.block:hover i{background-position:-1px -23px;}
.sort_display a.list i{background-position:-19px -41px;}
.sort_display a.list.current i, .sort_display a.list:hover i {background-position:-19px -23px;}
.sort_display a.table i{background-position:-37px -41px;}
.sort_display a.table.current i, .sort_display a.table:hover i{background-position:-37px -23px;}

/*catalog menu*/
.left_block .internal_sections_list .title{padding:14px 19px 13px 19px;border-bottom:1px solid transparent;position:relative;white-space:nowrap;font-size:13px;line-height:18px;font-weight:500;border:1px solid #e5e5e5;}
.left_block .internal_sections_list .title .inner_block{position:relative;cursor:pointer}
.left_block .internal_sections_list .title .hider{display:inline-block;height:5px;width:8px;background:url('images/arrows.png') -35px -162px no-repeat;cursor:pointer;top:7px;right:0px;position:absolute;}
.left_block .internal_sections_list .title .inner_block:before{width:16px;height:16px;right:-4px;margin-top:1px;border-radius:16px;display:none;content:"";position:absolute;}
.left_block .internal_sections_list .title .inner_block:hover:before{display:block;}
.left_block .internal_sections_list .title .inner_block:hover .hider{background-position:-19px -143px;top:6px;}
.left_block .internal_sections_list .title .hider.opened{background-position:-1px -162px;}
.left_block .internal_sections_list .title .inner_block:hover .hider.opened{background-position:-1px -143px;top:7px;}

.left_block .internal_sections_list ul.sections_list_wrapp{margin:1px 0px 0px;}
.left_block .internal_sections_list ul.sections_list_wrapp > li.item:first-child{border-top:0;}
.left_block .internal_sections_list li{position:relative;zoom:1;background:#f7f7f7;}
.bx_filter_container_title, .left_block .internal_sections_list ul.sections_list_wrapp > li.item{border-top:1px solid #fff;}
.left_block .internal_sections_list li.depth3{margin-bottom:0px;}
.left_block .internal_sections_list li.depth3 .menu_title{text-decoration:none;padding-bottom:6px;}
.left_block .internal_sections_list li a{text-decoration:none;padding:9px 19px;width:100%;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;display:inline-block;overflow:hidden;vertical-align:top;*display:inline;zoom:1;}
.left_block .internal_sections_list li a span{font-size:12px;line-height:16px;}
.left_block .internal_sections_list li.cur a span{border-bottom:1px solid transparent;}
.left_block .internal_sections_list ul.sections_list_wrapp > li.item:hover > a{z-index:100;}
.left_block .internal_sections_list .child_wrapp ul > li{background:#fff;position:relative;display:block;margin-left:9px;}
.left_block .internal_sections_list .child_wrapp ul.child li:after{content:"";display:block !important;position:absolute;left:0px;top:10px;width:2px;height:2px;background:#1d1a1a;}
.left_block .internal_sections_list ul.sections_list_wrapp > li.item.cur .child_container{display:block;}
.left_block .internal_sections_list .child_wrapp.depth3{max-width:420px;padding-bottom:10px;}
.left_block .internal_sections_list .child_wrapp .child li.depth3 a.menu_item{font-size:12px;margin-left:10px;padding-top:0;padding-left:10px;display:block;position:relative;}
.left_block .internal_sections_list .child_wrapp .child li.depth3 a.menu_item:before{content:"";display:block;position:absolute;left:1px;top:7px;width:2px;height:2px;background:#1d1a1a;}
.left_block .internal_sections_list .child_wrapp .child li > a{text-decoration:none;border:0px;padding-left:9px;}
.left_block .internal_sections_list .child_wrapp a{line-height:16px;height:inherit;font-size:12px;padding:3px 10px;}
.left_block .internal_sections_list .child_wrapp a.title{text-decoration:none;}
.item .child_container{display:none;z-index:10;background:#f6f6f7;border-bottom:1px solid #eaebec;}
.item .child_container .child_wrapp{border:0px;padding:8px 10px;max-height:500px;overflow:auto;}
.item .child_container .child_wrapp *{font-family:Ubuntu, Arial, Helvetica, sans-serif;}
.item .child_container .child_wrapp .menu_title a{font-size:12px;text-decoration:none;font-weight:600;}
.item .child_container .child_wrapp ul > li{position:relative;display:block;}
.item.cur .child_container, .item.current .child_container{display:block;}
.item .child_container .child_wrapp .child li > a{text-decoration:none;border:0px;padding-left:9px;color: #666;}
.item .child_container .child_wrapp .child li > a.menu_item{padding-left:17px;}
.item .child_container .child_wrapp a{line-height:16px;height:inherit;font-size:12px;padding:3px 10px;}
.item .child_container .child_wrapp a.title{text-decoration:none;}

.wraps .item{position:relative;}
.wraps > .wrapper_inner{padding-top:24px;padding-bottom: 50px;z-index:0;}
.wraps .item .child_right_container{opacity: 0;display: block;transition: opacity .2s ease .2s, visibility .2s ease .2s;visibility: hidden;z-index: 3;top: 0px;left: 100%;margin: 0;min-width: 100%;position: absolute;background:#fff;color:#333;box-shadow: 0px 0px 7px rgba(0, 0, 0, 0.36);}
.wraps .item .child_right_container li.menu_item  a{color:#333;padding: 0px;}
.wraps .item:hover .child_right_container{opacity: 1;visibility: visible;}
.wraps .item .child_right_container .child{font-size:0px;}
.child_right_container .menu_item {display:inline-block;vertical-align:top;margin: 0px 0px 2px 0px;padding: 10px;font-size:12px;}
.child_right_container .menu_item .image{width: 66px;height: 56px;display: table-cell;vertical-align: middle;text-align:center;}
.child_right_container .menu_item .image img{vertical-align: middle;}
.child_right_container .menu_item .text{height: 56px;display: table-cell;vertical-align: middle;padding: 0px 12px;text-align: left;}

/* diffrent view types styles */
/*list*/
.display_list .item_wrap{border-left:1px solid #e7e7e7; border-right:1px solid #e7e7e7; border-bottom:1px solid #e7e7e7;}
.display_list .item_wrap.prev{border-bottom-color:#fff;}
.display_list .item_wrap:hover{border-color:#fff !important;}
.display_list .list_item_wrapp:first-child{border-top:1px solid #e7e7e7;}
.display_list .list_item_wrapp + div .list_item_wrapp{border-top-width:0px;}
.display_list .description_wrapp .wrapp_stockers{margin:0px 0px 0px;font-size:0px;}
.display_list .description_wrapp .wrapp_stockers .rating{margin:0px;}
.display_list .description_wrapp .wrapp_stockers > div{display:inline-block;vertical-align:top;margin: 0px;padding: 8px 23px 0px 0px;}
.display_list .item-title a, .display_list  .item-title a span{font-size:18px;}
.wrapp_stockers .like_icons{font-size:0px;height:30px;}

.display_list .article_block{font-size:12px;color: #888888;}
.display_list .description_wrapp .wrapp_stockers .item-stock, .display_list .description_wrapp .wrapp_stockers .article_block{padding-top:11px;}

.display_list .description_wrapp .wrapp_stockers .article_block{padding-top:9px;}

.wrapp_stockers .like_icons > div{display:inline-block;margin:0 5px 0 0;}
.wrapp_stockers .like_icons > div.offers_compare{margin:0px 19px 0px 0px;}
.wrapp_stockers .like_icons span{opacity:1;visibility:visible;}
.display_list .item-stock{margin:0 0 0 14px;}
.display_list .list_item .preview_text{line-height:18px;margin:14px 0px 0px;font-size:13px;}
.display_list .list_item .show_props a span{font-size:12px;line-height:18px;}
.display_list .list_item .show_props{margin:10px 0px -3px;}
.char_title{color:#333333 !important;}
.show_props .char_title{position:relative;cursor:pointer;}
.show_props .char_title:after{content:"\f107";padding:0px 0px 0px 5px;}
.show_props .char_title.opened:after{content:"\f106";}
.display_list .list_item .show_props a i.icon{top:0px;position:relative;margin-right:7px;border-radius:11px;-moz-border-radius:11px;-webkit-border-radius:11px;background:#383838;vertical-align:middle;}
.display_list .list_item .show_props a.opened i.icon b{background-position:-34px -185px;}
.display_list .list_item .show_props a i.icon, .display_list .list_item .show_props a i.icon b{display:inline-block;height:11px;width:11px;}
.display_list .list_item .show_props a i.icon b{background:url('images/arrows.png') 2px -185px no-repeat;}
.display_list .list_item .props_list_wrapp{display:none;margin:0;padding:10px 0px 0px;}
.props_list{border-collapse:collapse;}

.display_list .sale_block{margin-top:5px;}
.bx_item_detail_scu .bx_scu_scroller_container{position:relative;z-index: 1;margin:7px 0px 0px;}
.bx_item_detail_size .bx_size_scroller_container{margin:4px 0px 0px;}

.sku_props ul li.missing, .ik_select_dropdown ul li.missing{opacity:0.4;}
.unshow_un_props .sku_props ul li.missing, .unshow_un_props ul li.missing{display:none;}

/*block*/
.catalog .catalog_block{padding:0px 0px 0px 0px;width:100%;}
.ajax_load.block .top_wrapper, .catalog .top_wrapper{margin-top: 12px;}
.bottom_nav.block, .search.block .bottom_nav{position:relative;top:5px;float:left;width:100%;}
.catalog .catalog_block:after{content:"";display:block;}
.catalog_block .counter_wrapp{margin-bottom:0px;padding-top:0px;margin-top:-1px;white-space:nowrap;}
.catalog_block .sku_props + .counter_wrapp, .catalog_block .woffers{padding-top:17px;}
.catalog_block .hover_block{opacity:0;visibility:hidden;max-height:0;-webkit-transition:all .15s ease;-webkit-transition-delay:0.5s;-moz-transition:all .15s ease;transition:all .15s ease;transition-delay:0.05s;padding:17px 0px 0px;}
.catalog_block .hover_block .sku_props{margin:0px;padding:0px 0px 2px;}
.catalog_block .image_wrapper_block{margin:0px 0px 15px;}
.shadow_delay{transition-delay:0.22s !important;}
.catalog_block:not(.items) .item_wrap{height:auto !important;position:relative;z-index:51;background:#fff;padding-bottom:0px;}
.tabs_slider .catalog_block .item_wrap:not(.touch):hover, .tabs_slider .catalog_block .item_wrap.hover {z-index:58;padding-bottom:20px;}
.catalog_block .item_wrap:not(.touch):hover .hover_block, .catalog_block .item_wrap.hover .hover_block{opacity:1;visibility:visible;max-height:500px;}
.catalog_block + .bottom_nav .ajax_load_btn{padding:0px 0px 0px;position:relative;top:-22px;margin-bottom:-2px;}
.catalog_block .counter_wrapp .more_text{display:none;}
.catalog_block .wrap_nav{display:none;}
.catalog_block .view_sale_block .values{margin-bottom:3px;height: 36px;}
.catalog_block .catalog_item_wrapp:nth-child(4n){width:210px;}
.catalog_block .catalog_item_wrapp:nth-child(4n) .item_wrap {margin-right:0px;}

/*table*/
.module_products_list .foto-cell .image_wrapper_block, .module_products_list .foto-cell .image_wrapper_block a{max-width:50px;min-width:30px;height:50px;line-height:50px;position:relative;}
.module_products_list .cost.prices .price.discount{margin:0px;vertical-align:text-top;position:relative;top:-1px;}
.module_products_list .counter_wrapp{padding:0px;white-space:nowrap;}
.module_products_list .counter_wrapp .button_block{white-space:normal;}
.module_products_list  .counter_wrapp .button_block.wide{display:inline-block;width:auto;}
.module_products_list .counter_wrapp .more_text{display:none;}
.module_products_list .wrapp_stockers .like_icons > div:last-child{margin-right:0px;}
.adaptive_button, .adaptive_button .more_text{display:none;}
.table table.module_products_list { float: none; }

/*compare*/
.bx_compare .bx_sort_container{position:relative;}
.bx_compare .bx_sort_container ul li:not(.current):before{display:none;}
.bx_compare .bx_sort_container ul.tabs-head{margin:0px;}
.bx_compare .bx_sort_container ul.tabs-head >li{margin: 0px 4px -1px 0px;border-radius: 2px 2px 0px 0px;}
.bx_compare .bx_sort_container ul.tabs-head >li:hover{background:#fff;}
.bx_sort_container .wrap_remove_button{position:absolute;top:-7px;right:0px;}
.bx_compare .frame{margin:0px 0px 0px 230px;position:relative;overflow:hidden;}
.bx_compare .frame .wraps{width:10000% !important;overflow:hidden;font-size:0px;}
.bx_compare .frame.props .wraps{margin-left:-230px;}
.bx_compare .compare_view td{width:230px;min-width:230px;max-width:230px;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;padding:40px 20px 20px 20px;font-size:13px;position:relative;text-align:left;vertical-align:top;overflow:hidden;}
.bx_compare .frame.border::after{background:#e5e5e5 none repeat scroll 0 0;content:"";height:100%;position:absolute;right:0;top:0;width:1px;}
.bx_compare .compare_view .item_block{margin:0px 20px 0px 0px;position:relative;}
.bx_compare .compare_view .item_block a{font-weight:500;}
.bx_compare .compare_view .item_block .title{display:block;padding:14px 0px 0px;}
.bx_compare .compare_view.data_table_props tr td .remove i{display:none;}
.bx_compare .compare_view.data_table_props td{border:1px solid #e5e5e5;padding:10px 27px 13px 18px;transition:none 0s ease 0s;}
.bx_compare .data_table_props tr td:first-of-type{font-weight:600;visibility:hidden;}
.prop_title_table{position:absolute;left:0px;width:231px;overflow:hidden;z-index:1;}
.prop_title_table .data_table_props td{opacity:0;visibility:hidden;}
.bx_compare .prop_title_table .data_table_props tr td:first-child{display:table-cell;opacity:1;visibility:visible;}
.bx_compare .prop_title_table .data_table_props tr td .remove i{display:inline-block;}
.bx_compare .remove{position:absolute;top:0px;z-index:1;right:0;}
.bx_compare .compare_view.top .remove{right:-13px;top:-13px;}
.bx_compare .compare_view.clone .remove{right:15px;top:12px;display:none;}
.bx_compare .compare_view.data_table_props  tr.hovered td{background:#f7f7f7;}
.bx_compare .compare_view.data_table_props  tr.hovered td .remove{display:block;}
.wrapp_scrollbar{position:relative;margin:21px 0px 33px 230px;}
.bx_compare .slider_navigation {display:none;}
.bx_filtren_container ul{font-size:0px;margin:41px 0px 5px 0px;}
.bx_filtren_container ul li, .bx_filtren_container ul li:before{display:none;}
.bx_filtren_container ul li.visible{display:inline-block;vertical-align:top;margin:0px 5px 5px 0px;}
.bx_filtren_container ul li span{font-size:12px;line-height:16px;text-transform:none;}

/* Scrollbar */
.wrapp_scrollbar .wr_scrollbar{margin:0 38px 1em 38px;background:#e5e5e5;height:1px;opacity:0;}
.wr_scrollbar .scrollbar{height:5px;line-height:0;display:none;position:relative;top:-3px;cursor:pointer;}
.wr_scrollbar .scrollbar .handle{width:100px;height:3px;position:relative;top:2px;background:#292a33;cursor:pointer;border-radius:3px;}
.wr_scrollbar .scrollbar .handle .mousearea{position:absolute;top:-9px;left:0;width:100%;height:20px;}

/*catalog detail*/
.video_block{text-align:center;margin:0px 0px 30px;}
.video_block .description{text-align:left;}
.catalog_detail .item_main_info  .stickers{top:25px;left:0px;}
.offers_img, .offers_img a{transition:opacity 0.1s ease;text-align:center;}
.offers_img.wof{opacity:0;}
.img_wrapper .wrapp_thumbs{position:relative;}
.thumbs_navigation ul li{position:absolute;top:50%;margin-top:-14px;background-color:transparent;z-index:2;}
.thumbs_navigation ul li:hover{background-color:transparent;}
.img_wrapper .thumbs_navigation .flex-direction-nav{margin:0px;}
.img_wrapper .thumbs_navigation ol li{display:none;}
.img_wrapper .thumbs_navigation ul li.flex-nav-prev{left:-38px;}
.img_wrapper .thumbs_navigation ul li.flex-nav-next{right:-37px;}
.info_item .top_info, .info_item .middle_info{padding:24px 0px 3px;overflow:hidden;}
.info_item .top_info .item_block{vertical-align:middle;line-height:0px;}
.info_item .top_info{padding: 14px 0px 19px;border-bottom:1px solid #F2F2F2;}
.info_item .top_info .rows_block + .preview_text{padding-top: 13px;}


.catalog_detail .item_slider .like_icons{top:-6px;right:-16px;}
.catalog_detail .item_slider .like_icons span{margin:0px;}

.like_wrapper{position:relative;}

.color_link:hover{color:#1d2029 !important;}

.catalog_detail #ask_block .form-control{height:auto;border:none;padding:0px;box-shadow:none;}
.catalog_detail #ask_block .form-control label{font-weight: 400;}

.catalog_detail .top_info .like_icons .wish_item.added span.value:before{background-position:5px -44px;}
.catalog_detail .top_info .like_icons .compare_item span.value:before{background-position:-20px -13px;}
.catalog_detail .top_info .like_icons .compare_item.added span.value:before{background-position:-18px -44px;}
.catalog_detail .top_info .like_icons span{font-size:11px;opacity:1;visibility:visible;border:0px;display:inline-block;vertical-align:middle;margin:0px;background:none;}
.catalog_detail .top_info .like_icons span:hover{background:none;}
.catalog_detail .top_info .like_icons span.value span{display:inline-block;margin:1px 7px 0px 0px;}
.info_item .top_info .article{font-size:13px;color:#666;line-height: 18px;}
.info_item .top_info .article .value{padding:5px 0px;margin:0px 0px 0px 0px;}
.info_item .top_info .brand{float:right;font-size:13px;}
.info_item .top_info .brand img{display:block;max-width: 100%;}
.info_item .preview_text{color:#333333;max-height: 42px;overflow: hidden;padding: 0px 0px 3px;}
.info_item .middle_info .prices .price{font-size:26px;line-height:20px;padding-right:5px;}
.info_item .middle_info .prices .discount *{margin-top:12px;font-size:16px;}
.info_item .middle_info .prices .sale_block{margin:11px 0px 0px;}
.info_item .middle_info .view_sale_block{margin-top:9px;}
.info_item .middle_info .item-stock{margin:14px 0px 0px;}
.info_item .middle_info .item-stock .store_view{cursor:pointer;}
.info_item .middle_info .prices_block{padding:0px 0px 22px 0px;}
.info_item .middle_info .prices_block  .rating{margin:16px 0px 0px;}
.info_item .middle_info .buy_block{font-size:0px;line-height:0px;}
.info_item .middle_info .buy_block >div{display:inline-block;vertical-align:top;}
.info_item .middle_info .buy_block .wrapp_one_click{padding-bottom:22px !important;}
.info_item .middle_info .buy_block .sku_props + .counter_wrapp, .info_item .middle_info .buy_block .buys_wrapp{padding-top:15px;}
.ajax_load.table .counter_wrapp{padding-top:0px;}
.info_item .middle_info .buy_block .sku_props + .counter_wrapp.woffers, .ajax_load  .counter_wrapp.woffers{transition:opacity 0.1s ease;opacity:0;}
.info_item .middle_info .buy_block .counter_wrapp{padding:0px 12px 0px 0px;white-space:nowrap;}
.info_item .middle_info .buy_block .counter_wrapp >div{margin-bottom:22px !important;}
.info_item .middle_info .buy_block .counter_wrapp .more_text{font-size:12px;white-space:normal;}
.noffer .info_item .middle_info .buy_block .one_click{opacity:1;}
.info_item .middle_info .preview_text{padding:22px 0px 0px 0px;font-size:13px;line-height:18px;}
.buy .counter_wrapp{padding:0px;}

.catalog_detail .info_item .middle_info .buy_block .buys_wrapp.offer_buy_block{padding-top:0px;}
.catalog_detail .buy_block .offer_buy_block > div{display:inline-block;vertical-align:top;font-size:0px;line-height:0px;white-space:nowrap;}

.top_info .more_block{cursor:pointer;font-size:13px;}
.top_info .more_block:after{content:"\f107";padding: 0px 0px 0px 5px;}

.catalog_detail .counter_wrapp .counter_block{margin-right:12px;}
.catalog_detail .w_icons.button.to-cart:before{position:absolute;top:10px;left:19px;background:url('images/ai.png') -460px -49px no-repeat;width:17px;height:16px;content:"";display:block;}
.catalog_detail .w_icons.button.to-cart{padding-left: 46px;white-space: nowrap;}
.catalog_detail .offers_table .w_icons.button.to-cart:before{top:7px;}

.specials.tab_slider_wrapp .tabs_content .tabs_slider> li, .tabs_slider  >li.catalog_item, .slides  >li.catalog_item{border:1px solid #eaebec;}
.specials.tab_slider_wrapp .tabs_content .tabs_slider> li:hover, .tabs_slider  >li.catalog_item:hover, .slides  >li.catalog_item:hover{border:1px solid #fff;}


/*tizers start*/
.catalog_detail .tizers_block_detail{border-top:1px solid #eaebec;}
.catalog_detail .tizer .inner_wrapper{padding:18px 20px 18px;font-size:13px;line-height:16px;color:#555555;}
.catalog_detail .tizer .image{width:45px;height:40px;line-height:40px;float:left;text-align:center;}
.catalog_detail .tizer .image + .text{padding-left:55px;}
/*tizers end*/

.catalog_detail .tabs_section{margin:-10px 0px 0px;}
.catalog_detail .tabs_section .tabs-head li{margin-top:10px;}

.catalog_detail .stock_board{padding:20px 15px 19px 84px;background:#f7f7f7;margin:0px 0px 22px;position:relative;font-size:13px;}
.catalog_detail .stock_board:before{content:"";display:inline-block;position:absolute;width:45px;height:45px;background:url('images/icons_goods.png') -1px -139px no-repeat;left:25px;top:21px;}
.catalog_detail .stock_board .title{font-size:15px;font-weight:500;}
.catalog_detail .stock_board .read_more{font-size:13px;}
.catalog_detail .stock_board  .txt{margin:5px 0 4px;line-height:18px;}
.share_wrapp{position:relative;}
.share_wrapp .text.button{font-size:13px;border-color:#888;text-transform:none;padding: 7px 10px 8px 32px;position:relative;color:#888;line-height: 15px;}
.share_wrapp .text.button:before{content:"";display:inline-block;position:absolute;width:12px;height:14px;background:url('images/ai.png') -426px -50px no-repeat;left:13px;top:8px;opacity:0.7;}
.share_wrapp .text.button:hover{border-color:444444;}
.share_wrapp .text.button:hover{color:444444;}
.share_wrapp .text.button:hover:before{opacity:1;}
.share_wrapp .shares{display:none;position:absolute;top:42px;left:-5px;z-index:2;background:#fff;box-shadow:0px 0px 15px rgba(0,0,0,.12);border-radius:2px;margin:0px -20px;width:155px;}
.share_wrapp .shares .b-share{padding:20px 20px 15px !important;}
.share_wrapp .shares .b-share a{padding:0px !important;}
.share_wrapp .shares .b-share a:nth-child(3n){margin-right:0px;}
.share_wrapp .shares:after{content:'';position:absolute;width:0;height:0;border:11px solid transparent;border-bottom-color:#fff;left:50%;top:-16px;margin-left:-11px;}

.catalog_detail .element_detail_text { font-size: 12px; line-height: 15px; padding: 0px 0px 39px; }
.catalog_detail .element_detail_text .sh {width: 120px;float: left;}
.catalog_detail .element_detail_text .price_txt { padding-left: 129px; color: #b3b3b3; font-size: 12px;}

.catalog_detail .props_list{width:100%;margin:0px 0px 0px;color:#555;}
.catalog_detail .tabs_content .char_block{margin-bottom:30px;}
.catalog_detail .props_list td{vertical-align:bottom;font-size:13px;vertical-align: top;background: url('images/dott.png') no-repeat;background-position: 0px 12px;background-repeat: repeat-x;width:50%;/*border-bottom: 1px dotted #c3c3c3;*/}
.catalog_detail .props_list td span{/*bottom: -11px;*/}
.catalog_detail .props_list td.char_value span{padding: 0px 0px 0px 10px;}
.catalog_detail .props_list td.char_name span:after{/*border-bottom: 1px dotted #ccc;position: absolute;margin-left: 12px;height: 13px;content: '';width: 100%;*/}
.props_list .hint{position:absolute;top:0px;right:-10px;z-index: 1;}
.props_list .hint .icon{background:#e5e5e5;border-radius:100%;}

.catalog_detail .tabs_content  .descr_div > div{padding-bottom:4px;}
.catalog_detail .tabs_content .descr_div .char_block{width:50%;padding:0px 40px 36px 0px;margin-bottom:0;}
.catalog_detail .tabs_content .descr_div .char_block.wide{width:100%;}
.catalog_detail .tabs_content .descr_div .char_block + .serv{padding:0px 0px 0px 10px;}
.catalog_detail .tabs_content .serv{width:50%;}
.catalog_detail .tabs_content .serv.block_view{padding:0px;}

.props_block .char{margin:12px 0;display:inline-block;width:15%;text-align:left;padding:0px 10px 0px 0px;vertical-align:top;}
.props_block .char_name{text-align:left;font-weight:400;font-size:12px;}
.props_block .char_value{font-weight:500;font-size:14px;}
.catalog_detail .tabs_content .props_block .char{font-size:13px;}
.catalog_detail .tabs_content .props_block .char .hint{position:absolute;top:0px;right:-19px;}

.catalog_detail .p_block .item-stock .value .store_view{border-bottom: 1px dotted;}
.catalog_detail .item-stock .value .store_view:hover{color:#1d2029;}

.catalog_detail .wrapp_docs{width:25%;padding:0px 20px 0px 0px;}
.button.wicon i{background-position:-91px -206px;margin:0px 10px 0px 5px;}
.catalog_detail .show_btn{width:15%;float:left;}
.catalog_detail .form_wr{width:85%;font-size:12px;padding:0px 0px 0px 21px;float:left;}

.catalog_detail .buy_block  .button.in-cart i{background-position:-36px -3px;margin-right:10px;width:12px;}

.forms .text_block{width:29%;font-size:13px;padding:0px 60px 0px 0px;}
.forms .form_block{width:71%;}

.catalog_detail .info_item .middle_info .buy_block .sku_props{display:block;}
.bx_item_detail_scu .bx_scu_scroller_container{margin-left:2px;}
.middle_info .bx_catalog_item_scu .bx_item_detail_scu ul li .cnt_item{width: 46px;height: 46px;border: 2px solid #fff;}
.middle_info .sku_props .bx_size_scroller_container, .middle_info .sku_props .bx_scu_scroller_container{margin-top:11px;}
.middle_info .sku_props .wrapper_sku > div{margin-bottom:15px;}

/*bottom slider start*/
.bottom_slider .catalog_item{text-align: center;}
.bottom_slider .catalog_item .cost.prices, .wr .catalog_item .cost.prices{margin:11px 0px 0px;}
.bottom_slider .catalog_item .buttons_block{text-align:center;}
.bottom_slider .catalog_item:hover .item_info{height:auto !important;}
.bottom_slider .catalog_item .buttons_block .button{float:none;}
/*bottom slider end*/

/*reviews*/
.reviews-reply-field .lhe-stat-toolbar-cont{border:1px solid #E5E5E5;border-bottom-width:0px;box-sizing:border-box;border-radius:2px 2px 0px 0px;background-color:#F7F7F7;}
.reviews-reply-field iframe{border:1px solid #E5E5E5 !important;box-sizing:border-box;border-radius:0px 0px 2px 2px;background-color:#F7F7F7;}
.reviews-reply-field-upload{padding:11px 0px 19px;}
.forum-upload-file-attach{font-size:13px;}
.reviews-reply-field input[type="checkbox"]{display:none;}
.filter label span{line-height:14px;}
.reviews-reply-field-settings{padding:0px 0px 16px;}
.reviews-post-reply-buttons{margin:0px 0px 2px;}
.reviews-reply-buttons .button:first-child{margin:0px 13px 0px 0px;}
.reviews-post-reply-buttons a{font-size:11px;}
.reviews-reply-header, .reviews-reply-fields label{margin:0px 0px 2px 0px;display:block;}
.reviews-reply-fields{margin:0px 0px 19px 0px;}
.reviews-block-container{margin:0px 0px 30px 0px;}
.reviews-post-table{font-size:12px;border-bottom:1px solid #e5e5e5;width:100%;margin:0px 0px 13px;}
.reviews-post-table thead td .message-post-date{line-height:14px;padding-left:16px;font-size:10px;background:url('images/clock_small.png') -2px -4px no-repeat;margin-left:10px;display:inline-block;}
.reviews-post-reply-buttons span.separator{background-color:#E0E0E0;display:inline-block;margin:0 4px;height:8px;line-height:5px;width:1px;}
.reviews-post-table .reviews-text{margin:3px 0px 3px;}
.forum-quote{background:#f8f2d4;width:100%;margin:5px 0px 0px;}
blockquote.bx-quote{background:#f8f2d4 !important;}
.forum-quote tr th{text-indent:-9999px;display:none;}
.forum-quote tbody tr td{border:1px solid #dddddd;padding:8px 13px 0px;background:url("images/font_quote.gif") no-repeat scroll -1px -1px;}
.forum-quote tbody tr td a, .reviews-header-title a {cursor:default;}
.reviews-reply-field-captcha .text_block{padding:0px 10px 0px 0px;font-size:12px;}
.reviews-reply-field-captcha .capch_block{padding:17px 0px 0px;line-height:0px;}
div.reviews-header-box{color:#fff;}
div.reviews-info-box, .reviews-note-box{border:1px solid #ddd;padding:10px;margin:0px 0px 20px;}
div.reviews-code-box{font-size:12px;width:100%;border-width:1px solid #ddd;background:#f8f2d4;}
div.reviews-code-box ol, div.reviews-code-box ol li, div.reviews-code-box ol li span{margin:0;padding:0;border:none;}
div.reviews-code-box ol{list-style:decimal;margin-left:3em;padding:0.5em 0;}
div.reviews-code-box ol li{list-style:decimal-leading-zero;list-style-position:outside !important;padding:0 0.5em 0 1.5em !important;margin:0;line-height:1.5em;}
.reviews-note-box  p{margin-bottom:0px;}
.reviews-note-box .reviews-note-error{color:#e62222 ;}

/*order items*/
.bx_ordercart .module-cart thead tr td.item{text-align:center;}
.bx_ordercart .module-cart table td.name-cell.no_img, .bx_ordercart .module-cart table td.custom .no_img{padding-top:8px;}
.bx_ordercart .module-cart table td.cost-cell.no_img{padding-top:9px;}
.bx_ordercart .module-cart table td.cost-cell.notes.no_img{padding-top:6px;}
.bx_ordercart .module-cart table tbody td.custom{padding-top:9px;}
.bx_ordercart.basket_wrapp{margin:0px;}
.bx_ordercart .module-cart td{white-space:nowrap;}
.bx_ordercart_order_sum{width:100%;margin:0px;}
.bx_ordercart_order_sum td{font-size:14px;padding-top:5px;padding-bottom:5px;}
.bx_ordercart_order_sum td.custom_t1{width:89%;padding:0px 29px 0px 0px;text-align:right;}
.bx_ordercart_order_sum td.fwb{font-weight:600;vertical-align:top;padding-top:5px;}
.bx_ordercart_order_sum td.fwb strike{font-size:12px;font-weight:500;}
.bx_section_bottom h3{margin-bottom:29px;}
.bx_section_bottom .bx_block{margin-bottom:20px;}
.bx_ordercart_order_pay_center{text-align:right;margin:0px 0px 5px;}
.confirm .bx_section{padding-left:88px;}
.confirm h3{position:relative;padding:5px 0px 12px 0px;}
.sale_order_full_table.pay{margin:35px 0px 0px;}
.confirm h5{margin-bottom:10px;}
#order_form_div .confirm .button{font-size:10px;padding-top:11px;padding-bottom:10px;}
#order_form_div input[type="submit"]{font-size:10px;padding:11px 21px 10px 20px;text-transform:uppercase;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;outline:none;cursor:pointer;line-height:16px;background:#DDD;color:#000;text-decoration:none;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;text-align:center;display:inline-block;border:none;position:relative;font-family:"Ubuntu",Arial,Helvetica,sans-serif;letter-spacing:0.4px;}
.bx_ordercart_order_pay .bx_ordercart_order_pay_right{margin:0px;}

/*personal*/
.border_block{padding:38px 43px;border:1px solid #E5E5E5;position:relative;}
.form-block-wr .main .iblock, .soc-serv-main {font-size:12px;}
.form-block-wr  .but-r{padding:26px 0px 0px 0px;}
.soc-serv-main .soc-serv-title-grey{padding:0px 0px 14px;}
.passw .text_block{padding-top:35px;}
.adaptive{display:none;}

/*history list*/
.filter_block{padding:17px 24px 14px;overflow:hidden;}
.filter_block  ul{font-size:0px;margin:0px;float:left;}
.filter_block  ul li{font-size:13px;display:inline-block;vertical-align:top;font-weight:600;padding:0px 25px 0px 0px;}
.filter_block  ul li:before{display:none;}
.filter_block  ul li:last-child{padding-right:0px;}
.filter_year{float:right;margin:-5px 0;width:100px;}
.filter_year .common_select .common_select-link{margin:0;}
.module-orders-list.colored thead td{padding-bottom:9px;}
.module-orders-list.colored tbody td{padding:15px 5px 15px;}
.module-order-history .module-orders-list .tr-d:hover td{background:#f7f7f7;}
.module-orders-list.colored tbody td.not_payed{color:#e62222;}
.module-orders-list.colored tbody td.payed, .module-order-history .module-orders-list .status.delivered{color:#37ac09;}
.module-orders-list .status.canceled{color:#e62222;}
.module-orders-list.colored tbody td.price-cell, .module-orders-list.colored tbody td.summ-cell, .module-order-history.orderdetail .module-orders-list tr td.price{font-weight:600;white-space:nowrap;}
tr.drop td{border-top-width:0px;}
.module-order-history .empty_history{padding:20px 0px;}

/*history detail*/
.module-order-history.orderdetail .module-orders-list tr td{border:1px solid #e5e5e5;padding:11px 19px 14px;text-align:left;}
.module-order-history.orderdetail .module-orders-list tr.title td{border:0px;padding:0px;}
.module-order-history.orderdetail h4{margin:36px 0 27px;}
.module-order-history.orderdetail .module-orders-list tr td.vimg{text-align:center;border-right-width:0px;}
.module-order-history.orderdetail .module-orders-list tr td.vimg + .vname{border-left-width:0px;}
.module-order-history .module-orders-list .drop-cell .not-payed .text{font-size:13px;width:73%;padding:0px 10px 0px 0px;}
.module-order-history .module-orders-list .drop-cell .not-payed .pays{width:27%;text-align:right;}
.module-order-history.orderdetail .result-row{margin:19px 0px 0px;}
.module-order-history.orderdetail .result-row .result{padding:0px;}
.module-order-history.orderdetail .result-row .result td{padding:0px;border:0px;}
.module-order-history.orderdetail .module-orders-list thead tr td{padding:8px 12px 9px;background:#f7f7f7;border-left-width:0px;border-right-width:0px;}
.module-order-history.orderdetail .module-orders-list.goods tr td{border-left-width:0px;border-right-width:0px;}
.module-order-history.orderdetail .module-orders-list.goods tr td:first-child{border-left-width:1px;}
.module-order-history.orderdetail .module-orders-list.goods tr td:last-child{border-right-width:1px;}
.module-order-history.orderdetail .module-orders-list tr td .bx_ol_sku_prop td{border:0px;padding:0px;font-size:12px;}

/*auth*/
.forgot{font-size:12px;float:right;}
.but-r .buttons{margin:21px 0px 0px 0px;}
.soc-serv-main .row{margin:0px;}
.bx-touch .fancybox-nav span{visibility:visible;}
.back .back{margin:10px 0px 0px;display:inline-block;}

/* front-page sliders */
	.specials_slider_wrapp, .tab_slider_wrapp{}

	.specials_slider_wrapp ul.tabs_content, .tab_slider_wrapp ul.tabs_content{margin:1px -8px 20px -5px;padding:0 8px 0px 5px;}
	.specials_slider_wrapp ul.tabs_content li.tab, .tab_slider_wrapp ul.tabs_content li.tab{margin:0 -5px;padding:0 5px;}

/* viewed product slider */
	.common_product .content_inner{margin:-13px -13px 0;padding:13px 13px 0;}
	.common_product .flex-viewport{margin:0px -13px;padding:0 13px;}
	.common_product .flex-viewport ul.slides{margin:0px -13px;padding:0 13px;}

/*subscribe*/
.subscribe-edit .more_text_small{padding-left:20px;}
.subscribe-edit h5{font-size:13px;margin-bottom:5px;}
.data-table.top .left_blocks{width:40%;}
.data-table.top .right_blocks{width:60%;}

/*search*/
.search-page-wrap .form-control{float:left;margin:0px 10px 0px 0px;}

/*brands*/
.similar_products_wrapp h3{margin-bottom:37px;padding:7px 0px 0px;}
.similar_products_wrapp .slider_navigation.top_big{top:-66px;}
.similar_products_wrapp .wrapper_block .all_wrapp{margin:0px;}
.similar_products_wrapp .wrapper_block .all_wrapp .catalog_item:hover .item_info{height:auto !important;}
.similar_products_wrapp .wrapper_block .all_wrapp .like_icons{top:0px;right:-10px;}
.similar_products_wrapp .wrapper_block .all_wrapp .stickers{left: -24px;top: 0px;}

/*articles*/
.row{margin:30px -15px 0px -15px;font-size:0px;}
.row .item_block{padding:0px 15px 0px 15px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;}
.row .item_block > a{display:block;overflow:hidden;}
.row .item_block > a img, .articles-list.lists_block  .item .left-data img{vertical-align:middle;max-height:100%;max-width:100%;}
.articles-list.vertical .item {display:inline-block;vertical-align:top;width:33.33%;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;margin:0px 0px 37px;overflow:hidden;}
.articles-list.vertical .item_block.item{padding:0px 15px 0px 15px;border-bottom-width:0px;margin-top:0px;}
.articles-list.vertical .item_block.item  .left-data{float:none;width:100%;text-align:center;max-width:initial;}
.articles-list.vertical .item_block.item  .left-data a{height:190px;line-height:185px;margin:0px 0px 14px;}
.articles-list .item_block.item  .left-data a{overflow:hidden;}
.articles-list.vertical .item_block.item  .left-data img{max-height:100%;max-width:100%;}
.articles-list.vertical .item_block.item  .right-data{float:none;width:100%;text-align:left;margin:0px;}
.articles-list.vertical .item .date_small{margin:0px 0px 5px;}
.articles-list.vertical .item .item-title{margin-bottom:7px;}
.articles-list.vertical .item .item-title a span{font-size:14px;}
.articles-list.vertical .item_block.item  .right-data .preview-text{margin:0px;padding:0px;}

.articles-list.lists_block .item .left-data{max-width:190px;width:22%;text-align:center;display: inline-block;vertical-align: top;}
.articles-list.lists_block.faq .item .left-data{max-width:175px;}
.articles-list.lists_block .item {margin-top:30px;padding:0px 0px 30px 0px;border-bottom:1px solid #e5e5e5;}
.articles-list.lists_block .item:first-child {margin-top:0px;}
.articles-list.lists_block .right-data{padding: 0 30px 2px;margin-left: 0;display: inline-block;vertical-align: top;width: 78%;box-sizing: border-box;}
.articles-list.lists_block + .module-pagination{border-top-width:0px; float: left; width: 100%;}
.articles-list.lists_block  .item .left-data img{max-height:initial;}
.articles-list.lists_block.news { float: left; width: 100%; }
.content_wr_float { float: left; width: 100%; }

.right_side.wide{width:230px;}
.left_side.wide{padding-right:240px;}
.ask_small_block{border:1px solid #e5e5e5;}
.ask_small_block .ask_btn_block{padding:29px 20px;text-align:center;}
.ask_small_block .description{font-size:13px;line-height:18px;padding:19px 24px 19px;}

.ask_big_block{min-height:30px;margin:17px 0px 20px;border:1px solid #e5e5e5;padding:29px 40px;}
.ask_big_block .ask_btn_block{float:left;}
.ask_big_block .description{padding-left:175px;line-height:16px;}

/*detail*/
.news_detail_wrapp.big .detail_picture_block{height:188px;line-height:185px;padding:5px;}
.margin.preview_text{margin:0px 0px 36px;}
.galley.row{margin:0px -10px 0px -10px;}
.galley.row .item_block {padding:0px 10px 20px 10px;margin:0px 0px 20px 0px;}
.galley.row .item_block > a{height:143px;line-height:140px;}
.left_side.wide .common_product .content_inner{margin-right:-16px;}

/*vacancy*/
.job.border_block{margin:0px 0px 37px;}
.job.border_block  .wrap_md > div{font-size:13px;}
.job.border_block  .text{width:57%;padding:0px 46px 0px 0px;}
.job.border_block  .phone{width:23%;padding:0px 10px 0px 0px;}
.job.border_block  .phone .wrap_phones{overflow:hidden;}
.job.border_block .medium {color: #888888; font-size: 12px; line-height: 15px; margin-bottom: 4px; display:inline-block;vertical-align: top;}
.job.border_block .grey{display:inline-block;vertical-align: top;width: 100%; margin-bottom: 23px;font-size: 13px; line-height: 20px; color:#383838;}
.job.border_block  .but{width:20%;text-align:right;}
.job.border_block .grey a{display:block;}
.jobs_wrapp{border:1px solid #E5E5E5;}
h3.jobs{margin-bottom:28px;}
.jobs_wrapp .item:first-child{margin-top:0;border-top-width:0px;}
.jobs_wrapp .item{border-top:1px solid #e5e5e5;}
.jobs_wrapp .item.opened{background:#f7f7f7;}
.jobs_wrapp .item .name{cursor:pointer;}
.jobs_wrapp .item .salary_wrapp{text-align:right;}
.jobs_wrapp .item .salary{font-size:14px;margin:1px 0px 0px;padding:0px 42px 0px 10px;white-space:nowrap;font-weight:500;}
.jobs_wrapp .item tr td{vertical-align:top;padding-top:24px;padding-bottom:18px;}
.jobs_wrapp .item tr td:first-of-type{padding-left: 28px;}
.jobs_wrapp .item tr td:last-of-type{padding-right: 19px;}
.jobs_wrapp .item  .name .title .salary{padding:5px 0px 0px;display:none;}
.jobs_wrapp .item  .name .title h4{margin:0px;text-align:left;}
.jobs_wrapp .item  .item_title{font-size:16px;}
.jobs_wrapp .item  .description_wrapp{margin:-7px 0px 0px;display:none;padding:0px 19px 29px 28px;}
.jobs_wrapp .item  .description_wrapp .description{margin:0px 0px 25px;}
.jobs_wrapp .item .opener_icon {position:relative;top:-3px;}

/* CONTACTS PAGE */
.contacts_map{margin-top:4px;margin-bottom:16px;position:relative;min-height:400px;}
.contacts_map:before{background:rgba(255, 255, 255, 0.55) url("images/map.png") no-repeat scroll center center;content:" ";height:100%;left:0;opacity:0.07;position:absolute;top:0;width:100%;}
.bx-google-map, .bx-google-map{background-color:transparent !important;}
.contacts_left{float:left;width:270px;}
.contacts_right{margin-left:285px;}
.contacts_right .fancy{display:inline-block;vertical-align:top;*display:inline;zoom:1;width:210px;height:143px;margin:0 20px 20px 0;float:left;text-align:center;line-height:140px;}
.contacts_right .fancy img{max-height:100%;max-width:100%;vertical-align:middle;}
body .contacts_right blockquote{margin:39px 0 34px;}
.store_property{margin-bottom:23px;word-break: break-word;}
.store_property .title{color:#888888;font-size:12px;line-height:15px;margin-bottom:4px;}
.store_property .value{color:#383838;font-size:13px;line-height:20px;}
.store_property .value a{display:block;}

/* GOOGLE MAP */
.module-contacts-map-layout{position:relative;overflow:hidden;}
.module-contacts-map-layout .map{height:559px;}
.module-contacts-map-layout .controls{position:absolute;z-index:2;width:29px;height:57px;background:url('images/map_con.png') 0px 0px no-repeat;margin:-29px 0 0;right:20px;top:50%;}
.module-contacts-map-layout .controls.left{left:18px;top:50%;}
.module-contacts-map-layout .sh{width:100%;height:5px;z-index:10;box-shadow:0 0 10px rgba(0,0,0,.35);position:absolute;left:0;}
.module-contacts-map-layout .sh.top{top:-7px;}
.module-contacts-map-layout .sh.bottom{bottom:-7px;}
.module-map .controls .zoomIn, .module-map .controls .zoomOut{height:28px;cursor:pointer;font-size:0px;}
.module-map .infoBox{background:#ffffff none repeat scroll 0 0;left:50%;position:absolute;top:auto;font-family:"Ubuntu",sans-serif;}
.module-map .infoBox .wrap-big{padding:25px 30px 30px;position:relative;width:230px;color:#383838;line-height:18px;}
.module-map .infoBox .close_info{position:absolute;border-radius:50%;cursor:pointer;font-size:0;top:6px;right:5px;height:15px;width:15px;z-index:6;}
.module-map .infoBox .close_info:after{background:rgba(0, 0, 0, 0) url("images/close_icons.png") no-repeat scroll -2px -28px;position:absolute;content:" ";cursor:pointer;height:7px;width:7px;top:4px;left:4px;z-index:7;}
.module-map .infoBox .close_info:hover{background-color:grey;}
.module-map .infoBox .close_info:hover:after{background-position:-22px -28px;}
.module-map .infoBox .inner::after{background:rgba(0, 0, 0, 0) url("images/shadow.png") no-repeat scroll center top;bottom:-9px;height:10px;left:0;position:absolute;right:0;content:" ";z-index:60;}
.module-map .infoBox b{font-size:14px;line-height:18px;}
.module-map .infoBox .title{font-size:13px;font-weight:bold;line-height:20px;margin-bottom:11px;}
.module-map .infoBox .metro, .module-map .infoBox .schedule, .module-map .infoBox .phone, .module-map .infoBox .email{margin-bottom:5px;}
.module-map .infoBox .button{margin-top:10px;}
.module-map .infoBox .metro > i, .shops.list .item .metro i, .store_property.metro .value i, .stores_list .store_text.metro .value i{background:rgba(0, 0, 0, 0) url("images/icons_wish.png") no-repeat scroll -1px -237px;display:block;float:left;height:9px;margin:5px 6px 0 0;width:14px;}

/* STORES - SHOPS */
.shops.list .item{position:relative;overflow:hidden;min-height:69px;padding:30px 0;border-top:1px solid #e5e5e5;color:#383838;}
.shops.list .item:first-of-type{border-top:none;padding-top:14px;}
.shops.list .item .image{width:100px;position:absolute;left:0;height:69px;line-height:66px;text-align:center;}
.shops.list .item .image img{max-width:100%;max-height:100%;vertical-align:middle;}
.shops.list .item.wi .image{display:none !important;}
.shops.list .item .rubber{margin-left:130px;overflow:hidden;}
.shops.list .item .rubber > div{float:left;overflow:hidden;padding-top:11px;word-break:break-all;}
.shops.list .item.wi .rubber{margin-left:0;}
.shops.list .item .title_metro{width:50%;margin-top:-1px;padding-right:3%;}
.shops.list .item .schedule_phone_email{width:47%;font-size: 0px;}
.shops.list .item .schedule{width:60%;padding-right:3%;display: inline-block;box-sizing: border-box;font-size: 13px;vertical-align: top;}
.shops.list .item .phone_email{display: inline-block;width: 40%;font-size: 13px;}
.shops.list .item .title{font-size:15px;font-weight:500;margin-bottom:5px;}
.shops.list .item .metro{margin-bottom:5px;}
.shops.list .item .metro i, .store_property.metro .value i, .stores_list .store_text.metro .value i{margin-top:7px;}
.shop.detail a.back{display:inline-block;font-weight:bold;margin-top:35px;}

/* FAQ */
.faq_ask{border:1px solid #e5e5e5;padding:44px;}
.faq_ask .form .form_footer{margin-bottom:0;}
.button.faq_button{float:left;padding:9px 18px 10px 39px;text-align:center;width:97px;position:relative;white-space:nowrap;}
.button.faq_button > span{display:inline;}
.button.faq_button > span:last-of-type{display:none;}
.button.faq_button.opened > span{display:none;}
.button.faq_button.opened > span:last-of-type{display:inline;}
.button.faq_button i{background:rgba(0, 0, 0, 0) url("images/arrows.png") repeat scroll 1px -441px;display:block;height:9px;left:18px;position:absolute;top:13px;width:12px;}
.button.faq_button.opened i{background-position:-17px -441px;}
.faq_desc{margin-left:183px;margin-top:-4px;}
.faq_ask .form{margin:23px 0 0;}
.faq_ask .form_head h4{display:none;}
.faq.list{margin:36px 0 0;}
.faq_section{border:1px solid #e5e5e5;margin:28px 0 26px;}
.faq.list .item{padding:19px 24px 22px;border-bottom:1px solid #e5e5e5;}
.faq.list .item:last-of-type{border:none;}
.faq.list .item.opened{background-color:#f7f7f7;}
.faq.list .item .q{font-weight:bold;position:relative;}
.faq.list .item .q .opener_icon{position:absolute;right:-3px;top:-5px;}
.faq.list .item .q a{display:block;padding:0px 20px 0px 0px;}
.faq.list .item .a{display:none;padding-top:14px;}

/* STAFF */
.staff.list .staff_section{border:1px solid #e5e5e5;border-bottom:none;position:relative;}
.staff.list .staff_section:last-of-type{border-bottom:1px solid #e5e5e5;}
.staff.list .staff_section_title{position:relative;}
.staff.list .staff_section_title h4{margin:0;}
.staff.list .staff_section_title a{display:block;padding:25px 29px 27px;}
.staff.list .staff_section_title .opener_icon{position:absolute;right:21px;top:18px;}
.staff.list .staff_section.opened .staff_section_title{background-color:#f7f7f7;}
.staff.list .staff_section_items{overflow:hidden;}
.staff.list .staff_section .staff_section_items{display:none;border-top:1px solid #e5e5e5;padding:39px 39px 0;}
.staff.list .item{position:relative;width:50%;float:left;overflow:hidden;margin-bottom:40px;box-sizing:border-box;}
.staff.list .item:nth-child(2n+1){padding-right:13px;clear:both;}
.staff.list .item:nth-child(2n){padding-left:12px;}
.staff.list .item .image{height:170px;line-height:167px;width:170px;text-align:center;float:left;}
.staff.list .item .image img{vertical-align:middle;max-width:100%;max-height:100%;}
.staff.list .item .info{margin-left:195px;}
.staff.list .item.wi .info{margin-left:0;}
.staff.list .item .name{color:#383838;font-size:16px;font-weight:bold;margin:-4px 0 1px;}
.staff.list .item .post{font-size:12px;}
.staff.list .item .phone{margin-top:13px;}
.staff.list .item .email{margin-top:7px;}
.staff.list .item .phone > div, .staff.list .item .email > div{color:#383838;font-size:12px;margin-bottom:-3px;}

/*composite btn*/
#bx-composite-banner a.bx-composite-btn{border: 1px solid #e8e8e8;margin:7px 0px 0px;}
#bx-composite-banner{text-align:left;}

/*basket*/
.empty_cart .card_popup_frame.popup .basket_empty{display:block;}
.empty_cart .card_popup_frame.popup .total_wrapp{display:none;}

.button_wrap .button, body .wrapper .button{-webkit-appearance:none;}
.iblock .icon_error_block{float:right;}
.iblock .icon_error_block:after{display:none;}
.icon_error_block {box-sizing: border-box; min-height: 34px; padding-left: 50px; position: relative; text-align: left; width: 100%;}
.basket_fly .icon_error_block {width: inherit;}
.basket_fly .module-cart .colored tfoot td.row_titles .item_title{margin-top:2px;}
.icon_error_block:after{background:#e62222 url("images/warning_white.png") 0px 0px no-repeat;top:0px;height:40px;width:40px;left:0;position:absolute;content:" ";z-index:60;display:block;}
.icon_error_block b{font-size:15px;}
.backet_back_wrapp .basket_back{display:inline-block;vertical-align:top;}

.basket_print{display:inline-block;vertical-align:top;text-align:left;margin:0px 15px 0px 0px;}

.basket_print:hover{color:#383838;}
.basket_print:hover i{background-color:#383838;}
.basket_wrapp .module-cart table.bottom .bottom_btn .backet_back_wrapp.error .iblock.back_btn{padding-right:0px;}
.basket_wrapp .module-cart table.bottom.middle.error td.row_values{padding-left:21px;}
.basket_fly .basket_fly .icon_error_block{text-align:left;float:left;padding:0px 0px 0px 60px;}
.basket_fly .basket_fly .icon_error_block:after{left:0px;}

.view_sale_block.offers { display: none; }
.subscribe-edit .data-table tbody td:last-child{padding-left:20px;}

/*detail*/
.catalog_detail .cost.prices .price_name, .catalog_detail .item-stock > span, .catalog_detail .item-stock{font-size:12px;}
.catalog_detail .info_item .middle_info .prices .price{margin-top:3px;float:none;}
.catalog_detail .info_item .middle_info .prices .price.discount{margin-top:4px;margin-bottom:1px;}
.catalog_detail .info_item .middle_info .prices .sale_block{margin-bottom:4px;}
.catalog_detail .cost.prices .sale_block + .price_name{margin-top:15px;}
.catalog_detail .middle_info .cost.prices .price + .price_name{padding:0px 0px 0px;margin-top:12px;}
.catalog_detail .cost.prices .price_name:first-of-type{margin-top:0px;}

/* BASKET PRINT PAGE */
.print .basket_print_desc{margin:30px 0 50px;overflow:hidden;}
.print #panel, .print .top-h-row, .print .catalog_menu, .print #header .middle-h-row .center_block > *, .print #header .middle-h-row .center_block > .middle_phone .order_wrap_btn, .print #header .middle-h-row .basket_wrapp, .print footer, .print .footer, .print .breadcrumbs, .print .basket_sort, .print .counter_block span, .print .bigdata_recommended_products_container, .print .bottom_btn, .print .coupon, .print .style-switcher, .print .delay-cell, .print .remove-cell, .print .bigdata_recommended_products_items{display:none !important;}
.print div#jivo-iframe-container{display:none !important;visibility:hidden;}
.print .counter_block, .print .counter_block input, .print .bottom.middle .top_total_row, .print #header{border-color:transparent !important;}
.print .counter_block input{background:none !important;}
.print .row_values{width:178px !important;}
.print #header .middle-h-row .center_block > .middle_phone, .print .wrapper.has_menu #header .wrapper_inner .middle-h-row .center_block .middle_phone, .print .wrapper.has_menu #header .phones{display:block !important;text-align:right;}
.print .wrapper.has_menu #header .middle-h-row .center_block .middle_phone .phone_text a{font-size:19px;}
.print .basket_fly #header .middle-h-row .center_block{padding-right:0;}
.print h1{padding-top-top:20px;}
.print .basket_print_desc .store_property{display:inline-block;float:left;margin-right:3%;vertical-align:top;width:22%;}
.print .basket_print_desc .store_property:last-of-type{margin-right:0;}
.print body .wrapper #header{margin-bottom:0 !important;}
.print .wrapper{padding-bottom:0;}
.print table{page-break-inside:auto;}
.print tr{page-break-inside:avoid;page-break-after:auto;}
#header .middle-h-row .logo_wrapp .logo a.print_img{display:none;}
#header .middle-h-row .logo_wrapp .logo.nofill_y a{background:none !important;}

.print_basket{display:none;}

/*stores block*/
.stores_block_wrap .stores_block .stores_text_wrapp.image_block .imgs { width: 100px; /*height: 100px;*/ display: inline-block; vertical-align: top; margin: 0px 0px 0px; float: left; text-align: center; }
.stores_block_wrap .stores_block .stores_text_wrapp.image_block .imgs img { vertical-align: middle; }
.stores_block_wrap .stores_block .stores_text_wrapp .main_info { max-width: 500px; }
.stores_block_wrap .stores_block .stores_text_wrapp.image_block .main_info { width: 100%; margin: 0px 0px 0px 120px; max-width: auto; }
.stores_block_wrap .stores_block .stores_text_wrapp.image_block .main_info > span { display: block; padding: 0px; max-width: 300px; }
.stores_block_wrap .stores_block .stores_text_wrapp span.p10 { padding: 0px 0px 0px 5px; }
.stores_block_wrap .stores_block.w_image:before { top: 22px; }
.stores_block_wrap .stores_block.wo_image .item-stock { top: 50%; position: absolute; right: 0px; margin-top: -10px; }

.catalog_detail .offers_table .many_prices .price.discount { margin-top: 0px; }
.set_wrapp.set_block .cost.prices .price.discount { margin-top: 0px; }

.container iframe, .container object, .container video { display: block; margin: 0 auto; max-width: 100%; }
.group_description_block { font-size: 14px;color: #333; }
.group_description_block.top { padding: 25px 0px 20px; }
.group_description_block.bottom { padding: 20px 0px 20px; }
ul.slider_navigation.top_big .flex-direction-nav { display: none; }
ul.slider_navigation.top_big .flex-direction-nav:first-child { display: block; }
.module_products_list.errors { border: none; }

.hide_class { display: none; }
.module-form-block-wr .form-block input[disabled="disabled"], .module-form-block-wr .form-block textarea[disabled="disabled"] { background: #fff; }

.basket_wrapp .module-cart table.bottom.middle .bottom_btn td.last_blockk { float: right !important; }
.basket_wrapp .module-cart table.bottom.middle .bottom_btn td.last_blockk:last-of-type { padding-right: 50px !important;  }

.popup_button_basket_wr{text-align:center;margin: 30px 0px 0px;}
.ajax_text .wrapper{padding:0px;}
.ajax_text table tr td{padding-top: 10px;}
.ajax_text table tr td:last-child{padding-left:20px;width:150px;}
.ajax_text table tr td label{display:block;}
.ajax_text table tr td label input{margin-right:5px;outline: none;}
.ajax_text .ik_select{width: 100% !important;font-size: 0px;}

/*set new*/
.catalog_detail .bx-modal-container{border:none;border-top:1px solid #ebeaec;border-radius:0px;}
.catalog_detail .bx-modal-container *{box-sizing:border-box;font-size:13px;}
.catalog_detail .bx-modal-container .bx-modal-small-title{font-size:15px;}
.catalog_detail .bx-modal-container .bx-item-set-current-price{font-size:17px;}
.catalog_detail .bx-modal-container .catalog_detail .bx-added-item-table-cell-itemname, .catalog_detail .bx-modal-container .bx-added-item-table-cell-img, .catalog_detail .bx-modal-container .bx-added-item-table-cell-del, .catalog_detail .bx-modal-container .bx-added-item-table-cell-price{padding:5px 5px;}

/*rating*/
.iblock-vote.small div.star-active { cursor: default; background: url('images/ai.png') -137px -51px no-repeat; width:15px; height:14px; overflow:hidden; }
.iblock-vote.small div.star-voted, div.star-over { }
.iblock-vote.small div.star-empty { background-position:-152px -51px; }
.iblock-vote.small div.star-over { background-position:-137px -51px;}

/*gift*/
.bx_item_list_you_looked_horizontal .tabs_slider > li, .wrapper_block .wr > li{opacity:1;text-align: center;}
.bx_item_list_you_looked_horizontal .bx_item_detail_scu .bx_scu ul li{float:none;height:auto;margin: 0px;}
.bx_item_list_you_looked_horizontal .cost.prices .price.discount{margin-top:1px;}
.bx_item_list_you_looked_horizontal .cost.prices{margin:11px 0px 0px;}
.bx_item_list_you_looked_horizontal .like_icons span, .bottom_slider .like_icons span{overflow:hidden;}
.bx_item_list_you_looked_horizontal .catalog_item{border:1px solid #eaebec;}
.bx_item_list_you_looked_horizontal .tabs_slider.wr .catalog_item:hover{border:1px solid #fff;}
.bx_item_list_you_looked_horizontal .common_product{border-top: 1px solid #eaebec;margin-top:20px;padding:21px 0px 0px;}
.bx_item_list_you_looked_horizontal .top_block{padding-top:0px;margin-bottom:19px;}
.bx_item_list_you_looked_horizontal ul.slider_navigation.top_big {top: 19px;}

.catalog_item .stickers{left:0px;}
.catalog_item .image_wrapper_block{margin:0px auto;}

/*basket*/
body .bx_item_list_you_looked_horizontal{border-bottom-width:0px;}

/* BASKET */
#basket_form_container{padding:0 0 0;}
#basket_form_container .top_control{float:right;margin:2px 0 0;}
#basket_form_container .top_control .btn{margin:0 0 0 10px;padding-right:40px;border-color:#dddddd;font-size:13px;line-height:20px;color:#333333;}
#basket_form_container .top_control .btn:first-child{margin-left:0;}
#basket_form_container .top_control .btn:hover{color:#FFF;}
#basket_form_container .top_control .delete_all{display:block;margin: 0px;padding-top: 8px;padding-bottom: 7px;}

#basket_items_list .error_text{font-size:14px;line-height:20px;border-radius:0;padding:15px 29px;background:#ffeeee;color:#e83333;}
.bx_ordercart .bx_ordercart_order_pay_left{overflow:hidden;}

.bx_ordercart .bx_ordercart_order_pay, .bx_ordercart .bx_ordercart_order_sum, .bx_ordercart .bx_ordercart_order_pay_left, .bx_ordercart .bx_ordercart_order_pay_right, .bx_ordercart .bx_ordercart_order_pay_center, .bx_ordercart .bx_ordercart_order_pay_center span, .bx_ordercart .bx_ordercart_order_pay_center .checkout, .bx_ordercart .bx_ordercart_order_table_container table, .bx_ordercart .bx_ordercart_order_table_container table tbody, .bx_ordercart .bx_ordercart_order_table_container table tbody tr, .bx_ordercart .bx_ordercart_order_table_container table tbody tr td, .bx_ordercart .bx_ordercart_order_table_container .bx_ordercart_itemtitle a, .bx_ordercart .bx_ordercart_order_table_container tbody td.price .current_price{top:0;-webkit-transition:all .1s ease;-moz-transition:all .1s ease;-ms-transition:all .1s ease;-o-transition:all .1s ease;transition:all .1s ease;}
.bx_ordercart .bx_ordercart_order_pay_center .checkout{border-radius:2px;}
.bx_ordercart_order_pay_left{padding:0 0 40px;}
.bx_ordercart_order_pay_right{padding:0 0 40px;margin-top:10px;}
.bx_ordercart .bx_ordercart_order_table_container{border-radius:0;border:1px solid #f3f3f3;background:#FFF;}
.bx_ordercart .bx_ordercart_order_table_container table td{padding:0 10px;line-height:20px;}
.bx_ordercart .bx_ordercart_order_table_container table td.margin{width:0;min-height:0;padding:0;}
.bx_ordercart .bx_ordercart_order_table_container table thead td{padding:7px 9px 8px 12px;font-size:13px;line-height:20px;background:none;color:#999999;}
.bx_ordercart .bx_ordercart_order_table_container table thead td.item{padding-left:159px;}
.bx_ordercart .bx_ordercart_order_table_container table tbody td{border-bottom:none;padding:24px 9px 24px;border-top:1px solid #f3f3f3;}
.bx_ordercart .bx_ordercart_order_table_container table td.custom:last-of-type{width:210px;}
.bx_ordercart .bx_ordercart_photo_container{padding:0;border-radius:0;border:none;}
.bx_ordercart .bx_ordercart_order_table_container tbody td.itemphoto{max-width:189px;}
.bx_ordercart .bx_ordercart_order_table_container tbody td.itemphoto>div{max-width:130px;height:130px;line-height:130px;}
.bx_ordercart .bx_ordercart_order_table_container .bx_ordercart_itemtitle{margin:0 0 15px;font-size:18px;font-weight:500;line-height:20px;color:#333333;}
.bx_ordercart .bx_ordercart_order_table_container .bx_ordercart_itemtitle a{font-size:16px;font-weight:500;line-height:20px;color:#333333;}
.bx_ordercart .bx_ordercart_order_table_container .bx_ordercart_photo{position:relative;left:auto;top:auto;right:auto;bottom:auto;background-size:auto;height:130px;}
.bx_ordercart .bx_ordercart_order_table_container tbody td.item{width:535px;padding-top:47px;}
.bx_ordercart .bx_item_detail_size_small_noadaptive{width:auto;margin:0;}
.bx_ordercart .bx_item_detail_size_small_noadaptive .bx_item_section_name_gray{display:block;margin:0 0 10px;font-size:12px;color:#888;}
.bx_item_list_you_looked_horizontal .bx_item_detail_scu .bx_item_section_name_gray, .bx_item_list_you_looked_horizontal .bx_item_detail_size .bx_item_section_name_gray{font-size:12px;color:#888;}
.bx_ordercart .bx_item_detail_size_small_noadaptive .bx_size_scroller_container{margin:0;}
.bx_ordercart .bx_item_detail_size_small_noadaptive .bx_size{overflow:visible!important;}
.bx_ordercart .bx_item_detail_size_small_noadaptive ul{margin:-3px 0 0 -3px;width:auto!important;white-space:normal;}
.bx-touch .bx_ordercart .bx_item_detail_size_small_noadaptive .bx_size ul{margin-left:-3px!important;}
.bx_ordercart .bx_item_detail_size_small_noadaptive ul li{width:auto!important;height:auto;padding:0;margin:0 6px 6px 0px;}
.bx_ordercart .bx_item_detail_size_small_noadaptive ul li:before{display:none;}
.bx_ordercart .bx_item_detail_size_small_noadaptive ul li:first-child{margin-left:0;}
.bx_ordercart .bx_item_detail_size_small_noadaptive ul li a{position:relative;padding:7px 10px;left:auto;top:auto;right:auto;bottom:auto;font-size:13px;line-height:15px;color:#777777;text-align:center;position:relative;display:block;margin:0;min-width:9px;border:1px solid #e6e6e6;overflow:hidden;text-align:center;cursor:pointer;}
.bx_ordercart .bx_item_detail_size_small_noadaptive ul li:active a, .bx_ordercart .bx_item_detail_size_small_noadaptive ul li.bx_active a{border-width:1px;}
.bx_ordercart .bx_item_detail_size_small_noadaptive ul li a:hover{}
.bx_ordercart .bx_item_detail_size_small_noadaptive ul li.bx_active a{cursor:default;}
.bx_ordercart .bx_item_detail_size_small_noadaptive ul:after{content:"";display:table;clear:both;}
.bx_ordercart .bx_ordercart_order_table_container .bx_ordercart_itemart{margin:-3px 0 10px;font-size:13px;line-height:20px;color:#777777;}
.bx_ordercart .bx_item_detail_scu_small_noadaptive{width:auto;margin:5px 0 0;}
.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu_scroller_container{margin:0;}
.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_item_section_name_gray{margin:0 0 7px;display:block;font-size:12px;color:#999;}
.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul{position:relative;margin:0px 0 0;max-width: 180px !important;width: auto !important;}
.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul:after{content:"";display:table;clear:both;}
.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li{height:auto;width:auto!important;}
.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li:before{display:none;}
.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li:first-child{margin-left:0;}
.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li a{position:relative;top:2px;right:auto;bottom:auto;left:2px;display:inline;border:0px;}
.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li a span{display:block;position:relative;/*width:32px;height:32px;*/top:auto;right:auto;bottom:auto;left:auto;}
.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li:hover a{background:#FFF;border: 0px;}

.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li:not(.bx_active):active a{padding:0;}
.bx-retina .bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li a{border:none;}
.bx-retina .bx_ordercart.bx_blue .bx_item_detail_scu_small_noadaptive .bx_scu ul li .cnt{border-image:none!important;}
.bx-retina .bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li.bx_active a{border:none;}
.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li.bx_active:active a{padding:0;border:none;}
.bx_ordercart .bx_item_detail_scu_small_noadaptive .bx_scu ul li.bx_active a{padding:0;border:none;cursor:default;border:none;}
.bx_ordercart .bx_ordercart_order_table_container table tbody td.price{padding-top:47px;width:245px;white-space:nowrap;}
.bx_ordercart .bx_ordercart_order_table_container tbody td.price .current_price{display:inline-block;vertical-align:top;font-size:16px;line-height:20px;color:#333;font-weight:500;}
.bx_ordercart .bx_ordercart_order_table_container tbody td.price .type_price,.bx_ordercart .bx_ordercart_order_table_container tbody td.price .type_price_value{margin:-1px 0 0;font-size:11px;line-height:14px;color:#aeaeae;}
.bx_ordercart .bx_ordercart_order_table_container tbody td.price .type_price{display:none;}
.bx_ordercart .bx_ordercart_order_table_container tbody td.custom{color:#333;}
.bx_ordercart .bx_ordercart_order_table_container tbody td.custom .centered{margin:16px 0 0;position:relative;display:inline-block;vertical-align:top;}
.bx_ordercart .bx_ordercart_order_table_container tbody td.custom{width:200px;padding-top:46px;line-height:26px;}
.bx_ordercart .bx_ordercart_order_table_container tbody td.custom>div:not(.centered){text-align:left!important;font-size:16px;font-weight:500;line-height:22px;color:#333333;}
.bx_ordercart .bx_ordercart_order_table_container table.counter{position:relative;overflow:hidden;margin:-22px auto 0;width:84px;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;}
.bx_ordercart .bx_ordercart_order_table_container table.counter td:first-child{background:#fff;border-radius: 2px;-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;-o-user-select: none;
    user-select: none;height: 30px;box-sizing: border-box;border: 1px solid #e5e5e5 !important;font-size: 0px;}
.bx_ordercart .bx_ordercart_order_table_container table.counter td:last-child{text-align:center!important;font-size:13px;line-height:20px;color:#777777;}
.bx_ordercart .bx_ordercart_order_table_container table.counter td{display:block;}
.bx_ordercart .bx_ordercart_order_table_container table.counter input{border:none;border-left: 1px solid #e5e5e5;border-right: 1px solid #e5e5e5;background: #f7f7f7;;max-width:34px !important;font-weight:500;width:100%;padding:10px 0 10px;font-size:13px;font-weight:500;line-height:13px;height: 28px;color:#333333;text-align:center;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;}
#basket_quantity_control{padding:0!important;}
.basket_quantity_control{display:block;overflow:hidden;}
.basket_quantity_control td{padding:0!important;}
.basket_quantity_control a{position:absolute;left:1px;top:1px;width:24px;height:28px;cursor:pointer;background:none;border-radius:0;border:none;}
.basket_quantity_control a:before{content:"";position:absolute;left:50%;top:50%;width:11px;height:11px;margin:-5px 0 0 -5px;background:url(images/ai.png) -27px -200px no-repeat;opacity:0.7;}
.basket_quantity_control a.plus{right:1px;left:auto;margin:0;}
.basket_quantity_control a.minus{margin:0;border-radius:0;}
.basket_quantity_control a.minus:hover:before{opacity:1}
.basket_quantity_control a.plus:before{background-position:-1px -200px;}
.basket_quantity_control a.plus:hover:before{opacity:1}
.bx_ordercart .bx_ordercart_order_table_container tbody td.price .old_price{/*display:inline-block;*/vertical-align:top;margin:0 0 0 2px;font-size:13px;line-height:20px;color:#777777;}
.bx_ordercart .bx_ordercart_order_table_container tbody td.control{position:relative;width:135px;padding-top:40px;font-size:0;line-height:0;}
.bx_ordercart .bx_ordercart_order_table_container tbody td.control br{display:none;}
.bx_ordercart .bx_ordercart_order_table_container tbody td.control a{position:relative;font-size:0;line-height:0;}
.bx_ordercart tbody td.control a:first-of-type, .bx_ordercart #basket_items_subscribed  tbody td.control a:first-of-type, .bx_ordercart #basket_items_not_available  tbody td.control a:last-of-type{position:absolute;right:9px;top:9px;width:17px;height:17px;border-radius:100%;}
.bx_ordercart tbody td.control a:first-of-type:before, .bx_ordercart #basket_items_subscribed  tbody td.control a:first-of-type:before, .bx_ordercart #basket_items_not_available  tbody td.control a:last-of-type:before{content:"";position:absolute;left:50%;top:50%;margin:-5px 0 0 -5px;width:10px;height:10px;background: url('images/close_icons.png') 0px -27px no-repeat;}
.bx_ordercart tbody td.control a:first-of-type:hover:before, .bx_ordercart #basket_items_subscribed  tbody td.control a:first-of-type:hover:before, .bx_ordercart #basket_items_not_available  tbody td.control a:last-of-type:hover:before{background-position:-21px -27px;}
.bx_ordercart tbody td.control a:last-of-type{display:inline-block;width:25px;height:25px;background:url(images/icons_wish.png) 3px -17px no-repeat;}
.bx_ordercart #basket_items_subscribed  tbody td.control a:last-of-type, .bx_ordercart #basket_items_not_available tbody td.control a:last-of-type{background-image:none;}
.bx_ordercart #basket_items_not_available  tbody td.control a:first-of-type{display:none;}
.bx_ordercart tbody td.control a:last-of-type:hover{background-position:3px -73px;}
.bx_ordercart #basket_items_delayed  tbody td.control a:first-of-type{position:relative;right:auto;top:auto;display:inline-block;width:25px;height:25px;background:url(images/icons_wish.png) -31px -201px no-repeat;}
.bx_ordercart #basket_items_delayed tbody td.control a:first-of-type:hover{background-position:-147px -175px;}
.bx_ordercart #basket_items_delayed tbody td.control a:first-of-type:before{display:none;}
.bx_ordercart #basket_items_delayed tbody td.control a:last-of-type{position:absolute;right:9px;top:9px;width:17px;height:17px;background:none;border-radius:100%;}
.bx_ordercart #basket_items_delayed tbody td.control a:last-of-type:before{content:"";position:absolute;left:50%;top:50%;margin:-5px 0 0 -5px;width:10px;height:10px;background:url(images/close_icons.png) -0px -27px no-repeat;}
.bx_ordercart #basket_items_delayed tbody td.control a:last-of-type:hover:before{background-position:-21px -27px;}

.bx_ordercart .bx_ordercart_order_table_container .bx_ordercart_brand{display:none;}

.bx_slide_left, .bx_slide_right{display:none !important;}

.bx_ordercart .bx_ordercart_order_pay{margin:35px 0 0;padding:0;}
.bx_ordercart .bx_ordercart_coupon{margin:16px 0 0;}
.bx_ordercart .bx_ordercart_coupon:first-of-type{margin-top:0;margin-bottom:-21px;}
.bx_ordercart .bx_ordercart_coupon span{margin:0 20px 0 0;width:150px;float:left;font-size:14px;line-height:15px;color:#373737;white-space:normal;text-align:left;}
.bx_ordercart .bx_ordercart_coupon .input{/*overflow:hidden;*/padding: 0px 0px 0px 170px;}
.bx_ordercart .bx_ordercart_coupon #coupon{width:100%;box-shadow:none;border:1px solid #eaebec;padding:8px 45px 7px 15px;height:auto;font-size:14px;line-height:20px;font-weight:normal;color:#333;background:#FFF;border-radius: 2px;}
.bx_ordercart .bx_ordercart_order_pay .bx_bt_button{position:absolute;right:0;top:0;width:35px;height:37px;border-radius:0;padding: 0px;font-size:0;line-height:0;-webkit-transition:all .1s ease-in-out;-moz-transition:all .1s ease-in-out;transition:all .1s ease-in-out;border-radius: 0px 2px 2px 0px;}
.bx_ordercart .bx_ordercart_order_pay .bx_bt_button:before{content:"";position:absolute;left:50%;top:50%;margin:-6px 0 0 -7px;width:14px;height:12px;background:url(images/ai.png) -33px -49px no-repeat;cursor:pointer;}
.bx_ordercart .bx_ordercart_order_pay .bx_bt_button:active{box-shadow:none;}
.bx_ordercart .bx_ordercart_coupon:not(:first-of-type){position:relative;margin-left:100px;padding:0 0 0 30px;}
.bx_ordercart .bx_ordercart_coupon:not(:first-of-type):before{content:"";position:absolute;top:6px;left:8px;width:11px;height:11px;background:url(images/icons_wish.png) -102px -86px no-repeat;}
.bx_ordercart .bx_ordercart_coupon:not(:first-of-type).good:before{background-position:-19px -3px;}
.bx_ordercart .bx_ordercart_coupon .bx_ordercart_coupon_notes{float:right;margin:0;padding:0;border:none;box-shadow:none;border-radius:0;display:block;opacity:1;position:relative;top:auto;left:auto;font-size:14px;line-height:20px;color:#333;background:none;}
.bx_ordercart .bx_ordercart_coupon .bx_ordercart_coupon_notes:first-letter{text-transform:uppercase;}
.bx_ordercart .bx_ordercart_coupon input{padding:0;height:auto;width:auto;float:none;border:none;background:none;box-shadow:none;font-size:14px;font-weight:normal;line-height:20px;color:#333;border-radius:0;}
.bx_ordercart .bx_ordercart_coupon input.bad{box-shadow:none;border:none;background:none;}
.bx_ordercart .bx_ordercart_coupon input.disabled{color:#333;}
.bx_ordercart .bx_ordercart_order_pay .bx_ordercart_coupon span.bad,.bx_ordercart .bx_ordercart_order_pay .bx_ordercart_coupon span.disabled{float:right;width:17px;height:17px;margin:3px 0 0 3px;border-radius:100%;background:url(images/close_icons.png) 3px -23px no-repeat;}
.bx_ordercart .bx_ordercart_coupon span.bad:hover,.bx_ordercart .bx_ordercart_coupon span.disabled:hover{background-position: -17px -23px;}
.bx_ordercart .bx_ordercart_coupon input.good{height:auto;width:auto;float:left;border:none;background:none;box-shadow:none;font-size:14px;font-weight:normal;line-height:20px;color:#333;border-radius:0;}
.bx_ordercart .bx_ordercart_coupon span.good{float:right;width:17px;height:17px;margin:3px 0 0 3px;border-radius:100%;background:url(images/close_icons.png) 3px -23px no-repeat;}
.bx_ordercart .bx_ordercart_coupon span.good:hover{background-position: -17px -23px;}
.bx_ordercart #basket_items .custom div[id^=discount_value]{font-size:14px;font-weight:normal;line-height:24px;}
.bx_ordercart .bx_ordercart_coupon:after{content:"";display:table;clear:both;}
.bx_ordercart .bx_ordercart_order_pay_center{margin:0;padding:40px 0 0;border:none;border-top:1px solid #f3f3f3;}
.bx_ordercart .bx_ordercart_order_pay_center .oneclickbuy{margin:0 0 0 36px;line-height:20px;font-weight:600;-webkit-transition:all .1s ease-in-out;-moz-transition:all .1s ease-in-out;transition:all .1s ease-in-out;}
.bx_ordercart .bx_ordercart_order_sum{width:304px;color:#333;}
.bx_ordercart .bx_ordercart_order_sum tr{text-align:left;}
.bx_ordercart .bx_ordercart_order_sum tr td{max-width:145px;text-align:right;display:inline-block;}
.bx_ordercart .bx_ordercart_order_sum tr td.fwb{padding-top:10px;font-weight:500;font-size:16px;line-height:20px;}
.bx_ordercart .bx_ordercart_order_sum tr td:first-child{width:110px;margin:0 36px 0 0;font-weight:500;font-size:16px;line-height:20px;}
.bx_ordercart .bx_ordercart_order_sum tr #allSum_wVAT_FORMATED{white-space:nowrap;font-weight:500;font-size:20px;line-height:20px;overflow: hidden;text-overflow: ellipsis;}
.bx_ordercart .bx_ordercart_order_sum tr #allSum_FORMATED{white-space:nowrap;font-weight:500;font-size:20px;line-height:20px;overflow: hidden;text-overflow: ellipsis;}
.bx_ordercart .bx_ordercart_order_sum tr td.custom_t2{font-size:15px;line-height:20px;color:#333;overflow: hidden;text-overflow: ellipsis;}

.bx_item_list_you_looked_horizontal{margin:0;border-radius:0;border:none;}
.container .bx_item_list_you_looked_horizontal .bx_item_list_title{position:relative;margin: 0px 0px 13px 0px;font-size: 20px;color: #1d2029;line-height: 30px;font-weight: 500;text-transform:none;background:none;text-align:left;padding: 27px 0px 0px;}
.container .bx_item_list_you_looked_horizontal .bx_item_list_title:before{background:#eaebec;width:100%;height:1px;display:block;position:absolute;top:5px;left:0px;right:0px;content:"";}
.bx_item_list_you_looked_horizontal .bx_item_list_section .bx_catalog_item{border: 1px solid #eaebec;padding:20px 26px 7px;text-align: center;}
.bx_item_list_you_looked_horizontal .bx_catalog_item:hover{border: 1px solid #fff;}

.bx_item_list_you_looked_horizontal .bx_catalog_item_images_double, .bx_item_list_you_looked_horizontal .bx_catalog_item_images{background-size: initial;padding-top: 100%;}
.bx-no-touch .bx_item_list_you_looked_horizontal .bx_catalog_item.double:hover .bx_catalog_item_images_double, .bx_item_list_you_looked_horizontal .bx_catalog_item_images_double{display:none;}

.bx-no-touch .bx_item_list_you_looked_horizontal .bx_catalog_item.double:hover .bx_catalog_item_images{animation:none;opacity: 1;}
.bx-no-touch .bx_item_list_you_looked_horizontal .bx_catalog_item .bx_catalog_item_container{}
.bx-no-touch .bx_item_list_you_looked_horizontal .bx_catalog_item:hover .bx_catalog_item_container{animation:none;border:none;box-shadow: 0px 0px 14px rgba(0,0,0,0.10);-moz-box-shadow: 0px 0px 14px rgba(0,0,0,0.10);-o-box-shadow: 0px 0px 14px rgba(0,0,0,0.10);-webkit-box-shadow: 0px 0px 14px rgba(0,0,0,0.10);padding: 20px 26px 7px;}

.bx_item_list_you_looked_horizontal .bx_stick_disc.bottom{display:none !important;}
.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_stick{left:-27px;}
.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_stick.top{top:0px;}
.bx_item_list_you_looked_horizontal .bx_catalog_item_title{height:auto;margin: 0px 0px 12px;}
.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_catalog_item_title a{font-size:14px;font-weight:500;overflow: visible;white-space: normal;}
.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_catalog_item_title a:hover{color:#1d2029;}

.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_stick{text-shadow:none;font-weight: 400;height: 24px;margin: 0px 0px 2px;background-image: none;background-color: #e52929;display: inline-block;color: #fff;width: auto;font-size: 12px;line-height: 12px;padding: 6px 10px 0px;position: absolute;box-sizing: border-box;}
.bx_item_list_you_looked_horizontal .bx_catalog_item_price{margin: 0px 0px 14px;}
.bx_item_list_you_looked_horizontal .bx_catalog_item_price .bx_price{font-size: 18px;font-weight: 600;line-height: 15px;padding:0px;}

.bx_item_list_you_looked_horizontal .bx_catalog_item_controls .bx_catalog_item_controls_blocktwo a, .bx_item_list_you_looked_horizontal .bx_catalog_item_controls .bx_catalog_item_controls_blockone a{text-shadow:none;padding: 7px 11px 7px 11px;font-weight: 400;cursor: pointer;font-size: 13px;line-height: 16px;border-radius: 2px;text-align: center;margin: 0px;width: auto;height: auto;}
.bx_item_list_you_looked_horizontal .bx_catalog_item_controls .bx_catalog_item_controls_blocktwo a, .bx_item_list_you_looked_horizontal .bx_catalog_item_controls .bx_catalog_item_controls_blockone a{margin:0px 0px 12px;border: 0px;}

.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_catalog_item_container .bx_catalog_item_articul{display:none !important;}
.bx_item_list_you_looked_horizontal .bx_item_detail_scu .bx_scu ul li{position: relative;z-index: 100;cursor: pointer;outline: none;font-size: 11px;padding: 0px 9px 0px 0px;display: inline-block;padding-top: 0px !important;width: auto !important;}
.bx_item_list_you_looked_horizontal .bx_item_detail_scu .bx_scu ul li:before{display:none;}
.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_item_detail_scu .bx_scu ul li .cnt{border:none !important;position: initial;padding: 0px;overflow:visible;}
.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_item_detail_scu .bx_scu ul li .cnt_item{position:static !important;}
.bx_item_list_you_looked_horizontal .bx_item_detail_scu .bx_scu{overflow:visible;}

.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_item_detail_scu{}
.bx_item_list_you_looked_horizontal .bx_item_detail_size{margin:0px;}
.bx_item_list_you_looked_horizontal .bx_item_detail_size .bx_size >ul{margin:0px !important;}
.bx_item_list_you_looked_horizontal .bx_item_detail_size ul li{display: inline-block;font-size: 10px;border: 1px solid #888;padding: 0 10px;text-align: center;cursor: pointer;border-radius: 2px;float:none;height:auto;width: auto !important;margin: 0px 5px 5px 0px;}
.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_item_detail_size ul li span{color: #373737;display: block;line-height: 15px;margin: 0px;text-align: center;padding: 7px 0px 7px;font-size: 13px;position: initial;border: none !important;background: none;}
.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_item_detail_size ul li.bx_active span{color:#fff;}
.bx_item_list_you_looked_horizontal ul li:before{display:none;}
.bx-no-touch .bx_item_list_you_looked_horizontal .bx_catalog_item:hover .bx_catalog_item_scu{margin: 0px 0px 20px;}
.bx_item_list_you_looked_horizontal .bx_item_list_slide{height: auto !important;margin: 0px -1%;}

.bx_ordercart .bx_ordercart_order_pay .bx_ordercart_order_pay_center .checkout{opacity:0;-webkit-appearance: none;padding:8px 21px 9px 20px;background:none;font-size:13px;line-height:20px;border: 1px solid #ddd;text-shadow:none;-webkit-transition:all .1s ease-in-out;-moz-transition:all .1s ease-in-out;transition:all .1s ease-in-out;}
.bx_ordercart .bx_ordercart_order_pay .bx_ordercart_order_pay_center .checkout:hover{color:#FFF;}
.bx_ordercart .bx_ordercart_order_pay .bx_ordercart_order_pay_center .checkout:active{box-shadow:none;background:none;}
.bx_ordercart .bx_ordercart_order_pay .bx_ordercart_order_pay_center .catalog_back{margin:0;float:left;line-height:19px;font-weight:600;}
.bx_ordercart .bx_sort_container{margin:0 0 20px;min-height:0;font-size:15px;font-weight:500;line-height:22px;}
.bx_ordercart .bx_sort_container:after{content:"";display:table;clear:both;}
.bx_ordercart .bx_sort_container>span{display:none;}
.bx_ordercart .bx_sort_container a{float:left;display:block;position:relative;padding:7px 0px 6px 0px;background:#fff;color:#777777;border-radius:0;line-height:20px;text-align:center;border:none;font-size: 16px;font-weight: 500;margin:0px 20px 0px 0px;}
.bx_ordercart .bx_sort_container a:first-of-type{margin-left:0;}
.bx_ordercart .bx_sort_container a:not(.current):active{color:#777777;text-shadow:none;box-shadow:none;}
.bx_ordercart .bx_sort_container a:hover{color:#333;background:#fff;}
.bx_ordercart .bx_sort_container a.current,.bx_ordercart .bx_sort_container a.current:hover{text-shadow:none;color:#1d2029;box-shadow:none;border-radius:0;cursor:default;background:#FFF;}
.bx_ordercart .bx_sort_container a.current:after{content:"";position:absolute;left:0px;right:0px;bottom:0px;height:2px;}
.bx_ordercart .bx_sort_container .flat{display:inline!important;}
.bigdata_recommended_products_container{display:block;margin:39px 0 0;}

.bx_ordercart_order_pay_center .icon_error_wrapper{float:right;}
.bx_ordercart_order_pay_center:after{content:"";display:table;clear:both;}
.fademask_ext {position: fixed;top: 0px;left: 0px;background: #374246;width: 100%;height: 100%;min-height: 100%;opacity: 0.8;z-index: 1050;}

/*order styles*/
.middle >.container{width:100% !important;padding:0px !important;position:relative;}
#content #bx-soa-order-form *{box-sizing:border-box;font-family: Ubuntu, Arial, Helvetica, sans-serif;}
#bx-soa-order-form{font-size:12px;}
#bx-soa-order .form-control:focus{outline:none;box-shadow:none;border-color:#E5E5E5;}

#content #bx-soa-order-form .row{margin-top:0px;}

#content #bx-soa-order-form .row.bx-soa-more{margin-top:30px;}

.bx-soa-section.bx-step-completed .bx-soa-section-content, .bx-soa-section.bx-selected .bx-soa-section-content{padding:0;line-height:20px;font-size:14px;transition:none;}
.bx-soa-section{transition:none;}
#bx-soa-order .alert-danger{font-size:14px;line-height:20px;border-radius:0;/*margin:-30px -29px 23px -79px;*/padding:15px 29px;background:#ffeeee;color:#e83333;}
#bx-soa-order .form-group{/*margin:0;*/}
#bx-soa-order .bx-soa-section{border-radius:0;margin:0 0 20px;}
#bx-soa-order .bx-soa-section.bx-selected{border:1px solid #f3f3f3;}
#bx-soa-order .bx-soa-section .bx-soa-section-title-container{padding: 29px 19px 29px 79px;border-bottom:1px solid #f3f3f3;background:#fbfbfb;cursor:pointer;}
#bx-soa-order .bx-soa-section.bx-selected .bx-soa-section-title-container{cursor:default;}
#bx-soa-order .bx-soa-section .bx-soa-section-title{position: relative;font-size: 20px;line-height: 24px;color:#333;padding-left:0!important;}
#bx-soa-order .bx-soa-section .bx-soa-section-title:before{content: "";position: absolute;left: -50px;top: -3px;margin:0;width: 30px;height: 30px;background: url(images/order.png) 0 0 no-repeat;}
#bx-soa-order .bx-soa-section.bx-step-completed .bx-soa-section-title:before{background-color:#52c200;background-position:-30px -30px !important;}
#bx-soa-order .bx-soa-section.bx-step-error:not(.bx-selected) .bx-soa-section-title:before{background:none;background:url(images/order.png) -60px -30px no-repeat !important;}
#bx-soa-order .bx-soa-editstep{display:inline-block;margin:1px 0 0;font-size:14px;line-height:20px;border:none;}
#bx-soa-order .bx-soa-editstep:first-letter{text-transform:uppercase;}
#bx-soa-order .bx-soa-editstep:hover{text-decoration:none;}
#bx-soa-order .bx-soa-section.bx-selected .bx-soa-editstep{display:none;}
#bx-soa-order #bx-soa-region{border:1px solid #f3f3f3;}
#bx-soa-order #bx-soa-region .bx_soa_location{}
#bx-soa-order #bx-soa-region .bx_soa_location .form-group .bx-soa-custom-label{display:block;}
#bx-soa-order #bx-soa-region .bx_soa_location .form-group:first-child br{display:none;}
#bx-soa-order #bx-soa-region .bx_soa_location .form-group:first-child>label{margin:0 0 5px;}
#bx-soa-order #bx-soa-region .bx_soa_location .form-group.bx-soa-location-input-container{margin:0 0 25px;}
#bx-soa-order #bx-soa-region .bx_soa_location .radio-inline{margin:5px 40px 5px 0;}
#bx-soa-order .bx-soa .bx-soa-custom-label, #bx-soa-order  .bx-soa .form-group label{margin:0;padding:0;font-size:12px;line-height:20px;margin-bottom: 2px;color:#777777;z-index:1;}
#bx-soa-order div[class*=bx-sls] .quick-locations{margin:7px 0 12px;}
#bx-soa-order div[class*=bx-sls] .quick-locations .quick-location-tag{margin:3px 1px 1px 1px;padding:0;padding: 5px 15px;height: auto;background: none;border:1px solid #ddd;font-size: 14px;line-height: 20px;-webkit-transition: all .1s ease-in-out;-moz-transition: all .1s ease-in-out;transition: all .1s ease-in-out;}
#bx-soa-order div[class*=bx-sls] .quick-locations .quick-location-tag:hover{color:#FFF;}
#bx-soa-order .bx-ui-sls-tree-trunk{font-size:14px;padding-left: 45px;}
#bx-soa-order div[class*=bx-sls] .form-control.dropdown-block{font-size: 14px;color: #333;line-height:20px;border: 1px solid #ececec;background: #f7f7f7;padding-left:44px;}
.bx-soa-location-input-container .bx-ui-slst-pool > div{padding-left:44px;}
#bx-soa-order .bx-sls .form-control.dropdown-block{position:relative;padding: 10px 17px 8px 49px;height: auto;}
#bx-soa-order div[class*=bx-sls] .form-control.dropdown-block .bx-ui-sls-container input{height:auto;padding-right:27px!important;}

div[class*=bx-sls] .dropdown-icon{position:absolute;left:17px;top:50%;margin:-8px 0 0;width:16px;height:16px;background:url(images/order_ext.png) -5px -75px no-repeat;}
div[class*=bx-sls] .bx-ui-sls-clear{position:absolute;margin:0;height:auto;right:0;top:0;bottom:0;width:44px;height:auto;cursor:pointer;background:none;}
div[class*=bx-sls] .bx-ui-sls-clear:before{content:"";position:absolute;left:50%;top:50%;margin:-10px 0 0 -10px;width:20px;height:20px;background:url(images/order_ext.png) -82px -61px no-repeat !important;border-radius:100%;}
div[class*=bx-sls] .bx-ui-sls-clear:hover:before{background-position:-82px -82px !important;background-color:#ddd;}
.bx-sls .dropdown-block{background: #f7f7f7;padding:1px 44px 1px;font-size: 14px;color: #333;line-height: 20px;border: 1px solid #ececec;box-shadow:none;}



#bx-soa-order .bx-slst .dropdown-block.form-control{margin-bottom:10px;}
#bx-soa-order #bx-soa-orderSave{margin:40px 0 0;padding:0!important;text-align:center;}
#bx-soa-order #bx-soa-orderSave a{float:none!important;text-shadow: none;color: #FFF;padding: 11px 40px 13px;font-size: 17px;line-height: 20px;font-weight: bold;}
#bx-soa-order .bx-soa-more{border:none;padding:25px 29px 0 29px;margin:27px -29px 0 -79px;border-top:1px solid #f1f1f1;}
#bx-soa-order .bx-soa-more .bx-soa-more-btn{padding:0;}
#bx-soa-order .bx-soa-more .bx-soa-more-btn .pull-left{background:none;}
#bx-soa-order .bx-soa-more .bx-soa-more-btn .pull-left:hover{color:#FFF;}
#bx-soa-order #bx-soa-region .bx_soa_location .form-group[data-property-id-row]{margin-top:20px;}

#bx-soa-order .bx-soa-section-title-count{display:none;}
#bx-soa-order .alert .row {margin-top:0px;}
#bx-soa-order .alert .row div {font-size:12px;}

.bx-sls .dropdown-fade2white{display:none;}
#bx-soa-order .form-group{position:relative;font-size: 14px;}
#bx-soa-order .form-group label[for="zipProperty"]:not(.error){top:0px;left:0px;font-weight:normal;cursor:text;display: block;font-size: 12px;margin-bottom: 2px;color:#777777;}
#bx-soa-order .form-group.value_y label:not(.error){position:absolute;background: #FFF;font-size:12px;top: -10px;left: 10px;padding: 0 7px;}
#bx-soa-order .form-group.value_y input, #bx-soa-order .form-group.value_y textarea{background:#FFF;}

#bx-soa-order .bx-soa-reference{margin:-8px 0 0;padding:0;font-size:12px;line-height:14px;color:#999999;}
#bx-soa-order .bx-soa .form-group .radio-inline{padding:0;}
#bx-soa-order .bx-soa .form-group .radio-inline label{display: inline-block;float: none;margin: 0;font-size: 15px;font-weight: 500;color: #333333;cursor: pointer;position: relative;padding: 0 0 0 32px!important;}
#bx-soa-order .bx-soa .form-group .radio-inline label:before{content: "";display:block;position: absolute;left: 0;top: -1px;width: 20px;height: 20px;background: #fbfbfb;border: 1px solid #e9e9e9;border-radius: 100%;}
#bx-soa-order .bx-soa .form-group .radio-inline label:hover:before{border:none;}
#bx-soa-order .bx-soa .form-group .radio-inline.checked label{cursor:default;}
#bx-soa-order .bx-soa .form-group .radio-inline.checked label:before{border:none;}
#bx-soa-order .bx-soa .form-group .radio-inline.checked label:after{content: "";position: absolute;left: 5px;top: 5px;width: 10px;height: 8px;background: url(images/order_ext.png) -64px -9px no-repeat;}
#bx-soa-order .bx-soa .form-group .radio-inline input{display:none;}
#bx-soa-order .bx-soa-tooltip{position:absolute;bottom:-22px;left:17px;padding:0;background:none;max-width: 100%;box-shadow:none;top:auto;}
#bx-soa-order .bx-soa-tooltip .tooltip-arrow{display:none;}
#bx-soa-order .bx-soa-tooltip .tooltip-inner{max-width:100%;padding:0;font-size:12px;line-height:20px;color:#fe5252;background:none;}
#bx-soa-order .has-error .form-control{border-color:#fe5252;}
#bx-soa-order .form-group.has-error{margin-bottom:41px!important;}
#bx-soa-order .form-group.has-error input{border-color:#fe5252;}
#bx-soa-order .form-group.has-error .form-control.dropdown-block{border-color:#fe5252;}

#bx-soa-order #bx-soa-delivery .bx-soa-section-title:before{background-position:-30px 0;}
#bx-soa-order #bx-soa-delivery .bx-soa-pp-price{white-space:nowrap;}
#bx-soa-order .bx-soa .bx-soa-location-input-container:before{display:none;}
#bx-soa-order .bx-soa-pp-item-container:after{content:"";display:table;clear:both;}
#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company{clear:both;position:relative;float:none;border:none;margin:19px 0 0;padding:0 0 24px;width:auto;transition:none;cursor:pointer;}
#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company:after{content:"";display:table;clear:both;}
#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company:first-child{margin-top:0;}
#bx-soa-order .bx-soa-pp-company-graf-container{position:relative;padding:0;border:1px solid #fbfbfb;border-radius:0;width:120px;height:72px;background:#fbfbfb;cursor:pointer;}
#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company-graf-container{/*float:left;*/}
#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company-graf-container{display:table-cell;vertical-align:middle;}
#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company-graf-container:before{content:"";position:absolute;top:7px;left:7px;width:20px;height:20px;border:1px solid #e5e5e5;background:#FFF;border-radius:100%;z-index:1;}
#bx-soa-order .bx-soa-pp-item-container:hover .bx-soa-pp-company-graf-container:before{border:none;}
#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company.bx-selected .bx-soa-pp-company-graf-container:before{border:none;}
#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company.bx-selected .bx-soa-pp-company-graf-container:after{content: "";position: absolute;left: 12px;top: 13px;width: 10px;height: 8px;background: url(images/order_ext.png) -64px -9px no-repeat;z-index:2;}

#bx-soa-order .bx-soa-pp-company-graf-container .bx-soa-pp-company-image{position:relative;border:1px solid #e5e5e5;width:118px;height:70px;top:auto;right:auto;bottom:auto;left:auto;background-position:center center!important;background-size:auto!important;background-repeat:no-repeat!important;}
#bx-soa-order .bx-soa-pp-company.bx-selected .bx-soa-pp-company-graf-container .bx-soa-pp-company-image{cursor:default;}
#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company-graf-container input{display:none;}
#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company-smalltitle{display:table-cell;vertical-align:middle;padding:0 0 0 20px;font-size:15px;font-weight:500;line-height:20px;color:#777;text-align:left;}
#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company.bx-selected{cursor:default;}
#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company.bx-selected .bx-soa-pp-company-smalltitle{color:#333;}
#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-delivery-cost{font-size:14px;line-height:20px;color:#333;padding:1px 5px;background:#fbfbfb;text-align:center;left:0;right:0;bottom:-24px;border:1px solid #e5e5e5;border-top:none;}

#bx-soa-order .bx-sls .bx-ui-sls-fake, #bx-soa-order .bx-sls .bx-ui-sls-route{font-family: Ubuntu, Arial, Helvetica, sans-serif;}

#bx-soa-order .bx-soa-pp-desc-container{padding-top:0;}
#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company{position:relative;padding:22px 24px 20px;border:1px solid #e5e5e5;border-top:none;background:#fbfbfb;-moz-border-radius-bottomright: 2px;-webkit-border-bottom-right-radius: 2px;border-bottom-right-radius: 2px;-moz-border-radius-bottomleft: 2px;-webkit-border-bottom-left-radius: 2px;border-bottom-left-radius: 2px;}
#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company:before{content:"";position:absolute;top:0;right:-1px;left:-1px;height:2px;}
#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company:after{content:"";display:table;clear:both;}
#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-company-image{margin:5px 0 0;background:#FFF;cursor:default;border-radius:0;}
#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-company-block:after{content:"";display:table;clear:both;}
#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-company-block>br{display:none;}
#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-company-desc{padding:10px 0 0 0px;font-size:13px;line-height:20px;color:#777777;}
#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company ul.bx-soa-pp-list{padding:0;margin:17px 0 0;}
#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company ul.bx-soa-pp-list li{padding:0;}
#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-list-termin{margin:0 3px 0 0;display:inline-block;vertical-align:top;font-size:15px;font-weight:500;line-height:20px;color:#333;}
#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-list-description{display:inline-block;vertical-align:top;font-size:15px;font-weight:500;line-height:20px;color:#333;}
#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company-logo{padding:0;}
#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company-subTitle{margin:0 0 10px;font-size:15px;font-weight:500;line-height:20px;color:#383838;}
#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-field label:not(.error){position:relative;top:auto;left:auto;margin:0 0 5px;padding:0;font-size:13px;line-height:20px;color:#777777;background:none;}
#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-field .bx-soa-service-small{margin:7px 0 0;font-size:12px;line-height:14px;color:#999999;}
#bx-soa-order .bx-soa-pp-desc-container .checkbox{margin:21px 0 0;}
#bx-soa-order .bx-soa-pp-desc-container .checkbox:first-child{margin-top:0;}
#bx-soa-order .bx-soa-pp-desc-container .checkbox input{display:none;}
#bx-soa-order .bx-soa-pp-desc-container .checkbox label{position:relative;padding:0 0 0 27px;font-size:14px;line-height:20px;color:#333333;}
#bx-soa-order .bx-soa-pp-desc-container .checkbox label:before{content:"";position:absolute;left:0;top:1px;width:18px;height:18px;border:1px solid #e9e9e9;background:#FFF;border-radius:2px;}
#bx-soa-order .bx-soa-pp-desc-container .checkbox label:hover:before{border:none;}
#bx-soa-order .bx-soa-pp-desc-container .checkbox label.checked:before{border:none;}
#bx-soa-order .bx-soa-pp-desc-container .checkbox label.checked:after{content:"";position:absolute;top:6px;left:4px;width:10px;height:8px;background:url(images/order_ext.png) -64px -9px no-repeat;}
#bx-soa-order .bx-soa-pp-desc-container .checkbox .bx-soa-service-small{margin:1px 0 0;}
#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-field{margin:13px 0 0;}
#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-field:first-of-type{margin-top:22px;}
#bx-soa-order .bx-soa-section{border:1px solid #f3f3f3;}
#bx-soa-order .bx-soa-section.bx-step-completed{border:1px solid #f3f3f3;}
#bx-soa-order .bx-soa-pp-company-block .form-control{font-size:12px;}
#bx-soa-order .form-control{margin-bottom:0px;}

#bx-soa-order .bx-soa-section .bx-soa-section-content{padding:25px 29px 25px 79px;font-size:15px;line-height:20px;color:#333333;transition:none;}
#bx-soa-order .bx-soa-section.bx-active .bx-soa-section-content strong{font-weight:500;margin:0;}
#bx-soa-order .bx-soa-coupon{margin:30px -29px -2px -79px;padding:25px 29px 0 29px;border-top:1px solid #f3f3f3;}
#bx-soa-order #bx-soa-basket .bx-soa-coupon{margin:0 0 27px;}
#bx-soa-order #bx-soa-basket .bx-soa-more{margin:0 0 25px;}
#bx-soa-order .bx-soa-coupon-label{margin:2px 0 0;padding:0;display:inline-block;vertical-align:top;}
#bx-soa-order .bx-soa-coupon-block{display:inline-block;vertical-align:top;}
#bx-soa-order .bx-soa-coupon label{margin:0;width:90px;font-size:14px;font-weight:normal;line-height:15px;color:#333333;}
#bx-soa-order .bx-soa-coupon.bx-soa-coupon-item-fixed .bx-soa-coupon-label{margin-top:0;}
#bx-soa-order .bx-soa-coupon-input{width:260px;display:block;position:relative;overflow:hidden;border-radius:2px;}
#bx-soa-order .bx-soa-coupon-input:after{content:"";position:absolute;top:-1px;bottom:-1px;right:0;margin:0;width:57px;height:auto;cursor:pointer;border:none;background:url(images/order_ext.png) -23px -28px no-repeat;-webkit-transform: rotate(0);-moz-transform: rotate(0);-o-transform: rotate(0);-ms-transform: rotate(0);transform: rotate(0);}
#bx-soa-order .bx-soa-coupon-input:hover:after{background-position:14px -28px;}
#bx-soa-order .bx-soa-coupon-input input[type=text].form-control,#bx-soa-order textarea.form-control{padding:8px 67px 7px 17px;height:auto;border:none;color:#333;background:#fbfbfb;font-size: 14px;line-height:20px;border-radius:2px;border:1px solid #eaebec;}
#bx-soa-order .bx-soa-coupon-input input[type=text].form-control:focus{background:#FFF;}
#bx-soa-order .bx-soa-section.bx-active .bx-soa-section-content .bx-soa-pp-company-selected img{display:none;}
#bx-soa-order .bx-soa-pp-company-selected{padding-top:0;padding-bottom:0;}
#bx-soa-order .bx-soa-pp-price{padding:0;font-size:15px;font-weight:500;line-height:20px;color:#333;}

#bx-soa-order #bx-soa-paysystem .bx-soa-section-title:before{background-position:-60px 0;}
#bx-soa-order #bx-soa-properties .bx-soa-section-title:before{background-position:-90px 0;}
#bx-soa-order #bx-soa-properties .form-group:not([data-property-id-row]){margin:4px 0 0;}
#bx-soa-order #bx-soa-properties .form-group:not([data-property-id-row]):first-child{margin-top:0;}
#bx-soa-order #bx-soa-properties .form-group:not([data-property-id-row]) .bx-soa-custom-label{margin:0 3px 0 0;display:inline-block;vertical-align:top;font-size:15px;font-weight:500;line-height:20px;color:#333;}
#bx-soa-order #bx-soa-properties .form-group:not([data-property-id-row]) .bx-soa-custom-label:after{content:":";}
#bx-soa-order #bx-soa-properties .form-group:not([data-property-id-row]) .bx-soa-custom-label .bx-authform-starrequired{display:none;}
#bx-soa-order #bx-soa-properties .form-group:not([data-property-id-row])>div{display:inline-block;vertical-align:top;}
#bx-soa-order #bx-soa-basket .bx-soa-section-title:before{background-position:0 -30px;}
#bx-soa-order .bx-soa-section .bx-soa-coupon-item{display:block;}
#bx-soa-order .bx-soa-section .bx-soa-section-content .bx-soa-coupon-item>strong{display:block;margin:16px 0 0;font-weight:normal;text-transform:none;font-size:14px;line-height:20px;color:#333333;}
#bx-soa-order .bx-soa-section .bx-soa-coupon-item .bx-soa-tooltip{float:right;display:block;margin:0 0 0 15px;opacity:1;position:relative;left:auto;bottom:auto;}
#bx-soa-order #bx-soa-paysystem .bx-soa-pp-item-container .bx-soa-pp-company{padding-bottom:0;}
#bx-soa-order .bx-soa-coupon-item .bx-soa-tooltip .tooltip-inner{font-size:14px;color:#333;}
#bx-soa-order .bx-soa-coupon-item .bx-soa-coupon-item-danger{position:relative;padding:0 0 0 30px;color:#333;}
#bx-soa-order .bx-soa-coupon-item .bx-soa-coupon-item-used{position:relative;padding:0 0 0 30px;color:#333;}
#bx-soa-order .bx-soa-coupon-item .bx-soa-coupon-item-success{position:relative;padding:0 0 0 30px;color:#333;}
#bx-soa-order .bx-soa-coupon-item .bx-soa-coupon-item-danger:before{content: "";position: absolute;top: 0;left: 0;width: 20px;height: 20px;background: url(images/order_ext.png) -32px -73px no-repeat;}
#bx-soa-order .bx-soa-coupon-item .bx-soa-coupon-item-used:before{content: "";position: absolute;top: 0;left: 0;width: 20px;height: 20px;background: url(images/order_ext.png) -26px -4px no-repeat;}
#bx-soa-order .bx-soa-coupon-item .bx-soa-coupon-item-success:before{content: "";position: absolute;top: 0;left: 0;width: 20px;height: 20px;background: url(images/order_ext.png) -5px -4px no-repeat;}
#bx-soa-order .bx-soa-coupon-item .bx-soa-coupon-remove{float:right;width: 20px;height: 20px;margin: 2px 0 0 3px;border-radius: 100%;background: url(images/order_ext.png) -82px -62px no-repeat;}
#bx-soa-order .bx-soa-coupon-item .bx-soa-coupon-remove:hover{background-position:-82px -82px;}

#bx-soa-order #bx-soa-properties .form-group{margin:0 0 30px;}
#bx-soa-order #bx-soa-properties.bx-selected .form-group label{position: relative;top: 0px;left: 0px;cursor: text;font-size: 12px;margin-bottom: 2px;}
#bx-soa-order #bx-soa-properties.bx-selected .form-group.value_y label{background: #FFF;top: -10px;left: 10px;padding: 0 7px;}
#bx-soa-order #bx-soa-properties .form-group textarea{height:106px;border:1px solid #ececec;}
#bx-soa-order #propsMap{margin:0 0 20px;height:332px!important;}
#bx-soa-order #propsMap>ymaps{height:332px!important;}
#bx-soa-order .bx-soa-cart-total{padding:30px 29px 40px;border:1px solid #f3f3f3;border-radius:0;background:#FFF;}
#bx-soa-order .bx-soa-cart-total .bx-soa-cart-total-line{margin:2px 0 0;padding:0;font-size:14px;line-height:20px;color:#333333;border:none;}
#bx-soa-order .bx-soa-cart-total .bx-soa-cart-total-line:first-child{margin-top:0;}
#bx-soa-order .bx-soa-cart-total .bx-soa-cart-total-line .bx-soa-cart-t{width:46%;font-weight:normal;}
#bx-soa-order .bx-soa-cart-total .bx-soa-cart-total-line .bx-soa-cart-d{width:54%;text-align:right;}
#bx-soa-order .bx-soa-cart-total .bx-soa-cart-total-line-total{margin:27px 0 0;padding:25px 0 0;border-top:1px solid #f3f3f3;}
#bx-soa-order .bx-soa-cart-total .bx-soa-cart-total-line-total .bx-soa-cart-t{font-size:16px;font-weight:500;}
#bx-soa-order .bx-soa-cart-total .bx-soa-cart-total-line-total .bx-soa-cart-d{font-size:18px!important;font-weight:500;}
#bx-soa-order .bx-soa-cart-total-button-container{padding:0;margin:26px 0 0;}
#bx-soa-order .bx-soa-cart-total-button-container .btn{padding: 10px 12px 12px;font-size:17px!important;}
#bx-soa-order #bx-soa-basket .bx-soa-section-content{padding:0;}
#bx-soa-order #bx-soa-basket .bx-soa-coupon.bx-soa-coupon-item-fixed{margin:0 0 30px;}
#bx-soa-order #bx-soa-basket .bx-soa-item-table{margin:0 0 -1px;}
#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr .bx-soa-item-td{padding:39px 10px 25px!important;border-top:none;border-bottom:1px solid #f3f3f3;position:relative;}
#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr .bx-soa-item-td .bx-soa-info-shower{padding:0px 20px 10px;display: inline-block;}
.bx-soa-info-shower + .bx-soa-item-info-block.bx-active{padding:0px 20px 0px;}
.bx-soa-info-block .bx-soa-info-line td{font-size:13px;}
#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr:first-child .bx-soa-item-td .bx-soa-item-td-title{padding:0;font-size:13px;line-height:20px;color:#999999;}
#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr:first-child .bx-soa-item-td{padding:7px 10px 8px!important;}
#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr:first-child .bx-soa-item-td:first-child{/*padding-left:114px!important;*/}
#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr .bx-soa-item-td:last-child{padding-right:24px!important;}
#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-block{padding:0 0 0 14px;}
#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-img-block{margin:0px 0 0;padding:0;width:70px;height:70px;line-height:70px;}
#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-img-block .bx-soa-item-imgcontainer{width:70px;height:70px;line-height:70px;padding:0;border-radius:0;border:none;}
#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-content{padding:0 0 0 90px;}
#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-title{margin:0 0 6px;padding:0;font-size:14px;font-weight:normal;line-height:20px;}
#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-title a{color:#333;}
#bx-soa-order #bx-soa-basket .bx-soa-item-content .bx-scu-container{max-width:100%;height:auto;margin:0 0 10px;}
#bx-soa-order #bx-soa-basket .bx-soa-item-content .bx-scu-container:after{background:none;}
#bx-soa-order #bx-soa-basket .bx-soa-item-content .bx-scu-container .bx-soa-item-td-title{margin:0;padding:0;font-size:12px;line-height:16px;color:#999999;}
#bx-soa-order #bx-soa-basket .bx-soa-item-content .bx-scu-container .bx-soa-item-td-text{margin:0 0 0 6px;padding:0;font-size:12px;line-height:16px;color:#999999;}
#bx-soa-order #bx-soa-basket .bx-soa-item-td-text small{display:block;margin: -1px 0 0;font-size: 11px;line-height: 14px;color: #aeaeae;}
#bx-soa-order #bx-soa-basket .bx-soa-item-properties.bx-text-right{text-align:left;}
#bx-soa-order #bx-soa-basket .bx-soa-item-properties.bx-text-right>div{text-align:left;}
#bx-soa-order #bx-soa-basket .bx-soa-item-td-text{line-height:20px;}
#bx-soa-order #bx-soa-basket .bx-price{white-space;font-size:18px;line-height:16px;color:#333;}
#bx-soa-order #bx-soa-basket .bx-price+br{/*display:none;*/}
#bx-soa-order #bx-soa-basket .bx-soa-item-td-title{font-size:12px;color:#999;vertical-align:top;}
#bx-soa-order .bx-price-old{margin:0 0 0 4px!important;font-size:13px;font-weight:normal!important;line-height:20px;color:#777777;}
#bx-soa-order #bx-soa-total-mobile{margin:0 0 20px!important;}
.bx-soa-item-tr.bx-soa-item-info-container+.bx-soa-basket-info .bx-soa-item-td{border-top: 1px solid #f3f3f3 !important;}
.bx-soa-item-tr.bx-soa-item-info-container .bx-soa-item-td{border:none !important;}
#content noscript + b{display:none;}

.sale_order_full_table{position:relative;display:block;margin:0 auto;max-width:730px;}
.sale_order_full_table:first-of-type{margin-top:21px;padding:101px 0 0 !important;text-align:center;color:#333;border:none !important;}
.sale_order_full_table:first-of-type:before{content:"";position:absolute;left:50%;top:0;margin:0 0 0 -35px;width:70px;height:70px;background:url(images/order_ext.png) -103px -5px no-repeat;}
.sale_order_full_table:last-of-type{border:1px solid #f3f3f3;padding:34px 39px 34px;}
.sale_order_full_table:last-of-type tr:last-child td:first-child{padding-top:20px;}
.sale_order_full_table tbody{display:block;}
.sale_order_full_table tr{display:block;}
.sale_order_full_table .ps_logo{display:block;}
.sale_order_full_table .ps_logo br{display:none;}
.sale_order_full_table .ps_logo .pay_name{margin:0 0 22px;font-size:18px;font-weight:500;line-height:20px;color:#333;}
.sale_order_full_table .ps_logo .image{margin:0 25px 0 0;display:inline-block;vertical-align:middle;width:120px;height:72px;line-height:68px;text-align:center;border:1px solid #e5e5e5;}
.sale_order_full_table .ps_logo .paysystem_name{display:inline-block;vertical-align:middle;font-size:14px;line-height:20px;color:#333333;}
.sale_order_full_table td>.tablebodytext{display:block;color:#333;}
.sale_order_full_table .tablebodytext br:first-of-type{display:none;}
.sale_order_full_table input[name="BuyButton"]{margin:-7px 0 0;padding:7px 19px 9px;font-size:14px;line-height:20px;font-weight:bold;color:#fff;border:1px solid transparent;-webkit-transition: all .1s ease-in-out;-moz-transition: all .1s ease-in-out;transition: all .1s ease-in-out;}
.sale_order_full_table form[name="ShopForm"] .tablebodytext{display:block;margin:8px 0 0;font-size:12px;line-height:18px;color:#777777;}
.sale_order_full_table form[name="ShopForm"] .tablebodytext b{font-weight:normal;color:#333333;}

#bx-soa-order a{text-decoration:none;}
#bx-soa-order .bx-soa-cart-total .change_basket{font-size: 16px;font-weight: 600;position: relative;color: #333;border-bottom: 1px solid #eaebec;margin: 0px -29px 43px;padding:2px 29px 33px;}
#bx-soa-order .bx-soa-cart-total .change_basket .change_link{position:absolute;top:5px;right:29px;font-size: 14px;font-weight:400;}

.bx-soa-auth .bx-authform-input-container input[type="text"], .bx-soa-auth .bx-authform-input-container input[type="password"]{box-sizing: border-box;-moz-box-sizing: border-box;-o-box-sizing: border-box;-webkit-box-sizing: border-box;background: #f7f7f7;border: 1px solid #eaebec;
    border-radius: 2px;box-shadow: none;color: #383838;height: auto;font-size: 12px;padding: 8px 13px 7px;width: 100%;line-height: 20px;}
.bx-soa-auth .bx-authform-input-container label{font-size: 12px;margin-bottom: 2px;color: #777;}

#bx-soa-order input[type=text], #bx-soa-order input[type=password], #bx-soa-order input[type=email], #bx-soa-order select, #bx-soa-order textarea{font-size:14px;}

.sale_order_full_table input[name="BuyButton"]{color:#fff;}
.magnifier {text-align: center;background: #fff;}
.magnifier img{vertical-align: middle;margin: auto;display: inline-block;}

.footer_inner.no_fill{background:#f6f6f7;}
.footer_inner.fill{background: transparent !important;}

/*set*/
.catalog_detail .bx-modal-container{padding-top:0px;}
.catalog_detail .bx-modal-container .bx-modal-small-title{font-size:20px;margin-top: -5px;margin-left: 16px;}
.catalog_detail .bx-modal-container .bx-original-item-container *{font-size:14px;}
.catalog_detail .bx-modal-container .bx-original-item-container >div{margin:20px 0px 0px;color: #555;padding:0px 15px;}
.catalog_detail .bx-modal-container .bx-original-item-container .bx-added-item-new-price{padding: 2px 0px 2px;display: inline-block;}
.catalog_detail .bx-modal-container .bx-original-item-container .bx-added-item-new-price, .catalog_detail .bx-modal-container .bx-catalog-set-item .bx-catalog-set-item-price-new{font-weight:600;color:#1d2029;}
.catalog_detail .bx-modal-container .bx-original-item-container .bx-added-item-new-price *, .catalog_detail .bx-modal-container .bx-catalog-set-item .bx-catalog-set-item-price-new *{color:#1d2029;}
.bx-modal-container .bx-catalog-set-item-price-old *, .bx-modal-container .bx-catalog-set-item-price-old, .catalog_detail .bx-modal-container .bx-catalog-set-item .bx-catalog-set-item-price-old{font-weight:400;color:#555555;}
.catalog_detail .bx-modal-container a:hover{text-decoration:none;}
.catalog_detail .bx-modal-container .bx-item-set-current-price{color:#1d2029;font-size:24px;background:none;margin-bottom: 0px;}
.bx-modal-container .bx-item-set-economy-price{display:none;}
.catalog_detail .bx-modal-container .bx-constructor-container-result .bx-added-item-old-price{color:#666666;font-size:15px;}
.catalog_detail .bx-modal-container .bx-constructor-container-result .btn-add{margin-top: 13px;font-weight: 600;font-size:13px;padding: 7px 19px 7px;}
.catalog_detail .bx-modal-container .btn.btn-add{border-color: rgba(0, 0, 0, 0);}

.catalog_detail .bx-modal-container .bx-catalog-set-item{text-align:center;}
.catalog_detail .bx-modal-container .bx-catalog-set-item-img{padding-top:10px !important;max-height:200px;padding-bottom:50px;height: 200px;line-height: 135px;}
.catalog_detail .bx-modal-container .bx-catalog-set-item-img .bx-catalog-set-item-img-container{position:static;}
.catalog_detail .bx-modal-container .bx-catalog-set-item-img .bx-catalog-set-item-img-container img{position:static;transform:none;display:inline-block;}
.bx-modal-container .bx-catalog-set-item-title:after{display:none;}

.catalog_detail .bx-modal-container .bx-catalog-set-item .bx-catalog-set-item-title{height:auto;padding-bottom: 2px;}
.catalog_detail .bx-modal-container .bx-catalog-set-item .bx-catalog-set-item-title a{font-size:14px; line-height:18px;}
.catalog_detail .bx-modal-container .bx-catalog-set-item-price{padding-top:0px;min-height:auto;}

.catalog_detail .bx-modal-container .bx-catalog-set-item-price-old{padding-top:5px;}
.catalog_detail .bx-modal-container .bx-catalog-set-item .bx-catalog-set-item-add-btn{padding-top:9px;}
.catalog_detail .bx-modal-container .bx-catalog-set-topsale-slider-box{padding:20px 0px 0px;}

/*account pay*/
.personal_wrapper{float: left;width: 100%;}
.personal_wrapper .row{margin-top:0px;}
.personal_wrapper .inner_border{border:1px solid #e5e5e5;}

.sale-personal-section-index-block{background-color:#fbfbfb;border:1px solid #f3f3f3;border-radius: 0px;margin: 0px 0px 20px;opacity:1;height:auto;text-transform: none;}
.sale-personal-section-index-block:hover{border-color:#e5e5e5;}
.sale-personal-section-row-flex{margin:0px -10px;}
.personal_wrapper .sale-personal-section-row-flex.row > div[class*=col-md-]{padding:0px 10px;}
.sale-personal-section-index-block-name{font-size:17px;margin: 12px 0px 16px;}
.sale-personal-section-index-block-link{width:100%;}
.sale-personal-section-index-block-ico i{display:inline-block;width:50px;height:50px;background:url('images/icons_mask.png') 0px 0px no-repeat;}
.sale-personal-section-index-block-ico i.bill{background-position: -50px 0px;}
.sale-personal-section-index-block-ico i.personal{background-position: -100px 0px;}
.sale-personal-section-index-block-ico i.filter_orders{background-position: -150px 0px;}
.sale-personal-section-index-block-ico i.profile{background-position: -200px 0px;}
.sale-personal-section-index-block-ico i.cart{background-position: -250px 0px;}
.sale-personal-section-index-block-ico i.subscribe{background-position: -300px 0px;}
.sale-personal-section-index-block-ico i.contact{background-position: -350px 0px;}

.personal_wrapper form input[type="submit"]{border-radius: 2px;margin:-7px 0 10px;cursor:pointer;text-transform:none;padding: 7px 12px 8px;font-size:14px;line-height:16px;font-weight:400;color:#fff !important;text-shadow: none;border:1px solid transparent;-webkit-transition: all .1s ease-in-out;-moz-transition: all .1s ease-in-out;transition: all .1s ease-in-out;}
.personal_wrapper .orders_wrapper .sale-order-list-inner-row > div > a{font-family: Ubuntu, Arial, Helvetica, sans-serif;border-radius: 2px;margin:0px 0 16px;cursor:pointer;text-transform:none;padding: 7px 12px 8px;font-size:14px;line-height:16px;font-weight:400;color:#fff !important;text-shadow: none;border:1px solid transparent;-webkit-transition: all .1s ease-in-out;-moz-transition: all .1s ease-in-out;transition: all .1s ease-in-out;text-decoration:none;display: block;}
.personal_wrapper .orders_wrapper .sale-order-list-inner-row > div > a:before{display:none;}
.personal_wrapper .orders_wrapper .sale-order-list-button, .personal_wrapper .orders_wrapper .sale-order-detail-about-order-inner-container-repeat > a, .sale-order-detail-payment-options-methods-button-element, .sale-order-detail-payment-options-methods-button-element-new-window{
	font-family: Ubuntu, Arial, Helvetica, sans-serif;border-radius: 2px;margin:0px 0 16px;padding: 7px 12px 8px;font-size:14px;line-height:16px;font-weight:400;height: auto;text-shadow: none;border:1px solid transparent;-webkit-transition: all .1s ease-in-out;-moz-transition: all .1s ease-in-out;transition: all .1s ease-in-out;text-transform:none;text-decoration:none;
	display: inline-block;float:right;
}

/*orders*/
.personal_wrapper .row > span{font-size:13px;}
.personal_wrapper .row > div[class*=col-md-], .personal_wrapper .row > ul[class*=col-md-]{box-sizing:border-box;padding:0px 15px;display:inline-block;font-size:12px;vertical-align: top;}
.personal_wrapper .sale-order-list-container, .personal_wrapper div[class*=col-md-]{padding:0px 15px;/*width:100%;*/box-sizing:border-box;display:inline-block;}
.personal_wrapper div[class*=col-xs]{padding:0px 15px;}
.personal_wrapper .row div.sale-order-list-inner-row-template, .personal_wrapper .row div.sale-order-detail-payment-inner-row-template{display:none;text-align: left;width: 100%;max-width: 100%;margin: 0px;font-size: 13px;}
.personal_wrapper .row div.sale-order-detail-payment-inner-row-template{margin-left:16.66666667%;padding-left: 5px;}
.personal_wrapper .row.sale-order-list-inner-row div.sale-order-list-inner-row-template{padding:0px 23px;}
.personal_wrapper .row div.sale-order-detail-about-order-inner-container-details, .personal_wrapper .row div.sale-order-detail-payment-options-shipment-composition-map{display:none;}
.personal_wrapper .col-md-12{width: 100%;}
.personal_wrapper .col-md-11{width: 91.66666667%;}
.personal_wrapper .col-md-10{width: 83.33333333%;}
.personal_wrapper .col-md-9{width: 75%;}
.personal_wrapper .col-md-8{width: 66.66666667%;}
.personal_wrapper .col-md-7{width: 58.33333333%;}
.personal_wrapper .col-md-6{width: 50%;}
.personal_wrapper .col-md-5{width: 41.66666667%;}
.personal_wrapper .col-md-4{width: 33.33%;}
.personal_wrapper .col-md-3{width: 25%;}
.personal_wrapper .col-md-2{width: 16.66666667%;}
.personal_wrapper .col-md-1{width: 8.33333333%;}
.personal_wrapper .col-md-offset-5{/*margin-left: 41.66666667%;*/}
.personal_wrapper .col-md-offset-3{/*margin-left: 25%;*/}
.orders_wrapper .visible-xs, .visible-sm, .visible-md, .visible-lg {display: none!important;}
.orders_wrapper .container-fluid{padding-right: 15px;padding-left: 15px;margin-right: auto;margin-left: auto;}
.orders_wrapper .container-fluid.sale-order-detail{padding-right:0px;padding-left:0px;}
.orders_wrapper .row .sale-order-payment-change-pp-list .sale-order-payment-change-pp-company{padding:7px;}
.orders_wrapper .row div.sale-order-list-repeat-container{padding:0px;}
.orders_wrapper .row div.sale-order-list-inner-container{padding:0px 0px 0px 0px;border:none;}
.personal_wrapper i{font-size:0px;}

.personal_wrapper .orders_wrapper .row.col-md-12.col-sm-12{border:1px solid #e5e5e5;padding: 22px 22px 13px;margin: 0px 0px 20px;}
.personal_wrapper .orders_wrapper .row.col-md-12.col-sm-12 > a{font-weight:600;font-family: Ubuntu, Arial, Helvetica, sans-serif;font-size:13px;}
.personal_wrapper .orders_wrapper .row.col-md-12.col-sm-12 > a:hover{color:#333;}
.personal_wrapper .orders_wrapper .sale-order-title{font-weight:500;font-family: Ubuntu, Arial, Helvetica, sans-serif;font-size:20px;color:#383838;line-height:24px;margin: 14px 0px 25px;}
.personal_wrapper .orders_wrapper .sale-order-list-container{border:1px solid #e5e5e5;}
.personal_wrapper .orders_wrapper .sale-order-list-accomplished-title-container, .personal_wrapper .orders_wrapper .sale-order-list-title-container, .personal_wrapper .orders_wrapper .sale-order-detail-general-head{background:#f7f7f7;}
.personal_wrapper .orders_wrapper .sale-order-list-container .sale-order-list-accomplished-title, .personal_wrapper .orders_wrapper .sale-order-list-container .sale-order-list-title, .personal_wrapper .orders_wrapper .sale-order-detail-general-item{font-weight:500;font-family: Ubuntu, Arial, Helvetica, sans-serif;font-size:16px;color:#383838;margin: 20px 0px 22px 7px;}
.personal_wrapper .orders_wrapper .sale-order-list-container .sale-order-list-inner-accomplished{border:none;border-top:1px solid #e5e5e5;}
.personal_wrapper .orders_wrapper .sale-order-list-accomplished-title-container .row > div{vertical-align:middle;}
.personal_wrapper .orders_wrapper .sale-order-list-accomplished-date, .personal_wrapper .orders_wrapper .sale-order-list-accomplished-date-number{margin:0px;font-size:14px;color:#777777;font-weight:400;}
.personal_wrapper .orders_wrapper .sale-order-list-accomplished-date-number{margin:0px 5px 0px 0px;}

.personal_wrapper .orders_wrapper .sale-order-list-inner-row{padding: 0px 14px 5px;}
.personal_wrapper .orders_wrapper .sale-order-list-inner-accomplished .sale-order-list-inner-row{padding-top:21px;}
.personal_wrapper .orders_wrapper .sale-order-list-inner-row > div{width:auto;padding: 0px 8px;}
.personal_wrapper .orders_wrapper .sale-order-list-inner-row .sale-order-list-inner-row-body > div{vertical-align:top;}
.personal_wrapper .orders_wrapper .sale-order-list-inner-title-line{border-top:1px solid #e5e5e5;padding: 20px 23px 8px;margin: 10px 0px 0px;}
.personal_wrapper .orders_wrapper .sale-order-list-inner-title-line:first-child{margin:0px;}
.personal_wrapper .orders_wrapper .sale-order-list-inner-title-line-item{color:#777777;font-size:14px;font-weight:400;font-family: Ubuntu, Arial, Helvetica, sans-serif;text-transform:none;}
.personal_wrapper .orders_wrapper .sale-order-list-inner-title-line-border{display:none;}

.personal_wrapper .orders_wrapper .sale-order-list-payment-title, .personal_wrapper .orders_wrapper .sale-order-list-shipment-title{color:#383838;font-size:15px;font-weight:500;font-family: Ubuntu, Arial, Helvetica, sans-serif;text-transform:none;}
.personal_wrapper .orders_wrapper .sale-order-list-status-alert, .personal_wrapper .orders_wrapper .sale-order-list-status-success, .personal_wrapper .orders_wrapper .sale-order-list-shipment-status-block, .sale-order-detail-payment-options-methods-info-title-status-alert, .sale-order-detail-payment-options-methods-info-title-status-success, .sale-order-payment-change-status-alert, .sale-order-payment-change-status-success{margin:3px 0px 3px 20px;padding-left: 10px;padding-right: 11px;}
.personal_wrapper .orders_wrapper .sale-order-list-status-alert, .sale-order-detail-payment-options-methods-info-title-status-alert, .sale-order-payment-change-status-alert{color:#e62222;border-color:#f7bcbc;background:#fdeeee;}
.personal_wrapper .orders_wrapper .sale-order-list-status-success, .sale-order-detail-payment-options-methods-info-title-status-success, .sale-order-payment-change-status-success{color:#4b8c03;border-color:#c9dcb3;background:#f1f6eb;}
.personal_wrapper .orders_wrapper .sale-order-list-shipment-status-block{padding-left: 10px;padding-right: 11px;}
.personal_wrapper .orders_wrapper .sale-order-list-payment-price .sale-order-list-payment-number, .personal_wrapper .orders_wrapper .sale-order-payment-change-payment-number{color:#333333;}
.personal_wrapper .orders_wrapper .sale-order-list-change-payment{text-decoration:none;font-size:13px;position:relative;display:inline-block;padding:0px 25px 0px 0px;}
.personal_wrapper .orders_wrapper .sale-order-list-change-payment:before{content: "";position: absolute;right:5px;top:4px;width: 10px;height: 6px;background: url('images/arrows.png') 0px -161px no-repeat;z-index: 2;}
.personal_wrapper .orders_wrapper .sale-order-list-change-payment:hover{color:#333;}

.personal_wrapper .orders_wrapper .sale-order-detail-about-order, .personal_wrapper .orders_wrapper .sale-order-detail-payment-options{margin-top: 0px;}
.personal_wrapper .orders_wrapper div.sale-order-detail-about-order-inner-container{padding-top:15px;padding-bottom:11px;border:none;}
.personal_wrapper .orders_wrapper div.sale-order-detail-payment-options-info{padding-top:18px;padding-bottom:22px;}
.personal_wrapper .orders_wrapper div.sale-order-detail-payment-options-methods, .personal_wrapper .orders_wrapper div.sale-order-detail-payment-options-shipment{padding: 25px 0 26px 0;}
.personal_wrapper .orders_wrapper .row ul li:before{display:none;}

.personal_wrapper .orders_wrapper .sale-order-list-top-border{margin: 15px 23px 22px;background:#E5E5E5;}
.personal_wrapper .orders_wrapper .sale-order-list-inner-row:last-of-type{padding-left: 29px;padding-right: 29px;}
.personal_wrapper .orders_wrapper .sale-order-list-inner-row:last-of-type .sale-order-list-top-border{margin-left: -14px;margin-right: -14px;}
.personal_wrapper .orders_wrapper .sale-order-list-inner-row .sale-order-list-cancel-container{float: right;}
.personal_wrapper .orders_wrapper .sale-order-list-inner-row .sale-order-list-shipment{padding: 0px 23px;}
.personal_wrapper .orders_wrapper .sale-order-list-inner-row:last-of-type > div:last-of-type a{background:#fff;color:#ddd !important;border:1px solid #ddd;}

.personal_wrapper .orders_wrapper .sale-order-payment-change-pp-list{padding:19px 0px 0px;}
.personal_wrapper .orders_wrapper .sale-order-payment-change-pp-list .sale-order-payment-change-pp-company{display:inline-block;vertical-align:top;width:50%;padding: 2px 10px 15px 0px;box-sizing: border-box;}
.personal_wrapper .orders_wrapper .sale-order-payment-change-pp-list .sale-order-payment-change-pp-company .sale-order-payment-change-pp-company-graf-container{position: relative;padding: 0;border:none;border-radius: 0;height: auto;cursor:pointer;}
.personal_wrapper .orders_wrapper .sale-order-payment-change-pp-list .sale-order-payment-change-pp-company .sale-order-payment-change-pp-company-smalltitle{display:block;vertical-align: middle;padding: 0px;font-size: 15px;font-weight: 500;line-height: 20px;color: #777;text-align: left;}
.personal_wrapper .orders_wrapper .sale-order-payment-change-pp-list .sale-order-payment-change-pp-company .sale-order-payment-change-pp-company-image + .sale-order-payment-change-pp-company-smalltitle{display:table-cell;padding: 0 0 0 20px;}
.personal_wrapper .orders_wrapper .sale-order-payment-change-pp-list .sale-order-payment-change-pp-company .sale-order-payment-change-pp-company-image{position: relative;display: table-cell;border: 1px solid #e5e5e5;width: 118px;height: 70px;top: auto;right: auto;bottom: auto;left: auto;background-position: center center!important;background-size: auto!important;background-repeat: no-repeat!important;background-color:#fbfbfb;}
.personal_wrapper .orders_wrapper .sale-order-list-inner-row>div>a.sale-order-list-cancel-payment{background:none;color:#ddd !important;padding-left: 0px;}
.personal_wrapper .orders_wrapper .sale-order-list-inner-row>div>a.sale-order-list-cancel-payment:hover{color:#333 !important;background:none;}
.bx_my_order_cancel{font-size:13px;}
.bx_my_order_cancel a:hover{color:#333;}

.personal_wrapper .orders_wrapper .sale-order-detail-back-to-list-link-up, .personal_wrapper .orders_wrapper .sale-order-detail-back-to-list-link-down{font-weight:600;}
.personal_wrapper .orders_wrapper .sale-order-detail-general{border: 1px solid #e5e5e5;}
.personal_wrapper .orders_wrapper .sale-order-detail-general-head{border-bottom: 1px solid #e5e5e5;}
.personal_wrapper .orders_wrapper .sale-order-detail-about-order{margin-top:0px;padding: 0px 7px;}
.personal_wrapper .orders_wrapper .sale-order-detail-about-order-container .sale-order-detail-about-order-title{background:#fff;color:#333333;font-size:16px;font-weight:500;}
.sale-order-detail-about-order-title-element, .sale-order-detail-payment-options-title-element, .sale-order-detail-payment-options-shipment-composition-title-element, .sale-order-detail-payment-options-order-content-title-element, .sale-order-detail-general-item{
	color:#333333;font-size:16px;font-weight:500;font-family: Ubuntu, Arial, Helvetica, sans-serif;margin-left: 6px;
}
.personal_wrapper .orders_wrapper .sale-order-detail-about-order-title-element{margin-left:0px;margin-top: 21px;margin-bottom: 2px;}
.personal_wrapper .orders_wrapper .sale-order-detail-about-order-inner-container-name-title, .sale-order-detail-about-order-inner-container-status-title, .sale-order-detail-about-order-inner-container-price-title{font-size:14px;color:#888888;font-family: Ubuntu, Arial, Helvetica, sans-serif;}
.personal_wrapper .orders_wrapper .sale-order-detail-about-order-inner-container-name-detail, .sale-order-detail-about-order-inner-container-status-detail, .sale-order-detail-about-order-inner-container-price-detail{font-size:15px;color:#333333;font-weight:400;font-family: Ubuntu, Arial, Helvetica, sans-serif;}
.sale-order-detail-about-order-inner-container-price-detail{font-weight:500;}
.sale-order-detail-about-order-inner-container-name-read-more, .sale-order-detail-about-order-inner-container-name-read-less{font-weight:500;font-size:13px;text-decoration:none;position:relative;padding:0px 25px 0px 0px;border:none;}
.sale-order-detail-about-order-inner-container-name-read-more:after, .sale-order-detail-about-order-inner-container-name-read-less:after{position:absolute;right: 5px;top: 7px;width: 10px;height: 6px;background: url('images/arrows.png') 0px -161px no-repeat;z-index: 2;}
.sale-order-detail-about-order-inner-container-name-read-more:hover:after, .sale-order-detail-show-link:hover:after{background-position:0px -161px;}
.sale-order-detail-about-order-inner-container-name-read-less:after, .sale-order-detail-about-order-inner-container-name-read-less:hover:after{background-position:-35px -161px;}
.sale-order-detail-about-order-inner-container-details-title{color:#777777;font-weight:500;font-family: Ubuntu, Arial, Helvetica, sans-serif;font-size:15px;border: none;border-top: 1px solid #e5e5e5;padding: 24px 0px 5px;margin-bottom:0px;}
.personal_wrapper .row div.sale-order-detail-about-order-inner-container-details{padding:9px 0px 0px;}
.personal_wrapper .sale-order-detail-about-order-inner-container-details-list{margin:0px 0px 24px;}

.sale-order-detail-about-order-inner-container-list-item, .sale-order-detail-about-order-inner-container-list-item-element, .sale-order-detail-about-order-inner-container-name-titile, .sale-order-detail-about-order-inner-container-status-title, .sale-order-detail-about-order-inner-container-price-title, .sale-order-detail-payment-options-shipment-composition-item-title, .sale-order-detail-payment-options-order-content-item-title{
	font-family: Ubuntu, Arial, Helvetica, sans-serif;
}
.sale-order-detail-about-order-inner-container-list-item{color:#888888;}
.sale-order-detail-about-order-inner-container-list-item .sale-order-detail-about-order-inner-container-list-item-element{color:#333;font-size:15px;font-weight:400;}
.sale-order-detail-about-order-inner-container-list-item-link{font-family: Ubuntu, Arial, Helvetica, sans-serif;font-weight:400;}
.sale-order-detail-about-order-inner-container-list-item-link:hover{color:#333;}
.sale-order-detail-payment-options-title-element, .sale-order-detail-payment-options-shipment-composition-title-element, .sale-order-detail-payment-options-order-content-title-element{margin-top: 17px;margin-bottom: 18px;}
.sale-order-detail-payment-options-title, .sale-order-detail-payment-options-shipment-composition-title, .sale-order-detail-payment-options-order-content-title, .sale-order-detail-payment-options-order-content-title{border:1px solid #e5e5e5;border-left-width:0px;border-right-width:0px;}
.sale-order-detail-payment-options-inner-container{border:none;}
.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-info .sale-order-detail-payment-options-info-image{display:none;}
.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-info .sale-order-detail-payment-options-info-container{width:100%;padding:3px 22px 0px !important;}
.sale-order-detail-payment-options-info-order-number, .sale-order-detail-payment-options-info-total-price{font-family: Ubuntu, Arial, Helvetica, sans-serif;color:#383838;font-weight:500;}
.sale-order-detail-payment-options-info-total-price{color:#777777;font-weight:400;}
.sale-order-detail-payment-options-info-total-price span{color:#383838;}

.personal_wrapper div.payment-options-methods-row{padding: 0px 7px 0px 22px;}
.sale-order-detail-payment-options-methods-container:before, div.payment-options-methods-row:before, div.payment-options-methods-row:last-child:after{display:none;}
.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-methods-information-block .sale-order-detail-payment-options-methods-image-container{/*display:none;*/}
.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-methods-info.opened{width: 83.33333333%;}
.sale-order-detail-payment-options-methods-image-element, .sale-order-detail-payment-options-shipment-image-element{background-size:auto;border: 1px solid #e5e5e5;}

.personal_wrapper .orders_wrapper .sale-order-detail-about-order-inner-container-status{width: 30.3%;}
.personal_wrapper .orders_wrapper .sale-order-detail-about-order-inner-container-repeat{width: 19.66666667%;}

.personal_wrapper .sale-order-detail-payment-options-methods-info-title, .personal_wrapper .sale-order-detail-payment-options-methods-shipment-list-item-title, .personal_wrapper .sale-order-payment-change-payment-title{font-family: Ubuntu, Arial, Helvetica, sans-serif;font-weight: 500;color: #383838;font-size:15px;}
.sale-order-detail-payment-options-methods-info-total-price{font-family: Ubuntu, Arial, Helvetica, sans-serif;font-weight:400;font-size:13px;}
.sale-order-detail-payment-options-methods-info-total-price .sale-order-detail-sum-number{color: #383838;}

.sale-order-detail-show-link, .sale-order-detail-hide-link, .sale-order-detail-payment-options-methods-info-change-link{border:none;font-weight: 500;font-size: 13px;text-decoration: none;position: relative;padding: 3px 25px 0px 0px;display: inline-block;margin: 6px 0px 0px;}
.sale-order-detail-hide-link:after, .sale-order-detail-show-link:after, .sale-order-detail-payment-options-methods-info-change-link:after{position: absolute;right: 5px;top: 7px;width: 10px;height: 6px;background: url('images/arrows.png') 0px -161px no-repeat;z-index: 2;}
.sale-order-detail-hide-link{display:none;}
.sale-order-detail-hide-link:after, .sale-order-detail-hide-link:hover:after{background-position: -35px -161px;}

.personal_wrapper .sale-paysystem-close{top:24px;}
.personal_wrapper .orders_wrapper div.sale-order-detail-payment-options-methods-template{position:static;opacity:1;display:none;}
.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-inner-container > .row:first-child div.sale-order-detail-payment-options-shipment{border:none;}

.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-inner-container .sale-order-detail-payment-options-shipment-container{padding: 0px 22px;}
.sale-order-detail-payment-options-shipment > div > div{vertical-align:top;}
.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment .sale-order-detail-payment-options-shipment-image-container{width: 16.66666667%;}
.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment .sale-order-detail-payment-options-methods-shipment-list{width: 66.66666667%;}
.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-methods-shipment-list-item-link{padding-top:0px;}
.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment-composition-map{width: 83.33333333%;/*margin-left:16.66666667%;*/}
.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment-composition-map > .row{margin: 0px -1px 0px -7px;}
.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment-composition-container{border:1px solid #E5E5E5;}
.sale-order-detail-payment-options-shipment-composition-title{border:none;border-bottom:1px solid #E5E5E5;background:#fbfbfb;}
.sale-order-detail-payment-options-shipment-composition-title .sale-order-detail-payment-options-shipment-composition-title-element{font-size:15px;margin-top: 13px;margin-bottom: 14px;}
.personal_wrapper .sale-order-detail-order-section{border:none;}
.personal_wrapper .sale-order-detail-order-section-content.container-fluid{padding:0px;}
.personal_wrapper .sale-order-detail-order-item-td{padding-top:6px;padding-bottom:3px;vertical-align: middle;}
.personal_wrapper .sale-order-detail-order-item-td-title{color:#999999;padding-bottom:4px;}
.personal_wrapper .sale-order-detail-order-item-td:first-child .sale-order-detail-order-item-td-title{padding-left:21px;}
.personal_wrapper .sale-order-detail-order-item-properties{padding-top:6px;}
.sale-order-detail-order-item-td .sale-order-detail-order-item-block .sale-order-detail-order-item-img-block{padding-right: 30px;}
.sale-order-detail-order-item-td .sale-order-detail-order-item-block .sale-order-detail-order-item-img-block + .sale-order-detail-order-item-content{padding: 30px 0px 0px 0px;}
.sale-order-detail-order-item-td .sale-order-detail-order-item-block a{font-size:13px;color:#383838;font-weight: 400;}
.sale-order-detail-order-item-td .sale-order-detail-order-item-imgcontainer{border:none;}
.sale-order-detail-order-item-td .sale-order-detail-order-item-block{padding: 0px 0px 0px 22px;}
.sale-order-detail-payment-options-shipment-composition-container .sale-order-detail-order-item-td .sale-order-detail-order-item-td-text, .sale-order-detail-payment-options-shipment-composition-container .sale-order-detail-order-item-properties, .sale-order-detail-payment-options-order-content .sale-order-detail-order-item-tr .sale-order-detail-order-item-properties:nth-child(3), .sale-order-detail-payment-options-order-content .sale-order-detail-order-item-tr .sale-order-detail-order-item-properties:nth-child(5){text-align:center;}
.personal_wrapper .sale-order-detail-payment-options-order-content .sale-order-detail-order-item-tr:last-of-type .sale-order-detail-order-item-td{border-bottom:1px solid #e5e5e5;}

.sale-order-detail-total-payment ul{margin-bottom:0px;}
.personal_wrapper .sale-order-detail-total-payment-list-left-item, .personal_wrapper .sale-order-detail-total-payment-list-right-item{color:#777777;font-size:14px;font-family: Ubuntu, Arial, Helvetica, sans-serif;font-weight:400;line-height:20px;}
.personal_wrapper .sale-order-detail-total-payment-list-left-item:last-of-type, .personal_wrapper .sale-order-detail-total-payment-list-right-item:last-of-type{color:#333333;font-size:16px;font-weight:500;}

/*pay*/
.personal_wrapper .sale-personal-account-wallet-container{max-width:100%;background:#fbfbfb;border-bottom:1px solid #E5E5E5;}
.personal_wrapper .sale-personal-account-wallet-container .sale-personal-account-wallet-title{background:none;font-size:12px;color:#888888;font-weight: 400;font-family: Ubuntu, Arial, Helvetica, sans-serif;padding: 18px 43px 8px;}
.personal_wrapper .sale-personal-account-wallet-container .sale-personal-account-wallet-list-container{background:none;color:#333;}
.personal_wrapper .sale-personal-account-wallet-container .sale-personal-account-wallet-list-item:before{background: url('images/icons_mask.png') -50px -5px no-repeat;width:50px;height:40px;margin:0px;top:0px;left:0px;}
.personal_wrapper .sale-personal-account-wallet-container .sale-personal-account-wallet-list-item{padding:0px 0px 24px 70px;margin:0px 30px 0px 43px;font-size:0px;line-height:0px;}
.sale-personal-account-wallet-currency, .sale-personal-account-wallet-sum{float:none;display:inline-block;vertical-align:baseline;padding: 0px 26px 0px 0px;}
.sale-personal-account-wallet-sum{font-size:36px;line-height:40px;color:#333;}
.sale-personal-account-wallet-currency{font-size:20px;line-height:24px;color:#777777;}
.btn.sale-account-pay-button{font-weight:400;height:auto;line-height:16px;font-family: Ubuntu,Arial,Helvetica,sans-serif;}

.personal_wrapper .sale-personal-section-account-sub-header{padding: 0px 20px 0px 42px;font-size: 18px;color: #333;margin: 28px 0px 20px 0px;}
.personal_wrapper .bx-sap{padding: 0px 20px 38px 42px;}
.personal_wrapper .bx-sap .sale-acountpay-title{color:#777777;margin-bottom: 10px;}
.personal_wrapper .bx-sap .sale-acountpay-title + div{max-width:100% !important;color: #333;}
.personal_wrapper .bx-sap .sale-acountpay-title + div .form-group div{display: inline-block;vertical-align: middle;margin:0px 10px 0px 0px;}
.sale-acountpay-fixedpay-list .sale-acountpay-fixedpay-item{margin-right:5px;background:none;border:1px solid #ddd;height: 28px;line-height: 28px;}
.sale-acountpay-fixedpay-list .sale-acountpay-fixedpay-item:hover{background:#ddd;color:#fff;}
.personal_wrapper .sale-acountpay-block{margin-bottom: 7px;}
.personal_wrapper .sale-acountpay-pp.row > div{width: 100%;padding: 0px;font-size: 0px;}
.bx-sap .row{margin-left: -7px;margin-right: -7px;}
.bx-sap .sale-acountpay-block, .bx-sap .container-fluid > .row > .col-xs-12{padding:7px;}
.sale-acountpay-block .sale-acountpay-title{margin-top: 3px;}
.sale-acountpay-block .sale-acountpay-pp div .sale-acountpay-pp-company{display:inline-block;vertical-align:top;width:50%;padding: 2px 7px 15px;box-sizing: border-box;}
.bx-sap .sale-acountpay-pp-company-graf-container{position: relative;padding: 0;border: 1px solid #fbfbfb;border-radius: 0;width: 120px;height: 72px;background: #fbfbfb;display: table-cell;vertical-align: middle;}
.bx-sap .sale-acountpay-pp-company-smalltitle{display: table-cell;vertical-align: middle;padding: 0 0 0 20px;font-size: 15px;font-weight: 500;line-height: 20px;color: #777;text-align: left;}
.bx-sap .sale-acountpay-pp-company:not(.bx-selected):hover .sale-acountpay-pp-company-smalltitle, .bx-sap .sale-acountpay-pp-company:not(.bx-selected):hover .sale-acountpay-pp-company-graf-container{cursor:pointer;}
.bx-selected .sale-acountpay-pp-company-smalltitle{color:#333;}
.sale-acountpay-pp-company-graf-container .sale-acountpay-pp-company-image{background-size: auto;}
.bx-sap .sale-acountpay-pp-company-graf-container .sale-acountpay-pp-company-image{position: relative;border: 1px solid #e5e5e5;width: 118px;height: 70px;top: auto;right: auto;bottom: auto;left: auto;background-position: center center!important;background-size: auto!important;background-repeat: no-repeat!important;}
.bx-sap .button{font-size:14px;text-transform:none;padding: 8px 12px 9px;}
.bx-sap .sale-acountpay-pp-company-graf-container:before{box-sizing: border-box;content: "";position: absolute;top: 7px;left: 7px;width: 20px;height: 20px;border: 1px solid #e5e5e5;background: #FFF;border-radius: 100%;z-index: 1;}
.bx-sap .sale-acountpay-pp-company.bx-selected .sale-acountpay-pp-company-graf-container:after{box-sizing: border-box;content: "";position: absolute;left: 12px;top: 13px;width: 10px;height: 8px;background: url('images/order_ext.png') -64px -9px no-repeat;z-index: 2;}
.bx-sap .sale-acountpay-pp-company-graf-container input{display: none;}
.personal_wrapper .bx-sap form input[type="submit"]{font-size:14px;text-transform:none;padding: 8px 12px 9px;}
.personal_wrapper form[name=ShopForm] input[type=submit]{margin-right:10px;}
.sale-order-payment-change-pp.row .sale-paysystem-wrapper{margin:0px;}
.sale-paysystem-wrapper span.tablebodytext{display: block;padding: 0px 0px 20px;}
.sale-order-payment-change-pp.row .sale-paysystem-wrapper span.tablebodytext, .sale-order-payment-change-pp.row form{font-size:13px;}

.sale-paysystem-wrapper{border-color:#e5e5e5;}
.personal_wrapper .orders_wrapper .sale-order-detail-active-event .sale-order-detail-payment-options-methods-template{position: relative;left: 0;opacity: 1;display:block;}
.personal_wrapper .orders_wrapper .sale-order-detail-active-event .sale-order-detail-payment-options-methods-template .sale-paysystem-wrapper{border-width:0px;padding-left: 0px;padding-bottom: 0px;padding-top: 10px;}
.personal_wrapper .sale-paysystem-close{top: 16px;}

/*profiles*/
.sale-personal-profile-list-container{width: 100%;max-width: 100%;margin-bottom: 20px;}
.sale-personal-profile-list-container>tbody>tr>th, .sale-personal-profile-list-container>tfoot>tr>th, .sale-personal-profile-list-container>thead>tr>td, .sale-personal-profile-list-container>tbody>tr>td{
    padding:21px 22px 21px;line-height: 1.42857143;vertical-align: top;border-top: 1px solid #e5e5e5;text-align: left;font-size:13px;color:#999999;font-weight: 400;
}
.sale-personal-profile-list-container>tbody>tr>th{padding:9px 22px 10px;}
.sale-personal-profile-list-container>tbody>tr>th:first-child{border-left: 1px solid #e5e5e5;}
.sale-personal-profile-list-container>tbody>tr>th:last-child{border-right: 1px solid #e5e5e5;}
.sale-personal-profile-list-container>tbody>tr>td:nth-child(3){color:#383838;}
.sale-personal-profile-list-container a i{display:inline-block;vertical-align:top;width:10px;height:10px;display:none;}
input.form-control{margin-bottom:0px;}
.sale-profile-detail-form .form-group{margin-bottom: 17px;}
.sale-profile-detail-form .form-control:hover, .location-block-wrapper .dropdown-block.bx-ui-slst-input-block:hover{box-shadow:none;border-color:#E5E5E5;}
.sale-personal-profile-list-actions > a{padding:0px 17px 0px 0px;}
.sale-personal-profile-list-actions > a:last-of-type{padding-right:0px;}
.sale-personal-profile-list-container>tbody>tr:hover{background:#f7f7f7;}
.sale-personal-profile-list-container>tbody>tr:hover>td:first-child{border-left-color:#E5E5E5;}
.sale-personal-profile-list-container>tbody>tr>td:first-child{border-left: 1px solid #fff;}
.sale-personal-profile-list-container>tbody>tr:hover>td:last-child{border-right-color:#E5E5E5;}
.sale-personal-profile-list-container>tbody>tr>td:last-child{border-right: 1px solid #fff;}
.sale-personal-profile-list-container>tbody>tr:last-child>td{border-bottom: 1px solid #E5E5E5;}

.personal_wrapper .sale-profile-detail-link-list a{font-weight:600;position:relative;padding: 0px 0px 0px 24px;}
.personal_wrapper .sale-profile-detail-link-list a:before{content: "";position: absolute;top:2px;left: 0px;width: 12px;height: 10px;background:url('images/return_mask.png') 0px 0px no-repeat;z-index: 1;background-color:#ddd;}
.personal_wrapper .sale-profile-detail-link-list a:hover:before{background-color:#1d1a1a;}
.personal_wrapper .sale-profile-detail-form{border:1px solid #e5e5e5;padding:15px;box-sizing:border-box;}
.personal_wrapper .sale-profile-detail-form .sale-personal-profile-detail-form-title-row{margin:0px;width:100%;}
.personal_wrapper .sale-profile-detail-form .sale-personal-profile-detail-form-title-row h4{border:none;}
.personal_wrapper .sale-personal-profile-detail-form-title-row h4{font-size: 18px;line-height: 22px;margin-bottom: 14px;}
.sale-profile-detail-form .form-group > *{display:block;width:100%;text-align: left;padding: 0px 15px;box-sizing: border-box;}
.sale-profile-detail-form .form-group > label{color:#888888;font-size:13px;margin: 0px 0px 6px;}
.sale-profile-detail-form .form-group > div{color:#383838;}
.personal_wrapper .sale-profile-detail-form .sale-personal-profile-btn-block{;width:100%;font-size: 0px;margin:0px;}
.personal_wrapper .sale-profile-detail-form .sale-personal-profile-btn-block > input[type=submit]{margin:0px 20px 20px 0px;}
.personal_wrapper input[type=submit]:last-of-type{background:#fff;color:#ddd !important;border:1px solid #ddd;}
.personal_wrapper .sale-order-payment-change-pp input[type=submit]{background:#ddd;color:#fff !important;border: 1px solid #0000;}
.personal_wrapper .sale-personal-profile-btn-block input[type=submit]{margin:0px 1px 0px 0px;}

@media print{
	.print div.error{font-size:8px !important;}
	.print table{page-break-after:auto;}
	.print tr{page-break-inside:avoid;page-break-after:auto;}
	.print td{page-break-inside:avoid;page-break-after:auto;}
	.print thead{display:table-header-group;}
	.print tfoot{display:table-footer-group;}
}

@media (min-width:1024px){
	.start_promo .item{border-bottom-width:1px;}
}

.bx-touch .bx_ordercart .bx_sort_container span{display:inline-block;}
.bx-touch .bx_ordercart .bx_sort_container > span{display:none;}
.bx-touch #basket_form .bx_ordercart .bx_sort_container a{width: auto;margin-bottom: 0px;border: none;padding: 7px 0px 6px 0px;margin-right: 15px;}
@media (max-width: 767px){
	.bx_item_list_you_looked_horizontal .bx_catalog_item .bx_stick{left:-16px;}
}104  118650|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/css/styles.css|a95835ec* { font-family: Ubuntu, Arial, Helvetica, sans-serif; }

.table-no-border { border-width:0; border-collapse: collapse; }
.table-no-border td { padding: 0px; }

.noborder { border-width: 0; }

.tabs > li:before, .tabs_content > li:before, .flex-viewport li:before, .flex-direction-nav  li:before, .slider_navigation li:before,
#footer .bottom_submenu li:before, .extended_pagination  li:before, .main-nav li:before, .bottom_main_menu li:before, .item_slider ul.slides li:before,
.module-gallery-list li:before, ul.left_menu li:before, ul.brands_list li:before, ul.stores_list li:before, .section_item_inner ul li:before, ul.tabs-content li:before,
.internal_sections_list  li:before, li.catalog_item:before, .compare_list ul li:before, .catalog_detail .set_wrapp li:before, .catalog_detail .bx_item_set_hor_container_big li:before,
.bx_modal_body  .bx_kit_one_section li:before, .bx_modal_body  .bx_kit_two_section li:before, .bx_kit_one_section li:before, .bx_kit_two_section li:before, .menu li:before, ul.flex-control-nav li:before,
.flex-control-nav ol li:before { content: none !important; padding-right: 0; }
div[class^="bx-"] li:before, ul[class^="bx-"] li:before { content: none;  padding-right: inherit; }
div[class^="bx-"] input[type='button'], div[class^="bx-"] input[type='submit'], div[class^="bx-"] button { text-transform: inherit; font-family: inherit; border: inherit; }

.catalog_detail .tabs_content h4 { margin: 10px 0 15px; }
#bx-composite-banner{text-align:center;margin:10px 0 0;}
.m16{margin:0;padding:0 0 18px 0;color:green;}
#content { position: relative; zoom: 1; }
#content.main { margin-bottom: 0; }
.pseudo, .catalog_detail .extended_info.open_stores .availability-row .value{ text-decoration: none; border-bottom: 1px dotted; cursor: pointer; }
.specials_slider_wrapp ul.tabs li { text-transform: uppercase; }
.specials_slider_wrapp ul.tabs li span  {  border-bottom: 1px dotted; }

.tab_slider_wrapp ul.tabs li{padding-right:0px;}
.catalog_section_list .section_item li.name{padding-left:0px;}

.clearboth { clear: both; }
.clearleft { clear: left; }
.clearright { clear: right; }
.wrapper.has_menu  .top-h-row  .search{ display: none; }

.top-h-row  .search input[id^=title-search-input]{ height: 26px; font-size: 12px; padding: 0 8px; border-radius: 2px; -moz-border-radius: 2px; -webkit-border-radius: 2px; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; border-width: 1px; border-style: solid; width: 100%; line-height: 25px; }
.top-h-row  .search #search-submit-button{ cursor: pointer; height: 24px; width: 29px; font-size: 0; border: 0; border-radius: 0 2px 2px 0; -moz-border-radius: 0 2px 2px 0; -webkit-border-radius: 0 2px 2px 0; position: absolute; 	top: 0; right: 0; margin-top: 1px; display: block; }
.middle-h-row  .search input[id^=title-search-input], #header ul.menu.full > li.search_row input[id^=title-search-input] { height: 33px; font-size: 12px; padding: 0 10px; border-radius: 3px; -moz-border-radius: 3px; -webkit-border-radius: 3px; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; width: 100%; line-height: 32px; }
.middle-h-row .search #search-submit-button, #header ul.menu.full > li.search_row #search-submit-button { cursor: pointer; height: 31px; width: 35px; font-size: 0; border: 0; border-radius: 0 2px 2px 0; -moz-border-radius: 0 2px 2px 0; -webkit-border-radius: 0 2px 2px 0; position: absolute; top: 1px; right: 1px; display: block; }
#header ul.menu.full > li.search_row #search-submit-button { top: 3px; right: 3px; height: 33px; width: 35px; }
#header ul.menu.full > li.search_row { padding: 3px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; border-radius: 0 0 3px 3px; -moz-border-radius: 0 0 3px 3px; -webkit-border-radius: 0 0 3px 3px; position: relative; display: none; }
.wrapper.has_menu .main-nav { display: none; }
.main-nav .menu > li > a{ border-bottom: 1px solid transparent; }
.top-h-row  .search #search-submit-button i, .middle-h-row  .search #search-submit-button i, #header ul.menu.full > li.search_row #search-submit-button i{ display: inline-block; background: url(../images/magnifier.png); background-repeat: no-repeat; }
.top-h-row  .search #search-submit-button i, #header ul.menu.full > li.search_row #search-submit-button i{ height: 26px; width: 29px; background-position: top center; }
@-moz-document url-prefix(){
	.top-h-row  .search #search-submit-button i, #header ul.menu.full > li.search_row #search-submit-button i { width: 26px; }
	.middle-h-row  .search #search-submit-button i { 	margin: -2px 0 0 -3px; 	}
}
.middle-h-row  .search #search-submit-button i { height: 32px; width: 35px;  background-position: 4px 4px; }
table.title-search-result td.title-search-all a .icon i, .card_popup_frame.popup  a.more_row .icon i, .basket_fly td.total_wrapp a.more_row .icon i { background: url(../images/arrows.png) no-repeat; }
table.title-search-result td.title-search-all a .icon  { margin-left: 9px; border-radius: 100%; -moz-border-radius: 100%; -webkit-border-radius: 100%; position: relative; bottom: -4px; zoom: 1; }
table.title-search-result td.title-search-all a .icon i, .card_popup_frame.popup  a.more_row .icon i, .basket_fly td.total_wrapp a.more_row .icon i{ background-position: 2px -241px; }
.top-h-row   .phone { float: right; width: 25%; text-align: right; 	margin-top: 1px; }
.top-h-row   .phone span.phone_text, .top-h-row   .phone span.phone_text a, #footer .phone span.phone_text, #footer .phone span.phone_text a { font-size: 19px; white-space: nowrap; }
.top-h-row   .phone span.phone_text a, #footer .phone span.phone_text a { cursor: default; text-decoration: none; }
.top-h-row   .phone, #footer .phone { white-space: nowrap; }
.top-h-row   .phone .icon, .top-h-row   .phone .icon i, #footer  .phone .icon, #footer  .phone .icon i { display: inline-block; height: 24px; width: 24px; border-radius: 2px; -moz-border-radius: 2px; -webkit-border-radius: 2px; }
.top-h-row   .phone .icon, #footer .phone .icon { position: relative; zoom: 1; bottom: -5px; margin-right: 2px; }
.top-h-row   .phone .icon i, #footer .phone .icon i { background: url("../images/phone.png"); background-repeat: no-repeat; }
#footer .phone .icon i { background-position: 0px -24px; }
.price .title-search-price .price:not(.discount) {margin-right: 2px;}
div.title-search-result { display:none; overflow:hidden; z-index:205; min-width: 133px; background: #fff; box-shadow: 0px 0px 1px 1px #E5E5E5; }
table.title-search-result { border-collapse: collapse; border:none; width:100%; }
table.title-search-result td { background-color: #fff; padding-top:8px; padding-bottom:8px; text-align:left; border-top: 1px solid transparent; border-bottom: 1px solid transparent; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; -o-box-sizing: border-box; }
table.title-search-result td.title-search-item { padding-left:8px; padding-right:15px; vertical-align: middle; }
table.title-search-result td.main a { vertical-align:top; text-decoration: none; }
table.title-search-result td.main a, table.title-search-result td.main .title-search-preview  { max-width: 230px; overflow: hidden; text-overflow: ellipsis; display: block; }
table.title-search-result td.main{ padding-left: 4px; width: 242px; overflow: hidden; text-overflow: ellipsis;padding-right: 14px; }
table.title-search-result td.picture { width: 48px; padding-left: 14px; }
table.title-search-result .cost.prices {margin: 10px 10px 0 0;}
table.title-search-result .cost.prices .price.discount{margin-top:0;}
table.title-search-result img.item_preview { border-radius: 5px; -moz-border-radius: 5px; -webkit-border-radius: 5px; margin: 2px 5px; }

table.title-search-result td.main b { font-weight:normal; }
table.title-search-result td{ border-bottom: 1px solid #e7e7e7; border-top: 1px solid transparent;transition: none 0s ease 0s ; }
table.title-search-result tr.title-search-selected td{ background-color:#F7F7F7; border-top: 1px solid #e5e5e5; border-bottom: 1px solid #e5e5e5; }
table.title-search-result td.title-search-more { font-size:11px; font-weight:normal; padding-right:15px; padding-left:24px; padding-top:0px; }
table.title-search-result td.title-search-more a{ padding-left:12px; padding-right:15px; text-decoration:none; }
table.title-search-result td.title-search-all { padding: 11px 13px 13px; border-bottom-width: 0px; }
table.title-search-result td.title-search-all a{ text-decoration: none; }
table.title-search-result td.title-search-all a span.text{ display: inline-block; height: 14px; }
table.title-search-result td.title-search-all a .icon, table.title-search-result td.title-search-all a .icon i, .card_popup_frame.popup  a.more_row  .icon, .card_popup_frame.popup  a.more_row  .icon i,
.basket_fly td.total_wrapp a.more_row .icon, .basket_fly td.total_wrapp a.more_row .icon i { display: inline-block; height: 15px; width: 15px; }
table.title-search-result td.title-search-separator, table.title-search-result th.title-search-separator { padding:0; height: 10px; font-size:0; }
#header .middle-h-row, #header .catalog_menu{ margin: 0 auto; position: relative; zoom: 1;z-index:3; }
#header .middle-h-row{ z-index: 202; }
#header .middle-h-row .logo_wrapp .logo{min-height:51px;line-height:51px;overflow: hidden;display: table-cell;max-width: 220px;}

#header .basket_fly{-webkit-transform: translateZ(0);}
#header .basket_fly td { box-sizing: content-box; -moz-box-sizing: content-box; -o-box-sizing: content-box; -webkit-box-sizing: content-box;text-align: left; }
ul.menu, ul.mini-menu { text-align: justify; list-style-type: none; font-size: 0px; line-height: 0; zoom: 1; }
.bx-ie ul.menu, .bx-ie ul.mini-menu { font-size: 1px; }
ul.menu li, ul.mini-menu li { display: inline-block; vertical-align: top; padding: 0; line-height: 20px;  }
.main-nav  ul.menu > li > a, ul.mini-menu li a{ font-size: 14px; text-transform: uppercase; padding: 0 10px; text-decoration: none; white-space:nowrap; color:#000000; }
ul.menu li.stretch{ display: inline-block;    width: 100%; *display: inline; zoom: 1 }
ul.menu li:hover .child{ display: block; }
ul.menu li:hover b.space, .breadcrumbs .drop:hover b.space{ display: inline-block; }
ul.mini-menu, ul.menu li .child, ul.mini-menu li .child{ display: none; }
.module-drop-cart { position: absolute; right: 0px !important; top: 87px; width: 431px; max-width: 100%; z-index: 999; display: none; }
.wrapper .basket_normal { display: none; }
.wrapper.basket_normal .basket_normal { display: block; }
.header-cart-block .cart  { width: 230px;  text-align: left; position: relative; zoom: 1; }
.header-cart-block .delay_small, .header-cart-block .cart_small { display: none; }
.header-cart-block .cart a  { text-decoration: none; }
.header-cart-block .cart a span { font-size: 14px; }
.header-cart-block .cart.empty_cart a span.pseudo { border-bottom: 1px solid; }
.header-cart-block .cart span.icon { float: left; }
.header-cart-block .cart .summ, .header-cart-block .cart .delay_link { white-space: nowrap; }
.header-cart-block .cart > span.icon, .header-cart-block .cart > span.icon i { display: inline-block; height: 42px; width: 42px; border-radius: 3px; -moz-border-radius: 3px; -webkit-border-radius: 3px; }
.header-cart-block .cart > span.icon.small, .header-cart-block .cart > span.icon.small i { width: 26px; height: 26px; }
.header-cart-block .cart > span.icon.small { display: none; position: relative; zoom: 1; z-index: 1; }
.header-cart-block .cart .cart-call.small, body .header-cart-block .cart .cart-call.small span { font-size: 11px; line-height: 15px; text-transform: uppercase; border: none; }
body .header-cart-block .cart .cart-call.small span { text-decoration: underline; }
.header-cart-block .cart .small { display: none; }
.header-cart-block .cart > span.icon.small i { background-position: -7px -173px; }
.header-cart-block .cart span.icon i, .header-cart-block .cart span.icon i { background-image: url(../images/basket_icons.png); background-repeat: no-repeat; }
.header-cart-block .cart.empty_cart span.icon i { background-position: 0px 0px; }
.header-cart-block .cart.empty_cart span.icon.small i { background-position: 0px 0px; background-position: -7px -134px; filter: progid:DXImageTransform.Microsoft.Alpha(opacity=60); -moz-opacity: 0.6;-khtml-opacity: 0.6; opacity: 0.6; }
.header-cart-block .cart .cart_wrapp { padding-left: 55px; padding-top: 4px; position: absolute; top: -3px; }
#header .middle-h-row .center_block.no_basket { padding-right: 0; }
#header .middle-h-row .basket_wrapp .header-cart-block { margin-top: 7px; float: right; }
.wrapper.basket_normal.has_menu #header .middle-h-row .basket_wrapp .header-cart-block{min-width:145px;}
#content_new, #preload_wrapp { position: absolute; z-index: -1000; top: -9999; left: -999; }

.main-nav ul.menu .child a { font-size: 12px; }

.top-h-row ul.menu .space { position: static; }
#header .catalog_menu  li .space { top: 18px; }
#header .catalog_menu li.more .space { margin: 0 0 0 -50px; left: inherit; position: absolute; top: 50px; }
#header .catalog_menu .child { text-align: center; padding-top: 24px; }

.breadcrumbs .drop b.space { left: 10px; bottom: -6px; }
ul.menu li.catalog b.space { left: 34%; }
ul.menu > li > a { position: relative; }
.flexslider  { margin: 0;  padding: 0; }
.flexslider .slides > li  { -webkit-backface-visibility: hidden; overflow: hidden; display: none; }
.front_slider > li { display: none; overflow:hidden; }
.flexslider .slides > li .text, .flexslider .slides > li .img { width: 50%; }
.flexslider .slides > li.image .img { width: 100%; }
.flexslider .slides > li .img img { margin: 0 auto; max-height: 100%; /*max-width: 100%;*/ }
.flexslider .slides img { display: block; border-radius: 3px; -moz-border-radius: 3px; -webkit-border-radius: 3px; }
.top_slider_wrapp{ margin: 0 auto 26px; }
.top_slider_wrapp li:before{width:auto;display:none !important;}
.top_slider_wrapp .flex-control-nav{opacity:0;}
.top_slider_wrapp .flexslider .slides > li , .top_slider_wrapp .flexslider .slides > li,
.top_slider_wrapp .flexslider .slides > li td, .top_slider_wrapp .flexslider .slides > li  td,
.top_slider_wrapp .flexslider, .top_slider_wrapp .flexslider{ height: 322px;margin:0px; }

.top_slider_wrapp .flexslider .slides > li{ background-position: center; background-repeat: none; }
.top_slider_wrapp .flexslider .slides > li:before{display:none;}
.slides:after  { content: "\0020";  display: block;  clear: both;  visibility: hidden;  line-height: 0;  height: 0; }
html[xmlns] .slides  { display: block; list-style: none; }
* html .slides  { height: 1%; }
.no-js .slides > li:first-child  { display: block; }
.flexslider  .slides { margin: 0; padding: 0; }
.flexslider  {  margin: 0 0 9px;  position: relative;  zoom: 1;  text-align: center; }
.flex-viewport  {  max-height: 2000px;  -webkit-transition: all 1s ease;  -moz-transition: all 1s ease; -o-transition: all 1s ease;  transition: all 1s ease;  }
.module-cart, .module-cart tr { -webkit-transition: all 1s ease;  -moz-transition: all 1s ease; -o-transition: all 1s ease;  transition: all 1s ease;  }
.loading .flex-viewport {  max-height: 300px;  }
.flexslider .slides  {  zoom: 1;  }
.carousel li  {  margin-right: 5px;  }
.include_module_error { text-align: center; margin: 0 auto; }
.include_module_error p { margin-top: 0; line-height: 18px; font-size: 14px; color: #555; }
.flexslider .flex-control-nav, .front_slider_wrapp .flex-control-nav { zoom: 1; top: -35px; position: relative; display: inline-block; z-index: 10; }
.flexslider .flex-control-nav li, .front_slider_wrapp .flex-control-nav  li,  .flex-control-nav  li { padding: 6px 6px 6px 2px; font-size: 0; margin: 0; text-indent: 0; display: inline-block; zoom: 1; position: relative; }
.flexslider .flex-control-nav li:last-child, .front_slider_wrapp .flex-control-nav  li:last-child,  .flex-control-nav  li:last-child{ padding-right:0px;}
.front_slider_wrapp .flex-control-nav li { padding-top: 0; }

.flex-control-paging li a:hover, .flex-control-paging li a.flex-active { background-position: -2px -20px; }
.flex-direction-nav { margin: 0; padding: 0;   -webkit-user-select: none;  -moz-user-select: none;  -ms-user-select: none;  -o-user-select: none;  user-select: none; }
.flex-direction-nav *{ outline: none; }
.flexslider li *{ text-decoration: none; }
.flexslider .banner_title span{  font-size: 32px; line-height: 44px; }
.flexslider .banner_text{ font-size: 15px; line-height: 18px; margin-top: 11px; }
.flexslider .left{ text-align: left;}
.flexslider td.left{ /*padding-left:90px;*/ }
.flexslider .right{ text-align: left; }
.flexslider .center{ text-align: left; }
.flexslider .center .banner_title{ margin: 45px auto 0; }
.flexslider .center .banner_title{ margin: 20px auto 0; }
.flexslider .banner_title, .flexslider .banner_text, .flexslider .banner_buttons {margin-left: 15px; margin-right: 15px; overflow: hidden; text-align: left; }
.flexslider .left .banner_title, .flexslider .left  .banner_text, .flexslider .left  .banner_buttons { margin-left: 90px; }
.flexslider .right .banner_title, .flexslider .right  .banner_text, .flexslider .right  .banner_buttons { margin-right: 90px; }
.flexslider .banner_buttons a { margin-right: 10px; margin-bottom: 4px; }
.flexslider .banner_buttons { margin-top: 16px; }
.flexslider  li.box .underline { text-decoration: none; }

.info_column h3  { font-size: 18px;}
.index_bottom .info_column .about_column, .index_bottom .info_column .news_column { width: 50%; padding-left: 40px; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; 	float: left; }
.index_bottom .info_column .news_column .shadow{	display: none;}
a i.arrow{ margin: 0px 10px 0px 0px; position: relative; zoom: 1; bottom: -3px;}
a i.arrow, a i.arrow b{display: inline-block; height: 15px; width: 15px; border-radius: 15px; -moz-border-radius: 15px; -webkit-border-radius: 15px; background: #ddd; }
a i.arrow b{	background: url(../images/arrows.png) 0 0 no-repeat;}
a:hover i.arrow b{	background-position: -36px 0px;}
a:hover i.arrow.down b{	background-position: -36px -35px;}
.index_bottom .info_column .news_slider{	margin-top: 18px;}
.index_bottom .about_column a[name='about_show_more']{	margin-top: 10px;	display: inline-block;}
.index_bottom .info_column .news_column .news_block > ul{	list-style: none;	margin-top: 18px;}

.news_slider_wrapp .flex-control-nav.flex-control-paging { display: none; margin-top: 5px; }
.jobs_wrapp .item .icon, .jobs_wrapp .item .icon i, .differences_table .left_arrow, .differences_table .right_arrow { display: inline-block; height: 30px; width: 30px; vertical-align:top; *display:inline; zoom:1; }
.jobs_wrapp .item td.icon{display:table-cell;}

.flex-direction-nav li { font-size: 0; }
.flex-direction-nav li:first-child { margin-right: 6px; }
.differences_table .left_arrow, .differences_table .right_arrow { font-size: 0px; background-image: url(../images/arrows_big.png); background-repeat: no-repeat; }

.news_slider_wrapp .flex-viewport { width: 100%; z-index: 10; }
img.shadow { width: 100%; max-width: 100%; margin: 10px 0; }
.search-page img.shadow { margin-bottom: 20px; }

#footer .footer_inner .line { padding: 10px 0 10px; }
#footer .footer_inner .line .wrapper_inner { position: relative; }
.footer_inner .line .wrapper_inner  div { display: inline-block; width: 79%; }
.footer_inner .line .wrapper_inner  div div { width: auto; }
#footer  ul.bottom_main_menu, #footer  ul.bottom_submenu { width: 79%; display: inline-block; vertical-align:top; }
#footer  ul.bottom_main_menu { margin-top: 4px; }
#footer .bottom_submenu li.selected a { font-weight: bold; }
.bottom_main_menu li, .bottom_submenu > li { display: inline-block; width: 24%; list-style: none; }
.bottom_main_menu li a { text-shadow: 0 1px 0 rgba(255,255,255,.4); -moz-text-shadow: 0 1px 0 rgba(255,255,255,.4); -o-text-shadow: 0 1px 0 rgba(255,255,255,.4); -webkit-text-shadow: 0 1px 0 rgba(255,255,255,.4); }
.bottom_submenu  li { list-style: none; }
#footer  .bottom_left_icons{ display:inline-block; width:20%; }
#footer .phone { display: inline-block; white-space: nowrap; vertical-align: top; }
#footer .phone .phone_wrapper { display: inline-block; vertical-align:top; }
#footer .phone .icon {     position: inherit; vertical-align: top; }
#footer .phone .phone_text {    display: inline-block; vertical-align: top; margin-top: 5px; }
.bottom_main_menu li a { text-transform: uppercase; text-decoration: none; }
.social a { margin-left: 3px; text-decoration: none; border: 0 !important; }
.social a:first-child { margin-left: 0; }
#footer .bottom_submenu  li { line-height: 19px; }
#footer .bottom_submenu  li a { text-decoration: none; }
ul.tabs li.cur span { border-bottom: 0; }
ul.tabs, ul.tabs li { display: inline-block; }
.specials_slider_wrapp ul.tabs li:first-child { margin-left: 0; }
ul.tabs, ul.tabs_content, ul.slider_navigation { list-style: none; }
.specials_slider_wrapp ul.tabs { padding-right: 80px; }
.specials_slider_wrapp ul.slider_navigation { position: absolute; top: 0; right: 3px; }
ul.tabs_content > li { min-width: 100%; }
ul.tabs_content > li, .specials_slider_navigation, .tabs_slider_navigation { display: none; }
ul.tabs_content li.tab { width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; overflow: hidden; }

ul.tabs_content > li.cur, ul.tabs_content > li.current, .specials_slider_navigation.cur, .tabs_slider_navigation.cur { display:inline-block; /*opacity: 1; visibility: visible;*/ }
ul.tabs li { font-size: 13px; margin: 5px 10px 0 0 ; padding: 0 25px 0px 0px; height: 28px; line-height: 28px; text-align: center; cursor: pointer; border-radius: 3px; -moz-border-radius: 3px; -webkit-border-radius: 3px; }
ul.tabs li.cur, ul.tabs-head li.current { cursor: default; }

ul.tabs li span { font-size: 13px; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; padding-top: 9px; line-height: 13px; display: inline-block; }
ul.tabs li span span { border: 0; padding: 0; }

.specials_slider > li:last-child { margin-right: 0; }
.specials_slider > li { width: 179.9px !important; overflow: hidden; margin-right: 15px; -webkit-transition: border-color ease-out 0.2s; -moz-transition: border-color ease-out 0.2s; -o-transition: border-color ease-out 0.2s; transition: border-color ease-out 0.2s; padding: 1px; display: block; float: left; vertical-align: top; padding-bottom: 5px; }
.right_block .specials_slider.product_slider > li { margin-right: 15px; width: 174px !important; }
.specials_slider.product_slider > li { margin-right: 14px; }
ul.specials_slider { width: 100000% !important; white-space: nowrap; }
ul.specials_slider li, ul.specials_slider li * { white-space: normal; }
.specials_slider li:hover { padding: 0; padding-bottom: 4px; }
.catalog_item .item-title a, .view-item .item-title a span { text-decoration: none; line-height: 17px; }
ul.tabs li span, .front_slider_wrapp .extended_pagination span, a, a span { -webkit-transition: color ease-out 0.07s; -moz-transition: color ease-out 0.07s; -o-transition: color ease-out 0.07s; transition: color ease-out 0.07s; }
.catalog_item .item-title a, .view-item .item-title a span, .articles-list .item .item-title a, .jobs_wrapp .item  .name a, .front_slider .item-title a span, .item-title a span, .item-title a { -webkit-transition: color ease-out 0.02s; -moz-transition: color ease-out 0.02s; -o-transition: color ease-out 0.02s; transition: color ease-out 0.02s; }
.button22, .button22 span, .popup .soc-avt .row a, #header .catalog_menu ul.menu > li > a, #header ul.menu.adaptive > li  > a, #header ul.menu.full.opened > li  > a { -webkit-transition: none; -moz-transition: none; -o-transition: none; transition: none; }
.view-item .item-title a  { text-decoration: none; }
.catalog_item .item-title a, .catalog_item .item-title a span, .view-item .item-title a span { font-size: 14px; }
.catalog_item .price, .view-list .price{ font-size: 18px; /*margin-top: 8px;*/ display:inline-block; white-space:nowrap; }
.catalog_item .price.discount, .view-list .price.discount{ margin-top: 0; float: none; }
.differences_table .catalog_item .price.discount{ margin-top: 5px; }
.differences_table .catalog_item .price{ float: none; }
.differences_table td{ width: 25%; vertical-align: top; }
.differences_table .left_arrow, .differences_table .right_arrow{ position: absolute; top: 130px; width: 30px; height: 30px; cursor: pointer; z-index: 1; }
.differences_table .left_arrow{	left: 20%;	background-position: 0px -157px;}
.differences_table .left_arrow:hover{	background-position: 0px -189px;}
.differences_table .right_arrow{	right: 20px;	background-position: -29px -157px;}
.differences_table .right_arrow:hover{	background-position: -29px -189px;}
.catalog_item .price.discount strike, .view-list .price.discount strike{	font-size: 14px;	line-height: 14px;}
.catalog_item .image, .catalog_item .image a{ display: block; vertical-align: middle; height: 165px; line-height: 165px; vertical-align: middle; text-align: center; position: relative; 	zoom: 1; }
.catalog_item .image a{ padding: 3px; }
.differences_table{ margin-top: 20px; }
.differences_table .prop_name{ font-weight: bold; padding-right: 30px; }
.differences_table .catalog_item{ max-width: 190px; margin-bottom: 30px; }
.catalog_item .image img{ position: absolute; margin: auto; top: 0; bottom: 0; left: 0; right: 0; border: 0; border-radius: 5px; -moz-border-radius: 5px; -webkit-border-radius: 5px; }
.specials_slider_wrapp ul.tabs_content, .tab_slider_wrapp ul.tabs_content { margin-top: 10px; position: relative; zoom: 1; }
.catalog_detail .specials_slider_wrapp ul.tabs_content { margin-top: 5px; min-height: 300px; }
.catalog_detail .detail_text, .catalog_detail .detail_text p, .catalog_detail p{font-size: 13px;}
.specials_slider_wrapp ul.tabs_content > li, .tab_slider_wrapp ul.tabs_content > li { position: absolute; z-index: 10; }
.specials_slider > li { background: #fff; }
.specials_slider_wrapp ul.tabs_content > li.cur, .tab_slider_wrapp ul.tabs_content > li.cur { z-index: 1; }/*200*/
.specials_slider_wrapp ul.tabs_content > li .flex-viewport { padding-bottom: 5px; }

.item_info .cost .price_name + .price, .catalog_block  .cost .price_name + .price, .view-list .catalog_item .item_info .cost .price_name + .price{margin-top:0;margin-bottom:0px;float:none;}
.specials_slider .catalog_item .item_info .cost .price.discount, .catalog_block  .cost .price.discount, .view-list .catalog_item .item_info .cost .price.discount{/*margin-top: 8px;*/display: inline-block;vertical-align: top;}
.specials_slider .catalog_item .item_info .cost .price_name + .price + .price.discount, .catalog_block  .cost .price_name + .price  + .price.discount, .view-list .catalog_item .item_info .cost .price_name + .price + .price.discount{margin-top:0;}
.catalog_detail .item_main_info .price_block {overflow: hidden;}
.specials_slider .catalog_item .item_info .buttons_block{ display: none; }
.specials_slider .catalog_item .item_info .buttons_block, .catalog_block .catalog_item .item_info .buttons_block{ clear: both; margin-top: 7px; white-space: nowrap; }
.specials_slider.product_slider .catalog_item .item_info .buttons_block{ display: block; }
.specials_slider .catalog_item .item_info .basket_button, .catalog_block .catalog_item .item_info .basket_button{ float: left; margin-bottom: 4px; }

.soc-avt .row a span.name { box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; text-decoration: none; cursor: pointer; text-transform: uppercase; }
.button30 span, .basket_button.button30 span, .compare_button span, .soc-avt .row a span.name{ display: inline-block; font-size: 11px; line-height: 32px; }

.compare_button span{ background: url(../images/like_icons.png) no-repeat; }
.sort_to_compare .compare_button:first-child{ margin-right: 5px; }
.compare_wrapp{ font-size: 11px; }
.prompt .star_big{ position: relative; bottom: -14px; }
.compare_wrapp.centered{ text-align: center; }
.compare_wrapp a.compare_link{ border-bottom: 1px dotted; }
.compare_button:hover span{ background-position: -32px -64px; }
.basket_button, .compare_button{ display: inline-block; height: 25px; line-height: 25px; text-transform: uppercase; clear: both; padding: 0 6px 0 0; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; text-decoration: none; cursor: pointer; }
.basket_button, .compare_button, .button30{ border-radius: 2px; -moz-border-radius: 2px; -webkit-border-radius: 2px; }
a.wish_item, a.compare_item, a.wish_item i, a.compare_item i { display: inline-block; height: 26px; width: 26px; cursor: pointer; border-radius: 26px; -moz-border-radius: 26px; -webkit-border-radius: 26px; }
a.wish_item i, a.compare_item i { background: url(../images/like_icons.png) no-repeat; }
.front_slider .item-title a, .front_slider .item-title a span { font-size: 22px; line-height: 32px; text-decoration: none; }
.front_slider .price_name { margin-top: 20px; }
.front_slider .price { font-size: 32px; line-height: 34px; margin-top: 20px; }
.front_slider .price + .price_name { margin-top: 0; }
.front_slider .price_name + .price { margin-top: 0; }
.front_slider_wrapp { text-align: center; position: relative; zoom: 1; height: auto; margin-top: 20px; }
.front_slider_wrapp .flex-viewport { width: 75%; float: left; text-align: left; }
.front_slider_wrapp .extended_pagination  { float: right; width: 25%; list-style: none; text-align: left;  box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; -o-box-sizing: border-box; padding-left: 30px;  right: 0; bottom: 0; top: 0; overflow-y: auto; max-height: 280px; }
.front_slider_wrapp .extended_pagination li.hider { margin: 0; padding: 0; width: 10px; position: absolute; top: 0; bottom: 0; z-index: 10; cursor: default; left: -10px; background: url(../images/hider_right.png) 0px 0px repeat-y; }
.front_slider_wrapp .flex-control-nav { width: 100%; top: 0; }
.front_slider_wrapp  a.read_more, .btn_big { display: inline-block; height: 37px; line-height: 37px; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; 	-webkit-transition: none; -moz-transition: none; -o-transition: none; transition: none; padding: 0 15px; font-size: 16px; margin-top: 15px; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; cursor: pointer;
	text-decoration: none; }
.btn_big { margin: 0; }
.front_slider .price.discount { font-size: 12px; font-family: Ubuntu, Arial, Helvetica, sans-serif; line-height: 18px; margin-top: 0; }
.front_slider .info, .front_slider .image { box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; }
.front_slider .info { width: 50%; padding-left: 12px; }
.front_slider .image { width: 50%; text-align: center; padding-left: 10px; }
.front_slider .image { }
.front_slider .info { max-width: 100%; max-height: 100%; }
.front_slider .image img { max-width: 240px; max-height: 100%; }
.front_slider_wrapp .extended_pagination > li:eq(1) { margin-top: 0; }
.front_slider_wrapp .extended_pagination > li{ margin-top: 10px; display: block; padding: 10px; border-radius: 0 2px 2px 0; -moz-border-radius: 0 2px 2px 0; -webkit-border-radius: 0 2px 2px 0; position: relative; zoom: 1; }
.front_slider_wrapp .extended_pagination > li.active span, .front_slider_wrapp .extended_pagination > li.active:hover span{ border-bottom: 0; }
.front_slider_wrapp .extended_pagination  span{ line-height: 18px; }
.front_slider_wrapp .extended_pagination > li.active{ cursor: default; }
.front_slider_wrapp .extended_pagination > li{ cursor: pointer; display: block; }
.front_slider_wrapp .extended_pagination > li i.triangle{ left: -15px; bottom: 0; position: absolute; top: 0px; display: inline-block; font-size: 0; width: 0px; height: 0; border-top-color: transparent; border-bottom-color: transparent; border-top-color: transparent; border-top-style: solid; border-bottom-style: solid; border-right-width: 15px; border-right-style: solid; border-right-color: transparent; }
.front_slider .preview_text{ line-height: 16px; margin-top: 10px; }
.breadcrumbs .drop a span {border-bottom: 1px dotted #b4b4b4;-webkit-transition: none; -moz-transition: none; -o-transition: none; transition: none;}
.breadcrumbs .separator.cat_last{ background-position: -9999px -9999px; }
.breadcrumbs .drop:hover .number .separator{ background-position: -1px -15px; }
.breadcrumbs .drop:hover  a span{ border-bottom: none;}
.breadcrumbs .drop{ position: relative; display: inline-block; zoom: 1; }
.breadcrumbs .dropdown_wrapp{box-sizing: border-box; display: none; padding-top: 8px !important; top: 18px;}
.breadcrumbs .dropdown{ box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; padding: 12px; border-radius: 2px; -moz-border-radius: 2px; -webkit-border-radius: 2px; 	text-align: left; }
.breadcrumbs .dropdown > a{display: block; line-height: 14px; margin-top: 7px; text-decoration: none; text-transform: none;white-space:nowrap;}
.breadcrumbs .dropdown > a:first-child{margin-top: 0;}
.breadcrumbs .drop:hover .dropdown_wrapp { display: block; }
.left_side { padding-right: 200px; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; }
.right_side { width: 200px; float: right; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; padding-left: 20px; }

.catalog_detail .item_main_info .buttons_block { border-radius: 2px; -moz-border-radius: 2px; -webkit-border-radius: 2px; width: 100%; }
.catalog_detail .item_main_info { margin: 20px 0 30px; padding: 0px; border: 1px solid #eaebec; position: relative; }
.catalog_detail .item_main_info .item_slider { width: 50%; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; padding: 29px 56px 29px 56px;  float: left; position: relative; z-index: 1;text-align:center; }
.catalog_detail .item_main_info .right_info { padding: 0px 0px 0px 50%; position: relative; }
.catalog_detail .item_main_info .right_info .info_item { position: relative;padding:0px 21px 0px 11px;}
#order_form_div .info_block  .l_block:after, #order_form_div .info_block .r_block:before { position: absolute; top: 0px; background: #F2F2F2; width: 1px; height: 100%; content: ""; }
#order_form_div .info_block  .l_block:after { right: 0px; }
#order_form_div .info_block .r_block:before { left: -1px; }
.catalog_detail .right_info .price_block_wrapp, .catalog_detail .right_info .info_block { padding-left: 7px; }
.catalog_detail .info_block  b.block_title { display: block; }
.catalog_detail .info_block > div { display: inline-block; vertical-align: top; width: 130px; float: left; margin-bottom: 15px; min-height: 38px; }
.catalog_detail .info_block .brand.right { float: right; }
.catalog_detail .item_main_info .price { font-size: 24px; line-height: 26px; float: left; width: auto; white-space: nowrap; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; padding-right: 10px; }
.catalog_detail .item_main_info .price small { font-size: 16px; }

.catalog_detail .item_main_info .buttons_block, .catalog_detail .extended_info { padding: 10px; }
.counter_block{white-space:nowrap;}

.module-cart .count-cell .measure { display: block; white-space: nowrap; font-size: 11px; line-height: 14px; }
.module-cart .counter_block  { white-space: nowrap;}
.module-cart .count-cell .some-class { display: none; }

.basket_button.one_click span { padding-left: 0; background: none; }
.basket_button.one_click { padding-left: 6px; }
.basket_button.button30.one_click { padding-left: 10px; }
.catalog_detail .item_main_info .buttons_block { margin-top: 20px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; -o-box-sizing: border-box; min-height: 54px; }
.catalog_detail .basket_button.one_click { margin-left: 8px; }
.catalog_detail .item_main_info .buttons_block .counter_block { white-space: nowrap; }
.module-cart .buttons_block .counter_block { display: inline-block; }
.catalog_detail .buy_buttons_wrapp { text-align: right; padding: 12px 15px 0 0; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; }
.catalog_detail .buttons_block.adaptive .buy_buttons_wrapp a { width: 125px; text-align: center; }
.catalog_detail .buttons_block.adaptive .counter_block, .catalog_detail .buttons_block.adaptive .buy_buttons_wrapp { width: 50%; }
.catalog_detail .buttons_block.adaptive .counter_block { text-align: center; }
.catalog_detail .buy_buttons_wrapp a { margin-bottom: 10px; }
.catalog_detail .buy_buttons_wrapp.subscribe { float: left; min-width: 115px; padding: 12px 0 0 15px; }
.catalog_detail .buttons_block .description { font-size: 11px; line-height: 14px; padding: 5px 5px 0; }
.catalog_detail hr { height: 0; width: 100%; margin: 15px 0 25px; }
.catalog_detail .info_block + hr { margin-top: 0; }
.catalog_detail hr.separator { margin: 10px 0;  }
.availability-row .indicators{display:inline-block;vertical-align:top;zoom:1;*display:inline;}
.availability-row .indicators span, .quantity-indicators span { background: url(../images/quantity_icons.png) -13px -89px; no-repeat; display: inline-block; vertical-align: top; width: 21px; height: 21px; margin: 0 -2px 0 0; 	position: relative; zoom: 1; z-index: 8; margin-left: -12px; }
.availability-row .indicators.no_products span { margin-left: 0; }
.availability-row .indicators span.last, .quantity-indicators span.last { background-position: -13px -130px; z-index: 7; }
.availability-row .indicators span.null, .quantity-indicators span.null { background-position: -13px -170px; margin-left: 0; }
.availability-row .indicators span.first, .quantity-indicators span.first { z-index: 9; margin-left: 0; }
.availability-row .indicators span.r, .quantity-indicators span.r, .availability-row .indicators span.last.r, .quantity-indicators span.last.r { background-position: -13px -49px; }
.availability-row .indicators span.r.first, .quantity-indicators span.r.first{	background-position: -13px -9px;}
.availability-row .indicators.no_products span{	background-position: -13px -170px;}
.catalog_detail .availability-row .value, .catalog_detail .quantity-wrapp .value{ display: inline-block; font-size: 11px; line-height: 13px; margin-left: 5px; vertical-align: middle; color:#000000; }
.catalog_detail .availability-row .value a, .catalog_detail .availability-row .value span{	font-size: 11px;}
.catalog_detail .item_main_info a.wish_item, .catalog_detail .item_main_info a.compare_item,
.module-cart a.wish_item, .display_list a.wish_item, .display_list a.compare_item { background: none; width: auto; text-decoration: none; display: inline-block; max-width: 102px; }
.module-cart a.wish_item.to_basket { max-width: 130px; }
.catalog_detail a.wish_item .value, .catalog_detail a.compare_item  .value, .module-cart a.wish_item .value { font-size: 11px; vertical-align: top; line-height: 24px; margin-left: 5px; }
.compare_item  .value.added, .wish_item .value.added { display: none; }

.module-cart a.wish_item.to_basket .icon, .module-cart a.wish_item.to_basket .icon i { height: 26px; width: 26px; border-radius: 28px; -moz-border-radius: 28px; -webkit-border-radius: 28px; }
.module-cart a.wish_item.to_basket .icon { position: relative; zoom: 1; top: -1px; }
.catalog_detail .item_main_info a.wish_item:hover, .catalog_detail .item_main_info a.compare_item:hover { background-position: 0; }

.catalog_detail .availability-row { padding-left: 7px; margin-right: 10px; margin-bottom: 8px; }
.catalog_detail .item_main_info .like_icons > div {border-radius:2px;overflow: hidden;margin: 0px 0px 5px;}
.catalog_detail .extended_info { margin: 10px 0; }
.catalog_detail .adaptive_extended_info_wrapp { display: none; }
.catalog_detail .adaptive_extended_info .brand { float: right; }

.item_slider .slides { padding: 0px; margin: 0px auto 22px; width: 100%; max-width: 340px; height: 340px; line-height: 337px; position: relative; zoom: 1; }
.item_slider .slides .offers_img img { vertical-align: middle; border: 0; max-width: 100%; }
.item_slider:not(.flex) .slides li  { padding: 0; margin: 0; display: none; width: 100%; height: 340px; overflow: hidden; position: absolute; line-height: 340px; z-index: 50; }
.item_slider:not(.flex) .slides li.current { display: block; }
.item_slider .thumbs .slides_block li a { display: inline-block; height: 100%; width: 100%; }
.catalog_detail .item_slider #thumbs { height: 54px; white-space: nowrap; width: 256px; overflow: hidden; margin:0px; }
.catalog_detail .item_slider .thumbs { margin: 0px auto; max-width: 256px; position: relative; z-index: 1; }
.item_slider .thumbs .slides_block li  {overflow:hidden;vertical-align: bottom; list-style: none; width: 54px !important; height: 54px; display: block; zoom: 1; background: none; position: relative; text-align: center; line-height: 54px; margin: 0px 10px 0px 0px; border: 2px solid #fff; -webkit-transition: border-color ease-out 0.2s; -moz-transition: border-color ease-out 0.2s; -o-transition: border-color ease-out 0.2s; transition: border-color ease-out 0.2s; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; cursor: pointer; float: left; display: none; }

.item_slider .thumbs li.current { border-color: #ddd; }
.item_slider .thumbs li:hover { border-color: #9a9a9a; }

.item_slider .slides li.current { z-index: 0; }
.item_slider .slides li img, .item_slider .thumbs li img { position: absolute; margin: auto; top: 0; bottom: 0; left: 0; right: 0; border: 0; max-width: 100%; }
.item_slider.flex { display: none; }
.item_slider.flex  .slides li, .item_slider.flex  .slides li img { position: static; text-align: center; }
.item_slider .flex-control-nav { text-align: center; margin-bottom: 10px; }
.b-share * { font-size: 10px; }

/*.catalog_detail .tabs.main_tabs > li { border-radius: 2px; -moz-border-radius: 2px; -webkit-border-radius: 2px; margin-top: 9px; border-bottom: 1px solid transparent; }
.catalog_detail .tabs.main_tabs { padding-bottom: 9px; }
.catalog_detail .tabs > li:first-child { margin-left: 0; }*/

.detail_text ul li::before, .preview_text ul li::before, .preview-text ul li::before {padding: 0 10px 0 0;}
.catalog_detail .detail_text { margin-bottom: 15px;color: #555; }
.catalog_detail .tabs_section ul.tabs_content > li { width: 100%; padding: 34px 0 50px; }
.catalog_detail .reviews-reply-form {padding-bottom: 50px; }
.catalog_detail ul.tabs_content  li.video iframe { border: 1px solid #000; border-radius: 4px; -moz-border-radius: 4px; -webkit-border-radius: 4px; }
#reviews_content { display: none; padding: 40px 0 0; }
#reviews_content img.shadow { position: absolute; margin-top: 1px; }
.file_type { clear: both; margin-top: 15px; }
.file_type a { display: block; font-size: 13px; }
.file_type.tiff i.icon { background-position: 0 -275px; }
.file_type.jpg i.icon { background-position: 0px -220px; }
.file_type.pdf i.icon { background-position: 0px -0px; }
.file_type.word i.icon { background-position: 0px -55px; }
.file_type.excel i.icon { background-position: 0px -165px; }
.file_type i.icon { width: 46px; height: 33px; display: inline-block; background: url(../images/file_types.png) 0px -110px no-repeat; float: left; }
.file_type .description { padding: 0 0 0 46px; font-size: 12px; position: relative; top: -3px; }
.catalog_detail a.compare_item:hover .icon i { background-position: -32px -65px; }
.catalog_detail a.wish_item:hover .icon i { background-position: -3px -63px; }

.tabs_content .stores_block_wrap{ margin-top: -7px;}
.stores_block_wrap .stores_block .stores_text_wrapp { position: relative; display: inline-block; background: #fff; padding: 0px 10px 0px 19px; }
.stores_block_wrap .stores_block .stores_text_wrapp > span { padding: 0px 0px 0px 10px; }
.stores_block .quantity-wrapp { 	float: right; padding-left: 10px; background: #fff; margin-top: 7px; }
.stores_block_wrap .stores_block { clear: both; line-height: 20px; position: relative; padding: 12px 0px 13px 0px; }
.stores_block_wrap .stores_block:before { content: ""; width: 100%; display: block; height: 1px; border-bottom: 1px dotted #c3c3c3; top: 50%; position: absolute; }
.stores_block_wrap .stores_block:hover, .stores_block_wrap .stores_block:hover .stores_text_wrapp, .stores_block_wrap .stores_block:hover .item-stock { background: #f7f7f7; }
.stores_block_wrap .stores_block:hover { transition: none; }
.stores_block_wrap .stores_block .item-stock { float: right; background: #fff; margin-top: 2px; position: relative; padding: 0px 19px 0px 20px; min-width: 115px; }
.phone span.phone_text > div{	display: inline-block;}
.tabs_content li.video > div, .tabs_content li.video > div *, .tabs_contentli.video iframe {	max-width: 100%;}
.tabs_content li.video {text-align: center;}
.tabs_content li.video .description{	text-align: left;}
.tabs_content li.video .description .shadow{	margin: 25px 0 0;}
.catalog_detail ul.tabs_content > li .video_wrapp > div{	margin: 0 auto;}
.catalog_detail .services_block{	margin: 31px 0px 10px;}
.services_block .item{ display: inline-block; width: 49%; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; margin: -5px 0px 12px; vertical-align: top; }
.services_block .item a .arrow {float: left;width: 15px;height: 15px;margin: 0px;}
.services_block .item a span.link {font-size: 13px;line-height: 16px;padding-left: 25px;display: block;padding-top: 2px;}
.services_block .item a { text-decoration: none; }
.services_block a i.arrow b { background: url(../images/arrows.png) 2px -241px no-repeat; }
.services_block .shadow, .files_block .shadow { margin-top: 18px; }
.catalog_detail .stores_block_wrap .stores_block .value { margin-right: 10px; }
.catalog_detail .stores_block_wrap .stores_block .value:first-letter{ text-transform:lowercase; }

.articles-list .item .left-data, .catalog_section_list .section_item  .image  { width: 62px; }
.articles-list .item .left-data  img, .catalog_section_list .section_item  .image  img { max-width: 120px; max-height: 120px; }
.catalog_section_list .section_item  .image  img { /*max-width: 62px; max-height: 62px;*/ }
.catalog_section_list .section_item .image { padding: 0 20px 0 0; vertical-align: top; }
.catalog_section_list .section_item td.section_info { vertical-align: top; }
.articles-list .item .right-data, .catalog_section_list .section_item  .image + ul { margin-left: 140px; }
.right-item-data, .right-data, .catalog_section_list .section_item  ul { overflow: hidden; }


.filter_block +  .articles-list { margin-top: 30px; }
table.colored { border-collapse: collapse; }
table.colored td.name_th, table.colored td.name { text-align: left; }
.catalog_detail .offers_table thead td { border-top: none; }
table.colored thead td { font-size: 12px; padding: 8px 5px 7px;  border-top: 0; }
table.colored td {text-align: left;}
table.colored td, .differences_table table td { font-size: 13px; padding: 5px; transition: none 0s ease 0s; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; -o-box-sizing: border-box; }
.differences_table table td { padding: 5px 10px; }
table.colored td.price { font-size: 14px; }
table.colored td.one_click_buy, table.colored td.buy { box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; }
table.colored td.one_click_buy { width: 145px;text-align: center; }
table.colored td.buy { width: 125px; text-align:center; }
table.colored td.buy .more_text { display: none; }
table.colored td.count { width: 150px; }
table.colored td.property, table.colored td.count { text-align: center; }
.catalog_detail table.colored .like_icons {text-align: center;width: 90px;white-space: nowrap;position:static;}
.catalog_detail table.colored .like_icons span { opacity: 1;visibility: visible;}
.catalog_detail table.colored .like_icons .compare_item_button, .catalog_detail table.colored .like_icons .wish_item_button { display: inline-block;vertical-align: middle; margin: 0 5px 0 0;}
.catalog_detail table.colored .like_icons .compare_item_button span, .catalog_detail table.colored .like_icons .wish_item_button span {margin-bottom:5px;margin-top:5px;}
.catalog_detail .adaptive.text > div.like_icons .compare_item_button span, .catalog_detail .adaptive.text > div.like_icons .wish_item_button span{margin:0;}
.catalog_detail table.colored .like_icons > div:last-of-type{margin-right:0;}
.catalog_detail .adaptive.text > div.like_icons {width: 75px;}
table.colored td.price { text-align: center; white-space: nowrap; }
table.colored .counter_block_wr { text-align: right; }
div.reviews-collapse { margin-bottom: 20px; }
table.offers_table td { padding: 20px 10px;}
.offers_table .counter_block { font-size: 0px; padding: 0px; }
.specials_slider_wrapp, .tab_slider_wrapp { position: relative; zoom: 1; /*z-index: 0;*/ }

.bx_item_set_hor_item .item_info .item-title,
.bx_modal_body .item_wrapp .item-title, .bx_modal_body .bx_kit_item  .item-title { overflow:hidden; text-overflow: ellipsis; text-overflow: -o-ellipsis-lastline; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; white-space: normal; }
.bx_item_set_hor_item .item_info .item-title, .bx_modal_body .item_wrapp .item-title, .bx_modal_body .bx_kit_item  .item-title { text-align: left; }
.bx_item_set_hor_item .item_info .item-title span, .bx_modal_body .item_wrapp .item-title span, .bx_modal_body .bx_kit_item  .item-title span { line-height: 16px; }
.front_slider li .image img, .specials_slider li .image img, .advt_banner img, .viewed_products_column .view-item img,
.item_slider ul.slides li img, .item_slider .thumbs li img, .articles-list .item .left-data img, .brands_list li img,
.module-cart .thumb-cell img, .catalog_item .image img, .module_products_list td.foto-cell img, .display_list .list_item .image img,
.catalog_detail .set_wrapp .item .image img, .bx_item_set_hor .bx_item_set_hor_item  .bx_item_set_img_container img, .bx_modal_body .bx_kit_item .bx_kit_img_container img,
.catalog_section_list .section_item_inner .image img, .basket_popup_wrapp .cart_shell .catalog_item .thumb-cell img,
.bx_filter_vertical [class^=specials_] input[type="checkbox"] + label .icon, .include_module_error img:hover{ -webkit-transition: all ease-out .2s; -moz-transition: all ease-out .2s; -o-transition: all ease-out .2s; transition: all ease-out .2s; }
.flexslider .slides img{ -webkit-transition: all ease .5s; -moz-transition: all ease .5s; -o-transition: all ease .5s; transition: all ease .5s; }
.front_slider .image:hover  img, .specials_slider li:hover .image img, .advt_banner:hover img,
.viewed_products_column .view-item:hover img, .item_slider .thumbs li:hover img, .articles-list .item:hover .left-data img,
.module-cart tr:hover img, .catalog_item:hover .image img, .module_products_list tr:hover td.foto-cell img, .display_list .list_item:hover  .image img,
.catalog_detail .set_wrapp .item:hover .image img, .bx_item_set_hor .bx_item_set_hor_item .item_wrapp:hover  .bx_item_set_img_container img, .bx_modal_body .bx_kit_item:hover .bx_kit_img_container img, .catalog_section_list .section_item_inner:hover .image img, .basket_popup_wrapp .cart_shell .catalog_item:hover .thumb-cell img, .news_slider_wrapp .item:hover img, .news_block .news_items .item .image:hover img { -webkit-filter: saturate(1.7); }
.brands_list li:hover img{ -webkit-filter: saturate(1.5); }
.bx_filter_vertical [class^=specials_] input[type="checkbox"] + label:hover .icon{ -webkit-filter: saturate(2); }
.include_module_error img:hover, .flexslider .slides li:hover img{ -webkit-filter: saturate(1.2); }

.detail_picture_block .picture_description{ font-size: 11px; margin-top: 10px; padding-top: 5px; text-align: center;	 }
.news_detail_wrapp .back{ margin-top: 30px; }
.news_detail_wrapp .detail_picture_block { float: right; border: 1px solid #E5E5E5; margin: 0px 0px 20px 30px; width: 278px; height: 161px; line-height: 161px; text-align: center; overflow: hidden; }
.news_detail_wrapp .detail_text { margin-top: 10px; }
.news_detail_wrapp .detail_picture_block img { vertical-align: middle; }
.detail_text.wimg blockquote { /*margin: 15px 0 15px 310px;*/ }

.module-gallery-list { font-size: 0; line-height: 0; margin: 30px 0 0; }
.right_block .module-gallery-list { margin-top: 30px; }
.module-gallery-list li { padding: 0; width: 25%; height: 143px; position: relative; display: inline-block; margin: 0 0 1px 1px; overflow: hidden; vertical-align: top; }
.module-gallery-list li .fancy_hover { border: 2px solid transparent; }
.news_detail_wrapp .price_block{ padding: 15px 15px 12px; margin-top: 30px; display: inline-block; }
.news_detail_wrapp .price_block .price{ font-size: 17px; }
.rss_feed_icon{ position: absolute; right: 0; top: 35px; padding: 1px 6px; border-radius: 2px; -moz-border-radius: 2px; -webkit-border-radius: 2px;color:#fff !important; }
.rss_feed_icon img{ max-width: 100%; }
.news_date_time_detail{ font-size: 12px; margin: 0px 0px 18px; display: block; }
.articles-list .date_small { font-size: 12px; line-height: 12px; margin: 0 0 10px; padding: 0;}
.module-pagination { margin: 0; text-align: center; font-size: 0; padding: 20px 0px 0px; position: relative; }
.bottom_nav .module-pagination{padding-top:0px;}
.module-pagination .nums > a, .module-pagination .nums span { background:#e5e5e5;display: inline-block; width: 33px; height: 33px; text-align: center; line-height: 32px; margin: 0px 5px 5px 0px; text-decoration: none; font-size: 13px; font-weight: 500; border-radius: 2px; -webkit-border-radius: 2px; -moz-border-radius: 2px; }
.module-pagination .nums > a:not(.cur):hover { background: #e3e3e3; }
.module-pagination .flex-direction-nav { position: absolute; width: 100%; }
.module-pagination .flex-direction-nav > li { position: absolute;top: 2px; }
.module-pagination .flex-direction-nav .flex-nav-next{ right: -37px }
.module-pagination .flex-direction-nav .disabled { display: none; }
.module-pagination .flex-direction-nav .flex-nav-prev { left: -37px }
.module-pagination .point_sep { cursor: default; display: inline-block; width: 27px; height: 29px; font-size: 0; background: url(../images/pagination_sep.png) center no-repeat !important; border: 0 !important; vertical-align: bottom; }
.news_detail_wrapp .similar_products_wrapp{ margin-top: 30px; clear: both; }
.news_detail_wrapp .specials_slider_wrapp{ position: relative; zoom: 1; margin-top: 10px; }
.news_detail_wrapp .similar_products_wrapp img.shadow{ margin: 0 0 20px; }
.news_detail_wrapp .specials_slider_wrapp .slider_navigation { position: absolute; top: -40px; right: 0; }

.left_block .left_menu{margin:0px 0px 26px;border-radius: 3px;overflow: hidden;}
.left_block .left_menu *{box-sizing:border-box;}
.left_menu > li { display: block; font-size: 13px; /*margin-top:1px;*/ transition: background-color 0.07s ease-out 0s; -webkit-transition: background-color ease-out 0.07s; -moz-transition: background-color ease-out 0.07s; -o-transition: background-color ease-out 0.07s; background:#f7f7f7; }
.left_menu > li:first-child { margin-top: 0; }
.left_menu li a { font-size:13px; padding: 11px 19px 12px; text-decoration: none; }
.left_menu li:not(.exit) a { color: #383838; display:block; }
.left_menu li.exit a { display:block; text-align: left; position: relative; }
body .left_block .left_menu li.exit a:before { display:inline-block !important; width: 5px; height: 8px; background: url('../images/arrows.png') -3px -292px no-repeat !important; content: ""; margin: 0px 8px 0px 0px;position:static; }
.left_menu li:not(.exit).current a , .left_menu li:not(.exit).current a:hover { color: #fff; }
.left_menu > li.exit { background: rgba(0, 0, 0, 0) none repeat scroll 0 0; border: medium none !important;}

.left_menu > li.exit.current a {background: transparent;border: 0;}

.brands_list li { display: inline-block; zoom: 1; vertical-align: top; padding: 0; width: 24%; box-sizing: border-box;-moz-box-sizing: border-box;-o-box-sizing: border-box;-webkit-box-sizing: border-box;padding: 0 10px 10px 0; text-align: center; height: 122px; line-height: 122px; transition: box-shadow ease 0.2s; }
.brands_list li:hover { box-shadow:0px 0px 0px 1px #eaebec;}
.brands_list li  img{max-width: 100%; vertical-align: middle;}
.brands_list{margin-top: 20px;}
.specials_tabs_section.specials_slider_wrapp .tabs_content > li.tab  ul.flex-direction-nav{display: none;}

.module-cart{margin-top: 25px;}
.module-cart table{ width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; }
.module-cart .extra_properties { display: none; }
.module-cart .colored td { text-align: center; position: relative; /*min-height: 100px;*/ }
.module-cart .colored td.delay-cell{ white-space: nowrap; }
.module-cart td.name-cell, .module-cart td.name-th{ text-align: left; }
.module-cart td.name-th{ padding-left: 10px; }
.module-cart .cost-cell, .module-cart .cost-cell *, .module-cart .summ-cell, .module-cart .summ-cell *, .module-cart .row_values .price{ font-size: 14px; }
.module-cart .summ-cell, .module-cart .weight-cell, .module-cart .count-cell, .module-cart .cell { white-space: nowrap; }
.module-cart .cost-cell .discount, .module-cart .cost-cell .discount *,  .cart_shell .cost-cell .price.discount * { font-size: 12px; }
.module-cart table td { vertical-align: middle; padding: 10px; }
.module-cart table td.thumb-cell{ positon: relative; overflow: hidden; }
#order_form_content .module-cart table td.thumb-cell { padding-left: 20px; }
.module-cart table td.remove-cell { box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; width: 55px; }
.module-cart table td.thumb-cell { positon: relative; }
.module-cart table td.thumb-cell a { display: inline-block; height: 100px; width: 100px; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; }
.module-cart table td.thumb-cell img{	max-width: 100%;	max-height: 100%;}
.module-cart table td.thumb-cell a img {	border: 0;	border-radius: 5px;	-moz-border-radius: 5px;	-webkit-border-radius: 5px;	max-width: 100%;	max-height: 100%;	vertical-align: middle;}
.module-cart .name-cell a, .module-cart .name-cell{	text-decoration: none;	font-size: 14px;	font-weight: 500;}

.module-cart .result-row .buttons-row div { max-width: 180px; }
.module-cart .result-row .buttons-row .description { float: none; font-size: 11px; margin-top: 10px; }
.module-cart .colored  tfoot td { text-align: left; padding-top: 20px; padding-bottom: 20px; }
.module-cart .colored  tfoot tr td:first-child { padding-left: 30px; }

.module-cart .colored tfoot td.row_values, .module-cart .colored tfoot td.row_values *{	white-space: nowrap;}
.module-cart .colored tfoot td.row_values{	padding-right: 20px;}
.module-cart .colored tfoot td.extended-cell{	display: none;}
.module-cart .colored  tfoot td.row_values.val{	text-align: right;}
.module-cart .colored  tfoot td{	vertical-align: top;}
.module-cart .colored tfoot tr[data-id="total_buttons"] td{	position: relative;	zoom: 1;	overflow: hidden;}

.module-cart .coupon_wrapp input[type="text"]{	margin-bottom: 5px;	margin-right: 5px;}
.module-cart.fixed tbody{	overflow:hidden;}
.module-cart .order_item_quantity_small{	display: none;}
.basket_fly .module-cart table.colored tbody td{	border-bottom: 0;}
.basket_fly .module-cart table.colored tbody tr:first-child td{	border-top: 0;}
.right_side.sections_list .banners_column{	margin-bottom: 20px;}
.right_side.sections_list .viewed_products_column{	margin-bottom: 0;}
.articles-list.sections .item{	clear: left;	min-height: 120px;}
.bx_filter_vertical .bx_filter_container_title{	padding: 7px 10px;	cursor: pointer;	position: relative; zoom: 1; }
.bx_filter_vertical .bx_filter_container {	position: relative;}
.bx_filter_vertical .bx_filter_container_title i.arr{	display: inline-block;	height: 15px;	width: 15px;	float: right;	position: absolute;	right: 8px;	top: 9px;}
.bx_filter_vertical .bx_filter_param_area{	padding: 0 10px;}
.bx_filter_vertical .bx_filter_container_title:hover i.arr{	background-position: 3px -21px;}
.bx_filter_vertical .bx_filter_container.active i.arr{	background-position: -18px -5px;}
.bx_filter_vertical .bx_filter_container.active:hover i.arr{	background-position: 0 -5px;}
.bx_filter_vertical .bx_filter_block.active{	display: block;}

.bx_filter_vertical .bx_filter_block { padding: 0px; font-size: 0px; position: relative; zoom: 1;z-index: 1; }
.adaptive_filter { float: left; position: relative; zoom: 1; z-index: 100; padding-right: 3px; display: none; }

.filter_opener  { display: inline-block; padding: 8px 8px 1px; margin: -8px 25px 0px 0px; border-radius: 2px; }
.filter_opener  span, .filter_opener  i { display: inline-block; vertical-align: top; }
.filter_opener  span { white-space: nowrap; font-size: 12px; color: #8e8c8c; line-height: 14px; }
.filter_opener:not(.opened):hover { background: #e5e5e5; }
.filter_opener:not(.opened):hover span { color: #383838; }
.filter_opener  i { background: url(../images/sort_icons.png) -19px -62px no-repeat; width: 15px; height: 13px; margin: 0px 7px 0px 0px; }
.filter_opener.opened i { background-position: -39px -62px; }
.filter_opener.opened span { color: #fff; }
.filter_opener:not(.opened):hover i { background-position: -1px -62px; }
.filter_opener.active i { background-position: 2px -288px; }
.filter_opener.opened.active i, .filter_opener.active:hover i { background-position: -102px -288px; }
.block .catalog_block .catalog_item_wrapp:hover{z-index:60;}
.block .catalog_block .catalog_item_wrapp .catalog_item{border: 1px solid #eaebec;}
.catalog_block .catalog_item_wrapp { /*width: 25%; width: 230px; float: left; padding-bottom: 25px; display: inline-block;*/white-space:normal;  vertical-align: top; }
.catalog_block .availability-row {margin-top:5px;}
.catalog_block .catalog_item {text-align:center;background: #fff;overflow: hidden; -webkit-transition: box-shadow ease-out 0.2s; -moz-transition: box-shadow ease-out 0.2s; -o-transition: box-shadow ease-out 0.2s; transition: box-shadow  ease-out 0.2s; padding: 4px; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; white-space:normal; padding: 20px 19px 20px 20px; }

.catalog_block .catalog_item img, .product_slider .catalog_item img { max-width: 100%; max-height: 100%; }
.catalog_item { position: relative; }
.bx_filter_container .disabled { -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)"; filter: alpha(opacity=50); -moz-opacity: 0.5; -khtml-opacity: 0.5; opacity: 0.5; }
.smartfilter .bx_ui_slider_track { height: 4px; margin: 33px 0px 13px; position: relative; zoom: 1; }
.smartfilter .bx_ui_slider_track .bx_ui_slider_handle { top: -7px; width: 12px; height: 12px; display: inline-block; cursor: pointer; position: absolute; z-index: 100; background: #fff; border-radius: 16px; border: 3px solid #ddd; }
.smartfilter .bx_ui_slider_track .bx_ui_slider_range { height: 4px; position: relative; }
.smartfilter .bx_ui_slider_track .bx_ui_slider_handle:after { font-size: 0; content: "."; background: #fff; display: inline-block; background: #fff; width: 6px; height: 6px; left: 3px; position: absolute; top: 3px; }
.bx_filter_vertical .bx_filter_block label, .bx_filter_vertical .bx_filter_block label span { font-size: 13px; }

.module_products_list td { padding: 19px 0px; text-align:center; border-top: 1px solid #eaebec; }
.module_products_list td.item-name-cell { text-align: left; padding-left: 20px; padding-right: 10px; }
.module_products_list td.item-name-cell a { font-size: 14px; font-weight: 400; }
.module_products_list td.price-cell { max-width: 200px; text-align: left; width: 21%; }
.module_products_list td.price-cell .cost.prices .price{font-size:15px;font-weight:500;line-height: 14px;display:inline-block;}
.module_products_list td.like_icons { width: 56px; }
.module_products_list td.like_icons.full { width: 91px; }
.module_products_list td.but-cell { width: 215px; text-align: right; }
.module_products_list { box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; width: 100%; font-size: 12px; border: 1px solid #e5e5e5; margin: 0px 0px 30px; float: left;overflow:hidden;}
.module_products_list .foto-cell { width: 50px; }
.module_products_list tr:first-child td { border-top: 0; }
.module_products_list tr  td:first-child{ padding-left: 19px; }
.module_products_list tr  td:last-child{ padding-right: 19px;padding-right: 5px; }
.module_products_list .foto-cell img { max-width: 100%; }

.module_products_list .adaptive_button_buy{display:none;margin: 10px 0px 10px;}
.module_products_list .adaptive_button_buy *{float:none !important;}

.module_products_list .title{}
.module_products_list .rating{padding:0px 18px 0px 0px;}
.module_products_list .rating .iblock-vote{margin-top:3px;}
.module_products_list .rating table tr td{padding:0px;}
.module_products_list .rating, .module_products_list .item-stock{display:inline-block;vertical-align:middle;margin:0px;padding-bottom:5px;}
.module_products_list .item-stock{padding-bottom:6px;}

.table .module_products_list td.like_icons { width: 92px; position: relative;top: 0px;right: 0px;}
.table .module_products_list td.like_icons .wrapp_stockers .like_icons{top: 50%;margin-top: -15px;position:static;margin:0px;}

.module_products_list .availability-row, .module_products_list .price-cell .price { white-space: nowrap; }
.module_products_list .availability-row { text-align:left; }
.module_products_list .price-cell .price { font-size: 14px; }
.module_products_list .price-cell .price.discount { font-size: 12px; }
.module_products_list .price-cell .price.discount strike { line-height: 14px; font-family: Ubuntu, Arial, Helvetica, sans-serif; }
.module_products_list .quantity-cell { width: 90px; }

.display_list { margin-top: 0px; padding: 0px 0px 30px; }
.display_list .list_item_wrapp { position: relative; zoom: 1; z-index: 0; -webkit-transition: border-color ease-out 0.2s; -moz-transition: border-color ease-out 0.2s; -o-transition: border-color ease-out 0.2s; transition: border-color ease-out 0.2s; }
.display_list .list_item { min-height: 230px; white-space: normal; }
.display_list .list_item  td.image_block, .display_list .list_item  td.description_wrapp, .display_list .list_item  td.information_wrapp { padding: 20px; vertical-align: top; }
.display_list .list_item  td.description_wrapp, .display_list .list_item  td.information_wrapp{position:relative;z-index:60;}
.display_list .list_item td.image_block, .display_list .list_item td.description_wrapp { padding: 19px; }
.display_list .list_item  td.description_wrapp{padding-left:12px;padding-right:20px;}
.display_list .list_item .image_block { width: 25%; position: relative; zoom: 1; min-height: 170px;  box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; }
.display_list .description_wrapp .desc_name a span, .popup .item_name span { font-size: 16px; line-height: 24px; }
.display_list .adaptive_name { display: none; }
.display_list .adaptive_name .desc_name { margin-bottom: 0; }

.module_products_list .availability-row .value, .module_products_list .availability-row .value span { font-size: 11px; margin: 2px 0 0 5px; display:inline-block; vertical-align:top; *display:inline; zoom:1; font-family: Ubuntu, Arial,Helvetica,sans-serif; }
.display_list .availability-row .value:first-letter, .display_list .availability-row .value span:first-letter, .module_products_list .availability-row .value:first-letter, .module_products_list .availability-row .value span:first-letter, .catalog_block .availability-row .value:first-letter, .catalog_block .availability-row .value span:first-letter, .catalog_detail .availability-row .value:first-letter, .catalog_detail .availability-row .value span:first-letter{ text-transform: uppercase; }
.display_list .adaptive_name  .desc_name a span { font-size: 14px; line-height: 16px; }
.display_list .adaptive_name td { padding: 15px; }
.display_list .description_wrapp .description, .display_list .description_wrapp .information { box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; padding: 6px 0px 0px; }
.display_list .list_item  td.information_wrapp { width: 23%; width: 207px; min-width: 155px;  max-width: 207px; padding: 0; position: relative; zoom: 1; }
.display_list .information_wrapp .information { padding: 25px 29px 27px 6px; }
.display_list .price_block { margin-bottom: 12px; }
.display_list .price_block .price_name{margin-top:8px;}
.display_list .price_block .price:not(.discount) { white-space: nowrap; }
.display_list .price { font-size: 24px; line-height: 26px; }
.display_list .price.discount { line-height: 14px; }
.display_list .likes_icons * { font-size: 11px; }
.display_list .likes_icons a:first-child { margin-top: 3px; }
.display_list .likes_icons a{ margin-top: 5px; }
.display_list .likes_icons .icon { position: relative; zoom: 1; bottom: -9px; }
.display_list .likes_icons { margin-left: 2px; }
.display_list .button.small{/*height:16px;*/}
.compare_wrapp { padding: 6px; position: absolute; right: 0; top: -55px; width: 180px; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; white-space: nowrap; }
.left_side  .compare_wrapp { top: -60px; }
.compare_wrapp .compare_button { margin-right: 3px; }
.compare_wrapp a.compare_link { text-decoration: none; cursor: pointer; margin: 0 4px; }
.compare_wrapp a.compare_link span { font-size: 11px; }
.display_list  .information .counter_wrapp{white-space:nowrap;}

.module-cart table tr[data-error="no_amounth"] td { padding-top: 20px; }
.count-cell .module-cart table td.remove-cell { min-height: 100px; vertical-align: middle; }
.display_list .price.discount, .display_list .price.discount * { font-size: 11px; font-family: Ubuntu, Arial, Helvetica, sans-serif; }
.popup { display: none; position: absolute; min-width: 420px; max-width: 520px; left: 50%; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; border-radius: 5px; -moz-radius: 5px; -webkit-border-radius: 5px; /*overflow: hidden;*/ }
.popup.card_popup_frame { max-width: 520px; }
.popup.card_popup_frame .popup-intro { position: absolute; top: 0; right: 0; left: 0; height: 63px; }
.popup.card_popup_frame .popup-intro.grey{ display: none; }
.popup.card_popup_frame .basket_popup_wrapp{ margin-top: 63px; overflow: hidden; }
.popup-window-titlebar .popup-window-top-row .popup-window-center-column{ height: auto; cursor: default !important; }
.popup .pop-up-title, .popup-window-titlebar .popup-window-top-row .popup-window-center-column span div{ padding: 22px 50px 20px 30px; font-size: 19px; line-height: 20px; }
.popup-window-titlebar .popup-window-top-row .popup-window-center-column span div { padding: 17px 50px 14px 13px; }

.popup-window-close-icon.popup-window-titlebar-close-icon:after { content: ""; display: inline-block; width: 19px; height: 19px; border-radius: 19px; -moz-border-radius: 19px; -webkit-border-radius: 19px; background: url(../images/close_icons.png) -1px -59px no-repeat; }
.popup-window-close-icon.popup-window-titlebar-close-icon{ background: none; }
.popup a.item_name{ text-decoration: none; }
.popup a.item_name span{ line-height: 22px; }

.popup-window-close-icon.popup-window-titlebar-close-icon { margin: 0; position: absolute; right: 5px !important; top: 5px !important; cursor: pointer; }
.popup .close i, .popup-window-close-icon.popup-window-titlebar-close-icon:after{ background: url(../images/close_icons.png) -1px -59px no-repeat; }
.popup .form-wr  p{ margin-top: 0; margin-bottom: 10px; }
.popup .form_description{ padding: 10px 30px; }
.card_popup_frame.popup .form-wr{ padding: 25px 0 30px 0; }
.popup .product_description { padding-left: 10px; }
.popup .buttons_wrapp{ clear: both; margin-top: 30px; }
.star_big{ font-size: 32px; }
.popup .r  { margin-bottom: 13px; position: relative; }
.popup .but-r .prompt { float: right; }
.popup input[type="text"], .popup input[type="password"], .popup input[type="email"], .popup textarea , .form-block input, .form-block textarea { width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; }
.popup textarea{ resize: vertical; }
.one_click_buy_result { display: none; }
.popup .cart_shell .catalog_item .slide, .basket_fly .module-cart .slide{ display: none; }
.popup .cart_shell .catalog_item[animated=false], .module-cart tr[animated=false] .thumb-cell img{  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)"; filter: alpha(opacity=0); -moz-opacity: 0; -khtml-opacity: 0;   opacity: 0; }
.popup .cart_shell td.cost-cell{ padding-right: 0; }
.popup .cart_shell td.cost-cell .price:first-child{ margin-top: 0; }
.popup .cart_shell td.cost-cell, .popup .cart_shell td.cost-cell *{ text-align: right; }
.popup .cart_shell .thumb-cell{ width: 50px; }
.popup .cart_shell td{ padding: 10px; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box;}
.popup .cart_shell .thumb-cell a { display: block; position: relative; zoom: 1; height: 50px; width: 50px; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; }
.popup .cart_shell .thumb-cell img { position: absolute; margin: auto; top: 0; bottom: 0; left: 0; right: 0; border: 0; max-width: 100%; max-height: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; }
.popup .cart_shell .cost-cell .price { text-align: right; clear: both; float: right; white-space: nowrap; font-size: 14px; display: inline-block; margin-top: 0; }

.card_popup_frame.popup  .but_row { margin-top: 25px; clear:both; height: 31px; overflow: hidden; position: relative; zoom: 1; }
.card_popup_frame.popup .but_row.no_border { border: 0; }
.card_popup_frame.popup  .but_row .to_basket, .card_popup_frame.popup  .but_row .to_delay { display: inline-block; position: absolute; top: 0; }
.card_popup_frame.popup .but_row .to_basket{ display: inline-block; right: 0; }
.card_popup_frame.popup .but_row .to_delay{ display: none; }
.card_popup_frame.popup .total_wrapp hr{ clear: both; }
.card_popup_frame.popup .basket_empty{ display: none; padding: 20px; }
.card_popup_frame.popup .basket_empty td{ vertical-align: middle; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; }
.card_popup_frame.popup .basket_empty td.image{ width: 91px; }
.card_popup_frame.popup .basket_empty td.description{ padding-left: 30px; }
.card_popup_frame.popup .basket_empty .image div{ min-height: 91px; background: url(../images/empty_cart_small.png) center no-repeat; }
.card_popup_frame.popup .basket_empty .basket_empty_subtitle{ font-size: 15px; margin-bottom: 15px; }
.card_popup_frame.popup .basket_empty .basket_empty_description { font-size: 13px; line-height: 16px; }
.card_popup_frame.popup  .but_row a.to_basket .text, .card_popup_frame.popup .but_row a.to_delay .text { margin-top: 10px; font-size: 12px; text-transform: uppercase; display: inline-block; line-height: 13px; vertical-align: top; }
.card_popup_frame.popup  .but_row a.to_basket .icon, .card_popup_frame.popup  .but_row a.to_basket .icon i,
.card_popup_frame.popup  .but_row a.to_delay .icon, .card_popup_frame.popup  .but_row a.to_delay .icon i { display: inline-block; height: 30px; width: 30px; border-radius: 2px; -moz-border-radius: 2px; -webkit-border-radius: 2px; }
.card_popup_frame.popup  .but_row a.to_basket .icon, .card_popup_frame.popup  .but_row a.to_delay .icon { margin-right: 15px; }
.card_popup_frame.popup  .but_row a.to_basket .icon i, .card_popup_frame.popup  .but_row a.to_delay .icon i { background: url(../images/basket_icons.png) no-repeat; }
.card_popup_frame.popup  .but_row a.to_basket:hover .icon  i { background-position: -5px -170px; }
.card_popup_frame.popup  .but_row a.to_delay:hover .icon  i{ background-position: -48px -257px; }
.card_popup_frame.popup .total_wrapp .price{ margin-left: 15px;  display: inline-block; }
.card_popup_frame.popup .total_wrapp .price.discount{ display: block; }
.card_popup_frame.popup  .item-title a span{ font-size: 13px; }
.card_popup_frame.popup a.more_row, .basket_fly td.total_wrapp a.more_row{ text-decoration: none; float: left; }
.card_popup_frame.popup a.more_row .icon, .basket_fly td.total_wrapp a.more_row .icon{ margin-left: 5px; border-radius: 5px; -moz-border-radius: 5px;  -webkit-border-radius: 5px; vertical-align: middle; margin-top: -1px; }
.card_popup_frame.popup a.more_row .text, .basket_fly td.total_wrapp a.more_row .text{ text-decoration: underline; }
.popup .compare_list{ padding: 25px 60px; text-align: center; position: relative; max-width: 445px; }
.popup .compare_list .compare_list_item:first-child{ margin-left: 0; }
.popup .compare_list .compare_list_item{ vertical-align: top; width: 135px !important; display: inline-block; margin-left: 15px;  position: relative; text-align: center; }
.popup .compare_list .compare_list_item .image{ min-height: 70px; }
.popup .compare_list ul{ display: inline-block; width: 100%; }
.popup .compare_list .compare_list_item img{ max-width: 100%; }
.compare_frame.popup .button_row{ padding: 15px 0; text-align: center; }
.compare_list .compare_list_item .name a{ font-size: 12px; line-height: 16px; }
.popup.compare_frame{ max-width: 970px; }
.compare_list_item:hover .delete, .differences_table .catalog_item:hover .remove{ display: inline-block; }
 .differences_table .catalog_item .remove { z-index: 100; }
.compare_list_item .delete, .differences_table .remove{ height: 16px; width: 16px; background: url(../images/close_icons.png) -6px -8px no-repeat; position: absolute; top: 0; right: 0; display: none; }
.popup .compare_list .compare_navigation{  display: inline-block; position: absolute; top: 65px; right: 0; left: 0; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; }
.popup .compare_list .compare_navigation li{	position: absolute;	right: 20px;}
.popup .compare_list .compare_navigation li:first-child{	left: 20px;}
.catalog_detail .props_table{	margin-bottom: 15px;	width:100%;}
.props_table{	min-width: 300px;	margin-top: -10px;}
.props_table .char_name{	font-weight: bold;	width:57%;}
.props_table td {	padding: 5px 0;}
.props_table .char_value {	text-align: right;	width:38%;}
.props_table .char_name span, .props_table .char_value span {background: #fff; position: relative; zoom: 1; bottom: -10px;}
.props_block .char_name span{position: relative;	}
.props_table .char_name span {padding-right: 10px;}
.props_table .char_value span {padding-left: 10px;}
.char_name .hint .icon, .bx_filter_parameters_box_title .hint .icon { display: inline-block; position: absolute; z-index: 205; cursor: pointer; left: -35px; text-align: center; padding: 0; top: -1px; height: 14px; width: 14px; line-height: 12px;}
.props_list .char_name .hint .icon { top: 0px; }
.char_name .hint .icon:hover i, .char_name .hint.active .icon i { color: #fff; }

.char_name .hint .icon i, .bx_filter_parameters_box_title .hint .icon i{ font-weight: 100; line-height: 14px; cursor: pointer; font-size: 10px; text-align: center; font-style: normal;padding-right:1px;}
.char_name .hint .tooltip, .bx_filter_parameters_box_title .hint .tooltip{display: none;}
.bx_filter_parameters_box_title .hint .tooltip{ left: -10px; /*top: 27px;*/ top: initial; bottom: 27px; z-index: 200; color: #888;}
.bx_filter_parameters_box_title .hint .tooltip:after { top: initial; bottom: -16px; border-top-color: #fff; border-bottom-color: transparent; }
.tooltip { position: absolute; left: -53px; top: 24px; line-height: 14px; z-index: 202; display: none; padding: 17px 20px 19px; min-width: 21px; max-width: 200px; font-size: 12px; -webkit-border-radius: 2px; -moz-border-radius: 2px; 	border-radius: 2px; font-weight: 400; box-shadow: 0px 0px 15px rgba(0,0,0,.12); background: #fff; }
.tooltip:after { content: ''; position: absolute; width: 0; height: 0; border: 11px solid transparent; border-bottom-color: #fff; left: 14px; top: -16px; }
.char_name .hint .triangle, .bx_filter_parameters_box_title .hint .triangle{display: none;}
.char_name .hint.active .triangle, .bx_filter_parameters_box_title .hint.active .triangle{position: absolute; top: 19px; left: 5px; z-index: 100; display: inline-block; width: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; }
.bx_filter_parameters_box_title .hint.active .triangle{ position: inherit; top: inherit; left: inherit; margin: 0 0 -10px -12px; }
.tooltip .tooltip_close{ font-size: 15px; text-align: center; height: 16px; width: 16px; display: inline-block; top: 2px; right: 2px; position: absolute; cursor: pointer;}
.catalog_detail .offers_table tr td.str{	text-align: left; }
.catalog_detail .offers_table .cost.prices .price { float: none; }
.catalog_detail .offers_table .offer_stores td{	padding: 0;	border-bottom: 0;}
.opener_icon, .opener_icon i { display: inline-block; height: 29px; width: 29px; cursor: pointer; vertical-align: middle; border-radius: 100%; -moz-border-radius: 100%; -webkit-border-radius: 100%; }
.opener_icon { background: #eef1f1; }
.opener_icon.no_bg { background: none; }
.opener_icon i { background: url(../images/arrows.png) 8px -188px no-repeat; }
.opener_icon.no_bg  i { background: url(../images/arrows.png) 8px -255px no-repeat; }
.opener_icon.opened  i { background-position: -25px -190px; }
.catalog_detail .offers_table td.opener:hover .opener_icon i, .opener_icon:hover i, h4:hover .opener_icon i, .faq.list .item .q:hover .opener_icon i, .jobs_wrapp .item .name tr:hover .opener_icon i { background-position: 8px -210px; }
.catalog_detail .offers_table td.opener:hover .opener_icon.opened i, .opener_icon.opened:hover i, .opener_icon.opened.no_bg:hover i, h4:hover .opener_icon.opened i, .faq.list .item.opened .q:hover .opener_icon i, .jobs_wrapp .item.opened .name tr:hover .opener_icon i { background-position: -25px -212px; }
.opener_icon.opened.no_bg  i { background-position: -24px -257px; }
.catalog_detail .offers_table thead td{ text-align: center !important; }
.catalog_detail .offer_stores .stores_block_wrap{ display: none; margin-top:0; }
.catalog_detail .offer_stores .stores_block_wrap{ margin: 0 0 10px; }
/*.catalog_detail .offers_table {border-bottom: 1px solid #e7e7e7;}*/
.catalog_detail .offers_table  .opener{ cursor: pointer; width: 20px; }
.store_map .module-map{ float: left; width: 60%; margin-bottom: 20px; padding-right: 30px;   box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; }
.store_map .store_description { padding-left: 60%; margin-bottom: 20px; }
.store_map .store_description .store_property{ width: 49%; display: inline-block; vertical-align: top; padding-right: 20px; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; }
.store_map .store_image img{ margin-top: 5px; margin-right: 5px; border: 2px solid #c8c8c8; }
.store_map .store_image img:hover{ border: 2px solid #ffcc00; }
.store_map .stores_images{ clear: both; }
.store_map .stores_images.multiple .store_image{ display: inline-block; margin-right: 10px; }
.module-authorization, .registraion-page{ margin: 20px 0 20px; }
.authorization-cols{ overflow:hidden; }
.authorization-cols .col{ display:inline-block;  vertical-align:top; }
.authorization-cols .col.authorization{ width: 49%;  padding-right: 40px; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; }
.authorization-cols .col.registration{ width: 50%;  box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; }
.authorization-cols 	.auth-title{ font-size:22px;  line-height:26px;  margin: 0 0 13px 0; overflow: hidden; text-overflow: ellipsis; }
.authorization-cols .col.authorization .form-block  #avtorization-form-page { padding: 20; }
.authorization-cols .auth-title { font-size: 22px; line-height: 30px; margin: 0 0 13px 0; overflow: hidden; text-overflow: ellipsis; }

.form-block .but-r .remember{ float: left; }
.form-block .but-r .remember label {  font-size:12px; padding: 0px 0px 0px 23px; margin: 0px; }
.filter .remember input[type="checkbox"] + label:after, .filter .remember input[type="checkbox"] + label:before { top: 2px; }
.filter.label_block input[type="checkbox"] + label:before, .filter.label_block input[type="checkbox"] + label:after{ top: 3px; }

.authorization-cols .col.authorization .soc-avt .row { margin-top: 5px; }
.authorization-cols .col.authorization .soc-avt { zoom: 1; position: relative; padding: 15px 20px 10px 20px; border-bottom: 0; font-size: 12px; }
.authorization-cols .col.authorization div.error { left:330px; }
.authorization-cols .col.registration p{ margin-bottom:21px }
.form-block .intro{ padding: 22px 50px 20px 30px; font-size: 19px; line-height: 20px; }
.authorization-cols .form_wrapp{ padding: 20px; }
.soc-avt .row a span.name, .soc-serv-main .row a span.name { vertical-align: top; }
.form-block-title, .cart_empty .title{ font-size: 22px; line-height: 24px; font-weight: normal; margin-bottom: 20px; }
span.form-block-title{display:inline-block;vertical-align:top;*display:inline;zoom:1;}
.module-form-block-wr .form-block { /*padding: 20px 20px 0 20px;*/ }
.module-form-block-wr.order_cancel .form-block{ padding: 20px; }
.module-form-block-wr.order_cancel textarea{ margin: 5px 0 15px; }
.module-form-block-wr .form-block label{ padding:1px 0 0 2px;  margin:0 0 5px; }
.module-form-block-wr .form-block .r{ width: 59%;  margin-bottom:18px; }
.module-form-block-wr .form-block .r #LOCATION_PERSONAL_CITY select{ margin-top: 10px; }
.module-form-block-wr .form-block .r #LOCATION_PERSONAL_CITY select:first-child { margin-top: 0; }
.module-form-block-wr .form-block .r.register-captcha img{ margin-bottom: 15px; }
.module-form-block-wr .form-block .r div.error{ top:23px; }
.module-form-block-wr .form-block .r.pass{ width:235px; }
.module-form-block-wr .form-block  input, .module-form-block-wr .form-block  textarea{ width: 100%; }
.module-form-block-wr .form-block  textarea{ height:98px; }

.module-form-block-wr .form-block .pr{ font-size:11px; margin:5px 0 -5px 3px; line-height:16px; margin-bottom: 0px; }
.module-form-block-wr .form-block .pr.em{ margin:8px 0 -5px 3px; }
.module-form-block-wr .form-block .but-r{ padding:0; margin:-3px 0 20px; }

.module-form-block-wr .form-block   .prompt{ float: left; margin-top: 6px; }
.form-block   .prompt { font-size: 11px; }
.form-block .prompt .star{ font-size: 32px; position: relative; vertical-align: middle; top: 6px; }
.module-form-block-wr .soc-serv-main{ padding: 33px 43px 15px; margin: 45px -43px 0px -43px; border-top: 1px solid #E5E5E5; }
.module-form-block-wr .soc-serv-main .soc-serv-split-title-grey { margin-bottom: 5px; }
.module-order-history.orderdetail .module-orders-list tr td:first-child { text-align: left; border-right-width: 0px; }
.module-order-history.orderdetail .module-orders-list tr td:last-child { border-left-width: 0px; }
.module-order-history.orderdetail .module-orders-list tr.gn td{ text-align:center; }
.module-order-history.orderdetail .t {font-size: 18px;line-height: 20px;margin: 0;padding: 20px 0 20px 35px;text-align: center;}
.module-order-history.orderdetail .module-orders-list.result td { background: none repeat scroll 0 0 rgba(0, 0, 0, 0) !important; font-size: 13px; font-weight: bold; }
.module-order-history.orderdetail .module-orders-list.result td.custom_t2 { padding-right: 35px; text-align: right; padding-left: 15px; }
.module-order-history.orderdetail .module-orders-list.result tr:first-of-type{	border-top-color:transparent !important;}
.module-order-history .module-orders-list{ width: 100%; }
.module-order-history .module-orders-list td.drop-cell{ display: none; text-align: left; padding: 0; }
.module-order-history .module-orders-list .drop-container{ display: none; }
.module-order-history .module-orders-list .drop-container .item-shell { width: 100%; }
.module-order-history .module-orders-list .drop-cell .not-payed{ margin: 0; padding: 5px 35px; }
.module-order-history .module-orders-list .drop-cell .t{ margin: 0; padding: 5px 0 5px 35px; font-weight: bold; }
.module-order-history .module-orders-list td.drop-cell .item-shell th{ padding-bottom: 0; }
.module-order-history .module-orders-list td.drop-cell .item-shell td:first-child{ text-align: left; padding-left: 35px; }
.module-order-history .module-orders-list td.drop-cell .item-shell td{ padding: 5px; text-align: center;}
.module-order-history .history-table{margin: 17px 0 0 0;}
.module-order-history .history-table > tbody > tr > td{padding: 11px 0;}
.module-order-history .history-table .drop-cell{padding:0; border:none;}
.module-order-history .drop-cell .result-row { padding: 24px 20px 17px 35px; }
.module-order-history .result-row a.button { margin-right: 12px; }
.module-order-history .result-row a.button:last-child { margin-right: 0px; }
.module-order-history .result-row .result { float: right; padding: 0px 10px 0px 0px; }
.module-order-history .result-row .result table{ margin-bottom: 0px; }
.module-order-history .result-row .result .r{ padding-left: 15px; position: relative; /*bottom: -2px;*/ }
.module-order-history .result-row .result .title{ font-weight: bold; }
.module-order-history .drop-cell .result-row .alert{ padding-left:19px;  font-size:11px; position:relative; }
.module-order-history tr.tr-d.o > td, 	.module-order-history tr.tr-d.o > td a, .module-order-history tr.tr-d.o > td span{ color:#fff !important; }
.module-orders-list .order-extra-properties{ text-transform: lowercase; }
.module-orders-list .order-extra-properties, .module-orders-list .item-extra-properties{ display: none; }
.module-orders-list .order-extra-properties .item{ white-space: nowrap; display: inline-block; }
.module-cart .cost-cell .discount strike, .module-cart .cost-cell .price_name,  .cart_shell .cost-cell .price.discount *{ line-height: 14px; font-family: Ubuntu, Arial, Helvetica, sans-serif; }
.module-order-history .item_name .icon { background: none; margin: 0px 5px 0px 0px; }
.module-order-history ul.tabs{ margin-left: 20px; }
.module-order-history ul.tabs li.cur span{ border: 0; }
.module-order-history ul.tabs li span{	padding-top: 8px; text-transform: none; font-family: Ubuntu, Arial, Helvetica, sans-serif; border-bottom: 1px solid #b4b4b4; }
.module-order-history .item_name{ cursor: pointer; display: inline-block; white-space: nowrap; }
.module-order-history .item_name .name{ font-size: 14px; font-weight: 600; position: relative; top: 1px; }
.module-products-list td, .module-orders-list td { padding: 7px 0 6px 10px; vertical-align: middle; }
.module-orders-list td { text-align: left; }

.module-order-history .order-status-cell, .module-order-history .order-status-th{ width: 160px; }
.module-order-history .item-name-cell, .module-order-history .item-name-th{ text-align: left; padding-left: 8px; }
.module-order-history .item-name-th{ padding-left: 19px; }
.module-order-history .item-name-cell{ font-weight: bold; padding-left: 13px; }
.module-order-history .module-orders-list .tr-d td { cursor: pointer; }
.module-order-history .tr-d:hover .item_name:hover .icon i, .module-order-history .tr-d .item_name:hover .icon i { background-position: 8px -210px; }
.module-order-history .tr-d.opened .item_name:hover .icon i { background-position: -25px -212px; }
.module-order-history .tr-d.opened .item_name .icon i { background-position: -25px -190px; }
.module-order-history td { border-left: 1px solid transparent; border-right: 1px solid transparent; }
.module-orders-detail{width:100%;box-shadow: 0 1px 2px #e7e7e7;}
.module-orders-detail tr{ border:1px solid #e7e7e7; }
.module-order-history .module-orders-list .tr-d{ border-top: 1px solid transparent; transition: none 0s ease 0s;}
.module-order-history .module-orders-list .tr-d:last-child td{ border-bottom: 0; }
.module-order-history .drop-container .item-shell thead td:first-child{ border-left: 0; }
.module-order-history .drop-container .item-shell thead td:last-child{ border-right: 0; }
.module-order-history .result-row .result td{ border: 0; padding: 0 0 0px; text-align: left; }
.module-order-history .drop-cell .result-row .result .name { text-align: right; }
.module-order-history .order_property { font-weight: bold; }
.module-order-history .module-pagination{ margin-top: 20px; }
.module-order-history .pagination-separator{ display: none; }
.popup .form-description-wrapp{ padding: 10px 30px 10px 30px; }
.cart_confirmation { margin-top: 25px; }
.cart_empty .img{ width: 150px; }
.basket_fly #header .cart_empty{ margin: 20px 20px 23px 15px; }
.cart_empty .img_wrapp{ width: 180px; }
#order_form_div .sale_order_table .ps_logo img:hover, #order_form_div .sale_order_table .ps_logo input[type=radio]:checked + label img {cursor: pointer;padding: 0;}
#order_form_div form .title.summary {border-bottom: 0;margin-bottom: 0;}
#order_form_div .sale_data-table th {padding: 10px;font-weight: normal;}
#order_form_div .section table.colored.summary{width: 100%;box-sizing: border-box;-moz-box-sizing: border-box;-o-box-sizing: border-box;-webkit-box-sizing: border-box;}
.summary .cost_cell, .summary .order_item_weight {white-space: nowrap;}
#new_basket{ display: none; }
.page_not_found { margin-top: 70px; }
.page_not_found td { vertical-align: top; }
.page_not_found td.image { width: 60%; }
.page_not_found td.image img { max-width: 100%; }
.page_not_found td.description { text-align: center; padding-top: 40px; }
.page_not_found td.description .title404 { font-size: 44px; line-height: 48px; }
.page_not_found td.description .subtitle404 { text-transform: uppercase; font-size: 18px; line-height: 24px; }
.page_not_found td.description .back404, .page_not_found td.description .back404 a { font-size: 12px; }
.page_not_found td.description .back404 a { text-decoration: underline; }
.page_not_found td.description .descr_text404 { font-size: 13px; line-height: 20px; margin-top: 20px; }
.page_not_found td.description .subtitle404, .page_not_found td.description .descr_text404, .page_not_found td.description .back404, .page_not_found td.description .back404 a{ font-family: Ubuntu, Verdana, Arial, Helvetica, sans-serif; }
.page_not_found td.description .btn_big{ margin-top: 20px; }
.page_not_found td.description .back404{ margin-top: 5px; }
.catalog_detail .set_block .title{ font-size: 20px; margin-bottom: 29px; font-weight: 500; }
.set_block .cost .price:not(.discount) { padding: 0px; }

.catalog_detail .bx_item_set_hor_container_big .title{ line-height: 30px; }
.catalog_detail .set_block { padding: 26px 29px 34px; border-top: 1px solid #E7E7E7; }
.catalog_detail .set_block .item{  }
.catalog_detail .bx_item_set_hor_container_big .total_wrapp{ clear: left; }
.catalog_detail .set_block .item, .bx_modal_body .bx_kit_item { width: 79%; min-width: 180px; -webkit-transition: box-shadow ease-out 0.2s; -moz-transition: box-shadow ease-out 0.2s; -o-transition: box-shadow ease-out 0.2s; transition: box-shadow ease-out 0.2s; padding: 0px; display: inline-block; vertical-align: top; position: relative; zoom: 1; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; margin: 0px 13px 5px 0px; width: 180px !important; }
.set_block .result_block .item { margin-right: 0px; margin-top: 55px; }
.set_block .item .item_inner { padding: 20px 20px 15px; }
.set_block .result_block .item .item_inner { padding-right: 0px; }
.set_block .bx_modal_body .item .item_inner { padding-bottom: 13px; }
.set_block .bx_modal_body .slider_wrapp .item .item_inner { padding-bottom: 13px; }
.set_block .item.main_item  .item_inner { padding: 19px 19px 14px; }
.bx_modal_body .bx_kit_item:hover{ padding: 0; }
.bx_item_set_hor .bx_item_set_hor_item{ margin-right: 0; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; display: inline-block; vertical-align: top;	 position: relative; zoom: 1; margin-bottom: 15px; min-width: 150px;}
.bx_item_set_hor li{	display: inline-block;}
ul li.stretch{ display: inline-block; width: 100%; zoom: 1; margin: 0 !important; padding: 0 !important;}
.bx_item_set_hor .bx_item_set_hor_item .bx_item_set_img_container, .bx_kit .bx_kit_img_container{ box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; width: 100%; }
.bx_item_set_hor .bx_item_set_hor_item.equally  .item_wrapp{ width: 100%; }

.bx_item_set_hor .bx_item_set_hor_item .item_wrapp.main_item{ border-radius: 2px; -moz-border-radius: 2px; -webkit-border-radius: 2px; padding: 0; border: 1px solid #efefef; }

.catalog_detail .set_wrapp .item:hover, .set_block .item:not(.r):hover{ box-shadow: 0px 0px 20px rgba(0,0,0,.1); }
.bx_modal_body .item_wrapp{ /*width: 21%;*/ display: inline-block; white-space: nowrap; margin-right: 0; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; display: inline-block; vertical-align: top; position: relative; zoom: 1; min-width: 180px; font-size: 0; }
.bx_modal_body .item_wrapp .item_block_title{ position: absolute; top: -41px; }
.bx_modal_body .item_block_title{ font-size: 16px; font-weight: 600; }
.bx_modal_body .bx_kit_one_section{ margin: 0; padding: 0; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; width: 100%; font-size: 0; white-space: nowrap; text-align: justify; }
.catalog_detail .set_block .separator, .bx_modal_body .separator { display: inline-block; position: relative; width: 13px; margin: 0px 10px 0px 0px; min-height: 140px; }
.catalog_detail .set_block .separator:after, .bx_modal_body .separator:after { content: ""; display: block; position: absolute; top: 50%; margin-top: 13px; width: 15px; height: 15px; background: url(../images/icons_wish.png) -116px -206px no-repeat; }
.set_block .equally .separator:after, .set_block .item_equally.separator:after { background-position: -158px -206px; }
.catalog_detail .set_wrapp .item .image, .bx_item_set_hor .bx_item_set_hor_item  .bx_item_set_img_container a,
.bx_modal_body .bx_kit_item .image a, .bx_kit .bx_kit_img_container a, .bx_modal_body .bx_kit_item .image, .bx_kit .bx_kit_img_container{ display: block; vertical-align: middle; height: 140px; line-height: 140px; vertical-align: middle; text-align: center; position: relative; zoom: 1; margin: 0px 0px 20px; }
.catalog_detail .set_wrapp .item .image img, .bx_item_set_hor .bx_item_set_hor_item  .bx_item_set_img_container img, .bx_modal_body .bx_kit_item .image img,
.bx_kit .bx_kit_img_container img{ position: absolute; margin: auto; top: 0; bottom: 0; left: 0; right: 0; border: 0; border-radius: 5px; -moz-border-radius: 5px; -webkit-border-radius: 5px; }
.catalog_detail .set_block .item .item-title a , .bx_item_set_hor .bx_item_set_hor_item .item-title a, .bx_modal_body .bx_kit_item  .item-title a{	text-decoration: none;}
.catalog_detail .set_block .item .item-title a span, , .bx_item_set_hor .bx_item_set_hor_item .item-title a span{	font-size: 12px;	line-height: 15px;}
.set_block .item .cost.prices .price, .bx_item_set_hor .bx_item_set_hor_item .price, .bx_modal_body .bx_kit_item .price{	font-size: 18px; line-height: 19px;}
.bx_item_set_hor .bx_item_set_hor_item .price, .bx_modal_body .bx_kit_item .price{	margin-top: 5px;}
.bx_item_set_hor .bx_item_set_hor_item .price.discount, .bx_modal_body .bx_kit_item .price.discount{	margin-top: 0;}

.catalog_detail .set_block .item_info .item-title span, .bx_item_set_hor .bx_item_set_hor_item_info .item-title span{	line-height: 16px;}
.catalog_detail .bx_item_set_hor_container_big .popup_open{ float: right; clear: none; margin: -4px 0px 0px; }
.set_block .item-title a { font-size: 12px; }

.catalog_detail .bx_item_set_hor_container_big .total_wrapp .total_title{ font-size: 14px; display: inline-block; }
.set_block .item .total_wrapp .cost .price, .bx_kit_result_two .price, .bx_kit_result_one .price, .bx_kit_result_tre .price, .bx_kit_result_two .price *,
.bx_kit_result_one .price *, .bx_kit_result_tre .price *{ font-size: 28px; line-height: 28px; font-weight: 600; display: inline-block; float: none; margin: 0px 0px 3px; }
.catalog_detail .bx_item_set_hor_container_big .total_wrapp .total_price{ vertical-align: bottom; }
.set_block .total_wrapp .buttons_wrapp{ margin: 20px 0px 0px; }
.catalog_detail .bx_item_set_hor_container_big .total_wrapp .total_buttons .buttons_wrapp .one_click { margin-left: 10px; }
.set_block .item .total_wrapp .price.discount, .set_block .item .total_wrapp .price.discount * { font-size: 16px; line-height: 18px; display: block; font-weight: 400; margin: 0px 0px 12px; }
.bx_item_set_hor .bx_item_set_hor_item a.remove { display: none; position: absolute; top: -10px; left: -10px; }
.bx_item_set_hor .bx_item_set_hor_item:hover a.remove { display: inline-block; }

/*popup set*/
div[id^="CatalogSetConstructor"]  .popup-window { border: 0; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; overflow: hidden; width: 1104px; }
.popup-window.popup-window-titlebar .popup-window-top-row .popup-window-left-column,
.popup-window.popup-window-titlebar .popup-window-top-row .popup-window-center-column,
.popup-window.popup-window-titlebar .popup-window-top-row .popup-window-right-column,
.popup-window.popup-window-titlebar-light .popup-window-top-row .popup-window-left-column,
.popup-window.popup-window-titlebar-light .popup-window-top-row .popup-window-center-column,
.popup-window.popup-window-titlebar-light .popup-window-top-row .popup-window-right-column { border-top: 0; box-shadow: none; -moz-box-shadow: none; -o-box-shadow: none; -webkit-box-shadow: none; background: #fff; border-bottom: 2px solid; }

.popup-window-content{ margin: 0; }
.bx_modal_container{ padding: 25px 25px; }
.bx_modal_container  .bx_modal_body{ margin-top: 41px; }
.bx_modal_container .bx_modal_description{ display: inline-block; margin: 0px 0px 0px 24px; font-size: 12px; }
.bx_modal_container .bx_modal_small_title{ display: block; font-size: 17px; }
.bx_item_set_hor_container_big .bx_item_set_del, .bx_kit_item .bx_kit_item_del { display: none; height: 24px; width: 24px; top: -9px; left: -9px; position:absolute; border-radius: 25px; -moz-border-radius: 25px; -webkit-border-radius: 25px; cursor: pointer; }
.bx_item_set_hor_container_big .bx_item_set_del:after, .bx_kit_item .bx_kit_item_del:after{ content: "."; font-size: 0; display:block; width: 21px; height:21px; background: url(../images/close_icons.png) -30px 4px no-repeat; cursor: pointer; }
.popup-window-titlebar h2 { margin: 0px; padding: 34px 24px 33px; }
.bx_kit_two_section{ margin-top: 15px; }
.bx_kit_two_section .title{ margin: 25px 0 11px 10px; display: inline-block; }
.bx_kit_two_section .triangle, .bx_kit_two_section .triangle i{ width: 0; height: 0; display: inline-block; border-bottom: 5px solid #e6e6e6 !important; margin: 0 auto; }
.bx_kit_two_section .triangle{ margin: 0 auto; text-align: center; position: absolute; top: -16px; border-left: 10px solid transparent; border-right: 10px solid transparent; border-top: 9px solid transparent; border-bottom: 9px solid #e6e6e6 !important; }
.bx_kit_two_section .triangle i{ top: -4px; left: -9px; position: relative; border-left: 9px solid transparent; border-right: 9px solid transparent; border-top: 7px solid transparent; border-bottom: 7px solid #fafafa !important; }
.bx_kit_item_empty:hover { box-shadow: none; -moz-box-shadow: none; -o-box-shadow: none; -webkit-box-shadow: none; }
.bx_kit_item .bx_kit_item_add{ position:absolute; top:  -10px; right:-10px; display:block; width: 24px; height:24px; cursor:pointer; border-radius: 2px; -moz-border-radius: 2px; -webkit-border-radius: 2px; display:none; 	background: #ddd; }
.bx_kit_item_add:after{ content: "."; font-size: 0; display: block; width: 27px; height: 27px; background: url(../images/icons_wish.png) -178px -211px no-repeat; cursor: pointer; }

.bx_kit_two_section .slider_wrapp { position: relative; }
.bx_kit_two_section .slider_wrapp .flex-direction-nav  { position: absolute; top: -34px; right: 26px; font-size: 0px; }
.bx_kit_item_slider_arrow_left.disabled, .bx_kit_item_slider_arrow_right.disabled{ opacity: .5; }
.bx_modal_container.bx_kit{ padding-bottom: 30px; }
.bx_kit_one_section .bx_kit_item_discount{right:0; left: 0; z-index: 111; }
.bx_kit_two_section { position: relative; border-top: 1px solid #e5e5e5; margin: 15px -30px -30px; padding: 0px 6px 0 20px; box-sizing: border-box; -moz-box-sizing: border-box; -o-box-sizing: border-box; -webkit-box-sizing: border-box; background: #f7f7f7; }
.bx_kit_item_empty{ background:#f7f7f7; border: 1px solid #e5e5e5; }
.bx_kit_two_section_ova{ position:relative; overflow: hidden; padding-top: 15px; padding-bottom: 30px; width: 100%; white-space:nowrap; }
.bx-touch .bx_kit_two_section_ova{ overflow-x:auto }
.bx_kit_two_item_slider{ position: relative; text-align: left; }
.bx_kit_item_slider{ position:relative; float:left; -webkit-box-sizing:border-box; -moz-box-sizing:border-box; box-sizing:border-box; padding-left: 10px; }
.bx_kit_item_slider .bx_kit_item{ z-index:112; padding: 0px 0px 0px 0px; margin-right: 0px; background:#fff; }
.bx_kit_item_slider_drag { box-sizing:border-box; -webkit-box-sizing:border-box; -moz-box-sizing:border-box; background-color: #fff; position: relative; z-index: 115; padding: 10px; background: #fafafa; border: 1px solid #e7e7e7; }
.bx_kit_item_slider_drag  .bx_kit_item_add{display: none !important; }
.bx_kit_item_slider_drag *, .bx_kit_item_slider_drag { height: auto !important; }
#basket_line .basket_hidden{ display: none; }
.header-cart-block .cart .delay_link { text-decoration: underline; }
.header-cart-block .cart .delay_link, .header-cart-block .cart .delay_link * { font-family: Ubuntu, Arial, Helvetica, sans-serif; font-size: 11px; }
.header-cart-block .cart .delay_link .icon { display: inline-block; height: 18px; 	width: 19px; background: url(../images/basket_icons.png) -56px -12px no-repeat; }
.header-cart-block .cart .delay_link:hover .icon { background-position: -56px -138px; }

.one_click_buy_result_success, .one_click_buy_result_fail { display: none; }
.search-page form { display: inline-block; margin-bottom: 20px; padding: 15px 20px 17px; }
.search-page form input[type="text"] { height: 30px; position: relative; zoom: 1; bottom: -1px; }
.basket_button.to-subscribe span, .basket_button.in-subscribe span, .basket_button.to-order span { background: none; padding-left: 6px; width: 92px; text-align: center; }
.catalog_detail .item_main_info .buttons_block .basket_button.to-subscribe span, .catalog_detail .item_main_info .buttons_block .basket_button.in-subscribe span { padding-left: 3px; width: 90px; text-align: center; }
.order-checkout label{display:inline-block;}
.order-checkout label.error{position: relative;top:inherit;right:inherit;width:100%;text-align:right;}
.order-checkout label img{pointer-events: none;}
.fancybox-lock .fancybox-overlay {overflow: auto;}

/*buttons*/
button.button, input.button, .button { opacity: 1;font-weight: 400;cursor: pointer; font-size:13px; line-height: 16px; text-transform: none; background: #ddd; color: #000; text-decoration: none; -webkit-border-radius: 2px; -moz-border-radius: 2px; border-radius: 2px; text-align:center; padding: 8px 11px 9px; display: inline-block; border: none; outline: none; position: relative; font-family: "Ubuntu",Arial,Helvetica,sans-serif; /*letter-spacing: 0.4px;*/ width: auto; vertical-align: middle; }
.bx-firefox .button, .bx-ie .button { padding-top: 8px; padding-bottom: 9px; }
.button:hover { color: #fff; }
.button.type_block { /*display: block;*/ }
.button.transparent { color:#ddd; border:1px solid #ddd; background: none; padding-top: 7px; padding-bottom: 8px; }
.bx-firefox .button.transparent, .bx-ie .button.transparent { padding-top: 7px; padding-bottom: 8px; }

.button.icon { text-indent: -9999px; background: none; border: 0px; }
.button.wicon { padding: 10px 20px 9px 13px; }
.button.wicon i { display: inline-block; width: 11px; height: 15px; background: url('../images/icons_wish.png') -49px -4px no-repeat; vertical-align: middle; margin: 0px 8px 0px 0px; }
.button.noborder { background: none; border: 0px; }
.button.transparent:hover { background: none; color: inherit; }
.button.transparent.grey_br:not(.text):hover { color: #6d6d6d; }
.button.big { padding:10px 30px; }
.button.big_btn { padding: 10px 21px 10px 20px; }
.button.vbig_btn { padding-top: 10px; padding-bottom: 11px; width: auto; }
.bx-firefox .button.vbig_btn, .bx-ie .button.vbig_btn { padding-top: 9px; padding-bottom: 10px; }
.bx-firefox .button.vbig_btn.transparent, .bx-firefox .button.vbig_btn.transparent { padding-top: 9px; padding-bottom: 10px; }
.button.vbig_btn.wides { padding-left: 20px; padding-right: 20px; width: auto; }
.button.big_btn.transparent { padding-top: 9px; padding-bottom: 9px; }
.button.vbig_btn.transparent { padding-top: 10px; padding-bottom: 9px; }
.button.long.transparent.big_btn { padding-top: 10px; padding-bottom: 9px; }
.button.bold.big_btn { padding-bottom: 11px; }
.button.bold.big_btn.transparent { padding-top: 10px; padding-bottom: 9px; }
.button.big_btn.in-cart { padding-top: 10px; padding-bottom: 9px; }
.bx-firefox .button.big_btn, .bx-ie .button.big_btn { padding-bottom: 10px; }
.bx-firefox .button.big_btn.transparent, .bx-ie .button.big_btn.transparent { padding-bottom: 9px; }
.button.big_btn span, .button.bold { font-size: 13px; font-weight: 600; }
.button.medium { padding: 10px 13px 12px; }
.bx-firefox .button.medium, .bx-ie .button.medium { padding: 9px 13px 10px; }

.button.wide { padding: 14px 20px 13px; }
.button.short { padding: 11px 20px 10px; }
.bx-firefox .button.short, .bx-ie.button.short { padding-top: 9px; }

.button.msmall { padding: 9px 11px 9px 11px; }
.button.msmall.transparent { padding: 8px 13px 8px 13px; }
.button.small { padding: 6px 11px 8px 11px;    /*height: 16px;*/}
.bx-firefox  .button.small, .bx-ie  .button.small {padding: 6px 11px 8px;}
.button.small.transparent { padding-top: 6px; padding-bottom: 6px; }
.bx-firefox .button.small.transparent, .bx-ie .button.small.transparent {padding: 6px 13px 6px;}
.button.vsmall { padding: 5px 12px 6px 12px; }
.button.sbold { font-weight: 500; }
.button.wide.transparent { padding: 13px 20px 12px; }
.button.medium.transparent { padding: 9px 13px 11px; }
.bx-firefox .button.medium.transparent {padding: 8px 13px 9px;}
.bx-ie .button.medium.transparent{padding-bottom: 10px; padding-top: 10px;}
.bx-ie .button.medium{padding-top:10px; padding-bottom:11px; }
.button.transparent.white { color: #fff; border-color: #fff; }
.button.transparent.white:hover, .bx_filter  .button.white_bg:hover, .button.white_bg {  background: #fff; border-color: #fff; }
.button.transparent.white.video:hover:before { /*display: none;*/ }
.button.basket { /*float: left;*/ }
.button.video::before { content: ""; background: url('../images/top_icons_flex.png') 0px 0px no-repeat; display: inline-block; width: 7px; height: 7px; margin: 0px 6px 0px 0px; }
.button.back_button, .button.grey { background: #b0c3cc; }
.button.grey_br.transparent, .button.grey_br.transparent:hover, .button.grey_br span { color: #6d6d6d; border-color: #e5e5e5; }
.button.back_button span { text-shadow: 0 1px 1px #69808c; -moz-text-shadow: 0 1px 1px #69808c; -o-text-shadow: 0 1px 1px #69808c; -webkit-text-shadow: 0 1px 1px #69808c; }
.button.fast_order { padding: 10px 20px 9px; }

/*flex arrow*/
.flex-direction-nav li:first-child, .flex-direction-nav li, .flex-direction-nav li:hover { border-bottom-width: 0px !important; }
ul.slider_navigation { right: 0px; position: absolute; top: 0px; z-index: 1;margin:0px; }
ul.slider_navigation ul{margin:0px;}
.bx-ie .specials_slider_wrapp ul.slider_navigation.top { top: 27px; }
ul.slider_navigation.top { top: 18px; }
.bx-ie ul.slider_navigation.top { top: 18px; }
ul.slider_navigation.top_big { top: 21px; }
ul.slider_navigation.compare { position: initial; }
ul.slider_navigation.compare li { position: absolute; z-index: 10; top: -14px; }
ul.slider_navigation.compare li:not(.disabled) { cursor: pointer; }
ul.slider_navigation.compare .flex-nav-prev { left: 0px; }
ul.slider_navigation.compare .flex-nav-next { right: 0px; }
.flex-direction-nav li, .flex-direction-nav li a, .flex-direction-nav li span { width: 29px; height: 29px; -webkit-border-radius: 15px; -moz-border-radius: 15px; border-radius: 15px; display: inline-block; }
.bx-ie .flex-direction-nav li, .bx-ie  .flex-direction-nav li a, .bx-ie  .flex-direction-nav li span { font-size: 0px; line-height: 0px; }
.flex-direction-nav li { border-bottom-width: 0px; }
body .flex-direction-nav li:first-child, body .flex-direction-nav li { /*background: none;*/ }
.flex-direction-nav li:first-child { margin-right: 5px; }
.flex-direction-nav li a, .flex-direction-nav li span{ background: url(../images/arrows.png) 0px 0px no-repeat; }
.flex-direction-nav li:not(.disabled) span { cursor: pointer; }
.flex-direction-nav li .flex-prev { background-position: 10px -50px; }
body .flex-direction-nav li:hover  .flex-prev, body .dark .flex-direction-nav li  .flex-prev{ background-position: 10px -26px; }
body .flex-direction-nav li .flex-next { background-position: -27px -50px; }
.flex-direction-nav li:hover .flex-next, .dark .flex-direction-nav li .flex-next { background-position: -27px -26px; }
.flex-direction-nav .flex-disabled { display: none; }

.border .flex-direction-nav{margin:0px;font-size:0px;line-height:0px;}
.border .flex-direction-nav li{border:1px solid #e5e5e5 !important;margin:0px;border-radius:0px;}
.border .flex-direction-nav li, .border .flex-direction-nav li a{width: 33px;height: 33px;}
.border .flex-direction-nav li:first-child{border-radius:2px 0px 0px 2px;}
.border .flex-direction-nav li:last-child{border-radius:0px 2px 2px 0px;}
.border.custom_flex .flex-direction-nav li:hover, .border.custom_flex .flex-direction-nav li:hover a{background-color:#f6f6f7 !important;}
.border.custom_flex .flex-direction-nav li a {background-position: 5px -18px ;}
.border.custom_flex .flex-direction-nav li:hover a {background-position: 5px 6px ;}
.border.custom_flex .flex-direction-nav li.flex-nav-next a {background-position: -70px -18px;}
.border.custom_flex .flex-direction-nav li.flex-nav-next:hover a {background-position: -69px 6px;}
.border.custom_flex .flex-direction-nav li.flex-nav-next{border-left-width:0px !important;}

.absolute .flex-direction-nav > li { position: absolute; top: 1px; }
.absolute .flex-direction-nav li.flex-nav-prev { left: -30px; }
.absolute .flex-direction-nav li.flex-nav-next { right: -30px; }

/*countdown*/
.view_sale_block { margin: 10px 0px 0px; white-space: nowrap; }
.view_sale_block > div { display: inline-block; vertical-align: top; font-size: 0px; }
.view_sale_block .title{ font-size: 10px; line-height: 15px; color: #666; margin: 0px 0px 5px; }
.view_sale_block .values { margin: 0px 0px 5px; line-height: 15px; font-size: 0px; }
.view_sale_block .values .item{ background: #eeeeee; border-radius: 2px; display: inline-block; vertical-align: top; font-weight: 600; font-size: 18px; width: 40px; height: 36px; padding: 4px 0px 0px; text-align: center; position: relative; margin: 0px 2px 0px 0px; }
.view_sale_block .values .item:last-child { margin: 0px; }
.view_sale_block .values .item:before, .view_sale_block .values .item:after { content: ""; background: #fff; width: 6px; height: 6px; display: block; position: absolute; right: -4px; border-radius: 6px; z-index: 10; }
.view_sale_block .values .item:last-child:before, .view_sale_block .values .item:last-child:after { display: none; }
.view_sale_block .values .item:before { top: 12px; }
.view_sale_block .values .item:after { bottom: 12px; }
.view_sale_block .values .item .text{ opacity: 0.6; font-weight: 400; font-size: 10px;display:block; }
.view_sale_block .count_d_block { margin: 0px 4px 0px 0px; }
.view_sale_block .quantity_block .values .item { background: #4f4f4f; color: #fff; }
.view_sale_block .countdown { width: 124px; height: 44px; display: block; overflow: hidden; }
.view_sale_block .values .item:nth-child(3):before, .view_sale_block .values .item:nth-child(3):after { display: none; }

/*tabs*/
.tabs-head { margin: 0; padding: 0; position: relative; font-size: 0; overflow: hidden; list-style-type: none; }
.tabs-head  li:before, .tabs_section .tabs-head  li:before { display: none; }
.tabs_section .tabs-head { margin: 0px; }
.tabs-head  li { display: inline-block; cursor: pointer; background: none; vertical-align: top; font-size: 14px; color: #333; opacity: 1; font-weight: 600; margin: 0; margin-right: 10px; padding: 11px 18px 14px 18px; margin-bottom: -1px; border: 1px solid rgba(0, 0, 0, 0); border-color: #e5e5e5; background: #f7f7f7; position: relative; }
.tabs_section .tabs-head  li { margin: 0px 4px -1px 0px;    border-radius: 2px 2px 0px 0px; }
.tabs_section .tabs-head  li:hover{background-color: #fff;}
.tabs_section .tabs-body { margin-top: -1px; }
.tabs_section .tabs-body > li { width: 100%; padding: 34px 0 20px; }
.tabs-head  li.current { background: #fff; z-index: 1; }
.tabs-head  li.current:before{content:"";display:block;height:2px;width:100%;position:absolute;top:0px;left:0px;right:0px;padding: 0px;margin: 0px;}
.tabs-head  li  span { line-height: 18px; display: inline-block; color: #444444; font-weight: 600; }
.tabs-body { border-top: 1px solid #e5e5e5; margin-top: -1px; position: relative; }
.tabs-body > li.current > div:last-of-type{margin-bottom:0;}

.border_block .block_wr { margin: 0px 0px 20px; color: #F00; }
.border_block .block_wr.alert-success {  color: #008000; }108  103565|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/css/styles.min.css|f4984a1a.noborder,.table-no-border{border-width:0}#footer .phone,.header-cart-block .cart .delay_link,.header-cart-block .cart .summ,.main-nav ul.menu>li>a,.top-h-row .phone,ul.mini-menu li a,ul.specials_slider{white-space:nowrap}.table-no-border,table.colored{border-collapse:collapse}*{font-family:Ubuntu,Arial,Helvetica,sans-serif}.table-no-border td{padding:0}#footer .bottom_submenu li:before,.bottom_main_menu li:before,.bx_kit_one_section li:before,.bx_kit_two_section li:before,.bx_modal_body .bx_kit_one_section li:before,.bx_modal_body .bx_kit_two_section li:before,.catalog_detail .bx_item_set_hor_container_big li:before,.catalog_detail .set_wrapp li:before,.compare_list ul li:before,.extended_pagination li:before,.flex-control-nav ol li:before,.flex-direction-nav li:before,.flex-viewport li:before,.internal_sections_list li:before,.item_slider ul.slides li:before,.main-nav li:before,.menu li:before,.module-gallery-list li:before,.section_item_inner ul li:before,.slider_navigation li:before,.tabs>li:before,.tabs_content>li:before,li.catalog_item:before,ul.brands_list li:before,ul.flex-control-nav li:before,ul.left_menu li:before,ul.stores_list li:before,ul.tabs-content li:before{content:none!important;padding-right:0}div[class^=bx-] li:before,ul[class^=bx-] li:before{content:none;padding-right:inherit}div[class^=bx-] button,div[class^=bx-] input[type=button],div[class^=bx-] input[type=submit]{text-transform:inherit;font-family:inherit;border:inherit}.catalog_detail .tabs_content h4{margin:10px 0 15px}#bx-composite-banner{text-align:center;margin:10px 0 0}.m16{margin:0;padding:0 0 18px;color:green}#content{position:relative;zoom:1}#content.main{margin-bottom:0}.catalog_detail .extended_info.open_stores .availability-row .value,.pseudo{text-decoration:none;border-bottom:1px dotted;cursor:pointer}.specials_slider_wrapp ul.tabs li{text-transform:uppercase}.specials_slider_wrapp ul.tabs li span{border-bottom:1px dotted}.tab_slider_wrapp ul.tabs li{padding-right:0}.catalog_section_list .section_item li.name{padding-left:0}.clearboth{clear:both}.clearleft{clear:left}.clearright{clear:right}.wrapper.has_menu .top-h-row .search{display:none}.top-h-row .search input[id^=title-search-input]{height:26px;font-size:12px;padding:0 8px;border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;border-width:1px;border-style:solid;width:100%;line-height:25px}.top-h-row .search #search-submit-button{cursor:pointer;height:24px;width:29px;font-size:0;border:0;border-radius:0 2px 2px 0;-moz-border-radius:0 2px 2px 0;-webkit-border-radius:0 2px 2px 0;position:absolute;top:0;right:0;margin-top:1px;display:block}#header ul.menu.full>li.search_row input[id^=title-search-input],.middle-h-row .search input[id^=title-search-input]{height:33px;font-size:12px;padding:0 10px;border-radius:3px;-moz-border-radius:3px;-webkit-border-radius:3px;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;width:100%;line-height:32px}#header ul.menu.full>li.search_row #search-submit-button,.middle-h-row .search #search-submit-button{cursor:pointer;height:31px;width:35px;font-size:0;border:0;border-radius:0 2px 2px 0;-moz-border-radius:0 2px 2px 0;-webkit-border-radius:0 2px 2px 0;position:absolute;top:1px;right:1px;display:block}#header ul.menu.full>li.search_row #search-submit-button{top:3px;right:3px;height:33px;width:35px}#header ul.menu.full>li.search_row{padding:3px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;border-radius:0 0 3px 3px;-moz-border-radius:0 0 3px 3px;-webkit-border-radius:0 0 3px 3px;position:relative;display:none}.wrapper.has_menu .main-nav{display:none}.main-nav .menu>li>a{border-bottom:1px solid transparent}#header ul.menu.full>li.search_row #search-submit-button i,.middle-h-row .search #search-submit-button i,.top-h-row .search #search-submit-button i{display:inline-block;background:url(../images/magnifier.png) no-repeat}#header ul.menu.full>li.search_row #search-submit-button i,.top-h-row .search #search-submit-button i{height:26px;width:29px;background-position:top center}@-moz-document url-prefix(){#header ul.menu.full>li.search_row #search-submit-button i,.top-h-row .search #search-submit-button i{width:26px}.middle-h-row .search #search-submit-button i{margin:-2px 0 0 -3px}}.middle-h-row .search #search-submit-button i{height:32px;width:35px;background-position:4px 4px}.basket_fly td.total_wrapp a.more_row .icon i,.card_popup_frame.popup a.more_row .icon i,table.title-search-result td.title-search-all a .icon i{background:url(../images/arrows.png) 2px -241px no-repeat}table.title-search-result td.title-search-all a .icon{margin-left:9px;border-radius:100%;-moz-border-radius:100%;-webkit-border-radius:100%;position:relative;bottom:-4px;zoom:1}.top-h-row .phone{float:right;width:25%;text-align:right;margin-top:1px}#footer .phone span.phone_text,#footer .phone span.phone_text a,.top-h-row .phone span.phone_text,.top-h-row .phone span.phone_text a{font-size:19px;white-space:nowrap}#footer .phone span.phone_text a,.top-h-row .phone span.phone_text a{cursor:default;text-decoration:none}#footer .phone .icon,#footer .phone .icon i,.top-h-row .phone .icon,.top-h-row .phone .icon i{display:inline-block;height:24px;width:24px;border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px}#footer .phone .icon,.top-h-row .phone .icon{position:relative;zoom:1;bottom:-5px;margin-right:2px}#footer .phone .icon i,.top-h-row .phone .icon i{background:url(../images/phone.png) no-repeat}#footer .phone .icon i{background-position:0 -24px}.price .title-search-price .price:not(.discount){margin-right:2px}div.title-search-result{display:none;overflow:hidden;z-index:205;min-width:133px;background:#fff;box-shadow:0 0 1px 1px #E5E5E5}table.title-search-result{border-collapse:collapse;border:none;width:100%}table.title-search-result td{background-color:#fff;padding-top:8px;padding-bottom:8px;text-align:left;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;-o-box-sizing:border-box;border-bottom:1px solid #e7e7e7;border-top:1px solid transparent;transition:none 0s ease 0s}table.title-search-result td.title-search-item{padding-left:8px;padding-right:15px;vertical-align:middle}table.title-search-result td.main a{vertical-align:top;text-decoration:none}table.title-search-result td.main .title-search-preview,table.title-search-result td.main a{max-width:230px;overflow:hidden;text-overflow:ellipsis;display:block}table.title-search-result td.main{padding-left:4px;width:242px;overflow:hidden;text-overflow:ellipsis;padding-right:14px}table.title-search-result td.picture{width:48px;padding-left:14px}table.title-search-result .cost.prices{margin:10px 10px 0 0}table.title-search-result .cost.prices .price.discount{margin-top:0}table.title-search-result img.item_preview{border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px;margin:2px 5px}table.title-search-result td.main b{font-weight:400}table.title-search-result tr.title-search-selected td{background-color:#F7F7F7;border-top:1px solid #e5e5e5;border-bottom:1px solid #e5e5e5}table.title-search-result td.title-search-more{font-size:11px;font-weight:400;padding-right:15px;padding-left:24px;padding-top:0}table.title-search-result td.title-search-more a{padding-left:12px;padding-right:15px;text-decoration:none}table.title-search-result td.title-search-all{padding:11px 13px 13px;border-bottom-width:0}table.title-search-result td.title-search-all a{text-decoration:none}table.title-search-result td.title-search-all a span.text{display:inline-block;height:14px}.basket_fly td.total_wrapp a.more_row .icon,.basket_fly td.total_wrapp a.more_row .icon i,.card_popup_frame.popup a.more_row .icon,.card_popup_frame.popup a.more_row .icon i,table.title-search-result td.title-search-all a .icon,table.title-search-result td.title-search-all a .icon i{display:inline-block;height:15px;width:15px}table.title-search-result td.title-search-separator,table.title-search-result th.title-search-separator{padding:0;height:10px;font-size:0}#header .catalog_menu,#header .middle-h-row{margin:0 auto;position:relative;zoom:1;z-index:3}#header .middle-h-row{z-index:202}#header .middle-h-row .logo_wrapp .logo{min-height:51px;line-height:51px;overflow:hidden;display:table-cell;max-width:220px}#header .basket_fly{-webkit-transform:translateZ(0)}#header .basket_fly td{box-sizing:content-box;-moz-box-sizing:content-box;-o-box-sizing:content-box;-webkit-box-sizing:content-box;text-align:left}ul.menu,ul.mini-menu{text-align:justify;list-style-type:none;font-size:0;line-height:0;zoom:1}.bx-ie ul.menu,.bx-ie ul.mini-menu{font-size:1px}ul.menu li,ul.mini-menu li{display:inline-block;vertical-align:top;padding:0;line-height:20px}.main-nav ul.menu>li>a,ul.mini-menu li a{font-size:14px;text-transform:uppercase;padding:0 10px;text-decoration:none;color:#000}ul.menu li.stretch{display:inline-block;width:100%;zoom:1}ul.menu li:hover .child{display:block}.breadcrumbs .drop:hover b.space,ul.menu li:hover b.space{display:inline-block}.wrapper .basket_normal,ul.menu li .child,ul.mini-menu,ul.mini-menu li .child{display:none}.module-drop-cart{position:absolute;right:0!important;top:87px;width:431px;max-width:100%;z-index:999;display:none}.wrapper.basket_normal .basket_normal{display:block}.header-cart-block .cart{width:230px;text-align:left;position:relative;zoom:1}.header-cart-block .cart_small,.header-cart-block .delay_small{display:none}.header-cart-block .cart a{text-decoration:none}.header-cart-block .cart a span{font-size:14px}.header-cart-block .cart.empty_cart a span.pseudo{border-bottom:1px solid}.header-cart-block .cart span.icon{float:left}.header-cart-block .cart>span.icon,.header-cart-block .cart>span.icon i{display:inline-block;height:42px;width:42px;border-radius:3px;-moz-border-radius:3px;-webkit-border-radius:3px}.header-cart-block .cart>span.icon.small,.header-cart-block .cart>span.icon.small i{width:26px;height:26px}.header-cart-block .cart>span.icon.small{display:none;position:relative;zoom:1;z-index:1}.header-cart-block .cart .cart-call.small,body .header-cart-block .cart .cart-call.small span{font-size:11px;line-height:15px;text-transform:uppercase;border:none}body .header-cart-block .cart .cart-call.small span{text-decoration:underline}.header-cart-block .cart .small{display:none}.header-cart-block .cart>span.icon.small i{background-position:-7px -173px}.header-cart-block .cart span.icon i{background-image:url(../images/basket_icons.png);background-repeat:no-repeat}.header-cart-block .cart.empty_cart span.icon i{background-position:0 0}.header-cart-block .cart.empty_cart span.icon.small i{background-position:-7px -134px;filter:alpha(opacity=60);-moz-opacity:.6;-khtml-opacity:.6;opacity:.6}.header-cart-block .cart .cart_wrapp{padding-left:55px;padding-top:4px;position:absolute;top:-3px}#header .middle-h-row .center_block.no_basket{padding-right:0}#header .middle-h-row .basket_wrapp .header-cart-block{margin-top:7px;float:right}.wrapper.basket_normal.has_menu #header .middle-h-row .basket_wrapp .header-cart-block{min-width:145px}#content_new,#preload_wrapp{position:absolute;z-index:-1000;top:-9999;left:-999}.main-nav ul.menu .child a{font-size:12px}.top-h-row ul.menu .space{position:static}#header .catalog_menu li .space{top:18px}#header .catalog_menu li.more .space{margin:0 0 0 -50px;left:inherit;position:absolute;top:50px}#header .catalog_menu .child{text-align:center;padding-top:24px}.breadcrumbs .drop b.space{left:10px;bottom:-6px}ul.menu li.catalog b.space{left:34%}ul.menu>li>a{position:relative}.flexslider .slides>li{-webkit-backface-visibility:hidden;overflow:hidden;display:none}.front_slider>li{display:none;overflow:hidden}.flexslider .slides>li .img,.flexslider .slides>li .text{width:50%}.flexslider .slides>li.image .img{width:100%}.flexslider .slides>li .img img{margin:0 auto;max-height:100%}.flexslider .slides img{display:block;border-radius:3px;-moz-border-radius:3px;-webkit-border-radius:3px}.top_slider_wrapp{margin:0 auto 26px}.top_slider_wrapp li:before{width:auto;display:none!important}.top_slider_wrapp .flex-control-nav{opacity:0}.top_slider_wrapp .flexslider,.top_slider_wrapp .flexslider .slides>li,.top_slider_wrapp .flexslider .slides>li td{height:322px;margin:0}.top_slider_wrapp .flexslider .slides>li{background-position:center;background-repeat:none}.top_slider_wrapp .flexslider .slides>li:before{display:none}.no-js .slides>li:first-child,.slides:after{display:block}.slides:after{content:"\0020";clear:both;visibility:hidden;line-height:0;height:0}html[xmlns] .slides{display:block;list-style:none}* html .slides{height:1%}.flexslider .slides{margin:0;padding:0;zoom:1}.flexslider{padding:0;margin:0 0 9px;position:relative;zoom:1;text-align:center}.flex-viewport{max-height:2000px;-webkit-transition:all 1s ease;-moz-transition:all 1s ease;-o-transition:all 1s ease;transition:all 1s ease}.module-cart,.module-cart tr{-webkit-transition:all 1s ease;-moz-transition:all 1s ease;-o-transition:all 1s ease;transition:all 1s ease}.loading .flex-viewport{max-height:300px}.carousel li{margin-right:5px}.include_module_error{text-align:center;margin:0 auto}.include_module_error p{margin-top:0;line-height:18px;font-size:14px;color:#555}.flexslider .flex-control-nav,.front_slider_wrapp .flex-control-nav{zoom:1;top:-35px;position:relative;display:inline-block;z-index:10}.flex-control-nav li,.flexslider .flex-control-nav li,.front_slider_wrapp .flex-control-nav li{padding:6px 6px 6px 2px;font-size:0;margin:0;text-indent:0;display:inline-block;zoom:1;position:relative}.flex-control-nav li:last-child,.flexslider .flex-control-nav li:last-child,.front_slider_wrapp .flex-control-nav li:last-child{padding-right:0}.front_slider_wrapp .flex-control-nav li{padding-top:0}.flex-control-paging li a.flex-active,.flex-control-paging li a:hover{background-position:-2px -20px}.flex-direction-nav{margin:0;padding:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.flex-direction-nav *{outline:0}.flexslider li *{text-decoration:none}.flexslider .banner_title span{font-size:32px;line-height:44px}.flexslider .banner_text{font-size:15px;line-height:18px;margin-top:11px}.flexslider .center,.flexslider .left,.flexslider .right{text-align:left}.flexslider .center .banner_title{margin:20px auto 0}.flexslider .banner_buttons,.flexslider .banner_text,.flexslider .banner_title{margin-left:15px;margin-right:15px;overflow:hidden;text-align:left}.compare_wrapp.centered,.front_slider_wrapp,ul.tabs li{text-align:center}.flexslider .left .banner_buttons,.flexslider .left .banner_text,.flexslider .left .banner_title{margin-left:90px}.flexslider .right .banner_buttons,.flexslider .right .banner_text,.flexslider .right .banner_title{margin-right:90px}.flexslider .banner_buttons a{margin-right:10px;margin-bottom:4px}.flexslider .banner_buttons{margin-top:16px}.flexslider li.box .underline{text-decoration:none}.info_column h3{font-size:18px}.index_bottom .info_column .about_column,.index_bottom .info_column .news_column{width:50%;padding-left:40px;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;float:left}.index_bottom .info_column .news_column .shadow{display:none}a i.arrow{margin:0 10px 0 0;position:relative;zoom:1;bottom:-3px}a i.arrow,a i.arrow b{display:inline-block;height:15px;width:15px;border-radius:15px;-moz-border-radius:15px;-webkit-border-radius:15px;background:#ddd}a i.arrow b{background:url(../images/arrows.png) no-repeat}a:hover i.arrow b{background-position:-36px 0}a:hover i.arrow.down b{background-position:-36px -35px}.index_bottom .info_column .news_slider{margin-top:18px}.index_bottom .about_column a[name=about_show_more]{margin-top:10px;display:inline-block}.index_bottom .info_column .news_column .news_block>ul{list-style:none;margin-top:18px}.news_slider_wrapp .flex-control-nav.flex-control-paging{display:none;margin-top:5px}.differences_table .left_arrow,.differences_table .right_arrow,.jobs_wrapp .item .icon,.jobs_wrapp .item .icon i{display:inline-block;height:30px;width:30px;vertical-align:top;zoom:1}.jobs_wrapp .item td.icon{display:table-cell}.flex-direction-nav li{font-size:0}.differences_table .left_arrow,.differences_table .right_arrow{font-size:0;background-image:url(../images/arrows_big.png);background-repeat:no-repeat}.news_slider_wrapp .flex-viewport{width:100%;z-index:10}img.shadow{width:100%;max-width:100%;margin:10px 0}.search-page img.shadow{margin-bottom:20px}#footer .footer_inner .line{padding:10px 0}#footer .footer_inner .line .wrapper_inner{position:relative}.footer_inner .line .wrapper_inner div{display:inline-block;width:79%}.footer_inner .line .wrapper_inner div div{width:auto}#footer ul.bottom_main_menu,#footer ul.bottom_submenu{width:79%;display:inline-block;vertical-align:top}#footer ul.bottom_main_menu{margin-top:4px}#footer .bottom_submenu li.selected a{font-weight:700}.bottom_main_menu li,.bottom_submenu>li{display:inline-block;width:24%;list-style:none}.bottom_main_menu li a{text-shadow:0 1px 0 rgba(255,255,255,.4);-moz-text-shadow:0 1px 0 rgba(255,255,255,.4);-o-text-shadow:0 1px 0 rgba(255,255,255,.4);-webkit-text-shadow:0 1px 0 rgba(255,255,255,.4);text-transform:uppercase;text-decoration:none}.bottom_submenu li{list-style:none}#footer .bottom_left_icons{display:inline-block;width:20%}#footer .phone,#footer .phone .phone_wrapper{display:inline-block;vertical-align:top}#footer .phone .icon{position:inherit;vertical-align:top}#footer .phone .phone_text{display:inline-block;vertical-align:top;margin-top:5px}.social a{margin-left:3px;text-decoration:none;border:0!important}.social a:first-child,.specials_slider_wrapp ul.tabs li:first-child{margin-left:0}#footer .bottom_submenu li{line-height:19px}#footer .bottom_submenu li a{text-decoration:none}ul.tabs li.cur span{border-bottom:0}ul.tabs,ul.tabs li{display:inline-block}ul.slider_navigation,ul.tabs,ul.tabs_content{list-style:none}.specials_slider_wrapp ul.tabs{padding-right:80px}.specials_slider_wrapp ul.slider_navigation{position:absolute;top:0;right:3px}ul.tabs_content>li{min-width:100%}.specials_slider_navigation,.tabs_slider_navigation,ul.tabs_content>li{display:none}.specials_slider_navigation.cur,.tabs_slider_navigation.cur,ul.tabs li span,ul.tabs_content>li.cur,ul.tabs_content>li.current{display:inline-block}ul.tabs_content li.tab{width:100%;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;overflow:hidden}ul.tabs li{font-size:13px;margin:5px 10px 0 0;padding:0 25px 0 0;height:28px;line-height:28px;cursor:pointer;border-radius:3px;-moz-border-radius:3px;-webkit-border-radius:3px}ul.tabs li.cur,ul.tabs-head li.current{cursor:default}ul.tabs li span{font-size:13px;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;padding-top:9px;line-height:13px}ul.tabs li span span{border:0;padding:0}.specials_slider>li:last-child{margin-right:0}.specials_slider>li{width:179.9px!important;overflow:hidden;margin-right:15px;-webkit-transition:border-color ease-out .2s;-moz-transition:border-color ease-out .2s;-o-transition:border-color ease-out .2s;transition:border-color ease-out .2s;padding:1px 1px 5px;display:block;float:left;vertical-align:top}.right_block .specials_slider.product_slider>li{margin-right:15px;width:174px!important}.specials_slider.product_slider>li{margin-right:14px}ul.specials_slider{width:100000%!important}ul.specials_slider li,ul.specials_slider li *{white-space:normal}.specials_slider li:hover{padding:0 0 4px}.catalog_item .item-title a,.view-item .item-title a span{text-decoration:none;line-height:17px}.front_slider_wrapp .extended_pagination span,a,a span,ul.tabs li span{-webkit-transition:color ease-out 70ms;-moz-transition:color ease-out 70ms;-o-transition:color ease-out 70ms;transition:color ease-out 70ms}.articles-list .item .item-title a,.catalog_item .item-title a,.front_slider .item-title a span,.item-title a,.item-title a span,.jobs_wrapp .item .name a,.view-item .item-title a span{-webkit-transition:color ease-out 20ms;-moz-transition:color ease-out 20ms;-o-transition:color ease-out 20ms;transition:color ease-out 20ms}#header .catalog_menu ul.menu>li>a,#header ul.menu.adaptive>li>a,#header ul.menu.full.opened>li>a,.button22,.button22 span,.popup .soc-avt .row a{-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}.view-item .item-title a{text-decoration:none}.catalog_item .item-title a,.catalog_item .item-title a span,.view-item .item-title a span{font-size:14px}.catalog_item .price,.view-list .price{font-size:18px;display:inline-block;white-space:nowrap}.catalog_item .price.discount,.view-list .price.discount{margin-top:0;float:none}.differences_table .catalog_item .price.discount{margin-top:5px}.differences_table .catalog_item .price{float:none}.differences_table td{width:25%;vertical-align:top}.differences_table .left_arrow,.differences_table .right_arrow{position:absolute;top:130px;width:30px;height:30px;cursor:pointer;z-index:1}.differences_table .left_arrow{left:20%;background-position:0 -157px}.differences_table .left_arrow:hover{background-position:0 -189px}.differences_table .right_arrow{right:20px;background-position:-29px -157px}.differences_table .right_arrow:hover{background-position:-29px -189px}.catalog_item .price.discount strike,.view-list .price.discount strike{font-size:14px;line-height:14px}.catalog_item .image,.catalog_item .image a{display:block;height:165px;line-height:165px;vertical-align:middle;text-align:center;position:relative;zoom:1}.catalog_item .image a{padding:3px}.differences_table{margin-top:20px}.differences_table .prop_name{font-weight:700;padding-right:30px}.differences_table .catalog_item{max-width:190px;margin-bottom:30px}.catalog_item .image img{position:absolute;margin:auto;top:0;bottom:0;left:0;right:0;border:0;border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px}.specials_slider_wrapp ul.tabs_content,.tab_slider_wrapp ul.tabs_content{margin-top:10px;position:relative;zoom:1}.catalog_detail .specials_slider_wrapp ul.tabs_content{margin-top:5px;min-height:300px}.catalog_detail .detail_text,.catalog_detail .detail_text p,.catalog_detail p{font-size:13px}.specials_slider_wrapp ul.tabs_content>li,.tab_slider_wrapp ul.tabs_content>li{position:absolute;z-index:10}.specials_slider>li{background:#fff}.specials_slider_wrapp ul.tabs_content>li.cur,.tab_slider_wrapp ul.tabs_content>li.cur{z-index:1}.specials_slider_wrapp ul.tabs_content>li .flex-viewport{padding-bottom:5px}.catalog_block .cost .price_name+.price,.item_info .cost .price_name+.price,.view-list .catalog_item .item_info .cost .price_name+.price{margin-top:0;margin-bottom:0;float:none}.catalog_block .cost .price.discount,.specials_slider .catalog_item .item_info .cost .price.discount,.view-list .catalog_item .item_info .cost .price.discount{display:inline-block;vertical-align:top}.catalog_block .cost .price_name+.price+.price.discount,.specials_slider .catalog_item .item_info .cost .price_name+.price+.price.discount,.view-list .catalog_item .item_info .cost .price_name+.price+.price.discount{margin-top:0}.catalog_detail .item_main_info .price_block{overflow:hidden}.specials_slider .catalog_item .item_info .buttons_block{display:none}.catalog_block .catalog_item .item_info .buttons_block,.specials_slider .catalog_item .item_info .buttons_block{clear:both;margin-top:7px;white-space:nowrap}.specials_slider.product_slider .catalog_item .item_info .buttons_block{display:block}.catalog_block .catalog_item .item_info .basket_button,.specials_slider .catalog_item .item_info .basket_button{float:left;margin-bottom:4px}.soc-avt .row a span.name{box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;text-decoration:none;cursor:pointer;text-transform:uppercase}.basket_button.button30 span,.button30 span,.compare_button span,.soc-avt .row a span.name{display:inline-block;font-size:11px;line-height:32px}.compare_button span{background:url(../images/like_icons.png) no-repeat}.sort_to_compare .compare_button:first-child{margin-right:5px}.compare_wrapp{font-size:11px}.prompt .star_big{position:relative;bottom:-14px}.compare_wrapp a.compare_link{border-bottom:1px dotted}.compare_button:hover span{background-position:-32px -64px}.basket_button,.compare_button{display:inline-block;height:25px;line-height:25px;text-transform:uppercase;clear:both;padding:0 6px 0 0;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;text-decoration:none;cursor:pointer}.basket_button,.button30,.compare_button{border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px}a.compare_item,a.compare_item i,a.wish_item,a.wish_item i{display:inline-block;height:26px;width:26px;cursor:pointer;border-radius:26px;-moz-border-radius:26px;-webkit-border-radius:26px}a.compare_item i,a.wish_item i{background:url(../images/like_icons.png) no-repeat}.front_slider .item-title a,.front_slider .item-title a span{font-size:22px;line-height:32px;text-decoration:none}.front_slider .price_name{margin-top:20px}.front_slider .price{font-size:32px;line-height:34px;margin-top:20px}.front_slider .price+.price_name,.front_slider .price_name+.price{margin-top:0}.front_slider_wrapp{position:relative;zoom:1;height:auto;margin-top:20px}.front_slider_wrapp .flex-viewport{width:75%;float:left;text-align:left}.front_slider_wrapp .extended_pagination{float:right;width:25%;list-style:none;text-align:left;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;-o-box-sizing:border-box;padding-left:30px;right:0;bottom:0;top:0;overflow-y:auto;max-height:280px}.front_slider_wrapp .extended_pagination li.hider{margin:0;padding:0;width:10px;position:absolute;top:0;bottom:0;z-index:10;cursor:default;left:-10px;background:url(../images/hider_right.png) repeat-y}.front_slider_wrapp .flex-control-nav{width:100%;top:0}.btn_big,.front_slider_wrapp a.read_more{display:inline-block;height:37px;line-height:37px;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none;padding:0 15px;font-size:16px;margin-top:15px;border-radius:5px;-webkit-border-radius:5px;-moz-border-radius:5px;cursor:pointer;text-decoration:none}.btn_big{margin:0}.front_slider .price.discount{font-size:12px;font-family:Ubuntu,Arial,Helvetica,sans-serif;line-height:18px;margin-top:0}.front_slider .image,.front_slider .info{box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.front_slider .info{width:50%;padding-left:12px;max-width:100%;max-height:100%}.front_slider .image{width:50%;text-align:center;padding-left:10px}.front_slider .image img{max-width:240px;max-height:100%}.front_slider_wrapp .extended_pagination>li:eq(1){margin-top:0}.front_slider_wrapp .extended_pagination>li.active span,.front_slider_wrapp .extended_pagination>li.active:hover span{border-bottom:0}.front_slider_wrapp .extended_pagination span{line-height:18px}.front_slider_wrapp .extended_pagination>li.active{cursor:default}.front_slider_wrapp .extended_pagination>li{margin-top:10px;padding:10px;border-radius:0 2px 2px 0;-moz-border-radius:0 2px 2px 0;-webkit-border-radius:0 2px 2px 0;position:relative;zoom:1;cursor:pointer;display:block}.front_slider_wrapp .extended_pagination>li i.triangle{left:-15px;bottom:0;position:absolute;top:0;display:inline-block;font-size:0;width:0;height:0;border-bottom-color:transparent;border-top-color:transparent;border-top-style:solid;border-bottom-style:solid;border-right-width:15px;border-right-style:solid;border-right-color:transparent}.front_slider .preview_text{line-height:16px;margin-top:10px}.breadcrumbs .drop a span{border-bottom:1px dotted #b4b4b4;-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}.breadcrumbs .separator.cat_last{background-position:-9999px -9999px}.breadcrumbs .drop:hover .number .separator{background-position:-1px -15px}.breadcrumbs .drop:hover a span{border-bottom:none}.breadcrumbs .drop{position:relative;display:inline-block;zoom:1}.breadcrumbs .dropdown_wrapp{box-sizing:border-box;display:none;padding-top:8px!important;top:18px}.breadcrumbs .drop:hover .dropdown_wrapp,.catalog_detail .info_block b.block_title{display:block}.breadcrumbs .dropdown{box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;padding:12px;border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px;text-align:left}.breadcrumbs .dropdown>a{display:block;line-height:14px;margin-top:7px;text-decoration:none;text-transform:none;white-space:nowrap}.breadcrumbs .dropdown>a:first-child{margin-top:0}.left_side{padding-right:200px;width:100%;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.right_side{width:200px;float:right;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;padding-left:20px}.catalog_detail .item_main_info .buttons_block{border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px;width:100%}.catalog_detail .item_main_info{margin:20px 0 30px;padding:0;border:1px solid #eaebec;position:relative}.catalog_detail .item_main_info .item_slider{width:50%;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;padding:29px 56px;float:left;position:relative;z-index:1;text-align:center}.catalog_detail .item_main_info .right_info{padding:0 0 0 50%;position:relative}.catalog_detail .item_main_info .right_info .info_item{position:relative;padding:0 21px 0 11px}#order_form_div .info_block .l_block:after,#order_form_div .info_block .r_block:before{position:absolute;top:0;background:#F2F2F2;width:1px;height:100%;content:""}#order_form_div .info_block .l_block:after{right:0}#order_form_div .info_block .r_block:before{left:-1px}.catalog_detail .right_info .info_block,.catalog_detail .right_info .price_block_wrapp{padding-left:7px}.catalog_detail .info_block>div{display:inline-block;vertical-align:top;width:130px;float:left;margin-bottom:15px;min-height:38px}.catalog_detail .info_block .brand.right{float:right}.catalog_detail .item_main_info .price{font-size:24px;line-height:26px;float:left;width:auto;white-space:nowrap;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;padding-right:10px}.catalog_detail .item_main_info .price small{font-size:16px}.catalog_detail .extended_info,.catalog_detail .item_main_info .buttons_block{padding:10px}.counter_block{white-space:nowrap}.module-cart .count-cell .measure{display:block;white-space:nowrap;font-size:11px;line-height:14px}.module-cart .counter_block{white-space:nowrap}.module-cart .count-cell .some-class{display:none}.basket_button.one_click span{padding-left:0;background:0 0}.basket_button.one_click{padding-left:6px}.basket_button.button30.one_click{padding-left:10px}.catalog_detail .item_main_info .buttons_block{margin-top:20px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;-o-box-sizing:border-box;min-height:54px}.catalog_detail .basket_button.one_click{margin-left:8px}.catalog_detail .item_main_info .buttons_block .counter_block{white-space:nowrap}.module-cart .buttons_block .counter_block{display:inline-block}.catalog_detail .buy_buttons_wrapp{text-align:right;padding:12px 15px 0 0;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.catalog_detail .buttons_block.adaptive .buy_buttons_wrapp a{width:125px;text-align:center}.catalog_detail .buttons_block.adaptive .buy_buttons_wrapp,.catalog_detail .buttons_block.adaptive .counter_block{width:50%}.catalog_detail .buttons_block.adaptive .counter_block{text-align:center}.catalog_detail .buy_buttons_wrapp a{margin-bottom:10px}.catalog_detail .buy_buttons_wrapp.subscribe{float:left;min-width:115px;padding:12px 0 0 15px}.catalog_detail .buttons_block .description{font-size:11px;line-height:14px;padding:5px 5px 0}.catalog_detail hr{height:0;width:100%;margin:15px 0 25px}.catalog_detail .info_block+hr{margin-top:0}.catalog_detail hr.separator{margin:10px 0}.availability-row .indicators{display:inline-block;vertical-align:top;zoom:1}.availability-row .indicators span,.quantity-indicators span{background:url(../images/quantity_icons.png) -13px -89px;display:inline-block;vertical-align:top;width:21px;height:21px;margin:0 -2px 0 -12px;position:relative;zoom:1;z-index:8}.availability-row .indicators span.last,.quantity-indicators span.last{background-position:-13px -130px;z-index:7}.availability-row .indicators span.null,.quantity-indicators span.null{background-position:-13px -170px;margin-left:0}.availability-row .indicators span.first,.quantity-indicators span.first{z-index:9;margin-left:0}.availability-row .indicators span.last.r,.availability-row .indicators span.r,.quantity-indicators span.last.r,.quantity-indicators span.r{background-position:-13px -49px}.availability-row .indicators span.r.first,.quantity-indicators span.r.first{background-position:-13px -9px}.availability-row .indicators.no_products span{margin-left:0;background-position:-13px -170px}.catalog_detail .availability-row .value,.catalog_detail .quantity-wrapp .value{display:inline-block;font-size:11px;line-height:13px;margin-left:5px;vertical-align:middle;color:#000}.catalog_detail .availability-row .value a,.catalog_detail .availability-row .value span{font-size:11px}.catalog_detail .item_main_info a.compare_item,.catalog_detail .item_main_info a.wish_item,.display_list a.compare_item,.display_list a.wish_item,.module-cart a.wish_item{background:0 0;width:auto;text-decoration:none;display:inline-block;max-width:102px}.catalog_detail .adaptive_extended_info_wrapp,.compare_item .value.added,.wish_item .value.added{display:none}.module-cart a.wish_item.to_basket{max-width:130px}.catalog_detail a.compare_item .value,.catalog_detail a.wish_item .value,.module-cart a.wish_item .value{font-size:11px;vertical-align:top;line-height:24px;margin-left:5px}.module-cart a.wish_item.to_basket .icon,.module-cart a.wish_item.to_basket .icon i{height:26px;width:26px;border-radius:28px;-moz-border-radius:28px;-webkit-border-radius:28px}.module-cart a.wish_item.to_basket .icon{position:relative;zoom:1;top:-1px}.catalog_detail .item_main_info a.compare_item:hover,.catalog_detail .item_main_info a.wish_item:hover{background-position:0}.catalog_detail .availability-row{padding-left:7px;margin-right:10px;margin-bottom:8px}.catalog_detail .item_main_info .like_icons>div{border-radius:2px;overflow:hidden;margin:0 0 5px}.catalog_detail .extended_info{margin:10px 0}.catalog_detail .adaptive_extended_info .brand{float:right}.item_slider .slides{padding:0;margin:0 auto 22px;width:100%;max-width:340px;height:340px;line-height:337px;position:relative;zoom:1}.item_slider .slides .offers_img img{vertical-align:middle;border:0;max-width:100%}.item_slider:not(.flex) .slides li{padding:0;margin:0;display:none;width:100%;height:340px;overflow:hidden;position:absolute;line-height:340px;z-index:50}.item_slider:not(.flex) .slides li.current{display:block}.item_slider .thumbs .slides_block li a{display:inline-block;height:100%;width:100%}.catalog_detail .item_slider #thumbs{height:54px;white-space:nowrap;width:256px;overflow:hidden;margin:0}.catalog_detail .item_slider .thumbs{margin:0 auto;max-width:256px;position:relative;z-index:1}.item_slider .thumbs .slides_block li{overflow:hidden;vertical-align:bottom;list-style:none;width:54px!important;height:54px;zoom:1;background:0 0;position:relative;text-align:center;line-height:54px;margin:0 10px 0 0;border:2px solid #fff;-webkit-transition:border-color ease-out .2s;-moz-transition:border-color ease-out .2s;-o-transition:border-color ease-out .2s;transition:border-color ease-out .2s;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;cursor:pointer;float:left;display:none}.item_slider .thumbs li.current{border-color:#ddd}.item_slider .thumbs li:hover{border-color:#9a9a9a}.item_slider .slides li.current{z-index:0}.item_slider .slides li img,.item_slider .thumbs li img{position:absolute;margin:auto;top:0;bottom:0;left:0;right:0;border:0;max-width:100%}.item_slider.flex{display:none}.item_slider.flex .slides li,.item_slider.flex .slides li img{position:static;text-align:center}.item_slider .flex-control-nav{text-align:center;margin-bottom:10px}.b-share *{font-size:10px}.detail_text ul li::before,.preview-text ul li::before,.preview_text ul li::before{padding:0 10px 0 0}.catalog_detail .detail_text{margin-bottom:15px;color:#555}.catalog_detail .tabs_section ul.tabs_content>li{width:100%;padding:34px 0 50px}.catalog_detail .reviews-reply-form{padding-bottom:50px}.catalog_detail ul.tabs_content li.video iframe{border:1px solid #000;border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px}#reviews_content{display:none;padding:40px 0 0}#reviews_content img.shadow{position:absolute;margin-top:1px}.file_type{clear:both;margin-top:15px}.file_type a{display:block;font-size:13px}.file_type.tiff i.icon{background-position:0 -275px}.file_type.jpg i.icon{background-position:0 -220px}.file_type.pdf i.icon{background-position:0 0}.file_type.word i.icon{background-position:0 -55px}.file_type.excel i.icon{background-position:0 -165px}.file_type i.icon{width:46px;height:33px;display:inline-block;background:url(../images/file_types.png) 0 -110px no-repeat;float:left}.file_type .description{padding:0 0 0 46px;font-size:12px;position:relative;top:-3px}.catalog_detail a.compare_item:hover .icon i{background-position:-32px -65px}.catalog_detail a.wish_item:hover .icon i{background-position:-3px -63px}.tabs_content .stores_block_wrap{margin-top:-7px}.stores_block_wrap .stores_block .stores_text_wrapp{position:relative;display:inline-block;background:#fff;padding:0 10px 0 19px}.stores_block_wrap .stores_block .stores_text_wrapp>span{padding:0 0 0 10px}.stores_block .quantity-wrapp{float:right;padding-left:10px;background:#fff;margin-top:7px}.stores_block_wrap .stores_block{clear:both;line-height:20px;position:relative;padding:12px 0 13px}.stores_block_wrap .stores_block:before{content:"";width:100%;display:block;height:1px;border-bottom:1px dotted #c3c3c3;top:50%;position:absolute}.stores_block_wrap .stores_block:hover,.stores_block_wrap .stores_block:hover .item-stock,.stores_block_wrap .stores_block:hover .stores_text_wrapp{background:#f7f7f7}.stores_block_wrap .stores_block:hover{transition:none}.stores_block_wrap .stores_block .item-stock{float:right;background:#fff;margin-top:2px;position:relative;padding:0 19px 0 20px;min-width:115px}.phone span.phone_text>div{display:inline-block}.tabs_content li.video>div,.tabs_content li.video>div *,.tabs_contentli.video iframe{max-width:100%}.tabs_content li.video{text-align:center}.tabs_content li.video .description,table.colored td,table.colored td.name,table.colored td.name_th{text-align:left}.tabs_content li.video .description .shadow{margin:25px 0 0}.catalog_detail ul.tabs_content>li .video_wrapp>div{margin:0 auto}.catalog_detail .services_block{margin:31px 0 10px}.services_block .item{display:inline-block;width:49%;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;margin:-5px 0 12px;vertical-align:top}.services_block .item a .arrow{float:left;width:15px;height:15px;margin:0}.services_block .item a span.link{font-size:13px;line-height:16px;padding-left:25px;display:block;padding-top:2px}.services_block .item a{text-decoration:none}.services_block a i.arrow b{background:url(../images/arrows.png) 2px -241px no-repeat}.files_block .shadow,.services_block .shadow{margin-top:18px}.catalog_detail .stores_block_wrap .stores_block .value{margin-right:10px}.catalog_detail .stores_block_wrap .stores_block .value:first-letter{text-transform:lowercase}.articles-list .item .left-data,.catalog_section_list .section_item .image{width:62px}.articles-list .item .left-data img,.catalog_section_list .section_item .image img{max-width:120px;max-height:120px}.catalog_section_list .section_item .image{padding:0 20px 0 0;vertical-align:top}.catalog_section_list .section_item td.section_info{vertical-align:top}.articles-list .item .right-data,.catalog_section_list .section_item .image+ul{margin-left:140px}.catalog_section_list .section_item ul,.right-data,.right-item-data{overflow:hidden}.filter_block+.articles-list{margin-top:30px}.catalog_detail .offers_table thead td{border-top:none}table.colored thead td{font-size:12px;padding:8px 5px 7px;border-top:0}.differences_table table td,table.colored td{font-size:13px;padding:5px;transition:none 0s ease 0s;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;-o-box-sizing:border-box}.differences_table table td{padding:5px 10px}table.colored td.price{font-size:14px;text-align:center;white-space:nowrap}table.colored td.buy,table.colored td.one_click_buy{box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.brands_list li,.left_block .left_menu *,.module-cart table{box-sizing:border-box}table.colored td.one_click_buy{width:145px;text-align:center}table.colored td.buy{width:125px;text-align:center}table.colored td.buy .more_text{display:none}table.colored td.count{width:150px}table.colored td.count,table.colored td.property{text-align:center}.catalog_detail table.colored .like_icons{text-align:center;width:90px;white-space:nowrap;position:static}.catalog_detail table.colored .like_icons span{opacity:1;visibility:visible}.catalog_detail table.colored .like_icons .compare_item_button,.catalog_detail table.colored .like_icons .wish_item_button{display:inline-block;vertical-align:middle;margin:0 5px 0 0}.catalog_detail table.colored .like_icons .compare_item_button span,.catalog_detail table.colored .like_icons .wish_item_button span{margin-bottom:5px;margin-top:5px}.catalog_detail .adaptive.text>div.like_icons .compare_item_button span,.catalog_detail .adaptive.text>div.like_icons .wish_item_button span{margin:0}.catalog_detail table.colored .like_icons>div:last-of-type{margin-right:0}.catalog_detail .adaptive.text>div.like_icons{width:75px}table.colored .counter_block_wr{text-align:right}div.reviews-collapse{margin-bottom:20px}table.offers_table td{padding:20px 10px}.offers_table .counter_block{font-size:0;padding:0}.specials_slider_wrapp,.tab_slider_wrapp{position:relative;zoom:1}.bx_item_set_hor_item .item_info .item-title,.bx_modal_body .bx_kit_item .item-title,.bx_modal_body .item_wrapp .item-title{overflow:hidden;text-overflow:ellipsis;text-overflow:-o-ellipsis-lastline;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;white-space:normal;text-align:left}.module-cart .cell,.module-cart .colored td.delay-cell,.module-cart .colored tfoot td.row_values,.module-cart .colored tfoot td.row_values *,.module-cart .count-cell,.module-cart .summ-cell,.module-cart .weight-cell{white-space:nowrap}.bx_item_set_hor_item .item_info .item-title span,.bx_modal_body .bx_kit_item .item-title span,.bx_modal_body .item_wrapp .item-title span{line-height:16px}.advt_banner img,.articles-list .item .left-data img,.basket_popup_wrapp .cart_shell .catalog_item .thumb-cell img,.brands_list li img,.bx_filter_vertical [class^=specials_] input[type=checkbox]+label .icon,.bx_item_set_hor .bx_item_set_hor_item .bx_item_set_img_container img,.bx_modal_body .bx_kit_item .bx_kit_img_container img,.catalog_detail .set_wrapp .item .image img,.catalog_item .image img,.catalog_section_list .section_item_inner .image img,.display_list .list_item .image img,.front_slider li .image img,.include_module_error img:hover,.item_slider .thumbs li img,.item_slider ul.slides li img,.module-cart .thumb-cell img,.module_products_list td.foto-cell img,.specials_slider li .image img,.viewed_products_column .view-item img{-webkit-transition:all ease-out .2s;-moz-transition:all ease-out .2s;-o-transition:all ease-out .2s;transition:all ease-out .2s}.flexslider .slides img{-webkit-transition:all ease .5s;-moz-transition:all ease .5s;-o-transition:all ease .5s;transition:all ease .5s}.advt_banner:hover img,.articles-list .item:hover .left-data img,.basket_popup_wrapp .cart_shell .catalog_item:hover .thumb-cell img,.bx_item_set_hor .bx_item_set_hor_item .item_wrapp:hover .bx_item_set_img_container img,.bx_modal_body .bx_kit_item:hover .bx_kit_img_container img,.catalog_detail .set_wrapp .item:hover .image img,.catalog_item:hover .image img,.catalog_section_list .section_item_inner:hover .image img,.display_list .list_item:hover .image img,.front_slider .image:hover img,.item_slider .thumbs li:hover img,.module-cart tr:hover img,.module_products_list tr:hover td.foto-cell img,.news_block .news_items .item .image:hover img,.news_slider_wrapp .item:hover img,.specials_slider li:hover .image img,.viewed_products_column .view-item:hover img{-webkit-filter:saturate(1.7)}.brands_list li:hover img{-webkit-filter:saturate(1.5)}.bx_filter_vertical [class^=specials_] input[type=checkbox]+label:hover .icon{-webkit-filter:saturate(2)}.flexslider .slides li:hover img,.include_module_error img:hover{-webkit-filter:saturate(1.2)}.detail_picture_block .picture_description{font-size:11px;margin-top:10px;padding-top:5px;text-align:center}.news_detail_wrapp .back{margin-top:30px}.news_detail_wrapp .detail_picture_block{float:right;border:1px solid #E5E5E5;margin:0 0 20px 30px;width:278px;height:161px;line-height:161px;text-align:center;overflow:hidden}.news_detail_wrapp .detail_text{margin-top:10px}.news_detail_wrapp .detail_picture_block img{vertical-align:middle}.module-gallery-list{font-size:0;line-height:0;margin:30px 0 0}.right_block .module-gallery-list{margin-top:30px}.module-gallery-list li{padding:0;width:25%;height:143px;position:relative;display:inline-block;margin:0 0 1px 1px;overflow:hidden;vertical-align:top}.module-gallery-list li .fancy_hover{border:2px solid transparent}.news_detail_wrapp .price_block{padding:15px 15px 12px;margin-top:30px;display:inline-block}.news_detail_wrapp .price_block .price{font-size:17px}.rss_feed_icon{position:absolute;right:0;top:35px;padding:1px 6px;border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px;color:#fff!important}.rss_feed_icon img{max-width:100%}.news_date_time_detail{font-size:12px;margin:0 0 18px;display:block}.articles-list .date_small{font-size:12px;line-height:12px;margin:0 0 10px;padding:0}.module-pagination{margin:0;text-align:center;font-size:0;padding:20px 0 0;position:relative}.bottom_nav .module-pagination{padding-top:0}.module-pagination .nums span,.module-pagination .nums>a{background:#e5e5e5;display:inline-block;width:33px;height:33px;text-align:center;line-height:32px;margin:0 5px 5px 0;text-decoration:none;font-size:13px;font-weight:500;border-radius:2px;-webkit-border-radius:2px;-moz-border-radius:2px}.module-pagination .nums>a:not(.cur):hover{background:#e3e3e3}.module-pagination .flex-direction-nav{position:absolute;width:100%}.module-pagination .flex-direction-nav>li{position:absolute;top:2px}.module-pagination .flex-direction-nav .flex-nav-next{right:-37px}.module-pagination .flex-direction-nav .disabled{display:none}.module-pagination .flex-direction-nav .flex-nav-prev{left:-37px}.module-pagination .point_sep{cursor:default;display:inline-block;width:27px;height:29px;font-size:0;background:url(../images/pagination_sep.png) center no-repeat!important;border:0!important;vertical-align:bottom}.news_detail_wrapp .similar_products_wrapp{margin-top:30px;clear:both}.news_detail_wrapp .specials_slider_wrapp{position:relative;zoom:1;margin-top:10px}.news_detail_wrapp .similar_products_wrapp img.shadow{margin:0 0 20px}.news_detail_wrapp .specials_slider_wrapp .slider_navigation{position:absolute;top:-40px;right:0}.left_block .left_menu{margin:0 0 26px;border-radius:3px;overflow:hidden}.left_menu>li{display:block;font-size:13px;transition:background-color 70ms ease-out 0s;-webkit-transition:background-color ease-out 70ms;-moz-transition:background-color ease-out 70ms;-o-transition:background-color ease-out 70ms;background:#f7f7f7}.left_menu>li:first-child{margin-top:0}.left_menu li a{font-size:13px;padding:11px 19px 12px;text-decoration:none}.left_menu li:not(.exit) a{color:#383838;display:block}.left_menu li.exit a{display:block;text-align:left;position:relative}body .left_block .left_menu li.exit a:before{display:inline-block!important;width:5px;height:8px;background:url(../images/arrows.png) -3px -292px no-repeat!important;content:"";margin:0 8px 0 0;position:static}.left_menu li:not(.exit).current a,.left_menu li:not(.exit).current a:hover{color:#fff}.left_menu>li.exit{background:rgba(0,0,0,0);border:none!important}.left_menu>li.exit.current a{background:0 0;border:0}.brands_list li{display:inline-block;zoom:1;vertical-align:top;width:24%;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;padding:0 10px 10px 0;text-align:center;height:122px;line-height:122px;transition:box-shadow ease .2s}.module-cart .extra_properties,.specials_tabs_section.specials_slider_wrapp .tabs_content>li.tab ul.flex-direction-nav{display:none}.brands_list li:hover{box-shadow:0 0 0 1px #eaebec}.brands_list li img{max-width:100%;vertical-align:middle}.brands_list{margin-top:20px}.module-cart{margin-top:25px}.module-cart table{width:100%;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.module-cart .colored td{text-align:center;position:relative}.module-cart td.name-cell,.module-cart td.name-th{text-align:left}.module-cart td.name-th{padding-left:10px}.module-cart .cost-cell,.module-cart .cost-cell *,.module-cart .row_values .price,.module-cart .summ-cell,.module-cart .summ-cell *{font-size:14px}.cart_shell .cost-cell .price.discount *,.module-cart .cost-cell .discount,.module-cart .cost-cell .discount *{font-size:12px}.module-cart table td{vertical-align:middle;padding:10px}.module-cart table td.thumb-cell{overflow:hidden;positon:relative}#order_form_content .module-cart table td.thumb-cell{padding-left:20px}.module-cart table td.remove-cell{box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;width:55px}.module-cart table td.thumb-cell a{display:inline-block;height:100px;width:100px;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.module-cart .colored tfoot td.extended-cell,.module-cart .order_item_quantity_small{display:none}.module-cart table td.thumb-cell img{max-width:100%;max-height:100%}.module-cart table td.thumb-cell a img{border:0;border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px;max-width:100%;max-height:100%;vertical-align:middle}.module-cart .name-cell,.module-cart .name-cell a{text-decoration:none;font-size:14px;font-weight:500}.module-cart .result-row .buttons-row div{max-width:180px}.module-cart .result-row .buttons-row .description{float:none;font-size:11px;margin-top:10px}.module-cart .colored tfoot td{text-align:left;padding-top:20px;padding-bottom:20px;vertical-align:top}.module-cart .colored tfoot tr td:first-child{padding-left:30px}.module-cart .colored tfoot td.row_values{padding-right:20px}.module-cart .colored tfoot td.row_values.val{text-align:right}.module-cart .colored tfoot tr[data-id=total_buttons] td{position:relative;zoom:1;overflow:hidden}.module-cart .coupon_wrapp input[type=text]{margin-bottom:5px;margin-right:5px}.module-cart.fixed tbody{overflow:hidden}.basket_fly .module-cart table.colored tbody td{border-bottom:0}.basket_fly .module-cart table.colored tbody tr:first-child td{border-top:0}.right_side.sections_list .banners_column{margin-bottom:20px}.right_side.sections_list .viewed_products_column{margin-bottom:0}.articles-list.sections .item{clear:left;min-height:120px}.bx_filter_vertical .bx_filter_container_title{padding:7px 10px;cursor:pointer;position:relative;zoom:1}.bx_filter_vertical .bx_filter_container{position:relative}.bx_filter_vertical .bx_filter_container_title i.arr{display:inline-block;height:15px;width:15px;float:right;position:absolute;right:8px;top:9px}.bx_filter_vertical .bx_filter_param_area{padding:0 10px}.bx_filter_vertical .bx_filter_container_title:hover i.arr{background-position:3px -21px}.bx_filter_vertical .bx_filter_container.active i.arr{background-position:-18px -5px}.bx_filter_vertical .bx_filter_container.active:hover i.arr{background-position:0 -5px}.bx_filter_vertical .bx_filter_block.active{display:block}.bx_filter_vertical .bx_filter_block{padding:0;font-size:0;position:relative;zoom:1;z-index:1}.adaptive_filter{float:left;position:relative;zoom:1;z-index:100;padding-right:3px;display:none}.filter_opener{display:inline-block;padding:8px 8px 1px;margin:-8px 25px 0 0;border-radius:2px}.filter_opener i,.filter_opener span{display:inline-block;vertical-align:top}.filter_opener span{white-space:nowrap;font-size:12px;color:#8e8c8c;line-height:14px}.filter_opener:not(.opened):hover{background:#e5e5e5}.filter_opener:not(.opened):hover span{color:#383838}.char_name .hint .icon:hover i,.char_name .hint.active .icon i,.filter_opener.opened span{color:#fff}.filter_opener i{background:url(../images/sort_icons.png) -19px -62px no-repeat;width:15px;height:13px;margin:0 7px 0 0}.filter_opener.opened i{background-position:-39px -62px}.filter_opener:not(.opened):hover i{background-position:-1px -62px}.filter_opener.active i{background-position:2px -288px}.filter_opener.active:hover i,.filter_opener.opened.active i{background-position:-102px -288px}.block .catalog_block .catalog_item_wrapp:hover{z-index:60}.block .catalog_block .catalog_item_wrapp .catalog_item{border:1px solid #eaebec}.catalog_block .catalog_item_wrapp{white-space:normal;vertical-align:top}.catalog_block .availability-row{margin-top:5px}.catalog_block .catalog_item{text-align:center;background:#fff;overflow:hidden;-webkit-transition:box-shadow ease-out .2s;-moz-transition:box-shadow ease-out .2s;-o-transition:box-shadow ease-out .2s;transition:box-shadow ease-out .2s;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;white-space:normal;padding:20px 19px 20px 20px}.catalog_block .catalog_item img,.product_slider .catalog_item img{max-width:100%;max-height:100%}.catalog_item{position:relative}.bx_filter_container .disabled{-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter:alpha(opacity=50);-moz-opacity:.5;-khtml-opacity:.5;opacity:.5}.smartfilter .bx_ui_slider_track{height:4px;margin:33px 0 13px;position:relative;zoom:1}.smartfilter .bx_ui_slider_track .bx_ui_slider_handle{top:-7px;width:12px;height:12px;display:inline-block;cursor:pointer;position:absolute;z-index:100;background:#fff;border-radius:16px;border:3px solid #ddd}.smartfilter .bx_ui_slider_track .bx_ui_slider_range{height:4px;position:relative}.smartfilter .bx_ui_slider_track .bx_ui_slider_handle:after{font-size:0;content:".";display:inline-block;background:#fff;width:6px;height:6px;left:3px;position:absolute;top:3px}.bx_filter_vertical .bx_filter_block label,.bx_filter_vertical .bx_filter_block label span{font-size:13px}.module_products_list td{padding:19px 0;text-align:center;border-top:1px solid #eaebec}.module_products_list td.item-name-cell{text-align:left;padding-left:20px;padding-right:10px}.module_products_list td.item-name-cell a{font-size:14px;font-weight:400}.module_products_list td.price-cell{max-width:200px;text-align:left;width:21%}.module_products_list td.price-cell .cost.prices .price{font-size:15px;font-weight:500;line-height:14px;display:inline-block}.module_products_list td.like_icons{width:56px}.module_products_list td.like_icons.full{width:91px}.module_products_list td.but-cell{width:215px;text-align:right}.module_products_list{box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;width:100%;font-size:12px;border:1px solid #e5e5e5;margin:0 0 30px;float:left;overflow:hidden}.module_products_list .foto-cell{width:50px}.module_products_list tr:first-child td{border-top:0}.module_products_list tr td:first-child{padding-left:19px}.module_products_list tr td:last-child{padding-right:5px}.module_products_list .foto-cell img{max-width:100%}.module_products_list .adaptive_button_buy{display:none;margin:10px 0}.module_products_list .adaptive_button_buy *{float:none!important}.module_products_list .rating{padding:0 18px 0 0}.module_products_list .rating .iblock-vote{margin-top:3px}.module_products_list .rating table tr td{padding:0}.module_products_list .item-stock,.module_products_list .rating{display:inline-block;vertical-align:middle;margin:0;padding-bottom:5px}.module_products_list .item-stock{padding-bottom:6px}.table .module_products_list td.like_icons{width:92px;position:relative;top:0;right:0}.table .module_products_list td.like_icons .wrapp_stockers .like_icons{top:50%;position:static;margin:0}.module_products_list .availability-row,.module_products_list .price-cell .price{white-space:nowrap}.module_products_list .availability-row{text-align:left}.module_products_list .price-cell .price{font-size:14px}.module_products_list .price-cell .price.discount{font-size:12px}.module_products_list .price-cell .price.discount strike{line-height:14px;font-family:Ubuntu,Arial,Helvetica,sans-serif}.module_products_list .quantity-cell{width:90px}.display_list{margin-top:0;padding:0 0 30px}.display_list .list_item_wrapp{position:relative;zoom:1;z-index:0;-webkit-transition:border-color ease-out .2s;-moz-transition:border-color ease-out .2s;-o-transition:border-color ease-out .2s;transition:border-color ease-out .2s}.display_list .list_item{min-height:230px;white-space:normal}.compare_wrapp,.display_list .information .counter_wrapp,.display_list .price_block .price:not(.discount){white-space:nowrap}.display_list .list_item td.description_wrapp,.display_list .list_item td.image_block,.display_list .list_item td.information_wrapp{vertical-align:top}.display_list .list_item td.description_wrapp,.display_list .list_item td.information_wrapp{position:relative;z-index:60}.display_list .list_item td.description_wrapp,.display_list .list_item td.image_block{padding:19px}.display_list .list_item td.description_wrapp{padding-left:12px;padding-right:20px}.display_list .list_item .image_block{width:25%;position:relative;zoom:1;min-height:170px;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.display_list .description_wrapp .desc_name a span,.popup .item_name span{font-size:16px;line-height:24px}.display_list .adaptive_name{display:none}.display_list .adaptive_name .desc_name{margin-bottom:0}.module_products_list .availability-row .value,.module_products_list .availability-row .value span{font-size:11px;margin:2px 0 0 5px;display:inline-block;vertical-align:top;zoom:1;font-family:Ubuntu,Arial,Helvetica,sans-serif}.popup,.popup.card_popup_frame .popup-intro.grey{display:none}.catalog_block .availability-row .value span:first-letter,.catalog_block .availability-row .value:first-letter,.catalog_detail .availability-row .value span:first-letter,.catalog_detail .availability-row .value:first-letter,.display_list .availability-row .value span:first-letter,.display_list .availability-row .value:first-letter,.module_products_list .availability-row .value span:first-letter,.module_products_list .availability-row .value:first-letter{text-transform:uppercase}.display_list .adaptive_name .desc_name a span{font-size:14px;line-height:16px}.display_list .adaptive_name td{padding:15px}.display_list .description_wrapp .description,.display_list .description_wrapp .information{box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;padding:6px 0 0}.compare_wrapp,.popup{box-sizing:border-box}.display_list .list_item td.information_wrapp{width:23%;width:207px;min-width:155px;max-width:207px;padding:0;position:relative;zoom:1}.popup,.popup.card_popup_frame{max-width:520px}.display_list .information_wrapp .information{padding:25px 29px 27px 6px}.display_list .price_block{margin-bottom:12px}.display_list .price_block .price_name{margin-top:8px}.display_list .price{font-size:24px;line-height:26px}.compare_wrapp a.compare_link span,.display_list .likes_icons *{font-size:11px}.display_list .price.discount{line-height:14px}.display_list .likes_icons a:first-child{margin-top:3px}.display_list .likes_icons a{margin-top:5px}.display_list .likes_icons .icon{position:relative;zoom:1;bottom:-9px}.display_list .likes_icons{margin-left:2px}.compare_wrapp{padding:6px;position:absolute;right:0;top:-55px;width:180px;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.left_side .compare_wrapp{top:-60px}.compare_wrapp .compare_button{margin-right:3px}.compare_wrapp a.compare_link{text-decoration:none;cursor:pointer;margin:0 4px}.module-cart table tr[data-error=no_amounth] td{padding-top:20px}.count-cell .module-cart table td.remove-cell{min-height:100px;vertical-align:middle}.display_list .price.discount,.display_list .price.discount *{font-size:11px;font-family:Ubuntu,Arial,Helvetica,sans-serif}.popup{position:absolute;min-width:420px;left:50%;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;border-radius:5px;-moz-radius:5px;-webkit-border-radius:5px}.popup.card_popup_frame .popup-intro{position:absolute;top:0;right:0;left:0;height:63px}.popup.card_popup_frame .basket_popup_wrapp{margin-top:63px;overflow:hidden}.popup-window-titlebar .popup-window-top-row .popup-window-center-column{height:auto;cursor:default!important}.popup .pop-up-title,.popup-window-titlebar .popup-window-top-row .popup-window-center-column span div{padding:22px 50px 20px 30px;font-size:19px;line-height:20px}.popup-window-titlebar .popup-window-top-row .popup-window-center-column span div{padding:17px 50px 14px 13px}.popup-window-close-icon.popup-window-titlebar-close-icon:after{content:"";display:inline-block;width:19px;height:19px;border-radius:19px;-moz-border-radius:19px;-webkit-border-radius:19px;background:url(../images/close_icons.png) -1px -59px no-repeat}.popup-window-close-icon.popup-window-titlebar-close-icon{background:0 0;margin:0;position:absolute;right:5px!important;top:5px!important;cursor:pointer}.popup a.item_name{text-decoration:none}.popup a.item_name span{line-height:22px}.popup .close i,.popup-window-close-icon.popup-window-titlebar-close-icon:after{background:url(../images/close_icons.png) -1px -59px no-repeat}.popup .form-wr p{margin-top:0;margin-bottom:10px}.popup .form_description{padding:10px 30px}.card_popup_frame.popup .form-wr{padding:25px 0 30px}.popup .product_description{padding-left:10px}.popup .buttons_wrapp{clear:both;margin-top:30px}.star_big{font-size:32px}.popup .r{margin-bottom:13px;position:relative}.popup .but-r .prompt{float:right}.form-block input,.form-block textarea,.popup input[type=password],.popup input[type=email],.popup input[type=text],.popup textarea{width:100%;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.popup textarea{resize:vertical}.basket_fly .module-cart .slide,.one_click_buy_result,.popup .cart_shell .catalog_item .slide{display:none}.module-cart tr[animated=false] .thumb-cell img,.popup .cart_shell .catalog_item[animated=false]{-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0);-moz-opacity:0;-khtml-opacity:0;opacity:0}.popup .cart_shell td.cost-cell{padding-right:0}.popup .cart_shell td.cost-cell .price:first-child{margin-top:0}.popup .cart_shell td.cost-cell,.popup .cart_shell td.cost-cell *{text-align:right}.popup .cart_shell .thumb-cell{width:50px}.popup .cart_shell td{padding:10px;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.popup .cart_shell .thumb-cell a{display:block;position:relative;zoom:1;height:50px;width:50px;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.popup .cart_shell .thumb-cell img{position:absolute;margin:auto;top:0;bottom:0;left:0;right:0;border:0;max-width:100%;max-height:100%;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.popup .cart_shell .cost-cell .price{text-align:right;clear:both;float:right;white-space:nowrap;font-size:14px;display:inline-block;margin-top:0}.card_popup_frame.popup .but_row{margin-top:25px;clear:both;height:31px;overflow:hidden;position:relative;zoom:1}.card_popup_frame.popup .but_row.no_border{border:0}.card_popup_frame.popup .but_row .to_basket,.card_popup_frame.popup .but_row .to_delay{position:absolute;top:0}.card_popup_frame.popup .but_row .to_basket{display:inline-block;right:0}.card_popup_frame.popup .but_row .to_delay{display:none}.card_popup_frame.popup .total_wrapp hr{clear:both}.card_popup_frame.popup .basket_empty{display:none;padding:20px}.card_popup_frame.popup .basket_empty td{vertical-align:middle;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.card_popup_frame.popup .basket_empty td.image{width:91px}.card_popup_frame.popup .basket_empty td.description{padding-left:30px}.card_popup_frame.popup .basket_empty .image div{min-height:91px;background:url(../images/empty_cart_small.png) center no-repeat}.card_popup_frame.popup .basket_empty .basket_empty_subtitle{font-size:15px;margin-bottom:15px}.card_popup_frame.popup .basket_empty .basket_empty_description{font-size:13px;line-height:16px}.card_popup_frame.popup .but_row a.to_basket .text,.card_popup_frame.popup .but_row a.to_delay .text{margin-top:10px;font-size:12px;text-transform:uppercase;display:inline-block;line-height:13px;vertical-align:top}.card_popup_frame.popup .but_row a.to_basket .icon,.card_popup_frame.popup .but_row a.to_basket .icon i,.card_popup_frame.popup .but_row a.to_delay .icon,.card_popup_frame.popup .but_row a.to_delay .icon i{display:inline-block;height:30px;width:30px;border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px}.card_popup_frame.popup .but_row a.to_basket .icon,.card_popup_frame.popup .but_row a.to_delay .icon{margin-right:15px}.card_popup_frame.popup .but_row a.to_basket .icon i,.card_popup_frame.popup .but_row a.to_delay .icon i{background:url(../images/basket_icons.png) no-repeat}.card_popup_frame.popup .but_row a.to_basket:hover .icon i{background-position:-5px -170px}.card_popup_frame.popup .but_row a.to_delay:hover .icon i{background-position:-48px -257px}.card_popup_frame.popup .total_wrapp .price{margin-left:15px;display:inline-block}.card_popup_frame.popup .total_wrapp .price.discount{display:block}.card_popup_frame.popup .item-title a span{font-size:13px}.basket_fly td.total_wrapp a.more_row,.card_popup_frame.popup a.more_row{text-decoration:none;float:left}.basket_fly td.total_wrapp a.more_row .text,.card_popup_frame.popup a.more_row .text,.page_not_found td.description .back404 a{text-decoration:underline}.basket_fly td.total_wrapp a.more_row .icon,.card_popup_frame.popup a.more_row .icon{margin-left:5px;border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px;vertical-align:middle;margin-top:-1px}.popup .compare_list{padding:25px 60px;text-align:center;position:relative;max-width:445px}.popup .compare_list .compare_list_item:first-child{margin-left:0}.popup .compare_list .compare_list_item{vertical-align:top;width:135px!important;display:inline-block;margin-left:15px;position:relative;text-align:center}.popup .compare_list .compare_list_item .image{min-height:70px}.popup .compare_list ul{display:inline-block;width:100%}.popup .compare_list .compare_list_item img{max-width:100%}.compare_frame.popup .button_row{padding:15px 0;text-align:center}.compare_list .compare_list_item .name a{font-size:12px;line-height:16px}.popup.compare_frame{max-width:970px}.compare_list_item:hover .delete,.differences_table .catalog_item:hover .remove{display:inline-block}.differences_table .catalog_item .remove{z-index:100}.compare_list_item .delete,.differences_table .remove{height:16px;width:16px;background:url(../images/close_icons.png) -6px -8px no-repeat;position:absolute;top:0;right:0;display:none}.popup .compare_list .compare_navigation{display:inline-block;position:absolute;top:65px;right:0;left:0;width:100%;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.popup .compare_list .compare_navigation li{position:absolute;right:20px}.popup .compare_list .compare_navigation li:first-child{left:20px}.catalog_detail .props_table{margin-bottom:15px;width:100%}.props_table{min-width:300px;margin-top:-10px}.props_table .char_name{font-weight:700;width:57%}.props_table td{padding:5px 0}.props_table .char_value{text-align:right;width:38%}.props_table .char_name span,.props_table .char_value span{background:#fff;position:relative;zoom:1;bottom:-10px}.props_block .char_name span{position:relative}.props_table .char_name span{padding-right:10px}.props_table .char_value span{padding-left:10px}.bx_filter_parameters_box_title .hint .icon,.char_name .hint .icon{display:inline-block;position:absolute;z-index:205;cursor:pointer;left:-35px;text-align:center;padding:0;top:-1px;height:14px;width:14px;line-height:12px}.bx_filter_parameters_box_title .hint .tooltip,.bx_filter_parameters_box_title .hint .triangle,.char_name .hint .tooltip,.char_name .hint .triangle,.tooltip{display:none}.props_list .char_name .hint .icon{top:0}.bx_filter_parameters_box_title .hint .icon i,.char_name .hint .icon i{font-weight:100;line-height:14px;cursor:pointer;font-size:10px;text-align:center;font-style:normal;padding-right:1px}.bx_filter_parameters_box_title .hint .tooltip{left:-10px;top:initial;bottom:27px;z-index:200;color:#888}.bx_filter_parameters_box_title .hint .tooltip:after{top:initial;bottom:-16px;border-top-color:#fff;border-bottom-color:transparent}.tooltip{position:absolute;left:-53px;top:24px;line-height:14px;z-index:202;padding:17px 20px 19px;min-width:21px;max-width:200px;font-size:12px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;font-weight:400;box-shadow:0 0 15px rgba(0,0,0,.12);background:#fff}.tooltip:after{content:'';position:absolute;width:0;height:0;border:11px solid transparent;border-bottom-color:#fff;left:14px;top:-16px}.bx_filter_parameters_box_title .hint.active .triangle,.char_name .hint.active .triangle{position:absolute;top:19px;left:5px;z-index:100;display:inline-block;width:0;border-left:6px solid transparent;border-right:6px solid transparent}.bx_filter_parameters_box_title .hint.active .triangle{position:inherit;top:inherit;left:inherit;margin:0 0 -10px -12px}.tooltip .tooltip_close{font-size:15px;text-align:center;height:16px;width:16px;display:inline-block;top:2px;right:2px;position:absolute;cursor:pointer}.catalog_detail .offers_table tr td.str{text-align:left}.catalog_detail .offers_table .cost.prices .price{float:none}.catalog_detail .offers_table .offer_stores td{padding:0;border-bottom:0}.opener_icon,.opener_icon i{display:inline-block;height:29px;width:29px;cursor:pointer;vertical-align:middle;border-radius:100%;-moz-border-radius:100%;-webkit-border-radius:100%}.authorization-cols .col,span.form-block-title{vertical-align:top;display:inline-block}.opener_icon{background:#eef1f1}.opener_icon.no_bg{background:0 0}.opener_icon i{background:url(../images/arrows.png) 8px -188px no-repeat}.opener_icon.no_bg i{background:url(../images/arrows.png) 8px -255px no-repeat}.opener_icon.opened i{background-position:-25px -190px}.catalog_detail .offers_table td.opener:hover .opener_icon i,.faq.list .item .q:hover .opener_icon i,.jobs_wrapp .item .name tr:hover .opener_icon i,.opener_icon:hover i,h4:hover .opener_icon i{background-position:8px -210px}.catalog_detail .offers_table td.opener:hover .opener_icon.opened i,.faq.list .item.opened .q:hover .opener_icon i,.jobs_wrapp .item.opened .name tr:hover .opener_icon i,.opener_icon.opened.no_bg:hover i,.opener_icon.opened:hover i,h4:hover .opener_icon.opened i{background-position:-25px -212px}.opener_icon.opened.no_bg i{background-position:-24px -257px}.catalog_detail .offers_table thead td{text-align:center!important}.catalog_detail .offer_stores .stores_block_wrap{display:none;margin:0 0 10px}.catalog_detail .offers_table .opener{cursor:pointer;width:20px}.store_map .module-map{float:left;width:60%;margin-bottom:20px;padding-right:30px;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.store_map .store_description{padding-left:60%;margin-bottom:20px}.store_map .store_description .store_property{width:49%;display:inline-block;vertical-align:top;padding-right:20px;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.store_map .store_image img{margin-top:5px;margin-right:5px;border:2px solid #c8c8c8}.store_map .store_image img:hover{border:2px solid #fc0}.store_map .stores_images{clear:both}.store_map .stores_images.multiple .store_image{display:inline-block;margin-right:10px}.module-authorization,.registraion-page{margin:20px 0}.authorization-cols{overflow:hidden}.authorization-cols .col.authorization{width:49%;padding-right:40px;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.authorization-cols .col.registration{width:50%;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.authorization-cols .col.authorization .form-block #avtorization-form-page{padding:20}.authorization-cols .auth-title{font-size:22px;line-height:30px;margin:0 0 13px;overflow:hidden;text-overflow:ellipsis}.form-block .but-r .remember{float:left}.form-block .but-r .remember label{font-size:12px;padding:0 0 0 23px;margin:0}.filter .remember input[type=checkbox]+label:after,.filter .remember input[type=checkbox]+label:before{top:2px}.filter.label_block input[type=checkbox]+label:after,.filter.label_block input[type=checkbox]+label:before{top:3px}.authorization-cols .col.authorization .soc-avt .row{margin-top:5px}.authorization-cols .col.authorization .soc-avt{zoom:1;position:relative;padding:15px 20px 10px;border-bottom:0;font-size:12px}.authorization-cols .col.authorization div.error{left:330px}.authorization-cols .col.registration p{margin-bottom:21px}.form-block .intro{padding:22px 50px 20px 30px;font-size:19px;line-height:20px}.authorization-cols .form_wrapp,.module-form-block-wr.order_cancel .form-block{padding:20px}.soc-avt .row a span.name,.soc-serv-main .row a span.name{vertical-align:top}.cart_empty .title,.form-block-title{font-size:22px;line-height:24px;font-weight:400;margin-bottom:20px}span.form-block-title{zoom:1}.module-order-history .module-orders-list .drop-container,.module-orders-list .item-extra-properties,.module-orders-list .order-extra-properties{display:none}.module-form-block-wr.order_cancel textarea{margin:5px 0 15px}.module-form-block-wr .form-block label{padding:1px 0 0 2px;margin:0 0 5px}.module-form-block-wr .form-block .r{width:59%;margin-bottom:18px}.module-form-block-wr .form-block .r #LOCATION_PERSONAL_CITY select{margin-top:10px}.module-form-block-wr .form-block .r #LOCATION_PERSONAL_CITY select:first-child{margin-top:0}.module-form-block-wr .form-block .r.register-captcha img{margin-bottom:15px}.module-form-block-wr .form-block .r div.error{top:23px}.module-form-block-wr .form-block .r.pass{width:235px}.module-form-block-wr .form-block input,.module-form-block-wr .form-block textarea,.module-order-history .module-orders-list,.module-order-history .module-orders-list .drop-container .item-shell{width:100%}.module-form-block-wr .form-block textarea{height:98px}.module-form-block-wr .form-block .pr{font-size:11px;margin:5px 0 0 3px;line-height:16px}.module-form-block-wr .form-block .pr.em{margin:8px 0 -5px 3px}.module-form-block-wr .form-block .but-r{padding:0;margin:-3px 0 20px}.module-form-block-wr .form-block .prompt{float:left;margin-top:6px}.form-block .prompt{font-size:11px}.form-block .prompt .star{font-size:32px;position:relative;vertical-align:middle;top:6px}.module-form-block-wr .soc-serv-main{padding:33px 43px 15px;margin:45px -43px 0;border-top:1px solid #E5E5E5}.module-form-block-wr .soc-serv-main .soc-serv-split-title-grey{margin-bottom:5px}.module-order-history.orderdetail .module-orders-list tr td:first-child{text-align:left;border-right-width:0}.module-order-history.orderdetail .module-orders-list tr td:last-child{border-left-width:0}.module-order-history.orderdetail .module-orders-list tr.gn td{text-align:center}.module-order-history.orderdetail .t{font-size:18px;line-height:20px;margin:0;padding:20px 0 20px 35px;text-align:center}.module-order-history.orderdetail .module-orders-list.result td{background:rgba(0,0,0,0)!important;font-size:13px;font-weight:700}.module-order-history.orderdetail .module-orders-list.result td.custom_t2{padding-right:35px;text-align:right;padding-left:15px}.module-order-history.orderdetail .module-orders-list.result tr:first-of-type{border-top-color:transparent!important}.module-order-history .module-orders-list td.drop-cell{display:none;text-align:left;padding:0}.module-order-history .module-orders-list .drop-cell .not-payed{margin:0;padding:5px 35px}.module-order-history .module-orders-list .drop-cell .t{margin:0;padding:5px 0 5px 35px;font-weight:700}.module-order-history .module-orders-list td.drop-cell .item-shell th{padding-bottom:0}.module-order-history .module-orders-list td.drop-cell .item-shell td:first-child{text-align:left;padding-left:35px}.module-order-history .module-orders-list td.drop-cell .item-shell td{padding:5px;text-align:center}.module-order-history .item-name-cell,.module-order-history .item-name-th,.module-orders-list td{text-align:left}.module-order-history .history-table{margin:17px 0 0}.module-order-history .history-table>tbody>tr>td{padding:11px 0}.module-order-history .history-table .drop-cell{padding:0;border:none}.module-order-history .drop-cell .result-row{padding:24px 20px 17px 35px}.module-order-history .result-row a.button{margin-right:12px}.module-order-history .result-row a.button:last-child{margin-right:0}.module-order-history .result-row .result{float:right;padding:0 10px 0 0}.module-order-history .result-row .result table{margin-bottom:0}.module-order-history .result-row .result .r{padding-left:15px;position:relative}.module-order-history .result-row .result .title{font-weight:700}.module-order-history .drop-cell .result-row .alert{padding-left:19px;font-size:11px;position:relative}.module-order-history tr.tr-d.o>td,.module-order-history tr.tr-d.o>td a,.module-order-history tr.tr-d.o>td span{color:#fff!important}.module-orders-list .order-extra-properties{text-transform:lowercase}.module-order-history .item_name,.module-orders-list .order-extra-properties .item{display:inline-block;white-space:nowrap}.cart_shell .cost-cell .price.discount *,.module-cart .cost-cell .discount strike,.module-cart .cost-cell .price_name{line-height:14px;font-family:Ubuntu,Arial,Helvetica,sans-serif}.module-order-history .item_name .icon{background:0 0;margin:0 5px 0 0}.module-order-history ul.tabs{margin-left:20px}.module-order-history ul.tabs li.cur span{border:0}.module-order-history ul.tabs li span{padding-top:8px;text-transform:none;font-family:Ubuntu,Arial,Helvetica,sans-serif;border-bottom:1px solid #b4b4b4}.module-order-history .item_name{cursor:pointer}#new_basket,.module-order-history .pagination-separator{display:none}.module-order-history .item_name .name{font-size:14px;font-weight:600;position:relative;top:1px}.module-orders-list td,.module-products-list td{padding:7px 0 6px 10px;vertical-align:middle}.module-order-history .order-status-cell,.module-order-history .order-status-th{width:160px}.module-order-history .item-name-th{padding-left:19px}.module-order-history .item-name-cell{font-weight:700;padding-left:13px}.module-order-history .module-orders-list .tr-d td{cursor:pointer}.module-order-history .tr-d .item_name:hover .icon i,.module-order-history .tr-d:hover .item_name:hover .icon i{background-position:8px -210px}.module-order-history .tr-d.opened .item_name:hover .icon i{background-position:-25px -212px}.module-order-history .tr-d.opened .item_name .icon i{background-position:-25px -190px}.module-order-history td{border-left:1px solid transparent;border-right:1px solid transparent}.module-orders-detail{width:100%;box-shadow:0 1px 2px #e7e7e7}.module-orders-detail tr{border:1px solid #e7e7e7}.module-order-history .module-orders-list .tr-d{border-top:1px solid transparent;transition:none 0s ease 0s}.module-order-history .module-orders-list .tr-d:last-child td{border-bottom:0}.module-order-history .drop-container .item-shell thead td:first-child{border-left:0}.module-order-history .drop-container .item-shell thead td:last-child{border-right:0}.module-order-history .result-row .result td{border:0;padding:0;text-align:left}.module-order-history .drop-cell .result-row .result .name{text-align:right}.module-order-history .order_property{font-weight:700}.module-order-history .module-pagination{margin-top:20px}.popup .form-description-wrapp{padding:10px 30px}.cart_confirmation{margin-top:25px}.cart_empty .img{width:150px}.basket_fly #header .cart_empty{margin:20px 20px 23px 15px}.cart_empty .img_wrapp{width:180px}#order_form_div .sale_order_table .ps_logo img:hover,#order_form_div .sale_order_table .ps_logo input[type=radio]:checked+label img{cursor:pointer;padding:0}#order_form_div form .title.summary{border-bottom:0;margin-bottom:0}#order_form_div .sale_data-table th{padding:10px;font-weight:400}#order_form_div .section table.colored.summary{width:100%;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box}.summary .cost_cell,.summary .order_item_weight{white-space:nowrap}.page_not_found{margin-top:70px}.page_not_found td{vertical-align:top}.page_not_found td.image{width:60%}.page_not_found td.image img{max-width:100%}.page_not_found td.description{text-align:center;padding-top:40px}.page_not_found td.description .title404{font-size:44px;line-height:48px}.page_not_found td.description .subtitle404{text-transform:uppercase;font-size:18px;line-height:24px}.page_not_found td.description .back404,.page_not_found td.description .back404 a{font-size:12px}.page_not_found td.description .descr_text404{font-size:13px;line-height:20px;margin-top:20px}.page_not_found td.description .back404,.page_not_found td.description .back404 a,.page_not_found td.description .descr_text404,.page_not_found td.description .subtitle404{font-family:Ubuntu,Verdana,Arial,Helvetica,sans-serif}.page_not_found td.description .btn_big{margin-top:20px}.page_not_found td.description .back404{margin-top:5px}.catalog_detail .set_block .title{font-size:20px;margin-bottom:29px;font-weight:500}.set_block .cost .price:not(.discount){padding:0}.catalog_detail .bx_item_set_hor_container_big .title{line-height:30px}.catalog_detail .set_block{padding:26px 29px 34px;border-top:1px solid #E7E7E7}.catalog_detail .bx_item_set_hor_container_big .total_wrapp{clear:left}.bx_modal_body .bx_kit_item,.catalog_detail .set_block .item{min-width:180px;-webkit-transition:box-shadow ease-out .2s;-moz-transition:box-shadow ease-out .2s;-o-transition:box-shadow ease-out .2s;transition:box-shadow ease-out .2s;padding:0;display:inline-block;vertical-align:top;position:relative;zoom:1;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;margin:0 13px 5px 0;width:180px!important}.set_block .result_block .item{margin-right:0;margin-top:55px}.set_block .item .item_inner{padding:20px 20px 15px}.set_block .result_block .item .item_inner{padding-right:0}.set_block .bx_modal_body .item .item_inner,.set_block .bx_modal_body .slider_wrapp .item .item_inner{padding-bottom:13px}.set_block .item.main_item .item_inner{padding:19px 19px 14px}.bx_modal_body .bx_kit_item:hover{padding:0}.bx_item_set_hor .bx_item_set_hor_item{margin-right:0;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;display:inline-block;vertical-align:top;position:relative;zoom:1;margin-bottom:15px;min-width:150px}.bx_item_set_hor li{display:inline-block}ul li.stretch{display:inline-block;width:100%;zoom:1;margin:0!important;padding:0!important}.bx_item_set_hor .bx_item_set_hor_item .bx_item_set_img_container,.bx_kit .bx_kit_img_container{box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;width:100%}.bx_item_set_hor .bx_item_set_hor_item.equally .item_wrapp{width:100%}.bx_item_set_hor .bx_item_set_hor_item .item_wrapp.main_item{border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px;padding:0;border:1px solid #efefef}.catalog_detail .set_wrapp .item:hover,.set_block .item:not(.r):hover{box-shadow:0 0 20px rgba(0,0,0,.1)}.bx_modal_body .item_wrapp{white-space:nowrap;margin-right:0;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;display:inline-block;vertical-align:top;position:relative;zoom:1;min-width:180px;font-size:0}.bx_modal_body .item_wrapp .item_block_title{position:absolute;top:-41px}.bx_modal_body .item_block_title{font-size:16px;font-weight:600}.bx_modal_body .bx_kit_one_section{margin:0;padding:0;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;width:100%;font-size:0;white-space:nowrap;text-align:justify}.bx_modal_body .separator,.catalog_detail .set_block .separator{display:inline-block;position:relative;width:13px;margin:0 10px 0 0;min-height:140px}.bx_modal_body .separator:after,.catalog_detail .set_block .separator:after{content:"";display:block;position:absolute;top:50%;margin-top:13px;width:15px;height:15px;background:url(../images/icons_wish.png) -116px -206px no-repeat}.set_block .equally .separator:after,.set_block .item_equally.separator:after{background-position:-158px -206px}.bx_item_set_hor .bx_item_set_hor_item .bx_item_set_img_container a,.bx_kit .bx_kit_img_container,.bx_kit .bx_kit_img_container a,.bx_modal_body .bx_kit_item .image,.bx_modal_body .bx_kit_item .image a,.catalog_detail .set_wrapp .item .image{display:block;height:140px;line-height:140px;vertical-align:middle;text-align:center;position:relative;zoom:1;margin:0 0 20px}.bx_item_set_hor .bx_item_set_hor_item .bx_item_set_img_container img,.bx_kit .bx_kit_img_container img,.bx_modal_body .bx_kit_item .image img,.catalog_detail .set_wrapp .item .image img{position:absolute;margin:auto;top:0;bottom:0;left:0;right:0;border:0;border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px}.bx_item_set_hor .bx_item_set_hor_item .item-title a,.bx_modal_body .bx_kit_item .item-title a,.catalog_detail .set_block .item .item-title a{text-decoration:none},.bx_item_set_hor .bx_item_set_hor_item .item-title a span,.catalog_detail .set_block .item .item-title a span{font-size:12px;line-height:15px}.bx_item_set_hor .bx_item_set_hor_item .price,.bx_modal_body .bx_kit_item .price,.set_block .item .cost.prices .price{font-size:18px;line-height:19px}.bx_item_set_hor .bx_item_set_hor_item .price,.bx_modal_body .bx_kit_item .price{margin-top:5px}.bx_item_set_hor .bx_item_set_hor_item .price.discount,.bx_modal_body .bx_kit_item .price.discount{margin-top:0}.bx_item_set_hor .bx_item_set_hor_item_info .item-title span,.catalog_detail .set_block .item_info .item-title span{line-height:16px}.catalog_detail .bx_item_set_hor_container_big .popup_open{float:right;clear:none;margin:-4px 0 0}.set_block .item-title a{font-size:12px}.catalog_detail .bx_item_set_hor_container_big .total_wrapp .total_title{font-size:14px;display:inline-block}.bx_kit_result_one .price,.bx_kit_result_one .price *,.bx_kit_result_tre .price,.bx_kit_result_tre .price *,.bx_kit_result_two .price,.bx_kit_result_two .price *,.set_block .item .total_wrapp .cost .price{font-size:28px;line-height:28px;font-weight:600;display:inline-block;float:none;margin:0 0 3px}.catalog_detail .bx_item_set_hor_container_big .total_wrapp .total_price{vertical-align:bottom}.set_block .total_wrapp .buttons_wrapp{margin:20px 0 0}.catalog_detail .bx_item_set_hor_container_big .total_wrapp .total_buttons .buttons_wrapp .one_click{margin-left:10px}.set_block .item .total_wrapp .price.discount,.set_block .item .total_wrapp .price.discount *{font-size:16px;line-height:18px;display:block;font-weight:400;margin:0 0 12px}.bx_item_set_hor .bx_item_set_hor_item a.remove{display:none;position:absolute;top:-10px;left:-10px}.bx_item_set_hor .bx_item_set_hor_item:hover a.remove{display:inline-block}div[id^=CatalogSetConstructor] .popup-window{border:0;border-radius:0;-moz-border-radius:0;-webkit-border-radius:0;overflow:hidden;width:1104px}.popup-window.popup-window-titlebar .popup-window-top-row .popup-window-center-column,.popup-window.popup-window-titlebar .popup-window-top-row .popup-window-left-column,.popup-window.popup-window-titlebar .popup-window-top-row .popup-window-right-column,.popup-window.popup-window-titlebar-light .popup-window-top-row .popup-window-center-column,.popup-window.popup-window-titlebar-light .popup-window-top-row .popup-window-left-column,.popup-window.popup-window-titlebar-light .popup-window-top-row .popup-window-right-column{border-top:0;box-shadow:none;-moz-box-shadow:none;-o-box-shadow:none;-webkit-box-shadow:none;background:#fff;border-bottom:2px solid}.popup-window-content{margin:0}.bx_modal_container{padding:25px}.bx_modal_container .bx_modal_body{margin-top:41px}.bx_modal_container .bx_modal_description{display:inline-block;margin:0 0 0 24px;font-size:12px}.bx_modal_container .bx_modal_small_title{display:block;font-size:17px}.bx_item_set_hor_container_big .bx_item_set_del,.bx_kit_item .bx_kit_item_del{display:none;height:24px;width:24px;top:-9px;left:-9px;position:absolute;border-radius:25px;-moz-border-radius:25px;-webkit-border-radius:25px;cursor:pointer}.bx_item_set_hor_container_big .bx_item_set_del:after,.bx_kit_item .bx_kit_item_del:after{content:".";font-size:0;display:block;width:21px;height:21px;background:url(../images/close_icons.png) -30px 4px no-repeat;cursor:pointer}.popup-window-titlebar h2{margin:0;padding:34px 24px 33px}.bx_kit_two_section{margin-top:15px}.bx_kit_two_section .title{margin:25px 0 11px 10px;display:inline-block}.bx_kit_two_section .triangle,.bx_kit_two_section .triangle i{width:0;height:0;display:inline-block;margin:0 auto}.bx_kit_two_section .triangle{margin:0 auto;text-align:center;position:absolute;top:-16px;border-left:10px solid transparent;border-right:10px solid transparent;border-top:9px solid transparent;border-bottom:9px solid #e6e6e6!important}.bx_kit_two_section .triangle i{top:-4px;left:-9px;position:relative;border-left:9px solid transparent;border-right:9px solid transparent;border-top:7px solid transparent;border-bottom:7px solid #fafafa!important}.bx_kit_item_empty:hover{box-shadow:none;-moz-box-shadow:none;-o-box-shadow:none;-webkit-box-shadow:none}.bx_kit_item .bx_kit_item_add{position:absolute;top:-10px;right:-10px;width:24px;height:24px;cursor:pointer;border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px;display:none;background:#ddd}.bx_kit_item_add:after{content:".";font-size:0;display:block;width:27px;height:27px;background:url(../images/icons_wish.png) -178px -211px no-repeat;cursor:pointer}.bx_kit_two_section .slider_wrapp{position:relative}.bx_kit_two_section .slider_wrapp .flex-direction-nav{position:absolute;top:-34px;right:26px;font-size:0}.bx_kit_item_slider_arrow_left.disabled,.bx_kit_item_slider_arrow_right.disabled{opacity:.5}.bx_modal_container.bx_kit{padding-bottom:30px}.bx_kit_one_section .bx_kit_item_discount{right:0;left:0;z-index:111}.bx_kit_two_section{position:relative;border-top:1px solid #e5e5e5;margin:15px -30px -30px;padding:0 6px 0 20px;box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-webkit-box-sizing:border-box;background:#f7f7f7}.bx_kit_item_empty{background:#f7f7f7;border:1px solid #e5e5e5}.bx_kit_two_section_ova{position:relative;overflow:hidden;padding-top:15px;padding-bottom:30px;width:100%;white-space:nowrap}.bx-touch .bx_kit_two_section_ova{overflow-x:auto}.bx_kit_two_item_slider{position:relative;text-align:left}.bx_kit_item_slider{position:relative;float:left;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding-left:10px}.bx_kit_item_slider .bx_kit_item{z-index:112;padding:0;margin-right:0;background:#fff}.bx_kit_item_slider_drag{box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;position:relative;z-index:115;padding:10px;background:#fafafa;border:1px solid #e7e7e7}.bx_kit_item_slider_drag .bx_kit_item_add{display:none!important}.bx_kit_item_slider_drag,.bx_kit_item_slider_drag *{height:auto!important}#basket_line .basket_hidden{display:none}.header-cart-block .cart .delay_link{text-decoration:underline}.header-cart-block .cart .delay_link,.header-cart-block .cart .delay_link *{font-family:Ubuntu,Arial,Helvetica,sans-serif;font-size:11px}.header-cart-block .cart .delay_link .icon{display:inline-block;height:18px;width:19px;background:url(../images/basket_icons.png) -56px -12px no-repeat}.header-cart-block .cart .delay_link:hover .icon{background-position:-56px -138px}.one_click_buy_result_fail,.one_click_buy_result_success{display:none}.search-page form{display:inline-block;margin-bottom:20px;padding:15px 20px 17px}.search-page form input[type=text]{height:30px;position:relative;zoom:1;bottom:-1px}.basket_button.in-subscribe span,.basket_button.to-order span,.basket_button.to-subscribe span{background:0 0;padding-left:6px;width:92px;text-align:center}.catalog_detail .item_main_info .buttons_block .basket_button.in-subscribe span,.catalog_detail .item_main_info .buttons_block .basket_button.to-subscribe span{padding-left:3px;width:90px;text-align:center}.order-checkout label{display:inline-block}.order-checkout label.error{position:relative;top:inherit;right:inherit;width:100%;text-align:right}.order-checkout label img{pointer-events:none}.fancybox-lock .fancybox-overlay{overflow:auto}.button,button.button,input.button{opacity:1;font-weight:400;cursor:pointer;font-size:13px;line-height:16px;text-transform:none;background:#ddd;color:#000;text-decoration:none;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;text-align:center;padding:8px 11px 9px;display:inline-block;border:none;outline:0;position:relative;font-family:Ubuntu,Arial,Helvetica,sans-serif;width:auto;vertical-align:middle}.bx-firefox .button,.bx-ie .button{padding-top:8px;padding-bottom:9px}.button.transparent,.bx-firefox .button.transparent,.bx-ie .button.transparent{padding-top:7px;padding-bottom:8px}.button:hover{color:#fff}.button.transparent{color:#ddd;border:1px solid #ddd;background:0 0}.button.icon{text-indent:-9999px;background:0 0;border:0}.button.wicon{padding:10px 20px 9px 13px}.button.wicon i{display:inline-block;width:11px;height:15px;background:url(../images/icons_wish.png) -49px -4px no-repeat;vertical-align:middle;margin:0 8px 0 0}.button.noborder{background:0 0;border:0}.button.transparent:hover{background:0 0;color:inherit}.button.transparent.grey_br:not(.text):hover{color:#6d6d6d}.button.big{padding:10px 30px}.button.big_btn{padding:10px 21px 10px 20px}.button.vbig_btn{padding-top:10px;padding-bottom:11px;width:auto}.bx-firefox .button.vbig_btn,.bx-firefox .button.vbig_btn.transparent,.bx-ie .button.vbig_btn{padding-top:9px;padding-bottom:10px}.button.vbig_btn.wides{padding-left:20px;padding-right:20px;width:auto}.button.big_btn.transparent{padding-top:9px;padding-bottom:9px}.button.long.transparent.big_btn,.button.vbig_btn.transparent{padding-top:10px;padding-bottom:9px}.button.bold.big_btn{padding-bottom:11px}.button.big_btn.in-cart,.button.bold.big_btn.transparent{padding-top:10px;padding-bottom:9px}.bx-firefox .button.big_btn,.bx-ie .button.big_btn{padding-bottom:10px}.bx-firefox .button.big_btn.transparent,.bx-ie .button.big_btn.transparent{padding-bottom:9px}.button.big_btn span,.button.bold{font-size:13px;font-weight:600}.button.medium{padding:10px 13px 12px}.bx-firefox .button.medium,.bx-ie .button.medium{padding:9px 13px 10px}.button.wide{padding:14px 20px 13px}.button.short{padding:11px 20px 10px}.bx-firefox .button.short,.bx-ie.button.short{padding-top:9px}.button.msmall{padding:9px 11px}.button.msmall.transparent{padding:8px 13px}.button.small,.bx-firefox .button.small,.bx-ie .button.small{padding:6px 11px 8px}.button.small.transparent{padding-top:6px;padding-bottom:6px}.bx-firefox .button.small.transparent,.bx-ie .button.small.transparent{padding:6px 13px}.button.vsmall{padding:5px 12px 6px}.button.sbold{font-weight:500}.button.wide.transparent{padding:13px 20px 12px}.button.medium.transparent{padding:9px 13px 11px}.bx-firefox .button.medium.transparent{padding:8px 13px 9px}.bx-ie .button.medium.transparent{padding-bottom:10px;padding-top:10px}.bx-ie .button.medium{padding-top:10px;padding-bottom:11px}.button.transparent.white{color:#fff;border-color:#fff}.button.transparent.white:hover,.button.white_bg,.bx_filter .button.white_bg:hover{background:#fff;border-color:#fff}.button.video::before{content:"";background:url(../images/top_icons_flex.png) no-repeat;display:inline-block;width:7px;height:7px;margin:0 6px 0 0}.button.back_button,.button.grey{background:#b0c3cc}.button.grey_br span,.button.grey_br.transparent,.button.grey_br.transparent:hover{color:#6d6d6d;border-color:#e5e5e5}.button.back_button span{text-shadow:0 1px 1px #69808c;-moz-text-shadow:0 1px 1px #69808c;-o-text-shadow:0 1px 1px #69808c;-webkit-text-shadow:0 1px 1px #69808c}.button.fast_order{padding:10px 20px 9px}.flex-direction-nav li,.flex-direction-nav li:first-child,.flex-direction-nav li:hover{border-bottom-width:0!important}ul.slider_navigation{right:0;position:absolute;top:0;z-index:1;margin:0}ul.slider_navigation ul{margin:0}.bx-ie .specials_slider_wrapp ul.slider_navigation.top{top:27px}.bx-ie ul.slider_navigation.top,ul.slider_navigation.top{top:18px}ul.slider_navigation.top_big{top:21px}ul.slider_navigation.compare{position:initial}ul.slider_navigation.compare li{position:absolute;z-index:10;top:-14px}ul.slider_navigation.compare li:not(.disabled){cursor:pointer}ul.slider_navigation.compare .flex-nav-prev{left:0}ul.slider_navigation.compare .flex-nav-next{right:0}.flex-direction-nav li,.flex-direction-nav li a,.flex-direction-nav li span{width:29px;height:29px;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px;display:inline-block}.bx-ie .flex-direction-nav li,.bx-ie .flex-direction-nav li a,.bx-ie .flex-direction-nav li span{font-size:0;line-height:0}.flex-direction-nav li:first-child{margin-right:5px}.flex-direction-nav li a,.flex-direction-nav li span{background:url(../images/arrows.png) no-repeat}.flex-direction-nav li:not(.disabled) span{cursor:pointer}.flex-direction-nav li .flex-prev{background-position:10px -50px}body .dark .flex-direction-nav li .flex-prev,body .flex-direction-nav li:hover .flex-prev{background-position:10px -26px}body .flex-direction-nav li .flex-next{background-position:-27px -50px}.dark .flex-direction-nav li .flex-next,.flex-direction-nav li:hover .flex-next{background-position:-27px -26px}.flex-direction-nav .flex-disabled{display:none}.border .flex-direction-nav{margin:0;font-size:0;line-height:0}.border .flex-direction-nav li{border:1px solid #e5e5e5!important;margin:0;border-radius:0}.border .flex-direction-nav li,.border .flex-direction-nav li a{width:33px;height:33px}.border .flex-direction-nav li:first-child{border-radius:2px 0 0 2px}.border .flex-direction-nav li:last-child{border-radius:0 2px 2px 0}.border.custom_flex .flex-direction-nav li:hover,.border.custom_flex .flex-direction-nav li:hover a{background-color:#f6f6f7!important}.border.custom_flex .flex-direction-nav li a{background-position:5px -18px}.border.custom_flex .flex-direction-nav li:hover a{background-position:5px 6px}.border.custom_flex .flex-direction-nav li.flex-nav-next a{background-position:-70px -18px}.border.custom_flex .flex-direction-nav li.flex-nav-next:hover a{background-position:-69px 6px}.border.custom_flex .flex-direction-nav li.flex-nav-next{border-left-width:0!important}.absolute .flex-direction-nav>li{position:absolute;top:1px}.absolute .flex-direction-nav li.flex-nav-prev{left:-30px}.absolute .flex-direction-nav li.flex-nav-next{right:-30px}.view_sale_block{margin:10px 0 0;white-space:nowrap}.view_sale_block>div{display:inline-block;vertical-align:top;font-size:0}.view_sale_block .title{font-size:10px;line-height:15px;color:#666;margin:0 0 5px}.view_sale_block .values{margin:0 0 5px;line-height:15px;font-size:0}.view_sale_block .values .item{background:#eee;border-radius:2px;display:inline-block;vertical-align:top;font-weight:600;font-size:18px;width:40px;height:36px;padding:4px 0 0;text-align:center;position:relative;margin:0 2px 0 0}.view_sale_block .values .item:last-child{margin:0}.view_sale_block .values .item:after,.view_sale_block .values .item:before{content:"";background:#fff;width:6px;height:6px;display:block;position:absolute;right:-4px;border-radius:6px;z-index:10}.view_sale_block .values .item:last-child:after,.view_sale_block .values .item:last-child:before{display:none}.view_sale_block .values .item:before{top:12px}.view_sale_block .values .item:after{bottom:12px}.view_sale_block .values .item .text{opacity:.6;font-weight:400;font-size:10px;display:block}.view_sale_block .count_d_block{margin:0 4px 0 0}.view_sale_block .quantity_block .values .item{background:#4f4f4f;color:#fff}.view_sale_block .countdown{width:124px;height:44px;display:block;overflow:hidden}.tabs-head li:before,.tabs_section .tabs-head li:before,.view_sale_block .values .item:nth-child(3):after,.view_sale_block .values .item:nth-child(3):before{display:none}.tabs-head{margin:0;padding:0;position:relative;font-size:0;overflow:hidden;list-style-type:none}.tabs_section .tabs-head{margin:0}.tabs-head li{display:inline-block;cursor:pointer;vertical-align:top;font-size:14px;color:#333;opacity:1;font-weight:600;margin:0 10px -1px 0;padding:11px 18px 14px;border:1px solid #e5e5e5;background:#f7f7f7;position:relative}.tabs_section .tabs-head li{margin:0 4px -1px 0;border-radius:2px 2px 0 0}.tabs_section .tabs-head li:hover{background-color:#fff}.tabs_section .tabs-body{margin-top:-1px}.tabs_section .tabs-body>li{width:100%;padding:34px 0 20px}.tabs-head li.current{background:#fff;z-index:1}.tabs-head li.current:before{content:"";display:block;height:2px;width:100%;position:absolute;top:0;left:0;right:0;padding:0;margin:0}.tabs-head li span{line-height:18px;display:inline-block;color:#444;font-weight:600}.tabs-body{border-top:1px solid #e5e5e5;margin-top:-1px;position:relative}.tabs-body>li.current>div:last-of-type{margin-bottom:0}.border_block .block_wr{margin:0 0 20px;color:red}.border_block .block_wr.alert-success{color:green}106  89197|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/css/media.min.css|177b2a67body{min-width:300px}ul.tabs li.stretch{display:none}@media (max-width:767px){a.scroll-to-top{display:none}}@media screen and (min-width:992px){.bx_filter.bx_filter_vertical{display:block!important}}@media all and (min-width:768px){.bx_filter.bx_filter_vertical #modef_mobile{display:none!important}}@media all and (max-width:960px){.info_item .top_info .brand+div{float:none}.info_item .top_info .article{text-align:left}}@media (min-width:1200px){.personal_wrapper .row .col-lg-4{width:33.33333333%}}@media only screen and (max-width:1174px){#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company-graf-container{float:none}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-company-desc{margin-top:15px;padding-left:0}}@media only screen and (max-width:1400px){.bg_image_site{display:none}}@media only screen and (max-width:1290px){header .menu.top.catalogfirst li.full>.dropdown>li,header .menu.top>li.full>.dropdown>li{width:50%}.menu_top_block li.full>.dropdown>li:nth-child(3n+1){clear:both}}@media all and (max-width:1200px){.rows_block .block_list .col-4{width:33.33%}}@media all and (max-width:1180px){.start_promo .item{border-bottom-width:1px}.block_wr .top_block a{display:inline-block}.footer_top .wrap_md .phones .phone_wrap a{font-size:17px}.catalog_detail .element_detail_text .sh{padding-right:3%}.wrapper_inner .stores .stores_list{padding:0 20px 0 0}.wrapper_inner .stores .all_map{margin:00px 0 0}.has_menu #header .middle-h-row .center_block{white-space:nowrap}}@media all and (max-width:1176px){.wrapper_inner #content .catalog_block .catalog_item_wrapp:nth-child(3n){width:210px}.catalog_block .catalog_item_wrapp:nth-child(3n) .item_wrap{margin-right:0}.wrapper_inner #content .catalog_block .catalog_item_wrapp:nth-child(4n){width:230px}.wrapper_inner .catalog_block .catalog_item_wrapp:nth-child(4n) .item_wrap{margin-right:20px}}@media all and (max-width:1168px){.start_promo .item.normal:last-child.s_4,.start_promo .item.normal:nth-child(3n+1),.start_promo .item.s_2.normal,.start_promo .item.s_4.normal{border-left-width:1px}.start_promo .item.normal:first-child,.start_promo .item.normal:nth-child(2n+1)+.item:not(.s_2),.start_promo .item:first-child,.start_promo .item:nth-child(3n+1){border-left-width:0}.start_promo .item.s_4.normal,.start_promo .normal:nth-child(3n+1).s_4{border-left-width:1px!important}.start_promo.other .normal:nth-child(3n+1).s_4{border-left-width:0!important}.start_promo.normal_view .item:nth-child(4n+1){border-left-width:0}.start_promo.normal_view .item.normal:nth-child(4n+2),.start_promo.normal_view .item.normal:nth-child(4n+4){border-left-width:1px!important}.footer_top .wrap_md .phones{padding-left:2%}.footer_bottom .social_block .social{padding-left:13%}}@media all and (max-width:1120px){.tizers_block .item .title,.tizers_block .item .title a{font-size:11px}.registraion-page .main_info .label_block_capcha{width:100%}.registraion-page .main_info .img_block_capcha{width:100%;padding-left:0}.registraion-page .main_info .img_block_capcha img{float:none}.captcha-row.register-captcha .captcha_image .captcha_reload{left:179px;right:initial}.bx-firefox .top-h-row .phones{padding-top:7px}.top-h-row ul.menu{text-align:left}.top-h-row .phones{white-space:nowrap}.catalog_detail .set_block .popup_open{display:none}.wrapper_inner .stores .stores_list{width:71%}}@media (max-width:1100px){.rows_block .col-4,.specials.tab_slider_wrapp ul.tabs_content li.tab .catalog_block .col-4{width:33%}.footer_inner .rows_block .col-4{width:25%}}@media all and (max-width:1050px){.wrapper_inner .info_item .middle_info .buy_block .counter_wrapp{white-space:normal}.top-h-row .phone_wrap .phone_text a{display:none}.top-h-row .phone_wrap .phone_text a:first-child{display:inline-block}.info_item .top_info .article{text-align:center}}@media all and (max-width:1020px){.no_goods .button{float:none;margin-top:37px}#order_form_div .info_block .wrap_md>div{width:100%}#order_form_div .info_block .l_block:after,#order_form_div .info_block .r_block:before{display:none}#order_form_div .info_block .wrap_md .l_block{border-bottom:1px solid #eee}.bx_ordercart .module-cart td{white-space:normal}.bx_ordercart .bx_ordercart_order_table_container tbody td.control{width:90px}.bx_ordercart .bx_ordercart_order_table_container tbody td.itemphoto{width:129px}.bx_ordercart .bx_ordercart_order_table_container tbody td.itemphoto>div{width:90px;height:90px;line-height:90px}.bx_ordercart .bx_ordercart_order_table_container .bx_ordercart_photo{height:90px;background-size:contain}.bx_ordercart .bx_ordercart_order_table_container table thead td.item{padding-left:145px}}@media all and (max-width:1020px) and (min-width:950px){.flexslider .banner_buttons,.flexslider .banner_text,.flexslider .banner_title{margin-right:40px}.top_slider_wrapp .flexslider .banner_title span{font-size:35px}}@media all and (max-width:1000px){#header .middle-h-row .center_block,.has_menu #header .middle-h-row .center_block{padding-right:30px;padding-left:30px}body #footer .bottom_left_icons,body #footer ul.bottom_main_menu,body #footer ul.bottom_submenu{clear:both;display:block;width:100%}.top-h-row ul.menu{width:40%}.top-h-row .phones{text-align:right}body #header .basket_fly{width:700px;right:-700px}#header .basket_fly .basket_title{margin-right:15px}.basket_sort ul.tabs li{margin-right:0}.info_item .top_info .article+.brand{padding-left:0}.catalog_detail .element_detail_text .sh{padding-right:0}}@media all and (max-width:992px){.wrapper_inner .tizers_block .item{width:50%;text-align:center;margin:5px 0 20px}.wrapper_inner .tizers_block .item:nth-child(n+4){text-align:center}.footer_top .wrap_md .phones .order,.personal_wrapper .orders_wrapper .sale-order-detail-total-payment-container .sale-order-detail-total-payment-list-right>li{text-align:left}.menu_top_block.catalog_block .dropdown>li.full>.dropdown>li,header .menu.top.catalogfirst li.full>.dropdown>li{width:50%}.menu_top_block li.full>.dropdown>li:nth-child(2n+1){clear:both}.menu_top_block li.full>.dropdown>li:nth-child(3n+1){clear:none}.footer_bottom .social_block,.footer_top .wrap_md .phones{width:100%}.footer_top .wrap_md .phones{padding-left:0;padding-top:25px}#footer .wrap_md .empty_block{width:36%}.footer_bottom .social_block .social_wrapper,.footer_top .wrap_md .phones .phone_block{padding:0 0 0 19px;width:64%}.footer_bottom .menu_block,.footer_top .sblock{width:100%;padding:0}.footer_bottom .social_block{padding-top:23px}.footer_bottom .social_block .social_wrapper .social{padding-left:0}#footer .footer_bottom{padding-top:19px}.top-h-row ul.menu>li a{padding:0 5px}.bx-firefox .menu>li>a span{padding-top:8px}#header .middle-h-row .main-nav ul.menu>li>a{padding:0 9px}.main-nav ul.menu>li>a span{font-size:12px}.wrapper_inner #content .catalog_block .catalog_item_wrapp:nth-child(3n){width:210px}.catalog_block .catalog_item_wrapp:nth-child(3n) .item_wrap{margin-right:0}.wrapper_inner .stores .stores_list{width:68%}#header .middle-h-row td.text_wrapp{display:none}#basket_form_container .top_control{float:none;clear:both;padding:15px 0 0}#basket_form_container .top_control .delete_all{display:inline-block;float:none}#bx-soa-order>.bx-soa,#bx-soa-total{width:100%}#bx-soa-total-mobile{display:block!important}#bx-soa-order #bx-soa-orderSave{display:none}#bx-soa-order #bx-soa-total .bx-soa-cart-total.bx-soa-cart-total-fixed{position:relative!important;opacity:1!important}#bx-soa-order #bx-soa-total .bx-soa-cart-total-ghost{padding:0!important}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company-graf-container{float:left}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-company-desc{margin-top:0;padding-left:140px}#bx-soa-order .bx-soa-section .bx-soa-section-content{padding-left:29px}#bx-soa-order .bx-soa-pp-company-selected{float:left;width:75%}#bx-soa-order .bx-soa-pp-price{float:right;width:25%}.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-methods-information-block .sale-order-detail-payment-options-methods-image-container.opened,.sale-acountpay-block .sale-acountpay-pp div .sale-acountpay-pp-company{width:100%}#bx-soa-order .bx-soa-item-tr{padding:20px 20px 20px 110px;border-top:1px solid #f3f3f3}#bx-soa-order .bx-soa-item-tr.bx-soa-item-tr-first{border-top:none}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-block{padding-left:0;overflow:visible}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr .bx-soa-item-td{border:none;padding:0!important;min-width:0!important}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-img-block{margin-left:-90px;margin-top:0}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-content{padding-left:0}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr .bx-soa-item-td.bx-soa-item-properties{margin-top:10px}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr .bx-soa-item-td.bx-soa-item-properties>div{padding:0;text-align:left}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr .bx-soa-item-td:last-child{padding-right:0!important}#bx-soa-order #bx-soa-basket .bx-soa-item-td-title{padding-bottom:0}#bx-soa-order .alert-danger,#bx-soa-order .bx-soa-coupon,#bx-soa-order .bx-soa-more{margin-left:-29px}#bx-soa-order .bx-soa-cart-total .bx-soa-cart-total-line-total .bx-soa-cart-d{white-space:normal}.bx-soa-item-tr .bx-soa-item-td,.bx-soa-item-tr.bx-soa-item-info-container{height:auto}.personal_wrapper .orders_wrapper .sale-order-list-shipment-status-block,.personal_wrapper .orders_wrapper .sale-order-list-status-alert,.personal_wrapper .orders_wrapper .sale-order-list-status-success,.sale-order-detail-payment-options-methods-info-title-status-alert,.sale-order-detail-payment-options-methods-info-title-status-success,.sale-order-payment-change-status-alert,.sale-order-payment-change-status-success{margin-left:0}.personal_wrapper .orders_wrapper .sale-order-detail-about-order-inner-container-repeat>a{display:block;float:none}.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-methods-information-block .sale-order-detail-payment-options-methods-info.opened{margin:0;width:100%;padding-left:15px!important;padding-top:10px}.personal_wrapper .row div.sale-order-detail-payment-inner-row-template{margin-left:15px}.sale-order-detail-order-item-td.sale-order-detail-order-item-properties>div{float:left}}@media (min-width:992px){.personal_wrapper .col-md-offset-3{margin-left:25%}.personal_wrapper .col-md-offset-5{margin-left:41.66666667%}.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment-composition-map{margin-left:16.66666667%}}@media all and (max-width:992px) and (min-width:768px){.wrapper_inner .staff.list .item .image{float:none}.wrapper_inner .staff.list .item .info{margin:10px 0 0}}@media (max-width:991px) and (min-width:768px){.personal_wrapper .orders_wrapper .visible-sm{display:block!important}.hidden-sm{display:none!important}}@media (max-width:991px){.personal_wrapper .orders_wrapper .col-sm-12{width:100%}.personal_wrapper .orders_wrapper .col-sm-10{width:83.33333333%}.personal_wrapper .orders_wrapper .col-sm-7{width:58.33333333%}.personal_wrapper .orders_wrapper .col-sm-6{width:50%!important}.personal_wrapper .orders_wrapper .col-sm-5{width:41.66666667%}.personal_wrapper .orders_wrapper .col-sm-2{width:16.66666667%}.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-methods-button-element{display:block!important;float:none;width:50%;margin:10px auto 0}.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment-composition-map>.row{margin:0 -1px}.personal_wrapper .orders_wrapper .sale-order-title{padding-right:0}}@media all and (max-width:992px) and (min-width:951px){.catalog_section_list .section_item .image{width:100px}.catalog_section_list .section_item .image img{max-width:100%;max-height:100%}}@media all and (max-width:960px){.staff.list .item .image{height:85px;line-height:82px;width:85px}.staff.list .item .info{margin-left:110px}}@media all and (min-width:951px){.catalog_page .catalog_menu_ext .dropdown,.front_page .catalog_menu_ext .dropdown{display:none!important}.bx_filter.bx_filter_vertical{display:block!important}}@media all and (max-width:950px){.wrapper.has_menu #header .middle-h-row .center_block .middle_phone,.wrapper.has_menu #header .middle-h-row .center_block .search{width:100%;display:block;margin-left:0}.wrapper.has_menu #header .middle-h-row .center_block .middle_phone{margin:0 0 10px}.middle_phone .phones .order_wrap_btn{margin-top:0}body #content .wrapper_inner .left_block,body #content .wrapper_inner .left_block>*{display:none}.catalog.vertical .adaptive_filter,body .wrapper_inner .left_block .left_menu{display:block}body .wrapper_inner .left_block.vertical{position:absolute;width:95%;float:none;padding:0;margin:0;display:block}body #content .wrapper_inner .right_block{padding-left:0;margin:0!important}.news_akc_block .img img{max-height:100%}body .right_side.catalog,body .top_slider_wrapp .flexslider .slides li td.img{display:none}.js_filter .bx_filter.bx_filter_vertical .bx_filter_section{margin:0}.m_color_none.h_color_colored .main-nav{background:#fff}.m_color_none.h_color_colored .main-nav .menu>li>a{color:#1d1a1a}.m_color_none.h_color_colored .header_wrap .center_block .search_block .icon{background-position:-66px -178px}.m_color_none.h_color_colored #header{margin-bottom:47px}.h_color_colored.m_color_none ul.menu .child{padding-top:8px}.h_color_white.m_color_none ul.menu .child{padding-top:6px}.head_type_1 #header{border-bottom-width:1px}.basket_fly #header .middle-h-row .center_block .main-nav ul.menu{width:100%}.basket_fly .wrapper_inner ul.menu .child{margin-top:0}.basket_fly .main-nav .search_middle_block{top:-100%;right:65px;margin:-16px 0 0;width:50%}body .top_slider_wrapp .flexslider .slides>li{background-size:200% auto}body .wrapper .top_slider_wrapp .flexslider,body .wrapper .top_slider_wrapp .flexslider .slides>li,body .wrapper .top_slider_wrapp .flexslider .slides>li td{height:300px!important}body .top_slider_wrapp .flex-direction-nav li{top:120px}body .left_side.catalog_detail{padding-right:0}body .top-h-row .phone{width:auto}body .top-h-row ul.menu{width:45%;padding-left:0}body #header .center_block .main-nav{width:100%;position:absolute;right:0;left:0;top:100%;margin:18px 0 0;padding:7px 0}body .wrapper.head_type_1:not(.front_page) #header{margin-bottom:60px}body .wrapper.head_type_1:not(.front_page) #header+.wrapper_inner{border-top:1px solid #f0f0f0;box-shadow:0 0 5px #f0f0f0;-moz-box-shadow:0 0 5px #f0f0f0;-o-box-shadow:0 0 5px #f0f0f0;-webkit-box-shadow:0 0 5px #f0f0f0}body .wrapper.head_type_1:not(.front_page) .middle{margin-top:10px}body .wrapper.head_type_1 .top_slider_wrapp{margin-top:49px!important}body #header:not(.border)+.middle.main{padding-top:207px}body #header:not(.border)+.middle{padding-top:227px}body .top_slider_wrapp .flexslider .slides li td.text{width:100%}body .top_slider_wrapp .flexslider .slides li td.text .banner_buttons,body .top_slider_wrapp .flexslider .slides li td.text .banner_text,body .top_slider_wrapp .flexslider .slides li td.text .banner_title{margin-left:80px;margin-right:80px}body .top_slider_wrapp .flexslider .slides li td.text *{text-align:center}body .right_block.catalog .catalog_block .catalog_item_wrapp{width:33%;width:230px}.catalog_detail .element_detail_text .sh{margin:0}.wrapper_inner .bottom.middle td>.coupon #COUPON{width:200px}.wrapper_inner .middle .module-cart table tr td.count-cell{padding-left:5px;padding-right:5px}.wrapper_inner .middle .module-cart table tr td.count-cell .counter_block.big_basket{width:74px}.wrapper_inner .middle .module-cart .counter_block.big_basket>span{line-height:27px;height:27px;width:21px}.wrapper_inner .middle .module-cart .counter_block.big_basket input[type=text]{font-size:10px;height:27px;width:32px}.has_menu #header .middle-h-row .center_block{white-space:normal}.basket_fly .search_middle_block,.has_menu .search_middle_block{position:absolute}.wrapper.m_color_none .top_slider_wrapp{margin-top:50px}body .wrapper:not(.front_page) .middle{float:none}.js_filter.filter_horizontal{overflow:visible;padding:0;position:relative}.js_filter .bx_filter.bx_filter_vertical{display:none;position:absolute;margin:0;width:100%;top:25px;box-shadow:0 0 10px rgba(0,0,0,.15);-moz-box-shadow:0 0 10px rgba(0,0,0,.15);-webkit-box-shadow:0 0 10px rgba(0,0,0,.15);z-index:101}body .personal_page #content .wrapper_inner .left_block{display:block;float:none;width:100%}body .personal_page #content .wrapper_inner .left_block .left_menu{display:block}body .personal_page #content .wrapper_inner .left_block .left_menu>li{display:inline-block;margin-top:3px}body .personal_page #content .wrapper_inner .left_block .left_menu>li>a{border:none}body .personal_page #content .wrapper_inner .right_block .breadcrumbs{display:none}}@media all and (max-width:946px){.wrapper_inner #content .catalog_block .catalog_item_wrapp:nth-child(3n){width:230px}.wrapper_inner .catalog_block .catalog_item_wrapp:nth-child(3n) .item_wrap{margin-right:20px}}@media all and (max-width:900px){.wrapper_inner .stores .stores_list{width:66%}.basket_wrapp .module-cart table.bottom.middle .bottom_btn td.last_blockk.basket_error_wrapp{float:left!important}.count-cell div.error{white-space:normal}.footer_inner .left_block{display:none}.footer_inner .right_block{padding-left:0}#footer .mobile_copy{display:block}}@media all and (max-width:870px){#footer .footer_bottom_inner .phones,#footer .footer_bottom_inner .social_wrapper,.info_item .top_info .brand{float:none}body .module-cart .discount-cell,body .module-cart .discount-th,body .module-cart .weight-cell,body .module-cart .weight-th{display:none}.wrap_md .news_wrap,.wrap_md .subscribe_wrap{width:100%;margin:0}.wrap_md .subscribe_wrap .subscribe-form{margin:30px 0}.subscribe-form .wrap_bg{background-position:center -34px;font-size:0}.subscribe-form .wrap_bg .sform,.subscribe-form .wrap_bg .top_block{width:100%;display:block;vertical-align:middle;margin-top:0}.subscribe-form .wrap_bg .top_block{padding:0 0 20px}.subscribe-form .top_block .image{display:none}.subscribe_wrap .subscribe-form .top_block .image+.text{padding:0}.subscribe_wrap .subscribe-form form.sform>div{display:block;width:100%}.top-h-row .phones{text-align:left}body .top-h-row ul.menu{width:40%}.module_products_list td.price-cell{width:18%}.services_block .item,.shops.list .item .phone_email,.shops.list .item .schedule{width:100%}.module-order-history.orderdetail .module-orders-list tr td.vimg{padding-right:2px;padding-left:2px}.module-order-history.orderdetail .module-orders-list tr td.vdscnt{padding-right:5px;padding-left:5px}.shops.list .item .schedule_phone_email{text-align:center}.wrapper_inner .info_item .middle_info .buy_block,.wrapper_inner .info_item .middle_info .prices_block{width:100%;padding:0}.wrapper_inner .info_item .middle_info .buy_block{padding:20px 0 0}.wrapper_inner .info_item .middle_info .buy_block .counter_wrapp .button_block{margin:0}.info_item .middle_info .buy_block .one_click{display:inline-block}.wrapper_inner .stores .stores_list{width:64%}.table .wrapp_stockers .like_icons{height:auto;margin-top:0!important;position:initial}.table .module_products_list td.like_icons{width:56px;padding-left:5px}.module_products_list td.like_icons.full{width:30px}.wrapp_stockers .like_icons>div{margin-right:0}.rows_block .item_block,.specials.tab_slider_wrapp ul.tabs_content li.tab .catalog_block>div.item{width:50%}.footer_inner .social_wrapper .rows_block .item_block,.viewed_block .rows_block .item_block{width:auto}.footer_bottom_inner .menus .rows_block .col-3{width:33%}.footer_bottom_inner .rows_block .menus{width:60%}.footer_bottom_inner .rows_block .soc{width:40%}.footer_bottom_inner .rows_block .soc .soc_wrapper{float:right}.top-h-row .phones{padding-left:20px;padding-right:0}.top-h-row .h-user-block a.icon{padding-right:14px}.personal_wrapper .orders_wrapper .sale-order-payment-change-pp-list .sale-order-payment-change-pp-company .sale-order-payment-change-pp-company-smalltitle{font-size:12px}}@media all and (max-width:800px){.wrapper.has_menu #header .middle-h-row .center_block .middle_phone .phone_text a{font-size:15px}.wrapper.has_menu #header .middle-h-row .center_block .middle_phone .order_wrap_btn{margin-left:16px}.module_products_list td.price-cell{width:14%}.sort_header .sort_filter a{margin-right:10px}.wrapper_inner .module-order-history .result-row a.button{margin-right:0}.wrapper_inner .stores .stores_list{width:60%}.top-h-row .phones{padding-left:5px}}@media all and (min-width:769px){body .catalog.horizontal .adaptive_filter{display:none!important}.bx-core .filter_horizontal:not(.js_filter) .bx_filter.bx_filter_vertical,.bx_filter_vertical.bx_filter .hidden_values{display:block!important}.bx_filter .bx_filter_section{margin:0 0 27px}}@media all and (max-width:768px){.start_promo .item.s_4.normal,.start_promo.normal_view .item.normal:nth-child(3n+1){border-left-width:0!important}.start_promo.normal_view .item.normal:nth-child(3n+2){border-left-width:1px!important}.wrapper_inner{padding-left:15px;padding-right:15px}.catalog .adaptive_filter{display:block}.top-h-row .phones{width:56%;padding-left:0}.top-h-row .h-user-block{text-align:right}.wrapper.has_menu .top-h-row ul.menu{display:none}.wrapper.has_menu .top-h-row .phones{display:block}.wrapper.has_menu #header .phones,.wrapper.has_menu #header .wrapper_inner .middle-h-row .center_block .middle_phone{display:none}.wrapper.has_menu #header .middle-h-row .center_block{padding:0 20px}body .colored #header .center_block .main-nav{border-top:1px solid #fff;margin-top:20px}body .wrapper.has_menu .white #header .center_block .main-nav{margin-top:12px}body .colored #header{padding-bottom:20px}.wrapper_inner .middle-h-row .search_middle_block.active .middle_form{width:94%}.backet_back_wrapp .basket_back{display:block}.backet_back_wrapp.error .basket_back{display:inline-block}.wrapper_inner .basket_wrapp .module-cart table.bottom.middle .bottom_btn td .iblock .icon_error_block{float:none;display:inline-block;text-align:left;margin:15px 0 0}.iblock .icon_error_block:after{display:block;right:-65px;left:initial}.wrapper_inner .stores .stores_list{width:55%}.news_akc_block .flex-control-paging,.stores .flex-control-paging{position:absolute;bottom:-9px;display:none;z-index:12;margin:0}.news_akc_block .flex-control-paging{bottom:4px}.news_akc_block .news_slider_wrapp{padding:0 0 10px}.wrapper_inner .start_promo .item,.wrapper_inner .start_promo .item.wide50{width:33%}.wrapper_inner .start_promo .item.wide100{width:100%}.news_akc_block .flex-viewport .item,.stores .flex-viewport .item{margin-bottom:20px}.stores .all_map{margin:-1px 0}.stores{padding-bottom:24px}.print .basket_print_desc .store_property{width:47%}.print .basket_print_desc .store_property:nth-of-type(3){clear:both}.info_item .middle_info .sku_props{margin:0}.info_item .middle_info .buy_block,.info_item .middle_info .prices_block{width:100%;padding:0}.info_item .middle_info .prices_block{margin:0 0 17px}body .flex-control-paging li{height:9px;width:9px}body .flex-control-paging li a,body .front_slider_wrapp .flex-control-nav li a{height:8px;width:8px;border-radius:100%;-moz-border-radius:100%;-webkit-border-radius:100%}body .flex-control-paging li a,body .front_slider_wrapp .flex-control-paging li a{background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2I5YjliOSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNjZGNkY2QiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);background:-moz-linear-gradient(top,#b9b9b9 0,#cdcdcd 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#b9b9b9),color-stop(100%,#cdcdcd));background:-webkit-linear-gradient(top,#b9b9b9 0,#cdcdcd 100%);background:-o-linear-gradient(top,#b9b9b9 0,#cdcdcd 100%);background:-ms-linear-gradient(top,#b9b9b9 0,#cdcdcd 100%);background:linear-gradient(to bottom,#b9b9b9 0,#cdcdcd 100%);filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#b9b9b9', endColorstr='#cdcdcd', GradientType=0 );background-position:inherit!important}body .flex-control-paging li a.flex-active,body .flex-control-paging li:hover a{height:9px;width:9px}.registraion-page .main_info .label_block,.registraion-page .main_info .text_block{width:100%;padding-left:0}.registraion-page .main_info,.registraion-page .social_block{width:100%;border-right-width:0;padding-left:0}table.colored.offers_table td.price{white-space:normal}table.colored.offers_table td.price .cost.prices .price{font-size:16px}.adaptive.text{display:block}.catalog_detail .adaptive.text>div{display:inline-block;margin:5px 3px 0 0;vertical-align:top}.catalog_detail .adaptive.text>.count.ablock{display:block}.catalog_detail .adaptive.text>.wrap_md .buy{margin-left:6px}.catalog_detail .tabs_content .prices_tab{padding-top:0!important}.catalog_detail .offers_table .more_text,.catalog_detail .offers_table td.buy,.catalog_detail .offers_table td.count,.catalog_detail .offers_table td.counter_block_wr,.catalog_detail .offers_table td.one_click_buy,.catalog_detail .offers_table thead td,.catalog_detail table.colored td.like_icons{display:none}.wrapper_inner .catalog_detail table.offers_table tr.offer_stores td .stores_block_wrap{border-bottom:1px solid #e7e7e7;padding-bottom:17px;margin-bottom:18px}.flex-direction-nav{display:none!important}.slider_navigation.compare .flex-direction-nav{display:block!important}.wrapper_inner .catalog_detail .adaptive_extended_info .article{float:none;padding:10px}.wrapper_inner .catalog_detail .adaptive_extended_info .brand{float:none;padding:10px;text-align:center}.specials_slider_wrapp ul.tabs{padding-right:0}.popup{min-width:250px}.popup .prompt{width:100px;font-size:11px;padding-left:19px}.popup .pop-up-title{padding:12px 12px 8px}.popup .close{right:10px;top:9px}.popup .form-wr{padding:10px 14px}.front_slider .item-title a,.front_slider .item-title a span{line-height:17px}.front_slider li .image img{max-width:125px}.item_wrapp img,.wrapper_inner .catalog_detail .wrapp_docs{width:100%}.stores_block_wrap .stores_block .stores_text_wrapp .main_info{max-width:300px}.stores_block_wrap .stores_block .stores_text_wrapp .main_info>span{display:block;padding:0}.breadcrumbs,body .module_products_list .quantity-cell{display:none}.module-cart table td.remove-cell{padding:2px;width:10px}body .module-cart table td.thumb-cell a{height:40px;width:40px}.wrapper_inner .middle .basket_wrapp .module-cart table td.thumb-cell{width:40px}.basket_wrapp .module-cart table.bottom.middle td{margin-bottom:2px;margin-top:2px;padding:20px 0 0}.basket_wrapp .module-cart table.bottom.middle td.row_titles{padding-right:10px}.basket_wrapp .module-cart table.bottom.middle td.row_values{padding-left:10px;padding-top:10px;width:229px;margin-top:20px}.basket_wrapp .module-cart table.bottom.middle .bottom_btn td{padding:0 20px 0 0;margin-bottom:18px}.basket_wrapp .module-cart table.bottom.middle .bottom_btn td.last_blockk:last-of-type{padding-right:20px!important;margin-bottom:18px!important}.basket_wrapp .module-cart table.bottom.middle .bottom_btn td>*{float:none!important}.bottom.middle .total.item_title{margin-top:10px}ul.tabs li span{text-transform:none}body .wrapper .top_slider_wrapp .flexslider,body .wrapper .top_slider_wrapp .flexslider .slides>li,body .wrapper .top_slider_wrapp .flexslider .slides>li td{height:220px!important}body .top_slider_wrapp .flexslider .slides>li .wrapper_inner>table{background:0 0!important}body #content .left_block+.right_block:not(.catalog) .module-map,body .store_map .store_description{width:100%;padding:0}body .catalog_section_list .section_item{width:100%}body .catalog_section_list .section_item_inner{margin-right:0;width:100%}.print body .module-cart .order_item_price_type,.print body .module-cart .order_item_props,.print body .module-cart .order_item_weight,.print body .module-cart tfoot .delay-cell,body .module-cart .name-cell,body .module-cart .name-th,body .module-cart .sum-th,body .module-cart .summ-cell,body .module-cart .summ-th{display:table-cell}body .module-cart .name-cell,body .module-cart .name-th,body .module-cart .order_item_price_type,body .module-cart .order_item_props,body .module-cart .order_item_weight,body .module-cart tfoot .delay-cell{display:none}body .module-cart .colored tfoot td.extended-cell{display:table-cell}body .contacts_left,body .contacts_right{float:none;margin:0;position:relative;width:100%}body .contacts_left{margin-top:39px}body .contacts_left .store_description .store_property{width:50%;float:left;margin-bottom:20px;padding-right:20px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;margin-top:0}body .contacts_left .store_description .store_property:nth-child(3){clear:both}body .contacts_right blockquote{margin-top:14px;clear:both}body h1{font-size:32px;line-height:36px;padding-top:20px;padding-bottom:21px}.wraps>.wrapper_inner{padding-top:0}.wraps>.wrapper_inner.front{padding-top:24px}body .top-h-row ul.menu{display:none}body .front_slider .preview_text,body .top_slider_wrapp .banner_text{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}body .front_slider .preview_text{text-overflow:ellipsis;text-overflow:-o-ellipsis-lastline}body .flexslider .text .banner_title span,body .front_slider .item-title a span{font-size:17px;line-height:22px}body .btn_big,body .front_slider_wrapp a.read_more{font-size:12px;line-height:28px;height:27px;box-shadow:none;-moz-box-shadow:none;-webkit-box-shadow:none;border-bottom-width:1px}body .front_slider .read_more:hover{border-bottom-width:1px!important}body .top_slider_wrapp .banner_text{text-overflow:ellipsis;text-overflow:-o-ellipsis-lastline}body .front_slider .price{font-size:21px}body .top_slider_wrapp .flex-direction-nav li{top:100px}body .top_slider_wrapp .flex-direction-nav li,body .top_slider_wrapp .flex-direction-nav li a{height:30px;width:30px}body .top_slider_wrapp .flexslider .slides li td.text .banner_buttons,body .top_slider_wrapp .flexslider .slides li td.text .banner_text,body .top_slider_wrapp .flexslider .slides li td.text .banner_title{margin-left:40px;margin-right:40px}body .index_bottom .banners_column{display:none}body .index_bottom .info_column,body .index_bottom .info_column .about_column{padding-left:0}body.news_slider_wrapp .flex-control-nav.flex-control-paging{display:block}body .index_bottom .info_column .news_column .news_slider_navigation,body .specials_slider_wrapp ul.slider_navigation{display:none}body .wrapper.basket_fly .basket_normal,body .wrapper.head_type_2 .top-h-row .search{display:block}body #footer ul.bottom_main_menu,body #footer ul.bottom_submenu{width:100%;text-align:justify}body .top-h-row .search{width:30%}#content .right_block.catalog{margin-top:35px}.wrapper_inner #content .right_block .inner_wrapper{right:0;padding:0}.basket_fly .wrapper_inner .basket_wrapp .wrapp_all_icons{width:207px}.basket_fly #header .middle-h-row .basket_wrapp{vertical-align:middle;padding-left:4px}.basket_fly .main-nav .search_middle_block{display:none}.wrapper.basket_fly:not(.has_menu) .top-h-row .form_mobile_block .search_middle_block{display:block}body #content .left_block:not(.catalog){width:100%;float:none}body #content .left_block.catalog{width:100%;margin:0}.bx_filter.bx_filter_vertical{position:absolute;margin:0;width:100%;top:25px;box-shadow:0 0 10px rgba(0,0,0,.15);-moz-box-shadow:0 0 10px rgba(0,0,0,.15);-webkit-box-shadow:0 0 10px rgba(0,0,0,.15);z-index:101}.left_block .bx_filter .bx_filter_section{margin:0}body .bx_filter_container #modef{top:4px;right:3px}body .bx_filter_vertical .filter_button{float:none}.bx_filter_vertical input[type=checkbox]+label:not(.dib){float:left;margin-right:10px}body .bx_filter_vertical .bx_filter_section .bx_filter_button_box.active .bx_filter_block .bx_filter_parameters_box_container{width:100%;text-align:left}.wrapp_all_inputs.wrap_md .wrapp_change_inputs{width:35%;position:relative;margin:0 0 4px}.wrapp_all_inputs.wrap_md .wrapp_slider{width:65%;padding:10px 0 0 20px}.smartfilter .bx_ui_slider_track{margin-top:16px}.bx_filter .bx_filter_block .bx_filter_popup_result.right#modef_mobile{left:0;background:0 0;position:relative;color:#888;margin:0;padding-left:0;line-height:20px;display:inline-block}.bx_filter .bx_filter_popup_result.right a,.bx_filter_container_modef{display:none}.filter_horizontal .bx_filter #modef_mobile{display:none!important}.filter_horizontal{overflow:visible;padding:0;position:relative}div[id^=smartFilterDropDown]{max-width:690px}body .bx_filter_vertical .filter_button.show{margin-right:5px}.bx_filter.bx_filter_vertical,body #content .left_block.catalog>div{display:none}body #content .left_block .left_menu li{display:inline-block;margin-top:3px}body #content .right_block,body #content .right_block.catalog{padding-left:0}body #content .left_block+.right_block:not(.catalog){margin-top:20px}body .right_side .ask_small_block{margin-bottom:30px}body .right_side{width:100%;padding-left:0}body .right_side.sections_list{display:none}body .left_side{padding-right:0}body ul.left_menu>li.exit{margin-top:0;padding-top:0;border-top:0}body .module-order-history ul.tabs li .triangle{margin-top:0}body .module-order-history ul.tabs li span{padding-top:5px}.wrapper_inner .bottom.middle td>.coupon #COUPON{margin-bottom:12px}.wrapper_inner .bottom.middle td>.coupon .apply-button{display:block;clear:both}.bx_ordercart_order_sum td.custom_t1{width:80%}.module-order-history .drop-cell .result-row a.button{margin:0 10px 10px 0}.articles-list.lists_block.faq .item .left-data{float:none;width:100%;max-width:initial!important}.articles-list.lists_block.faq .right-data{margin:20px 0 0;padding:0 0 2px;width:100%}.articles-list.lists_block.faq .right-data .preview-text{padding-right:20px}#content .ask_big_block .ask_btn_block{float:none}#content .ask_big_block .description{padding:20px 0 0}.footer_bottom .social_block .social_wrapper,.wrapper_inner .footer_top .wrap_md .phones{padding-left:0}.job.border_block .wrap_md .text{width:50%}.job.border_block .wrap_md .but,.job.border_block .wrap_md .phone{width:25%}.basket_normal .popup.card_popup_frame .basket_popup_wrapper .basket_popup_wrapp{top:41px}.news_block .info_block .news_items .item{width:100%;padding-left:0}.wrapper_inner .footer_bottom .menu_block,.wrapper_inner .footer_bottom .social_block{width:100%}.wrapper_inner .registraion-page .form-block{padding:0 15px}.wrapper_inner .registraion-page .main_info{width:69%}.wrapper_inner .registraion-page .social_block{width:31%}.wrapper_inner .soc-avt .row input[type=text]{width:90%}body #header .wrapper_inner ul.menu li .child .child_wrapp{padding:25px 20px 17px}.wrapper_inner .articles-list.sections .item{width:100%}.wrapper_inner .module-order-history .module-orders-list .drop-cell .not-payed{padding:5px 7px}.rss_feed_icon+.filter_block,.rss_feed_icon+.news_detail_wrapp{margin:35px 0 0}.popup .captcha-row .captcha_input{position:initial}.wrapper_inner .item .child_container{display:none}.start_promo .item i.title span,.wrapper_inner .wrap_tizer .wr_block .title .inner_text{font-size:15px}.start_promo .item i.price span,.wrapper_inner .wrap_tizer .wr_block.price .inner_text{font-size:14px}.basket_wrapp>div>a{display:block}#header .basket_wrapp .basket_sort,#header .middle-h-row form.basket_wrapp{display:none}body #header .basket_fly{width:auto;background:0 0;right:0!important}.basket_wrapp .clicked>a{display:block}.bx_filter_vertical.bx_filter .hidden_values{display:none}.bx_filter_vertical.bx_filter .inner_expand_text{float:none;clear:both}.bx_filter_vertical.bx_filter .expand_block{display:inline-block;font-size:12px;margin:5px 0 0;border-bottom:1px dotted #ddd;cursor:pointer}.bx_filter_vertical .bx_filter_block.limited_block{max-height:none;overflow-y:visible}.wrapper_inner .wrap_tizer{text-align:left}.wrapper_inner .start_promo .wrap_tizer{left:0}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company-graf-container{float:left}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-company-desc{margin-top:0;padding-left:140px}#bx-soa-order .bx-soa-pp-desc-container{margin-top:20px;padding-left:0;padding-right:0}#bx-soa-order .bx-soa-pp-list-termin{width:auto}#bx-soa-order .bx-soa-section .bx-soa-section-title-container .col-sm-9{float:left;width:75%}#bx-soa-order .bx-soa-section .bx-soa-section-title-container .col-sm-3{float:left;width:25%}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr .bx-soa-item-td.bx-soa-item-properties{width:50%!important;display:inline-block;vertical-align:top;float:none}.bx-soa-item-nth-4p1{display:none}.sale-order-detail-about-order-inner-container-repeat{margin:0}.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment-composition-map,.personal_wrapper .orders_wrapper .sale-order-detail-total-payment-container{width:100%}.personal_wrapper .col-xs-6{width:50%}body .personal_page #content .wrapper_inner .left_block .left_menu{margin:0;padding:20px 0 0}}@media all and (min-width:768px){header .mobile_menu{display:none!important}}@media all and (max-width:767px){header .wrap_menu{height:auto;padding:0}#header .middle-h-row .center_block,header .menu_top_block{display:none}.menu.adaptive{display:block}#header .catalog_menu .wrapper_middle_menu .inc_menu{padding-left:0}.top-h-row .menu.topest>li,header .menu_top_block>li{float:left}.catalog_section_list .section_item .image{width:90px}.catalog_section_list .section_item .image img{max-width:100%;max-height:100%}.bx_ordercart .bx_sort_container{margin-bottom:20px}.bx_ordercart .bx_ordercart_order_table_container{border-top:none}.bx_ordercart .bx_ordercart_order_table_container table thead{display:none}.bx_ordercart .bx_ordercart_order_table_container>table,.bx_ordercart .bx_ordercart_order_table_container>table>tbody{display:block}.bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr{position:relative;display:block;padding:29px 20px 20px 145px;border-top:1px solid #f3f3f3}.bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr>td{display:block;padding:0;border:none}.bx_ordercart .bx_ordercart_order_table_container table tbody td.custom{padding:0}.bx_ordercart .bx_ordercart_order_table_container table tbody td.custom span{font-size:12px;line-height:20px;color:#999}.bx_ordercart .bx_ordercart_order_table_container table tbody td.item{width:auto;padding-top:0}.bx_ordercart .bx_ordercart_order_table_container table tbody td.item .bx_ordercart_itemtitle{padding-right:79px;text-align:left}.bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr:after{content:"";display:table;clear:both}.bx_ordercart .bx_ordercart_order_table_container table tbody td.itemphoto{float:left;margin:-9px 0 0 -125px;padding:0;width:90px}.bx_ordercart .bx_ordercart_order_table_container table tbody td.price{padding-top:1px}.bx_ordercart .bx_ordercart_order_table_container table tbody td.price+td.custom>span{display:none}.bx_ordercart .bx_ordercart_order_table_container tbody td.control{position:static;padding:0}.bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr>td:not(.itemphoto):not(.margin):not(.item){width:25%;margin:10px -3px 0 0;display:inline-block;vertical-align:top}.bx_ordercart #basket_items_delayed tbody td.control a:first-of-type,.bx_ordercart tbody td.control a:last-of-type{position:absolute;right:40px;top:20px}.bx_ordercart .bx_ordercart_order_table_container table tbody td.custom span,.bx_ordercart .bx_ordercart_order_table_container table tbody td.custom>div{display:inline-block;vertical-align:middle}.bx_ordercart .bx_ordercart_order_table_container table tbody td.custom>div[id^=sum_]{display:block}.bx_ordercart #basket_items .custom div[id^=discount_value]{margin-top:-3px}.bx_ordercart .bx_ordercart_order_table_container tbody td.custom .centered{margin-top:0}.bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr>td:not(.item):not(.itemphoto):not(.margin){width:50%}.bx_ordercart .bx_ordercart_order_table_container table.counter{margin-top:12px}.bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr>td.price{margin-top:20px!important}.bx_ordercart .bx_ordercart_order_pay>div{width:100%;float:none}.bx_ordercart_order_pay_right{margin-top:0}.bx-touch .bx_ordercart .bx_sort_container a{width:50%;margin-bottom:-1px}.bx-sap .sale-acountpay-pp,.sale-order-payment-change-pp,.sale-order-payment-change-pp-item-container{max-width:100%}.personal_wrapper .orders_wrapper .hidden-xs{display:none!important}.personal_wrapper .orders_wrapper .visible-xs{display:block!important}}@media all and (max-width:736px){.wrapper_inner #content .catalog_block .catalog_item_wrapp:nth-child(3n){width:210px}.catalog_block .catalog_item_wrapp:nth-child(3n) .item_wrap{margin-right:0}}@media all and (max-width:716px){.wrapper_inner #content .catalog_block .catalog_item_wrapp:nth-child(3n){width:230px}.catalog_block .catalog_item_wrapp:nth-child(3n) .item_wrap{margin-right:20px}.wrapper_inner .staff.list .item .image{float:none}.wrapper_inner .staff.list .item .info{margin:10px 0 0}.stores_block_wrap .stores_block .stores_text_wrapp.image_block .main_info>span{max-width:200px}.rows_block .block_list .item_block{width:50%}.magnifier{max-width:220px}}@media all and (max-width:650px){.basket_sort ul.tabs li span,body .module-cart .cost-cell,body .module-cart .row_values .price,body .module-cart .summ-cell,body .module-cart .summ-cell *{font-size:14px}.footer_top .sblock .wrap_icon{display:none}.footer_top .sblock .forms .email_wrap{width:72%}.footer_top .wrap_md .phones .order{padding:0 0 0 20px}.inner_wrapper .sort_header .sort_filter a .icon,.sort_header.view_table .sort_filter a .icon{display:inline-block}body .top-h-row .phone .icon{display:none}body .top-h-row .phone{margin-top:11px}body .module-orders-list .order-extra-properties{display:inline}.filter_block ul{float:none}.filter_year{float:none;margin:5px 0}body .module-order-history.orderdetail .module-orders-list.goods td,body .module-orders-list .drop-container th.count-th,body .module-orders-list .drop-container th.price-th,body .module-orders-list td.count-cell,body .module-orders-list td.date-cell,body .module-orders-list td.order-status-cell,body .module-orders-list td.pay-status-cell,body .module-orders-list td.price-cell,body .module-orders-list.colored thead td{display:none}body .module-order-history.orderdetail .module-orders-list.goods td.price,body .module-order-history.orderdetail .module-orders-list.goods td.vname,body .module-order-history.orderdetail .module-orders-list.goods td.vqnt{display:table-cell}body .module-cart .sum-th,body .module-cart .summ-cell,body .module-cart .summ-th,body .sort_header .sort_filter a span{display:none}.module-order-history .drop-cell .result-row a.button22{margin-top:5px}.basket_wrapp .module-cart table.bottom.middle td.row_values{width:160px;margin-top:21px}.wrapper_inner .middle .basket_wrapp .module-cart table.colored tr td{padding:4px}body .module-cart table td.thumb-cell a{line-height:40px}.wrapper_inner .middle .basket_wrapp .module-cart table tr td.count-cell{padding-top:16px}.wrapper_inner .basket_wrapp .module-cart table.bottom.middle td.row_values .item_title{display:inline-block;float:left;margin:0 10px 0 0;font-weight:700}.wrapper_inner .basket_wrapp .module-cart table.bottom.middle td.row_titles .item_title{display:none!important}.bottom.middle .total.item_title,.wrapper.has_menu #header .wrapper_inner .middle-h-row .center_block .search{display:none}.wrapper_inner .basket_wrapp .module-cart table.bottom.middle td.row_values .wrap_prices{float:left}.wrapper_inner .phones .order_wrap_btn{margin-left:5px}.wrapper_inner .phones>span .callback_btn,.wrapper_inner .top-h-row .h-user-block .module-enter{font-size:11px}.wrapper_inner .footer_top .sblock,.wrapper_inner .footer_top .wrap_md .phones{width:100%}.footer_top .wrap_md .phones .phone_block{padding-left:0}body .authorization-cols .col.authorization,body .authorization-cols .col.registration{width:100%;padding-right:0}.wrapper.has_menu #header .middle-h-row .center_block{padding:0 20px 0 0}.wrapper.has_menu .top-h-row .form_mobile_block .search_middle_block{display:block}.wrapper_inner .forms .form_block,.wrapper_inner .forms .text_block{width:100%;padding:0}.basket_print{display:inline-block}.wrapper_inner .basket_wrapp .module-cart table.bottom.middle .bottom_btn .basket_checkout_wrapp{text-align:left}.basket_wrapp .module-cart table.bottom.middle .bottom_btn td.last_blockk{float:left!important}.bx_order_make .bx_block.r1x3{width:35%}.bx_order_make .bx_block.r3x1{width:65%}.job.border_block .wrap_md .text{width:70%}.job.border_block .wrap_md .phone{width:30%}.job.border_block .wrap_md .but{width:100%;display:block;text-align:left;padding:20px 0 0}.container .page_not_found td.description,.container .page_not_found td.image{display:block;width:100%}.wrapper_inner .stores .stores_list{width:51%}.authorization-cols .form-block{height:auto!important}.catalog_section_list .item_block{width:100%}.sort_header .sort_filter a i.arr{width:11px}.sort_header .sort_filter a i.arr:after{top:0;left:1px;font-size:14px}.magnifier{max-width:150px}}@media all and (max-width:630px){.popup .soc-avt{padding:18px 10px 14px}.popup .reg-new{padding:35px 10px}.popup .prompt{width:auto;padding-left:0}.wrapper_inner .catalog_detail .tabs_content .char,.wrapper_inner .catalog_detail .tabs_content .serv{width:100%;padding:0!important}.catalog_detail .tabs_content .descr_div .char_block{width:100%;padding-right:0}.module-order-history .module-orders-list td.drop-cell .item-shell td:first-child{padding-left:5px}.module-order-history .drop-cell .result-row{padding-left:10px;padding-right:10px}.auth_wrapp.form-block .main_info,.auth_wrapp.form-block .socserv{width:100%}.auth_wrapp.form-block .socserv{padding:0 14px 20px}.popup.enter_frame.show{width:80%}.popup.show .popup-intro .pop-up-title{font-size:20px;line-height:18px}}@media all and (max-width:600px){.center_block .search_block,.md-50.img,.search_middle_block,.stores_block_wrap .stores_block .stores_text_wrapp.image_block .imgs,body .item_main_info .item_slider{display:none}.footer_top .wrap_md .phones .phone_wrap a,.module_products_list .cost.prices .price{font-size:15px}.stores_block_wrap .stores_block .stores_text_wrapp.image_block .main_info{margin:0}.tizers_block .item{width:50%;text-align:center}.tizers_block .item:nth-child(n+5){text-align:center}.catalog_detail .info_item .middle_info .prices .price.discount{margin-top:3px}.wrapper_inner .start_promo .item,.wrapper_inner .start_promo .item.wide100,.wrapper_inner .start_promo .item.wide50{width:50%;border:1px solid #fff;padding-bottom:47%}.md-50.big,.subscribe-form .wrap_bg .sform,.subscribe-form .wrap_bg .top_block{width:100%}.wrapper_inner .start_promo .item span.wrap_main,.wrapper_inner .start_promo .item.wide100 span.wrap_main,.wrapper_inner .start_promo .item.wide50 span.wrap_main{max-width:500px}.wrapper_inner .start_promo{margin:0}.start_promo .item.normal:nth-child(3n){border-right-width:1px}.start_promo .item.normal:nth-child(2n+1)+.item:not(.s_2),.start_promo .item.normal:nth-child(3n+1),.start_promo .item.s_2.normal{border-left-width:1px}.start_promo .item.normal:nth-child(3n+1).s_4,.start_promo .item.s_4.normal{border-left-width:1px!important}.start_promo.normal_view .item.normal:nth-child(2n+1){border-left-width:0!important}.start_promo.normal_view .item.normal:nth-child(2n+2){border-left-width:2px!important}.subscribe-form .wrap_bg .sform{margin-top:22px}.md-50.big{padding:31px 0 37px}.footer_top .sblock .forms .email_wrap{width:70%}.basket_fly #header .middle-h-row .center_block ul.menu,.header_wrap #header .middle-h-row .center_block ul.menu{width:100%;padding:0}.wrapper.m_color_dark #header .catalog_menu ul.menu>li.current{background:#3f3f3f}body .header_wrap.white .menu>li.current>a span{border-bottom-color:transparent}body .wrapper .top_slider_wrapp .flexslider,body .wrapper .top_slider_wrapp .flexslider .slides>li,body .wrapper .top_slider_wrapp .flexslider .slides>li td{height:200px!important}body .top_slider_wrapp .flex-direction-nav li{top:85px}body .catalog_detail .adaptive_extended_info_wrapp,body .item_main_info .item_slider.flex{display:block}.catalog_detail .item_main_info .item_slider:after,.catalog_detail .item_main_info .right_info .info_item:before,.top_info .more_block,body .catalog_detail .item_main_info .item_slider .thumbs,body .catalog_detail .right_info .info_block,body .catalog_detail .right_info .preview_text,body .catalog_detail .right_info hr,body .catalog_detail .right_info hr.separator{display:none}body .catalog_detail .item_main_info .item_slider{padding:0;width:100%;float:none}body .catalog_detail .item_main_info .right_info{padding:0;border-top:1px solid #e5e5e5}body .catalog_detail .extended_info{margin-bottom:0}body .catalog_detail .item_main_info{margin-top:0}.item_slider .slides{height:260px;line-height:250px;line-height:normal;padding:25px 0 5px;overflow:hidden;margin:0;max-width:initial}.item_slider.flex .slides>li>a{height:260px;display:block}.catalog_detail .top_info .like_icons span.value span,body .module-cart table td.delay-cell .value,body .module_products_list td.like_icons{display:none}.item_slider.flex .slides>li>a img{max-height:100%}.module_products_list td.item-name-cell a{font-size:12px}body .module_products_list td.but-cell{padding-right:19px}.catalog_detail .top_info .like_icons span.value:before{margin-right:-1px}.info_item .top_info .brand{padding:0 5% 10px 0}body .authorization-cols .auth-title{font-size:18px}body .authorization-cols .col.registration{margin-top:30px}body li[item-section=AnDelCanBuy] .module-cart table td.count-cell{padding:3px 0;font-size:0}body .module-cart .counter_block{font-size:0}body .module-cart table td{padding:3px}body .count-cell div.error{position:static;white-space:normal}body .module-cart .counter_block input[type=text]{width:30px;height:30px;font-size:13px}body .module-cart a.wish_item .icon i{margin-right:0}body .module-cart table tfoot td.extended-cell{display:none!important}body .module-cart table tfoot .basket_fast_order_wrapp{text-align:right;padding-right:20px}body .module-cart table tfoot .basket_checkout_wrapp{padding-left:20px}body .module-cart table td.thumb-cell{width:50px}body #order_form_content .module-cart table td.thumb-cell{width:80px}body .module-cart table td.thumb-cell a{height:50px;width:50px;position:relative}body .module-form-block-wr .form-block .r{width:100%}body .brands_list li{width:32%}body .front_slider_wrapp .flex-viewport,body .index_bottom .info_column .about_column,body .index_bottom .info_column .news_column{width:100%}body .drop-question .form-block .left-data,body .drop-question .form-block .right-data{width:100%;margin-left:0;padding-right:0;float:none}body .news_detail_wrapp .detail_picture_block{margin:20px auto;text-align:center;float:none}.registraion-page .form-block{padding:0 20px}body .front_slider .info,body .index_bottom .info_column .news_column{padding-left:0}.registraion-page .main_info{padding-bottom:0}.registraion-page .social_block{padding-top:5px}body .top_slider_wrapp .flex-direction-nav li,body .wrapper .top_slider_wrapp .flex-control-paging{display:none}body .wrapper.head_type_1:not(.front_page) #header{margin-bottom:70px}body .wrapper.head_type_1:not(.front_page) #header+.wrapper_inner{border-top:0;box-shadow:none;-o-box-shadow:none;-moz-box-shadow:none;-webkit-box-shadow:none}body #header ul.menu.full>li.search_row{display:block}body .front_slider_wrapp .extended_pagination{display:none}body .top_slider_wrapp .banner_text{margin-top:10px;-webkit-line-clamp:2}body .flexslider .banner_buttons{margin-top:10px}body .index_bottom .info_column .news_column .shadow{display:block}body .index_bottom .info_column .about_column{margin-bottom:10px}body .index_bottom .info_column .about_column .about_show_more{display:block;text-align:center}body .brands_slider_wrapp{padding:36px 0 25px}body .top-h-row .search #title-search-input{display:none}body .top-h-row .search #search-submit-button{border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px;position:static;margin:1px auto 0}body .top-h-row .search{width:20%;text-align:center}body .top-h-row .search form{width:100%}body #header ul.menu.adaptive{display:block}body #header ul.menu.adaptive .menu_opener{cursor:pointer}body #header ul.menu.adaptive>li>a,body #header ul.menu.full>li>a{font-size:14px;text-transform:uppercase;text-decoration:none;padding:0 20px;display:inline-block;height:42px;line-height:43px}body .wrapper.has_menu .main-nav{display:block}body #header ul.menu.full{border-radius:0 0 3px 3px;-moz-border-radius:0 0 3px 3px;-webkit-border-radius:0 0 3px 3px;display:none;box-shadow:0 3px 18px rgba(44,44,44,.8);-moz-box-shadow:0 3px 18px rgba(44,44,44,.8);-webkit-box-shadow:0 3px 18px rgba(44,44,44,.8)}body ul.menu li.catalog a i{background:url(../images/arrows_small.png) 3px -21px no-repeat;right:15px;top:10px}body ul.menu li.catalog:hover a i{background-position:-33px -21px}body #header ul.menu.full>li:not(.current):not(.search_row){background:#ecf0f3;border-top:1px solid #f2f5f7;border-bottom:1px solid #e4e6e7}body #header ul.menu.full>li:not(.current) a{color:#000}body #header{border-bottom:0!important;box-shadow:none!important;-moz-box-shadow:none!important;-o-box-shadow:none!important;-webkit-box-shadow:none!important}body #header .center_block .main-nav{margin-top:15px;left:-15px;margin-left:0;padding:7px 15px}body #header ul.menu.full>li{display:block;width:100%;text-align:left}.wrapper.basket_fly:not(.has_menu) .top-h-row .form_mobile_block .search_middle_block,.wrapper.has_menu #header .middle-h-row .center_block .search,.wrapper.has_menu .header_wrap #header .catalog_menu,.wrapper.has_menu .top-h-row .form_mobile_block .search_middle_block,body #header ul.menu.full.opened li:hover .child,body #header ul.menu.full.opened li:hover .space,body #header ul.menu.full>li.stretch,body .top-h-row .search,body .wrapper.has_menu .top-h-row .search{display:none}body #header ul.menu.full>li:not(.menu_opener)>a{border-left:0!important;border-right:0!important;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;width:100%}.bx_order_make .bx_block.float,body .display_list .list_item .image{width:33%}body .display_list .list_item,body .display_list .list_item .image,body .display_list .list_item .image a{min-height:inherit}body .sort_header .sort_filter{font-size:0}.h_color_colored .header_wrap .menu>li.current>a span{border-bottom-width:0}.m_color_dark #header ul.menu.full.opened li.current,.m_color_dark #header ul.menu.full.opened li:not(.search_row):hover,.m_color_dark #header ul.menu.full.opened>li{border-bottom:1px solid #3d3d3d;border-top:1px solid #848484}.h_color_colored .main-nav ul.menu>li>a:hover{opacity:1}.m_color_dark #header ul.menu.full.opened>li{background:#505050}.m_color_dark #header ul.menu.full.opened>li.current{background:#2f2f2f;border-top:1px solid #848484}.m_color_dark #header ul.menu.full.opened li:not(.search_row):hover,body .m_color_dark #header ul.menu.full.opened li:not(.search_row):hover,body .wrapper.m_color_dark #header ul.menu.full.opened>li:hover{background:#505050}body .h_color_white .center_block .menu.full>li.current>a{color:#fff}body .h_color_white .center_block .menu.full>li.current>a span{border:0}body .m_color_dark #header .center_block .main-nav,body .m_color_dark.wrapper #header .center_block .main-nav{background:#3f3f3f;border-top-width:0}.basket_normal .popup{top:-3px!important}.basket_wrapp .basket_block .link{bottom:-27px}.bx_order_make .bx_block.r1x3,.bx_order_make .bx_block.r3x1{width:100%}.module-gallery-list li{width:33.33%}.wrapper_inner .articles-list.vertical .item{width:50%}.articles-list.lists_block .right-data{margin-left:150px}.articles-list.lists_block:not(.vertical) .item .left-data{width:100%;float:none;max-width:initial}.articles-list.lists_block:not(.vertical) .item .left-data a{height:auto}.articles-list.lists_block:not(.vertical) .item .right-data{margin:20px 0 0}#content .right_side.wide{padding:0;float:none;width:100%}#content .left_side.wide{padding:0}.wrapper_inner .wrap_md .news_wrap,.wrapper_inner .wrap_md .subscribe_wrap{width:100%;margin:0}.wrapper_inner .registraion-page .main_info{width:100%;border-right-width:0;padding-right:0;padding-top:0}.wrapper_inner .registraion-page .social_block{width:100%;padding:0}.wrapper_inner .soc-avt .row input[type=text]{width:90%}.wrapper_inner .start_promo .item i.price{display:block}.tracker,.wrapper_inner .start_promo .item i.price .tizer_text{display:none}.wrapper_inner .stores .all_map{margin-top:5px}.wrapper_inner .stores .stores_list{width:100%;padding:0}.bx-ie .basket_wrapp .wraps_icon_block .count .text,.bx-ie .basket_wrapp .wraps_icon_block .count a{line-height:18px}.start_promo .item img{max-height:280px;height:106%!important}.item:not(.touch_class):hover .scale_block_animate,.touch_class .scale_block_animate{transform:none}.item.wide100:hover img.scale_block_animate,.item.wide50:hover img.scale_block_animate,.start_promo .item.wide100 img,.start_promo .item.wide50 img{transform:scaleX(1.5);width:100%}.footer_bottom_inner .rows_block .menus,.footer_bottom_inner .rows_block .soc{width:100%}.footer_bottom_inner .rows_block .soc .soc_wrapper{text-align:center;float:none;margin:10px 0 0}#footer .footer_bottom_inner .links.rows_block{max-width:initial}.bx_item_list_you_looked_horizontal.col3 .bx_catalog_item{width:47.3333%!important}.bx_item_list_you_looked_horizontal.col3 .bx_catalog_item:nth-child(3n+1){clear:none!important}.bx_item_list_you_looked_horizontal.col3 .bx_catalog_item:nth-child(2n+1){clear:both!important}#footer .footer_bottom_inner .phone_block{padding-right:25px}#footer .footer_bottom_inner .phones{padding-bottom:20px}#footer .footer_bottom_inner{padding-bottom:14px}#footer .footer_bottom_inner .phones .order_wrap_btn{margin-bottom:0}.bx_ordercart_order_pay_center .icon_error_wrapper{float:none;margin:0 0 20px}.personal_wrapper .orders_wrapper .sale-order-payment-change-pp-list .sale-order-payment-change-pp-company{width:100%;padding-right:0}.personal_wrapper .orders_wrapper .sale-order-list-inner-row .sale-order-list-cancel-container{float:none}.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment .sale-order-detail-payment-options-shipment-image-container{width:100%}.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment .sale-order-detail-payment-options-methods-shipment-list{width:100%;padding-top:10px}.sale-order-detail-order-item-td .sale-order-detail-order-item-block,.sale-order-detail-order-item-td .sale-order-detail-order-item-block .sale-order-detail-order-item-img-block{padding:0}.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment-composition-map>.row{margin-right:-7px}.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-methods-information-block .sale-order-detail-payment-options-methods-image-container,.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-methods-information-block .sale-order-detail-payment-options-methods-info{width:100%;padding-bottom:10px}.personal_wrapper .orders_wrapper div.sale-order-detail-payment-options-methods{padding-top:0}.personal_wrapper .orders_wrapper div.sale-order-detail-about-order-inner-container>.row>div{width:100%!important}.sale-order-detail-about-order-inner-container-name-read-less,.sale-order-detail-about-order-inner-container-name-read-more{margin:0 0 15px}.sale-order-detail-order-item-td.sale-order-detail-order-item-properties{width:100%;float:left}.sale-personal-profile-list-container>tbody>tr>td,.sale-personal-profile-list-container>tbody>tr>th,.sale-personal-profile-list-container>tfoot>tr>th,.sale-personal-profile-list-container>thead>tr>td{font-size:10px;padding-left:2px;padding-right:2px}.sale-personal-profile-list-container>tbody>tr>th{padding-left:2px;padding-right:2px}}@media all and (max-width:570px){body .display_list .description_wrapp{display:none}body .display_list .adaptive_name{display:table-row}.wrapper_inner .bx_ordercart_order_sum td.custom_t1{width:80%}.bx_ordercart .bx_ordercart_order_pay .bx_ordercart_order_pay_center .catalog_back{width:185px;text-align:center}.bx_ordercart .bx_ordercart_order_pay .bx_ordercart_order_pay_center .checkout{float:left;clear:both;width:185px;text-align:center;margin:10px 0}.bx_ordercart .bx_ordercart_order_pay_center .oneclickbuy{float:right;margin:10px 0}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-img-block{float:left}#bx-soa-order .bx-soa-coupon-item{text-align:left}#bx-soa-order .bx-soa-section .bx-soa-coupon-item .bx-soa-tooltip{float:none;margin-left:0}#bx-soa-order .bx-soa-coupon-item .bx-soa-tooltip .tooltip-inner{margin-top:3px;text-align:left}#bx-soa-order .bx-scu-container{padding-top:0}#bx-soa-order .bx-soa-item-td-text,#bx-soa-order .bx-soa-item-td-title{display:block!important;font-size:15px}}@media all and (max-width:550px){table.offers_table td.count,table.offers_table td.counter_block{height:40px;border-bottom:0;width:50%}.catalog_detail .offers_table .opener{padding:0}.wrapper_inner table.offers_table td{padding:13px 8px}table.offers_table .ablock{margin:0 0 10px}table.offers_table td.count{text-align:left}table.offers_table td.buy{width:50%;text-align:left;clear:left;height:43px}#footer .mobile_copy,.bx-sap .container-fluid>.row>.col-xs-12,.bx-sap .sale-acountpay-block,body #content .left_block .left_menu,body #footer ul.bottom_main_menu li,body .authorization-cols .auth-title,body .breadcrumbs,body .personal_page #content .wrapper_inner .left_block .left_menu,body .search-page form,body .show_number,body .store_map .stores_images.multiple,body h1,body h2,body h3,body h4,table.offers_table td.one_click_buy{text-align:center}table.offers_table td.one_click_buy{width:50%;height:43px}.footer_bottom .submenu_top .menu_item,.footer_top .wrap_md .phones .phone_wrap{width:100%}.counter_block_wr.ablock{padding:0 5px 0 0}.basket_normal .popup{top:-12px!important}#basket_line .basket_normal .popup,.slider_navigation.compare .flex-direction-nav{display:none!important}#footer .wrap_md .empty_block,.basket_wrapp .basket_block div.text,.footer_bottom .all_menu_block .submenu_block,.footer_top .wrap_md .phones .order,.pay_system_icons,.registraion-page .top p:after,.registraion-page .top p:before,body .header-cart-block .cart .summ,body .header-cart-block .cart>span.icon{display:none}.wrapp_scrollbar .wr_scrollbar{margin-left:0;margin-right:0}.bx_compare .tabs-head li{font-size:13px}.wrapper_inner .bx_sort_container .wrap_remove_button{left:0;top:70px;right:initial;z-index:3}.registraion-page .top p{font-size:10px;padding:0}.footer_top .sblock .forms .email_wrap{width:60%}.footer_top .sblock .wrap_bg{width:100%;padding:0 0 13px}.footer_top .sblock .forms{width:100%;padding-left:0}.footer_bottom .social_block{padding:0}.footer_bottom .social_block .social_wrapper,.footer_top .wrap_md .phones .phone_block{width:100%;padding:0}.h_color_colored .header_wrap .basket_wrapp .empty_cart:not(.bcart) .wraps_icon_block.basket .count span{background:#000}body .wrapper .top_slider_wrapp .flexslider,body .wrapper .top_slider_wrapp .flexslider .slides>li,body .wrapper .top_slider_wrapp .flexslider .slides>li td{height:180px!important}body .module_products_list td{padding:2px}body .search-page form{padding:15px 5px 17px}body .display_list .list_item td.image,body .display_list .list_item td.information_wrapp{padding:0 15px 15px}body .display_list .list_item td.information_wrapp .information{padding:0}.wrapper_inner #content .catalog_block .catalog_item_wrapp:nth-child(3n),.wrapper_inner #content .catalog_block .catalog_item_wrapp:nth-child(4n),body #header .middle-h-row td.logo_wrapp,body .catalog_block .catalog_item_wrapp,body .right_block.catalog .catalog_block .catalog_item_wrapp{width:50%}#header .middle-h-row td.logo_wrapp img{max-width:100%}body #header .middle-h-row td.center_block{padding:0;width:0}body #header .middle-h-row .basket_wrapp{width:35%}body .basket_normal #header .middle-h-row .basket_wrapp{width:50%}body .header-cart-block .cart .cart_wrapp{padding-left:32px}body .header-cart-block .cart{width:120px}body .header-cart-block .cart .cart_wrapp:not(.with_delay){padding-top:6px}body .header-cart-block .cart>span.icon.small{display:inline-block}body .header-cart-block .cart .cart-call,body .header-cart-block .cart .cart-call-empty,body .header-cart-block .cart .delay_link .icon{display:none}body .header-cart-block .cart .delay_link{position:relative;zoom:1;top:-4px}body .header-cart-block .cart .cart-call.small{display:inline}body .header-cart-block .cart .cart-call.small+a{display:none}body .header-cart-block .cart .delay_link .icon{position:relative;zoom:1;top:0;width:17px}body .header-cart-block .cart .cart-call span{border:none;text-decoration:underline}body .header-cart-block .cart .cart_wrapp.with_delay{padding-top:0}body .front_slider .preview_text{-webkit-line-clamp:2}body ul.tabs li span{font-size:10px;padding-top:6px;line-height:9px}body ul.tabs li{padding:0 4px;height:20px;line-height:20px}body #footer ul.bottom_main_menu li{display:block;width:100%;padding:0 20%;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}body #footer ul.bottom_main_menu li a{border-bottom:1px solid #d8d8d9;width:100%;display:inline-block;padding:9px 0 5px;color:#000;text-shadow:none;-moz-text-shadow:none;-webkit-text-shadow:none}body #footer .bottom_submenu li{display:none}body #footer .bottom_submenu li.copy{display:block;width:100%;text-align:center}body #footer .footer_inner .line{background:0 0}body h1{font-size:20px;line-height:20px;padding-top:24px}body .search-page form{width:100%;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.bx_order_make .bx_block.float,.wrapper_inner .tizers_block .item,body .display_list .list_item td.image,body .display_list .list_item td.information_wrapp{width:50%}body .display_list .list_item .ribbons{top:0}body .display_list .list_item td.information_wrapp .information{border-left:0;position:static}body .display_list .available_block,body .display_list .likes_icons,body .display_list .noavailable_block{display:none}body .display_list .availability-row{display:block}.confirm .bg_block:after,.confirm .bg_block:before,.wrapper_inner .stores_block_wrap .stores_block .stores_text_wrapp>span{display:none}body .display_list .price_block{margin-bottom:10px}.wrapper_inner .confirm .bx_section{padding:18px 23px}.form-block-wr .iblock.label_block,.form-block-wr .iblock.text_block{width:100%}.form-block-wr .iblock.text_block{padding:10px 0 0}.basket_wrapp .empty_cart.ecart.bcart .wraps_icon_block.basket .count,.basket_wrapp .nitems.ecart .wraps_icon_block.basket .count{opacity:1}.wrapper_inner .basket_wrapp .wraps_icon_block.basket .count .items a{color:#fff}.stores_block_wrap .stores_block.wo_image .stores_text_wrapp .main_info{max-width:200px}.basket_normal .basket_wrapp .wrapp_all_icons{width:auto;white-space:nowrap}.basket_normal .basket_wrapp .header-cart,.basket_wrapp .icon_block{float:none;display:inline-block}.basket_wrapp .wraps_icon_block.basket{margin-right:0}.rows_block .item_block .catalog_item_wrapp,.specials.tab_slider_wrapp ul.tabs_content li.tab .catalog_block>div.item{width:100%!important}}@media all and (max-width:520px){.staff.list .item{float:none;width:100%;padding-left:0;padding-right:0}.middle_phone .phones .phone_text a{font-size:14px;line-height:14px;margin:10px 0}.rows_block .item_block,.specials.tab_slider_wrapp ul.tabs_content li.tab .catalog_block>div.item{width:100%!important}.similar_products_wrapp .viewed_block .rows_block .item_block{width:auto!important}.md-25.img{display:none}.md-75.big{padding:0;width:100%}.info_item .top_info .article{text-align:left}#footer .rows_block .item_block{text-align:center}#footer .rows_block .soc_icons .item_block{line-height:0;width:auto!important}#footer .rows_block .soc_icons .item_block a{display:inline-block}.bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr{padding-left:20px}.bx_ordercart.bx_blue .bx_ordercart_order_pay_center .catalog_back{float:none;width:auto;display:block}.bx_ordercart.bx_blue .bx_ordercart_order_pay_center .checkout,.bx_ordercart.bx_blue .bx_ordercart_order_pay_center .oneclickbuy{float:none;margin:20px 0 0;width:auto;display:block}.bx-touch .bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr>td{padding:0}.bx-touch .bx_ordercart .bx_ordercart_photo_container{padding-top:0}.bx-touch .bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr{margin-bottom:0;padding:20px;border-bottom:none}.bx-touch .bx_ordercart .bx_ordercart_order_table_container table tbody tr td.item{padding-bottom:10px;padding-left:0}.bx_ordercart .bx_ordercart_order_table_container .bx_ordercart_photo{height:70px}.bx_ordercart .bx_ordercart_order_table_container table tbody td.itemphoto{float:none;margin:0 0 15px;width:70px}.bx_ordercart .bx_ordercart_order_table_container tbody td.itemphoto>div{margin:0;width:70px;height:70px;line-height:70px}.bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr>td:not(.itemphoto):not(.margin):not(.item){margin-top:0}.bx-touch .bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr>td.custom span{margin-right:0;font-weight:400}.bx-touch .bx_ordercart .bx_ordercart_order_table_container tbody td.price{margin-top:11px!important;text-align:left;padding-top:0}.bx-touch .bx_ordercart .bx_ordercart_order_table_container tbody td.price .current_price{margin-top:0;margin-bottom:0;font-size:18px}.bx-touch .bx_ordercart .bx_sort_container{margin:0 0 20px}.bx-touch .bx_ordercart .bx_sort_container a{float:left;width:100%;display:block;position:relative;margin:0 0 -1px;padding:17px 20px 16px;background:#fbfbfb!important;border:1px solid #f3f3f3;border-bottom:1px solid #f3f3f3;font-size:15px;font-weight:500;color:#777;border-radius:0;line-height:20px;text-decoration:none}.bx-touch .bx_ordercart .bx_sort_container a.current,.bx-touch .bx_ordercart .bx_sort_container a.current:hover{padding-top:20px;margin-top:-3px;text-shadow:none;color:#333;border:1px solid #f3f3f3;box-shadow:none;border-radius:0;cursor:default;background:#FFF!important}.bx_ordercart .bx_ordercart_order_table_container table tbody td.item .bx_ordercart_itemtitle{padding-right:0}.bx-touch .bx_ordercart .bx_ordercart_order_table_container tbody td.price .type_price,.bx-touch .bx_ordercart .bx_ordercart_order_table_container tbody td.price .type_price_value{display:block}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-img-block{float:none;margin:0 0 15px}#bx-soa-order .bx-soa-item-tr{padding-left:20px}}@media all and (max-width:500px){.stores_block_wrap .stores_block .stores_text_wrapp .main_info{max-width:200px}.module_products_list .counter_wrapp .counter_block{display:none}.wrapper_inner #content .catalog_block .catalog_item_wrapp:nth-child(3n),.wrapper_inner #content .catalog_block .catalog_item_wrapp:nth-child(4n),body .catalog_block .catalog_item_wrapp,body .right_block.catalog .catalog_block .catalog_item_wrapp{width:100%}.wrapper_inner .catalog_block .image_wrapper_block{margin:auto}.catalog_block .item_info{margin:auto;width:171px}.info_item .top_info .article+.brand{padding-left:0;display:block}.wrapper_inner .footer_bottom .submenu_top .menu_item{width:100%}.wrapper_inner .articles-list .item .right-data .preview-text{padding-right:17px}.basket_fly .wrapper_inner .basket_wrapp .wrapp_all_icons{width:143px;overflow:hidden}.wrapper_inner .basket_wrapp .header-compare-block{margin-left:3px}#header .wrapper_inner .middle-h-row .logo_wrapp .logo{padding-right:0}.catalog_block .catalog_item{margin-right:0}.item-name-cell .item-stock,.item-name-cell .rating{display:none}.wrapper_inner .cost.prices .price{font-size:16px}.adaptive.more_text{display:block}.middle_phone .phone_wrap .icons,.wrapper_inner .data-table.top .right_blocks,td.text_info{display:none}.wrapper_inner .data-table.top .left_blocks{width:100%}.subscribe-edit .more_text .more_text_small{padding:0 0 10px}td.note{padding:0 0 0 10px}.wrapper_inner .module-order-history .module-orders-list .drop-cell .not-payed .pays,.wrapper_inner .module-order-history .module-orders-list .drop-cell .not-payed .text{width:100%;text-align:left}.wrapper_inner .module-order-history.orderdetail .result-row a.button{margin-bottom:10px}.module-order-history.orderdetail .module-orders-list.result td.custom_t2{padding-right:0}.lk-page .iblock.label_block,.lk-page .iblock.text_block{width:100%;padding-left:0}.bx_compare .data_table_props tr td:first-of-type{width:100px;min-width:100px;font-size:10px}.bx_compare .frame.props .wraps{margin-left:-136px}.prop_title_table{width:101px}.bx_compare .frame{margin-left:100px}.wrapp_scrollbar{margin-left:10px}.middle_phone .phone_wrap .phone_text{padding-left:20px}.middle_phone .phones .phone_text a{font-size:14px}.basket_fly #header .middle-h-row .basket_wrapp .middle_phone{min-width:100%}.rows_block .block_list .item_block{width:100%}.module_products_list .adaptive_button_buy{display:block}.module_products_list td.but-cell{display:none}.personal_wrapper .orders_wrapper .sale-order-list-inner-row .sale-order-list-inner-row-body>div{width:100%;float:none;text-align:left}.personal_wrapper .orders_wrapper .sale-order-detail-about-order-inner-container-repeat>a,.personal_wrapper .orders_wrapper .sale-order-list-button,.sale-order-detail-payment-options-methods-button-element,.sale-order-detail-payment-options-methods-button-element-new-window{float:none}}@media all and (max-width:470px){.button.video::before,.phones .order_wrap_btn,.top-h-row .phones .order_wrap_btn{display:none}.top-h-row .phones{width:48%}.top_slider_wrapp .flexslider .text.center .banner_buttons{margin-top:10px}.top_slider_wrapp .flexslider .banner_buttons a{padding:7px 10px;font-size:8px;line-height:9px;margin-bottom:5px}.filter_horizontal .wrapp_all_inputs.wrap_md .wrapp_change_inputs,.filter_horizontal .wrapp_all_inputs.wrap_md .wrapp_slider,.wrapp_all_inputs.wrap_md .iblock{width:100%}.filter_horizontal .wrapp_all_inputs.wrap_md .wrapp_slider,.wrapp_all_inputs.wrap_md .wrapp_slider{padding:0}.filter_horizontal .wrapp_all_inputs.wrap_md .wrapp_slider{padding-top:15px}.smartfilter .bx_ui_slider_track{margin-top:33px}.jobs_wrapp .item .name .title .salary{display:block}.jobs_wrapp .item .name .salary_wrapp .salary{display:none}.job.border_block .wrap_md .text{width:100%;display:block;text-align:left;padding:0}.job.border_block .wrap_md .phone{width:100%;display:block;text-align:left;padding:20px 0 0}.popup.show .forgot{float:none;display:block;margin-left:0}.wrapper_inner .module-form-block-wr.order_cancel .form-block{padding:0}body .top_slider_wrapp .flexslider .slides li td.text .banner_title{margin:10px 10px 0}body .top_slider_wrapp .flexslider .slides li td.text .banner_text{margin:2px 2px 0;font-size:12px;line-height:17px;max-height:38px}.cart_empty .text>:not(.title):not(.button){display:none}}@media all and (max-width:460px){.shops.list .item .schedule_phone_email,.shops.list .item .title_metro{width:100%;margin-top:0}.shops.list .item .schedule_phone_email{text-align:left}.shops.list .item .rubber>div{padding-top:0}.button.faq_button{float:none}.faq_desc{margin:23px 0 0}}@media all and (max-width:450px){ul.tabs li{padding:5px 0 0}.stores_block_wrap .stores_block .item-stock{float:none;margin:20px 0 0}.stores_block_wrap .stores_block.wo_image .item-stock{position:initial;margin:10px 0 0}.stores_block_wrap .stores_block .stores_text_wrapp{display:block}.stores_block_wrap .stores_block.w_image:before{display:none}.top_slider_wrapp .flexslider .text.center .banner_title+.banner_buttons{margin-top:4px}.right_info table.buttons_block .counter_block{padding:8px 0 0!important;display:block;text-align:center}.right_info table.buttons_block .counter_block select{font-size:24px;padding:4px 20px;height:39px;margin:0 auto}.right_info table.buttons_block .buy_buttons_wrapp{display:block;text-align:center}body .filter_opener span,body .front_slider .preview_text,body .module_products_list .availability-row{display:none}body .wrapper .top_slider_wrapp .flexslider,body .wrapper .top_slider_wrapp .flexslider .slides>li,body .wrapper .top_slider_wrapp .flexslider .slides>li td{height:150px!important}body .wrapper .top_slider_wrapp .flexslider .slides>li{background-size:225% auto}body .top-h-row .phone span.phone_text a{font-size:15px}.filter_opener i{margin:0}.adaptive_filter{padding-right:10px}body .filter_opener{margin-right:0}.popup .label_block_capcha{width:100%}.popup .img_block_capcha{width:100%;padding-left:0}.popup .img_block_capcha img{float:none}.module-gallery-list li{width:50%}.wrapper_inner .specials_slider_wrapp ul.tabs>li span,.wrapper_inner .tab_slider_wrapp ul.tabs>li span{font-size:12px}.wrapper_inner .search-page-wrap .form-control{float:none;width:100%;margin:0 0 20px}.wrapper_inner .basket_wrapp .module-cart table.bottom.middle .bottom_btn .back_btn>div{margin:20px 0 0}.wrapper_inner .basket_wrapp .module-cart table.bottom.middle .bottom_btn .back_btn>div:first-child{margin-top:0}body .wrapper_inner .module-cart table tfoot .backet_back_wrapp .back_btn>div{display:block!important}.basket_wrapp .module-cart table.bottom.middle td.row_titles{margin-bottom:0!important}.wrapper_inner .basket_wrapp .module-cart table.bottom.middle .top_total_row td.row_values{margin-bottom:19px;padding:0;margin-top:0}.wrapper_inner .staff.list .item{width:100%;padding:0;text-align:center}.wrapper_inner .staff.list .item .image{margin:auto}.wrapper_inner .bottom.middle td>.coupon{width:100%}.wrapper_inner .bottom.middle td>.coupon #COUPON,.wrapper_inner .bottom.middle td>.coupon .coupon-t{width:100%;float:none;text-align:left;display:block}.bottom.middle td>.coupon #COUPON{max-width:100%}.wrapper_inner .bottom.middle td>.coupon .coupon-t{margin:0 0 10px}.wrapper_inner .bottom.middle td>.coupon .coupon_wrap{display:block}.coupon .coupons_list{padding:0}.iblock .icon_error_block:after{display:none}.basket_wrapp .header-compare-block,.basket_wrapp .wraps_icon_block{margin:0 30px 0 0}.module-cart table.bottom td{display:block;float:none!important;margin-bottom:18px!important;overflow:hidden;padding:0!important;text-align:left!important;width:100%!important}.module-cart table.bottom td .description{display:none}.bx_item_list_you_looked_horizontal.col3 .bx_catalog_item{width:97.3333%!important}#bx-soa-order .bx-soa-coupon label,#bx-soa-order .bx-soa-coupon-input{width:auto}.bx_item_list_you_looked_horizontal.col3 .bx_catalog_item:nth-child(2n+1){clear:none!important}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company-graf-container{float:none}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-company-desc{margin-top:15px;padding-left:0}#bx-soa-order .bx-soa-coupon-label{width:auto;display:block;margin-top:0;margin-bottom:4px}#bx-soa-order .bx-soa-coupon-block{display:block}#bx-soa-order .bx-soa-section .bx-soa-section-title{padding-right:0}#bx-soa-order .bx-soa-section .bx-soa-section-title-container .text-right{padding:0;text-align:left}#bx-soa-order .bx-soa-section .bx-soa-section-title-container .col-sm-9{width:100%;float:none;text-align:left}#bx-soa-order .bx-soa-section .bx-soa-section-title-container .col-sm-3{width:100%;float:none}#bx-soa-order .bx-soa-editstep{margin-top:5px}#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr .bx-soa-item-td.bx-soa-item-properties{width:100%!important}.sale-acountpay-block .sale-acountpay-pp div .sale-acountpay-pp-company>div{display:block;margin:0 auto 10px;padding:0;text-align:center}.personal_wrapper .row>.col-sm-12{width:100%}}@media all and (max-width:400px){.wrapper_inner .stores_block_wrap .stores_block .stores_text_wrapp{font-size:11px}.wrapper_inner .stores_block_wrap .stores_block .item-stock{padding:0 5px 0 20px}.wrapper_inner .info_item .middle_info .buy_block .counter_wrapp{white-space:nowrap}.module_products_list td.price-cell .cost.prices .price,.wrapper_inner .cost.prices .price{font-size:14px}.wrapper_inner .cost .price.discount strike{font-size:12px}.footer_bottom_inner .rows_block .menus .rows_block,.footer_bottom_inner .rows_block .menus .submenu{display:none}.footer_bottom_inner .rows_block .menus .submenu_top.rows_block{display:block}#header .basket_wrapp .basket_sort,.basket_fly #header .middle-h-row #basket_form,.catalog_section_list .section_item td.section_info .desc,.top-h-row .bg_user,.top-h-row .phone_block .phone_wrap .icons,.wrapper_inner .phones .order_wrap_btn{display:none}.footer_bottom_inner .menus .rows_block .col-3{width:100%;text-align:center}.basket_fly #header .middle-h-row .basket_wrapp .middle_phone{top:initial}.top-h-row .h-user-block a.icon{padding:0 7px 0 20px}.top-h-row .h-user-block{margin-top:8px}.top-h-row .phones{width:auto}.top-h-row .phone_block .phone_wrap .phone_text{padding-left:0}body #header .middle-h-row td.logo_wrapp{width:47%}.wrapper_inner .basket_wrapp .header-compare-block{margin-right:20px}.catalog_section_list .section_item{padding:22px 22px 17px}.catalog_section_list .section_item td.section_info{height:auto!important;vertical-align:middle}.catalog_section_list .section_item li.name a span{font-size:15px}.catalog_section_list .section_item .image{width:60px}.basket_fly .header_wrap{position:relative}.basket_fly #header .middle-h-row{position:static}.basket_fly .header_wrap #header>.wrapper_inner{padding-top:60px}.basket_page.basket_fly .header_wrap #header>.wrapper_inner,.order_page.basket_fly .header_wrap #header>.wrapper_inner{padding-top:16px}body #header .basket_fly{top:0;height:46px;width:100%;left:0;right:auto;position:absolute;box-shadow:none;min-height:inherit}#header .basket_fly .opener{width:100%;left:0;border-radius:0;position:static}#header .basket_fly .opener>div{width:25%;float:right;height:46px}.basket_fly .basket_wrapp .basket_fly .wraps_icon_block{top:32%;margin:0}.basket_wrapp .wraps_icon_block.compare:before{top:-4px}.basket_wrapp .wraps_icon_block.basket:before,.basket_wrapp .wraps_icon_block.delay:before{top:-1px}.basket_wrapp .wraps_icon_block.user_reg:before{top:-3px}#header .basket_fly .opener>div:after{width:1px;height:100%}.basket_wrapp .wraps_icon_block .count{top:-9px}.basket_wrapp .wraps_icon_block.user_auth.w_img{top:7px!important}.basket_wrapp .wraps_icon_block.user_auth.no_img{top:18px!important}.bx_order_list .bx_order_list_table_order>tbody>tr>td:not(.img):not(.name){width:100%;float:none}.bx_ordercart .bx_ordercart_coupon span{float:none;width:auto;margin:0 0 6px}.bx_ordercart.bx_blue .bx_bt_button{top:21px}.bx_ordercart .bx_ordercart_order_table_container table tbody td.item .bx_ordercart_itemtitle{padding-right:0}.bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr>td:not(.item):not(.itemphoto):not(.margin){margin-top:10px!important;margin-right:0;width:100%}.bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr>td.control{position:absolute;top:0;right:0}.bx_ordercart .bx_ordercart_coupon #coupon{float:none}.bx-touch .bx_ordercart .bx_sort_container{margin:0 0 20px}.bx-touch .bx_ordercart .bx_ordercart_order_table_container table tbody tr td.item{padding-bottom:0}.bx_ordercart .bx_ordercart_coupon .input{padding:0}.bx_ordercart .bx_ordercart_coupon:not(:first-of-type){margin-left:0}.bx_ordercart .bx_ordercart_order_sum{max-width:295px}#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company-graf-container{display:block;margin:0 0 10px;height:auto}#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company-smalltitle{display:block;padding:0}#bx-soa-pickup .bx-soa-section-content .bx-soa-pickup-preview-img{float:none;display:block;margin:0 0 10px}.bx-soa-pp-company-graf-container .bx-soa-pp-delivery-cost{position:static}.personal_wrapper .orders_wrapper .sale-order-payment-change-pp-list .sale-order-payment-change-pp-company .sale-order-payment-change-pp-company-smalltitle{font-size:13px}}@media all and (max-width:380px){.basket_wrapp .module-cart .cost.prices .sale_block,.top-h-row .h-user-block .have-user a.reg:before{display:none}.basket_wrapp .module-cart .cost-cell .cost.prices,body .display_list .list_item td.information_wrapp .counter_wrapp{white-space:normal}.wrapper_inner .articles-list .item .right-data{margin:0}.wrapper_inner .articles-list .item .left-data{float:none;margin:0 auto 20px}.bx_ordercart table.colored thead td,.wrapper_inner .sale_block .text,.wrapper_inner .sale_block .value{font-size:10px}.wrapper_inner #order_form_content .module-cart table td.thumb-cell{padding-left:5px}.tizers_block{text-align:center}.wrapper_inner .tizers_block .item{display:inline-block;width:50%;margin:0 0 20px;vertical-align:top}.wrapper_inner .tizers_block .item:nth-child(n+4){width:50%;vertical-align:top}.tizers_block .item .title,.wrapper_inner .tizers_block .item:last-child .title{width:auto}.tizers_block .item .img,.tizers_block .item .title{display:block;text-align:center}.tizers_block .item .img{margin:0;min-height:62px;vertical-align:middle;text-align:center;padding:0;width:auto;max-width:none}.wrapper_inner .start_promo .wrap_tizer{bottom:8px}.wrapper_inner .start_promo .wrap_tizer .wrapper_inner_tizer{padding:0 20px 0 8px!important}.wrapper_inner .wrap_tizer .wr_block .title .inner_text{font-size:13px;font-weight:600}.wrapper_inner .wrap_tizer .wr_block.price .inner_text{font-size:12px}.wrap_tizer .wrap_outer{padding:0 4px 5px}.wrapper_inner .wrap_tizer .wrap_outer .outer_text{left:6px;padding:0 4px 5px 0}.wrapper_inner .wrap_tizer .wrap_outer .inner_text{left:-3px}.wrapper_inner .wrap_tizer .wr_block.price .wrap_outer,.wrapper_inner .wrap_tizer .wr_block.price .wrap_outer .inner_text{padding:1px 0 5px}.wrapper_inner .wrap_tizer .wr_block.price .wrap_outer .outer_text{padding-top:1px}.bx-firefox #header .middle-h-row td.logo_wrapp .logo,.bx-ie #header .middle-h-row td.logo_wrapp .logo{display:inline}.bx-firefox #header .middle-h-row td.logo_wrapp{width:53%}.bx-ie #header .middle-h-row td.logo_wrapp{width:48%}.display_list .counter_wrapp .counter_block{margin-bottom:5px}.display_list .counter_wrapp{padding-right:5px}.tabs-body{padding-top:30px}.catalog_section_list .section_item .desc .desc_wrapp{display:none}.catalog_section_list .section_item tr td{display:block}.catalog_section_list .section_item .image{width:100%;padding:0}.catalog_detail .element_detail_text .price_txt{display:none}.catalog_detail .element_detail_text{margin:0 0 10px}}@media all and (max-width:360px){.wrapper_inner .bx_sort_container .wrap_remove_button{top:110px}.catalog_detail .w_icons.button.to-cart{padding-left:20px}.catalog_detail .w_icons.button.to-cart:before{display:none}.catalog_detail .item_main_info .right_info .info_item{padding-right:12px}.container>h1{padding-right:0}.personal_wrapper .sale-order-detail-order-item-td .sale-order-detail-order-item-block .sale-order-detail-order-item-content{padding-left:10px;padding-right:10px}}@media all and (max-width:320px){.shops.list .item .image{display:none}.shops.list .item .rubber{margin:0}body .display_list .list_item td.information_wrapp{padding-right:0}.module_products_list .adaptive_button{display:block}body .module_products_list td.but-cell{display:none}.basket_fly #header .middle-h-row .basket_wrapp{padding-top:0}#header .wrapper_inner .middle-h-row .logo_wrapp .logo{min-height:24px;line-height:24px;display:table-cell}#header .middle-h-row .logo_wrapp .logo a{display:block}.basket_wrapp .header-compare-block,.basket_wrapp .wraps_icon_block{margin:0 25px 0 0}}@media all and (min-width:1180px){.specials_slider_wrapp ul.tabs_content,.tab_slider_wrapp ul.tabs_content{margin:1px -8px 2px -5px;padding:0 8px 0 5px}.specials_slider_wrapp ul.tabs_content li.tab,.tab_slider_wrapp ul.tabs_content li.tab{margin:0 -5px;padding:0 5px}.common_product .content_inner{margin:-13px -8px 0 -5px;padding:13px 8px 0 5px}.common_product .flex-viewport,.common_product .flex-viewport ul.slides{margin:0 -13px;padding:0 13px}.news_slider_wrapp,.news_slider_wrapp .flex-viewport{margin:-13px -13px 0;padding:13px 13px 0}.news_slider_wrapp .news_slider li:hover{box-shadow:0 0 20px rgba(0,0,0,.1);-moz-box-shadow:0 0 20px rgba(0,0,0,.1);-o-box-shadow:0 0 20px rgba(0,0,0,.1)}}@media all and (max-height:768px){#header .basket_fly{top:148px}}@media only screen and (max-width:1174px){#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company-graf-container{float:none}#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-company-desc{margin-top:15px;padding-left:0;margin-bottom:10px}}103  104169|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/css/media.css|1a72f2cabody { min-width: 300px; }

ul.tabs li.stretch { display: none; }
@media (max-width:767px){
	a.scroll-to-top{display:none;}
}
@media screen and (min-width: 992px){
	.bx_filter.bx_filter_vertical { display: block !important; }
}
@media all and (min-width: 768px){
	.bx-core:not(.bx-touch) .bx_filter.bx_filter_vertical { /*display: block !important;*/ }
	.bx_filter.bx_filter_vertical #modef_mobile  { display: none !important; }
}
@media all and (max-width: 960px){
	.info_item .top_info .brand + div {float:none;}
	.info_item .top_info .article {text-align:left;}
}
@media (min-width: 1200px){
	/*personal*/
	.personal_wrapper .row .col-lg-4{width: 33.33333333%;}
}
@media only screen and (max-width: 1174px){
	#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company-graf-container {
	    float: none;
	}
	#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-company-desc {
	    margin-top: 15px;
	    padding-left: 0;
	}
}


@media only screen and (max-width: 1400px){
	.bg_image_site{display:none;}
}


@media only screen and (max-width: 1290px){
	header .menu.top>li.full>.dropdown>li, header .menu.top.catalogfirst li.full>.dropdown>li {width: 50%;}
	.menu_top_block li.full>.dropdown>li:nth-child(3n+1){clear: both;}
}


@media all and (max-width: 1200px){
	.rows_block .block_list .col-4{width:33.33%;}
}

@media all and (max-width: 1180px){
	.start_promo  .item { border-bottom-width: 1px; }
	.block_wr .top_block a { display: inline-block; }
	.footer_top .wrap_md .phones .phone_wrap a { font-size: 17px; }
	.basket_fly #header .middle-h-row .center_block .search { /*width: 68%;*/ }
	.catalog_detail .element_detail_text .sh { padding-right: 3%; }
	.catalog_detail .element_detail_text .price_txt { /*width: 67%;*/ }
	.wrapper_inner .stores .stores_list { padding: 0px 20px 0px 0px; }
	.wrapper_inner .stores .all_map { margin: 00px 0px 0px 0px; }
	.has_menu #header .middle-h-row .center_block { white-space: nowrap; }
}
@media all and (max-width: 1176px){
	.wrapper_inner #content .catalog_block .catalog_item_wrapp:nth-child(3n) { width: 210px; }
	.catalog_block .catalog_item_wrapp:nth-child(3n) .item_wrap  { margin-right: 0px; }
	.wrapper_inner #content .catalog_block .catalog_item_wrapp:nth-child(4n) { width: 230px; }
	.wrapper_inner .catalog_block .catalog_item_wrapp:nth-child(4n) .item_wrap  { margin-right: 20px; }
}
@media all and (max-width: 1168px){
	.start_promo  .item.normal:nth-child(3n+1), .start_promo .item.s_2.normal, .start_promo .item.s_4.normal, .start_promo  .item.normal:last-child.s_4 { border-left-width: 1px; }
	.start_promo  .item:first-child, .start_promo .item.normal:first-child, .start_promo  .item:nth-child(3n+1), .start_promo  .item.normal:nth-child(2n+1) + .item:not(.s_2) { border-left-width: 0px; }
	.start_promo .item.s_4.normal, .start_promo .normal:nth-child(3n+1).s_4 { border-left-width: 1px !important; }
	.start_promo.other .normal:nth-child(3n+1).s_4 { border-left-width: 0px !important;  }
	.start_promo.normal_view  .item:nth-child(4n+1) { border-left-width: 0px; }
	.start_promo.normal_view  .item.normal:nth-child(4n+2), .start_promo.normal_view  .item.normal:nth-child(4n+4) { border-left-width: 1px !important; }

	.footer_top .wrap_md .phones { padding-left: 2%; }
	.footer_bottom .social_block .social { padding-left: 13%; }

}
@media all and (max-width: 1120px){
	.tizers_block .item .title { /*width: 50%;*/ font-size: 11px; }
	.tizers_block .item .title a { font-size: 11px; }
	.registraion-page .main_info .label_block_capcha { width: 100%; }
	.registraion-page .main_info .img_block_capcha { width: 100%; padding-left: 0px; }
	.registraion-page .main_info .img_block_capcha img { float: none; }
	.captcha-row.register-captcha .captcha_image .captcha_reload { left: 179px; right: initial; }
	.top-h-row .phones { /*padding: 6px 0px;*/ }
	.bx-firefox .top-h-row .phones { padding-top: 7px; }
	.top-h-row ul.menu { text-align: left; }
	#header .middle-h-row .center_block .search { /*width: 55%; margin-left: 20px;*/  }
	.header_wrap .top-h-row ul.menu { /*width: 52%;*/ }
	.top-h-row .phones { white-space: nowrap; }
	#header .wrapper_inner .middle-h-row .center_block .search {/* width: 58%; margin-left: 10px;*/ }
	.catalog_detail .set_block .popup_open { display: none; }
	.wrapper_inner .stores .stores_list { width: 71%; }
}
@media (max-width:1100px){
	.info_item .top_info .brand{/*float:left;padding-bottom:9px;width: 100%;padding-left:0;*/}
	.specials.tab_slider_wrapp ul.tabs_content li.tab .catalog_block .col-4, .rows_block .col-4{width:33%;}
	.footer_inner .rows_block .col-4{width:25%;}
}
@media all and (max-width: 1050px){
	#header .wrapper_inner .middle-h-row .center_block .search { /*width: 53%;*/ }
	.wrapper_inner .info_item .middle_info .buy_block .counter_wrapp { white-space: normal; }
	.top-h-row .phone_wrap .phone_text a{display:none;}
	.top-h-row .phone_wrap .phone_text a:first-child{display:inline-block;}
	.info_item .top_info .article{text-align:center;}
}
@media all and (max-width: 1020px){
	#header .middle-h-row .center_block .search {/* width: 48%;*/ }
	.no_goods .button { float: none; margin-top: 37px; }
	#order_form_div .info_block .wrap_md > div { width: 100%; }
	#order_form_div .info_block .l_block:after, #order_form_div .info_block .r_block:before { display: none; }
	#order_form_div .info_block .wrap_md .l_block { border-bottom: 1px solid #eee; }
	.bx_ordercart .module-cart td { white-space: normal; }
	.header_wrap #header .middle-h-row .center_block ul.menu { /*width: 93%;*/ }
	.header_wrap #header .middle-h-row .main-nav ul.menu > li > a { /*padding: 0px 5px;*/ }

	.bx_ordercart .bx_ordercart_order_table_container tbody td.control{width:90px;}
	.bx_ordercart .bx_ordercart_order_table_container tbody td.itemphoto{width:129px;}
	.bx_ordercart .bx_ordercart_order_table_container tbody td.itemphoto>div{width:90px;height:90px;line-height:90px;}
	.bx_ordercart .bx_ordercart_order_table_container .bx_ordercart_photo{height:90px;background-size:contain;}
	.bx_ordercart .bx_ordercart_order_table_container table thead td.item{padding-left:145px;}
}
@media all and (max-width: 1020px) and (min-width:950px){
	.flexslider .banner_title, .flexslider .banner_text, .flexslider .banner_buttons { margin-right: 40px; }
	.top_slider_wrapp .flexslider .banner_title span { font-size: 35px; }
}
@media all and (max-width: 1000px){
	#header .middle-h-row .center_block, .has_menu #header .middle-h-row .center_block  { padding-right: 30px; padding-left: 30px; }
	body #footer .bottom_left_icons, body #footer ul.bottom_main_menu, body #footer ul.bottom_submenu{ clear: both; display: block; width: 100%; }
	.top-h-row ul.menu { width: 40%; }
	.top-h-row .phones { /*width: 33%;*/ text-align: right; }
	body #header .basket_fly{ width: 700px; right: -700px; }
	#header .basket_fly .basket_title { margin-right: 15px; }
	.basket_sort ul.tabs li { margin-right: 0px; }
	.info_item .top_info .article + .brand { padding-left: 0px; }
	.catalog_detail .element_detail_text .sh { padding-right: 0; }

}
@media all and (max-width: 992px){
	.wrapper_inner .tizers_block .item { width: 50%; text-align: center; margin: 5px 0px 20px; }
	.wrapper_inner .tizers_block .item:nth-child(n+4) { /*width: 50%;*/ text-align: center; }
	.menu_top_block.catalog_block .dropdown> li.full>.dropdown>li, header .menu.top.catalogfirst li.full>.dropdown>li{width:50%;}
	.menu_top_block li.full>.dropdown>li:nth-child(2n+1){clear: both;}
	.menu_top_block li.full>.dropdown>li:nth-child(3n+1){clear:none;}

	.footer_bottom .social_block, .footer_top .wrap_md .phones { width: 100%; }
	.footer_top .wrap_md .phones { padding-left: 0px; padding-top: 25px; }
	#footer .wrap_md .empty_block { width: 36%; }
	.footer_top .wrap_md .phones .phone_block, .footer_bottom .social_block .social_wrapper { padding: 0px 0px 0px 19px; width: 64%; }
	.footer_top .wrap_md .phones .order { text-align: left; }
	.footer_top .sblock, .footer_bottom .menu_block { width: 100%; padding: 0px; }
	.footer_bottom .social_block { padding-top: 23px; }
	.footer_bottom .social_block .social_wrapper .social { padding-left: 0px; }
	#footer .footer_bottom { padding-top: 19px; }
	.top-h-row ul.menu > li a { /*font-size: 11px;*/ padding: 0px 5px 0px; }
	.bx-firefox .menu > li > a span{padding-top:8px;}
	#header .middle-h-row .main-nav ul.menu > li > a { padding: 0px 9px; }
	.main-nav ul.menu > li > a span { font-size: 12px; }
	.wrapper_inner #content .catalog_block .catalog_item_wrapp:nth-child(3n) { width: 210px; }
	.catalog_block .catalog_item_wrapp:nth-child(3n) .item_wrap  { margin-right: 0px; }
	.wrapper_inner .stores .stores_list { width: 68%; }
	#header .middle-h-row td.text_wrapp{display:none;}

	#basket_form_container .top_control{float:none;clear:both;padding: 15px 0px 0px;}
	#basket_form_container .top_control .delete_all{display: inline-block;float: none;}

	/* ORDER */
	#bx-soa-total{width:100%;}
	#bx-soa-total-mobile{display:block!important;}
	#bx-soa-order #bx-soa-orderSave{display:none;}
	#bx-soa-order>.bx-soa{width:100%;}
	#bx-soa-order #bx-soa-total .bx-soa-cart-total.bx-soa-cart-total-fixed{position:relative!important;opacity:1!important;}
	#bx-soa-order #bx-soa-total .bx-soa-cart-total-ghost{padding:0!important;}
	#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company-graf-container{float:left;}
	#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-company-desc{margin-top:0;padding-left:140px;}
	#bx-soa-order .bx-soa-section .bx-soa-section-content{padding-left:29px;}
	#bx-soa-order .bx-soa-pp-company-selected{float:left;width:75%;}
	#bx-soa-order .bx-soa-pp-price{float:right;width:25%;}
	#bx-soa-order .bx-soa-item-tr{padding:20px 20px 20px 110px;border-top:1px solid #f3f3f3;}
	#bx-soa-order .bx-soa-item-tr.bx-soa-item-tr-first{border-top:none;}
	#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-block{padding-left:0;overflow:visible;}
	#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr .bx-soa-item-td{border:none;padding:0!important;min-width:0!important;}
	#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-img-block{margin-left:-90px;margin-top:0;}
	#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-content{padding-left:0;}
	#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr .bx-soa-item-td.bx-soa-item-properties{margin-top:10px;}
	#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr .bx-soa-item-td.bx-soa-item-properties>div{padding:0;text-align:left;}
	#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr .bx-soa-item-td:last-child{padding-right:0!important;}
	#bx-soa-order #bx-soa-basket .bx-soa-item-td-title{padding-bottom:0;}
	#bx-soa-order .bx-soa-coupon{margin-left:-29px;}
	#bx-soa-order .bx-soa-more{margin-left:-29px;}
	#bx-soa-order .alert-danger{margin-left:-29px;}
	#bx-soa-order .bx-soa-cart-total .bx-soa-cart-total-line-total .bx-soa-cart-d{white-space:normal;}
	.bx-soa-item-tr.bx-soa-item-info-container, .bx-soa-item-tr .bx-soa-item-td{height:auto;}

	/*personal*/
	.sale-acountpay-block .sale-acountpay-pp div .sale-acountpay-pp-company{width:100%;}
	.personal_wrapper .orders_wrapper .sale-order-list-status-alert, .personal_wrapper .orders_wrapper .sale-order-list-status-success, .personal_wrapper .orders_wrapper .sale-order-list-shipment-status-block, .sale-order-detail-payment-options-methods-info-title-status-alert, .sale-order-detail-payment-options-methods-info-title-status-success, .sale-order-payment-change-status-alert, .sale-order-payment-change-status-success{margin-left:0px;}
	.personal_wrapper .orders_wrapper .sale-order-detail-about-order-inner-container-repeat > a{display:block;float:none;}
	.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-methods-information-block .sale-order-detail-payment-options-methods-image-container.opened{width:100%;}
	.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-methods-information-block .sale-order-detail-payment-options-methods-info.opened{margin: 0px;width: 100%;padding-left: 15px !important;padding-top: 10px;}
	.personal_wrapper .row div.sale-order-detail-payment-inner-row-template{margin-left:15px;}
	.sale-order-detail-order-item-td.sale-order-detail-order-item-properties > div{float:left;}
	.personal_wrapper .orders_wrapper .sale-order-detail-total-payment-container .sale-order-detail-total-payment-list-right > li{text-align:left;}
}
@media (min-width: 992px){
	/*personal*/
	.personal_wrapper .col-md-offset-3{margin-left: 25%;}
	.personal_wrapper .col-md-offset-5{margin-left: 41.66666667%;}
	.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment-composition-map{margin-left: 16.66666667%;}
}
@media all and (max-width: 992px) and (min-width:768px){
	.wrapper_inner  .staff.list .item .image { float: none; }
	.wrapper_inner  .staff.list .item .info { margin: 10px 0px 0px 0px; }
}
@media (max-width: 991px) and (min-width: 768px){
	/*personal*/
	.personal_wrapper .orders_wrapper .visible-sm {display: block!important;}
	.hidden-sm {display: none!important;}	
}
@media (max-width: 991px){
	/*personal*/
	.personal_wrapper .orders_wrapper .col-sm-12 {width: 100%;}
	.personal_wrapper .orders_wrapper .col-sm-10 {width: 83.33333333%;}
	.personal_wrapper .orders_wrapper .col-sm-7 {width: 58.33333333%;}
	.personal_wrapper .orders_wrapper .col-sm-6 {width: 50% !important;}
	.personal_wrapper .orders_wrapper .col-sm-5 {width: 41.66666667%;}
	.personal_wrapper .orders_wrapper .col-sm-2 {width: 16.66666667%;}
	.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-methods-button-element{display: block !important;float: none;width: 50%;margin: 10px auto 0px;}
	.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment-composition-map > .row{margin: 0px -1px 0px -1px;}
	.personal_wrapper .orders_wrapper .sale-order-title{padding-right:0px;}
}
@media all and (max-width: 992px) and (min-width:951px){
	.catalog_section_list .section_item .image{width:100px;}
	.catalog_section_list .section_item  .image  img{max-width:100%;max-height:100%;}
}
@media all and (max-width: 960px){
	.staff.list .item .image{height: 85px;line-height: 82px;width: 85px;}
	.staff.list .item .info{margin-left:110px;}
}
@media all and (min-width: 951px){
	.front_page .catalog_menu_ext .dropdown, .catalog_page  .catalog_menu_ext .dropdown{display:none !important;}
	.bx_filter.bx_filter_vertical{display:block !important;}
}
@media all and (max-width: 950px){
	.wrapper.has_menu #header .middle-h-row .center_block .search, .wrapper.has_menu #header .middle-h-row .center_block .middle_phone  { width: 100%; display: block; margin-left: 0px; }
	.wrapper.has_menu #header .middle-h-row .center_block .middle_phone { margin: 0px 0px 10px; }
	.middle_phone .phones .order_wrap_btn { /*display: inline-block;*/ margin-top: 0px; }

	body #content .wrapper_inner .left_block{ display:none; }
	body #content .wrapper_inner .left_block > *{ display:none; }
	body .wrapper_inner .left_block .left_menu{ display:block; }
	body .wrapper_inner .left_block.vertical{position: absolute;width: 95%;float: none;padding: 0px;margin: 0px;display:block;}
	body #content .wrapper_inner .right_block{ padding-left:0px;margin: 0px !important;}
	.news_akc_block .img img{max-height: 100%;}
	
	.catalog.vertical .adaptive_filter{display:block;}
	.js_filter .bx_filter.bx_filter_vertical .bx_filter_section{margin:0px;}

	.m_color_none.h_color_colored .main-nav { background: #fff; }
	.m_color_none.h_color_colored .main-nav .menu > li > a { color: #1d1a1a; }
	.m_color_none.h_color_colored .header_wrap .center_block .search_block .icon { background-position: -66px -178px; }
	.m_color_none.h_color_colored #header { margin-bottom: 47px; /*border: 1px solid;*/ }
	.h_color_colored.m_color_none ul.menu .child { padding-top: 8px; }
	.h_color_white.m_color_none ul.menu .child { padding-top: 6px; }
	.head_type_1 #header { border-bottom-width: 1px; }
	.basket_fly #header .middle-h-row .basket_wrapp { /*vertical-align: middle; padding-top: 16px;*/ }
	.basket_fly #header .middle-h-row .center_block .main-nav ul.menu { width: 100%; }
	.basket_fly .wrapper_inner ul.menu .child { margin-top: 0px; }
	.basket_fly .main-nav .search_middle_block { top: -100%; right: 65px; margin: -16px 0px 0px; width: 50%; }
	body .top_slider_wrapp .flexslider .slides > li { background-size: 200% auto; }
	body .wrapper .top_slider_wrapp .flexslider .slides > li, body .wrapper .top_slider_wrapp .flexslider .slides > li td, body .wrapper .top_slider_wrapp .flexslider { height: 300px !important; }
	body .top_slider_wrapp .flex-direction-nav li { top: 120px; }
	body .right_side.catalog { display: none; }
	body .left_side.catalog_detail { padding-right: 0; }
	body .top-h-row  .phone { width: auto; }
	body .top-h-row ul.menu { 	width: 45%; padding-left: 0; }
	body #header .center_block .main-nav { width: 100%; position: absolute; right: 0; left: 0px; top: 100%; margin: 18px 0px 0px 0px; padding: 7px 0px; }
	body .wrapper.head_type_1:not(.front_page) #header { margin-bottom: 60px; }
	body .wrapper.head_type_1:not(.front_page) #header + .wrapper_inner { border-top: 1px solid #f0f0f0; box-shadow: 0px 0px 5px #f0f0f0; -moz-box-shadow: 0px 0px 5px #f0f0f0; -o-box-shadow: 0px 0px 5px #f0f0f0; -webkit-box-shadow: 0px 0px 5px #f0f0f0; }
	body .wrapper.head_type_1:not(.front_page) .middle { margin-top: 10px; }
	body .wrapper.head_type_1 .top_slider_wrapp { margin-top: 49px !important; }
	body #header:not(.border) + .middle.main { padding-top: 207px; }
	body #header:not(.border) + .middle { padding-top: 227px; }
	body .top_slider_wrapp .flexslider .slides  li td.img { display: none; }
	body .top_slider_wrapp .flexslider .slides  li td.text { 	width: 100%; }
	body .top_slider_wrapp .flexslider .slides  li td.text .banner_text, body .top_slider_wrapp .flexslider .slides  li td.text .banner_title,
	body .top_slider_wrapp .flexslider .slides  li td.text .banner_buttons { margin-left: 80px; margin-right: 80px; }
	body .top_slider_wrapp .flexslider .slides  li td.text * { text-align: center; }
	body .right_block.catalog .catalog_block .catalog_item_wrapp { width: 33%; width: 230px; }

	.catalog_detail .element_detail_text .sh { margin: 0px; }
	.wrapper_inner .bottom.middle td > .coupon #COUPON { width: 200px; }
	.wrapper_inner .middle .module-cart table tr td.count-cell { padding-left: 5px; padding-right: 5px; }
	.wrapper_inner .middle .module-cart table tr td.count-cell .counter_block.big_basket { width: 74px; }
	.wrapper_inner .middle .module-cart .counter_block.big_basket > span { line-height: 27px; height: 27px; width: 21px; }
	.wrapper_inner .middle .module-cart .counter_block.big_basket input[type="text"] { font-size: 10px; height: 27px; width: 32px; }
	.header_wrap .top-h-row ul.menu { /*width: 48%;*/ }
	.has_menu #header .middle-h-row .center_block { white-space: normal; }
	.basket_fly .search_middle_block, .has_menu .search_middle_block { position: absolute; }
	.wrapper.m_color_none .top_slider_wrapp { margin-top: 50px; }
	body .wrapper:not(.front_page) .middle	{ /*margin-top: 55px;*/float:none; }

	.js_filter.filter_horizontal{overflow: visible;padding: 0;position: relative;}
	.js_filter .bx_filter.bx_filter_vertical {display:none;position: absolute; margin: 0; width: 100%; top: 25px; box-shadow: 0 0px 10px rgba(0, 0, 0, 0.15); -moz-box-shadow: 0 0px 10px rgba(0, 0, 0, 0.15); -webkit-box-shadow: 0 0px 10px rgba(0, 0, 0, 0.15); z-index: 101; }
	
	/*personal*/	
	body .personal_page #content .wrapper_inner .left_block{display: block;float: none;width: 100%;}
	body .personal_page #content .wrapper_inner .left_block .left_menu{display: block;}
	body .personal_page #content .wrapper_inner .left_block .left_menu > li{display: inline-block;margin-top: 3px;}
	body .personal_page #content .wrapper_inner .left_block .left_menu > li > a{border:none;}
	body .personal_page #content .wrapper_inner .right_block .breadcrumbs{display:none;}
}
@media all and (max-width: 946px){
	.wrapper_inner #content .catalog_block .catalog_item_wrapp:nth-child(3n) { width: 230px; }
	.wrapper_inner .catalog_block .catalog_item_wrapp:nth-child(3n) .item_wrap  { margin-right: 20px; }
}
@media all and (max-width: 900px){
	.wrapper_inner .stores .stores_list { width: 66%; }
	.basket_wrapp .module-cart table.bottom.middle .bottom_btn td.last_blockk.basket_error_wrapp  { float: left !important; }
	.count-cell div.error { white-space: normal; }

	.footer_inner .left_block{display:none;}
	.footer_inner .right_block{padding-left:0px;}
	#footer .mobile_copy{display:block;}
}
@media all and (max-width: 870px){
	body .module-cart .weight-th, body .module-cart .discount-th, body .module-cart .weight-cell, body .module-cart .discount-cell{ display: none; }
	.wrap_md .news_wrap, .wrap_md .subscribe_wrap { width: 100%; margin: 0px; }
	.wrap_md .subscribe_wrap .subscribe-form { margin: 30px 0px 30px; }
	.subscribe-form .wrap_bg { background-position: center -34px; font-size: 0px; }
	.subscribe-form .wrap_bg .top_block, .subscribe-form .wrap_bg .sform { width: 100%; display: block; vertical-align: middle; margin-top: 0px; }
	.subscribe-form .wrap_bg .top_block { padding: 0px 0px 20px 0px; }
	.subscribe-form .top_block .image { display: none; }
	.subscribe_wrap .subscribe-form .top_block .image + .text { padding: 0px; }
	.subscribe_wrap .subscribe-form form.sform > div { display: block; width: 100%; }
	.top-h-row .phones { text-align: left; }
	body .top-h-row ul.menu { width: 40%; }
	.module_products_list td.price-cell { width: 18%; }
	.services_block .item { width: 100%; }
	.module-order-history.orderdetail .module-orders-list tr td.vimg { padding-right: 2px; padding-left: 2px; }
	.module-order-history.orderdetail .module-orders-list tr td.vdscnt { padding-right: 5px; padding-left: 5px; }
	.header_wrap .top-h-row ul.menu { /*width: 44%;*/ }
	.shops.list .item .schedule_phone_email{text-align:center;}
	.shops.list .item .schedule, .shops.list .item .phone_email{width:100%;}
	.wrapper_inner .info_item .middle_info .prices_block, .wrapper_inner .info_item .middle_info .buy_block { width: 100%; padding: 0px; }
	.wrapper_inner .info_item .middle_info .buy_block  { padding: 20px 0px 0px; }
	.wrapper_inner .info_item .middle_info .buy_block .counter_wrapp .button_block { margin: 0px; }
	.info_item .middle_info .buy_block .one_click { display: inline-block; }
	.wrapper_inner .stores .stores_list { width: 64%; }
	.table .wrapp_stockers .like_icons { height: auto;margin-top:0px !important;position:initial; }
	.table .module_products_list td.like_icons { width: 56px;    padding-left: 5px; }
	.module_products_list td.like_icons.full { width: 30px; }
	.wrapp_stockers .like_icons > div { margin-right: 0px; }

	.specials.tab_slider_wrapp ul.tabs_content li.tab .catalog_block >div.item, .rows_block .item_block{width:50%;}

	.info_item .top_info .brand{float:none;}
	.viewed_block .rows_block .item_block, .footer_inner .social_wrapper .rows_block .item_block{width: auto;}
	#footer .footer_bottom_inner .phones, #footer .footer_bottom_inner .social_wrapper{float:none;}
	.footer_bottom_inner .menus .rows_block .col-3{width:33%;}
	.footer_bottom_inner .rows_block .menus{width:60%;}
	.footer_bottom_inner .rows_block .soc{width:40%;}
	.footer_bottom_inner .rows_block .soc .soc_wrapper{float:right;}

	.top-h-row .phones{padding-left:20px;padding-right: 0px;}
	.top-h-row .h-user-block a.icon{padding-right:14px;}

	/*personal*/
	.personal_wrapper .orders_wrapper .sale-order-payment-change-pp-list .sale-order-payment-change-pp-company .sale-order-payment-change-pp-company-smalltitle{font-size:12px;}
}

@media all and (max-width: 800px){
	.header_wrap .top-h-row ul.menu { /*width: 35%;*/ 	}
	.wrapper.has_menu #header .middle-h-row .center_block .middle_phone .phone_text a { font-size: 15px; }
	.wrapper.has_menu #header .middle-h-row .center_block .middle_phone .order_wrap_btn { margin-left: 16px; }
	.module_products_list td.price-cell { width: 14%; }
	.sort_header .sort_filter a { margin-right: 10px; }
	.wrapper_inner .module-order-history .result-row a.button { margin-right: 0px; }
	.wrapper_inner .stores .stores_list { width: 60%; }
	.top-h-row .phones{padding-left:5px;}
}


@media all and (min-width: 769px){
	body .catalog.horizontal .adaptive_filter{display:none !important;}
	.bx-core .filter_horizontal:not(.js_filter) .bx_filter.bx_filter_vertical{display:block !important;}
	.bx_filter .bx_filter_section{margin:0 0px 27px 0;}
	.bx_filter_vertical.bx_filter .hidden_values{display:block !important;}
}

@media all and (max-width: 768px){
	.start_promo .item.s_4.normal, .start_promo.normal_view  .item.normal:nth-child(3n+1) { border-left-width: 0px !important; }
	.start_promo.normal_view  .item.normal:nth-child(3n+2) { border-left-width: 1px !important; }

	.wrapper_inner{padding-left:15px;padding-right:15px;}
	.catalog .adaptive_filter{display:block;}


	.top-h-row .phones { width: 56%;padding-left:0px; }
	.top-h-row .h-user-block { text-align: right; }
	.wrapper.has_menu .top-h-row ul.menu { display: none; }
	.wrapper.has_menu .top-h-row .phones { display: block; }
	.wrapper.has_menu #header .wrapper_inner .middle-h-row  .center_block  .middle_phone, .wrapper.has_menu #header .phones { display: none; }
	.wrapper.has_menu  #header .middle-h-row .center_block { padding: 0px 20px 0px 20px; }
	body .colored #header .center_block .main-nav { border-top: 1px solid #fff; margin-top: 20px; }
	body .wrapper.has_menu .white #header .center_block .main-nav { margin-top: 12px; }
	body .colored #header { padding-bottom: 20px; }
	.wrapper_inner .middle-h-row .search_middle_block.active .middle_form { width: 94%; }
	.backet_back_wrapp .basket_back { display: block; }
	.backet_back_wrapp.error .basket_back { display: inline-block; }
	.wrapper_inner .basket_wrapp .module-cart table.bottom.middle .bottom_btn td .iblock .icon_error_block{ float: none; display: inline-block; text-align: left; margin: 15px 0px 0px; }
	.iblock .icon_error_block:after  { display: block;  right: -65px; left: initial; }
	.wrapper_inner .stores .stores_list { width: 55%; }
	.stores .flex-control-paging, .news_akc_block .flex-control-paging { position: absolute; bottom: -9px; display: none; z-index: 12; margin: 0px; }
	.news_akc_block .flex-control-paging { bottom: 4px; }
	.news_akc_block .news_slider_wrapp { padding: 0px 0px 10px; }

	/* Start page teasers block */
	.wrapper_inner .start_promo  .item { width: 33%;  }
	.wrapper_inner .start_promo  .item.wide50 { width: 33%; }
	.wrapper_inner .start_promo  .item.wide100 { width: 100%; }

	.index_bottom .info_column .news_column .news_block  ul.flex-control-nav, ul.flex-control-nav{ /*display: block; padding: 0px 0px 20px;*/ }
	.news_akc_block .flex-viewport .item, .stores .flex-viewport .item { margin-bottom: 20px; }
	.stores .all_map { margin: -1px 0px; }
	.stores { padding-bottom: 24px; }
	.print .basket_print_desc .store_property{width:47%;}
	.print .basket_print_desc .store_property:nth-of-type(3) {clear: both;}
	.info_item .middle_info .sku_props { margin: 0px; }
	.info_item .middle_info .prices_block, .info_item .middle_info .buy_block { width: 100%; padding: 0px; }
	.info_item .middle_info .prices_block { margin: 0px 0px 17px; }

	body .flex-control-paging li { height: 9px; width: 9px; }
	body .flex-control-paging li a, body .front_slider_wrapp .flex-control-nav li a { height: 8px; width: 8px; border-radius: 100%; -moz-border-radius: 100%; -webkit-border-radius: 100%; }
	body .flex-control-paging li a, body .front_slider_wrapp .flex-control-paging li a	{
		background: #b9b9b9;
		background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2I5YjliOSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNjZGNkY2QiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
		background: -moz-linear-gradient(top,  #b9b9b9 0%, #cdcdcd 100%);
		background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#b9b9b9), color-stop(100%,#cdcdcd));
		background: -webkit-linear-gradient(top,  #b9b9b9 0%,#cdcdcd 100%);
		background: -o-linear-gradient(top,  #b9b9b9 0%,#cdcdcd 100%);
		background: -ms-linear-gradient(top,  #b9b9b9 0%,#cdcdcd 100%);
		background: linear-gradient(to bottom,  #b9b9b9 0%,#cdcdcd 100%);
		filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#b9b9b9', endColorstr='#cdcdcd',GradientType=0 );
	}
	body .front_slider_wrapp .flex-control-paging li a, body .flex-control-paging li a { background-position: inherit !important; }
	body .flex-control-paging li a.flex-active, body .flex-control-paging li:hover a { height: 9px; width: 9px; }

	.registraion-page .main_info .label_block, .registraion-page .main_info .text_block { width: 100%; padding-left: 0px; }
	.registraion-page .main_info, .registraion-page .social_block { width: 100%; border-right-width: 0px; padding-left: 0px; }

	table.colored.offers_table td.price { white-space: normal; }
	table.colored.offers_table td.price .cost.prices .price { font-size: 16px;}
	.adaptive.text { display: block; }
	.catalog_detail .adaptive.text > div {display: inline-block;margin: 5px 3px 0 0;vertical-align: top;}
	.catalog_detail .adaptive.text > .count.ablock{display:block;}
	.catalog_detail .adaptive.text > .wrap_md .buy{margin-left:6px;}
	.catalog_detail .tabs_content .prices_tab{padding-top:0px !important;}

	.catalog_detail .offers_table thead td, .catalog_detail .offers_table td.count, .catalog_detail .offers_table td.buy, .catalog_detail .offers_table .more_text, .catalog_detail .offers_table td.counter_block_wr, .catalog_detail .offers_table td.one_click_buy, .catalog_detail table.colored td.like_icons { display: none; }

	.wrapper_inner  .catalog_detail  table.offers_table tr.offer_stores td .stores_block_wrap { border-bottom: 1px solid #e7e7e7; padding-bottom: 8px;   padding-bottom: 17px; margin-bottom: 18px; }

	.flex-direction-nav { display: none !important; }
	.slider_navigation.compare .flex-direction-nav { display: block !important; }
	.wrapper_inner  .catalog_detail .adaptive_extended_info .article  { float: none; padding: 10px; }
	.wrapper_inner  .catalog_detail .adaptive_extended_info .brand  { float: none; padding: 10px; text-align: center; }
	.specials_slider_wrapp ul.tabs { padding-right: 0px; }
	.popup { min-width: 250px; /*top: 10px !important;*/ }
	.popup .prompt { width: 100px; font-size: 11px; padding-left: 19px; }
	.popup .pop-up-title { padding: 12px 12px 8px 12px;  }
	.popup .close { right: 10px; top: 9px;}
	.popup .form-wr { padding: 10px 14px;  }
	.front_slider .item-title a, .front_slider .item-title a span { line-height: 17px; }
	.front_slider li .image img  { max-width: 125px; }
	.item_wrapp img { width: 100%; }

	.wrapper_inner  .catalog_detail .wrapp_docs { width: 100%; }
	.stores_block_wrap .stores_block .stores_text_wrapp .main_info { max-width: 300px; }
	.stores_block_wrap .stores_block .stores_text_wrapp .main_info > span { display: block; padding: 0px; }

	/* skritie naborov i komplektov */
	td.logo_wrapp div.logo { /*padding: 0 17px 0px 0px ;*/  }
	.breadcrumbs { display: none; }
	.module-cart table td.remove-cell { padding: 2px; width: 10px; }
	body .module-cart table td.thumb-cell a { height: 40px; width: 40px; }
	.wrapper_inner .middle .basket_wrapp .module-cart table td.thumb-cell { width: 40px; }
	.basket_wrapp .module-cart table.bottom.middle td {margin-bottom: 2px; margin-top: 2px; padding: 20px 0 0; }
	.basket_wrapp .module-cart table.bottom.middle td.row_titles{padding-right:10px;}
	.basket_wrapp .module-cart table.bottom.middle td.row_values {padding-left: 10px; padding-top: 10px; width:229px; margin-top: 20px;}
	.basket_wrapp .module-cart table.bottom.middle .bottom_btn td { padding: 0 20px 0 0; margin-bottom:18px;}
	.basket_wrapp .module-cart table.bottom.middle .bottom_btn td.last_blockk:last-of-type { padding-right: 20px !important; margin-bottom:18px !important; }
	.basket_wrapp .module-cart table.bottom.middle .bottom_btn td > *{float: none !important; }
	.bottom.middle .total.item_title{margin-top:10px;}

	ul.tabs li span { text-transform: none; }

	body .wrapper .top_slider_wrapp .flexslider .slides > li, body .wrapper .top_slider_wrapp .flexslider .slides > li td, body .wrapper .top_slider_wrapp .flexslider { height: 220px !important; }
	body .top_slider_wrapp .flexslider .slides > li .wrapper_inner > table { background: none !important; }
	body #content .left_block + .right_block:not(.catalog) .module-map, body .store_map .store_description { width: 100%; padding: 0; }
	body .adaptive_filter { /*display: inline-block;*/ }
	body .module_products_list .quantity-cell { display: none; }
	body .catalog_section_list .section_item  { width: 100%; }
	body .catalog_section_list .section_item_inner { margin-right: 0;    width: 100%; }
	body .module-cart .summ-cell, body .module-cart .summ-th, body .module-cart .sum-th, body .module-cart .name-cell, body .module-cart .name-th, .print body .module-cart tfoot .delay-cell, .print body .module-cart .order_item_props, .print body .module-cart .order_item_price_type, .print body .module-cart .order_item_weight { display: table-cell; }
	body .module-cart .name-cell, body .module-cart .name-th, body .module-cart tfoot .delay-cell, body .module-cart .order_item_props, body .module-cart .order_item_price_type, body .module-cart .order_item_weight { display: none; }
	body .module-cart .colored tfoot td.extended-cell { display: table-cell; }
	body .contacts_left, body .contacts_right { float: none; margin: 0; position: relative; width: 100%; }
	body .contacts_left { margin-top:39px;}
	body .contacts_left .store_description .store_property { width: 50%; float: left; margin-bottom: 20px; padding-right: 20px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; 	}
	body .contacts_left .store_description .store_property:nth-child(3) { 	clear:both; }
	body .contacts_left .store_description .store_property { margin-top: 0; }
	body .contacts_right blockquote { margin-top: 14px;clear: both; }
	body h1 { font-size: 32px; line-height: 36px; padding-top: 20px;    padding-bottom: 21px; }
	.wraps > .wrapper_inner{padding-top:0px;}
	.wraps > .wrapper_inner.front{padding-top:24px;}
	body .top-h-row ul.menu { display: none; }
	body .front_slider .preview_text  { text-overflow: ellipsis; text-overflow: -o-ellipsis-lastline; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
	body .front_slider .item-title a span, body .flexslider .text .banner_title span{ font-size: 17px; line-height: 22px; }
	body .front_slider_wrapp a.read_more, body .btn_big{ font-size: 12px; line-height: 28px; height: 27px; box-shadow: none; -moz-box-shadow: none; -webkit-box-shadow: none; border-bottom-width: 1px; }
	body .front_slider .read_more:hover{ border-bottom-width: 1px !important; }
	body .top_slider_wrapp .banner_text{ text-overflow: ellipsis; text-overflow: -o-ellipsis-lastline; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
	body .front_slider .price { font-size: 21px; }
	body .top_slider_wrapp .flex-direction-nav li { top: 100px; }
	body .top_slider_wrapp .flex-direction-nav li, body .top_slider_wrapp .flex-direction-nav li a { height: 30px; width: 30px; }
	body .top_slider_wrapp .flexslider .slides  li td.text .banner_text, body .top_slider_wrapp .flexslider .slides  li td.text .banner_title,
	body .top_slider_wrapp .flexslider .slides  li td.text .banner_buttons { margin-left: 40px; margin-right: 40px;  }
	body .index_bottom .banners_column { display: none; }
	body .index_bottom .info_column, body .index_bottom .info_column .about_column { padding-left: 0; }
	body.news_slider_wrapp .flex-control-nav.flex-control-paging { display: block; }
	body .index_bottom .info_column .news_column .news_slider_navigation { display: none; }
	body .specials_slider_wrapp ul.slider_navigation { display: none; }
	body #footer ul.bottom_main_menu, body #footer ul.bottom_submenu { width: 100%; text-align: justify; }
	body .top-h-row .search { width: 30%;	 }
	body .wrapper.head_type_2  .top-h-row  .search { display: block; }
	#content .right_block.catalog { margin-top: 35px; }
	.wrapper_inner #content .right_block .inner_wrapper { right: 0px; padding: 0px; }

	
	body .wrapper.basket_fly .basket_normal { display: block; }
	.basket_fly .wrapper_inner .basket_wrapp .wrapp_all_icons { width: 207px; }
	.basket_fly #header .middle-h-row .basket_wrapp {vertical-align: middle;padding-left: 4px;}
	.basket_fly .main-nav .search_middle_block { display: none; }
	.wrapper.basket_fly:not(.has_menu) .top-h-row .form_mobile_block .search_middle_block  { display: block; }

	body #content .left_block:not(.catalog) { width: 100%; float: none; }
	body #content .left_block.catalog { width: 100%; margin: 0px; }
	.bx_filter.bx_filter_vertical { position: absolute; margin: 0; width: 100%; top: 25px; box-shadow: 0 0px 10px rgba(0, 0, 0, 0.15); -moz-box-shadow: 0 0px 10px rgba(0, 0, 0, 0.15); -webkit-box-shadow: 0 0px 10px rgba(0, 0, 0, 0.15); z-index: 101; }
	.left_block  .bx_filter .bx_filter_section { margin: 0px; }
	body .bx_filter_container #modef { top: 4px; right: 3px; }
	body .bx_filter_vertical .filter_button { float: none; }

	.bx_filter_vertical input[type="checkbox"] + label:not(.dib) { float: left; margin-right: 10px; }
	.filter_horizontal { overflow: visible; }
	body .bx_filter_vertical .bx_filter_section .bx_filter_button_box.active .bx_filter_block .bx_filter_parameters_box_container { width: 100%; text-align: left; }
	.wrapp_all_inputs.wrap_md .wrapp_change_inputs  { width: 35%; position: relative; margin: 0px 0px 4px; }
	.wrapp_all_inputs.wrap_md .wrapp_slider   { width: 65%; padding: 10px 0px 0px 20px; }
	.smartfilter .bx_ui_slider_track { margin-top: 16px; }
	.bx_filter .bx_filter_block .bx_filter_popup_result.right#modef_mobile { left: 0px; background: transparent; position: relative; color: #888; margin: 0px; padding-left: 0px; line-height: 20px; display: inline-block; }
	.bx_filter .bx_filter_popup_result.right a, .bx_filter_container_modef { display: none; }

	.filter_horizontal .bx_filter #modef_mobile { display: none !important; }
	.filter_horizontal { padding: 0px;    position: relative; }

	div[id^=smartFilterDropDown] { max-width: 690px; }

	body .bx_filter_vertical .filter_button.show{ margin-right: 5px; }
	body #content .left_block.catalog > div, .bx_filter.bx_filter_vertical { display: none; }
	body #content .left_block .left_menu li { display: inline-block; margin-top: 3px; }
	body #content .right_block, body #content .right_block.catalog { padding-left: 0; }
	body #content .left_block  + .right_block:not(.catalog) { margin-top: 20px; }
	body .right_side .ask_small_block { margin-bottom: 30px; }
	body .right_side { width: 100%; padding-left: 0; }
	body .right_side.sections_list  { display: none; }
	body .left_side { padding-right: 0; }
	body ul.left_menu > li.exit { margin-top: 0; padding-top: 0; border-top: 0; }
	body .module-order-history ul.tabs li .triangle { margin-top: 0px; }
	body .module-order-history ul.tabs li span { padding-top: 5px; }

	.wrapper_inner .bottom.middle td > .coupon #COUPON { margin-bottom: 12px; }
	.wrapper_inner .bottom.middle td > .coupon .apply-button { display: block; clear: both; }

	.bx_ordercart_order_sum td.custom_t1 { width: 80%; }
	.module-order-history .drop-cell .result-row a.button { margin: 0px 10px 10px 0px; }
	.articles-list.lists_block.faq .item .left-data { float: none; width: 100%; max-width: initial !important; }
	.articles-list.lists_block.faq .right-data { margin: 20px 0 0; padding: 0 0 2px; width: 100%;}
	.articles-list.lists_block.faq .right-data .preview-text { padding-right: 20px; }
	#content .ask_big_block .ask_btn_block { float: none; }
	#content .ask_big_block .description { padding: 20px 0px 0px; }
	.job.border_block .wrap_md .text { width: 50%; }
	.job.border_block .wrap_md .phone { width: 25%; }
	.job.border_block .wrap_md .but { width: 25%; }
	.basket_normal .popup.card_popup_frame .basket_popup_wrapper .basket_popup_wrapp { top: 41px; }
	.news_block .info_block .news_items .item { width: 100%; padding-left: 0px; }
	.wrapper_inner .footer_top .wrap_md .phones { padding-left: 0px; }
	.wrapper_inner .footer_bottom .menu_block, .wrapper_inner .footer_bottom .social_block { width: 100%; /*padding: 0px;*/ }
	.footer_bottom .social_block .social_wrapper { padding-left: 0px; }
	.wrapper_inner .registraion-page .form-block { padding: 0px 15px; }
	.wrapper_inner .registraion-page .main_info { width: 69%; }
	.wrapper_inner .registraion-page .social_block { width: 31%; }
	.wrapper_inner .soc-avt .row input[type="text"] { width: 90%; }
	body #header .wrapper_inner ul.menu li .child .child_wrapp { padding: 25px 20px 17px; }
	.wrapper_inner .articles-list.sections .item { width: 100%; }
	.wrapper_inner .module-order-history .module-orders-list .drop-cell .not-payed { padding: 5px 7px; }
	.rss_feed_icon + .filter_block, .rss_feed_icon  + .news_detail_wrapp  { margin: 35px 0px 0px; }
	.popup .captcha-row .captcha_input { position: initial; }
	.wrapper_inner .item .child_container { display: none; }
	.start_promo .item i.title span, .wrapper_inner .wrap_tizer .wr_block .title .inner_text { font-size: 15px; }
	.start_promo .item i.price span, .wrapper_inner .wrap_tizer .wr_block.price .inner_text { font-size: 14px; }
	.wrapper_inner .wrap_tizer { }

	.basket_wrapp >div > a{display:block;}
	#header .basket_wrapp .basket_sort, #header .middle-h-row form.basket_wrapp{display:none;}
	body #header .basket_fly{width: auto;background: none;right: 0px !important;}
	.basket_wrapp .clicked > a{display:block;}

	.bx_filter_vertical.bx_filter .hidden_values{display:none;}
	.bx_filter_vertical.bx_filter .inner_expand_text{float: none;clear: both;}
	.bx_filter_vertical.bx_filter .expand_block{display:inline-block;font-size:12px;margin:5px 0px 0px; border-bottom:1px dotted #ddd;cursor:pointer;}
	.bx_filter_vertical .bx_filter_block.limited_block{max-height:none;overflow-y:visible;}
	.wrapper_inner .wrap_tizer{text-align:left;}
	.wrapper_inner .start_promo .wrap_tizer{left:0px;}


	/* ORDER */
	#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company-graf-container{float:left;}
	#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-company-desc{margin-top:0;padding-left:140px;}
	#bx-soa-order .bx-soa-pp-desc-container{margin-top:20px;padding-left:0;padding-right:0;}
	#bx-soa-order .bx-soa-pp-list-termin{width:auto;}
	#bx-soa-order .bx-soa-section .bx-soa-section-title-container .col-sm-9{float:left;width:75%;}
	#bx-soa-order .bx-soa-section .bx-soa-section-title-container .col-sm-3{float:left;width:25%;}
	#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr .bx-soa-item-td.bx-soa-item-properties{width:50%!important;display:inline-block;vertical-align:top;float:none;}
	.bx-soa-item-nth-4p1{display:none;}

	/*personal*/
	.sale-order-detail-about-order-inner-container-repeat{margin:0px;}
	.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment-composition-map{width:100%;}
	.personal_wrapper .orders_wrapper .sale-order-detail-total-payment-container{width:100%;}
	.personal_wrapper .col-xs-6{width: 50%;}
	body .personal_page #content .wrapper_inner .left_block .left_menu{margin:0px 0px 0px;padding: 20px 0px 0px;}
}

@media all and (min-width: 768px){
	header .mobile_menu{display:none !important;}
}

@media all and (max-width: 767px){
	header .wrap_menu{height: auto;padding:0px;}
	header .menu_top_block, #header .middle-h-row .center_block{display:none;}
	.menu.adaptive{display:block;}
	#header .catalog_menu .wrapper_middle_menu .inc_menu{padding-left:0px;}
	header .menu_top_block >li, .top-h-row .menu.topest > li {float: left;}
	.catalog_section_list .section_item .image{width:90px;}
	.catalog_section_list .section_item  .image  img{max-width:100%;max-height:100%;}


	/*basket*/
	.bx_ordercart .bx_sort_container{margin-bottom:20px;}
	.bx_ordercart .bx_ordercart_order_table_container{border-top:none;}
	.bx_ordercart .bx_ordercart_order_table_container table thead{display:none;}
	.bx_ordercart .bx_ordercart_order_table_container>table{display:block;}
	.bx_ordercart .bx_ordercart_order_table_container>table>tbody{display:block;}
	.bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr{display:block;position:relative;display:block;padding:29px 20px 20px 145px;border-top:1px solid #f3f3f3;}
	.bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr>td{display:block;padding:0;border:none;}
	.bx_ordercart .bx_ordercart_order_table_container table tbody td.custom{padding:0;}
	.bx_ordercart .bx_ordercart_order_table_container table tbody td.custom span{display:block;font-size:12px;line-height:20px;color:#999;}
	.bx_ordercart .bx_ordercart_order_table_container table tbody td.item{width:auto;padding-top:0;}
	.bx_ordercart .bx_ordercart_order_table_container table tbody td.item .bx_ordercart_itemtitle{padding-right:79px;text-align: left;}
	.bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr:after{content:"";display:table;clear:both;}
	.bx_ordercart .bx_ordercart_order_table_container table tbody td.itemphoto{float:left;margin:-9px 0 0 -125px;padding:0;width:90px;}
	.bx_ordercart .bx_ordercart_order_table_container table tbody td.price{padding-top:1px;}
	.bx_ordercart .bx_ordercart_order_table_container table tbody td.price+td.custom>span{display:none;}
	.bx_ordercart .bx_ordercart_order_table_container tbody td.control{position:static;padding:0;}
	.bx_ordercart .bx_ordercart_order_table_container table.counter{margin-top:-6px;}
	.bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr>td:not(.itemphoto):not(.margin):not(.item){width:25%;margin:10px -3px 0 0;display:inline-block;vertical-align:top;}
	.bx_ordercart tbody td.control a:last-of-type{position:absolute;right:40px;top:20px;}
	.bx_ordercart #basket_items_delayed tbody td.control a:first-of-type{position:absolute;right:40px;top:20px;}
	.bx_ordercart .bx_ordercart_order_table_container table tbody td.custom{}
	.bx_ordercart .bx_ordercart_order_table_container table tbody td.custom span{display:inline-block;vertical-align:middle;}
	.bx_ordercart .bx_ordercart_order_table_container table tbody td.custom>div{display:inline-block;vertical-align:middle;}
	.bx_ordercart .bx_ordercart_order_table_container table tbody td.custom>div[id^=sum_]{display:block;}
	.bx_ordercart #basket_items .custom div[id^=discount_value]{margin-top:-3px;}
	.bx_ordercart .bx_ordercart_order_table_container tbody td.custom .centered{margin-top:0;}

	.bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr>td:not(.item):not(.itemphoto):not(.margin){width:50%;}
	.bx_ordercart .bx_ordercart_order_table_container table.counter{margin-top:12px;}
	.bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr>td.price{margin-top:20px!important;}
	.bx_ordercart .bx_ordercart_order_pay>div{width:100%;float:none;}
	.bx_ordercart_order_pay_right{margin-top:0;}
	.bx-touch .bx_ordercart .bx_sort_container a{width:50%;margin-bottom:-1px;}

	/*personal*/
	.bx-sap .sale-acountpay-pp{max-width:100%;}
	.sale-order-payment-change-pp, .sale-order-payment-change-pp-item-container{max-width:100%;}
	.personal_wrapper .orders_wrapper .hidden-xs {display: none!important;}
	.personal_wrapper .orders_wrapper .visible-xs {display: block!important;}
}

@media all and (max-width: 736px){
	.wrapper_inner #content .catalog_block .catalog_item_wrapp:nth-child(3n) { width: 210px; }
	.catalog_block .catalog_item_wrapp:nth-child(3n) .item_wrap  { margin-right: 0px; }
}
@media all and (max-width: 716px){
	.wrapper_inner #content .catalog_block .catalog_item_wrapp:nth-child(3n) { width: 230px; }
	.catalog_block .catalog_item_wrapp:nth-child(3n) .item_wrap  { margin-right: 20px; }
	.wrapper_inner  .staff.list .item .image { float: none; }
	.wrapper_inner  .staff.list .item .info { margin: 10px 0px 0px 0px; }
	.stores_block_wrap .stores_block .stores_text_wrapp.image_block .main_info > span { max-width: 200px; }
	.rows_block .block_list .item_block{width:50%;}
	.magnifier{max-width:220px;}
}
@media all and (max-width: 650px){
	.footer_top .sblock .wrap_icon { display: none; }
	.footer_top .sblock .forms .email_wrap { width: 72%; }
	.footer_top .wrap_md .phones .order { padding: 0px 0px 0px 20px; }
	.inner_wrapper .sort_header .sort_filter a .icon, .sort_header.view_table .sort_filter a .icon { display: inline-block; }
	body .top-h-row  .phone .icon	{ display: none; }
	body .top-h-row  .phone	{ 	margin-top: 11px; }
	body .module-orders-list .order-extra-properties 	{ display: inline; }
	.filter_block  ul{float:none;}
	.filter_year {float: none;margin:5px 0 5px;}
	body .module-orders-list.colored thead td, body .module-orders-list td.date-cell, 	body .module-orders-list td.count-cell, body .module-orders-list td.price-cell,
	body .module-orders-list td.pay-status-cell, body .module-orders-list td.order-status-cell, body .module-orders-list .drop-container th.price-th,
	body .module-orders-list .drop-container th.count-th ,body .module-order-history.orderdetail .module-orders-list.goods td	{ display: none; }
	body .module-order-history.orderdetail .module-orders-list.goods td.vname, body .module-order-history.orderdetail .module-orders-list.goods td.price, body .module-order-history.orderdetail .module-orders-list.goods td.vqnt { display: table-cell; }
	.module-order-history .drop-cell .result-row a.button22{ margin-top: 5px; }
	body .sort_header .sort_filter a span { display: none; }
	.basket_sort ul.tabs li span { font-size: 14px; }

	body .module-cart .summ-cell, body .module-cart .summ-th, body .module-cart .sum-th{display:none;}
	.basket_wrapp .module-cart table.bottom.middle td.row_values {width:160px;margin-top: 21px;}
	.wrapper_inner .middle .basket_wrapp .module-cart table.colored tr td { padding: 4px; }
	body .module-cart table td.thumb-cell a { line-height: 40px; }
	.wrapper_inner .middle .basket_wrapp .module-cart table tr td.count-cell { padding-top: 16px; }
	.wrapper_inner .basket_wrapp .module-cart table.bottom.middle td.row_values .item_title { display: inline-block; float: left; margin: 0 10px 0 0; font-weight: bold;}
	.wrapper_inner .basket_wrapp .module-cart table.bottom.middle td.row_titles .item_title {  display: none !important; }
	.wrapper_inner .basket_wrapp .module-cart table.bottom.middle td.row_values .wrap_prices { float: left; }
	.bottom.middle .total.item_title { display: none; }
	body .module-cart .cost-cell, body .module-cart .summ-cell, body .module-cart .summ-cell *, body .module-cart .row_values .price { font-size: 14px; }
	.wrapper_inner .phones .order_wrap_btn { margin-left: 5px; }
	.wrapper_inner .top-h-row .h-user-block .module-enter, .wrapper_inner .phones > span .callback_btn { font-size: 11px; }
	.wrapper_inner .footer_top .sblock, .wrapper_inner .footer_top .wrap_md .phones { width: 100%; }
	.footer_top .wrap_md .phones .phone_block { padding-left: 0px; }
	body .authorization-cols .col.authorization, body .authorization-cols .col.registration { 	width: 100%; padding-right: 0; }
	.wrapper.has_menu #header .wrapper_inner .middle-h-row  .center_block .search { display: none; }
	.wrapper.has_menu #header .middle-h-row .center_block {padding: 0 20px 0 0;}
	.wrapper.has_menu .top-h-row .form_mobile_block .search_middle_block  { display: block; }
	.wrapper_inner .forms .text_block, .wrapper_inner .forms .form_block { width: 100%; padding: 0px; }
	.basket_print{display: inline-block;}
	.wrapper_inner .basket_wrapp .module-cart table.bottom.middle .bottom_btn .basket_checkout_wrapp { text-align: left; }
	.basket_wrapp .module-cart table.bottom.middle .bottom_btn td.last_blockk { float: left !important; }
	.bx_order_make .bx_block.r1x3{width:35%}
	.bx_order_make .bx_block.r3x1{width:65%}
	.job.border_block .wrap_md .text { width: 70%; }
	.job.border_block .wrap_md .phone { width: 30%; }
	.job.border_block .wrap_md .but { width: 100%; display: block; text-align: left; padding: 20px 0px 0px 0px; }
	.container .page_not_found td.image, .container .page_not_found td.description { display: block; width: 100%; }
	.wrapper_inner .stores .stores_list { width: 51%; }
	.authorization-cols .form-block { height: auto !important; }

	.catalog_section_list .item_block{width:100%;}
	.sort_header .sort_filter a i.arr{width:11px;}
	.sort_header .sort_filter a i.arr:after{top: 0px;left: 1px;font-size: 14px;}
	.magnifier{max-width:150px;}
}
@media all and (max-width: 630px){
	.popup .soc-avt { padding: 18px 10px 14px; }
	.popup .reg-new { padding: 35px 10px; }
	.popup .prompt { width: auto; padding-left: 0px; }
	.wrapper_inner  .catalog_detail .tabs_content .char, .wrapper_inner  .catalog_detail .tabs_content .serv { width: 100%; padding: 0px !important; }
	.catalog_detail .tabs_content .descr_div .char_block{width:100%;padding-right:0;}
	.module-order-history .module-orders-list td.drop-cell .item-shell td:first-child { padding-left: 5px; }
	.module-order-history .drop-cell .result-row { padding-left: 10px; padding-right: 10px; }
	.auth_wrapp.form-block .main_info, .auth_wrapp.form-block .socserv { width: 100%; }
	.auth_wrapp.form-block .main_info { }
	.auth_wrapp.form-block .socserv {     padding: 0px 14px 20px;}
	.popup.enter_frame.show { width: 80%; }
	.popup.show .popup-intro .pop-up-title { font-size: 20px; line-height: 18px; }

}

@media all and (max-width: 600px){
	.stores_block_wrap .stores_block .stores_text_wrapp.image_block .imgs { display: none; }
	.stores_block_wrap .stores_block .stores_text_wrapp.image_block .main_info > span { /*max-width: initial;*/ }
	.stores_block_wrap .stores_block .stores_text_wrapp.image_block .main_info { margin: 0px; }
	.tizers_block .item { width: 50%; text-align: center; }
	.tizers_block .item:nth-child(n+5) { /*width: 100%;*/ text-align: center; }
	.catalog_detail .info_item .middle_info .prices .price.discount { margin-top: 3px; }

	.wrapper_inner .start_promo  .item ,
	.wrapper_inner .start_promo  .item.wide50,
	.wrapper_inner .start_promo  .item.wide100 { width: 50%; border: 1px solid #fff;  padding-bottom: 47%; }
	.wrapper_inner .start_promo  .item  span.wrap_main,
	.wrapper_inner .start_promo  .item.wide50 span.wrap_main,
	.wrapper_inner .start_promo  .item.wide100 span.wrap_main { max-width: 500px;  }
	.wrapper_inner .start_promo { margin: 0px; }
	.start_promo .item.normal:nth-child(3n) { border-right-width: 1px;}
	.start_promo .item.normal:nth-child(3n+1), .start_promo .item.s_2.normal, .start_promo .item.normal:nth-child(2n+1) + .item:not(.s_2) { border-left-width: 1px; }
	.start_promo .item.s_4.normal, .start_promo  .item.normal:nth-child(3n+1).s_4 { border-left-width: 1px !important; }
	.start_promo.normal_view  .item.normal:nth-child(2n+1) { border-left-width: 0px !important; }
	.start_promo.normal_view  .item.normal:nth-child(2n+2) { border-left-width: 2px !important; }

	.subscribe-form .wrap_bg .top_block, .subscribe-form .wrap_bg .sform { width: 100%; }
	.subscribe-form .wrap_bg .sform { margin-top: 22px; }

	.md-50.img { display: none; }
	.md-50.big { width: 100%; padding: 31px 0px 37px; }

	.footer_top .sblock .forms .email_wrap { width: 70%; }
	.footer_top .wrap_md .phones .phone_wrap a { font-size: 15px; }

	.center_block .search_block { display: none; }
	.header_wrap #header .middle-h-row .center_block ul.menu, .basket_fly #header .middle-h-row .center_block ul.menu { width: 100%; padding: 0px; }
	.search_middle_block { display: none; }

	.wrapper.m_color_dark #header .catalog_menu ul.menu > li.current { background: #3f3f3f; }
	body .header_wrap.white .menu > li.current > a span { border-bottom-color: transparent; }

	body .wrapper .top_slider_wrapp .flexslider .slides > li, body .wrapper .top_slider_wrapp .flexslider .slides > li td, body .wrapper .top_slider_wrapp .flexslider { height: 200px !important; }

	body .top_slider_wrapp .flex-direction-nav li { top: 85px; }
	body .item_main_info .item_slider { display: none; }
	body .catalog_detail .adaptive_extended_info_wrapp { 	display: block; }
	body .item_main_info .item_slider.flex { display: block; }
	body .catalog_detail .item_main_info .item_slider { padding: 0; width: 100%; float: none; }
	body .catalog_detail .item_main_info .right_info { padding: 0; border-top: 1px solid #e5e5e5; }
	body .catalog_detail .extended_info { margin-bottom: 0; }
	body .catalog_detail .item_main_info .item_slider .thumbs, body .catalog_detail .right_info .info_block, body .catalog_detail .right_info hr, body .catalog_detail .right_info .preview_text, body .catalog_detail .right_info hr.separator,.top_info .more_block { display: none; }
	body .catalog_detail .item_main_info { margin-top: 0; }
	.catalog_detail .item_main_info .item_slider:after, .catalog_detail .item_main_info .right_info .info_item:before { display: none; }
	.item_slider .slides { height: 260px; line-height: 250px; line-height: normal; padding: 25px 0px 5px 0px;overflow: hidden;margin: 0px;max-width: initial; }
	.item_slider.flex .slides > li > a{height:260px;display:block;}
	.item_slider.flex .slides > li > a img{max-height:100%;}
	.module_products_list .cost.prices .price { font-size: 15px; }
	.module_products_list td.item-name-cell a { font-size: 12px; }
	body .module_products_list td.but-cell { padding-right: 19px; }
	body .module_products_list td.like_icons { display: none; }

	.catalog_detail .top_info .like_icons span.value span { display: none; }
	.catalog_detail .top_info .like_icons span.value:before { margin-right: -1px; }
	.info_item .top_info .brand { padding: 0 5% 10px 0; }

	body .authorization-cols .auth-title { font-size: 18px; }

	body .authorization-cols .col.registration { 	margin-top: 30px; }
	body .module-cart table td.delay-cell .value { display: none; }
	body li[item-section="AnDelCanBuy"] .module-cart table td.count-cell { padding: 3px 0; font-size: 0; }
	body .module-cart .counter_block { font-size: 0; }
	body .module-cart table td { padding: 3px; }
	body .count-cell div.error { position: static; white-space: normal; }
	body .module-cart .counter_block input[type="text"] { width: 30px; height: 30px; font-size: 13px; }
	body .module-cart a.wish_item .icon i	{ margin-right: 0; }
	body .module-cart table tfoot td.extended-cell	{ display: none !important; }
	body .module-cart table tfoot .basket_fast_order_wrapp	{ text-align: right; padding-right: 20px; }
	body .module-cart table tfoot .basket_checkout_wrapp	{ padding-left: 20px; }
	body .module-cart table td.thumb-cell	{ width: 50px; }
	body #order_form_content .module-cart table td.thumb-cell	{ width: 80px; }
	body .module-cart table td.thumb-cell a { height: 50px; width: 50px; position: relative; }
	body .module-form-block-wr .form-block .r { width: 100%; }
	body .brands_list li { width: 32%; }
	body .drop-question .form-block .left-data, 	body .drop-question .form-block .right-data { width: 100%; margin-left: 0; padding-right: 0; float: none; }
	body .news_detail_wrapp .detail_picture_block	{ margin: 20px auto; text-align: center; float: none; }
	
	.registraion-page .form-block { padding: 0px 20px; }
	.registraion-page .main_info { padding-bottom: 0px; }
	.registraion-page .social_block { padding-top: 5px; }
	body .wrapper .top_slider_wrapp .flex-control-paging	{ display: none; }
	body .top_slider_wrapp .flex-direction-nav li 	{ display: none; }

	body .wrapper.head_type_1:not(.front_page) #header	{ margin-bottom: 70px; }
	body .wrapper.head_type_1:not(.front_page) #header + .wrapper_inner	{  border-top: 0; box-shadow: none; -o-box-shadow: none; -moz-box-shadow: none; -webkit-box-shadow: none; }
	body #header ul.menu.full > li.search_row { display: block; }
	body .front_slider_wrapp .extended_pagination	{ display: none; }
	body .front_slider .info { padding-left: 0; }

	body .front_slider_wrapp .flex-viewport { width: 100%; }
	body .top_slider_wrapp .banner_text { margin-top: 10px; -webkit-line-clamp: 2; }
	body .flexslider .banner_buttons { margin-top: 10px; }
	body .index_bottom .info_column .news_column .shadow 	{ display: block;}
	body .index_bottom .info_column .about_column, body .index_bottom .info_column .news_column { width: 100%; }
	body .index_bottom .info_column .about_column { margin-bottom: 10px; }
	body .index_bottom .info_column .news_column { padding-left: 0; }
	body .index_bottom .info_column .about_column .about_show_more { display: block; text-align: center; }
	body .brands_slider_wrapp { padding: 36px 0px 25px; }
	body .top-h-row .search #title-search-input { display: none; }
	body .top-h-row .search #search-submit-button { border-radius: 2px; -moz-border-radius: 2px; -webkit-border-radius: 2px; position: static; margin: 1px auto 0; }
	body .top-h-row .search { width: 20%; }
	body .top-h-row .search form { width: 100%; }
	body .top-h-row .search { text-align: center; }
	body #header ul.menu.adaptive { display: block; }
	body #header ul.menu.adaptive .menu_opener { cursor: pointer; }
	body #header ul.menu.adaptive > li  > a, body #header ul.menu.full > li  > a { font-size: 14px; text-transform: uppercase; text-decoration: none; padding: 0 20px; display: inline-block; height: 42px; line-height: 43px; }
	body .wrapper.has_menu .main-nav { display: block; }
	body #header ul.menu.full { border-radius: 0 0 3px 3px; -moz-border-radius: 0 0 3px 3px; -webkit-border-radius: 0 0 3px 3px; display: none; box-shadow:  0 3px 18px rgba(44, 44, 44, 0.8); -moz-box-shadow:  0 3px 18px rgba(44, 44, 44, 0.8); -webkit-box-shadow:  0 3px 18px rgba(44, 44, 44, 0.8); }
	body ul.menu li.catalog  a i { background: url("../images/arrows_small.png") 3px -21px no-repeat; right: 15px; top: 10px; }
	body ul.menu li.catalog:hover  a i { background-position: -33px -21px; }
	body #header ul.menu.full > li:not(.current):not(.search_row) { background: #ecf0f3; border-top: 1px solid #f2f5f7; border-bottom: 1px solid #e4e6e7; }
	body #header ul.menu.full > li:not(.current) a { color: #000; }
	body #header .catalog_menu { /*display: none;*/ }
	body #header { border-bottom: 0 !important; box-shadow: none !important; -moz-box-shadow: none !important; -o-box-shadow: none !important; -webkit-box-shadow: none !important; }
	body  .wrapper .top_slider_wrapp  { /*margin-top: 54px !important;*/ }
	body #header .center_block .main-nav { margin-top: 15px; left: -15px; margin-left: 0px; padding: 7px 15px; }
	body #header ul.menu.full > li { display: block; width: 100%; text-align: left; }
	body #header ul.menu.full > li.stretch { display: none; }
	body #header ul.menu.full.opened li:hover .child, body #header ul.menu.full.opened li:hover .space { display: none; }

	body #header ul.menu.full > li:not(.menu_opener) > a { border-left: 0 !important;  border-right: 0 !important;  box-sizing: border-box; -webkit-box-sizing: border-box;  -moz-box-sizing: border-box;width: 100%; }
	body .top-h-row .search, body .wrapper.has_menu .top-h-row .search, .wrapper.has_menu #header .middle-h-row .center_block .search { display: none; }
	body  .display_list .list_item .image { width: 33%; }
	body .display_list .list_item .image a, body .display_list .list_item .image, body .display_list .list_item { min-height: inherit; }
	body .sort_header .sort_filter { font-size: 0; }
	.h_color_colored .header_wrap .menu > li.current > a span { border-bottom-width: 0px; }
	.h_color_colored .main-nav ul.menu > li > a:hover { opacity: 1; }
	.m_color_dark #header ul.menu.full.opened > li { background: #505050; border-top: 1px solid #848484; border-bottom: 1px solid #3d3d3d; }
	.m_color_dark #header ul.menu.full.opened > li.current { background: #2f2f2f; border-top: 1px solid #848484; }
	.m_color_dark #header ul.menu.full.opened li:not(.search_row):hover, body .m_color_dark #header ul.menu.full.opened li:not(.search_row):hover, body .wrapper.m_color_dark #header ul.menu.full.opened > li:hover { background: #505050; }
	.m_color_dark #header ul.menu.full.opened li.current, .m_color_dark #header ul.menu.full.opened li:not(.search_row):hover { border-bottom: 1px solid #3d3d3d; border-top: 1px solid #848484; }
	body .h_color_white .center_block .menu.full > li.current > a { color: #fff; }
	body .h_color_white .center_block .menu.full > li.current > a span { border: 0px; }

	.wrapper.has_menu .header_wrap  #header .catalog_menu { display: none; }
	body .m_color_dark #header .center_block .main-nav, body .m_color_dark.wrapper #header .center_block .main-nav { background: #3f3f3f; border-top-width: 0px; }
	.basket_normal .popup { top: -3px !important; }
	.basket_wrapp .basket_block .link { bottom: -27px; }
	.bx_order_make .bx_block.float { width: 33%; }
	.bx_order_make .bx_block.r3x1, .bx_order_make .bx_block.r1x3 { width: 100%; }
	.module-gallery-list li { width: 33.33%; }
	.wrapper_inner .articles-list.vertical .item { width: 50%; }
	.articles-list.lists_block .right-data { margin-left: 150px; }
	.articles-list.lists_block:not(.vertical) .item .left-data { width: 100%; float: none; max-width: initial; }
	.articles-list.lists_block:not(.vertical) .item .left-data a { height: auto; }
	.articles-list.lists_block:not(.vertical) .item .right-data { margin: 20px 0px 0px 0px; }
	#content .right_side.wide { padding: 0px; float: none; width: 100%; }
	#content .left_side.wide { padding: 0px; }

	.wrapper.basket_fly:not(.has_menu) .top-h-row .form_mobile_block .search_middle_block, .wrapper.has_menu .top-h-row .form_mobile_block .search_middle_block { display: none; }
	.wrapper_inner .wrap_md .news_wrap, .wrapper_inner .wrap_md .subscribe_wrap { width: 100%; margin: 0px; }
	.wrapper_inner .registraion-page .main_info { width: 100%; border-right-width: 0px; padding-right: 0px; padding-top: 0px; }
	.wrapper_inner .registraion-page .social_block { width: 100%; padding: 0px; }
	.wrapper_inner .soc-avt .row input[type="text"] { width: 90%; }

	.wrapper_inner .start_promo .item i.price { display: block; }
	.wrapper_inner .start_promo .item i.price .tizer_text { display: none; }

	.wrapper_inner .stores .all_map { margin-top: 5px; }
	.wrapper_inner .stores .stores_list { width: 100%; padding: 0px; }
	body h1 { /*margin-top: 70px;*/ }
	.bx-ie .basket_wrapp .wraps_icon_block .count a, .bx-ie .basket_wrapp .wraps_icon_block .count .text  { line-height: 18px; }
	.start_promo .item img { max-height: 280px; height: 106% !important; }
	.item:not(.touch_class):hover .scale_block_animate, .touch_class .scale_block_animate{transform:none;}
	.start_promo .item.wide50 img, .item.wide50:hover img.scale_block_animate, .start_promo .item.wide100 img, .item.wide100:hover img.scale_block_animate { transform: scaleX(1.5); width: 100%; }

	.footer_bottom_inner .rows_block .menus, .footer_bottom_inner .rows_block .soc{width:100%;}
	.footer_bottom_inner .rows_block .soc .soc_wrapper{text-align:center;float: none;margin: 10px 0px 0px;}
	#footer .footer_bottom_inner .links.rows_block{max-width:initial;}

	.bx_item_list_you_looked_horizontal.col3 .bx_catalog_item{width:47.3333% !important;}
	.bx_item_list_you_looked_horizontal.col3 .bx_catalog_item:nth-child(3n+1){clear:none !important;}
	.bx_item_list_you_looked_horizontal.col3 .bx_catalog_item:nth-child(2n+1){clear:both !important;}

	#footer .footer_bottom_inner .phone_block{padding-right:25px;}
	#footer .footer_bottom_inner .phones{padding-bottom:20px;}
	#footer .footer_bottom_inner{padding-bottom:14px;}
	#footer .footer_bottom_inner .phones .order_wrap_btn{margin-bottom:0px;}

	.bx_ordercart_order_pay_center .icon_error_wrapper{float: none;margin: 0px 0px 20px;}
	.tracker{display:none;}

	/*personal*/
	.personal_wrapper .orders_wrapper .sale-order-payment-change-pp-list .sale-order-payment-change-pp-company{width:100%;padding-right:0px;}
	.personal_wrapper .orders_wrapper .sale-order-list-inner-row .sale-order-list-cancel-container{float:none;}
	.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment .sale-order-detail-payment-options-shipment-image-container{width:100%;}
	.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment .sale-order-detail-payment-options-methods-shipment-list{width:100%;padding-top:10px;}
	.sale-order-detail-order-item-td .sale-order-detail-order-item-block, .sale-order-detail-order-item-td .sale-order-detail-order-item-block .sale-order-detail-order-item-img-block{padding:0px;}
	.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-shipment-composition-map > .row{margin-right:-7px;}
	.personal_wrapper .orders_wrapper .sale-order-detail-payment-options-methods-information-block .sale-order-detail-payment-options-methods-image-container, .personal_wrapper .orders_wrapper .sale-order-detail-payment-options-methods-information-block .sale-order-detail-payment-options-methods-info{width:100%;padding-bottom:10px;}
	.personal_wrapper .orders_wrapper div.sale-order-detail-payment-options-methods{padding-top:0px;}
	.personal_wrapper .orders_wrapper div.sale-order-detail-about-order-inner-container > .row > div{width:100% !important;}
	.sale-order-detail-about-order-inner-container-name-read-more, .sale-order-detail-about-order-inner-container-name-read-less{margin:0px 0px 15px;}
	.sale-order-detail-order-item-td.sale-order-detail-order-item-properties{width:100%;float:left;}
	.sale-personal-profile-list-container>tbody>tr>th, .sale-personal-profile-list-container>tfoot>tr>th, .sale-personal-profile-list-container>thead>tr>td, .sale-personal-profile-list-container>tbody>tr>td{
		font-size:10px;padding-left:2px;padding-right:2px;
	}
	.sale-personal-profile-list-container>tbody>tr>th{padding-left:2px;padding-right:2px;}
}
@media all and (max-width: 570px){
	body .display_list .description_wrapp { display: none; }
	body .display_list .adaptive_name { display: table-row; }
	.wrapper_inner .bx_ordercart_order_sum td.custom_t1 { width: 80%; }

	/*basket*/
	.bx_ordercart .bx_ordercart_order_pay .bx_ordercart_order_pay_center .catalog_back{width:185px;text-align: center;}
	.bx_ordercart .bx_ordercart_order_pay .bx_ordercart_order_pay_center .checkout{float: left;clear: both;width:185px;text-align: center;margin: 10px 0px 10px;}
	.bx_ordercart .bx_ordercart_order_pay_center .oneclickbuy{float:right;margin: 10px 0px 10px;}

	/* ORDER */
	#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-img-block{float:left;}
	/*#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr .bx-soa-item-td{width:100%!important;}*/
	/*#bx-soa-order .bx-soa-item-tr{padding-bottom:10px;}*/
	#bx-soa-order .bx-soa-coupon-item{text-align:left;}
	#bx-soa-order .bx-soa-section .bx-soa-coupon-item .bx-soa-tooltip{float:none;margin-left:0;}
	#bx-soa-order .bx-soa-coupon-item .bx-soa-tooltip .tooltip-inner{margin-top:3px;text-align:left;}
	#bx-soa-order .bx-scu-container{padding-top:0;}
	#bx-soa-order  .bx-soa-item-td-title, #bx-soa-order  .bx-soa-item-td-text{display:block!important;}
	#bx-soa-order .bx-soa-item-td-title, #bx-soa-order .bx-soa-item-td-text{font-size:15px;}
}
@media all and (max-width: 550px){
	.catalog_detail .offers_table .opener {  padding: 0px; }
	.wrapper_inner  table.offers_table td { padding: 13px 8px; }
	table.offers_table .ablock { margin: 0px 0px 10px; }
	table.offers_table td.count {   text-align: left;  width: 50%; height: 40px; border-bottom: 0; }
	table.offers_table td.counter_block  { width: 50%; height: 40px; border-bottom: 0;}
	table.offers_table td.buy {  width: 50%; text-align: left; clear: left; height: 43px; }
	table.offers_table td.one_click_buy {  width: 50%; text-align: center; height: 43px; }
	.counter_block_wr.ablock { padding: 0px 5px 0px 0px; }

	.basket_normal .popup { top: -12px !important; }
	#basket_line .basket_normal .popup { display: none !important; }

	.slider_navigation.compare .flex-direction-nav { display: none !important; }
	.wrapp_scrollbar .wr_scrollbar { margin-left: 0px; margin-right: 0px; }
	.bx_compare .tabs-head li { font-size: 13px; }
	.wrapper_inner .bx_sort_container .wrap_remove_button { left: 0px; top: 70px; right: initial; z-index: 3; }

	.registraion-page .top p { font-size: 10px; padding: 0px; }
	.registraion-page .top p:before, .registraion-page .top p:after { display: none; }

	.footer_bottom .all_menu_block .submenu_block { display: none; }
	.footer_bottom .submenu_top .menu_item { width: 100%; }

	.footer_top .wrap_md .phones .order { display: none; }
	.footer_top .wrap_md .phones .phone_wrap { width: 100%; }
	.footer_top .sblock .forms .email_wrap { width: 60%; }

	.footer_top .sblock .wrap_bg { width: 100%; padding: 0px 0px 13px; }
	.footer_top .sblock .wrap_icon { /*display: inline-block;*/ }
	.footer_top .sblock .forms { width: 100%; padding-left: 0px; }
	#footer .wrap_md .empty_block { display: none; }
	.footer_bottom .social_block { padding: 0px; }
	.footer_top .wrap_md .phones .phone_block, .footer_bottom .social_block .social_wrapper { width: 100%; padding: 0px; }
	.pay_system_icons { display: none; }

	.basket_wrapp .basket_block  div.text { display: none; }
	.wrapper_inner .basket_wrapp .header-compare-block { /*margin-left: 30px;*/ }

	.h_color_colored .header_wrap .basket_wrapp .empty_cart:not(.bcart) .wraps_icon_block.basket .count span { background: #000; }
	body .wrapper .top_slider_wrapp .flexslider .slides > li, body .wrapper .top_slider_wrapp .flexslider .slides > li td, body .wrapper .top_slider_wrapp .flexslider { height: 180px !important; }

	body .module_products_list td { padding: 2px; }
	body .search-page form  { padding: 15px 5px 17px; }
	body .display_list .list_item td.image, body .display_list .list_item td.information_wrapp	{ padding: 0 15px 15px; }
	body .display_list .list_item td.information_wrapp .information	{ padding: 0; }
	body .catalog_block .catalog_item_wrapp, .wrapper_inner #content .catalog_block .catalog_item_wrapp:nth-child(3n), .wrapper_inner #content .catalog_block .catalog_item_wrapp:nth-child(4n), body .right_block.catalog .catalog_block .catalog_item_wrapp	{ width: 50%; }
	body #header .middle-h-row td.logo_wrapp	{ width: 50%; }
	#header .middle-h-row td.logo_wrapp img	{ max-width: 100%; }
	body #header .middle-h-row td.center_block	{ padding: 0; width: 0; }
	body #header .middle-h-row .basket_wrapp	{ width: 35%; }
	body .basket_normal  #header .middle-h-row .basket_wrapp{ width: 50%; }
	body .header-cart-block .cart .summ	{ display: none; }
	body .header-cart-block .cart .cart_wrapp	{ padding-left: 32px; }
	body .header-cart-block .cart	{ width: 120px; }
	body .header-cart-block .cart .cart_wrapp:not(.with_delay)	{ padding-top: 6px; }
	body .header-cart-block .cart > span.icon	{ display: none; }
	body .header-cart-block .cart > span.icon.small	{ display: inline-block; }
	body .header-cart-block .cart .delay_link .icon	{ display: none; }
	body .header-cart-block .cart .delay_link	{ position: relative; zoom: 1; top: -4px; }
	body .header-cart-block .cart .cart-call, body .header-cart-block .cart .cart-call-empty	{ display: none; }
	body .header-cart-block .cart .cart-call.small	{ display: inline; }
	body .header-cart-block .cart .cart-call.small + a{display:none;}
	body .header-cart-block .cart .delay_link .icon	{ position: relative; zoom: 1; top: 0; width: 17px; }
	body .header-cart-block .cart .cart-call span	{ border: none; text-decoration: underline; }
	body .header-cart-block .cart .cart_wrapp.with_delay	{padding-top: 0;}
	body .front_slider .preview_text	{-webkit-line-clamp: 2;}
	body ul.tabs li span	{font-size: 10px;padding-top: 6px;line-height: 9px;}
	body ul.tabs li	{padding: 0 4px;height: 20px;line-height: 20px;}

	body #footer ul.bottom_main_menu li	{ display: block; text-align: center; width: 100%; padding: 0 20%; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; }
	body #footer ul.bottom_main_menu li a	{ border-bottom: 1px solid #d8d8d9; width: 100%; display: inline-block; padding: 9px 0 5px; color: #000; text-shadow: none; -moz-text-shadow: none; 	-webkit-text-shadow: none; 	}
	body #footer .bottom_submenu li	{display: none;}
	body #footer .bottom_submenu li.copy	{display: block;width: 100%;text-align: center;}
	body #footer .footer_inner .line	{background: transparent;}
	body h1	{ font-size:20px; line-height: 20px; padding-top: 24px;}
	body h1, body h2, body h3, body h4	{text-align: center;}
	body .store_map .stores_images.multiple	{text-align: center;}
	body .show_number	{text-align: center;}
	body .authorization-cols .auth-title	{text-align: center;}
	body .search-page form { width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; text-align: center; }
	body .breadcrumbs { text-align: center; }
	body #content .left_block .left_menu { text-align: center; }
	body .display_list .list_item td.information_wrapp, body .display_list .list_item td.image { width: 50%; }
	body .display_list .list_item .ribbons { top: 0; }
	body .display_list .list_item td.information_wrapp .information { border-left: 0; position: static; }
	body .display_list .likes_icons { display: none; }
	body .display_list .available_block, body .display_list .noavailable_block { display: none; }
	body .display_list .availability-row { display: block; }
	body .display_list .price_block { margin-bottom: 10px; }
	.bx_order_make .bx_block.float { width: 50%; }
	.wrapper_inner .tizers_block .item { width: 50%; }
	.wrapper_inner .stores_block_wrap .stores_block .stores_text_wrapp > span { display: none; }
	.wrapper_inner .confirm .bx_section { padding: 18px 23px; }
	.confirm .bg_block:before, .confirm .bg_block:after { display: none; }
	.form-block-wr .iblock.label_block, .form-block-wr .iblock.text_block {  width: 100%;}
	.form-block-wr .iblock.text_block {  padding: 10px 0px 0px; }
	.basket_wrapp .empty_cart.ecart.bcart .wraps_icon_block.basket .count, .basket_wrapp .nitems.ecart .wraps_icon_block.basket .count { opacity: 1; }
	.wrapper_inner .basket_wrapp .wraps_icon_block.basket .count .items a { color: #fff; }
	.stores_block_wrap .stores_block.wo_image .stores_text_wrapp .main_info { max-width: 200px; }
	#footer .mobile_copy{text-align:center;}
	.basket_normal .basket_wrapp  .wrapp_all_icons{width:auto;white-space: nowrap;}
	.basket_wrapp .icon_block, .basket_normal .basket_wrapp  .header-cart{float:none;display:inline-block;}
	.basket_wrapp .wraps_icon_block.basket{margin-right:0px;}
	.specials.tab_slider_wrapp ul.tabs_content li.tab .catalog_block >div.item, .rows_block .item_block .catalog_item_wrapp{width:100% !important;}

	/*personal*/
	.bx-sap .sale-acountpay-block, .bx-sap .container-fluid > .row > .col-xs-12{text-align:center;}
	body .personal_page #content .wrapper_inner .left_block .left_menu{text-align:center;}
}
@media all and (max-width: 520px) {
	.staff.list .item{float:none;width:100%;padding-left:0;padding-right:0;}
	.middle_phone .phones .phone_text a{font-size:14px;line-height:14px; margin: 10px 0}
	
	.specials.tab_slider_wrapp ul.tabs_content li.tab .catalog_block >div.item, .rows_block .item_block{width:100% !important;}
	.similar_products_wrapp .viewed_block .rows_block .item_block{width:auto !important;}
	.md-25.img{display:none;}
	.md-75.big{padding:0px;width:100%;}

	.info_item .top_info .article{text-align:left;}
	
	#footer .rows_block .item_block{text-align:center;}
	#footer .rows_block .soc_icons .item_block{line-height: 0px;width: auto !important;}
	#footer .rows_block .soc_icons .item_block a{display:inline-block;}

	/*basket*/
	.bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr{padding-left:20px;}
	.bx_ordercart.bx_blue .bx_ordercart_order_pay_center .catalog_back{float:none;width: auto;display: block;}
	.bx_ordercart.bx_blue .bx_ordercart_order_pay_center .oneclickbuy{float:none;margin:20px 0 0;width: auto;display: block;}
	.bx_ordercart.bx_blue .bx_ordercart_order_pay_center .checkout{float:none;margin:20px 0 0;width: auto;display: block;}
	.bx-touch .bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr>td{padding:0;}
	.bx-touch .bx_ordercart .bx_ordercart_photo_container{padding-top:0;}
	.bx-touch .bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr{margin-bottom:0;padding:20px;border-bottom:none;}
	.bx-touch .bx_ordercart .bx_ordercart_order_table_container table tbody tr td.item{padding-bottom:10px;padding-left:0;}
	.bx_ordercart .bx_ordercart_order_table_container .bx_ordercart_photo{height:70px;}
	.bx_ordercart .bx_ordercart_order_table_container table tbody td.itemphoto{float:none;margin:0 0 15px;width:70px;}
	.bx_ordercart .bx_ordercart_order_table_container tbody td.itemphoto>div{margin:0;width:70px;height:70px;line-height:70px;}
	.bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr>td:not(.itemphoto):not(.margin):not(.item){margin-top:0;}
	.bx-touch .bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr>td.custom span{margin-right:0;font-weight:normal;}
	.bx-touch .bx_ordercart .bx_ordercart_order_table_container tbody td.price{margin-top:11px!important;text-align:left;padding-top:0;}
	.bx-touch .bx_ordercart .bx_ordercart_order_table_container tbody td.price .current_price{margin-top:0;margin-bottom:0;font-size:18px;}
	.bx-touch .bx_ordercart .bx_sort_container{margin:0 0 20px;}
	.bx-touch .bx_ordercart .bx_sort_container a{float:left;width:100%;display:block;position:relative;margin:0 0 -1px 0;padding:17px 20px 16px;background:#fbfbfb!important;border:1px solid #f3f3f3;border-bottom:1px solid #f3f3f3;font-size:15px;font-weight:500;color:#777777;border-radius:0;line-height:20px;text-decoration:none;}
	.bx-touch .bx_ordercart .bx_sort_container a.current, .bx-touch .bx_ordercart .bx_sort_container a.current:hover{padding-top:20px;margin-top:-3px;text-shadow:none;color:#333;border:1px solid #f3f3f3;box-shadow:none;border-radius:0;cursor:default;background:#FFF!important;}
	.bx_ordercart .bx_ordercart_order_table_container table tbody td.item .bx_ordercart_itemtitle{padding-right:0;}
	.bx-touch .bx_ordercart .bx_ordercart_order_table_container tbody td.price .type_price, .bx-touch .bx_ordercart .bx_ordercart_order_table_container tbody td.price .type_price_value{display:block;}

	/* ORDER */
	#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-img-block{float:none;margin:0 0 15px;}
	#bx-soa-order .bx-soa-item-tr{padding-left:20px;}
}
@media all and (max-width: 500px){
	.stores_block_wrap .stores_block .stores_text_wrapp .main_info { max-width: 200px; }
	.wrapper_inner .basket_wrapp .wrapp_all_icons { /*width: 155px;*/ }
	.module_products_list .counter_wrapp .counter_block { display: none; }
	body .catalog_block .catalog_item_wrapp, .wrapper_inner #content .catalog_block .catalog_item_wrapp:nth-child(3n), .wrapper_inner #content .catalog_block .catalog_item_wrapp:nth-child(4n), body .right_block.catalog .catalog_block .catalog_item_wrapp { width: 100%; }
	.wrapper_inner .catalog_block .image_wrapper_block { margin: auto; }
	.catalog_block .item_info { margin: auto; width: 171px; }
	.info_item .top_info .article + .brand { padding-left: 0px; display: block; }
	.wrapper_inner .footer_bottom .submenu_top .menu_item { width: 100%; }
	.wrapper_inner .articles-list .item .right-data .preview-text { padding-right: 17px; }
	.basket_fly .wrapper_inner .basket_wrapp .wrapp_all_icons { width: 143px; overflow: hidden;}
	.wrapper_inner .basket_wrapp .header-compare-block { margin-left: 3px; }
	#header .wrapper_inner .middle-h-row .logo_wrapp .logo { padding-right: 0px; }
	.catalog_block .catalog_item { margin-right: 0px; }
	.item-name-cell .item-stock, .item-name-cell .rating { display: none; }
	.wrapper_inner .cost.prices .price { font-size: 16px; }
	.adaptive.more_text { display: block; }
	.wrapper_inner  .data-table.top .left_blocks { width: 100%; }
	.wrapper_inner  .data-table.top .right_blocks { display: none; }
	.subscribe-edit .more_text .more_text_small { padding: 0px 0px 10px; }
	td.note { padding: 0px 0px 0px 10px; }
	td.text_info { display: none; }
	.wrapper_inner .module-order-history .module-orders-list .drop-cell .not-payed .text, .wrapper_inner .module-order-history .module-orders-list .drop-cell .not-payed .pays { width: 100%; text-align: left; }
	.wrapper_inner .module-order-history.orderdetail .result-row a.button { margin-bottom: 10px; }
	.module-order-history.orderdetail .module-orders-list.result td.custom_t2 { padding-right: 0px; }
	.lk-page .iblock.label_block, .lk-page .iblock.text_block { width: 100%; padding-left: 0px; }
	.bx_compare .data_table_props tr td:first-of-type { width: 100px; min-width: 100px; font-size: 10px; }
	.bx_compare .frame.props .wraps { margin-left: -136px; }
	.prop_title_table { width: 101px; }
	.bx_compare .frame { margin-left: 100px; }
	.wrapp_scrollbar { margin-left: 10px; }

	.middle_phone .phone_wrap .icons{display:none;}
	.middle_phone .phone_wrap .phone_text{padding-left:20px;}
	.middle_phone .phones .phone_text a{font-size:14px;}
	.basket_fly  #header .middle-h-row .basket_wrapp .middle_phone{min-width:100%;}

	.rows_block .block_list .item_block{width:100%;}
	.module_products_list .adaptive_button_buy{display:block;}
	.module_products_list td.but-cell{display:none;}

	/*personal*/
	.personal_wrapper .orders_wrapper .sale-order-list-inner-row .sale-order-list-inner-row-body > div{width:100%;float:none;text-align:left;}
	.personal_wrapper .orders_wrapper .sale-order-list-button, .personal_wrapper .orders_wrapper .sale-order-detail-about-order-inner-container-repeat > a, .sale-order-detail-payment-options-methods-button-element, .sale-order-detail-payment-options-methods-button-element-new-window{float:none;}
	.personal_wrapper .orders_wrapper .sale-order-list-inner-row:last-of-type{}
}
@media all and (max-width: 470px){
	.phones .order_wrap_btn { display: none; }
	.top-h-row .phones { width: 48%; }
	.button.video::before { display: none; }
	.top_slider_wrapp .flexslider .text.center .banner_buttons { margin-top: 10px; }
	.top_slider_wrapp .flexslider .banner_buttons a { padding: 7px 10px; font-size: 8px; line-height: 9px; margin-bottom: 5px; }
	.wrapp_all_inputs.wrap_md .iblock, .filter_horizontal .wrapp_all_inputs.wrap_md .wrapp_change_inputs,.filter_horizontal .wrapp_all_inputs.wrap_md .wrapp_slider { width: 100%; }
	.wrapp_all_inputs.wrap_md .wrapp_slider,.filter_horizontal .wrapp_all_inputs.wrap_md .wrapp_slider { padding: 0px; }
	.filter_horizontal .wrapp_all_inputs.wrap_md .wrapp_slider{padding-top:15px;}
	.smartfilter .bx_ui_slider_track { margin-top: 33px; }
	.top-h-row .phones .order_wrap_btn { display: none; }
	.jobs_wrapp .item  .name .title .salary { display: block; }
	.jobs_wrapp .item  .name .salary_wrapp .salary { display: none; }
	.job.border_block .wrap_md .text { width: 100%; display: block; text-align: left; padding: 0px 0px 0px 0px; }
	.job.border_block .wrap_md .phone { width: 100%; display: block; text-align: left; padding: 20px 0px 0px 0px; }
	.popup.show .forgot { float: none; display: block; margin-left: 0px; }
	.wrapper_inner .module-form-block-wr.order_cancel .form-block { padding: 0px; }
	body .top_slider_wrapp .flexslider .slides li td.text .banner_title { margin: 10px 10px 0px; }
	body .top_slider_wrapp .flexslider .slides li td.text .banner_text { margin: 2px 2px 0px; font-size: 12px; line-height: 17px; max-height: 38px; }
	.cart_empty .text > *:not(.title):not(.button) {display: none;}
}
@media all and (max-width: 460px){
	.shops.list .item .title_metro, .shops.list .item .schedule_phone_email{width:100%;margin-top:0;}
	.shops.list .item .schedule_phone_email{text-align:left;}
	.shops.list .item .rubber > div{padding-top:0;}
	.button.faq_button{float:none;}
	.faq_desc{margin:23px 0 0 0;}
}
@media all and (max-width: 450px){
	ul.tabs li { padding: 5px 0 0 0; }
	.stores_block_wrap .stores_block .item-stock { float: none; margin: 20px 0px 0px; }
	.stores_block_wrap .stores_block.wo_image .item-stock { position: initial; margin: 10px 0px 0px; }
	.stores_block_wrap .stores_block .stores_text_wrapp { display: block; }
	.stores_block_wrap .stores_block.w_image:before { display: none; }
	.top_slider_wrapp .flexslider .text.center .banner_title + .banner_buttons { margin-top: 4px; }
	.right_info table.buttons_block .counter_block   { padding: 8px 0 0 0 !important; display: block;  text-align: center; }
	.right_info table.buttons_block .counter_block   select { font-size: 24px; padding: 4px 20px; height: 39px; margin:0 auto; }
	.right_info table.buttons_block .buy_buttons_wrapp { display: block;  text-align: center; }

	body .wrapper .top_slider_wrapp .flexslider .slides > li, body .wrapper .top_slider_wrapp .flexslider .slides > li td, body .wrapper .top_slider_wrapp .flexslider { height: 150px !important; }
	body .wrapper .top_slider_wrapp .flexslider .slides > li { background-size: 225% auto; }
	body .top-h-row  .phone span.phone_text a { font-size: 15px; }
	body .front_slider .preview_text { display: none; }
	body .filter_opener span { display: none; }
	.filter_opener i { margin: 0px; }
	.adaptive_filter { padding-right: 10px; }
	body .filter_opener { margin-right: 0px; }
	body .module_products_list .availability-row { display: none; }

	.popup .label_block_capcha  { width: 100%; }
	.popup .img_block_capcha { width: 100%; padding-left: 0px; }
	.popup .img_block_capcha img { float: none; }
	.module-gallery-list li { width: 50%; }
	.wrapper_inner .specials_slider_wrapp ul.tabs > li span, .wrapper_inner .tab_slider_wrapp ul.tabs > li span { font-size: 12px; }
	.wrapper_inner .search-page-wrap .form-control { float: none; width: 100%; margin: 0px 0px 20px 0px; }
	.wrapper_inner .basket_wrapp .module-cart table.bottom.middle .bottom_btn .back_btn > div { margin: 20px 0px 0px; }
	.wrapper_inner .basket_wrapp .module-cart table.bottom.middle .bottom_btn .back_btn > div:first-child { margin-top: 0px; }
	body .wrapper_inner .module-cart table tfoot .backet_back_wrapp .back_btn > div { display: block !important; }
	.basket_wrapp .module-cart table.bottom.middle td.row_titles {margin-bottom: 0 !important;}
	.wrapper_inner .basket_wrapp .module-cart table.bottom.middle .top_total_row td.row_values { margin-bottom: 19px;padding: 0;margin-top: 0; }
	.wrapper_inner .staff.list .item { width: 100%; padding: 0px; text-align: center; }
	.wrapper_inner .staff.list .item .image { margin: auto; }
	.wrapper_inner .bottom.middle td > .coupon { width: 100%; }
	.wrapper_inner .bottom.middle td > .coupon #COUPON, .wrapper_inner .bottom.middle td > .coupon .coupon-t { width: 100%; float: none; text-align: left; display: block; }
	.bottom.middle td > .coupon #COUPON{max-width: 100%;}
	.wrapper_inner .bottom.middle td > .coupon .coupon-t { margin: 0px 0px 10px 0px; }
	.wrapper_inner .bottom.middle td > .coupon .coupon_wrap { display: block; }
	.coupon .coupons_list { padding: 0px; }
	.iblock .icon_error_block:after { display: none; }

	.basket_wrapp .header-compare-block, .basket_wrapp .wraps_icon_block{margin: 0px 30px 0px 0px;}

	/*resize ie and firefox logo img*/
	/*.bx-firefox body #header .middle-h-row  tr > td, .bx-ie body #header .middle-h-row tr > td, .bx-firefox #header .middle-h-row .logo_wrapp .logo, .bx-ie #header .middle-h-row .logo_wrapp .logo { display: inline-block; vertical-align: top; margin-top: 0px; }
	.bx-firefox body #header .middle-h-row  tr > td.basket_wrapp, .bx-ie body #header .middle-h-row tr > td.basket_wrapp { margin-top: 9px; }
	.bx-firefox #header .middle-h-row td.logo_wrapp { padding-bottom: 0px; width: 57%; }
	.bx-ie #header .middle-h-row td.logo_wrapp { padding-bottom: 0px; width: 55%; }
	.bx-firefox #header .middle-h-row td.logo_wrapp .logo, .bx-ie #header .middle-h-row td.logo_wrapp .logo { min-height: 51px; }
	.bx-firefox body #header .middle-h-row tr > td.center_block, .bx-ie body #header .middle-h-row tr > td.center_block { padding: 0px }*/
	.module-cart table.bottom td {display: block; float: none !important; margin-bottom: 18px !important; overflow: hidden; padding: 0 !important; text-align: left !important; width: 100% !important; }
	.module-cart table.bottom td .description{display:none;}

	.bx_item_list_you_looked_horizontal.col3 .bx_catalog_item{width:97.3333% !important;}
	.bx_item_list_you_looked_horizontal.col3 .bx_catalog_item:nth-child(2n+1){clear:none !important;}

	/* ORDER */
	#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company-graf-container{float:none;}
	#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-company-desc{margin-top:15px;padding-left:0;}
	#bx-soa-order .bx-soa-coupon-label{width:auto;display:block;margin-top:0;margin-bottom:4px;}
	#bx-soa-order .bx-soa-coupon label{width:auto;}
	#bx-soa-order .bx-soa-coupon-block{display:block;}
	#bx-soa-order .bx-soa-coupon-input{width:auto;}
	#bx-soa-order .bx-soa-section .bx-soa-section-title{padding-right:0;}
	#bx-soa-order .bx-soa-section .bx-soa-section-title-container .text-right{padding:0;text-align:left;}
	#bx-soa-order .bx-soa-section .bx-soa-section-title-container .col-sm-9{width:100%;float:none;text-align: left;}
	#bx-soa-order .bx-soa-section .bx-soa-section-title-container .col-sm-3{width:100%;float:none;}
	#bx-soa-order .bx-soa-editstep{margin-top:5px;}
	#bx-soa-order #bx-soa-basket .bx-soa-item-table .bx-soa-item-tr .bx-soa-item-td.bx-soa-item-properties {width: 100%!important;}

	/*personal*/
	.sale-acountpay-block .sale-acountpay-pp div .sale-acountpay-pp-company >div{display: block;margin: 0px auto 10px;padding: 0px;text-align: center;}
	.personal_wrapper .row > .col-sm-12{width:100%;}
}
@media all and (max-width: 400px){
	.wrapper_inner .stores_block_wrap .stores_block .stores_text_wrapp { font-size: 11px; }
	.wrapper_inner  .stores_block_wrap .stores_block .item-stock { padding: 0px 5px 0px 20px; }
	.wrapper_inner .info_item .middle_info .buy_block .counter_wrapp { white-space: nowrap; }
	.wrapper_inner  .cost.prices .price, .module_products_list td.price-cell .cost.prices .price { font-size: 14px; }
	.wrapper_inner .cost .price.discount strike { font-size: 12px; }

	.footer_bottom_inner .rows_block .menus .submenu, .footer_bottom_inner .rows_block .menus .rows_block{display:none;}
	.footer_bottom_inner .rows_block .menus .submenu_top.rows_block{display:block;}
	.footer_bottom_inner .menus .rows_block .col-3{width:100%;text-align:center;}

	.wrapper_inner .phones .order_wrap_btn{display:none;}
	.basket_fly  #header .middle-h-row .basket_wrapp .middle_phone{top:initial;}

	.top-h-row .h-user-block a.icon{padding: 0px 7px 0px 20px;}
	.top-h-row .h-user-block{margin-top:8px;}
	.top-h-row .phones{width:auto;}

	.top-h-row .phone_block .phone_wrap .icons{display:none;}
	.top-h-row .phone_block .phone_wrap .phone_text{padding-left:0px;}
	.top-h-row .bg_user{display:none;}
	body #header .middle-h-row td.logo_wrapp{width:47%;}
	.wrapper_inner .basket_wrapp .header-compare-block{margin-right:20px;}

	.catalog_section_list .section_item{padding:22px 22px 17px;height: auto !Important;}
	.catalog_section_list .section_item td.section_info .desc{display:none;}
	.catalog_section_list .section_item td.section_info{height:auto !important;vertical-align:middle;}
	.catalog_section_list .section_item li.name a span{font-size:15px;}
	.catalog_section_list .section_item .image{width:60px;}

	/*basket fly*/
	.basket_fly .header_wrap{position:relative;}
	.basket_fly  #header .middle-h-row{position:static;}
	.basket_fly .header_wrap #header > .wrapper_inner{padding-top:60px;}
	.basket_page.basket_fly .header_wrap #header > .wrapper_inner, .order_page.basket_fly .header_wrap #header > .wrapper_inner{padding-top:16px;}
	body #header .basket_fly{top: 0px;height: 46px;width: 100%;left: 0px;right: auto;position: absolute;box-shadow: none;min-height:inherit;}
	#header .basket_fly .opener{width: 100%;left: 0px;border-radius: 0px;position:static;}
	#header .basket_wrapp .basket_sort, .basket_fly #header .middle-h-row #basket_form{display:none;}
	#header .basket_fly .opener >div{width:25%;float:right;height: 46px;}
	.basket_fly .basket_wrapp .basket_fly .wraps_icon_block{top:32%;margin:0px;}
	.basket_wrapp .wraps_icon_block.compare:before{top: -4px;}
	.basket_wrapp .wraps_icon_block.delay:before{top:-1px;}
	.basket_wrapp .wraps_icon_block.basket:before{top:-1px;}
	.basket_wrapp .wraps_icon_block.user_reg:before{top:-3px;}
	#header .basket_fly .opener >div:after{width:1px;height:100%;}
	.basket_wrapp .wraps_icon_block .count{top:-9px;}
	.basket_wrapp .wraps_icon_block.user_auth.w_img{top: 7px !important;}
	.basket_wrapp .wraps_icon_block.user_auth.no_img{top: 18px !important;}

	/*basket*/
	.bx_order_list .bx_order_list_table_order>tbody>tr>td:not(.img):not(.name){width:100%;float:none;}
	.bx_ordercart .bx_ordercart_coupon span{float:none;width:auto;margin:0 0 6px;}
	.bx_ordercart.bx_blue .bx_bt_button{top:21px;}
	.bx_ordercart .bx_ordercart_order_table_container table tbody td.item .bx_ordercart_itemtitle{padding-right:0;}
	.bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr>td:not(.item):not(.itemphoto):not(.margin){margin-top:10px!important;margin-right:0;width:100%;}
	.bx_ordercart .bx_ordercart_order_table_container>table>tbody>tr>td.control{position:absolute;top:0;right:0;}
	.bx_ordercart .bx_ordercart_coupon #coupon{float:none;}
	.bx-touch .bx_ordercart .bx_sort_container{margin:0 0 20px;}
	.bx-touch .bx_ordercart .bx_ordercart_order_table_container table tbody tr td.item{padding-bottom:0;}
	.bx_ordercart .bx_ordercart_coupon .input{padding:0px;}
	.bx_ordercart .bx_ordercart_coupon:not(:first-of-type){margin-left:0px;}
	.bx_ordercart .bx_ordercart_order_sum{max-width:295px;}

	/*ORDER*/
	#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company-graf-container{display:block;margin: 0px 0px 10px;height: auto;}
	#bx-soa-order .bx-soa-pp-item-container .bx-soa-pp-company-smalltitle{display:block;padding: 0px;}
	#bx-soa-pickup .bx-soa-section-content .bx-soa-pickup-preview-img{float:none;float: none;display: block;margin: 0px 0px 10px;}
	.bx-soa-pp-company-graf-container .bx-soa-pp-delivery-cost{position:static;}

	/*personal*/
	.personal_wrapper .orders_wrapper .sale-order-payment-change-pp-list .sale-order-payment-change-pp-company .sale-order-payment-change-pp-company-smalltitle{font-size:13px;}
}
@media all and (max-width: 380px){
	/*.top-h-row .phone_wrap .icons, */.top-h-row .h-user-block .have-user a.reg:before/*, .footer_top .wrap_md .phones .phone_wrap .icons*/ { display: none; }
	.wrapper_inner .tizers_block .item:last-child .title { width: 40%; }
	.wrapper_inner .articles-list .item .right-data { margin: 0px; }
	.wrapper_inner .articles-list .item .left-data { float: none; margin: 0px auto 20px; }
	.wrapper_inner .sale_block .text, .wrapper_inner .sale_block .value, .bx_ordercart  table.colored thead td { font-size: 10px; }
	.wrapper_inner #order_form_content .module-cart table td.thumb-cell { padding-left: 5px; }
	.basket_wrapp .module-cart .cost.prices .sale_block { display: none; }
	.basket_wrapp .module-cart .cost-cell .cost.prices { white-space: normal; }

	/* tizers block */
	.tizers_block  { text-align: center; }
	.wrapper_inner .tizers_block .item { display: inline-block; width: 50%; margin: 0 0 20px 0;vertical-align: top;}
	.wrapper_inner .tizers_block .item:nth-child(n+4) { width: 50%;vertical-align: top; }
	.wrapper_inner .tizers_block .item:last-child .title { width: auto; }
	.tizers_block .item .img, .tizers_block .item .title { display: block; text-align: center; }
	.tizers_block .item .img {  margin: 0; min-height: 62px;    vertical-align: middle; text-align: center;    padding: 0;    width: auto;    max-width: none; }
	.tizers_block .item .title { width: auto; }

	/* stat promo float banners */
	.wrapper_inner .start_promo .wrap_tizer { bottom: 8px; }
	.wrapper_inner .start_promo .wrap_tizer .wrapper_inner_tizer{padding: 0 20px 0 8px !important;}
	.wrapper_inner .wrap_tizer .wr_block .title .inner_text { font-size: 13px;font-weight:600; }
	.wrapper_inner .wrap_tizer .wr_block.price .inner_text { font-size: 12px; }
	.wrap_tizer .wrap_outer { padding: 0px 4px 5px; }
	.wrapper_inner .wrap_tizer .wrap_outer .outer_text { left: 6px;  padding: 0px 4px 5px 0px; }
	.wrapper_inner .wrap_tizer .wrap_outer .inner_text { left: -3px; }

	.wrapper_inner .wrap_tizer .wr_block.price .wrap_outer, .wrapper_inner .wrap_tizer .wr_block.price .wrap_outer .inner_text { padding: 1px 0px 5px; }
	.wrapper_inner .wrap_tizer .wr_block.price .wrap_outer .outer_text { padding-top: 1px; }

	.bx-firefox #header .middle-h-row td.logo_wrapp .logo, .bx-ie #header .middle-h-row td.logo_wrapp .logo { display: inline; }
	.bx-firefox #header .middle-h-row td.logo_wrapp { width: 53%; }
	.bx-ie #header .middle-h-row td.logo_wrapp { width: 48%; }
	.display_list .counter_wrapp .counter_block{margin-bottom:5px;}
	.display_list .counter_wrapp {padding-right:5px;}

	.tabs-body { padding-top: 30px; }
	.catalog_section_list .section_item .desc .desc_wrapp{display:none;}
	.catalog_section_list .section_item tr td{display:block;}
	.catalog_section_list .section_item .image{width:100%;padding: 0px;}

	body .display_list .list_item td.information_wrapp .counter_wrapp{white-space:normal;}
	.catalog_detail .element_detail_text .price_txt{display:none;}
	.catalog_detail .element_detail_text{margin: 0px 0px 10px;}

}
@media all and (max-width: 360px){
	.wrapper_inner .bx_sort_container .wrap_remove_button { top: 110px; }
	.catalog_detail .w_icons.button.to-cart{padding-left:20px;}
	.catalog_detail .w_icons.button.to-cart:before{display:none;}
	.catalog_detail .item_main_info .right_info .info_item{padding-right:12px;}
	.container > h1{padding-right:0px;}
	
	/*personal*/
	.personal_wrapper .sale-order-detail-order-item-td .sale-order-detail-order-item-block .sale-order-detail-order-item-content{padding-left:10px;padding-right:10px;}
}
@media all and (max-width: 320px){
	.shops.list .item .image{display:none;}
	.shops.list .item .rubber{margin:0;}
	body .display_list .list_item td.information_wrapp { padding-right: 0px; }

	.module_products_list .adaptive_button { display: block; }
	body .module_products_list td.but-cell { display: none; }
	.basket_fly #header .middle-h-row .basket_wrapp { padding-top: 0px; }
	#header .wrapper_inner .middle-h-row .logo_wrapp .logo { min-height: 24px; line-height: 24px; display: table-cell; }
	#header .middle-h-row .logo_wrapp .logo a { display: block; }
	.basket_wrapp .header-compare-block, .basket_wrapp .wraps_icon_block {margin: 0px 25px 0px 0px;}
	.wrapper_inner  .cost.prices .price, .module_products_list td.price-cell .cost.prices .price{/*font-size:13px;*/}
}

@media all and (min-width: 1180px){
	.specials_slider_wrapp ul.tabs_content, .tab_slider_wrapp ul.tabs_content { margin: 1px -8px 2px -5px; padding: 0 8px 0px 5px; }
	.specials_slider_wrapp ul.tabs_content li.tab, .tab_slider_wrapp ul.tabs_content li.tab { margin: 0 -5px; padding: 0 5px; }

	/* viewed product slider */
	.common_product .content_inner { margin: -13px -8px 0 -5px; padding: 13px 8px 0 5px; }
	.common_product .flex-viewport { margin: 0px -13px; padding: 0 13px; }
	.common_product .flex-viewport ul.slides { margin: 0px -13px; padding: 0 13px; }

	/* news slider front page */
	.news_slider_wrapp  { margin: -13px -13px 0; padding: 13px 13px 0; }
	.news_slider_wrapp .flex-viewport{ margin: -13px -13px 0; padding: 13px 13px 0; }
	.news_slider_wrapp .news_slider li:hover { box-shadow: 0px 0px 20px rgba(0,0,0,0.10); -moz-box-shadow: 0px 0px 20px rgba(0,0,0,0.10); -o-box-shadow: 0px 0px 20px rgba(0,0,0,0.10);}
}
@media all and (max-height: 768px){
	#header .basket_fly {top: 148px;}
}


/*order*/
@media only screen and (max-width: 1174px){
	#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company-graf-container {
	    float: none;
	}
	#bx-soa-order .bx-soa-pp-desc-container .bx-soa-pp-company .bx-soa-pp-company-desc {
	    margin-top: 15px;
	    padding-left: 0;
	    margin-bottom: 10px;
	}
}109  1060|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/images/phone_mail.png|6251fe22PNG

   IHDR         H-   tEXtSoftware Adobe ImageReadyqe<  "iTXtXML:com.adobe.xmp     <?xpacket begin="" id="W5M0MpCehiHzreSzNTczkc9d"?> <x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.3-c011 66.145661, 2012/02/06-14:56:27        "> <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"> <rdf:Description rdf:about="" xmlns:xmp="http://ns.adobe.com/xap/1.0/" xmlns:xmpMM="http://ns.adobe.com/xap/1.0/mm/" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmp:CreatorTool="Adobe Photoshop CS6 (Windows)" xmpMM:InstanceID="xmp.iid:48A15FABA64811E6A6709C0513E28F0D" xmpMM:DocumentID="xmp.did:48A15FACA64811E6A6709C0513E28F0D"> <xmpMM:DerivedFrom stRef:instanceID="xmp.iid:48A15FA9A64811E6A6709C0513E28F0D" stRef:documentID="xmp.did:48A15FAAA64811E6A6709C0513E28F0D"/> </rdf:Description> </rdf:RDF> </x:xmpmeta> <?xpacket end="r"?>-Z   IDATxb? 1 Fd1D
BM]b42]Tgld jn$[]VB
$mLF#iF9.4 4a3-:(c CBdL$  '	@:C    IENDB`156  6279|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/aspro/com.banners.optimus/top_slider_banners/template.php|bcff0e73<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();?>
<?$this->setFrameMode(true);?>
<?if($arResult["ITEMS"]):?>
	<div class="top_slider_wrapp">
		<?$APPLICATION->AddHeadScript(SITE_TEMPLATE_PATH.'/js/jquery.flexslider-min.js',true)?> 
		<div class="flexslider">
			<ul class="slides">
				<?foreach($arResult["ITEMS"] as $arItem):?>
					<?
					$this->AddEditAction($arItem['ID'], $arItem['EDIT_LINK'], CIBlock::GetArrayByID($arItem["IBLOCK_ID"], "ELEMENT_EDIT"));
					$this->AddDeleteAction($arItem['ID'], $arItem['DELETE_LINK'], CIBlock::GetArrayByID($arItem["IBLOCK_ID"], "ELEMENT_DELETE"), array("CONFIRM" => GetMessage('CT_BNL_ELEMENT_DELETE_CONFIRM')));
					$background = is_array($arItem["DETAIL_PICTURE"]) ? $arItem["DETAIL_PICTURE"]["SRC"] : $this->GetFolder()."/images/background.jpg";
					$target = $arItem["PROPERTIES"]["TARGETS"]["VALUE_XML_ID"];
					?>
					<li class="box<?=($arItem["PROPERTIES"]["TEXTCOLOR"]["VALUE_XML_ID"] ? " ".$arItem["PROPERTIES"]["TEXTCOLOR"]["VALUE_XML_ID"] : "");?><?=($arItem["PROPERTIES"]["TEXT_POSITION"]["VALUE_XML_ID"] ? " ".$arItem["PROPERTIES"]["TEXT_POSITION"]["VALUE_XML_ID"] : " left");?>" id="<?=$this->GetEditAreaId($arItem['ID']);?>" style="background-image: url('<?=$background?>') !important;">
						<?if(!$arItem["PREVIEW_PICTURE"] && !$arItem["PREVIEW_TEXT"] && $arItem["PROPERTIES"]["URL_STRING"]["VALUE"]):?>
							<a class="target" href="<?=$arItem["PROPERTIES"]["URL_STRING"]["VALUE"]?>" <?=(strlen($target) ? 'target="'.$target.'"' : '')?>></a>
						<?endif;?>
							<div class="wrapper_inner">	
								<? 
								$position = "center left";
								if($arItem["PROPERTIES"]["TEXT_POSITION"]["VALUE_XML_ID"]){
									if($arItem["PROPERTIES"]["TEXT_POSITION"]["VALUE_XML_ID"] == "left"){
										$position = "center right";
									}elseif($arItem["PROPERTIES"]["TEXT_POSITION"]["VALUE_XML_ID"] == "right"){
										$position = "center left";
									}elseif($arItem["PROPERTIES"]["TEXT_POSITION"]["VALUE_XML_ID"] == "center"){
										$position = "center center";
									}elseif($arItem["PROPERTIES"]["TEXT_POSITION"]["VALUE_XML_ID"] == "image"){
										$position = "center";
									}
								}
								?>
								<table class="table-no-border" <?if($arItem["PREVIEW_PICTURE"]):?>style="background: url(<?=$arItem["PREVIEW_PICTURE"]["SRC"]?>) <?=$position;?> no-repeat"<?endif;?>>
									<tbody><tr>
										<?if($arItem["PROPERTIES"]["TEXT_POSITION"]["VALUE_XML_ID"] != "image"):?>
											<?ob_start();?>
												<td class="text <?=$arItem["PROPERTIES"]["TEXT_POSITION"]["VALUE_XML_ID"];?>">							
													<?if($arItem["NAME"]):?>
														<div class="banner_title">
															<span>
																<?if($arItem["PROPERTIES"]["URL_STRING"]["VALUE"]):?>
																	<a href="<?=$arItem["PROPERTIES"]["URL_STRING"]["VALUE"]?>" <?=(strlen($target) ? 'target="'.$target.'"' : '')?>>
																<?endif;?>
																<?=strip_tags($arItem["~NAME"], "<br><br/>");?>
																<?if($arItem["PROPERTIES"]["URL_STRING"]["VALUE"]):?>
																	</a>
																<?endif;?>
															</span>
														</div>
													<?endif;?>
													<?if($arItem["PREVIEW_TEXT"]):?>
														<div class="banner_text"><?=$arItem["PREVIEW_TEXT"];?></div>
													<?endif;?>
													<?if((!empty($arItem["PROPERTIES"]["BUTTON2TEXT"]["VALUE"]) && !empty($arItem["PROPERTIES"]["BUTTON2LINK"]["VALUE"])) || (!empty($arItem["PROPERTIES"]["BUTTON1TEXT"]["VALUE"]) && !empty($arItem["PROPERTIES"]["BUTTON1LINK"]["VALUE"]))):?>
														<div class="banner_buttons">
															<?if(trim($arItem["PROPERTIES"]["BUTTON1TEXT"]["VALUE"]) && trim($arItem["PROPERTIES"]["BUTTON1LINK"]["VALUE"])):?>
																<a href="<?=$arItem["PROPERTIES"]["BUTTON1LINK"]["VALUE"]?>" class="<?=!empty($arItem["PROPERTIES"]["BUTTON1CLASS"]["VALUE"]) ? $arItem["PROPERTIES"]["BUTTON1CLASS"]["VALUE"] : "button wide"?>" <?=(strlen($target) ? 'target="'.$target.'"' : '')?>>
																	<?=$arItem["PROPERTIES"]["BUTTON1TEXT"]["VALUE"]?>
																</a>
															<?endif;?>
															<?if(!empty($arItem["PROPERTIES"]["BUTTON2TEXT"]["VALUE"]) && !empty($arItem["PROPERTIES"]["BUTTON2LINK"]["VALUE"])):?>
																<a href="<?=$arItem["PROPERTIES"]["BUTTON2LINK"]["VALUE"]?>" class="<?=!empty( $arItem["PROPERTIES"]["BUTTON2CLASS"]["VALUE"]) ? $arItem["PROPERTIES"]["BUTTON2CLASS"]["VALUE"] : "button wide grey"?>" <?=(strlen($target) ? 'target="'.$target.'"' : '')?>>
																	<?=$arItem["PROPERTIES"]["BUTTON2TEXT"]["VALUE"]?>
																</a>
															<?endif;?>
														</div>
													<?endif;?>							
												</td>
											<?$text = ob_get_clean();?>
										<?endif;?>
										<?ob_start();?>
											<td class="img" >
												<?if($arItem["PREVIEW_PICTURE"]):?>
													<?if(!empty($arItem["PROPERTIES"]["URL_STRING"]["VALUE"])):?>
														<a href="<?=$arItem["PROPERTIES"]["URL_STRING"]["VALUE"]?>" <?=(strlen($target) ? 'target="'.$target.'"' : '')?>>
													<?endif;?>
													<?if(!empty($arItem["PROPERTIES"]["URL_STRING"]["VALUE"])):?>
														</a>
													<?endif;?>
												<?endif;?>									
											</td>
										<?$image = ob_get_clean();?>
										<? 
										if($arItem["PROPERTIES"]["TEXT_POSITION"]["VALUE_XML_ID"]){
											if($arItem["PROPERTIES"]["TEXT_POSITION"]["VALUE_XML_ID"] == "left"){
												echo $text.$image;
											}
											elseif($arItem["PROPERTIES"]["TEXT_POSITION"]["VALUE_XML_ID"] == "right"){
												echo $image.$text;
											}
											elseif($arItem["PROPERTIES"]["TEXT_POSITION"]["VALUE_XML_ID"] == "center"){
												echo $text;
											}
											elseif($arItem["PROPERTIES"]["TEXT_POSITION"]["VALUE_XML_ID"] == "image"){
												echo $image;
											}
										}
										else{
											echo $text.$image;
										}
										?>
									</tr></tbody>
								</table>
							</div>
						<?/*if(!$arItem["PREVIEW_PICTURE"] && !$arItem["PREVIEW_TEXT"] && $arItem["PROPERTIES"]["URL_STRING"]["VALUE"]):?>
							</a>
						<?endif;*/?>
					</li>
				<?endforeach;?>
			</ul>
		</div>
	</div>
<?endif;?>141  61569|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/catalog.element/main/script.min.js|89669e8e$(document).on("click",".item-stock .store_view",function(){scroll_block($(".tabs_section"))}),$(document).ready(function(){function t(){$(".tizers_block_detail .item_block").length&&$(".tizers_block_detail .item_block").each(function(){var t=$(this).find(".text"),i=$(this).find(".image"),s=(t.height(),26);i.length&&t.height()<i.height()&&((s=Math.floor((i.height()-t.height())/2))<0&&(s=0),t.css("padding-top",s+"px"))})}$(".opener").click(function(){$(this).find(".opener_icon").toggleClass("opened");var t=$(this).parents("tr").toggleClass("nb").next(".offer_stores").find(".stores_block_wrap");t.slideToggle(200)}),$(".tabs_section .tabs-head li").live("click",function(){$(this).is(".current")||($(".tabs_section .tabs-head li").removeClass("current"),$(this).addClass("current"),$(".tabs_section ul.tabs_content li").removeClass("current"),"product_reviews_tab"==$(this).attr("id")?($(".shadow.common").hide(),$("#reviews_content").show()):($(".shadow.common").show(),$("#reviews_content").hide(),$(".tabs_section ul.tabs_content > li:eq("+$(this).index()+")").addClass("current")))}),$(".hint .icon").click(function(t){var i=$(this).parents(".hint");i.click(function(t){t.stopPropagation()}),i.is(".active")?i.removeClass("active").find(".tooltip").slideUp(200):(i.addClass("active").find(".tooltip").slideDown(200),i.find(".tooltip_close").click(function(t){t.stopPropagation(),i.removeClass("active").find(".tooltip").slideUp(100)}),$(document).click(function(){i.removeClass("active").find(".tooltip").slideUp(100)}))}),t(),BX.addCustomEvent("onWindowResize",function(i){try{ignoreResize.push(!0),t()}catch(s){}finally{ignoreResize.pop()}})}),$(".set_block").ready(function(){$(".set_block ").equalize({children:'.item:not(".r") .cost',reset:!0}),$(".set_block").equalize({children:".item .item-title",reset:!0}),$(".set_block").equalize({children:".item .item_info",reset:!1})}),function(t){if(!t.JCCatalogElement){var i=function(t){i.superclass.constructor.apply(this,arguments),this.nameNode=BX.create("span",{props:{className:"bx_medium bx_bt_button",id:this.id},style:"object"==typeof t.style?t.style:{},text:t.text}),this.buttonNode=BX.create("span",{attrs:{className:t.ownerClass},children:[this.nameNode],events:this.contextEvents}),BX.browser.IsIE()&&this.buttonNode.setAttribute("hideFocus","hidefocus")};BX.extend(i,BX.PopupWindowButton),t.JCCatalogElement=function(t){if(this.skuVisualParams={SELECT:{TAG_BIND:"select",TAG:"option",ACTIVE_CLASS:"active",HIDE_CLASS:"hidden",EVENT:"change"},LI:{TAG_BIND:"li",TAG:"li",ACTIVE_CLASS:"active",HIDE_CLASS:"missing",EVENT:"click"}},this.productType=0,this.config={useCatalog:!0,showQuantity:!0,showPrice:!0,showAbsent:!0,showOldPrice:!1,showPercent:!1,showSkuProps:!1,showOfferGroup:!1,useCompare:!1,mainPictureMode:"IMG",showBasisPrice:!1,basketAction:["BUY"],showClosePopup:!1},this.basketLinkURL="",this.checkQuantity=!1,this.maxQuantity=0,this.SliderImages=0,this.defaultCount=1,this.stepQuantity=1,this.isDblQuantity=!1,this.canBuy=!0,this.currentBasisPrice={},this.canSubscription=!0,this.currentIsSet=!1,this.updateViewedCount=!1,this.precision=6,this.precisionFactor=Math.pow(10,this.precision),this.listID={main:["PICT_ID","BIG_SLIDER_ID","BIG_IMG_CONT_ID"],stickers:["STICKER_ID"],productSlider:["SLIDER_CONT","SLIDER_LIST","SLIDER_LEFT","SLIDER_RIGHT"],offerSlider:["SLIDER_CONT_OF_ID","SLIDER_LIST_OF_ID","SLIDER_LEFT_OF_ID","SLIDER_RIGHT_OF_ID"],offerSliderMobile:["SLIDER_CONT_OFM_ID","SLIDER_LIST_OFM_ID","SLIDER_LEFT_OFM_ID","SLIDER_RIGHT_OFM_ID"],offers:["TREE_ID","TREE_ITEM_ID","DISPLAY_PROP_DIV","DISPLAY_PROP_ARTICLE_DIV","OFFER_GROUP"],quantity:["QUANTITY_ID","QUANTITY_UP_ID","QUANTITY_DOWN_ID","QUANTITY_MEASURE","QUANTITY_LIMIT","BASIS_PRICE"],price:["PRICE_ID"],oldPrice:["OLD_PRICE_ID","DISCOUNT_VALUE_ID"],discountPerc:["DISCOUNT_PERC_ID"],basket:["BASKET_PROP_DIV","BUY_ID","BASKET_LINK","ADD_BASKET_ID","BASKET_ACTIONS_ID","NOT_AVAILABLE_MESS","SUBSCRIBE_ID","SUBSCRIBED_ID"],magnifier:["MAGNIFIER_ID","MAGNIFIER_AREA_ID"],compare:["COMPARE_LINK_ID"]},this.visualPostfix={PICT_ID:"_pict",BIG_SLIDER_ID:"_big_slider",BIG_IMG_CONT_ID:"_bigimg_cont",STICKER_ID:"_sticker",SLIDER_CONT:"_slider_cont",SLIDER_LIST:"_slider_list",SLIDER_LEFT:"_slider_left",SLIDER_RIGHT:"_slider_right",SLIDER_CONT_OF_ID:"_slider_cont_",SLIDER_LIST_OF_ID:"_slider_list_",SLIDER_LEFT_OF_ID:"_slider_left_",SLIDER_RIGHT_OF_ID:"_slider_right_",SLIDER_CONT_OFM_ID:"_sliderm_cont_",SLIDER_LIST_OFM_ID:"_sliderm_list_",SLIDER_LEFT_OFM_ID:"_sliderm_left_",SLIDER_RIGHT_OFM_ID:"_sliderm_right_",TREE_ID:"_skudiv",TREE_ITEM_ID:"_prop_",DISPLAY_PROP_DIV:"_sku_prop",DISPLAY_PROP_ARTICLE_DIV:"_sku_article_prop",QUANTITY_ID:"_quantity",QUANTITY_UP_ID:"_quant_up",QUANTITY_DOWN_ID:"_quant_down",QUANTITY_MEASURE:"_quant_measure",QUANTITY_LIMIT:"_quant_limit",BASIS_PRICE:"_basis_price",PRICE_ID:"_price",OLD_PRICE_ID:"_old_price",DISCOUNT_VALUE_ID:"_price_discount",DISCOUNT_PERC_ID:"_dsc_pict",BASKET_PROP_DIV:"_basket_prop",BUY_ID:"_buy_link",BASKET_LINK:"_basket_link",ADD_BASKET_ID:"_add_basket_link",BASKET_ACTIONS_ID:"_basket_actions",NOT_AVAILABLE_MESS:"_not_avail",SUBSCRIBE_ID:"_subscribe_div",SUBSCRIBED_ID:"_subscribed_div",MAGNIFIER_ID:"_magnifier",MAGNIFIER_AREA_ID:"_magnifier_area",OFFER_GROUP:"_set_group_",COMPARE_LINK_ID:"_compare_link"},this.visual={},this.basketMode="",this.product={checkQuantity:!1,maxQuantity:0,stepQuantity:1,startQuantity:1,isDblQuantity:!1,canBuy:!0,canSubscription:!0,name:"",pict:{},id:0,addUrl:"",buyUrl:"",slider:{},sliderCount:0,useSlider:!1,sliderPict:[]},this.mess={},this.basketData={useProps:!1,emptyProps:!1,quantity:"quantity",props:"prop",basketUrl:"",sku_props:"",sku_props_var:"basket_props",add_url:"",buy_url:""},this.compareData={compareUrl:"",comparePath:""},this.defaultPict={preview:null,detail:null},this.offers=[],this.offerNum=0,this.treeProps=[],this.obTreeRows=[],this.showCount=[],this.showStart=[],this.selectedValues={},this.sliders=[],this.obProduct=null,this.obQuantity=null,this.obQuantityUp=null,this.obQuantityDown=null,this.obBasisPrice=null,this.obPict=null,this.obPictAligner=null,this.obPrice={price:null,full:null,discount:null,percent:null},this.obTree=null,this.obBuyBtn=null,this.obBasketBtn=null,this.obAddToBasketBtn=null,this.obBasketActions=null,this.obNotAvail=null,this.obSkuProps=null,this.obSlider=null,this.obMeasure=null,this.obQuantityLimit={all:null,value:null},this.obCompare=null,this.viewedCounter={path:"/bitrix/components/bitrix/catalog.element/ajax.php",params:{AJAX:"Y",SITE_ID:"",PRODUCT_ID:0,PARENT_ID:0}},this.currentImg={src:"",width:0,height:0,screenWidth:0,screenHeight:0,screenOffsetX:0,screenOffsetY:0,scale:1},this.currentBigImg={src:""},this.obPopupWin=null,this.basketUrl="",this.basketParams={},this.obPopupPict=null,this.magnify={obMagnifier:null,obMagnifyPict:null,obMagnifyArea:null,obBigImg:null,obBigSlider:null,magnifyShow:!1,areaParams:{width:100,height:130,left:0,top:0,scaleFactor:1,globalLeft:0,globalTop:0,globalRight:0,globalBottom:0},magnifierParams:{top:0,left:0,width:0,height:0,ratioX:10,ratioY:13,defaultScale:1},magnifyPictParams:{marginTop:0,marginLeft:0,width:0,height:0}},this.treeRowShowSize=5,this.treeEnableArrow={display:"",cursor:"pointer",opacity:1},this.treeDisableArrow={display:"",cursor:"default",opacity:.2},this.sliderRowShowSize=5,this.sliderEnableArrow={display:"",cursor:"pointer",opacity:1},this.sliderDisableArrow={display:"",cursor:"default",opacity:.2},this.errorCode=0,"object"==typeof t){switch(this.params=t,this.initConfig(),this.params.MESS&&(this.mess=this.params.MESS),this.productType){case 0:case 1:case 2:this.initProductData();break;case 3:this.initOffersData();break;default:this.errorCode=-1}this.initBasketData(),this.initCompareData()}0===this.errorCode&&BX.ready(BX.delegate(this.Init,this)),this.params={}},t.JCCatalogElement.prototype.Init=function(){var t=0,i=0,s="",e=null,a=null;if(this.obProduct=BX(this.visual.ID),this.obProduct||(this.errorCode=-1),this.obPict=BX(this.visual.PICT_ID),this.obPict?this.obPictAligner=this.obPict.parentNode:this.errorCode=-2,this.config.showPrice&&(this.obPrice.price=BX(this.visual.PRICE_ID),!this.obPrice.price&&this.config.useCatalog?this.errorCode=-16:(this.config.showOldPrice&&(this.obPrice.full=BX(this.visual.OLD_PRICE_ID),this.obPrice.discount=BX(this.visual.DISCOUNT_VALUE_ID)),this.config.showPercent&&(this.obPrice.percent=BX(this.visual.DISCOUNT_PERC_ID))),this.obBasketActions=BX(this.visual.BASKET_ACTIONS_ID),this.obBasketActions&&(BX.util.in_array("BUY",this.config.basketAction)&&(this.obBuyBtn=BX(this.visual.BUY_ID)),BX.util.in_array("ADD",this.config.basketAction)&&(this.obAddToBasketBtn=BX(this.visual.BUY_ID)),this.visual.BASKET_LINK&&(this.obBasketBtn=BX(this.visual.BASKET_LINK))),this.obNotAvail=BX(this.visual.NOT_AVAILABLE_MESS)),this.config.showQuantity&&(this.obQuantity=BX(this.visual.QUANTITY_ID),this.visual.QUANTITY_UP_ID&&(this.obQuantityUp=BX(this.visual.QUANTITY_UP_ID)),this.visual.QUANTITY_DOWN_ID&&(this.obQuantityDown=BX(this.visual.QUANTITY_DOWN_ID)),this.config.showBasisPrice&&(this.obBasisPrice=BX(this.visual.BASIS_PRICE))),3===this.productType){if(this.visual.TREE_ID)for(this.obTree=BX(this.visual.TREE_ID),this.obTree||(this.errorCode=-256),s=this.visual.TREE_ITEM_ID,t=0;t<this.treeProps.length;t++)if(this.obTreeRows[t]={LEFT:BX(s+this.treeProps[t].ID+"_left"),RIGHT:BX(s+this.treeProps[t].ID+"_right"),LIST:BX(s+this.treeProps[t].ID+"_list"),CONT:BX(s+this.treeProps[t].ID+"_cont")},!this.obTreeRows[t].LIST||!this.obTreeRows[t].CONT){this.errorCode=-512;break}this.visual.QUANTITY_MEASURE&&(this.obMeasure=BX(this.visual.QUANTITY_MEASURE)),this.visual.QUANTITY_LIMIT&&(this.obQuantityLimit.all=BX(this.visual.QUANTITY_LIMIT),this.obQuantityLimit.all&&(this.obQuantityLimit.value=BX.findChild(this.obQuantityLimit.all,{tagName:"span"},!1,!1),this.obQuantityLimit.value||(this.obQuantityLimit.all=null)))}if(this.config.showSkuProps&&(this.visual.DISPLAY_PROP_DIV&&(this.obSkuProps=BX(this.visual.DISPLAY_PROP_DIV)),this.visual.DISPLAY_PROP_ARTICLE_DIV&&(this.obSkuArticleProps=BX(this.visual.DISPLAY_PROP_ARTICLE_DIV))),this.config.useCompare&&(this.obCompare=BX(this.visual.COMPARE_LINK_ID)),0===this.errorCode){switch(this.config.showQuantity&&(this.obQuantityUp&&BX.bind(this.obQuantityUp,"click",BX.delegate(this.QuantityUp,this)),this.obQuantityDown&&BX.bind(this.obQuantityDown,"click",BX.delegate(this.QuantityDown,this)),this.obQuantity&&BX.bind(this.obQuantity,"change",BX.delegate(this.QuantityChange,this))),this.productType){case 0:case 1:case 2:if(this.product.useSlider){if(this.product.slider={COUNT:this.product.sliderCount,ID:this.visual.SLIDER_CONT,CONT:BX(this.visual.SLIDER_CONT),LIST:BX(this.visual.SLIDER_LIST),LEFT:BX(this.visual.SLIDER_LEFT),RIGHT:BX(this.visual.SLIDER_RIGHT),START:0},e=BX.findChildren(this.product.slider.LIST,{tagName:"li"},!0),e&&0<e.length)for(i=0;i<e.length;i++)BX.bind(e[i],"click",BX.delegate(this.ProductSelectSliderImg,this));this.product.slider.LEFT&&(BX.bind(this.product.slider.LEFT,"click",BX.delegate(this.ProductSliderRowLeft,this)),BX.adjust(this.product.slider.LEFT,{style:this.sliderDisableArrow})),this.product.slider.RIGHT&&(BX.bind(this.product.slider.RIGHT,"click",BX.delegate(this.ProductSliderRowRight,this)),BX.adjust(this.product.slider.RIGHT,{style:this.sliderEnableArrow})),this.setCurrentImg(this.product.sliderPict[0],!0)}break;case 3:for(var r in this.skuVisualParams){var a=BX.findChildren(this.obTree,{tagName:this.skuVisualParams[r].TAG_BIND},!0);if(a&&0<a.length)for(t=0;t<a.length;t++)$(a[t]).on(this.skuVisualParams[r].EVENT,BX.delegate(this.SelectOfferProp,this))}for(t=0;t<this.offers.length;t++)if(this.offers[t].SLIDER_COUNT=parseInt(this.offers[t].SLIDER_COUNT,10),isNaN(this.offers[t].SLIDER_COUNT)&&(this.offers[t].SLIDER_COUNT=0),0===this.offers[t].SLIDER_COUNT)this.sliders[t]={COUNT:this.offers[t].SLIDER_COUNT,ID:""};else{for(i=0;i<this.offers[t].SLIDER.length;i++)this.offers[t].SLIDER[i].WIDTH=parseInt(this.offers[t].SLIDER[i].WIDTH,10),this.offers[t].SLIDER[i].HEIGHT=parseInt(this.offers[t].SLIDER[i].HEIGHT,10);if(this.sliders[t]={COUNT:this.offers[t].SLIDER_COUNT,OFFER_ID:this.offers[t].ID,ID:this.visual.SLIDER_CONT_OF_ID+this.offers[t].ID,CONT:BX(this.visual.SLIDER_CONT_OF_ID+this.offers[t].ID),LIST:BX(this.visual.SLIDER_LIST_OF_ID+this.offers[t].ID),CONT_M:BX(this.visual.SLIDER_CONT_OFM_ID+this.offers[t].ID),LIST_M:BX(this.visual.SLIDER_LIST_OFM_ID+this.offers[t].ID),LEFT:BX(this.visual.SLIDER_LEFT_OF_ID+this.offers[t].ID),RIGHT:BX(this.visual.SLIDER_RIGHT_OF_ID+this.offers[t].ID),START:0},e=BX.findChildren(this.sliders[t].LIST,{tagName:"li"},!0),e&&0<e.length)for(i=0;i<e.length;i++)BX.bind(e[i],"click",BX.delegate(this.SelectSliderImg,this));this.sliders[t].LEFT&&BX.bind(this.sliders[t].LEFT,"click",BX.delegate(this.SliderRowLeft,this)),this.sliders[t].RIGHT&&BX.bind(this.sliders[t].RIGHT,"click",BX.delegate(this.SliderRowRight,this))}this.SetCurrent()}this.obBuyBtn&&BX.bind(this.obBuyBtn,"click",BX.proxy(this.BuyBasket,this)),this.obAddToBasketBtn&&BX.bind(this.obAddToBasketBtn,"click",BX.proxy(this.Add2Basket,this)),this.obCompare&&BX.bind(this.obCompare,"click",BX.proxy(this.Compare,this)),this.setMainPictHandler(),setTimeout(function(){$(".offers_img.wof").css("opacity",1)},400)}},t.JCCatalogElement.prototype.initConfig=function(){return this.productType=parseInt(this.params.PRODUCT_TYPE,10),this.params.CONFIG&&"object"==typeof this.params.CONFIG?("undefined"!==this.params.CONFIG.USE_CATALOG&&BX.type.isBoolean(this.params.CONFIG.USE_CATALOG)&&(this.config.useCatalog=this.params.CONFIG.USE_CATALOG),this.config.showQuantity=!!this.params.CONFIG.SHOW_QUANTITY,this.config.showPrice=!!this.params.CONFIG.SHOW_PRICE,this.config.showPercent=!!this.params.CONFIG.SHOW_DISCOUNT_PERCENT,this.config.showOldPrice=!!this.params.CONFIG.SHOW_OLD_PRICE,this.config.showSkuProps=!!this.params.CONFIG.SHOW_SKU_PROPS,this.config.showOfferGroup=!!this.params.CONFIG.OFFER_GROUP,this.config.useCompare=!!this.params.CONFIG.DISPLAY_COMPARE,this.params.CONFIG.MAIN_PICTURE_MODE&&(this.config.mainPictureMode=this.params.CONFIG.MAIN_PICTURE_MODE),this.config.showBasisPrice=!!this.params.CONFIG.SHOW_BASIS_PRICE,this.params.CONFIG.ADD_TO_BASKET_ACTION&&(this.config.basketAction=this.params.CONFIG.ADD_TO_BASKET_ACTION),this.config.showClosePopup=!!this.params.CONFIG.SHOW_CLOSE_POPUP):("undefined"!==this.params.USE_CATALOG&&BX.type.isBoolean(this.params.USE_CATALOG)&&(this.config.useCatalog=this.params.USE_CATALOG),this.config.showQuantity=!!this.params.SHOW_QUANTITY,this.config.showPrice=!!this.params.SHOW_PRICE,this.config.showPercent=!!this.params.SHOW_DISCOUNT_PERCENT,this.config.showOldPrice=!!this.params.SHOW_OLD_PRICE,this.config.showSkuProps=!!this.params.SHOW_SKU_PROPS,this.config.showOfferGroup=!!this.params.OFFER_GROUP,this.config.useCompare=!!this.params.DISPLAY_COMPARE,this.params.MAIN_PICTURE_MODE&&(this.config.mainPictureMode=this.params.MAIN_PICTURE_MODE),this.config.showBasisPrice=!!this.params.SHOW_BASIS_PRICE,this.params.ADD_TO_BASKET_ACTION&&(this.config.basketAction=this.params.ADD_TO_BASKET_ACTION),this.config.showClosePopup=!!this.params.SHOW_CLOSE_POPUP),this.params.VISUAL&&"object"==typeof this.params.VISUAL&&this.params.VISUAL.ID?(this.visual.ID=this.params.VISUAL.ID,this.basketLinkURL=this.params.BASKET.BASKET_URL,this.defaultCount=this.params.DEFAULT_COUNT,this.storeQuanity=BX(this.params.STORE_QUANTITY),this.initVisualParams("main"),this.config.showQuantity&&this.initVisualParams("quantity"),this.config.showPrice&&this.initVisualParams("price"),this.config.showOldPrice&&this.initVisualParams("oldPrice"),this.config.showPercent&&this.initVisualParams("discountPerc"),this.initVisualParams("basket"),"MAGNIFIER"===this.config.mainPictureMode&&this.initVisualParams("magnifier"),void(this.config.useCompare&&this.initVisualParams("compare"))):void(this.errorCode=-1)},t.JCCatalogElement.prototype.initVisualParams=function(t){var i=0,s="";if(!this.listID[t])return void(this.errorCode=-1);for(i=0;i<this.listID[t].length;i++)s=this.listID[t][i],this.visual[s]=this.params.VISUAL[s]?this.params.VISUAL[s]:this.visual.ID+this.visualPostfix[s]},t.JCCatalogElement.prototype.initProductData=function(){var t=0;if(this.initVisualParams("productSlider"),this.params.PRODUCT&&"object"==typeof this.params.PRODUCT){if(this.config.showQuantity&&(this.product.checkQuantity=this.params.PRODUCT.CHECK_QUANTITY,this.product.isDblQuantity=this.params.PRODUCT.QUANTITY_FLOAT,this.product.checkQuantity&&(this.product.maxQuantity=this.product.isDblQuantity?parseFloat(this.params.PRODUCT.MAX_QUANTITY):parseInt(this.params.PRODUCT.MAX_QUANTITY,10)),this.product.stepQuantity=this.product.isDblQuantity?parseFloat(this.params.PRODUCT.STEP_QUANTITY):parseInt(this.params.PRODUCT.STEP_QUANTITY,10),this.checkQuantity=this.product.checkQuantity,this.isDblQuantity=this.product.isDblQuantity,this.maxQuantity=this.product.maxQuantity,this.stepQuantity=this.product.stepQuantity,this.isDblQuantity&&(this.stepQuantity=Math.round(this.stepQuantity*this.precisionFactor)/this.precisionFactor)),this.product.canBuy=this.params.PRODUCT.CAN_BUY,this.product.canSubscription=this.params.PRODUCT.SUBSCRIPTION,this.config.showPrice&&(this.currentBasisPrice=this.params.PRODUCT.BASIS_PRICE),this.canBuy=this.product.canBuy,this.canSubscription=this.product.canSubscription,this.product.name=this.params.PRODUCT.NAME,this.product.pict=this.params.PRODUCT.PICT,this.product.id=this.params.PRODUCT.ID,this.params.PRODUCT.ADD_URL&&(this.product.addUrl=this.params.PRODUCT.ADD_URL),this.params.PRODUCT.BUY_URL&&(this.product.buyUrl=this.params.PRODUCT.BUY_URL),this.params.PRODUCT.SLIDER_COUNT&&(this.product.sliderCount=parseInt(this.params.PRODUCT.SLIDER_COUNT,10),isNaN(this.product.sliderCount)&&(this.product.sliderCount=0),0<this.product.sliderCount&&this.params.PRODUCT.SLIDER.length&&0<this.params.PRODUCT.SLIDER.length)){for(t=0;t<this.params.PRODUCT.SLIDER.length;t++)this.product.useSlider=!0,this.params.PRODUCT.SLIDER[t].WIDTH=parseInt(this.params.PRODUCT.SLIDER[t].WIDTH,10),this.params.PRODUCT.SLIDER[t].HEIGHT=parseInt(this.params.PRODUCT.SLIDER[t].HEIGHT,10);this.product.sliderPict=this.params.PRODUCT.SLIDER,this.setCurrentImg(this.product.sliderPict[0],!1)}this.currentIsSet=!0}else this.errorCode=-1},t.JCCatalogElement.prototype.initOffersData=function(){if(this.initVisualParams("offerSlider"),this.initVisualParams("offerSliderMobile"),this.initVisualParams("offers"),this.params.OFFERS&&BX.type.isArray(this.params.OFFERS)){if(this.offers=this.params.OFFERS,this.offerNum=0,this.params.OFFER_SELECTED&&"offers"in this&&this.offers.length){var t=parseUrlQuery(),i=(this.params.SKU_DETAIL_ID,0);if("oid"in t&&(i=t.oid),i)for(var s in this.offers)this.offers[s].ID==i&&(this.offerNum=parseInt(s,10))}isNaN(this.offerNum)&&(this.offerNum=0),this.params.TREE_PROPS&&(this.treeProps=this.params.TREE_PROPS),this.params.DEFAULT_PICTURE&&(this.defaultPict.preview=this.params.DEFAULT_PICTURE.PREVIEW_PICTIRE,this.defaultPict.detail=this.params.DEFAULT_PICTURE.DETAIL_PICTURE),this.params.PRODUCT&&"object"==typeof this.params.PRODUCT&&(this.product.id=parseInt(this.params.PRODUCT.ID,10),this.product.name=this.params.PRODUCT.NAME)}else this.errorCode=-1},t.JCCatalogElement.prototype.initBasketData=function(){this.params.BASKET&&"object"==typeof this.params.BASKET&&((1===this.productType||2===this.productType)&&(this.basketData.useProps=!!this.params.BASKET.ADD_PROPS,this.basketData.emptyProps=!!this.params.BASKET.EMPTY_PROPS),this.params.BASKET.QUANTITY&&(this.basketData.quantity=this.params.BASKET.QUANTITY),this.params.BASKET.PROPS&&(this.basketData.props=this.params.BASKET.PROPS),this.params.BASKET.BASKET_URL&&(this.basketData.basketUrl=this.params.BASKET.BASKET_URL),3===this.productType&&this.params.BASKET.SKU_PROPS&&(this.basketData.sku_props=this.params.BASKET.SKU_PROPS),this.params.BASKET.ADD_URL_TEMPLATE&&(this.basketData.add_url=this.params.BASKET.ADD_URL_TEMPLATE),this.params.BASKET.BUY_URL_TEMPLATE&&(this.basketData.buy_url=this.params.BASKET.BUY_URL_TEMPLATE),""===this.basketData.add_url&&""===this.basketData.buy_url&&(this.errorCode=-1024))},t.JCCatalogElement.prototype.initCompareData=function(){this.config.useCompare&&(this.params.COMPARE&&"object"==typeof this.params.COMPARE?(this.params.COMPARE.COMPARE_PATH&&(this.compareData.comparePath=this.params.COMPARE.COMPARE_PATH),this.params.COMPARE.COMPARE_URL_TEMPLATE_DEL&&(this.compareData.compareUrlDel=this.params.COMPARE.COMPARE_URL_TEMPLATE_DEL),this.params.COMPARE.COMPARE_URL_TEMPLATE?this.compareData.compareUrl=this.params.COMPARE.COMPARE_URL_TEMPLATE:this.config.useCompare=!1):this.config.useCompare=!1)},t.JCCatalogElement.prototype.setMainPictHandler=function(){switch(this.config.mainPictureMode){case"GALLERY":break;case"MAGNIFIER":$(this.obPict).addClass("zoom_picture");break;case"POPUP":$(this.obPict).parent().addClass("fancy_offer")}},t.JCCatalogElement.prototype.setCurrentImg=function(t,i){i=!!i,"SMALL"in t?this.currentImg.src=t.SMALL.src:"SRC"in t&&(this.currentImg.src=t.SRC),"BIG"in t&&(this.currentBigImg.src=t.BIG.src),"WIDTH"in t&&(this.currentImg.width=t.WIDTH),"HEIGHT"in t&&(this.currentImg.height=t.HEIGHT),i&&this.obPict&&("MAGNIFIER"===this.config.mainPictureMode&&$(this.obPict).attr("data-large",this.currentBigImg.src),"src"in this.currentImg&&this.currentImg.src&&BX.adjust(this.obPict,{props:{src:this.currentImg.src}}),"src"in this.currentBigImg&&this.currentBigImg.src&&("POPUP"===this.config.mainPictureMode&&$(this.obPict).parent().attr("href",this.currentBigImg.src),$(this.obPict).parent().attr("title",t.TITLE),$(this.obPict).parent().attr("alt",t.ALT),$(this.obPict).attr("title",t.TITLE),$(this.obPict).attr("alt",t.ALT)))},t.JCCatalogElement.prototype.scaleImg=function(t,i){var s,e,a,r={};return i.width>=t.width&&i.height>=t.height?(r.width=t.width,r.height=t.height):(s=i.width/t.width,e=i.height/t.height,a=Math.min(s,e),r.width=Math.max(1,parseInt(a*t.width,10)),r.height=Math.max(1,parseInt(a*t.height,10))),r},t.JCCatalogElement.prototype.showMagnifier=function(t){this.magnify.magnifyShow||(this.calcMagnifierParams(),this.calcMagnifyAreaSize(),this.calcMagnifyAreaPos(t),this.calcMagnifyPictSize(),this.calcMagnifyPictPos(),this.setMagnifyAreaParams(!0),this.setMagnifyPictParams(!0),this.setMagnifierParams(!0),BX.bind(document,"mousemove",BX.proxy(this.moveMagnifierArea,this)))},t.JCCatalogElement.prototype.hideMagnifier=function(){this.magnify.magnifyShow||(this.magnify.obMagnifier&&BX.adjust(this.magnify.obMagnifier,{style:{display:"none"}}),this.magnify.obMagnifyArea&&BX.adjust(this.magnify.obMagnifyArea,{style:{display:"none"}}),BX.unbind(document,"mousemove",BX.proxy(this.moveMagnifierArea,this)))},t.JCCatalogElement.prototype.moveMagnifierArea=function(t){var i={X:0,Y:0},s=BX.pos(this.obPict),e={},a={},r={};if(i=this.inRect(t,s),this.inBound(s,i)){switch(e=this.intersectArea(i,s),e.X){case-1:this.magnify.areaParams.left=this.currentImg.screenOffsetX;break;case 0:this.magnify.areaParams.left=this.currentImg.screenOffsetX+i.X-(this.magnify.areaParams.width>>>1);break;case 1:this.magnify.areaParams.left=this.currentImg.screenOffsetX+s.width-this.magnify.areaParams.width}switch(e.Y){case-1:this.magnify.areaParams.top=0;break;case 0:this.magnify.areaParams.top=i.Y-(this.magnify.areaParams.height>>>1);break;case 1:this.magnify.areaParams.top=s.height-this.magnify.areaParams.height}this.magnify.magnifyPictParams.marginLeft=-parseInt((this.magnify.areaParams.left-this.currentImg.screenOffsetX)*this.currentImg.scale,10),this.magnify.magnifyPictParams.marginTop=-parseInt(this.magnify.areaParams.top*this.currentImg.scale,10),a.left=this.magnify.areaParams.left+"px",a.top=this.magnify.areaParams.top+"px",BX.adjust(this.magnify.obMagnifyArea,{style:a}),r.marginLeft=this.magnify.magnifyPictParams.marginLeft+"px",r.marginTop=this.magnify.magnifyPictParams.marginTop+"px",BX.adjust(this.magnify.obMagnifyPict,{style:r})}else this.outMagnifierArea(),this.hideMagnifier()},t.JCCatalogElement.prototype.onMagnifierArea=function(){this.magnify.magnifyShow=!0},t.JCCatalogElement.prototype.outMagnifierArea=function(){this.magnify.magnifyShow=!1},t.JCCatalogElement.prototype.calcMagnifierParams=function(){if(this.magnify.obBigImg){var t=BX.pos(this.magnify.obBigImg,!0);this.magnify.magnifierParams.width=t.width,this.magnify.magnifierParams.height=t.height,this.magnify.magnifierParams.top=t.top,this.magnify.magnifierParams.left=t.left+t.width+2}},t.JCCatalogElement.prototype.setMagnifierParams=function(t){if(this.magnify.obMagnifier){t=!!t;var i={top:this.magnify.magnifierParams.top+"px",left:this.magnify.magnifierParams.left+"px",width:this.magnify.magnifierParams.width+"px",height:this.magnify.magnifierParams.height+"px"};t&&(i.display=""),BX.adjust(this.magnify.obMagnifier,{style:i})}},t.JCCatalogElement.prototype.setMagnifyAreaParams=function(t){if(this.magnify.obMagnifier){t=!!t;var i={top:this.magnify.areaParams.top+"px",left:this.magnify.areaParams.left+"px",width:this.magnify.areaParams.width+"px",height:this.magnify.areaParams.height+"px"};t&&(i.display=""),BX.adjust(this.magnify.obMagnifyArea,{style:i})}},t.JCCatalogElement.prototype.calcMagnifyAreaPos=function(t){var i,s,e;if(s=BX.pos(this.obPict),i=this.inRect(t,s),this.inBound(s,i)){switch(e=this.intersectArea(i,s),e.X){case-1:this.magnify.areaParams.left=this.currentImg.screenOffsetX;break;case 0:this.magnify.areaParams.left=this.currentImg.screenOffsetX+i.X-(this.magnify.areaParams.width>>>1);break;case 1:this.magnify.areaParams.left=this.currentImg.screenOffsetX+s.width-this.magnify.areaParams.width}switch(e.Y){case-1:this.magnify.areaParams.top=0;break;case 0:this.magnify.areaParams.top=i.Y-(this.magnify.areaParams.height>>>1);break;case 1:this.magnify.areaParams.top=s.height-this.magnify.areaParams.height}}},t.JCCatalogElement.prototype.inBound=function(t,i){return 0<=i.Y&&t.height>=i.Y&&0<=i.X&&t.width>=i.X},t.JCCatalogElement.prototype.inRect=function(t,i){var s=BX.GetWindowSize(),e={X:0,Y:0,globalX:0,globalY:0};return e.globalX=t.clientX+s.scrollLeft,e.X=e.globalX-i.left,e.globalY=t.clientY+s.scrollTop,e.Y=e.globalY-i.top,e},t.JCCatalogElement.prototype.intersectArea=function(t,i){var s={X:0,Y:0},e=this.magnify.areaParams.width>>>1,a=this.magnify.areaParams.height>>>1;return t.X<=e?s.X=-1:t.X>=i.width-e?s.X=1:s.X=0,t.Y<=a?s.Y=-1:t.Y>=i.height-a?s.Y=1:s.Y=0,s},t.JCCatalogElement.prototype.calcMagnifyAreaSize=function(){var t,i,s;this.magnify.magnifierParams.width<this.currentImg.width&&this.magnify.magnifierParams.height<this.currentImg.height?(t=this.magnify.obBigImg.offsetWidth/this.currentImg.width,i=this.magnify.obBigImg.offsetHeight/this.currentImg.height,s=Math.min(t,i),this.currentImg.scale=1/s,this.magnify.areaParams.width=Math.max(1,parseInt(s*this.magnify.magnifierParams.width,10)),this.magnify.areaParams.height=Math.max(1,parseInt(s*this.magnify.magnifierParams.height,10)),this.magnify.areaParams.scaleFactor=this.magnify.magnifierParams.defaultScale):(t=this.obPict.offsetWidth/this.magnify.obBigImg.offsetWidth,i=this.obPict.offsetHeight/this.magnify.obBigImg.offsetHeight,s=Math.min(t,i),this.currentImg.scale=1/s,this.magnify.areaParams.width=Math.max(1,parseInt(s*this.magnify.magnifierParams.width,10)),this.magnify.areaParams.height=Math.max(1,parseInt(s*this.magnify.magnifierParams.height,10)),t=this.magnify.magnifierParams.width/this.currentImg.width,i=this.magnify.magnifierParams.height/this.currentImg.height,s=Math.max(t,i),this.magnify.areaParams.scaleFactor=s)},t.JCCatalogElement.prototype.calcMagnifyPictSize=function(){this.magnify.magnifyPictParams.width=this.currentImg.width*this.magnify.areaParams.scaleFactor,this.magnify.magnifyPictParams.height=this.currentImg.height*this.magnify.areaParams.scaleFactor},t.JCCatalogElement.prototype.calcMagnifyPictPos=function(){this.magnify.magnifyPictParams.marginLeft=-parseInt((this.magnify.areaParams.left-this.currentImg.screenOffsetX)*this.currentImg.scale,10),this.magnify.magnifyPictParams.marginTop=-parseInt(this.magnify.areaParams.top*this.currentImg.scale,10)},t.JCCatalogElement.prototype.setMagnifyPictParams=function(t){if(this.magnify.obMagnifier){t=!!t;var i={width:this.magnify.magnifyPictParams.width+"px",height:this.magnify.magnifyPictParams.height+"px",marginTop:this.magnify.magnifyPictParams.marginTop+"px",marginLeft:this.magnify.magnifyPictParams.marginLeft+"px"};t&&(i.display=""),BX.adjust(this.magnify.obMagnifyPict,{style:i,props:{src:this.currentImg.src}})}},t.JCCatalogElement.prototype.ProductSliderRowLeft=function(){var t=BX.proxy_context;t&&this.sliderRowShowSize<this.product.slider.COUNT&&(0>this.product.slider.START&&(this.product.slider.START++,BX.adjust(this.product.slider.LIST,{style:{marginLeft:20*this.product.slider.START+"%"}}),BX.adjust(this.product.slider.RIGHT,{style:this.sliderEnableArrow})),0<=this.product.slider.START&&BX.adjust(this.product.slider.LEFT,{style:this.sliderDisableArrow}))},t.JCCatalogElement.prototype.ProductSliderRowRight=function(){var t=BX.proxy_context;t&&this.sliderRowShowSize<this.product.slider.COUNT&&(this.sliderRowShowSize-this.product.slider.START<this.product.slider.COUNT&&(this.product.slider.START--,BX.adjust(this.product.slider.LIST,{style:{marginLeft:20*this.product.slider.START+"%"}}),BX.adjust(this.product.slider.LEFT,{style:this.sliderEnableArrow})),this.sliderRowShowSize-this.product.slider.START>=this.product.slider.COUNT&&BX.adjust(this.product.slider.RIGHT,{style:this.sliderDisableArrow}))},t.JCCatalogElement.prototype.ProductSelectSliderImg=function(){var t="",i=BX.proxy_context;i&&i.hasAttribute("data-value")&&(t=i.getAttribute("data-value"),this.SetProductMainPict(t))},t.JCCatalogElement.prototype.SetProductMainPict=function(t){var i=-1,s=0,e=0,a="",r="",o=null;if(0<this.product.sliderCount){for(e=0;e<this.product.sliderPict.length;e++)if(t===this.product.sliderPict[e].ID){i=e;break}if(i>-1&&(this.product.sliderPict[i]&&this.setCurrentImg(this.product.sliderPict[i],!0),o=BX.findChildren(this.product.slider.LIST,{tagName:"li"},!1),o&&0<o.length))for(r=t,s=0;s<o.length;s++)a=o[s].getAttribute("data-value"),a===r?BX.addClass(o[s],"active"):BX.removeClass(o[s],"active")}},t.JCCatalogElement.prototype.SliderRowLeft=function(){var t,i="",s=-1,e=BX.proxy_context;if(e&&e.hasAttribute("data-value")){for(i=e.getAttribute("data-value"),t=0;t<this.sliders.length;t++)if(this.sliders[t].OFFER_ID===i){s=t;break}s>-1&&this.sliderRowShowSize<this.sliders[s].COUNT&&(0>this.sliders[s].START&&(this.sliders[s].START++,BX.adjust(this.sliders[s].LIST,{style:{marginLeft:20*this.sliders[s].START+"%"}}),BX.adjust(this.sliders[s].RIGHT,{style:this.sliderEnableArrow})),0<=this.sliders[s].START&&BX.adjust(this.sliders[s].LEFT,{style:this.sliderDisableArrow}))}},t.JCCatalogElement.prototype.SliderRowRight=function(){var t,i="",s=-1,e=BX.proxy_context;if(e&&e.hasAttribute("data-value")){for(i=e.getAttribute("data-value"),t=0;t<this.sliders.length;t++)if(this.sliders[t].OFFER_ID===i){s=t;break}s>-1&&this.sliderRowShowSize<this.sliders[s].COUNT&&(this.sliderRowShowSize-this.sliders[s].START<this.sliders[s].COUNT&&(this.sliders[s].START--,BX.adjust(this.sliders[s].LIST,{style:{marginLeft:20*this.sliders[s].START+"%"}}),BX.adjust(this.sliders[s].LEFT,{style:this.sliderEnableArrow})),this.sliderRowShowSize-this.sliders[s].START>=this.sliders[s].COUNT&&BX.adjust(this.sliders[s].RIGHT,{style:this.sliderDisableArrow}))}},t.JCCatalogElement.prototype.SelectSliderImg=function(){var t="",i=[],s=BX.proxy_context;s&&s.hasAttribute("data-value")&&(t=s.getAttribute("data-value"),i=t.split("_"),this.SetMainPict(i[0],i[1]))},t.JCCatalogElement.prototype.SetMainPict=function(i,s){var e,a,r=-1,o=-1,h="",n=null,l="";for(e=0;e<this.offers.length;e++)if(i===this.offers[e].ID){r=e;break}if($(t).resize(),$(".thumbs_navigation ul").addClass("hidden_block"),this.SliderImages>1&&$(".thumbs_navigation ul:eq("+r+")").removeClass("hidden_block"),
$(".thumbs_navigation").removeClass("hidden_block"),$(".fancy_offer").addClass("hidden_block"),$(this.obPict).closest(".offers_img").css("opacity",0),r>-1&&0<this.offers[r].SLIDER_COUNT){for(a=0;a<this.offers[r].SLIDER.length;a++)if(s===this.offers[r].SLIDER[a].ID){o=a;break}if(o>-1&&(this.offers[r].SLIDER[o]&&this.setCurrentImg(this.offers[r].SLIDER[o],!0),n=BX.findChildren(this.sliders[r].LIST,{tagName:"li"},!1),n&&0<n.length))for(l=i+"_"+s,e=0;e<n.length;e++)h=n[e].getAttribute("data-value"),h===l?BX.addClass(n[e],"current"):BX.removeClass(n[e],"current")}setTimeout(function(){$(".fancy_offer").removeClass("hidden_block"),$(".offers_img").css("opacity",1)},200)},t.JCCatalogElement.prototype.SetMainPictFromItem=function(t){if(this.obPict){var i=!1,s={};this.offers[t]&&(this.offers[t].DETAIL_PICTURE?(s=this.offers[t].DETAIL_PICTURE,i=!0):this.offers[t].PREVIEW_PICTURE&&(s=this.offers[t].PREVIEW_PICTURE,i=!0)),i||(this.defaultPict.detail?(s=this.defaultPict.detail,i=!0):this.defaultPict.preview&&(s=this.defaultPict.preview,i=!0)),i&&this.setCurrentImg(s,!0)}},t.JCCatalogElement.prototype.showMainPictPopup=function(t){var i="";return i='<div style="text-align: center;"><img src="'+this.currentImg.src+'" width="'+this.currentImg.width+'" height="'+this.currentImg.height+'" name=""></div>',this.obPopupPict.setContent(i),this.obPopupPict.show(),BX.PreventDefault(t)},t.JCCatalogElement.prototype.QuantityUp=function(){var t=0,i=!0;0===this.errorCode&&this.config.showQuantity&&this.canBuy&&(t=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(t)||(t+=this.stepQuantity,this.checkQuantity&&t>this.maxQuantity&&(i=!1),i&&(this.isDblQuantity&&(t=Math.round(t*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=t)))},t.JCCatalogElement.prototype.QuantityDown=function(){var t=0,i=!0;0===this.errorCode&&this.config.showQuantity&&this.canBuy&&(t=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(t)||(t-=this.stepQuantity,t<this.stepQuantity&&(i=!1),i&&(this.isDblQuantity&&(t=Math.round(t*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=t)))},t.JCCatalogElement.prototype.QuantityChange=function(){var t,i,s=0;0===this.errorCode&&this.config.showQuantity&&(this.canBuy?(s=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(s)?this.obQuantity.value=this.stepQuantity:(this.checkQuantity&&s>this.maxQuantity&&(s=this.maxQuantity),s<this.stepQuantity?s=this.stepQuantity:(i=Math.round(s*this.precisionFactor/this.stepQuantity)/this.precisionFactor,t=parseInt(i,10),isNaN(t)&&(t=1,i=1.1),i>t&&(s=1>=t?this.stepQuantity:t*this.stepQuantity,s=Math.round(s*this.precisionFactor)/this.precisionFactor)),this.obQuantity.value=s)):this.obQuantity.value=this.stepQuantity)},t.JCCatalogElement.prototype.QuantitySet=function(t){var i,s="";0===this.errorCode&&(this.canBuy=this.offers[t].CAN_BUY,this.canBuy?(this.obBasketActions&&BX.style(this.obBasketActions,"display",""),this.obNotAvail&&BX.style(this.obNotAvail,"display","none")):(this.obBasketActions&&(BX.style(this.obBasketActions,"opacity","0"),BX.style(BX.findParent(BX(this.obQuantity),{"class":"counter_block"}),"display","none")),this.obNotAvail&&BX.style(this.obNotAvail,"display","")),this.config.showQuantity&&(this.isDblQuantity=this.offers[t].QUANTITY_FLOAT,this.checkQuantity=this.offers[t].CHECK_QUANTITY,this.isDblQuantity?(this.maxQuantity=parseFloat(this.offers[t].MAX_QUANTITY),this.stepQuantity=Math.round(parseFloat(this.offers[t].STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor):(this.maxQuantity=parseInt(this.offers[t].MAX_QUANTITY,10),this.stepQuantity=parseInt(this.offers[t].STEP_QUANTITY,10)),this.obMeasure&&(this.offers[t].MEASURE?BX.adjust(this.obMeasure,{html:this.offers[t].MEASURE}):BX.adjust(this.obMeasure,{html:""})),this.obQuantityLimit.all&&(this.checkQuantity?(i=this.offers[t].MAX_QUANTITY,this.offers[t].MEASURE&&(i+=" "+this.offers[t].MEASURE),BX.adjust(this.obQuantityLimit.value,{html:i}),BX.adjust(this.obQuantityLimit.all,{style:{display:""}})):(BX.adjust(this.obQuantityLimit.value,{html:""}),BX.adjust(this.obQuantityLimit.all,{style:{display:"none"}}))),this.obBasisPrice&&(this.offers[t].BASIS_PRICE?(s=BX.message("BASIS_PRICE_MESSAGE"),s=s.replace("#PRICE#",BX.Currency.currencyFormat(this.offers[t].BASIS_PRICE.DISCOUNT_VALUE,this.offers[t].BASIS_PRICE.CURRENCY,!0)),s=s.replace("#MEASURE#",this.offers[t].MEASURE),BX.adjust(this.obBasisPrice,{style:{display:""},html:s})):BX.adjust(this.obBasisPrice,{style:{display:"none"},html:""}))),this.currentBasisPrice=this.offers[t].BASIS_PRICE)},t.JCCatalogElement.prototype.SelectOfferProp=function(){var t=0,i="",s=[],e=null,a=BX.proxy_context;if("undefined"!=typeof a.options&&"undefined"!=typeof a.options[a.selectedIndex]&&(a=a.options[a.selectedIndex]),a&&a.hasAttribute("data-treevalue")&&(i=a.getAttribute("data-treevalue"),propModes=a.getAttribute("data-showtype"),s=i.split("_"),this.SearchOfferPropIndex(s[0],s[1]),e=BX.findChildren(a.parentNode,{tagName:this.skuVisualParams[propModes.toUpperCase()].TAG},!1),e&&0<e.length))for(t=0;t<e.length;t++)value=e[t].getAttribute("data-onevalue"),"TEXT"==propModes?value===s[1]?e[t].setAttribute("selected","selected"):e[t].removeAttribute("selected"):value===s[1]?$(e[t]).addClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS):$(e[t]).removeClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS)},t.JCCatalogElement.prototype.SearchOfferPropIndex=function(t,i){var s,e,a="",r=!1,o=[],h=-1,n={},l=[];for(s=0;s<this.treeProps.length;s++)if(this.treeProps[s].ID===t){h=s;break}if(h>-1){for(s=0;h>s;s++)a="PROP_"+this.treeProps[s].ID,n[a]=this.selectedValues[a];for(a="PROP_"+this.treeProps[h].ID,n[a]=i,s=h+1;s<this.treeProps.length&&(a="PROP_"+this.treeProps[s].ID,r=this.GetRowValues(n,a),r);s++){if(this.config.showAbsent)for(o=[],l=[],l=BX.clone(n,!0),e=0;e<r.length;e++)l[a]=r[e],this.GetCanBuy(l)&&(o[o.length]=r[e]);else o=r;this.selectedValues[a]&&BX.util.in_array(this.selectedValues[a],o)?n[a]=this.selectedValues[a]:n[a]=o[0],this.UpdateRow(s,n[a],r,o)}this.selectedValues=n,this.ChangeInfo()}},t.JCCatalogElement.prototype.RowLeft=function(){var t,i="",s=-1,e=BX.proxy_context;if(e&&e.hasAttribute("data-treevalue")){for(i=e.getAttribute("data-treevalue"),t=0;t<this.treeProps.length;t++)if(this.treeProps[t].ID===i){s=t;break}s>-1&&this.treeRowShowSize<this.showCount[s]&&0>this.showStart[s]&&(this.showStart[s]++,BX.adjust(this.obTreeRows[s].LIST,{style:{marginLeft:20*this.showStart[s]+"%"}}))}},t.JCCatalogElement.prototype.RowRight=function(){var t,i="",s=-1,e=BX.proxy_context;if(e&&e.hasAttribute("data-treevalue")){for(i=e.getAttribute("data-treevalue"),t=0;t<this.treeProps.length;t++)if(this.treeProps[t].ID===i){s=t;break}s>-1&&this.treeRowShowSize<this.showCount[s]&&this.treeRowShowSize-this.showStart[s]<this.showCount[s]&&(this.showStart[s]--,BX.adjust(this.obTreeRows[s].LIST,{style:{marginLeft:20*this.showStart[s]+"%"}}))}},t.JCCatalogElement.prototype.UpdateRow=function(t,i,s,e){var a=0,r=0,o="",h=0,n={},l=null,c=!1,u=0,p=(this.treeEnableArrow,this.treeEnableArrow,0);if(t>-1&&t<this.obTreeRows.length&&(propMode=this.treeProps[t].DISPLAY_TYPE,l=BX.findChildren(this.obTreeRows[t].LIST,{tagName:this.skuVisualParams[propMode].TAG},!1),l&&0<l.length)){for(selectMode="SELECT"===this.treeProps[t].DISPLAY_TYPE,h=s.length,n={style:{},props:{disabled:"",selected:""}},a=0;a<l.length;a++)o=l[a].getAttribute("data-onevalue"),c=o===i&&0!=o,BX.util.in_array(o,e)?n.props.className=c?this.skuVisualParams[propMode].ACTIVE_CLASS:"":n.props.className=c?this.skuVisualParams[propMode].ACTIVE_CLASS+" "+this.skuVisualParams[propMode].HIDE_CLASS:this.skuVisualParams[propMode].HIDE_CLASS,selectMode?(n.props.disabled="disabled",n.props.selected=c?"selected":""):n.style.display="none",BX.util.in_array(o,s)&&(selectMode?n.props.disabled="":n.style.display="",c&&(u=r),r++),BX.adjust(l[a],n);selectMode&&$(this.obTreeRows[t].LIST).parent().hasClass("ik_select")&&$(this.obTreeRows[t].LIST).ikSelect("reset"),this.showCount[t]=h,this.showStart[t]=p}},t.JCCatalogElement.prototype.GetRowValues=function(t,i){var s=[],e=0,a=0,r=!1,o=!0;if(0===t.length){for(e=0;e<this.offers.length;e++)BX.util.in_array(this.offers[e].TREE[i],s)||(s[s.length]=this.offers[e].TREE[i]);r=!0}else for(e=0;e<this.offers.length;e++){o=!0;for(a in t)if(t[a]!==this.offers[e].TREE[a]){o=!1;break}o&&(BX.util.in_array(this.offers[e].TREE[i],s)||(s[s.length]=this.offers[e].TREE[i]),r=!0)}return r?s:!1},t.JCCatalogElement.prototype.GetCanBuy=function(t){var i=0,s=0,e=!0,a=!1;for(i=0;i<this.offers.length;i++){e=!0;for(s in t)if(t[s]!==this.offers[i].TREE[s]){e=!1;break}if(e&&this.offers[i].CAN_BUY){a=!0;break}}return a},t.JCCatalogElement.prototype.SetCurrent=function(){var t=0,i=0,s="",e=!1,a=[],r={},o=[],h=this.offers[this.offerNum].TREE;for(t=0;t<this.treeProps.length&&(s="PROP_"+this.treeProps[t].ID,e=this.GetRowValues(r,s),e);t++){if(BX.util.in_array(h[s],e)?r[s]=h[s]:(r[s]=e[0],this.offerNum=0),this.config.showAbsent)for(a=[],o=[],o=BX.clone(r,!0),i=0;i<e.length;i++)o[s]=e[i],this.GetCanBuy(o)&&(a[a.length]=e[i]);else a=e;this.UpdateRow(t,r[s],e,a)}this.selectedValues=r,this.ChangeInfo()},t.JCCatalogElement.prototype.ChangeInfo=function(){var i=-1,s=0,e=0,a=!0;for(s=0;s<this.offers.length;s++){a=!0;for(e in this.selectedValues)if(this.selectedValues[e]!==this.offers[s].TREE[e]){a=!1;break}if(a){i=s;break}}if(i>-1){var r=this.offers[i].MEASURE&&"Y"==this.offers[i].SHOW_MEASURE?this.offers[i].MEASURE:"";for(this.setPrice(this.offers[i].PRICE,r),s=0;s<this.offers.length;s++)this.config.showOfferGroup&&this.offers[s].OFFER_GROUP&&s!==i&&BX.adjust(BX(this.visual.OFFER_GROUP+this.offers[s].ID),{style:{display:"none"}});if(setViewedProduct(this.offers[i].ID,{PRODUCT_ID:this.offers[i].PRODUCT_ID,IBLOCK_ID:this.offers[i].IBLOCK_ID,NAME:this.product.name,DETAIL_PAGE_URL:this.offers[i].URL,PICTURE_ID:this.offers[i].PREVIEW_PICTURE?this.offers[i].PREVIEW_PICTURE.ID:this.offers[i].PARENT_PICTURE?this.offers[i].PARENT_PICTURE.ID:this.offers[i].SLIDER_COUNT?this.offers[i].SLIDER[0].ID:!1,CATALOG_MEASURE_NAME:this.offers[i].MEASURE,MIN_PRICE:this.offers[i].PRICE,CAN_BUY:this.offers[i].CAN_BUY?"Y":"N",IS_OFFER:"Y",WITH_OFFERS:"N"}),this.config.showOfferGroup&&this.offers[i].OFFER_GROUP&&BX.adjust(BX(this.visual.OFFER_GROUP+this.offers[i].ID),{style:{display:""}}),0<this.offers[i].SLIDER_COUNT?this.SetMainPict(this.offers[i].ID,this.offers[i].SLIDER[0].ID):this.SetMainPictFromItem(i),this.SetSliderPict(this.offers[i],this.offers[i].SLIDER,this.config),this.SetSliderPictMobile(this.offers[i],this.offers[i].SLIDER,this.config),this.config.showSkuProps&&this.obSkuProps){var o="",h=this.offers[i].TYPE_PROP;if(this.offers[i].DISPLAY_PROPERTIES&&0!==this.offers[i].DISPLAY_PROPERTIES.length){"TABLE"!=h&&$(this.obSkuProps).find(".sku_block_prop").remove();for(var s in this.offers[i].DISPLAY_PROPERTIES)"TABLE"==h?o+='<tr><td class="char_name"><span>'+this.offers[i].DISPLAY_PROPERTIES[s].NAME+'</span></td><td class="char_value"><span>'+this.offers[i].DISPLAY_PROPERTIES[s].VALUE+"</span></td></tr>":(o='<div class="char sku_block_prop"><div class="char_name"><span>'+this.offers[i].DISPLAY_PROPERTIES[s].NAME+'</span></div><div class="char_value"><span>'+this.offers[i].DISPLAY_PROPERTIES[s].VALUE+"</span></div></div>",$(this.obSkuProps).append(o));"TABLE"==h&&BX.adjust(this.obSkuProps,{style:{display:""},html:o})}else"TABLE"==h?BX.adjust(this.obSkuProps,{style:{display:"none"},html:""}):$(this.obSkuProps).find(".sku_block_prop").remove()}this.config.showSkuProps&&this.obSkuArticleProps&&("DISPLAY_PROPERTIES_CODE"in this.offers[i]&&"ARTICLE"in this.offers[i].DISPLAY_PROPERTIES_CODE?this.offers[i].DISPLAY_PROPERTIES_CODE.ARTICLE.VALUE&&BX.adjust(this.obSkuArticleProps,{style:{display:""},html:this.offers[i].DISPLAY_PROPERTIES_CODE.ARTICLE.VALUE_FORMAT}):BX.adjust(this.obSkuArticleProps,{style:{display:"none"},html:""})),setLocationSKU(this.offers[i].ID),$(this.obBasketActions).closest(".counter_wrapp").addClass("hidden_block"),this.offerNum=i,this.QuantitySet(this.offerNum),this.setStoreBlock(this.offers[i].ID),this.setQuantityStore(this.offers[i].MAX_QUANTITY,this.offers[i].AVAILIABLE.TEXT),this.incViewedCounter(),BX.onCustomEvent("onCatalogStoreProductChange",[this.offers[this.offerNum].ID]),$(this.obPict).parent().data("id",this.offers[i].ID);var n=this.offers[i],l=$(this.obProduct);"undefined"!=typeof arBasketAspro?this.setActualDataBlock(l,n):"undefined"!=typeof t.frameCacheVars&&BX.addCustomEvent("onFrameDataReceived",function(){t.JCCatalogElement.prototype.setActualDataBlock(l,n)}),$(this.obProduct).find(".quantity_block .values").length&&$(this.obProduct).find(".quantity_block .values .item span.value").text(this.offers[i].MAX_QUANTITY).css({opacity:"1"}),$('.catalog_detail .tabs_section .tabs_content .form.inline input[data-sid="PRODUCT_NAME"]').attr("value",$("h1").text()+"("+this.offers[i].NAME+")")}},t.JCCatalogElement.prototype.setActualDataBlock=function(t,i){this.setLikeBlock(t,".like_icons .wish_item",i,"DELAY"),this.setLikeBlock(t,".like_icons .compare_item",i,"COMPARE"),this.setBuyBlock(t,i)},t.JCCatalogElement.prototype.SetSliderPict=function(t,i,s){var e=$(".wrapp_thumbs"),a="";countPhoto=t.SLIDER_COUNT,e.find(".thumbs").css({"max-width":Math.ceil(64*(countPhoto<=4?countPhoto:4)-10)}),a='<ul class="slides_block">';for(var r in i)a+='<li data-big="'+i[r].BIG.src+'"><span class="cnt"><img border="0" src="'+i[r].THUMB.src+'" alt="'+i[r].ALT+'" title="'+i[r].TITLE+'" /></span></li>';if(a+="</ul>",e.find(".thumbs").html(a),countPhoto>1){e.show(),e.find(".thumbs_navigation").length&&e.find(".thumbs_navigation").remove(),e.find(".thumbs").append('<span class="thumbs_navigation custom_flex"></span>'),e.find(".thumbs").removeData("flexslider"),e.find(".thumbs").flexslider({animation:"slide",selector:".slides_block > li",slideshow:!1,animationSpeed:600,directionNav:!0,controlNav:!1,pauseOnHover:!0,itemWidth:54,itemMargin:10,animationLoop:!0,controlsContainer:".thumbs_navigation"}),e.find(".thumbs .slides_block li").first().addClass("current");var o=$(this.obPict);e.find(".thumbs").delegate("li:not(.current)","click",function(t){var e="",a="",r="",h="";index=$(this).index(),"SMALL"in i[index]?e=i[index].SMALL.src:"SRC"in i[index]&&(e=i[index].SRC),"BIG"in i[index]&&(a=i[index].BIG.src),"WIDTH"in i[index]&&(r=i[index].WIDTH),"HEIGHT"in i[index]&&(h=i[index].HEIGHT),$(this).addClass("current").siblings().removeClass("current").parents(".item_slider").find(".slides li").fadeOut(333),$(this).parents(".item_slider").find(".slides li").eq(index).addClass("current").stop().fadeIn(333),e&&BX.adjust(o[0],{props:{src:e}}),o.attr("data-large",""),a&&("POPUP"===s.mainPictureMode&&o.parent().attr("href",a),"MAGNIFIER"===s.mainPictureMode&&o.attr("data-large",a),o.parent().attr("title",i[index].TITLE),o.parent().attr("alt",i[index].ALT),o.attr("title",i[index].TITLE),o.attr("alt",i[index].ALT))})}else e.hide()},t.JCCatalogElement.prototype.SetSliderPictMobile=function(t,i){var s=$(".item_slider.flex"),e="";if(countPhoto=t.SLIDER_COUNT,e='<ul class="slides">',i.length)for(var a in i)e+='<li data-value="'+t.ID+"_"+i[a].ID+'"><a href="'+i[a].BIG.src+'" rel="item_slider" class="fancy" title="'+i[a].TITLE+'"><img border="0" src="'+i[a].SMALL.src+'" alt="'+i[a].ALT+'" title="'+i[a].TITLE+'" /></a></li>';else e+='<li data-value=""><span rel="item_slider" class="fancy" title="'+t.NAME+'"><img border="0" src="'+t.NO_PHOTO.SRC+'" alt="'+t.NAME+'" title="'+t.NAME+'" /></span></li>';e+="</ul>",s.html(e),s.removeData("flexslider"),s.flexslider({animation:"slide",slideshow:!0,slideshowSpeed:1e4,animationSpeed:600,directionNav:!1,pauseOnHover:!0,animationLoop:!1})},t.JCCatalogElement.prototype.setLikeBlock=function(t,i,s,e){var a=t;"DELAY"==e&&(s.CAN_BUY?a.find(i).css("display","block"):a.find(i).hide()),a.find(i).attr("data-item",s.ID),arBasketAspro[e]&&(a.find(i).removeClass("added"),a.find(i).find(".value").css("display","block"),a.find(i).find(".value.added").hide(),void 0!==arBasketAspro[e][s.ID]&&(a.find(i).addClass("added"),a.find(i).find(".value").hide(),a.find(i).find(".value.added").css("display","block")))},t.JCCatalogElement.prototype.setBuyBlock=function(t,i){var s=t.find(".offer_buy_block");if(s.find(".counter_wrapp .counter_block").length&&s.find(".counter_wrapp .counter_block").attr("data-item",i.ID),i.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL&&"ADD"==i.CONFIG.ACTION&&i.CAN_BUY){var e=i.CONFIG.MAX_QUANTITY_BUY>0?"data-max='"+i.CONFIG.MAX_QUANTITY_BUY+"'":"",a='<span class="minus">-</span><input type="text" class="text" name="'+i.PRODUCT_QUANTITY_VARIABLE+'" value="'+i.CONFIG.MIN_QUANTITY_BUY+'" /><span class="plus" '+e+">+</span>";arBasketAspro.BASKET&&void 0!==arBasketAspro.BASKET[i.ID]?s.find(".counter_wrapp .counter_block").length?s.find(".counter_wrapp .counter_block").hide():(s.find(".counter_wrapp").prepend('<div class="counter_block big_basket" data-item="'+i.ID+'"></div>'),s.find(".counter_wrapp .counter_block").html(a).hide()):s.find(".counter_wrapp .counter_block").length?s.find(".counter_wrapp .counter_block").html(a).show():(s.find(".counter_wrapp").prepend('<div class="counter_block big_basket" data-item="'+i.ID+'"></div>'),s.find(".counter_wrapp .counter_block").html(a))}else s.find(".counter_wrapp .counter_block").length&&s.find(".counter_wrapp .counter_block").hide();var r="ORDER"==i.CONFIG.ACTION||!i.CAN_BUY||!i.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL||"SUBSCRIBE"==i.CONFIG.ACTION&&"Y"==i.CATALOG_SUBSCRIBE?"wide":"";$('<div class="button_block"></div>');if(s.find(".counter_wrapp").find(".button_block").length?arBasketAspro.BASKET&&void 0!==arBasketAspro.BASKET[i.ID]?(s.find(".counter_wrapp").find(".button_block").addClass("wide").html(i.HTML),markProductAddBasket(i.ID)):r?(s.find(".counter_wrapp").find(".button_block").addClass("wide").html(i.HTML),"undefined"!=typeof arBasketAspro&&arBasketAspro.SUBSCRIBE&&void 0!==arBasketAspro.SUBSCRIBE[i.ID]&&markProductSubscribe(i.ID)):s.find(".counter_wrapp").find(".button_block").removeClass("wide").html(i.HTML):(s.find(".counter_wrapp").append('<div class="button_block '+r+'">'+i.HTML+"</div>"),arBasketAspro.BASKET&&void 0!==arBasketAspro.BASKET[i.ID]&&markProductAddBasket(i.ID),arBasketAspro.SUBSCRIBE&&void 0!==arBasketAspro.SUBSCRIBE[i.ID]&&markProductSubscribe(i.ID)),"NOTHING"!==i.CONFIG.ACTION)if("ADD"==i.CONFIG.ACTION&&i.CAN_BUY&&"N"!=i.SHOW_ONE_CLICK_BUY){var o='<span class="transparent big_btn type_block button one_click transition_bg" data-offers="Y" data-item="'+i.ID+'" data-iblockID="'+i.IBLOCK_ID+'" data-quantity="'+i.CONFIG.MIN_QUANTITY_BUY+'" data-props="'+i.OFFER_PROPS+'" onclick="oneClickBuy('+i.ID+", "+i.IBLOCK_ID+', this)"><span>'+i.ONE_CLICK_BUY+"</span></span>";s.find(".wrapp_one_click").length?s.find(".wrapp_one_click").html(o):s.append('<div class="wrapp_one_click">'+o+"</div>")}else s.find(".wrapp_one_click").length&&s.find(".wrapp_one_click").remove();else s.find(".wrapp_one_click").length&&s.find(".wrapp_one_click").remove();s.fadeIn()},t.JCCatalogElement.prototype.setStoreBlock=function(t){$(".stores_tab > div").hide(),$(".stores_tab .sku_stores_"+t).show()},t.JCCatalogElement.prototype.setQuantityStore=function(t,i){parseFloat(t)>0?$(this.storeQuanity).find(".icon").removeClass("order").addClass("stock"):$(this.storeQuanity).find(".icon").removeClass("stock").addClass("order"),$(this.storeQuanity).find(".icon + span").html(i),$(".stores_tab").length||$(".item-stock .store_view").removeClass("store_view")},t.JCCatalogElement.prototype.CompareCountResult=function(t){if(t.COMPARE_COUNT){for(var i in t.ITEMS){if(t.ITEMS[i]==this.offers[this.offerNum].ID){this.offers[this.offerNum].COMPARE_ACTIVE=!0;break}this.offers[this.offerNum].COMPARE_ACTIVE=!1}this.offers[this.offerNum].COMPARE_ACTIVE?($(this.obCompare).addClass("added"),$(this.obCompare).find(".value:not(.added)").hide(),$(this.obCompare).find(".value.added").css("display","block")):($(this.obCompare).removeClass("added"),$(this.obCompare).find(".value.added").hide(),$(this.obCompare).find(".value:not(.added)").css("display","block"))}},t.JCCatalogElement.prototype.ItemInfoResult=function(t){t.HTML&&($(this.obBasketActions).html(t.HTML),$(this.obBasketActions).show(),this.obAddToBasketBtn=BX(this.visual.BUY_ID),this.obBasketBtn=BX(this.visual.BASKET_LINK),this.obSubscribeBtn=BX(this.visual.SUBSCRIBE_ID),this.obSubscribedBtn=BX(this.visual.SUBSCRIBED_ID),BX.bind(this.obAddToBasketBtn,"click",BX.delegate(this.Add2Basket,this)),$(this.obBasketActions).removeClass("wide"),this.ajax_type_item=t.BUYMISSINGGOODS,"ADD"==t.BUYMISSINGGOODS||this.canBuy?$(this.obQuantity).css("display",""):$(this.obBasketActions).addClass("wide"),t.ONE_CLICK_HTML&&$(".wrapp_one_click").html(t.ONE_CLICK_HTML)),basketParams={ajax_action:"Y"},BX.ajax.loadJSON(arOptimusOptions.SITE_DIR+"ajax/get_basket_count.php",basketParams,BX.delegate(this.BasketCountResult,this))},t.JCCatalogElement.prototype.BasketCountResult=function(t){for(var i in t.ITEMS){if(t.ITEMS[i].PRODUCT_ID==this.offers[this.offerNum].ID){this.offers[this.offerNum].BASKET_ACTIVE=!0;break}this.offers[this.offerNum].BASKET_ACTIVE=!1}for(var i in t.SUBSCRIBE_ITEMS){if(t.SUBSCRIBE_ITEMS[i].PRODUCT_ID==this.offers[this.offerNum].ID){this.offers[this.offerNum].SUBSCRIBE_ACTIVE=!0;break}this.offers[this.offerNum].SUBSCRIBE_ACTIVE=!1}this.BasketStateRefresh()},t.JCCatalogElement.prototype.BasketStateRefresh=function(i){this.offers[this.offerNum].SUBSCRIBE_ACTIVE?($(this.obBasketActions).addClass("wide"),$(this.obSubscribeBtn).hide(),$(this.obSubscribedBtn).show()):($(this.obBasketActions).addClass("wide"),$(this.obSubscribedBtn).hide(),$(this.obSubscribeBtn).show()),this.offers[this.offerNum].BASKET_ACTIVE?($(this.obAddToBasketBtn).hide(),$(this.obQuantity).closest(".counter_wrapp").find(".counter_block").hide(),$(this.obBasketBtn).show(),$(this.obBasketActions).addClass("wide")):($(this.obBasketActions).removeClass("wide"),$(this.obBasketBtn).hide(),("ADD"==this.ajax_type_item||this.canBuy)&&$(this.obQuantity).closest(".counter_wrapp").find(".counter_block").show(),$(this.obAddToBasketBtn).show()),this.canBuy||$(this.obBasketActions).addClass("wide"),this.canBuy&&$(".one_click").removeClass("hidden_block").css("opacity",1),BX.style(this.obBasketActions,"opacity","1"),$(this.obBasketActions).closest(".counter_wrapp").removeClass("hidden_block").css("opacity",1),"undefined"!==i&&"Y"==i&&($("#basket_line .basket_fly").length&&$(t).outerWidth()>768?basketFly("open"):$("#basket_line .cart").length&&($("#basket_line .cart").is(".empty_cart")&&($("#basket_line .cart").removeClass("empty_cart").find(".cart_wrapp a.basket_link").removeAttr("href").addClass("cart-call"),touchBasket(".cart:not(.empty_cart) .basket_block .link")),reloadTopBasket("add",$("#basket_line"),200,2e3,"Y")),animateBasketLine(200))},t.JCCatalogElement.prototype.setPrice=function(t,i){var s="";this.obPrice.price&&(s=BX.Currency.currencyFormat(t.DISCOUNT_VALUE,t.CURRENCY,!0),i&&(s=s?s+"/"+i:"&nbsp;"),BX.adjust(this.obPrice.price,{html:s}),t.DISCOUNT_VALUE!==t.VALUE?this.config.showOldPrice&&(this.obPrice.full&&BX.adjust(this.obPrice.full,{style:{display:""},html:BX.Currency.currencyFormat(t.VALUE,t.CURRENCY,!0)}),this.config.showPercent&&($(this.obPrice.full).closest(".cost").find(".sale_block").show(),$(this.obPrice.full).closest(".cost").find(".value").html(t.DISCOUNT_DIFF_PERCENT_RAW),$(this.obPrice.full).closest(".cost").find(".text span").html(BX.Currency.currencyFormat(t.DISCOUNT_DIFF,t.CURRENCY,!0)))):(this.config.showOldPrice&&(this.obPrice.full&&BX.adjust(this.obPrice.full,{style:{display:"none"},html:""}),this.obPrice.discount&&BX.adjust(this.obPrice.discount,{style:{display:"none"},html:""})),this.config.showPercent&&(this.obPrice.percent&&BX.adjust(this.obPrice.percent,{style:{display:"none"},html:""}),$(this.obPrice.full).closest(".cost").find(".sale_block").hide(),$(this.obPrice.full).closest(".cost").find(".value").html(""),$(this.obPrice.full).closest(".cost").find(".text span").html(""))))},t.JCCatalogElement.prototype.Compare=function(){var t,i;if($(this.obCompare).find(".added").is(":visible")?(i=this.compareData.compareUrlDel,this.compareData.Added=!1):(i=this.compareData.compareUrl,this.compareData.Added=!0),i){switch(this.productType){case 1:case 2:i=i.replace("#ID#",this.product.id.toString());break;case 3:i=i.replace("#ID#",this.offers[this.offerNum].ID)}t={ajax_action:"Y"},BX.ajax.loadJSON(i,t,BX.proxy(this.CompareResult,this))}},t.JCCatalogElement.prototype.CompareResult=function(t){return"object"!=typeof t?!1:("OK"===t.STATUS?(BX.onCustomEvent("OnCompareChange"),this.compareData.Added?($(this.obCompare).addClass("added"),$(this.obCompare).find(".value:not(.added)").hide(),$(this.obCompare).find(".added").css("display","block")):($(this.obCompare).removeClass("added"),$(this.obCompare).find(".added").hide(),$(this.obCompare).find(".value:not(.added)").css("display","block")),jsAjaxUtil.InsertDataToNode(arOptimusOptions.SITE_DIR+"ajax/show_compare_preview_top.php","compare_line",!1)):console.log(BX.message("ADD_ERROR_COMPARE")),!1)},t.JCCatalogElement.prototype.CompareRedirect=function(){this.compareData.comparePath?location.href=this.compareData.comparePath:this.obPopupWin.close()},t.JCCatalogElement.prototype.InitBasketUrl=function(){var t="";switch(this.basketUrl="ADD"===this.basketMode?this.basketData.add_url:this.basketData.buy_url,this.productType){case 1:case 2:this.basketUrl=this.basketUrl.replace("#ID#",this.product.id.toString()),t=this.product.id.toString();break;case 3:this.basketUrl=this.basketUrl.replace("#ID#",this.offers[this.offerNum].ID),t=this.offers[this.offerNum].URL}this.basketParams={ajax_basket:"Y"},this.config.showQuantity&&(this.basketParams[this.basketData.quantity]=this.obQuantity.value),this.basketData.sku_props&&(this.basketParams[this.basketData.sku_props_var]=this.basketData.sku_props),t&&(this.basketParams.REQUEST_URI=t)},t.JCCatalogElement.prototype.FillBasketProps=function(){if(this.visual.BASKET_PROP_DIV){var t=0,i=null,s=!1,e=null;if(this.basketData.useProps&&!this.basketData.emptyProps?this.obPopupWin&&this.obPopupWin.contentContainer&&(e=this.obPopupWin.contentContainer):e=BX(this.visual.BASKET_PROP_DIV),e){if(i=e.getElementsByTagName("select"),i&&i.length)for(t=0;t<i.length;t++)if(!i[t].disabled)switch(i[t].type.toLowerCase()){case"select-one":this.basketParams[i[t].name]=i[t].value,s=!0}if(i=e.getElementsByTagName("input"),i&&i.length)for(t=0;t<i.length;t++)if(!i[t].disabled)switch(i[t].type.toLowerCase()){case"hidden":this.basketParams[i[t].name]=i[t].value,s=!0;break;case"radio":i[t].checked&&(this.basketParams[i[t].name]=i[t].value,s=!0)}}s||(this.basketParams[this.basketData.props]=[],this.basketParams[this.basketData.props][0]=0)}},t.JCCatalogElement.prototype.SendToBasket=function(){this.canBuy&&(this.InitBasketUrl(),this.FillBasketProps(),BX.ajax.loadJSON(this.basketUrl,this.basketParams,BX.proxy(this.BasketResult,this)))},t.JCCatalogElement.prototype.Add2Basket=function(){this.basketMode="ADD",this.Basket()},t.JCCatalogElement.prototype.BuyBasket=function(){this.basketMode="BUY",this.Basket()},t.JCCatalogElement.prototype.Basket=function(){this.canBuy&&this.SendToBasket()},t.JCCatalogElement.prototype.BasketResult=function(t){var i;return this.obPopupWin&&this.obPopupWin.close(),"object"!=typeof t?!1:("OK"===t.STATUS&&"BUY"===this.basketMode?this.BasketRedirect():(i={content:BX.create("div",{style:{marginRight:"30px",whiteSpace:"nowrap"},text:"OK"===t.STATUS?BX.message("TITLE_SUCCESSFUL"):BX.message("TITLE_ERROR")})},"OK"===t.STATUS?(BX.onCustomEvent("OnBasketChange"),this.offers[this.offerNum].BASKET_ACTIVE=!0,this.BasketStateRefresh("Y")):console.log(BX.message("ADD_ERROR_BASKET"))),!1)},t.JCCatalogElement.prototype.BasketRedirect=function(){location.href=this.basketData.basketUrl?this.basketData.basketUrl:BX.message("BASKET_URL")},t.JCCatalogElement.prototype.InitPopupWindow=function(){this.obPopupWin||(this.obPopupWin=BX.PopupWindowManager.create("CatalogElementBasket_"+this.visual.ID,null,{autoHide:!1,offsetLeft:0,offsetTop:0,overlay:!0,closeByEsc:!0,titleBar:!0,closeIcon:{top:"10px",right:"10px"}}))},t.JCCatalogElement.prototype.onPopupWindowShow=function(t){BX.bind(document,"click",BX.proxy(this.popupWindowClick,this))},t.JCCatalogElement.prototype.onPopupWindowClose=function(t,i){BX.unbind(document,"click",BX.proxy(this.popupWindowClick,this))},t.JCCatalogElement.prototype.popupWindowClick=function(){this.obPopupPict&&"object"==typeof this.obPopupPict&&this.obPopupPict.isShown()&&this.obPopupPict.close()},t.JCCatalogElement.prototype.incViewedCounter=function(){if(this.currentIsSet&&!this.updateViewedCount){switch(this.productType){case 1:case 2:this.viewedCounter.params.PRODUCT_ID=this.product.id,this.viewedCounter.params.PARENT_ID=this.product.id;break;case 3:this.viewedCounter.params.PARENT_ID=this.product.id,this.viewedCounter.params.PRODUCT_ID=this.offers[this.offerNum].ID;break;default:return}this.viewedCounter.params.SITE_ID=BX.message("SITE_ID"),this.updateViewedCount=!0,BX.ajax.post(this.viewedCounter.path,this.viewedCounter.params,BX.delegate(function(){this.updateViewedCount=!1},this))}},t.JCCatalogElement.prototype.allowViewedCount=function(t){t=!!t,this.currentIsSet=!0,t&&this.incViewedCounter()}}}(window);137  91877|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/catalog.element/main/script.js|ddff7780$(document).on('click', ".item-stock .store_view", function(){
	scroll_block($('.tabs_section'));
});

$(document).ready(function (){
	$(".opener").click(function(){
		$(this).find(".opener_icon").toggleClass("opened");
		var showBlock = $(this).parents("tr").toggleClass("nb").next(".offer_stores").find(".stores_block_wrap");
		showBlock.slideToggle(200);
	});

	$(".tabs_section .tabs-head li").live("click", function(){
		if(!$(this).is(".current")){
			$(".tabs_section .tabs-head li").removeClass("current");
			$(this).addClass("current");
			$(".tabs_section ul.tabs_content li").removeClass("current");
			if($(this).attr("id") == "product_reviews_tab"){
				//$(".tabs_section ul.tabs_content > li:eq("+$(this).index()+")").addClass("current");
				$(".shadow.common").hide(); $("#reviews_content").show();
			}
			else{
				$(".shadow.common").show();
				$("#reviews_content").hide();
				$(".tabs_section ul.tabs_content > li:eq("+$(this).index()+")").addClass("current");
			}
		}
	});

	$(".hint .icon").click(function(e){
		var tooltipWrapp = $(this).parents(".hint");
		tooltipWrapp.click(function(e){e.stopPropagation();})
		if(tooltipWrapp.is(".active")){
			tooltipWrapp.removeClass("active").find(".tooltip").slideUp(200);
		}
		else{
			tooltipWrapp.addClass("active").find(".tooltip").slideDown(200);
			tooltipWrapp.find(".tooltip_close").click(function(e){
				e.stopPropagation(); tooltipWrapp.removeClass("active").find(".tooltip").slideUp(100);
			});
			$(document).click(function(){
				tooltipWrapp.removeClass("active").find(".tooltip").slideUp(100);
			});
		}
	});

	function equalTizerHeight(){
		if($('.tizers_block_detail .item_block').length){
			$('.tizers_block_detail .item_block').each(function() {
				var th=$(this).find('.text'),
					img=$(this).find('.image'),
					h = th.height(),
					p = 26;
				if(img.length){
					if(th.height()<img.height()){
						if((p = Math.floor((img.height() - th.height()) / 2)) < 0){
							p = 0;
						}
						th.css('padding-top', p + 'px');
					}
				}
			});
		}
	}
	equalTizerHeight();
	BX.addCustomEvent('onWindowResize', function(eventdata) {
		try{
			ignoreResize.push(true);
			equalTizerHeight();
		}
		catch(e){}
		finally{
			ignoreResize.pop();
		}
	});	
})
$('.set_block').ready(function(){
	$('.set_block ').equalize({children: '.item:not(".r") .cost', reset: true});
	$('.set_block').equalize({children: '.item .item-title', reset: true});
	$('.set_block').equalize({children: '.item .item_info', reset: false});
});



(function (window) {

if (!!window.JCCatalogElement)
{
	return;
}

var BasketButton = function(params)
{
	BasketButton.superclass.constructor.apply(this, arguments);
	this.nameNode = BX.create('span', {
		props : { className : 'bx_medium bx_bt_button', id : this.id },
		style: typeof(params.style) === 'object' ? params.style : {},
		text: params.text
	});
	this.buttonNode = BX.create('span', {
		attrs: { className: params.ownerClass },
		children: [this.nameNode],
		events : this.contextEvents
	});
	if (BX.browser.IsIE())
	{
		this.buttonNode.setAttribute("hideFocus", "hidefocus");
	}
};
BX.extend(BasketButton, BX.PopupWindowButton);

window.JCCatalogElement = function (arParams)
{
	this.skuVisualParams = {
		SELECT:
		{
			TAG_BIND: 'select',
			TAG: 'option',
			ACTIVE_CLASS: 'active',
			HIDE_CLASS: 'hidden',
			EVENT: 'change',
		},
		LI:
		{
			TAG_BIND: 'li',
			TAG: 'li',
			ACTIVE_CLASS: 'active',
			HIDE_CLASS: 'missing',
			EVENT: 'click',
		}
	};
	this.productType = 0;

	this.config = {
		useCatalog: true,
		showQuantity: true,
		showPrice: true,
		showAbsent: true,
		showOldPrice: false,
		showPercent: false,
		showSkuProps: false,
		showOfferGroup: false,
		useCompare: false,
		mainPictureMode: 'IMG',
		showBasisPrice: false,
		basketAction: ['BUY'],
		showClosePopup: false
	};

	this.basketLinkURL = '';

	this.checkQuantity = false;
	this.maxQuantity = 0;
	this.SliderImages=0;
	this.defaultCount = 1;
	this.stepQuantity = 1;
	this.isDblQuantity = false;
	this.canBuy = true;
	this.currentBasisPrice = {};
	this.canSubscription = true;
	this.currentIsSet = false;
	this.updateViewedCount = false;

	this.precision = 6;
	this.precisionFactor = Math.pow(10,this.precision);

	this.listID = {
		main: ['PICT_ID', 'BIG_SLIDER_ID', 'BIG_IMG_CONT_ID'],
		stickers: ['STICKER_ID'],
		productSlider: ['SLIDER_CONT', 'SLIDER_LIST', 'SLIDER_LEFT', 'SLIDER_RIGHT'],
		offerSlider: ['SLIDER_CONT_OF_ID', 'SLIDER_LIST_OF_ID', 'SLIDER_LEFT_OF_ID', 'SLIDER_RIGHT_OF_ID'],
		offerSliderMobile: ['SLIDER_CONT_OFM_ID', 'SLIDER_LIST_OFM_ID', 'SLIDER_LEFT_OFM_ID', 'SLIDER_RIGHT_OFM_ID'],
		offers: ['TREE_ID', 'TREE_ITEM_ID', 'DISPLAY_PROP_DIV', 'DISPLAY_PROP_ARTICLE_DIV', 'OFFER_GROUP'],
		quantity: ['QUANTITY_ID', 'QUANTITY_UP_ID', 'QUANTITY_DOWN_ID', 'QUANTITY_MEASURE', 'QUANTITY_LIMIT', 'BASIS_PRICE'],
		price: ['PRICE_ID'],
		oldPrice: ['OLD_PRICE_ID', 'DISCOUNT_VALUE_ID'],
		discountPerc: ['DISCOUNT_PERC_ID'],
		basket: ['BASKET_PROP_DIV', 'BUY_ID', 'BASKET_LINK', 'ADD_BASKET_ID', 'BASKET_ACTIONS_ID', 'NOT_AVAILABLE_MESS', 'SUBSCRIBE_ID', 'SUBSCRIBED_ID'],
		magnifier: ['MAGNIFIER_ID', 'MAGNIFIER_AREA_ID'],
		compare: ['COMPARE_LINK_ID']
	};

	this.visualPostfix = {
		// main pict
		PICT_ID: '_pict',
		BIG_SLIDER_ID: '_big_slider',
		BIG_IMG_CONT_ID: '_bigimg_cont',
		// stickers
		STICKER_ID: '_sticker',
		// product pict slider
		SLIDER_CONT: '_slider_cont',
		SLIDER_LIST: '_slider_list',
		SLIDER_LEFT: '_slider_left',
		SLIDER_RIGHT: '_slider_right',
		// offers sliders
		SLIDER_CONT_OF_ID: '_slider_cont_',
		SLIDER_LIST_OF_ID: '_slider_list_',
		SLIDER_LEFT_OF_ID: '_slider_left_',
		SLIDER_RIGHT_OF_ID: '_slider_right_',
		// offers sliders mobile
		SLIDER_CONT_OFM_ID: '_sliderm_cont_',
		SLIDER_LIST_OFM_ID: '_sliderm_list_',
		SLIDER_LEFT_OFM_ID: '_sliderm_left_',
		SLIDER_RIGHT_OFM_ID: '_sliderm_right_',
		// offers
		TREE_ID: '_skudiv',
		TREE_ITEM_ID: '_prop_',
		DISPLAY_PROP_DIV: '_sku_prop',
		DISPLAY_PROP_ARTICLE_DIV: '_sku_article_prop',
		// quantity
		QUANTITY_ID: '_quantity',
		QUANTITY_UP_ID: '_quant_up',
		QUANTITY_DOWN_ID: '_quant_down',
		QUANTITY_MEASURE: '_quant_measure',
		QUANTITY_LIMIT: '_quant_limit',
		BASIS_PRICE: '_basis_price',
		// price and discount
		PRICE_ID: '_price',
		OLD_PRICE_ID: '_old_price',
		DISCOUNT_VALUE_ID: '_price_discount',
		DISCOUNT_PERC_ID: '_dsc_pict',
		// basket
		BASKET_PROP_DIV: '_basket_prop',
		BUY_ID: '_buy_link',
		BASKET_LINK: '_basket_link',
		ADD_BASKET_ID: '_add_basket_link',
		BASKET_ACTIONS_ID: '_basket_actions',
		NOT_AVAILABLE_MESS: '_not_avail',
		SUBSCRIBE_ID: '_subscribe_div',
		SUBSCRIBED_ID: '_subscribed_div',
		// magnifier
		MAGNIFIER_ID: '_magnifier',
		MAGNIFIER_AREA_ID: '_magnifier_area',
		// offer groups
		OFFER_GROUP: '_set_group_',
		// compare
		COMPARE_LINK_ID: '_compare_link'
	};

	this.visual = {};

	this.basketMode = '';
	this.product = {
		checkQuantity: false,
		maxQuantity: 0,
		stepQuantity: 1,
		startQuantity: 1,
		isDblQuantity: false,
		canBuy: true,
		canSubscription: true,
		name: '',
		pict: {},
		id: 0,
		addUrl: '',
		buyUrl: '',
		slider: {},
		sliderCount: 0,
		useSlider: false,
		sliderPict: []
	};
	this.mess = {};

	this.basketData = {
		useProps: false,
		emptyProps: false,
		quantity: 'quantity',
		props: 'prop',
		basketUrl: '',
		sku_props: '',
		sku_props_var: 'basket_props',
		add_url: '',
		buy_url: ''
	};
	this.compareData = {
		compareUrl: '',
		comparePath: ''
	};

	this.defaultPict = {
		preview: null,
		detail: null
	};

	this.offers = [];
	this.offerNum = 0;
	this.treeProps = [];
	this.obTreeRows = [];
	this.showCount = [];
	this.showStart = [];
	this.selectedValues = {};
	this.sliders = [];

	this.obProduct = null;
	this.obQuantity = null;
	this.obQuantityUp = null;
	this.obQuantityDown = null;
	this.obBasisPrice = null;
	this.obPict = null;
	this.obPictAligner = null;
	this.obPrice = {
		price: null,
		full: null,
		discount: null,
		percent: null
	};
	this.obTree = null;
	this.obBuyBtn = null;
	this.obBasketBtn = null;
	this.obAddToBasketBtn = null;
	this.obBasketActions = null;
	this.obNotAvail = null;
	this.obSkuProps = null;
	this.obSlider = null;
	this.obMeasure = null;
	this.obQuantityLimit = {
		all: null,
		value: null
	};
	this.obCompare = null;

	this.viewedCounter = {
		path: '/bitrix/components/bitrix/catalog.element/ajax.php',
		params: {
			AJAX: 'Y',
			SITE_ID: '',
			PRODUCT_ID: 0,
			PARENT_ID: 0
		}
	};

	this.currentImg = {
		src: '',
		width: 0,
		height: 0,
		screenWidth: 0,
		screenHeight: 0,
		screenOffsetX: 0,
		screenOffsetY: 0,
		scale: 1
	};
	this.currentBigImg = {
		src: '',
	}

	this.obPopupWin = null;
	this.basketUrl = '';
	this.basketParams = {};

	this.obPopupPict = null;
	this.magnify = {
		obMagnifier: null,
		obMagnifyPict: null,
		obMagnifyArea: null,
		obBigImg: null,
		obBigSlider: null,
		magnifyShow: false,
		areaParams : {
			width: 100,
			height: 130,
			left: 0,
			top: 0,
			scaleFactor: 1,
			globalLeft: 0,
			globalTop: 0,
			globalRight: 0,
			globalBottom: 0
		},
		magnifierParams: {
			top: 0,
			left: 0,
			width: 0,
			height: 0,
			ratioX: 10,
			ratioY: 13,
			defaultScale: 1
		},
		magnifyPictParams: {
			marginTop: 0,
			marginLeft: 0,
			width: 0,
			height: 0
		}
	};

	this.treeRowShowSize = 5;
	this.treeEnableArrow = { display: '', cursor: 'pointer', opacity: 1 };
	this.treeDisableArrow = { display: '', cursor: 'default', opacity: 0.2 };
	this.sliderRowShowSize = 5;
	this.sliderEnableArrow = { display: '', cursor: 'pointer', opacity: 1 };
	this.sliderDisableArrow = { display: '', cursor: 'default', opacity: 0.2 };

	this.errorCode = 0;
	if (typeof arParams === 'object')
	{
		this.params = arParams;
		this.initConfig();

		if (!!this.params.MESS)
		{
			this.mess = this.params.MESS;
		}
		switch (this.productType)
		{
			case 0:// no catalog
			case 1://product
			case 2://set
				this.initProductData();
				break;
			case 3://sku
				this.initOffersData();
				break;
			default:
				this.errorCode = -1;
		}

		this.initBasketData();
		this.initCompareData();
	}
	if (0 === this.errorCode)
	{
		BX.ready(BX.delegate(this.Init,this));
	}
	this.params = {};
};

window.JCCatalogElement.prototype.Init = function()
{
	var i = 0,
		j = 0,
		strPrefix = '',
		SliderImgs = null,
		TreeItems = null;

	this.obProduct = BX(this.visual.ID);
	if (!this.obProduct)
	{
		this.errorCode = -1;
	}
	this.obPict = BX(this.visual.PICT_ID);
	if (!this.obPict)
	{
		this.errorCode = -2;
	}
	else
	{
		this.obPictAligner = this.obPict.parentNode;
	}

	if (this.config.showPrice)
	{
		this.obPrice.price = BX(this.visual.PRICE_ID);
		if (!this.obPrice.price && this.config.useCatalog)
		{
			this.errorCode = -16;
		}
		else
		{
			if (this.config.showOldPrice)
			{
				this.obPrice.full = BX(this.visual.OLD_PRICE_ID);
				this.obPrice.discount = BX(this.visual.DISCOUNT_VALUE_ID);
				/*if (!this.obPrice.full || !this.obPrice.discount)
				{
					this.config.showOldPrice = false;
				}*/
			}
			if (this.config.showPercent)
			{
				this.obPrice.percent = BX(this.visual.DISCOUNT_PERC_ID);
				/*if (!this.obPrice.percent)
				{
					this.config.showPercent = false;
				}*/
			}
		}
		this.obBasketActions = BX(this.visual.BASKET_ACTIONS_ID);
		if (!!this.obBasketActions)
		{
			if (BX.util.in_array('BUY', this.config.basketAction))
			{
				this.obBuyBtn = BX(this.visual.BUY_ID);
			}
			if (BX.util.in_array('ADD', this.config.basketAction))
			{
				this.obAddToBasketBtn = BX(this.visual.BUY_ID);
			}
			if (!!this.visual.BASKET_LINK)
			{
				this.obBasketBtn = BX(this.visual.BASKET_LINK);
			}

		}
		this.obNotAvail = BX(this.visual.NOT_AVAILABLE_MESS);
	}

	if (this.config.showQuantity)
	{
		this.obQuantity = BX(this.visual.QUANTITY_ID);
		if (!!this.visual.QUANTITY_UP_ID)
		{
			this.obQuantityUp = BX(this.visual.QUANTITY_UP_ID);
		}
		if (!!this.visual.QUANTITY_DOWN_ID)
		{
			this.obQuantityDown = BX(this.visual.QUANTITY_DOWN_ID);
		}
		if (this.config.showBasisPrice)
		{
			this.obBasisPrice = BX(this.visual.BASIS_PRICE);
		}
	}
	if (3 === this.productType)
	{
		if (!!this.visual.TREE_ID)
		{
			this.obTree = BX(this.visual.TREE_ID);
			if (!this.obTree)
			{
				this.errorCode = -256;
			}
			strPrefix = this.visual.TREE_ITEM_ID;
			for (i = 0; i < this.treeProps.length; i++)
			{
				this.obTreeRows[i] = {
					LEFT: BX(strPrefix+this.treeProps[i].ID+'_left'),
					RIGHT: BX(strPrefix+this.treeProps[i].ID+'_right'),
					LIST: BX(strPrefix+this.treeProps[i].ID+'_list'),
					CONT: BX(strPrefix+this.treeProps[i].ID+'_cont')
				};
				if (!this.obTreeRows[i].LIST || !this.obTreeRows[i].CONT)
				{
					this.errorCode = -512;
					break;
				}
			}
		}
		if (!!this.visual.QUANTITY_MEASURE)
		{
			this.obMeasure = BX(this.visual.QUANTITY_MEASURE);
		}
		if (!!this.visual.QUANTITY_LIMIT)
		{
			this.obQuantityLimit.all = BX(this.visual.QUANTITY_LIMIT);
			if (!!this.obQuantityLimit.all)
			{
				this.obQuantityLimit.value = BX.findChild(this.obQuantityLimit.all, {tagName: 'span'}, false, false);
				if (!this.obQuantityLimit.value)
				{
					this.obQuantityLimit.all = null;
				}
			}
		}
	}

	if (this.config.showSkuProps)
	{
		if (!!this.visual.DISPLAY_PROP_DIV)
		{
			this.obSkuProps = BX(this.visual.DISPLAY_PROP_DIV);
		}
		if (!!this.visual.DISPLAY_PROP_ARTICLE_DIV)
		{
			this.obSkuArticleProps = BX(this.visual.DISPLAY_PROP_ARTICLE_DIV);
		}

	}

	if (this.config.useCompare)
	{
		this.obCompare = BX(this.visual.COMPARE_LINK_ID);
	}
	if (0 === this.errorCode)
	{

		if (this.config.showQuantity)
		{
			if (!!this.obQuantityUp)
			{
				BX.bind(this.obQuantityUp, 'click', BX.delegate(this.QuantityUp, this));
			}
			if (!!this.obQuantityDown)
			{
				BX.bind(this.obQuantityDown, 'click', BX.delegate(this.QuantityDown, this));
			}
			if (!!this.obQuantity)
			{
				BX.bind(this.obQuantity, 'change', BX.delegate(this.QuantityChange, this));
			}
		}
		switch (this.productType)
		{
			case 0://no catalog
			case 1://product
			case 2://set
				if (this.product.useSlider)
				{
					this.product.slider = {
						COUNT: this.product.sliderCount,
						ID: this.visual.SLIDER_CONT,
						CONT: BX(this.visual.SLIDER_CONT),
						LIST: BX(this.visual.SLIDER_LIST),
						LEFT: BX(this.visual.SLIDER_LEFT),
						RIGHT: BX(this.visual.SLIDER_RIGHT),
						START: 0
					};
					SliderImgs = BX.findChildren(this.product.slider.LIST, {tagName: 'li'}, true);
					if (!!SliderImgs && 0 < SliderImgs.length)
					{
						for (j = 0; j < SliderImgs.length; j++)
						{
							BX.bind(SliderImgs[j], 'click', BX.delegate(this.ProductSelectSliderImg, this));
						}
					}
					if (!!this.product.slider.LEFT)
					{
						BX.bind(this.product.slider.LEFT, 'click', BX.delegate(this.ProductSliderRowLeft, this));
						BX.adjust(this.product.slider.LEFT, { style: this.sliderDisableArrow } );

					}
					if (!!this.product.slider.RIGHT)
					{
						BX.bind(this.product.slider.RIGHT, 'click', BX.delegate(this.ProductSliderRowRight, this));
						BX.adjust(this.product.slider.RIGHT, { style: this.sliderEnableArrow } );
					}
					this.setCurrentImg(this.product.sliderPict[0], true);
				}
				break;
			case 3://sku
				for(var key in this.skuVisualParams){
					var TreeItems = BX.findChildren(this.obTree, {tagName: this.skuVisualParams[key].TAG_BIND}, true);
					if (!!TreeItems && 0 < TreeItems.length){
						for (i = 0; i < TreeItems.length; i++){
							$(TreeItems[i]).on(this.skuVisualParams[key].EVENT, BX.delegate(this.SelectOfferProp, this));
							//BX.bind(TreeItems[i], this.skuVisualParams[key].EVENT, BX.delegate(this.SelectOfferProp, this));
						}
					}
				}
				for (i = 0; i < this.offers.length; i++)
				{
					this.offers[i].SLIDER_COUNT = parseInt(this.offers[i].SLIDER_COUNT, 10);
					if (isNaN(this.offers[i].SLIDER_COUNT))
					{
						this.offers[i].SLIDER_COUNT = 0;
					}
					if (0 === this.offers[i].SLIDER_COUNT)
					{
						this.sliders[i] = {
							COUNT: this.offers[i].SLIDER_COUNT,
							ID: ''
						};
					}
					else
					{
						for (j = 0; j < this.offers[i].SLIDER.length; j++)
						{
							this.offers[i].SLIDER[j].WIDTH = parseInt(this.offers[i].SLIDER[j].WIDTH, 10);
							this.offers[i].SLIDER[j].HEIGHT = parseInt(this.offers[i].SLIDER[j].HEIGHT, 10);
						}
						this.sliders[i] = {
							COUNT: this.offers[i].SLIDER_COUNT,
							OFFER_ID: this.offers[i].ID,
							ID: this.visual.SLIDER_CONT_OF_ID+this.offers[i].ID,
							CONT: BX(this.visual.SLIDER_CONT_OF_ID+this.offers[i].ID),
							LIST: BX(this.visual.SLIDER_LIST_OF_ID+this.offers[i].ID),
							CONT_M: BX(this.visual.SLIDER_CONT_OFM_ID+this.offers[i].ID),
							LIST_M: BX(this.visual.SLIDER_LIST_OFM_ID+this.offers[i].ID),
							LEFT: BX(this.visual.SLIDER_LEFT_OF_ID+this.offers[i].ID),
							RIGHT: BX(this.visual.SLIDER_RIGHT_OF_ID+this.offers[i].ID),
							START: 0
						};
						SliderImgs = BX.findChildren(this.sliders[i].LIST, {tagName: 'li'}, true);
						if (!!SliderImgs && 0 < SliderImgs.length)
						{
							for (j = 0; j < SliderImgs.length; j++)
							{
								BX.bind(SliderImgs[j], 'click', BX.delegate(this.SelectSliderImg, this));
							}
						}
						if (!!this.sliders[i].LEFT)
						{
							BX.bind(this.sliders[i].LEFT, 'click', BX.delegate(this.SliderRowLeft, this));
						}
						if (!!this.sliders[i].RIGHT)
						{
							BX.bind(this.sliders[i].RIGHT, 'click', BX.delegate(this.SliderRowRight, this));
						}
					}
				}
				this.SetCurrent();

				break;
		}

		if (!!this.obBuyBtn)
		{
			BX.bind(this.obBuyBtn, 'click', BX.proxy(this.BuyBasket, this));
		}
		if (!!this.obAddToBasketBtn)
		{
			BX.bind(this.obAddToBasketBtn, 'click', BX.proxy(this.Add2Basket, this));
		}
		if (!!this.obCompare)
		{
			BX.bind(this.obCompare, 'click', BX.proxy(this.Compare, this));
		}

		this.setMainPictHandler();
		setTimeout(function(){
			$('.offers_img.wof').css('opacity', 1);
		},400);
	}
};

window.JCCatalogElement.prototype.initConfig = function()
{
	this.productType = parseInt(this.params.PRODUCT_TYPE, 10);
	if (!!this.params.CONFIG && typeof(this.params.CONFIG) === 'object')
	{

		if (this.params.CONFIG.USE_CATALOG !== 'undefined' && BX.type.isBoolean(this.params.CONFIG.USE_CATALOG))
		{
			this.config.useCatalog = this.params.CONFIG.USE_CATALOG;
		}
		this.config.showQuantity = !!this.params.CONFIG.SHOW_QUANTITY;
		this.config.showPrice = !!this.params.CONFIG.SHOW_PRICE;
		this.config.showPercent = !!this.params.CONFIG.SHOW_DISCOUNT_PERCENT;
		this.config.showOldPrice = !!this.params.CONFIG.SHOW_OLD_PRICE;
		this.config.showSkuProps = !!this.params.CONFIG.SHOW_SKU_PROPS;
		this.config.showOfferGroup = !!this.params.CONFIG.OFFER_GROUP;
		this.config.useCompare = !!this.params.CONFIG.DISPLAY_COMPARE;
		if (!!this.params.CONFIG.MAIN_PICTURE_MODE)
		{
			this.config.mainPictureMode = this.params.CONFIG.MAIN_PICTURE_MODE;
		}
		this.config.showBasisPrice = !!this.params.CONFIG.SHOW_BASIS_PRICE;
		if (!!this.params.CONFIG.ADD_TO_BASKET_ACTION)
		{
			this.config.basketAction = this.params.CONFIG.ADD_TO_BASKET_ACTION;
		}
		this.config.showClosePopup = !!this.params.CONFIG.SHOW_CLOSE_POPUP;
	}
	else
	{
		// old version
		if (this.params.USE_CATALOG !== 'undefined' && BX.type.isBoolean(this.params.USE_CATALOG))
		{
			this.config.useCatalog = this.params.USE_CATALOG;
		}
		this.config.showQuantity = !!this.params.SHOW_QUANTITY;
		this.config.showPrice = !!this.params.SHOW_PRICE;
		this.config.showPercent = !!this.params.SHOW_DISCOUNT_PERCENT;
		this.config.showOldPrice = !!this.params.SHOW_OLD_PRICE;
		this.config.showSkuProps = !!this.params.SHOW_SKU_PROPS;
		this.config.showOfferGroup = !!this.params.OFFER_GROUP;
		this.config.useCompare = !!this.params.DISPLAY_COMPARE;
		if (!!this.params.MAIN_PICTURE_MODE)
		{
			this.config.mainPictureMode = this.params.MAIN_PICTURE_MODE;
		}
		this.config.showBasisPrice = !!this.params.SHOW_BASIS_PRICE;
		if (!!this.params.ADD_TO_BASKET_ACTION)
		{
			this.config.basketAction = this.params.ADD_TO_BASKET_ACTION;
		}
		this.config.showClosePopup = !!this.params.SHOW_CLOSE_POPUP;
	}

	if (!this.params.VISUAL || typeof(this.params.VISUAL) !== 'object' || !this.params.VISUAL.ID)
	{
		this.errorCode = -1;
		return;
	}
	this.visual.ID = this.params.VISUAL.ID;
	this.basketLinkURL = this.params.BASKET.BASKET_URL;
	this.defaultCount = this.params.DEFAULT_COUNT;
	this.storeQuanity = BX(this.params.STORE_QUANTITY);
	this.initVisualParams('main');
	if (this.config.showQuantity)
	{
		this.initVisualParams('quantity');
	}
	if (this.config.showPrice)
	{
		this.initVisualParams('price');
	}
	if (this.config.showOldPrice)
	{
		this.initVisualParams('oldPrice');
	}
	if (this.config.showPercent)
	{
		this.initVisualParams('discountPerc');
	}
	this.initVisualParams('basket');
	if (this.config.mainPictureMode === 'MAGNIFIER')
	{
		this.initVisualParams('magnifier');
	}
	if (this.config.useCompare)
	{
		this.initVisualParams('compare');
	}
};

window.JCCatalogElement.prototype.initVisualParams = function(ID)
{
	var i = 0,
		key = '';

	if (!this.listID[ID])
	{
		this.errorCode = -1;
		return;
	}
	for (i = 0; i < this.listID[ID].length; i++)
	{
		key = this.listID[ID][i];
		this.visual[key] = (!!this.params.VISUAL[key] ? this.params.VISUAL[key] : this.visual.ID+this.visualPostfix[key]);
	}
};

window.JCCatalogElement.prototype.initProductData = function()
{
	var j = 0;
	this.initVisualParams('productSlider');
	if (!!this.params.PRODUCT && 'object' === typeof(this.params.PRODUCT))
	{
		if (this.config.showQuantity)
		{
			this.product.checkQuantity = this.params.PRODUCT.CHECK_QUANTITY;
			this.product.isDblQuantity = this.params.PRODUCT.QUANTITY_FLOAT;
			if (this.product.checkQuantity)
			{
				this.product.maxQuantity = (this.product.isDblQuantity ? parseFloat(this.params.PRODUCT.MAX_QUANTITY) : parseInt(this.params.PRODUCT.MAX_QUANTITY, 10));
			}
			this.product.stepQuantity = (this.product.isDblQuantity ? parseFloat(this.params.PRODUCT.STEP_QUANTITY) : parseInt(this.params.PRODUCT.STEP_QUANTITY, 10));

			this.checkQuantity = this.product.checkQuantity;
			this.isDblQuantity = this.product.isDblQuantity;
			this.maxQuantity = this.product.maxQuantity;
			this.stepQuantity = this.product.stepQuantity;
			if (this.isDblQuantity)
			{
				this.stepQuantity = Math.round(this.stepQuantity*this.precisionFactor)/this.precisionFactor;
			}
		}
		this.product.canBuy = this.params.PRODUCT.CAN_BUY;
		this.product.canSubscription = this.params.PRODUCT.SUBSCRIPTION;
		if (this.config.showPrice)
		{
			this.currentBasisPrice = this.params.PRODUCT.BASIS_PRICE;
		}

		this.canBuy = this.product.canBuy;
		this.canSubscription = this.product.canSubscription;

		this.product.name = this.params.PRODUCT.NAME;
		this.product.pict = this.params.PRODUCT.PICT;
		this.product.id = this.params.PRODUCT.ID;

		if (!!this.params.PRODUCT.ADD_URL)
		{
			this.product.addUrl = this.params.PRODUCT.ADD_URL;
		}
		if (!!this.params.PRODUCT.BUY_URL)
		{
			this.product.buyUrl = this.params.PRODUCT.BUY_URL;
		}

		if (!!this.params.PRODUCT.SLIDER_COUNT)
		{
			this.product.sliderCount = parseInt(this.params.PRODUCT.SLIDER_COUNT, 10);
			if (isNaN(this.product.sliderCount))
			{
				this.product.sliderCount = 0;
			}
			if (0 < this.product.sliderCount && !!this.params.PRODUCT.SLIDER.length && 0 < this.params.PRODUCT.SLIDER.length)
			{
				for (j = 0; j < this.params.PRODUCT.SLIDER.length; j++)
				{
					this.product.useSlider = true;
					this.params.PRODUCT.SLIDER[j].WIDTH = parseInt(this.params.PRODUCT.SLIDER[j].WIDTH, 10);
					this.params.PRODUCT.SLIDER[j].HEIGHT = parseInt(this.params.PRODUCT.SLIDER[j].HEIGHT, 10);
				}
				this.product.sliderPict = this.params.PRODUCT.SLIDER;
				this.setCurrentImg(this.product.sliderPict[0], false);
			}
		}
		this.currentIsSet = true;
	}
	else
	{
		this.errorCode = -1;
	}
};

window.JCCatalogElement.prototype.initOffersData = function()
{
	this.initVisualParams('offerSlider');
	this.initVisualParams('offerSliderMobile');
	this.initVisualParams('offers');
	if (!!this.params.OFFERS && BX.type.isArray(this.params.OFFERS))
	{
		this.offers = this.params.OFFERS;
		this.offerNum = 0;
		if (!!this.params.OFFER_SELECTED)
		{
			// this.offerNum = parseInt(this.params.OFFER_SELECTED, 10);
			if('offers' in this)
			{
				if(this.offers.length)
				{
					var objUrl = parseUrlQuery(),
						sku_params = this.params.SKU_DETAIL_ID,
						sku_id = 0;
					if('oid' in objUrl)
						sku_id = objUrl.oid;
					if(sku_id)
					{
						for(var i in this.offers)
						{
							if(this.offers[i].ID == sku_id)
								this.offerNum = parseInt(i, 10);

						}
					}
				}
			}
		}
		if (isNaN(this.offerNum))
		{
			this.offerNum = 0;
		}
		if (!!this.params.TREE_PROPS)
		{
			this.treeProps = this.params.TREE_PROPS;
		}
		if (!!this.params.DEFAULT_PICTURE)
		{
			this.defaultPict.preview = this.params.DEFAULT_PICTURE.PREVIEW_PICTIRE;
			this.defaultPict.detail = this.params.DEFAULT_PICTURE.DETAIL_PICTURE;
		}
		if (!!this.params.PRODUCT && typeof(this.params.PRODUCT) === 'object')
		{
			this.product.id = parseInt(this.params.PRODUCT.ID, 10);
			this.product.name = this.params.PRODUCT.NAME;
		}
	}
	else
	{
		this.errorCode = -1;
	}
};

window.JCCatalogElement.prototype.initBasketData = function()
{
	if (!!this.params.BASKET && 'object' === typeof(this.params.BASKET))
	{
		if (1 === this.productType || 2 === this.productType)
		{
			this.basketData.useProps = !!this.params.BASKET.ADD_PROPS;
			this.basketData.emptyProps = !!this.params.BASKET.EMPTY_PROPS;
		}

		if (!!this.params.BASKET.QUANTITY)
		{
			this.basketData.quantity = this.params.BASKET.QUANTITY;
		}
		if (!!this.params.BASKET.PROPS)
		{
			this.basketData.props = this.params.BASKET.PROPS;
		}
		if (!!this.params.BASKET.BASKET_URL)
		{
			this.basketData.basketUrl = this.params.BASKET.BASKET_URL;
		}
		if (3 === this.productType)
		{
			if (!!this.params.BASKET.SKU_PROPS)
			{
				this.basketData.sku_props = this.params.BASKET.SKU_PROPS;
			}
		}
		if (!!this.params.BASKET.ADD_URL_TEMPLATE)
		{
			this.basketData.add_url = this.params.BASKET.ADD_URL_TEMPLATE;
		}
		if (!!this.params.BASKET.BUY_URL_TEMPLATE)
		{
			this.basketData.buy_url = this.params.BASKET.BUY_URL_TEMPLATE;
		}
		if (this.basketData.add_url === '' && this.basketData.buy_url === '')
		{
			this.errorCode = -1024;
		}
	}
};

window.JCCatalogElement.prototype.initCompareData = function()
{
	if (this.config.useCompare)
	{
		if (!!this.params.COMPARE && typeof(this.params.COMPARE) === 'object')
		{
			if (!!this.params.COMPARE.COMPARE_PATH)
			{
				this.compareData.comparePath = this.params.COMPARE.COMPARE_PATH;
			}
			if (!!this.params.COMPARE.COMPARE_URL_TEMPLATE_DEL)
			{
				this.compareData.compareUrlDel = this.params.COMPARE.COMPARE_URL_TEMPLATE_DEL;
			}
			if (!!this.params.COMPARE.COMPARE_URL_TEMPLATE)
			{
				this.compareData.compareUrl = this.params.COMPARE.COMPARE_URL_TEMPLATE;
			}
			else
			{
				this.config.useCompare = false;
			}
		}
		else
		{
			this.config.useCompare = false;
		}
	}
};

window.JCCatalogElement.prototype.setMainPictHandler = function()
{
	switch (this.config.mainPictureMode)
	{
		case 'GALLERY':
			break;
		case 'MAGNIFIER':
			$(this.obPict).addClass('zoom_picture');
			break;
		case 'POPUP':
			$(this.obPict).parent().addClass('fancy_offer');
			break;
		default:
			break;
	}
};

window.JCCatalogElement.prototype.setCurrentImg = function(img, showImage)
{
	showImage = !!showImage;
	if('SMALL' in img){
		this.currentImg.src = img.SMALL.src;
	}else if ('SRC' in img) {
		this.currentImg.src = img.SRC
	};
	if('BIG' in img){
		this.currentBigImg.src = img.BIG.src;
	}
	if('WIDTH' in img){
		this.currentImg.width = img.WIDTH;
	}
	if('HEIGHT' in img){
		this.currentImg.height = img.HEIGHT;
	}
	if (showImage && !!this.obPict)
	{
		if (this.config.mainPictureMode === 'MAGNIFIER')
		{
			$(this.obPict).attr('data-large',this.currentBigImg.src);
		}
		if('src' in this.currentImg){
			if (this.currentImg.src){
				BX.adjust(this.obPict, { props: { src: this.currentImg.src } });
			}
		}
		if('src' in this.currentBigImg){
			if (this.currentBigImg.src){
				if(this.config.mainPictureMode === 'POPUP'){
					$(this.obPict).parent().attr('href',this.currentBigImg.src);
				}
				$(this.obPict).parent().attr('title',img.TITLE);
				$(this.obPict).parent().attr('alt',img.ALT);
				$(this.obPict).attr('title',img.TITLE);
				$(this.obPict).attr('alt',img.ALT);
			}
		}

	}
};

window.JCCatalogElement.prototype.scaleImg = function(src, dest)
{
	var
		scaleX,
		scaleY,
		scale,
		result = {};

	if (dest.width >= src.width && dest.height >= src.height)
	{
		result.width = src.width;
		result.height = src.height;
	}
	else
	{
		scaleX = dest.width/src.width;
		scaleY = dest.height/src.height;
		scale =  Math.min(scaleX, scaleY);
		result.width = Math.max(1, parseInt(scale*src.width , 10));
		result.height = Math.max(1, parseInt(scale*src.height , 10));
	}
	return result;
};

window.JCCatalogElement.prototype.showMagnifier = function(e)
{
	if (!this.magnify.magnifyShow)
	{
		this.calcMagnifierParams();
		this.calcMagnifyAreaSize();
		this.calcMagnifyAreaPos(e);
		this.calcMagnifyPictSize();
		this.calcMagnifyPictPos();
		this.setMagnifyAreaParams(true);
		this.setMagnifyPictParams(true);
		this.setMagnifierParams(true);
		BX.bind(document, 'mousemove', BX.proxy(this.moveMagnifierArea, this));
	}
};

window.JCCatalogElement.prototype.hideMagnifier = function()
{
	if (!this.magnify.magnifyShow)
	{
		if (!!this.magnify.obMagnifier)
		{
			BX.adjust(this.magnify.obMagnifier, { style: { display: 'none' } });
		}
		if (!!this.magnify.obMagnifyArea)
		{
			BX.adjust(this.magnify.obMagnifyArea, { style: { display: 'none' } });
		}
		BX.unbind(document, 'mousemove', BX.proxy(this.moveMagnifierArea, this));
	}
};

window.JCCatalogElement.prototype.moveMagnifierArea = function(e)
{
	var
		currentPos = {
			X: 0,
			Y: 0
		},
		posBigImg = BX.pos(this.obPict),
		intersect = {},
		params = {},
		paramsPict = {};

	currentPos = this.inRect(e, posBigImg);
	if (this.inBound(posBigImg, currentPos))
	{
		intersect = this.intersectArea(currentPos, posBigImg);
		switch (intersect.X)
		{
			case -1:
				this.magnify.areaParams.left = this.currentImg.screenOffsetX;
				break;
			case 0:
				this.magnify.areaParams.left = this.currentImg.screenOffsetX + currentPos.X - (this.magnify.areaParams.width >>> 1);
				break;
			case 1:
				this.magnify.areaParams.left = this.currentImg.screenOffsetX + posBigImg.width - this.magnify.areaParams.width;
				break;
		}
		switch (intersect.Y)
		{
			case -1:
				this.magnify.areaParams.top = 0;
				break;
			case 0:
				this.magnify.areaParams.top = currentPos.Y - (this.magnify.areaParams.height >>> 1);
				break;
			case 1:
				this.magnify.areaParams.top = posBigImg.height - this.magnify.areaParams.height;
				break;
		}
		this.magnify.magnifyPictParams.marginLeft = -parseInt(((this.magnify.areaParams.left-this.currentImg.screenOffsetX)*this.currentImg.scale), 10);
		this.magnify.magnifyPictParams.marginTop = -parseInt(((this.magnify.areaParams.top)*this.currentImg.scale), 10);
		params.left = this.magnify.areaParams.left+'px';
		params.top = this.magnify.areaParams.top+'px';
		BX.adjust(this.magnify.obMagnifyArea, { style: params });
		paramsPict.marginLeft = this.magnify.magnifyPictParams.marginLeft+'px';
		paramsPict.marginTop = this.magnify.magnifyPictParams.marginTop+'px';
		BX.adjust(this.magnify.obMagnifyPict, { style: paramsPict });
	}
	else
	{
		this.outMagnifierArea();
		this.hideMagnifier();
	}
};

window.JCCatalogElement.prototype.onMagnifierArea = function()
{
	this.magnify.magnifyShow = true;
};

window.JCCatalogElement.prototype.outMagnifierArea = function()
{
	this.magnify.magnifyShow = false;
};

window.JCCatalogElement.prototype.calcMagnifierParams = function()
{
	if (!!this.magnify.obBigImg)
	{
		var pos = BX.pos(this.magnify.obBigImg, true);

		this.magnify.magnifierParams.width = pos.width;
		this.magnify.magnifierParams.height = pos.height;
		this.magnify.magnifierParams.top = pos.top;
		this.magnify.magnifierParams.left = pos.left + pos.width + 2;
	}
};

window.JCCatalogElement.prototype.setMagnifierParams = function(show)
{
	if (!!this.magnify.obMagnifier)
	{
		show = !!show;
		var params = {
			top: this.magnify.magnifierParams.top+'px',
			left: this.magnify.magnifierParams.left+'px',
			width: this.magnify.magnifierParams.width+'px',
			height: this.magnify.magnifierParams.height+'px'
		};
		if (show)
		{
			params.display = '';
		}
		BX.adjust(this.magnify.obMagnifier, { style: params });
	}
};

window.JCCatalogElement.prototype.setMagnifyAreaParams = function(show)
{
	if (!!this.magnify.obMagnifier)
	{
		show = !!show;
		var params = {
			top: this.magnify.areaParams.top+'px',
			left: this.magnify.areaParams.left+'px',
			width: this.magnify.areaParams.width+'px',
			height: this.magnify.areaParams.height+'px'
		};
		if (show)
		{
			params.display = '';
		}
		BX.adjust(this.magnify.obMagnifyArea, { style: params });
	}
};

window.JCCatalogElement.prototype.calcMagnifyAreaPos = function(e)
{
	var currentPos,
		posBigImg,
		intersect;

	posBigImg = BX.pos(this.obPict);
	currentPos = this.inRect(e, posBigImg);
	if (this.inBound(posBigImg, currentPos))
	{
		intersect = this.intersectArea(currentPos, posBigImg);
		switch (intersect.X)
		{
			case -1:
				this.magnify.areaParams.left = this.currentImg.screenOffsetX;
				break;
			case 0:
				this.magnify.areaParams.left = this.currentImg.screenOffsetX + currentPos.X - (this.magnify.areaParams.width >>> 1);
				break;
			case 1:
				this.magnify.areaParams.left = this.currentImg.screenOffsetX + posBigImg.width - this.magnify.areaParams.width;
				break;
		}
		switch (intersect.Y)
		{
			case -1:
				this.magnify.areaParams.top = 0;
				break;
			case 0:
				this.magnify.areaParams.top = currentPos.Y - (this.magnify.areaParams.height >>> 1);
				break;
			case 1:
				this.magnify.areaParams.top = posBigImg.height - this.magnify.areaParams.height;
				break;
		}
	}
};

window.JCCatalogElement.prototype.inBound = function(rect, point)
{
	return ((0 <= point.Y && rect.height >= point.Y) && (0 <= point.X && rect.width >= point.X));
};

window.JCCatalogElement.prototype.inRect = function(e, rect)
{
	var wndSize = BX.GetWindowSize(),
		currentPos = {
			X: 0,
			Y: 0,
			globalX: 0,
			globalY: 0
		};

	currentPos.globalX = e.clientX + wndSize.scrollLeft;
	currentPos.X = currentPos.globalX - rect.left;
	currentPos.globalY = e.clientY + wndSize.scrollTop;
	currentPos.Y = currentPos.globalY - rect.top;
	return currentPos;
};

window.JCCatalogElement.prototype.intersectArea = function(currentPos, rect)
{
	var intersect = {
			X: 0,
			Y: 0
		},
		halfX = this.magnify.areaParams.width >>> 1,
		halfY = this.magnify.areaParams.height >>> 1;

	if (currentPos.X <= halfX)
	{
		intersect.X = -1;
	}
	else if (currentPos.X >= (rect.width - halfX))
	{
		intersect.X = 1;
	}
	else
	{
		intersect.X = 0;
	}
	if (currentPos.Y <= halfY)
	{
		intersect.Y = -1;
	}
	else if (currentPos.Y >= (rect.height - halfY))
	{
		intersect.Y = 1;
	}
	else
	{
		intersect.Y = 0;
	}

	return intersect;
};

window.JCCatalogElement.prototype.calcMagnifyAreaSize = function()
{
	var scaleX,
		scaleY,
		scale;

	if (
		this.magnify.magnifierParams.width < this.currentImg.width &&
			this.magnify.magnifierParams.height < this.currentImg.height
		)
	{
		scaleX = this.magnify.obBigImg.offsetWidth/this.currentImg.width;
		scaleY = this.magnify.obBigImg.offsetHeight/this.currentImg.height;
		scale =  Math.min(scaleX, scaleY);
		this.currentImg.scale = 1/scale;
		this.magnify.areaParams.width = Math.max(1, parseInt(scale*this.magnify.magnifierParams.width , 10));
		this.magnify.areaParams.height = Math.max(1, parseInt(scale*this.magnify.magnifierParams.height , 10));
		this.magnify.areaParams.scaleFactor = this.magnify.magnifierParams.defaultScale;
	}
	else
	{
		scaleX = this.obPict.offsetWidth/this.magnify.obBigImg.offsetWidth;
		scaleY = this.obPict.offsetHeight/this.magnify.obBigImg.offsetHeight;
		scale =  Math.min(scaleX, scaleY);
		this.currentImg.scale = 1/scale;
		this.magnify.areaParams.width = Math.max(1, parseInt(scale*this.magnify.magnifierParams.width , 10));
		this.magnify.areaParams.height = Math.max(1, parseInt(scale*this.magnify.magnifierParams.height , 10));

		scaleX = this.magnify.magnifierParams.width/this.currentImg.width;
		scaleY = this.magnify.magnifierParams.height/this.currentImg.height;
		scale = Math.max(scaleX, scaleY);
		this.magnify.areaParams.scaleFactor = scale;
	}
};

window.JCCatalogElement.prototype.calcMagnifyPictSize = function()
{
	this.magnify.magnifyPictParams.width = this.currentImg.width*this.magnify.areaParams.scaleFactor;
	this.magnify.magnifyPictParams.height = this.currentImg.height*this.magnify.areaParams.scaleFactor;
};

window.JCCatalogElement.prototype.calcMagnifyPictPos = function()
{
	this.magnify.magnifyPictParams.marginLeft = -parseInt(((this.magnify.areaParams.left-this.currentImg.screenOffsetX)*this.currentImg.scale), 10);
	this.magnify.magnifyPictParams.marginTop = -parseInt(((this.magnify.areaParams.top)*this.currentImg.scale), 10);
};

window.JCCatalogElement.prototype.setMagnifyPictParams = function(show)
{
	if (!!this.magnify.obMagnifier)
	{
		show = !!show;
		var params = {
			width: this.magnify.magnifyPictParams.width+'px',
			height: this.magnify.magnifyPictParams.height+'px',
			marginTop: this.magnify.magnifyPictParams.marginTop+'px',
			marginLeft: this.magnify.magnifyPictParams.marginLeft+'px'
		};
		if (show)
		{
			params.display = '';
		}
		BX.adjust(this.magnify.obMagnifyPict, { style: params, props: { src: this.currentImg.src } });
	}
};

window.JCCatalogElement.prototype.ProductSliderRowLeft = function()
{
	var target = BX.proxy_context;
	if (!!target)
	{
		if (this.sliderRowShowSize < this.product.slider.COUNT)
		{
			if (0 > this.product.slider.START)
			{
				this.product.slider.START++;
				BX.adjust(this.product.slider.LIST, { style: { marginLeft: this.product.slider.START*20+'%' }});
				BX.adjust(this.product.slider.RIGHT, { style: this.sliderEnableArrow });
			}

			if (0 <= this.product.slider.START)
			{
				BX.adjust(this.product.slider.LEFT, { style: this.sliderDisableArrow });
			}
		}
	}
};

window.JCCatalogElement.prototype.ProductSliderRowRight = function()
{
	var target = BX.proxy_context;
	if (!!target)
	{
		if (this.sliderRowShowSize < this.product.slider.COUNT)
		{
			if ((this.sliderRowShowSize - this.product.slider.START) < this.product.slider.COUNT)
			{
				this.product.slider.START--;
				BX.adjust(this.product.slider.LIST, { style: { marginLeft: this.product.slider.START*20+'%' }});
				BX.adjust(this.product.slider.LEFT, { style: this.sliderEnableArrow } );
			}

			if ((this.sliderRowShowSize - this.product.slider.START) >= this.product.slider.COUNT)
			{
				BX.adjust(this.product.slider.RIGHT, { style: this.sliderDisableArrow } );
			}
		}
	}
};

window.JCCatalogElement.prototype.ProductSelectSliderImg = function()
{
	var strValue = '',
		target = BX.proxy_context;
	if (!!target && target.hasAttribute('data-value'))
	{
		strValue = target.getAttribute('data-value');
		this.SetProductMainPict(strValue);
	}
};

window.JCCatalogElement.prototype.SetProductMainPict = function(intPict)
{
	var indexPict = -1,
		i = 0,
		j = 0,
		value = '',
		strValue = '',
		RowItems = null;
	if (0 < this.product.sliderCount)
	{
		for (j = 0; j < this.product.sliderPict.length; j++)
		{
			if (intPict === this.product.sliderPict[j].ID)
			{
				indexPict = j;
				break;
			}
		}
		if (-1 < indexPict)
		{
			if (!!this.product.sliderPict[indexPict])
			{
				this.setCurrentImg(this.product.sliderPict[indexPict], true);
			}
			RowItems = BX.findChildren(this.product.slider.LIST, {tagName: 'li'}, false);
			if (!!RowItems && 0 < RowItems.length)
			{
				strValue = intPict;
				for (i = 0; i < RowItems.length; i++)
				{
					value = RowItems[i].getAttribute('data-value');
					if (value === strValue)
					{
						BX.addClass(RowItems[i], 'active');
					}
					else
					{
						BX.removeClass(RowItems[i], 'active');
					}
				}
			}
		}
	}
};

window.JCCatalogElement.prototype.SliderRowLeft = function()
{
	var strValue = '',
		index = -1,
		i,
		target = BX.proxy_context;
	if (!!target && target.hasAttribute('data-value'))
	{
		strValue = target.getAttribute('data-value');
		for (i = 0; i < this.sliders.length; i++)
		{
			if (this.sliders[i].OFFER_ID === strValue)
			{
				index = i;
				break;
			}
		}
		if (-1 < index && this.sliderRowShowSize < this.sliders[index].COUNT)
		{
			if (0 > this.sliders[index].START)
			{
				this.sliders[index].START++;
				BX.adjust(this.sliders[index].LIST, { style: { marginLeft: this.sliders[index].START*20+'%' }});
				BX.adjust(this.sliders[index].RIGHT, { style: this.sliderEnableArrow });
			}

			if (0 <= this.sliders[index].START)
			{
				BX.adjust(this.sliders[index].LEFT, { style: this.sliderDisableArrow });
			}
		}
	}
};

window.JCCatalogElement.prototype.SliderRowRight = function()
{
	var strValue = '',
		index = -1,
		i,
		target = BX.proxy_context;
	if (!!target && target.hasAttribute('data-value'))
	{
		strValue = target.getAttribute('data-value');
		for (i = 0; i < this.sliders.length; i++)
		{
			if (this.sliders[i].OFFER_ID === strValue)
			{
				index = i;
				break;
			}
		}
		if (-1 < index && this.sliderRowShowSize < this.sliders[index].COUNT)
		{
			if ((this.sliderRowShowSize - this.sliders[index].START) < this.sliders[index].COUNT)
			{
				this.sliders[index].START--;
				BX.adjust(this.sliders[index].LIST, { style: { marginLeft: this.sliders[index].START*20+'%' }});
				BX.adjust(this.sliders[index].LEFT, { style: this.sliderEnableArrow } );
			}

			if ((this.sliderRowShowSize - this.sliders[index].START) >= this.sliders[index].COUNT)
			{
				BX.adjust(this.sliders[index].RIGHT, { style: this.sliderDisableArrow } );
			}
		}
	}
};

window.JCCatalogElement.prototype.SelectSliderImg = function()
{
	var strValue = '',
		arItem = [],
		target = BX.proxy_context;
	if (!!target && target.hasAttribute('data-value'))
	{
		strValue = target.getAttribute('data-value');
		arItem = strValue.split('_');
		this.SetMainPict(arItem[0], arItem[1]);
	}
};

window.JCCatalogElement.prototype.SetMainPict = function(intSlider, intPict)
{
	var index = -1,
		indexPict = -1,
		i,
		j,
		value = '',
		RowItems = null,
		strValue = '';

	for (i = 0; i < this.offers.length; i++)
	{
		if (intSlider === this.offers[i].ID)
		{
			index = i;
			break;
		}
	}

	$(window).resize();
	$('.thumbs_navigation ul').addClass('hidden_block');
	if(this.SliderImages>1){
		$('.thumbs_navigation ul:eq('+index+')').removeClass('hidden_block');
	}
	$('.thumbs_navigation').removeClass('hidden_block');

	$('.fancy_offer').addClass('hidden_block');
	$(this.obPict).closest('.offers_img').css('opacity', 0);

	if (-1 < index)
	{
		if (0 < this.offers[index].SLIDER_COUNT)
		{
			for (j = 0; j < this.offers[index].SLIDER.length; j++)
			{
				if (intPict === this.offers[index].SLIDER[j].ID)
				{
					indexPict = j;
					break;
				}
			}
			if (-1 < indexPict)
			{
				if (!!this.offers[index].SLIDER[indexPict])
				{
					this.setCurrentImg(this.offers[index].SLIDER[indexPict], true);
				}

				RowItems = BX.findChildren(this.sliders[index].LIST, {tagName: 'li'}, false);
				if (!!RowItems && 0 < RowItems.length)
				{
					strValue = intSlider+'_'+intPict;
					for (i = 0; i < RowItems.length; i++)
					{
						value = RowItems[i].getAttribute('data-value');
						if (value === strValue)
						{
							BX.addClass(RowItems[i], 'current');
						}
						else
						{
							BX.removeClass(RowItems[i], 'current');
						}
					}
				}
			}
		}
	}
	setTimeout(function(){
		$('.fancy_offer').removeClass('hidden_block');
		$('.offers_img').css('opacity', 1);
	}, 200);
};

window.JCCatalogElement.prototype.SetMainPictFromItem = function(index)
{
	if (!!this.obPict)
	{
		var boolSet = false,
			obNewPict = {};

		if (!!this.offers[index])
		{
			if (!!this.offers[index].DETAIL_PICTURE)
			{
				obNewPict = this.offers[index].DETAIL_PICTURE;
				boolSet = true;
			}
			else if (!!this.offers[index].PREVIEW_PICTURE)
			{
				obNewPict = this.offers[index].PREVIEW_PICTURE;
				boolSet = true;
			}
		}
		if (!boolSet)
		{
			if (!!this.defaultPict.detail)
			{
				obNewPict = this.defaultPict.detail;
				boolSet = true;
			}
			else if (!!this.defaultPict.preview)
			{
				obNewPict = this.defaultPict.preview;
				boolSet = true;
			}
		}
		if (boolSet)
		{
			this.setCurrentImg(obNewPict, true);
		}
	}
};

window.JCCatalogElement.prototype.showMainPictPopup = function(e)
{
	var pictContent = '';

	pictContent = '<div style="text-align: center;"><img src="'+
		this.currentImg.src+
		'" width="'+this.currentImg.width+'" height="'+this.currentImg.height+'" name=""></div>';
	this.obPopupPict.setContent(pictContent);
	this.obPopupPict.show();
	return BX.PreventDefault(e);
};

window.JCCatalogElement.prototype.QuantityUp = function()
{
	var curValue = 0,
		boolSet = true,
		calcPrice;

	if (0 === this.errorCode && this.config.showQuantity && this.canBuy)
	{
		curValue = (this.isDblQuantity ? parseFloat(this.obQuantity.value) : parseInt(this.obQuantity.value, 10));
		if (!isNaN(curValue))
		{
			curValue += this.stepQuantity;
			if (this.checkQuantity)
			{
				if (curValue > this.maxQuantity)
				{
					boolSet = false;
				}
			}

			if (boolSet)
			{
				if (this.isDblQuantity)
				{
					curValue = Math.round(curValue*this.precisionFactor)/this.precisionFactor;
				}
				this.obQuantity.value = curValue;
			}
		}
	}
};

window.JCCatalogElement.prototype.QuantityDown = function()
{
	var curValue = 0,
		boolSet = true,
		calcPrice;

	if (0 === this.errorCode && this.config.showQuantity && this.canBuy)
	{
		curValue = (this.isDblQuantity ? parseFloat(this.obQuantity.value) : parseInt(this.obQuantity.value, 10));
		if (!isNaN(curValue))
		{
			curValue -= this.stepQuantity;
			if (curValue < this.stepQuantity)
			{
				boolSet = false;
			}
			if (boolSet)
			{
				if (this.isDblQuantity)
				{
					curValue = Math.round(curValue*this.precisionFactor)/this.precisionFactor;
				}
				this.obQuantity.value = curValue;
			}
		}
	}
};

window.JCCatalogElement.prototype.QuantityChange = function()
{
	var curValue = 0,
		calcPrice,
		intCount,
		count;

	if (0 === this.errorCode && this.config.showQuantity)
	{
		if (this.canBuy)
		{
			curValue = (this.isDblQuantity ? parseFloat(this.obQuantity.value) : parseInt(this.obQuantity.value, 10));
			if (!isNaN(curValue))
			{
				if (this.checkQuantity)
				{
					if (curValue > this.maxQuantity)
					{
						curValue = this.maxQuantity;
					}
				}
				if (curValue < this.stepQuantity)
				{
					curValue = this.stepQuantity;
				}
				else
				{
					count = Math.round((curValue*this.precisionFactor)/this.stepQuantity)/this.precisionFactor;
					intCount = parseInt(count, 10);
					if (isNaN(intCount))
					{
						intCount = 1;
						count = 1.1;
					}
					if (count > intCount)
					{
						curValue = (intCount <= 1 ? this.stepQuantity : intCount*this.stepQuantity);
						curValue = Math.round(curValue*this.precisionFactor)/this.precisionFactor;
					}
				}
				this.obQuantity.value = curValue;
			}
			else
			{
				this.obQuantity.value = this.stepQuantity;
			}
		}
		else
		{
			this.obQuantity.value = this.stepQuantity;
		}
	}
};

window.JCCatalogElement.prototype.QuantitySet = function(index)
{
	var basisPrice = '',
		strLimit;
	if (this.errorCode === 0)
	{
		this.canBuy = this.offers[index].CAN_BUY;
		if (this.canBuy)
		{
			if (!!this.obBasketActions)
			{
				BX.style(this.obBasketActions, 'display', '');
			}
			if (!!this.obNotAvail)
			{
				BX.style(this.obNotAvail, 'display', 'none');
			}
		}
		else
		{
			if (!!this.obBasketActions)
			{
				//BX.style(this.obBasketActions, 'display', 'none');
				BX.style(this.obBasketActions, 'opacity', '0');
				BX.style(BX.findParent(BX(this.obQuantity), { 'class':'counter_block' }), 'display', 'none');
			}
			if (!!this.obNotAvail)
			{
				BX.style(this.obNotAvail, 'display', '');
			}
		}
		if (this.config.showQuantity)
		{
			this.isDblQuantity = this.offers[index].QUANTITY_FLOAT;
			this.checkQuantity = this.offers[index].CHECK_QUANTITY;
			if (this.isDblQuantity)
			{
				this.maxQuantity = parseFloat(this.offers[index].MAX_QUANTITY);
				this.stepQuantity = Math.round(parseFloat(this.offers[index].STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor;
			}
			else
			{
				this.maxQuantity = parseInt(this.offers[index].MAX_QUANTITY, 10);
				this.stepQuantity = parseInt(this.offers[index].STEP_QUANTITY, 10);
			}
			/*this.obQuantity.value = this.stepQuantity;
			this.obQuantity.disabled = !this.canBuy;*/
			if (!!this.obMeasure)
			{
				if (!!this.offers[index].MEASURE)
				{
					BX.adjust(this.obMeasure, { html : this.offers[index].MEASURE});
				}
				else
				{
					BX.adjust(this.obMeasure, { html : ''});
				}
			}
			if (!!this.obQuantityLimit.all)
			{
				if (!this.checkQuantity)
				{
					BX.adjust(this.obQuantityLimit.value, { html: '' });
					BX.adjust(this.obQuantityLimit.all, { style: {display: 'none'} });
				}
				else
				{
					strLimit = this.offers[index].MAX_QUANTITY;
					if (!!this.offers[index].MEASURE)
					{
						strLimit += (' '+this.offers[index].MEASURE);
					}
					BX.adjust(this.obQuantityLimit.value, { html: strLimit});
					BX.adjust(this.obQuantityLimit.all, { style: {display: ''} });
				}
			}
			if (!!this.obBasisPrice)
			{
				if (!!this.offers[index].BASIS_PRICE)
				{
					basisPrice = BX.message('BASIS_PRICE_MESSAGE');
					basisPrice = basisPrice.replace(
						'#PRICE#',
						BX.Currency.currencyFormat(this.offers[index].BASIS_PRICE.DISCOUNT_VALUE, this.offers[index].BASIS_PRICE.CURRENCY, true)
					);
					basisPrice = basisPrice.replace('#MEASURE#', this.offers[index].MEASURE);
					BX.adjust(this.obBasisPrice, { style: { display: '' }, html: basisPrice });
				}
				else
				{
					BX.adjust(this.obBasisPrice, { style: { display: 'none' }, html: '' });
				}
			}
		}
		this.currentBasisPrice = this.offers[index].BASIS_PRICE;
	}
};

window.JCCatalogElement.prototype.SelectOfferProp = function()
{
	var i = 0,
		strTreeValue = '',
		arTreeItem = [],
		RowItems = null,
		target = BX.proxy_context;
	if(typeof target.options !== 'undefined' && typeof target.options[target.selectedIndex] !== 'undefined')
		target = target.options[target.selectedIndex];
	if (!!target && target.hasAttribute('data-treevalue'))
	{
		strTreeValue = target.getAttribute('data-treevalue');
		propModes = target.getAttribute('data-showtype');
		arTreeItem = strTreeValue.split('_');
		this.SearchOfferPropIndex(arTreeItem[0], arTreeItem[1]);
		RowItems = BX.findChildren(target.parentNode, {tagName: this.skuVisualParams[propModes.toUpperCase()].TAG}, false);
		if (!!RowItems && 0 < RowItems.length)
		{
			for (i = 0; i < RowItems.length; i++)
			{
				value = RowItems[i].getAttribute('data-onevalue');

				// for SELECTBOXES
				if(propModes == 'TEXT'){
					if (value === arTreeItem[1]){
						RowItems[i].setAttribute('selected', 'selected');
					}else{
						RowItems[i].removeAttribute('selected');
					}
				}else{
					if (value === arTreeItem[1]){
						$(RowItems[i]).addClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS);
					}else{
						$(RowItems[i]).removeClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS);
					}
				}
			}
		}
	}
};

window.JCCatalogElement.prototype.SearchOfferPropIndex = function(strPropID, strPropValue)
{
	var strName = '',
		arShowValues = false,
		arCanBuyValues = [],
		index = -1,
		i, j,
		arFilter = {},
		tmpFilter = [];

	for (i = 0; i < this.treeProps.length; i++)
	{
		if (this.treeProps[i].ID === strPropID)
		{
			index = i;
			break;
		}
	}

	if (-1 < index)
	{
		for (i = 0; i < index; i++)
		{
			strName = 'PROP_'+this.treeProps[i].ID;
			arFilter[strName] = this.selectedValues[strName];
		}
		strName = 'PROP_'+this.treeProps[index].ID;
		arFilter[strName] = strPropValue;
		for (i = index+1; i < this.treeProps.length; i++)
		{
			strName = 'PROP_'+this.treeProps[i].ID;
			arShowValues = this.GetRowValues(arFilter, strName);
			if (!arShowValues)
			{
				break;
			}
			if (this.config.showAbsent)
			{
				arCanBuyValues = [];
				tmpFilter = [];
				tmpFilter = BX.clone(arFilter, true);
				for (j = 0; j < arShowValues.length; j++)
				{
					tmpFilter[strName] = arShowValues[j];
					if (this.GetCanBuy(tmpFilter))
					{
						arCanBuyValues[arCanBuyValues.length] = arShowValues[j];
					}
				}
			}
			else
			{
				arCanBuyValues = arShowValues;
			}
			if (!!this.selectedValues[strName] && BX.util.in_array(this.selectedValues[strName], arCanBuyValues))
			{
				arFilter[strName] = this.selectedValues[strName];
			}
			else
			{
				arFilter[strName] = arCanBuyValues[0];
			}
			this.UpdateRow(i, arFilter[strName], arShowValues, arCanBuyValues);
		}
		this.selectedValues = arFilter;

		this.ChangeInfo();
	}
};

window.JCCatalogElement.prototype.RowLeft = function()
{
	var strTreeValue = '',
		index = -1,
		i,
		target = BX.proxy_context;
	if (!!target && target.hasAttribute('data-treevalue'))
	{
		strTreeValue = target.getAttribute('data-treevalue');
		for (i = 0; i < this.treeProps.length; i++)
		{
			if (this.treeProps[i].ID === strTreeValue)
			{
				index = i;
				break;
			}
		}
		if (-1 < index && this.treeRowShowSize < this.showCount[index])
		{
			if (0 > this.showStart[index])
			{
				this.showStart[index]++;
				BX.adjust(this.obTreeRows[index].LIST, { style: { marginLeft: this.showStart[index]*20+'%' }});
				//BX.adjust(this.obTreeRows[index].RIGHT, { style: this.treeEnableArrow });
			}

			/*if (0 <= this.showStart[index])
			{
				BX.adjust(this.obTreeRows[index].LEFT, { style: this.treeDisableArrow });
			}*/
		}
	}
};

window.JCCatalogElement.prototype.RowRight = function()
{
	var strTreeValue = '',
		index = -1,
		i,
		target = BX.proxy_context;
	if (!!target && target.hasAttribute('data-treevalue'))
	{
		strTreeValue = target.getAttribute('data-treevalue');
		for (i = 0; i < this.treeProps.length; i++)
		{
			if (this.treeProps[i].ID === strTreeValue)
			{
				index = i;
				break;
			}
		}
		if (-1 < index && this.treeRowShowSize < this.showCount[index])
		{
			if ((this.treeRowShowSize - this.showStart[index]) < this.showCount[index])
			{
				this.showStart[index]--;
				BX.adjust(this.obTreeRows[index].LIST, { style: { marginLeft: this.showStart[index]*20+'%' }});
				//BX.adjust(this.obTreeRows[index].LEFT, { style: this.treeEnableArrow });
			}

			/*if ((this.treeRowShowSize - this.showStart[index]) >= this.showCount[index])
			{
				BX.adjust(this.obTreeRows[index].RIGHT, { style: this.treeDisableArrow });
			}*/
		}
	}
};

window.JCCatalogElement.prototype.UpdateRow = function(intNumber, activeID, showID, canBuyID)
{
	var i = 0,
		showI = 0,
		value = '',
		countShow = 0,
		strNewLen = '',
		obData = {},
		RowItems = null,
		pictMode = false,
		extShowMode = false,
		isCurrent = false,
		selectIndex = 0,
		obLeft = this.treeEnableArrow,
		obRight = this.treeEnableArrow,
		currentShowStart = 0;

	if (-1 < intNumber && intNumber < this.obTreeRows.length)
	{
		propMode = this.treeProps[intNumber].DISPLAY_TYPE;
		RowItems = BX.findChildren(this.obTreeRows[intNumber].LIST, {tagName: this.skuVisualParams[propMode].TAG}, false);
		if (!!RowItems && 0 < RowItems.length)
		{
			selectMode = ('SELECT' === this.treeProps[intNumber].DISPLAY_TYPE);
			countShow = showID.length;
			obData = {
				style: {},
				props: {
					disabled: '',
					selected: '',
				},
			};

			for (i = 0; i < RowItems.length; i++){
				value = RowItems[i].getAttribute('data-onevalue');
				isCurrent = (value === activeID && value !=0);

				if (BX.util.in_array(value, canBuyID)){
					obData.props.className = (isCurrent ? this.skuVisualParams[propMode].ACTIVE_CLASS : '');
					
				}else{
					obData.props.className = (isCurrent ? this.skuVisualParams[propMode].ACTIVE_CLASS+' '+this.skuVisualParams[propMode].HIDE_CLASS : this.skuVisualParams[propMode].HIDE_CLASS);
					
				}
				// obData.props.className = (isCurrent ? this.skuVisualParams[propMode].ACTIVE_CLASS : '');

				if(selectMode){
					obData.props.disabled = 'disabled';
					obData.props.selected = (isCurrent ? 'selected' : '');
				}else{
					obData.style.display = 'none';
				}

				if (BX.util.in_array(value, showID)){
					if(selectMode){
						obData.props.disabled = '';
					}else{
						obData.style.display = '';
					}
					if (isCurrent){
						selectIndex = showI;
					}
					showI++;
				}
				BX.adjust(RowItems[i], obData);
			}

			if(selectMode){
				if($(this.obTreeRows[intNumber].LIST).parent().hasClass('ik_select'))
					$(this.obTreeRows[intNumber].LIST).ikSelect('reset');
			}

			this.showCount[intNumber] = countShow;
			this.showStart[intNumber] = currentShowStart;
		}
	}
};

window.JCCatalogElement.prototype.GetRowValues = function(arFilter, index)
{
	var arValues = [],
		i = 0,
		j = 0,
		boolSearch = false,
		boolOneSearch = true;

	if (0 === arFilter.length)
	{
		for (i = 0; i < this.offers.length; i++)
		{
			if (!BX.util.in_array(this.offers[i].TREE[index], arValues))
			{
				arValues[arValues.length] = this.offers[i].TREE[index];
			}
		}
		boolSearch = true;
	}
	else
	{
		for (i = 0; i < this.offers.length; i++)
		{
			boolOneSearch = true;
			for (j in arFilter)
			{
				if (arFilter[j] !== this.offers[i].TREE[j])
				{
					boolOneSearch = false;
					break;
				}
			}
			if (boolOneSearch)
			{
				if (!BX.util.in_array(this.offers[i].TREE[index], arValues))
				{
					arValues[arValues.length] = this.offers[i].TREE[index];
				}
				boolSearch = true;
			}
		}
	}
	return (boolSearch ? arValues : false);
};

window.JCCatalogElement.prototype.GetCanBuy = function(arFilter)
{
	var i = 0,
		j = 0,
		boolOneSearch = true,
		boolSearch = false;

	for (i = 0; i < this.offers.length; i++)
	{
		boolOneSearch = true;
		for (j in arFilter)
		{
			if (arFilter[j] !== this.offers[i].TREE[j])
			{
				boolOneSearch = false;
				break;
			}
		}
		if (boolOneSearch)
		{
			if (this.offers[i].CAN_BUY)
			{
				boolSearch = true;
				break;
			}
		}
	}
	return boolSearch;
};

window.JCCatalogElement.prototype.SetCurrent = function()
{
	var i = 0,
		j = 0,
		strName = '',
		arShowValues = false,
		arCanBuyValues = [],
		arFilter = {},
		tmpFilter = [],
		current = this.offers[this.offerNum].TREE;

	for (i = 0; i < this.treeProps.length; i++)
	{
		strName = 'PROP_'+this.treeProps[i].ID;
		arShowValues = this.GetRowValues(arFilter, strName);
		if (!arShowValues)
		{
			break;
		}
		if (BX.util.in_array(current[strName], arShowValues))
		{
			arFilter[strName] = current[strName];
		}
		else
		{
			arFilter[strName] = arShowValues[0];
			this.offerNum = 0;
		}
		if (this.config.showAbsent)
		{
			arCanBuyValues = [];
			tmpFilter = [];
			tmpFilter = BX.clone(arFilter, true);
			for (j = 0; j < arShowValues.length; j++)
			{
				tmpFilter[strName] = arShowValues[j];
				if (this.GetCanBuy(tmpFilter))
				{
					arCanBuyValues[arCanBuyValues.length] = arShowValues[j];
				}
			}
		}
		else
		{
			arCanBuyValues = arShowValues;
		}

		this.UpdateRow(i, arFilter[strName], arShowValues, arCanBuyValues);
	}

	this.selectedValues = arFilter;
	this.ChangeInfo();
};

window.JCCatalogElement.prototype.ChangeInfo = function()
{
	var index = -1,
		i = 0,
		j = 0,
		RowItems=null,
		boolOneSearch = true;

	for (i = 0; i < this.offers.length; i++)
	{
		boolOneSearch = true;
		for (j in this.selectedValues)
		{
			if (this.selectedValues[j] !== this.offers[i].TREE[j])
			{
				boolOneSearch = false;
				break;
			}
		}
		if (boolOneSearch)
		{
			index = i;
			break;
		}
	}
	if (-1 < index)
	{
		var measure = this.offers[index].MEASURE && this.offers[index].SHOW_MEASURE=="Y" ? this.offers[index].MEASURE : '';
		this.setPrice(this.offers[index].PRICE, measure);
		for (i = 0; i < this.offers.length; i++)
		{

			if (this.config.showOfferGroup && this.offers[i].OFFER_GROUP)
			{
				if (i !== index)
				{
					BX.adjust(BX(this.visual.OFFER_GROUP+this.offers[i].ID), { style: {display: 'none'} });
				}
			}
			/*set slider*/
			/*if (!!this.sliders[i].ID)
			{
				if (i === index)
				{
					this.sliders[i].START = 0;
					if(this.sliders[i].CONT){

						RowItems = $(this.sliders[i].CONT).find("li");
						this.SliderImages=RowItems.length;
						if(this.SliderImages>1){
							BX.adjust(this.sliders[i].CONT, {style: { display: ''}});
						}else{
							BX.adjust(this.sliders[i].CONT, {style: { display: 'none'}});
						}
					}
					BX.adjust(this.sliders[i].CONT_M, {style: { display: ''}});
				}
				else
				{
					if(this.sliders[i].CONT)
						BX.adjust(this.sliders[i].CONT, {style: { display: 'none'}});
					BX.adjust(this.sliders[i].CONT_M, {style: { display: 'none'}});
				}
			}*/
		}

		setViewedProduct(this.offers[index].ID, {
			'PRODUCT_ID': this.offers[index].PRODUCT_ID,
			'IBLOCK_ID': this.offers[index].IBLOCK_ID,
			'NAME': this.product.name,
			'DETAIL_PAGE_URL': this.offers[index].URL,
			//'PICTURE_ID': this.offers[index].PREVIEW_PICTURE ? this.offers[index].PREVIEW_PICTURE.ID : (this.offers[index].SLIDER_COUNT ? this.offers[index].SLIDER[0].ID : false),
			'PICTURE_ID': this.offers[index].PREVIEW_PICTURE ? this.offers[index].PREVIEW_PICTURE.ID : (this.offers[index].PARENT_PICTURE ? this.offers[index].PARENT_PICTURE.ID : (this.offers[index].SLIDER_COUNT ? this.offers[index].SLIDER[0].ID : false)),
			'CATALOG_MEASURE_NAME': this.offers[index].MEASURE,
			'MIN_PRICE': this.offers[index].PRICE,
			'CAN_BUY': this.offers[index].CAN_BUY ? 'Y' : 'N',
			'IS_OFFER': 'Y',
			'WITH_OFFERS': 'N'
		});
		
		if (this.config.showOfferGroup && this.offers[index].OFFER_GROUP)
		{
			BX.adjust(BX(this.visual.OFFER_GROUP+this.offers[index].ID), { style: {display: ''} });
		}
		if (0 < this.offers[index].SLIDER_COUNT)
		{
			this.SetMainPict(this.offers[index].ID, this.offers[index].SLIDER[0].ID);
		}
		else
		{
			this.SetMainPictFromItem(index);
		}


		/*set slider images start*/
		this.SetSliderPict(this.offers[index], this.offers[index].SLIDER, this.config);
		/*set slider images end*/

		/*set mobile slider images start*/
		this.SetSliderPictMobile(this.offers[index], this.offers[index].SLIDER, this.config);
		/*set mobile slider images end*/

		if (this.config.showSkuProps && !!this.obSkuProps)
		{
			var html ='',
				display_type = this.offers[index].TYPE_PROP;
			if (!this.offers[index].DISPLAY_PROPERTIES || this.offers[index].DISPLAY_PROPERTIES.length === 0)
			{
				if(display_type == "TABLE")
					BX.adjust(this.obSkuProps, {style: {display: 'none'}, html: ''});
				else
					$(this.obSkuProps).find('.sku_block_prop').remove();
			}
			else
			{
				if(display_type != "TABLE")
					$(this.obSkuProps).find('.sku_block_prop').remove();

				for(var i in this.offers[index].DISPLAY_PROPERTIES)
				{
					if(display_type == "TABLE")
						html += '<tr><td class="char_name"><span>'+this.offers[index].DISPLAY_PROPERTIES[i].NAME+'</span></td><td class="char_value"><span>'+this.offers[index].DISPLAY_PROPERTIES[i].VALUE+'</span></td></tr>';
					else
					{
						html = '<div class="char sku_block_prop"><div class="char_name"><span>'+this.offers[index].DISPLAY_PROPERTIES[i].NAME+'</span></div><div class="char_value"><span>'+this.offers[index].DISPLAY_PROPERTIES[i].VALUE+'</span></div></div>';
						$(this.obSkuProps).append(html);
					}
				}

				if(display_type == "TABLE")
					BX.adjust(this.obSkuProps, {style: {display: ''}, html: html});
			}
		}
		if (this.config.showSkuProps && !!this.obSkuArticleProps)
		{
			if ('DISPLAY_PROPERTIES_CODE' in this.offers[index]){
				if ('ARTICLE' in this.offers[index].DISPLAY_PROPERTIES_CODE){
					if(this.offers[index].DISPLAY_PROPERTIES_CODE.ARTICLE.VALUE){
						BX.adjust(this.obSkuArticleProps, {style: {display: ''}, html: this.offers[index].DISPLAY_PROPERTIES_CODE.ARTICLE.VALUE_FORMAT});
					}
				}else{
					BX.adjust(this.obSkuArticleProps, {style: {display: 'none'}, html: ''});
				}
			}else{
				BX.adjust(this.obSkuArticleProps, {style: {display: 'none'}, html: ''});
			}
		}

		setLocationSKU(this.offers[index].ID);

		$(this.obBasketActions).closest('.counter_wrapp').addClass('hidden_block');

		this.offerNum = index;
		this.QuantitySet(this.offerNum);
		this.setStoreBlock(this.offers[index].ID);
		this.setQuantityStore(this.offers[index].MAX_QUANTITY, this.offers[index].AVAILIABLE.TEXT);

		this.incViewedCounter();
		BX.onCustomEvent('onCatalogStoreProductChange', [this.offers[this.offerNum].ID]);
		$(this.obPict).parent().data('id', this.offers[index].ID);


		var obj=this.offers[index],
			th=$(this.obProduct);



		if(typeof arBasketAspro !=="undefined"){
			this.setActualDataBlock(th, obj);
		}else{
			if(typeof window.frameCacheVars !== "undefined"){
				BX.addCustomEvent("onFrameDataReceived", function(){
					window.JCCatalogElement.prototype.setActualDataBlock(th, obj);
				});
			}
		}

		/*quantity discount start*/
		if($(this.obProduct).find('.quantity_block .values').length){
			$(this.obProduct).find('.quantity_block .values .item span.value').text(this.offers[index].MAX_QUANTITY).css({'opacity':'1'});
		}
		/*quantity discount end*/

		$('.catalog_detail .tabs_section .tabs_content .form.inline input[data-sid="PRODUCT_NAME"]').attr('value', $('h1').text() + '(' + this.offers[index].NAME + ')');
	}
};

/*set blocks start*/
window.JCCatalogElement.prototype.setActualDataBlock = function(th, obj)
{
	/*like block start*/
	this.setLikeBlock(th, '.like_icons .wish_item', obj, 'DELAY');
	this.setLikeBlock(th, '.like_icons .compare_item',obj, 'COMPARE');
	/*like block end*/

	/*buy block start*/
	this.setBuyBlock(th, obj);
	/*buy block end*/
}
/*set blocks end*/

/*set slider offers*/
window.JCCatalogElement.prototype.SetSliderPict = function(obj, slider, config)
{
	var container=$('.wrapp_thumbs'),
		slideHtml='';
		countPhoto=obj.SLIDER_COUNT;
		container.find('.thumbs').css({
			'max-width':Math.ceil(((countPhoto <= 4 ? countPhoto : 4) * 64) - 10)
		});

		slideHtml='<ul class="slides_block">';
		for(var i in slider){
			slideHtml+='<li data-big="'+slider[i].BIG.src+'">'+
			'<span class="cnt"><img border="0" src="'+slider[i].THUMB.src+'" alt="'+slider[i].ALT+'" title="'+slider[i].TITLE+'" /></span>'+
			'</li>';
		}
		slideHtml+='</ul>';


		container.find('.thumbs').html(slideHtml);
	if(countPhoto>1){
		container.show();

		if(container.find('.thumbs_navigation').length){
			container.find('.thumbs_navigation').remove();
		}
		container.find('.thumbs').append('<span class="thumbs_navigation custom_flex"></span>');

		/* init flexslider start */
		container.find('.thumbs').removeData("flexslider");
		container.find('.thumbs').flexslider({
			animation: "slide",
			selector: ".slides_block > li",
			slideshow: false,
			animationSpeed: 600,
			directionNav: true,
			controlNav: false,
			pauseOnHover: true,
			itemWidth: 54,
			itemMargin: 10,
			animationLoop: true,
			controlsContainer: ".thumbs_navigation",
		});
		/* init flexslider end */
		container.find('.thumbs .slides_block li').first().addClass('current');

		var pict=$(this.obPict);
		container.find('.thumbs').delegate('li:not(.current)', 'click', function(e){
			var srcSmall='',
				srcBig='',
				width='',
				height=''
				index=$(this).index();

			if('SMALL' in slider[index]){
				srcSmall = slider[index].SMALL.src;
			}else if ('SRC' in slider[index]) {
				srcSmall = slider[index].SRC
			};
			if('BIG' in slider[index]){
				srcBig = slider[index].BIG.src;
			}
			if('WIDTH' in slider[index]){
				width = slider[index].WIDTH;
			}
			if('HEIGHT' in slider[index]){
				height = slider[index].HEIGHT;
			}

			$(this).addClass('current').siblings().removeClass('current').parents('.item_slider').find('.slides li').fadeOut(333);
			$(this).parents('.item_slider').find('.slides li').eq(index).addClass('current').stop().fadeIn(333);


			if(srcSmall){
				BX.adjust(pict[0], { props: { src: srcSmall } });
			}
			pict.attr('data-large','');

			if(srcBig){
				if(config.mainPictureMode === 'POPUP'){
					pict.parent().attr('href',srcBig);
				}
				if(config.mainPictureMode === 'MAGNIFIER'){
					pict.attr('data-large',srcBig);
				}
				pict.parent().attr('title',slider[index].TITLE);
				pict.parent().attr('alt',slider[index].ALT);
				pict.attr('title',slider[index].TITLE);
				pict.attr('alt',slider[index].ALT);
			}
		});

	}else{
		container.hide();
	}
}

/*set mobile slider offers*/
window.JCCatalogElement.prototype.SetSliderPictMobile = function(obj, slider)
{
	var container=$('.item_slider.flex'),
		slideHtml='';
		countPhoto=obj.SLIDER_COUNT;

	slideHtml='<ul class="slides">';
	if(!slider.length){
		slideHtml+='<li data-value="">'+
			'<span rel="item_slider" class="fancy" title="'+obj.NAME+'"><img border="0" src="'+obj.NO_PHOTO.SRC+'" alt="'+obj.NAME+'" title="'+obj.NAME+'" /></span>'+
			'</li>';
	}else{
		for(var i in slider){
			slideHtml+='<li data-value="'+obj.ID+'_'+slider[i].ID+'">'+
			'<a href="'+slider[i].BIG.src+'" rel="item_slider" class="fancy" title="'+slider[i].TITLE+'"><img border="0" src="'+slider[i].SMALL.src+'" alt="'+slider[i].ALT+'" title="'+slider[i].TITLE+'" /></a>'+
			'</li>';
		}
	}
	slideHtml+='</ul>';

	container.html(slideHtml);

	/* init flexslider start */
	container.removeData("flexslider");
	container.flexslider({
		animation: "slide",
		slideshow: true,
		slideshowSpeed: 10000,
		animationSpeed: 600,
		directionNav: false,
		pauseOnHover: true,
		animationLoop: false,
	});
	/* init flexslider end */
}

/*set compare/wish*/
window.JCCatalogElement.prototype.setLikeBlock = function(th, className, obj, type)
{
	var block=th;
	if(type=="DELAY"){
		if(obj.CAN_BUY){
			block.find(className).css('display','block');
		}else{
			block.find(className).hide();
		}
	}
	block.find(className).attr('data-item', obj.ID);

	if(arBasketAspro[type]){
		block.find(className).removeClass('added');
		block.find(className).find('.value').css('display','block');
		block.find(className).find('.value.added').hide();

		if(arBasketAspro[type][obj.ID]!==undefined){
			block.find(className).addClass('added');
			block.find(className).find('.value').hide();
			block.find(className).find('.value.added').css('display','block');
		}
	}
}

/*set buy*/
window.JCCatalogElement.prototype.setBuyBlock = function(th, obj)
{
	var buyBlock=th.find('.offer_buy_block');

	if(buyBlock.find('.counter_wrapp .counter_block').length){
		buyBlock.find('.counter_wrapp .counter_block').attr('data-item', obj.ID);
	}

	if((obj.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL && obj.CONFIG.ACTION == "ADD") && obj.CAN_BUY){
		var max=(obj.CONFIG.MAX_QUANTITY_BUY>0 ? "data-max='"+obj.CONFIG.MAX_QUANTITY_BUY+"'" : ""),
			counterHtml='<span class="minus">-</span>'+
				'<input type="text" class="text" name="'+obj.PRODUCT_QUANTITY_VARIABLE+'" value="'+obj.CONFIG.MIN_QUANTITY_BUY+'" />'+
				'<span class="plus" '+max+'>+</span>';
		if(arBasketAspro["BASKET"] && arBasketAspro["BASKET"][obj.ID]!==undefined){
			if(buyBlock.find('.counter_wrapp .counter_block').length){
				buyBlock.find('.counter_wrapp .counter_block').hide();
			}else{
				buyBlock.find('.counter_wrapp').prepend('<div class="counter_block big_basket" data-item="'+obj.ID+'"></div>');
				buyBlock.find('.counter_wrapp .counter_block').html(counterHtml).hide();
			}
		}else{
			if(buyBlock.find('.counter_wrapp .counter_block').length){
				buyBlock.find('.counter_wrapp .counter_block').html(counterHtml).show();
			}else{
				buyBlock.find('.counter_wrapp').prepend('<div class="counter_block big_basket" data-item="'+obj.ID+'"></div>');
				buyBlock.find('.counter_wrapp .counter_block').html(counterHtml);
			}
		}
	}else{
		if(buyBlock.find('.counter_wrapp .counter_block').length){
			buyBlock.find('.counter_wrapp .counter_block').hide();
		}
	}
	var className=((obj.CONFIG.ACTION == "ORDER") || !obj.CAN_BUY || !obj.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL || (obj.CONFIG.ACTION == "SUBSCRIBE" && obj.CATALOG_SUBSCRIBE == "Y") ? "wide" : "" ),
		buyBlockBtn=$('<div class="button_block"></div>');

	if(buyBlock.find('.counter_wrapp').find('.button_block').length){
		if(arBasketAspro["BASKET"] && arBasketAspro["BASKET"][obj.ID]!==undefined){
			buyBlock.find('.counter_wrapp').find('.button_block').addClass('wide').html(obj.HTML);
			markProductAddBasket(obj.ID);
		}else{
			if(className){
				buyBlock.find('.counter_wrapp').find('.button_block').addClass('wide').html(obj.HTML);
				if(typeof arBasketAspro !=="undefined"){
					if(arBasketAspro["SUBSCRIBE"] && arBasketAspro["SUBSCRIBE"][obj.ID]!==undefined){
						markProductSubscribe(obj.ID);
					}
				}
			}else{
				buyBlock.find('.counter_wrapp').find('.button_block').removeClass('wide').html(obj.HTML);
			}
		}
	}else{
		buyBlock.find('.counter_wrapp').append('<div class="button_block '+className+'">'+obj.HTML+'</div>');
		if(arBasketAspro["BASKET"] && arBasketAspro["BASKET"][obj.ID]!==undefined)
			markProductAddBasket(obj.ID);
		if(arBasketAspro["SUBSCRIBE"] && arBasketAspro["SUBSCRIBE"][obj.ID]!==undefined)
			markProductSubscribe(obj.ID);
	}

	if(obj.CONFIG.ACTION !== "NOTHING"){
		if(obj.CONFIG.ACTION == "ADD" && obj.CAN_BUY && obj.SHOW_ONE_CLICK_BUY!="N"){
			var ocb='<span class="transparent big_btn type_block button one_click transition_bg" data-offers="Y" data-item="'+obj.ID+'" data-iblockID="'+obj.IBLOCK_ID+'" data-quantity="'+obj.CONFIG.MIN_QUANTITY_BUY+'" data-props="'+obj.OFFER_PROPS+'" onclick="oneClickBuy('+obj.ID+', '+obj.IBLOCK_ID+', this)">'+
				'<span>'+obj.ONE_CLICK_BUY+'</span>'+
				'</span>';
			if(buyBlock.find('.wrapp_one_click').length){
				buyBlock.find('.wrapp_one_click').html(ocb);
			}else{
				buyBlock.append('<div class="wrapp_one_click">'+ocb+'</div>');
			}
		}else{
			if(buyBlock.find('.wrapp_one_click').length){
				buyBlock.find('.wrapp_one_click').remove();
			}
		}
	}else{
		if(buyBlock.find('.wrapp_one_click').length){
			buyBlock.find('.wrapp_one_click').remove();
		}
	}

	buyBlock.fadeIn();
}

/*set store block*/
window.JCCatalogElement.prototype.setStoreBlock = function(id)
{
	$('.stores_tab > div').hide();
	$('.stores_tab .sku_stores_'+id).show();
}

/*set store quantity*/
window.JCCatalogElement.prototype.setQuantityStore = function(quantity, text)
{
	if(parseFloat(quantity)>0){
		$(this.storeQuanity).find('.icon').removeClass('order').addClass('stock');
	}else{
		$(this.storeQuanity).find('.icon').removeClass('stock').addClass('order');
	}
	$(this.storeQuanity).find('.icon + span').html(text);
	if(!$(".stores_tab").length){
		$('.item-stock .store_view').removeClass('store_view');
	}
}

/*get compare sku*/
window.JCCatalogElement.prototype.CompareCountResult = function(result)
{
	if(result.COMPARE_COUNT){
		for(var i in result.ITEMS){
			if(result.ITEMS[i]==this.offers[this.offerNum].ID){
				this.offers[this.offerNum].COMPARE_ACTIVE=true;
				break;
			}else{
				this.offers[this.offerNum].COMPARE_ACTIVE=false;
			}
		}
		if(this.offers[this.offerNum].COMPARE_ACTIVE){
			$(this.obCompare).addClass('added');
			$(this.obCompare).find('.value:not(.added)').hide();
			$(this.obCompare).find('.value.added').css('display','block');
		}else{
			$(this.obCompare).removeClass('added');
			$(this.obCompare).find('.value.added').hide();
			$(this.obCompare).find('.value:not(.added)').css('display','block');
		}
	}
}

/*get item info*/
window.JCCatalogElement.prototype.ItemInfoResult = function(result)
{
	if(result.HTML){
		$(this.obBasketActions).html(result.HTML);
		$(this.obBasketActions).show();
		this.obAddToBasketBtn = BX(this.visual.BUY_ID);
		this.obBasketBtn = BX(this.visual.BASKET_LINK);
		this.obSubscribeBtn = BX(this.visual.SUBSCRIBE_ID);
		this.obSubscribedBtn = BX(this.visual.SUBSCRIBED_ID);
		BX.bind(this.obAddToBasketBtn, 'click', BX.delegate(this.Add2Basket, this));
		$(this.obBasketActions).removeClass('wide');
		this.ajax_type_item=result.BUYMISSINGGOODS;
		if(result.BUYMISSINGGOODS!="ADD" && !this.canBuy){
			$(this.obBasketActions).addClass('wide');
		}else{
			$(this.obQuantity).css('display','');
		}
		if(result.ONE_CLICK_HTML){
			$('.wrapp_one_click').html(result.ONE_CLICK_HTML);
		}

	}
	//if(this.canBuy){
		basketParams = {
			ajax_action: 'Y'
		};
		BX.ajax.loadJSON(
			arOptimusOptions['SITE_DIR']+'ajax/get_basket_count.php',
			basketParams,
			BX.delegate(this.BasketCountResult, this)
		);
	//}
}

/*get basket items*/
window.JCCatalogElement.prototype.BasketCountResult = function(result)
{
	//if(result.TOTAL_COUNT){
		for(var i in result.ITEMS){
			if(result.ITEMS[i].PRODUCT_ID==this.offers[this.offerNum].ID){
				this.offers[this.offerNum].BASKET_ACTIVE=true;
				break;
			}else{
				this.offers[this.offerNum].BASKET_ACTIVE=false;
			}
		}
		for(var i in result.SUBSCRIBE_ITEMS){
			if(result.SUBSCRIBE_ITEMS[i].PRODUCT_ID==this.offers[this.offerNum].ID){
				this.offers[this.offerNum].SUBSCRIBE_ACTIVE=true;
				break;
			}else{
				this.offers[this.offerNum].SUBSCRIBE_ACTIVE=false;
			}
		}

		this.BasketStateRefresh();
	//}
}

window.JCCatalogElement.prototype.BasketStateRefresh = function(buy_basket)
{
	if(this.offers[this.offerNum].SUBSCRIBE_ACTIVE){
		$(this.obBasketActions).addClass('wide');
		$(this.obSubscribeBtn).hide();
		$(this.obSubscribedBtn).show();
	}else{
		$(this.obBasketActions).addClass('wide');
		$(this.obSubscribedBtn).hide();
		$(this.obSubscribeBtn).show();
	}

	if(this.offers[this.offerNum].BASKET_ACTIVE){
		$(this.obAddToBasketBtn).hide();
		$(this.obQuantity).closest('.counter_wrapp').find('.counter_block').hide();
		$(this.obBasketBtn).show();
		$(this.obBasketActions).addClass('wide');
	}else{
		$(this.obBasketActions).removeClass('wide');
		$(this.obBasketBtn).hide();
		if(this.ajax_type_item=="ADD" || this.canBuy)
			$(this.obQuantity).closest('.counter_wrapp').find('.counter_block').show();
		$(this.obAddToBasketBtn).show();
	}
	if(!this.canBuy){
		$(this.obBasketActions).addClass('wide');
	}
	if(this.canBuy){
		$('.one_click').removeClass('hidden_block').css('opacity', 1);
	}
	BX.style(this.obBasketActions, 'opacity', '1');
	$(this.obBasketActions).closest('.counter_wrapp').removeClass('hidden_block').css('opacity',1);

	if(buy_basket!== 'undefined' && buy_basket=="Y"){
		if($("#basket_line .basket_fly").length && $(window).outerWidth()>768)
		{
			// preAnimateBasketFly($("#basket_line .basket_fly"), 200, 333);
			basketFly('open');
		}
		else if($("#basket_line .cart").length)
		{
			if($("#basket_line .cart").is(".empty_cart"))
			{
				$("#basket_line .cart").removeClass("empty_cart").find(".cart_wrapp a.basket_link").removeAttr("href").addClass("cart-call");
				touchBasket('.cart:not(.empty_cart) .basket_block .link');
			}
			reloadTopBasket('add', $('#basket_line'), 200, 2000, 'Y');
			/*if($(window).outerWidth() > 520){
				//if(arOptimusOptions['THEME']['SHOW_BASKET_ONADDTOCART'] !== 'N'){
					preAnimateBasketPopup('', $('.card_popup_frame'), 0, 200);
				//}
			};*/
		}
		animateBasketLine(200);
	}
}

window.JCCatalogElement.prototype.setPrice = function(price, measure)
{
	var prices = '';
	if (!!this.obPrice.price)
	{
		prices=BX.Currency.currencyFormat(price.DISCOUNT_VALUE, price.CURRENCY, true);
		if(measure){
			prices=(prices ? prices+'/'+measure : "&nbsp;");
		}
		BX.adjust(this.obPrice.price, {html: prices});
		if (price.DISCOUNT_VALUE !== price.VALUE)
		{
			if (this.config.showOldPrice){
				if (!!this.obPrice.full){
					BX.adjust(this.obPrice.full, {style: {display: ''}, html: BX.Currency.currencyFormat(price.VALUE, price.CURRENCY, true)});
				}
				if(this.config.showPercent){
					$(this.obPrice.full).closest('.cost').find('.sale_block').show();
					$(this.obPrice.full).closest('.cost').find('.value').html(price.DISCOUNT_DIFF_PERCENT_RAW);
					$(this.obPrice.full).closest('.cost').find('.text span').html(BX.Currency.currencyFormat(price.DISCOUNT_DIFF, price.CURRENCY, true));
				}
			}
		}
		else
		{
			if (this.config.showOldPrice)
			{
				if (!!this.obPrice.full)
				{
					BX.adjust(this.obPrice.full, {style: {display: 'none'}, html: ''});
				}
				if (!!this.obPrice.discount)
				{
					BX.adjust(this.obPrice.discount, {style: {display: 'none'}, html: ''});
				}
			}
			if (this.config.showPercent)
			{
				if (!!this.obPrice.percent)
				{
					BX.adjust(this.obPrice.percent, {style: {display: 'none'}, html: ''});
				}
				$(this.obPrice.full).closest('.cost').find('.sale_block').hide();
				$(this.obPrice.full).closest('.cost').find('.value').html('');
				$(this.obPrice.full).closest('.cost').find('.text span').html('');
			}
		}
	}
};

window.JCCatalogElement.prototype.Compare = function()
{
	var compareParams, compareLink;
	if($(this.obCompare).find('.added').is(':visible')){
		compareLink = this.compareData.compareUrlDel;
		this.compareData.Added = false;
	}else{
		compareLink = this.compareData.compareUrl;
		this.compareData.Added = true;
	}
	if (!!compareLink){
		switch (this.productType){
			case 1://product
			case 2://set
				compareLink = compareLink.replace('#ID#', this.product.id.toString());
				break;
			case 3://sku
				compareLink = compareLink.replace('#ID#', this.offers[this.offerNum].ID);
				break;
		}
		compareParams = {
			ajax_action: 'Y'
		};
		BX.ajax.loadJSON(
			compareLink,
			compareParams,
			BX.proxy(this.CompareResult, this)
		);
	}
};

window.JCCatalogElement.prototype.CompareResult = function(result)
{
	var popupContent, popupButtons, popupTitle;

	if (typeof result !== 'object')
	{
		return false;
	}
	if (result.STATUS === 'OK')
	{
		BX.onCustomEvent('OnCompareChange');
		if(!this.compareData.Added){
			$(this.obCompare).removeClass('added');
			$(this.obCompare).find('.added').hide();
			$(this.obCompare).find('.value:not(.added)').css('display','block');
		}
		else{
			$(this.obCompare).addClass('added');
			$(this.obCompare).find('.value:not(.added)').hide();
			$(this.obCompare).find('.added').css('display','block');
		}
		jsAjaxUtil.InsertDataToNode(arOptimusOptions['SITE_DIR'] + 'ajax/show_compare_preview_top.php', 'compare_line', false);
	}
	else
	{
		console.log(BX.message('ADD_ERROR_COMPARE'));
	}
	return false;
};

window.JCCatalogElement.prototype.CompareRedirect = function()
{
	if (!!this.compareData.comparePath)
	{
		location.href = this.compareData.comparePath;
	}
	else
	{
		this.obPopupWin.close();
	}
};

window.JCCatalogElement.prototype.InitBasketUrl = function()
{
	var product_url='';
	this.basketUrl = (this.basketMode === 'ADD' ? this.basketData.add_url : this.basketData.buy_url);
	switch (this.productType)
	{
		case 1://product
		case 2://set
			this.basketUrl = this.basketUrl.replace('#ID#', this.product.id.toString());
			product_url=this.product.id.toString();
			break;
		case 3://sku
			this.basketUrl = this.basketUrl.replace('#ID#', this.offers[this.offerNum].ID);
			product_url=this.offers[this.offerNum].URL;
			break;
	}
	this.basketParams = {
		'ajax_basket': 'Y'
	};
	if (this.config.showQuantity)
	{
		this.basketParams[this.basketData.quantity] = this.obQuantity.value;
	}
	if (!!this.basketData.sku_props)
	{
		this.basketParams[this.basketData.sku_props_var] = this.basketData.sku_props;
	}
	if (!!product_url)
	{
		this.basketParams["REQUEST_URI"] = product_url;
	}
};

window.JCCatalogElement.prototype.FillBasketProps = function()
{
	if (!this.visual.BASKET_PROP_DIV)
	{
		return;
	}
	var
		i = 0,
		propCollection = null,
		foundValues = false,
		obBasketProps = null;
	if (this.basketData.useProps && !this.basketData.emptyProps)
	{
		if (!!this.obPopupWin && !!this.obPopupWin.contentContainer)
		{
			obBasketProps = this.obPopupWin.contentContainer;
		}
	}
	else
	{
		obBasketProps = BX(this.visual.BASKET_PROP_DIV);
	}
	if (!!obBasketProps)
	{
		propCollection = obBasketProps.getElementsByTagName('select');
		if (!!propCollection && !!propCollection.length)
		{
			for (i = 0; i < propCollection.length; i++)
			{
				if (!propCollection[i].disabled)
				{
					switch(propCollection[i].type.toLowerCase())
					{
						case 'select-one':
							this.basketParams[propCollection[i].name] = propCollection[i].value;
							foundValues = true;
							break;
						default:
							break;
					}
				}
			}
		}
		propCollection = obBasketProps.getElementsByTagName('input');
		if (!!propCollection && !!propCollection.length)
		{
			for (i = 0; i < propCollection.length; i++)
			{
				if (!propCollection[i].disabled)
				{
					switch(propCollection[i].type.toLowerCase())
					{
						case 'hidden':
							this.basketParams[propCollection[i].name] = propCollection[i].value;
							foundValues = true;
							break;
						case 'radio':
							if (propCollection[i].checked)
							{
								this.basketParams[propCollection[i].name] = propCollection[i].value;
								foundValues = true;
							}
							break;
						default:
							break;
					}
				}
			}
		}
	}
	if (!foundValues)
	{
		this.basketParams[this.basketData.props] = [];
		this.basketParams[this.basketData.props][0] = 0;
	}
};

window.JCCatalogElement.prototype.SendToBasket = function()
{
	if (!this.canBuy)
	{
		return;
	}
	this.InitBasketUrl();
	this.FillBasketProps();
	BX.ajax.loadJSON(
		this.basketUrl,
		this.basketParams,
		BX.proxy(this.BasketResult, this)
	);
};

window.JCCatalogElement.prototype.Add2Basket = function()
{
	this.basketMode = 'ADD';
	this.Basket();
};

window.JCCatalogElement.prototype.BuyBasket = function()
{
	this.basketMode = 'BUY';
	this.Basket();
};

window.JCCatalogElement.prototype.Basket = function()
{
	var contentBasketProps = '';
	if (!this.canBuy)
	{
		return;
	}
	this.SendToBasket();
};

window.JCCatalogElement.prototype.BasketResult = function(arResult)
{
	var popupContent, popupButtons, popupTitle, productPict;
	if (!!this.obPopupWin)
	{
		this.obPopupWin.close();
	}
	if (typeof arResult !== 'object')
	{
		return false;
	}
	if (arResult.STATUS === 'OK' && this.basketMode === 'BUY')
	{
		this.BasketRedirect();
	}
	else
	{
		// this.InitPopupWindow();
		popupTitle = {
			content: BX.create('div', {
				style: { marginRight: '30px', whiteSpace: 'nowrap' },
				text: (arResult.STATUS === 'OK' ? BX.message('TITLE_SUCCESSFUL') : BX.message('TITLE_ERROR'))
			})
		};
		if (arResult.STATUS === 'OK')
		{
			BX.onCustomEvent('OnBasketChange');
			this.offers[this.offerNum].BASKET_ACTIVE=true;
			this.BasketStateRefresh("Y");
		}
		else
		{
			console.log(BX.message('ADD_ERROR_BASKET'));
		}
	}
	return false;
};

window.JCCatalogElement.prototype.BasketRedirect = function()
{
	location.href = (!!this.basketData.basketUrl ? this.basketData.basketUrl : BX.message('BASKET_URL'));
};

window.JCCatalogElement.prototype.InitPopupWindow = function()
{
	if (!!this.obPopupWin)
	{
		return;
	}
	this.obPopupWin = BX.PopupWindowManager.create('CatalogElementBasket_'+this.visual.ID, null, {
		autoHide: false,
		offsetLeft: 0,
		offsetTop: 0,
		overlay : true,
		closeByEsc: true,
		titleBar: true,
		closeIcon: {top: '10px', right: '10px'}
	});
};

window.JCCatalogElement.prototype.onPopupWindowShow = function(popup)
{
	BX.bind(document, 'click', BX.proxy(this.popupWindowClick, this));
};

window.JCCatalogElement.prototype.onPopupWindowClose = function(popup, event)
{
	BX.unbind(document, 'click', BX.proxy(this.popupWindowClick, this));
};

window.JCCatalogElement.prototype.popupWindowClick = function()
{
	if (!!this.obPopupPict && typeof (this.obPopupPict) === 'object')
	{
		if (this.obPopupPict.isShown())
		{
			this.obPopupPict.close();
		}
	}
};

window.JCCatalogElement.prototype.incViewedCounter = function()
{
	if (this.currentIsSet && !this.updateViewedCount)
	{

		switch (this.productType)
		{
			case 1:
			case 2:
				this.viewedCounter.params.PRODUCT_ID = this.product.id;
				this.viewedCounter.params.PARENT_ID = this.product.id;
				break;
			case 3:
				this.viewedCounter.params.PARENT_ID = this.product.id;
				this.viewedCounter.params.PRODUCT_ID = this.offers[this.offerNum].ID;
				break;
			default:
				return;
		}
		this.viewedCounter.params.SITE_ID = BX.message('SITE_ID');
		this.updateViewedCount = true;
		BX.ajax.post(
			this.viewedCounter.path,
			this.viewedCounter.params,
			BX.delegate(function(){ this.updateViewedCount = false; }, this)
		);
	}
};

window.JCCatalogElement.prototype.allowViewedCount = function(update)
{
	update = !!update;
	this.currentIsSet = true;
	if (update)
	{
		this.incViewedCounter();
	}
};
})(window);140  76651|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/catalog.element/main/template.php|f65e1fd6<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();?>
<div class="basket_props_block" id="bx_basket_div_<?=$arResult["ID"];?>" style="display: none;">
	<?if (!empty($arResult['PRODUCT_PROPERTIES_FILL'])){
		foreach ($arResult['PRODUCT_PROPERTIES_FILL'] as $propID => $propInfo){?>
			<input type="hidden" name="<? echo $arParams['PRODUCT_PROPS_VARIABLE']; ?>[<? echo $propID; ?>]" value="<? echo htmlspecialcharsbx($propInfo['ID']); ?>">
			<?if (isset($arResult['PRODUCT_PROPERTIES'][$propID]))
				unset($arResult['PRODUCT_PROPERTIES'][$propID]);
		}
	}
	$arResult["EMPTY_PROPS_JS"]="Y";
	$emptyProductProperties = empty($arResult['PRODUCT_PROPERTIES']);
	if (!$emptyProductProperties){
		$arResult["EMPTY_PROPS_JS"]="N";?>
		<div class="wrapper">
			<table>
				<?foreach ($arResult['PRODUCT_PROPERTIES'] as $propID => $propInfo){?>
					<tr>
						<td><? echo $arResult['PROPERTIES'][$propID]['NAME']; ?></td>
						<td>
							<?if('L' == $arResult['PROPERTIES'][$propID]['PROPERTY_TYPE'] && 'C' == $arResult['PROPERTIES'][$propID]['LIST_TYPE']){
								foreach($propInfo['VALUES'] as $valueID => $value){?>
									<label>
										<input type="radio" name="<? echo $arParams['PRODUCT_PROPS_VARIABLE']; ?>[<? echo $propID; ?>]" value="<? echo $valueID; ?>" <? echo ($valueID == $propInfo['SELECTED'] ? '"checked"' : ''); ?>><? echo $value; ?>
									</label>
								<?}
							}else{?>
								<select name="<? echo $arParams['PRODUCT_PROPS_VARIABLE']; ?>[<? echo $propID; ?>]">
									<?foreach($propInfo['VALUES'] as $valueID => $value){?>
										<option value="<? echo $valueID; ?>" <? echo ($valueID == $propInfo['SELECTED'] ? '"selected"' : ''); ?>><? echo $value; ?></option>
									<?}?>
								</select>
							<?}?>
						</td>
					</tr>
				<?}?>
			</table>
		</div>
	<?}?>
</div>
<?
$this->setFrameMode(true);
$currencyList = '';
if (!empty($arResult['CURRENCIES'])){
	$templateLibrary[] = 'currency';
	$currencyList = CUtil::PhpToJSObject($arResult['CURRENCIES'], false, true, true);
}
$templateData = array(
	'TEMPLATE_LIBRARY' => $templateLibrary,
	'CURRENCIES' => $currencyList,
	'STORES' => array(
		"USE_STORE_PHONE" => $arParams["USE_STORE_PHONE"],
		"SCHEDULE" => $arParams["SCHEDULE"],
		"USE_MIN_AMOUNT" => $arParams["USE_MIN_AMOUNT"],
		"MIN_AMOUNT" => $arParams["MIN_AMOUNT"],
		"ELEMENT_ID" => $arResult["ID"],
		"STORE_PATH"  =>  $arParams["STORE_PATH"],
		"MAIN_TITLE"  =>  $arParams["MAIN_TITLE"],
		"MAX_AMOUNT"=>$arParams["MAX_AMOUNT"],
		"USE_ONLY_MAX_AMOUNT" => $arParams["USE_ONLY_MAX_AMOUNT"],
		"SHOW_EMPTY_STORE" => $arParams['SHOW_EMPTY_STORE'],
		"SHOW_GENERAL_STORE_INFORMATION" => $arParams['SHOW_GENERAL_STORE_INFORMATION'],
		"USE_ONLY_MAX_AMOUNT" => $arParams["USE_ONLY_MAX_AMOUNT"],
		"USER_FIELDS" => $arParams['USER_FIELDS'],
		"FIELDS" => $arParams['FIELDS'],
		"STORES" => $arParams['STORES'],
	)
);
unset($currencyList, $templateLibrary);

$arSkuTemplate = array();
if (!empty($arResult['SKU_PROPS'])){
	$arSkuTemplate=COptimus::GetSKUPropsArray($arResult['SKU_PROPS'], $arResult["SKU_IBLOCK_ID"], "list", $arParams["OFFER_HIDE_NAME_PROPS"]);
}
$strMainID = $this->GetEditAreaId($arResult['ID']);

$strObName = 'ob'.preg_replace("/[^a-zA-Z0-9_]/", "x", $strMainID);

$arResult["strMainID"] = $this->GetEditAreaId($arResult['ID']);
$arItemIDs=COptimus::GetItemsIDs($arResult, "Y");
$totalCount = COptimus::GetTotalCount($arResult);
$arQuantityData = COptimus::GetQuantityArray($totalCount, $arItemIDs["ALL_ITEM_IDS"], "Y");

$arParams["BASKET_ITEMS"]=($arParams["BASKET_ITEMS"] ? $arParams["BASKET_ITEMS"] : array());
$useStores = $arParams["USE_STORE"] == "Y" && $arResult["STORES_COUNT"] && $arQuantityData["RIGHTS"]["SHOW_QUANTITY"];
$showCustomOffer=(($arResult['OFFERS'] && $arParams["TYPE_SKU"] !="N") ? true : false);
if($showCustomOffer){
	$templateData['JS_OBJ'] = $strObName;
}
$strMeasure='';
if($arResult["OFFERS"]){
	$strMeasure=$arResult["MIN_PRICE"]["CATALOG_MEASURE_NAME"];
	$templateData["STORES"]["OFFERS"]="Y";
	foreach($arResult["OFFERS"] as $arOffer){
		$templateData["STORES"]["OFFERS_ID"][]=$arOffer["ID"];
	}
}else{
	if (($arParams["SHOW_MEASURE"]=="Y")&&($arResult["CATALOG_MEASURE"])){
		$arMeasure = CCatalogMeasure::getList(array(), array("ID"=>$arResult["CATALOG_MEASURE"]), false, false, array())->GetNext();
		$strMeasure=$arMeasure["SYMBOL_RUS"];
	}
	$arAddToBasketData = COptimus::GetAddToBasketArray($arResult, $totalCount, $arParams["DEFAULT_COUNT"], $arParams["BASKET_URL"], false, $arItemIDs["ALL_ITEM_IDS"], 'big_btn w_icons', $arParams);
}
$arOfferProps = implode(';', $arParams['OFFERS_CART_PROPERTIES']);

// save item viewed
$arFirstPhoto = reset($arResult['MORE_PHOTO']);
$arViewedData = array(
	'PRODUCT_ID' => $arResult['ID'],
	'IBLOCK_ID' => $arResult['IBLOCK_ID'],
	'NAME' => $arResult['NAME'],
	'DETAIL_PAGE_URL' => $arResult['DETAIL_PAGE_URL'],
	'PICTURE_ID' => $arResult['PREVIEW_PICTURE'] ? $arResult['PREVIEW_PICTURE']['ID'] : ($arFirstPhoto ? $arFirstPhoto['ID'] : false),
	'CATALOG_MEASURE_NAME' => $arResult['CATALOG_MEASURE_NAME'],
	'MIN_PRICE' => $arResult['MIN_PRICE'],
	'CAN_BUY' => $arResult['CAN_BUY'] ? 'Y' : 'N',
	'IS_OFFER' => 'N',
	'WITH_OFFERS' => $arResult['OFFERS'] ? 'Y' : 'N',
);
?>
<script type="text/javascript">
setViewedProduct(<?=$arResult['ID']?>, <?=CUtil::PhpToJSObject($arViewedData, false)?>);
</script>

<div class="item_main_info <?=(!$showCustomOffer ? "noffer" : "");?> <?=($arParams["SHOW_UNABLE_SKU_PROPS"] != "N" ? "show_un_props" : "unshow_un_props");?>" id="<?=$arItemIDs["strMainID"];?>">
	<div class="img_wrapper">
		<div class="stickers">
			<?if (is_array($arResult["PROPERTIES"]["HIT"]["VALUE_XML_ID"])):?>
				<?foreach($arResult["PROPERTIES"]["HIT"]["VALUE_XML_ID"] as $key=>$class){?>
					<div><div class="sticker_<?=strtolower($class);?>"><?=$arResult["PROPERTIES"]["HIT"]["VALUE"][$key]?></div></div>
				<?}?>
			<?endif;?>
			<?if($arParams["SALE_STIKER"] && $arResult["PROPERTIES"][$arParams["SALE_STIKER"]]["VALUE"]){?>
				<div><div class="sticker_sale_text"><?=$arResult["PROPERTIES"][$arParams["SALE_STIKER"]]["VALUE"];?></div></div>
			<?}?>
		</div>
		<div class="item_slider">
			<?if(((!$arResult["OFFERS"] && $arParams["DISPLAY_WISH_BUTTONS"] != "N") || ($arParams["DISPLAY_COMPARE"] == "Y")) || (strlen($arResult["DISPLAY_PROPERTIES"]["CML2_ARTICLE"]["VALUE"]) || ($arResult['SHOW_OFFERS_PROPS'] && $showCustomOffer))):?>
				<div class="like_wrapper">
					<?if((!$arResult["OFFERS"] && $arParams["DISPLAY_WISH_BUTTONS"] != "N") || ($arParams["DISPLAY_COMPARE"] == "Y")):?>
						<div class="like_icons iblock">
							<?if($arParams["DISPLAY_WISH_BUTTONS"] != "N"):?>
								<?if(!$arResult["OFFERS"]):?>
									<div class="wish_item text" data-item="<?=$arResult["ID"]?>" data-iblock="<?=$arResult["IBLOCK_ID"]?>">
										<span class="value" title="<?=GetMessage('CT_BCE_CATALOG_IZB')?>" ><i></i></span>
										<span class="value added" title="<?=GetMessage('CT_BCE_CATALOG_IZB_ADDED')?>"><i></i></span>
									</div>
								<?elseif($arResult["OFFERS"] && $arParams["TYPE_SKU"] === 'TYPE_1' && !empty($arResult['OFFERS_PROP'])):?>
									<div class="wish_item text " data-item="" data-iblock="<?=$arResult["IBLOCK_ID"]?>" <?=(!empty($arResult['OFFERS_PROP']) ? 'data-offers="Y"' : '');?> data-props="<?=$arOfferProps?>">
										<span class="value <?=$arParams["TYPE_SKU"];?>" title="<?=GetMessage('CT_BCE_CATALOG_IZB')?>"><i></i></span>
										<span class="value added <?=$arParams["TYPE_SKU"];?>" title="<?=GetMessage('CT_BCE_CATALOG_IZB_ADDED')?>"><i></i></span>
									</div>
								<?endif;?>
							<?endif;?>
							<?if($arParams["DISPLAY_COMPARE"] == "Y"):?>
								<?if(!$arResult["OFFERS"]):?>
									<div data-item="<?=$arResult["ID"]?>" data-iblock="<?=$arResult["IBLOCK_ID"]?>" data-href="<?=$arResult["COMPARE_URL"]?>" class="compare_item text <?=($arResult["OFFERS"] ? $arParams["TYPE_SKU"] : "");?>" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['COMPARE_LINK']; ?>">
										<span class="value" title="<?=GetMessage('CT_BCE_CATALOG_COMPARE')?>"><i></i></span>
										<span class="value added" title="<?=GetMessage('CT_BCE_CATALOG_COMPARE_ADDED')?>"><i></i></span>
									</div>
								<?elseif($arResult["OFFERS"] && $arParams["TYPE_SKU"] === 'TYPE_1'):?>
									<div data-item="" data-iblock="<?=$arResult["IBLOCK_ID"]?>" data-href="<?=$arResult["COMPARE_URL"]?>" class="compare_item text <?=$arParams["TYPE_SKU"];?>">
										<span class="value" title="<?=GetMessage('CT_BCE_CATALOG_COMPARE')?>"><i></i></span>
										<span class="value added" title="<?=GetMessage('CT_BCE_CATALOG_COMPARE_ADDED')?>"><i></i></span>
									</div>
								<?endif;?>
							<?endif;?>
						</div>
					<?endif;?>
				</div>
			<?endif;?>

			<?reset($arResult['MORE_PHOTO']);
			$arFirstPhoto = current($arResult['MORE_PHOTO']);
			$viewImgType=$arParams["DETAIL_PICTURE_MODE"];?>
			<div class="slides">
				<?if($showCustomOffer && !empty($arResult['OFFERS_PROP'])){?>
					<div class="offers_img wof">
						<?$alt=$arFirstPhoto["ALT"];
						$title=$arFirstPhoto["TITLE"];?>
						<?if($arFirstPhoto["BIG"]["src"]){?>
							<a href="<?=($viewImgType=="POPUP" ? $arFirstPhoto["BIG"]["src"] : "javascript:void(0)");?>" class="<?=($viewImgType=="POPUP" ? "popup_link" : "line_link");?>" title="<?=$title;?>">
								<img id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PICT']; ?>" src="<?=$arFirstPhoto['SMALL']['src']; ?>" <?=($viewImgType=="MAGNIFIER" ? 'data-large=""': "");?> alt="<?=$alt;?>" title="<?=$title;?>">
							</a>
						<?}else{?>
							<a href="javascript:void(0)" class="" title="<?=$title;?>">
								<img id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PICT']; ?>" src="<?=$arFirstPhoto['SRC']; ?>" alt="<?=$alt;?>" title="<?=$title;?>">
							</a>
						<?}?>
					</div>
				<?}else{
					if($arResult["MORE_PHOTO"]){?>
						<ul>
							<?foreach($arResult["MORE_PHOTO"] as $i => $arImage){?>
								<?$isEmpty=($arImage["SMALL"]["src"] ? false : true );?>
								<?
								$alt=$arImage["ALT"];
								$title=$arImage["TITLE"];
								?>
								<li id="photo-<?=$i?>" <?=(!$i ? 'class="current"' : 'style="display: none;"')?>>
									<?if(!$isEmpty){?>
										<a href="<?=($viewImgType=="POPUP" ? $arImage["BIG"]["src"] : "javascript:void(0)");?>" <?=($bIsOneImage ? '' : 'data-fancybox-group="item_slider"')?> class="<?=($viewImgType=="POPUP" ? "popup_link fancy" : "line_link");?>" title="<?=$title;?>">
											<img  src="<?=$arImage["SMALL"]["src"]?>" <?=($viewImgType=="MAGNIFIER" ? "class='zoom_picture'" : "");?> <?=($viewImgType=="MAGNIFIER" ? 'data-large="'.$arImage["BIG"]["src"].'"': "");?> alt="<?=$alt;?>" title="<?=$title;?>" />
										</a>
									<?}else{?>
										<img  src="<?=$arImage["SRC"]?>" alt="<?=$alt;?>" title="<?=$title;?>" />
									<?}?>
								</li>
							<?}?>
						</ul>
					<?}
				}?>
			</div>
			<?/*thumbs*/?>
			<?if(!$showCustomOffer || empty($arResult['OFFERS_PROP'])){
				if(count($arResult["MORE_PHOTO"]) > 1):?>
					<div class="wrapp_thumbs">
						<div class="thumbs flexslider" data-plugin-options='{"animation": "slide", "selector": ".slides_block > li", "directionNav": true, "itemMargin":10, "itemWidth": 54, "controlsContainer": ".thumbs_navigation", "controlNav" :false, "animationLoop": true, "slideshow": false}' style="max-width:<?=ceil(((count($arResult['MORE_PHOTO']) <= 4 ? count($arResult['MORE_PHOTO']) : 4) * 64) - 10)?>px;">
							<ul class="slides_block" id="thumbs">
								<?foreach($arResult["MORE_PHOTO"]as $i => $arImage):?>
									<li <?=(!$i ? 'class="current"' : '')?>>
										<span><img  src="<?=$arImage["THUMB"]["src"]?>" alt="<?=$arImage["ALT"];?>" title="<?=$arImage["TITLE"];?>" /></span>
									</li>
								<?endforeach;?>
							</ul>
							<span class="thumbs_navigation custom_flex"></span>
						</div>
					</div>
					<script>
						$(document).ready(function(){
							$('.item_slider .thumbs li').first().addClass('current');
							$('.item_slider .thumbs').delegate('li:not(.current)', 'click', function(){
								$(this).addClass('current').siblings().removeClass('current').parents('.item_slider').find('.slides li').fadeOut(333);
								$(this).parents('.item_slider').find('.slides li').eq($(this).index()).addClass('current').stop().fadeIn(333);
							});
						})
					</script>
				<?endif;?>
			<?}else{?>
				<div class="wrapp_thumbs">
					<div class="sliders">
						<div class="thumbs" style="">
						</div>
					</div>
				</div>
			<?}?>
		</div>
		<?/*mobile*/?>
		<?if(!$showCustomOffer || empty($arResult['OFFERS_PROP'])){?>
			<div class="item_slider flex flexslider" data-plugin-options='{"animation": "slide", "directionNav": false, "animationLoop": false, "slideshow": true, "slideshowSpeed": 10000, "animationSpeed": 600}'>
				<ul class="slides">
					<?if($arResult["MORE_PHOTO"]){
						foreach($arResult["MORE_PHOTO"] as $i => $arImage){?>
							<?$isEmpty=($arImage["SMALL"]["src"] ? false : true );?>
							<li id="mphoto-<?=$i?>" <?=(!$i ? 'class="current"' : 'style="display: none;"')?>>
								<?
								$alt=$arImage["ALT"];
								$title=$arImage["TITLE"];
								?>
								<?if(!$isEmpty){?>
									<a href="<?=$arImage["BIG"]["src"]?>" data-fancybox-group="item_slider_flex" class="fancy" title="<?=$title;?>" >
										<img  src="<?=$arImage["SMALL"]["src"]?>" alt="<?=$alt;?>" title="<?=$title;?>" />
									</a>
								<?}else{?>
									<img  src="<?=$arImage["SRC"];?>" alt="<?=$alt;?>" title="<?=$title;?>" />
								<?}?>
							</li>
						<?}
					}?>
				</ul>
			</div>
		<?}else{?>
			<div class="item_slider flex"></div>
		<?}?>
	</div>
	<div class="right_info">
		<div class="info_item">
			<?$isArticle=(strlen($arResult["DISPLAY_PROPERTIES"]["CML2_ARTICLE"]["VALUE"]) || ($arResult['SHOW_OFFERS_PROPS'] && $showCustomOffer));?>
			<?if($isArticle || $arResult["BRAND_ITEM"] || $arParams["SHOW_RATING"] == "Y" || strlen($arResult["PREVIEW_TEXT"])){?>
				<div class="top_info">
					<div class="rows_block">
						<?$col=1;
						if($isArticle && $arResult["BRAND_ITEM"] && $arParams["SHOW_RATING"] == "Y"){
							$col=3;
						}elseif(($isArticle && $arResult["BRAND_ITEM"]) || ($isArticle && $arParams["SHOW_RATING"] == "Y") || ($arResult["BRAND_ITEM"] && $arParams["SHOW_RATING"] == "Y")){
							$col=2;
						}?>
						<?if($arParams["SHOW_RATING"] == "Y"):?>
							<div class="item_block col-<?=$col;?>">
								<div class="rating">
									<?$APPLICATION->IncludeComponent(
									   "bitrix:iblock.vote",
									   "element_rating",
									   Array(
										  "IBLOCK_TYPE" => $arParams["IBLOCK_TYPE"],
										  "IBLOCK_ID" => $arResult["IBLOCK_ID"],
										  "ELEMENT_ID" =>$arResult["ID"],
										  "MAX_VOTE" => 5,
										  "VOTE_NAMES" => array(),
										  "CACHE_TYPE" => $arParams["CACHE_TYPE"],
										  "CACHE_TIME" => $arParams["CACHE_TIME"],
										  "DISPLAY_AS_RATING" => 'vote_avg'
									   ),
									   $component, array("HIDE_ICONS" =>"Y")
									);?>
								</div>
							</div>
						<?endif;?>
						<?if($isArticle):?>
							<div class="item_block col-<?=$col;?>">
								<div class="article iblock" <?if($arResult['SHOW_OFFERS_PROPS']){?>id="<? echo $arItemIDs["ALL_ITEM_IDS"]['DISPLAY_PROP_ARTICLE_DIV'] ?>" style="display: none;"<?}?>>
									<span class="block_title"><?=GetMessage("ARTICLE");?>:</span>
									<span class="value"><?=$arResult["DISPLAY_PROPERTIES"]["CML2_ARTICLE"]["VALUE"]?></span>
								</div>
							</div>
						<?endif;?>

						<?if($arResult["BRAND_ITEM"]){?>
							<div class="item_block col-<?=$col;?>">
								<div class="brand">
									<?if(!$arResult["BRAND_ITEM"]["IMAGE"]):?>
										<b class="block_title"><?=GetMessage("BRAND");?>:</b>
										<a href="<?=$arResult["BRAND_ITEM"]["DETAIL_PAGE_URL"]?>"><?=$arResult["BRAND_ITEM"]["NAME"]?></a>
									<?else:?>
										<a class="brand_picture" href="<?=$arResult["BRAND_ITEM"]["DETAIL_PAGE_URL"]?>">
											<img  src="<?=$arResult["BRAND_ITEM"]["IMAGE"]["src"]?>" alt="<?=$arResult["BRAND_ITEM"]["NAME"]?>" title="<?=$arResult["BRAND_ITEM"]["NAME"]?>" />
										</a>
									<?endif;?>
								</div>
							</div>
						<?}?>
					</div>
					<?if(strlen($arResult["PREVIEW_TEXT"])):?>
						<div class="preview_text dotdot"><?=$arResult["PREVIEW_TEXT"]?></div>
						<?if(strlen($arResult["DETAIL_TEXT"])):?>
							<div class="more_block icons_fa color_link"><span><?=GetMessage('MORE_TEXT_BOTTOM');?></span></div>
						<?endif;?>
					<?endif;?>
				</div>
			<?}?>
			<div class="middle_info">
				<div class="prices_block">
					<div class="cost prices clearfix">
						<?if( count( $arResult["OFFERS"] ) > 0 ){
							$minPrice = false;
							$min_price_id=0;
							if (isset($arResult['MIN_PRICE']) || isset($arResult['RATIO_PRICE'])){
								// $minPrice = (isset($arResult['RATIO_PRICE']) ? $arResult['RATIO_PRICE'] : $arResult['MIN_PRICE']);
								$minPrice = $arResult['MIN_PRICE'];
							}
							$offer_id=0;
							if($arParams["TYPE_SKU"]=="N"){
								$offer_id=$minPrice["MIN_ITEM_ID"];
							}
							$min_price_id=$minPrice["MIN_PRICE_ID"];
							if(!$min_price_id)
								$min_price_id=$minPrice["PRICE_ID"];
							if($minPrice["MIN_ITEM_ID"])
								$item_id=$minPrice["MIN_ITEM_ID"];
							$prefix='';
							if('N' == $arParams['TYPE_SKU'] || $arParams['DISPLAY_TYPE'] =='table' || empty($arResult['OFFERS_PROP'])){
								$prefix=GetMessage("CATALOG_FROM");
							}
							if($arParams["SHOW_OLD_PRICE"]=="Y"){?>
								<div class="price" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PRICE']; ?>">
									<?if(strlen($minPrice["PRINT_DISCOUNT_VALUE"])):?>
										<?=$prefix;?> <?=$minPrice["PRINT_DISCOUNT_VALUE"];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
									<?endif;?>
								</div>
								<div class="price discount" >
									<span id="<?=$arItemIDs["ALL_ITEM_IDS"]['OLD_PRICE']?>" <?=(!$minPrice["DISCOUNT_DIFF"] ? 'style="display:none;"' : '')?>><?=$minPrice["PRINT_VALUE"];?></span>
								</div>
								<?/*if($arParams["SHOW_DISCOUNT_PERCENT"]=="Y"){?>
									<div class="sale_block" <?=(!$minPrice["DISCOUNT_DIFF"] ? 'style="display:none;"' : '')?>>
										<?$percent=round(($minPrice["DISCOUNT_DIFF"]/$minPrice["VALUE"])*100, 2);?>
										<div class="value">-<?=$percent;?>%</div>
										<div class="text"><?=GetMessage("CATALOG_ECONOMY");?> <span><?=$minPrice["PRINT_DISCOUNT_DIFF"];?></span></div>
										<div class="clearfix"></div>
									</div>
								<?}*/?>
							<?}else{?>
								<div class="price" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PRICE']; ?>">
									<?if(strlen($minPrice["PRINT_DISCOUNT_VALUE"])):?>
										<?=$prefix;?> <?=$minPrice['PRINT_DISCOUNT_VALUE'];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
									<?endif;?>
								</div>
							<?}?>
						<?}else{?>
							<?
							$arCountPricesCanAccess = 0;
							$min_price_id=0;
							foreach( $arResult["PRICES"] as $key => $arPrice ) { if($arPrice["CAN_ACCESS"]){$arCountPricesCanAccess++;} }?>
							<?foreach($arResult["PRICES"] as $key => $arPrice){?>
								<?if($arPrice["CAN_ACCESS"]){
									$percent=0;
									if($arPrice["MIN_PRICE"]=="Y"){
										$min_price_id=$arPrice["PRICE_ID"];
									}?>
									<?$price = CPrice::GetByID($arPrice["ID"]);?>
									<?if($arCountPricesCanAccess > 1):?>
										<div class="price_name"><?=$price["CATALOG_GROUP_NAME"];?></div>
									<?endif;?>
									<?if($arPrice["VALUE"] > $arPrice["DISCOUNT_VALUE"] && $arParams["SHOW_OLD_PRICE"]=="Y"){?>
										<div class="price" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PRICE']; ?>">
											<?if(strlen($arPrice["PRINT_DISCOUNT_VALUE"])):?>
												<?=$arPrice["PRINT_DISCOUNT_VALUE"];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
											<?endif;?>
										</div>
										<div class="price discount">
											<span><?=$arPrice["PRINT_VALUE"];?></span>
										</div>
										<?/*if($arParams["SHOW_DISCOUNT_PERCENT"]=="Y"){?>
											<div class="sale_block">
												<?$percent=round(($arPrice["DISCOUNT_DIFF"]/$arPrice["VALUE"])*100, 2);?>
												<?if($percent && $percent<100){?>
													<div class="value">-<?=$percent;?>%</div>
												<?}?>
												<div class="text"><?=GetMessage("CATALOG_ECONOMY");?> <span><?=$arPrice["PRINT_DISCOUNT_DIFF"];?></span></div>
												<div class="clearfix"></div>
											</div>
										<?}*/?>
									<?}else{?>
										<div class="price" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PRICE']; ?>">
											<?if(strlen($arPrice["PRINT_VALUE"])):?>
												<?=$arPrice["PRINT_VALUE"];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
											<?endif;?>
										</div>
									<?}?>
								<?}?>
							<?}?>
						<?}?>
					</div>
					<?if($arParams["SHOW_DISCOUNT_TIME"]=="Y"){?>
						<?$arDiscounts = CCatalogDiscount::GetDiscountByProduct( $arResult["ID"], $USER->GetUserGroupArray(), "N", $min_price_id, SITE_ID );
						$arDiscount=array();
						if($arDiscounts)
							$arDiscount=current($arDiscounts);
						if($arDiscount["ACTIVE_TO"]){?>
							<div class="view_sale_block">
								<div class="count_d_block">
									<span class="active_to hidden"><?=$arDiscount["ACTIVE_TO"];?></span>
									<div class="title"><?=GetMessage("UNTIL_AKC");?></div>
									<span class="countdown values"></span>
								</div>
								<div class="quantity_block">
									<div class="title"><?=GetMessage("TITLE_QUANTITY_BLOCK");?></div>
									<div class="values">
										<span class="item">
											<span class="value" <?=((count( $arResult["OFFERS"] ) > 0 && $arParams["TYPE_SKU"] == 'TYPE_1') ? 'style="opacity:0;"' : '')?>><?=$totalCount;?></span>
											<span class="text"><?=GetMessage("TITLE_QUANTITY");?></span>
										</span>
									</div>
								</div>
							</div>
						<?}?>
					<?}?>
					<?if($useStores){?>
						<div class="p_block">
					<?}?>
						<?=$arQuantityData["HTML"];?>
					<?if($useStores){?>
						</div>
					<?}?>
				</div>
				<div class="buy_block">
					<?if($arResult["OFFERS"] && $showCustomOffer){?>
						<div class="sku_props">
							<?if (!empty($arResult['OFFERS_PROP'])){?>
								<div class="bx_catalog_item_scu wrapper_sku" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PROP_DIV']; ?>">
									<?foreach ($arSkuTemplate as $code => $strTemplate){
										if (!isset($arResult['OFFERS_PROP'][$code]))
											continue;
										echo str_replace('#ITEM#_prop_', $arItemIDs["ALL_ITEM_IDS"]['PROP'], $strTemplate);
									}?>
								</div>
							<?}?>
							<?$arItemJSParams=COptimus::GetSKUJSParams($arResult, $arParams, $arResult, "Y");?>
							<script type="text/javascript">
								var <? echo $arItemIDs["strObName"]; ?> = new JCCatalogElement(<? echo CUtil::PhpToJSObject($arItemJSParams, false, true); ?>);
							</script>
						</div>
					<?}?>
					<?if(!$arResult["OFFERS"]):?>
						<script>
							$(document).ready(function() {
								$('.catalog_detail .tabs_section .tabs_content .form.inline input[data-sid="PRODUCT_NAME"]').attr('value', $('h1').text());
							});
						</script>
						<div class="counter_wrapp">
							<?if(($arAddToBasketData["OPTIONS"]["USE_PRODUCT_QUANTITY_DETAIL"] && $arAddToBasketData["ACTION"] == "ADD") && $arResult["CAN_BUY"]):?>
								<div class="counter_block big_basket" data-offers="<?=($arResult["OFFERS"] ? "Y" : "N");?>" data-item="<?=$arResult["ID"];?>" <?=(($arResult["OFFERS"] && $arParams["TYPE_SKU"]=="N") ? "style='display: none;'" : "");?>>
									<span class="minus" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['QUANTITY_DOWN']; ?>">-</span>
									<input type="text" class="text" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['QUANTITY']; ?>" name="<? echo $arParams["PRODUCT_QUANTITY_VARIABLE"]; ?>" value="<?=$arAddToBasketData["MIN_QUANTITY_BUY"]?>" />
									<span class="plus" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['QUANTITY_UP']; ?>" <?=($arAddToBasketData["MAX_QUANTITY_BUY"] ? "data-max='".$arAddToBasketData["MAX_QUANTITY_BUY"]."'" : "")?>>+</span>
								</div>
							<?endif;?>
							<div id="<? echo $arItemIDs["ALL_ITEM_IDS"]['BASKET_ACTIONS']; ?>" class="button_block <?=(($arAddToBasketData["ACTION"] == "ORDER" /*&& !$arResult["CAN_BUY"]*/) || !$arResult["CAN_BUY"] || !$arAddToBasketData["OPTIONS"]["USE_PRODUCT_QUANTITY_DETAIL"] || ($arAddToBasketData["ACTION"] == "SUBSCRIBE" && $arResult["CATALOG_SUBSCRIBE"] == "Y")  ? "wide" : "");?>">
								<!--noindex-->
									<?=$arAddToBasketData["HTML"]?>
								<!--/noindex-->
							</div>
						</div>
						<?if($arAddToBasketData["ACTION"] !== "NOTHING"):?>
							<?if($arAddToBasketData["ACTION"] == "ADD" && $arResult["CAN_BUY"] && $arParams["SHOW_ONE_CLICK_BUY"]!="N"):?>
								<div class="wrapp_one_click">
									<span class="transparent big_btn type_block button transition_bg one_click" data-item="<?=$arResult["ID"]?>" data-iblockID="<?=$arParams["IBLOCK_ID"]?>" data-quantity="<?=$arAddToBasketData["MIN_QUANTITY_BUY"];?>" onclick="oneClickBuy('<?=$arResult["ID"]?>', '<?=$arParams["IBLOCK_ID"]?>', this)">
										<span><?=GetMessage('ONE_CLICK_BUY')?></span>
									</span>
								</div>
							<?endif;?>
						<?endif;?>
					<?elseif($arResult["OFFERS"] && $arParams['TYPE_SKU'] == 'TYPE_1'):?>
						<div class="offer_buy_block buys_wrapp" style="display:none;">
							<div class="counter_wrapp"></div>
						</div>
					<?elseif($arResult["OFFERS"] && $arParams['TYPE_SKU'] != 'TYPE_1'):?>
						<span class="big_btn slide_offer button transition_bg type_block"><i></i><span><?=GetMessage("MORE_TEXT_BOTTOM");?></span></span>
					<?endif;?>
				</div>
			</div>
			<?if(is_array($arResult["STOCK"]) && $arResult["STOCK"]):?>
				<?foreach($arResult["STOCK"] as $key => $arStockItem):?>
					<div class="stock_board">
						<div class="title"><?=GetMessage("CATALOG_STOCK_TITLE")?></div>
						<div class="txt"><?=$arStockItem["PREVIEW_TEXT"]?></div>
						<a class="read_more" href="<?=$arStockItem["DETAIL_PAGE_URL"]?>"><?=GetMessage("CATALOG_STOCK_VIEW")?></a>
					</div>
				<?endforeach;?>
			<?endif;?>
			<div class="element_detail_text wrap_md">
				<div class="sh">
					<?$APPLICATION->IncludeFile(SITE_DIR."include/share_buttons.php", Array(), Array("MODE" => "html", "NAME" => GetMessage('CT_BCE_CATALOG_SOC_BUTTON')));?>
				</div>
				<div class="price_txt">
					<?$APPLICATION->IncludeFile(SITE_DIR."include/element_detail_text.php", Array(), Array("MODE" => "html",  "NAME" => GetMessage('CT_BCE_CATALOG_DOP_DESCR')));?>
				</div>
			</div>
		</div>
	</div>
	<div class="clearleft"></div>
	<?if($arResult["TIZERS_ITEMS"]){?>
		<div class="tizers_block_detail">
			<div class="rows_block">
				<?$count_t_items=count($arResult["TIZERS_ITEMS"]);?>
				<?foreach($arResult["TIZERS_ITEMS"] as $arItem){?>
					<div class="item_block tizer col-<?=$count_t_items;?>">
						<div class="inner_wrapper">
							<?if($arItem["UF_LINK"]){?>
								<a href="<?=$arItem["UF_LINK"];?>" <?=(strpos($arItem["UF_LINK"], "http") !== false ? "target='_blank' rel='nofollow'" : '')?>>
							<?}?>
							<?if($arItem["UF_FILE"]){?>
								<div class="image">
									<img src="<?=$arItem["PREVIEW_PICTURE"]["src"];?>" alt="<?=$arItem["UF_NAME"];?>" title="<?=$arItem["UF_NAME"];?>">
								</div>
							<?}?>
							<div class="text">
								<?=$arItem["UF_NAME"];?>
							</div>
							<div class="clearfix"></div>
							<?if($arItem["UF_LINK"]){?>
								</a>
							<?}?>
						</div>
					</div>
				<?}?>
			</div>
		</div>
	<?}?>

	<?if($arParams["SHOW_KIT_PARTS"] == "Y" && $arResult["SET_ITEMS"]):?>
		<div class="set_wrapp set_block">
			<div class="title"><?=GetMessage("GROUP_PARTS_TITLE")?></div>
			<ul>
				<?foreach($arResult["SET_ITEMS"] as $iii => $arSetItem):?>
					<li class="item">
						<div class="item_inner">
							<div class="image">
								<a href="<?=$arSetItem["DETAIL_PAGE_URL"]?>">
									<?if($arSetItem["PREVIEW_PICTURE"]):?>
										<?$img = CFile::ResizeImageGet($arSetItem["PREVIEW_PICTURE"], array("width" => 140, "height" => 140), BX_RESIZE_IMAGE_PROPORTIONAL, true);?>
										<img  src="<?=$img["src"]?>" alt="<?=$arSetItem["NAME"];?>" title="<?=$arSetItem["NAME"];?>" />
									<?elseif($arSetItem["DETAIL_PICTURE"]):?>
										<?$img = CFile::ResizeImageGet($arSetItem["DETAIL_PICTURE"], array("width" => 140, "height" => 140), BX_RESIZE_IMAGE_PROPORTIONAL, true);?>
										<img  src="<?=$img["src"]?>" alt="<?=$arSetItem["NAME"];?>" title="<?=$arSetItem["NAME"];?>" />
									<?else:?>
										<img  src="<?=SITE_TEMPLATE_PATH?>/images/no_photo_small.png" alt="<?=$arSetItem["NAME"];?>" title="<?=$arSetItem["NAME"];?>" />
									<?endif;?>
								</a>
							</div>
							<div class="item_info">
								<div class="item-title">
									<a href="<?=$arSetItem["DETAIL_PAGE_URL"]?>"><span><?=$arSetItem["NAME"]?></span></a>
								</div>
								<?if($arParams["SHOW_KIT_PARTS_PRICES"] == "Y"):?>
									<div class="cost prices clearfix">
										<?
										$arCountPricesCanAccess = 0;
										foreach($arSetItem["PRICES"] as $key => $arPrice){
											if($arPrice["CAN_ACCESS"]){
												$arCountPricesCanAccess++;
											}
										}?>
										<?foreach($arSetItem["PRICES"] as $key => $arPrice):?>
											<?if($arPrice["CAN_ACCESS"]):?>
												<?$price = CPrice::GetByID($arPrice["ID"]);?>
												<?if($arCountPricesCanAccess > 1):?>
													<div class="price_name"><?=$price["CATALOG_GROUP_NAME"];?></div>
												<?endif;?>
												<?if($arPrice["VALUE"] > $arPrice["DISCOUNT_VALUE"]  && $arParams["SHOW_OLD_PRICE"]=="Y"):?>
													<div class="price">
														<?=$arPrice["PRINT_DISCOUNT_VALUE"];?><?if(($arParams["SHOW_MEASURE"] == "Y") && $strMeasure):?><small>/<?=$strMeasure?></small><?endif;?>
													</div>
													<div class="price discount">
														<span><?=$arPrice["PRINT_VALUE"]?></span>
													</div>
												<?else:?>
													<div class="price">
														<?=$arPrice["PRINT_VALUE"];?><?if(($arParams["SHOW_MEASURE"] == "Y") && $strMeasure):?><small>/<?=$strMeasure?></small><?endif;?>
													</div>
												<?endif;?>
											<?endif;?>
										<?endforeach;?>
									</div>
								<?endif;?>
							</div>
						</div>
					</li>
					<?if($arResult["SET_ITEMS"][$iii + 1]):?>
						<li class="separator"></li>
					<?endif;?>
				<?endforeach;?>
			</ul>
		</div>
	<?endif;?>
	<?if($arResult['OFFERS']):?>
		<?if($arResult['OFFER_GROUP']):?>
			<?foreach($arResult['OFFERS'] as $arOffer):?>
				<?if(!$arOffer['OFFER_GROUP']) continue;?>
				<span id="<?=$arItemIDs['ALL_ITEM_IDS']['OFFER_GROUP'].$arOffer['ID']?>" style="display: none;">
					<?$APPLICATION->IncludeComponent("bitrix:catalog.set.constructor", "",
						array(
							"IBLOCK_ID" => $arResult["OFFERS_IBLOCK"],
							"ELEMENT_ID" => $arOffer['ID'],
							"PRICE_CODE" => $arParams["PRICE_CODE"],
							"BASKET_URL" => $arParams["BASKET_URL"],
							"OFFERS_CART_PROPERTIES" => $arParams["OFFERS_CART_PROPERTIES"],
							"CACHE_TYPE" => $arParams["CACHE_TYPE"],
							"CACHE_TIME" => $arParams["CACHE_TIME"],
							"CACHE_GROUPS" => $arParams["CACHE_GROUPS"],
							"SHOW_OLD_PRICE" => $arParams["SHOW_OLD_PRICE"],
							"SHOW_MEASURE" => $arParams["SHOW_MEASURE"],
							"SHOW_DISCOUNT_PERCENT" => $arParams["SHOW_DISCOUNT_PERCENT"],
							"CONVERT_CURRENCY" => $arParams['CONVERT_CURRENCY'],
							"CURRENCY_ID" => $arParams["CURRENCY_ID"]
						), $component, array("HIDE_ICONS" => "Y")
					);?>
				</span>
			<?endforeach;?>
		<?endif;?>
	<?else:?>
		<?$APPLICATION->IncludeComponent("bitrix:catalog.set.constructor", "",
			array(
				"IBLOCK_ID" => $arParams["IBLOCK_ID"],
				"ELEMENT_ID" => $arResult["ID"],
				"PRICE_CODE" => $arParams["PRICE_CODE"],
				"BASKET_URL" => $arParams["BASKET_URL"],
				"CACHE_TYPE" => $arParams["CACHE_TYPE"],
				"CACHE_TIME" => $arParams["CACHE_TIME"],
				"CACHE_GROUPS" => $arParams["CACHE_GROUPS"],
				"SHOW_OLD_PRICE" => $arParams["SHOW_OLD_PRICE"],
				"SHOW_MEASURE" => $arParams["SHOW_MEASURE"],
				"SHOW_DISCOUNT_PERCENT" => $arParams["SHOW_DISCOUNT_PERCENT"],
				"CONVERT_CURRENCY" => $arParams['CONVERT_CURRENCY'],
				"CURRENCY_ID" => $arParams["CURRENCY_ID"]
			), $component, array("HIDE_ICONS" => "Y")
		);?>
	<?endif;?>
</div>

<div class="tabs_section">
	<ul class="tabs1 main_tabs1 tabs-head">
		<?
		$iTab = 0;
		$showProps = false;
		if($arResult["DISPLAY_PROPERTIES"]){
			foreach($arResult["DISPLAY_PROPERTIES"] as $arProp){
				if(!in_array($arProp["CODE"], array("SERVICES", "BRAND", "HIT", "RECOMMEND", "NEW", "STOCK", "VIDEO", "VIDEO_YOUTUBE", "CML2_ARTICLE"))){
					if(!is_array($arProp["DISPLAY_VALUE"])){
						$arProp["DISPLAY_VALUE"] = array($arProp["DISPLAY_VALUE"]);
					}
				}
				if(is_array($arProp["DISPLAY_VALUE"])){
					foreach($arProp["DISPLAY_VALUE"] as $value){
						if(strlen($value)){
							$showProps = true;
							break;
						}
					}
				}
			}
		}
		?>
		<?if($arResult["OFFERS"] && $arParams["TYPE_SKU"]=="N"):?>
			<li class="prices_tab<?=(!($iTab++) ? ' current' : '')?>">
				<span><?=GetMessage("OFFER_PRICES")?></span>
			</li>
		<?endif;?>
		<?if($arResult["DETAIL_TEXT"] || count($arResult["STOCK"]) || count($arResult["SERVICES"]) || ((count($arResult["PROPERTIES"]["INSTRUCTIONS"]["VALUE"]) && is_array($arResult["PROPERTIES"]["INSTRUCTIONS"]["VALUE"])) || count($arResult["SECTION_FULL"]["UF_FILES"])) || ($showProps && $arParams["PROPERTIES_DISPLAY_LOCATION"] != "TAB")):?>
			<li class="<?=(!($iTab++) ? ' current' : '')?>">
				<span><?=GetMessage("DESCRIPTION_TAB")?></span>
			</li>
		<?endif;?>
		<?if($arParams["PROPERTIES_DISPLAY_LOCATION"] == "TAB" && $showProps):?>
			<li class="<?=(!($iTab++) ? ' current' : '')?>">
				<span><?=GetMessage("PROPERTIES_TAB")?></span>
			</li>
		<?endif;?>
		<?if(strlen($arResult["DISPLAY_PROPERTIES"]["VIDEO"]["VALUE"]) || strlen($arResult["DISPLAY_PROPERTIES"]["VIDEO_YOUTUBE"]["VALUE"]) || $arResult["SECTION_FULL"]["UF_VIDEO"] || $arResult["SECTION_FULL"]["UF_VIDEO_YOUTUBE"]):?>
			<li class="<?=(!($iTab++) ? ' current' : '')?>">
				<span><?=GetMessage("VIDEO_TAB")?></span>
			</li>
		<?endif;?>
		<?if($arParams["USE_REVIEW"] == "Y"):?>
			<li class="<?=(!($iTab++) ? ' current' : '')?>" id="product_reviews_tab">
				<span><?=GetMessage("REVIEW_TAB")?></span><span class="count empty"></span>
			</li>
		<?endif;?>
		<?if(($arParams["SHOW_ASK_BLOCK"] == "Y") && (intVal($arParams["ASK_FORM_ID"]))):?>
			<li class="product_ask_tab <?=(!($iTab++) ? ' current' : '')?>">
				<span><?=GetMessage('ASK_TAB')?></span>
			</li>
		<?endif;?>
		<?if($useStores && ($showCustomOffer || !$arResult["OFFERS"] )):?>
			<li class="stores_tab<?=(!($iTab++) ? ' current' : '')?>">
				<span><?=GetMessage("STORES_TAB");?></span>
			</li>
		<?endif;?>
		<?if($arParams["SHOW_ADDITIONAL_TAB"] == "Y"):?>
			<li class="<?=(!($iTab++) ? ' current' : '')?>">
				<span><?=GetMessage("ADDITIONAL_TAB");?></span>
			</li>
		<?endif;?>
	</ul>
	<?if($arResult["OFFERS"] && $arParams["TYPE_SKU"] !== "TYPE_1"):?>
		<script>
			$(document).ready(function() {
				$('.catalog_detail .tabs_section .tabs_content .form.inline input[data-sid="PRODUCT_NAME"]').attr('value', $('h1').text());
			});
		</script>
	<?endif;?>
	<ul class="tabs_content tabs-body">
		<?$show_tabs = false;?>
		<?$iTab = 0;?>
		<?
		$showSkUName = ((in_array('NAME', $arParams['OFFERS_FIELD_CODE'])));
		$showSkUImages = false;
		if(((in_array('PREVIEW_PICTURE', $arParams['OFFERS_FIELD_CODE']) || in_array('DETAIL_PICTURE', $arParams['OFFERS_FIELD_CODE'])))){
			foreach ($arResult["OFFERS"] as $key => $arSKU){
				if($arSKU['PREVIEW_PICTURE'] || $arSKU['DETAIL_PICTURE']){
					$showSkUImages = true;
					break;
				}
			}
		}?>
		<?if($arResult["OFFERS"] && $arParams["TYPE_SKU"] !== "TYPE_1"):?>
			<li class="prices_tab<?=(!($iTab++) ? ' current' : '')?>">
				<div class="bx_sku_props" style="display:none;">
					<?$arSkuKeysProp='';
					$propSKU=$arParams["OFFERS_CART_PROPERTIES"];
					if($propSKU){
						$arSkuKeysProp=base64_encode(serialize(array_keys($propSKU)));
					}?>
					<input type="hidden" value="<?=$arSkuKeysProp;?>"></input>
				</div>
				<table class="colored offers_table">
					<thead>
						<tr>
							<?if($useStores):?>
								<td class="str"></td>
							<?endif;?>
							<?if($showSkUImages):?>
								<td class="property img" width="50"></td>
							<?endif;?>
							<?if($showSkUName):?>
								<td class="property"><?=GetMessage("CATALOG_NAME")?></td>
							<?endif;?>
							<?
							if($arResult["SKU_PROPERTIES"]){
								foreach ($arResult["SKU_PROPERTIES"] as $key => $arProp){?>
									<?if(!$arProp["IS_EMPTY"]):?>
										<td class="property">
											<span <?if($arProp["HINT"] && $arParams["SHOW_HINTS"] == "Y"){?>class="whint"<?}?>><?if($arProp["HINT"] && $arParams["SHOW_HINTS"]=="Y"):?><div class="hint"><span class="icon"><i>?</i></span><div class="tooltip"><?=$arProp["HINT"]?></div></div><?endif;?><?=$arProp["NAME"]?></span>
										</td>
									<?endif;?>
								<?}
							}?>
							<td class="price_th"><?=GetMessage("CATALOG_PRICE")?></td>
							<?if($arQuantityData["RIGHTS"]["SHOW_QUANTITY"]):?>
								<td class="count_th"><?=GetMessage("AVAILABLE")?></td>
							<?endif;?>
							<?if($arParams["DISPLAY_WISH_BUTTONS"] != "N"  || $arParams["DISPLAY_COMPARE"] == "Y"):?>
								<td class="like_icons_th"></td>
							<?endif;?>
							<td colspan="3"></td>
						</tr>
					</thead>
					<tbody>
						<?$numProps = count($arResult["SKU_PROPERTIES"]);
						if($arResult["OFFERS"]){
							foreach ($arResult["OFFERS"] as $key => $arSKU){?>
								<?
								if($arResult["PROPERTIES"]["CML2_BASE_UNIT"]["VALUE"]){
									$sMeasure = $arResult["PROPERTIES"]["CML2_BASE_UNIT"]["VALUE"].".";
								}
								else{
									$sMeasure = GetMessage("MEASURE_DEFAULT").".";
								}
								$skutotalCount = COptimus::CheckTypeCount($arSKU["CATALOG_QUANTITY"]);
								$arskuQuantityData = COptimus::GetQuantityArray($skutotalCount, array('quantity-wrapp', 'quantity-indicators'));
								$arSKU["IBLOCK_ID"]=$arResult["IBLOCK_ID"];
								$arSKU["IS_OFFER"]="Y";
								$arskuAddToBasketData = COptimus::GetAddToBasketArray($arSKU, $skutotalCount, $arParams["DEFAULT_COUNT"], $arParams["BASKET_URL"], false, array(), 'small w_icons', $arParams);
								$arskuAddToBasketData["HTML"] = str_replace('data-item', 'data-props="'.$arOfferProps.'" data-item', $arskuAddToBasketData["HTML"]);
								?>
								<?$collspan = 1;?>
								<tr>
									<?if($useStores):?>
										<td class="opener">
											<?$collspan++;?>
											<span class="opener_icon"><i></i></span>
										</td>
									<?endif;?>
									<?if($showSkUImages):?>
										<?$collspan++;?>
										<td class="property">
											<?
											$srcImgPreview = $srcImgDetail = false;
											$imgPreviewID = ($arResult['OFFERS'][$key]['PREVIEW_PICTURE'] ? (is_array($arResult['OFFERS'][$key]['PREVIEW_PICTURE']) ? $arResult['OFFERS'][$key]['PREVIEW_PICTURE']['ID'] : $arResult['OFFERS'][$key]['PREVIEW_PICTURE']) : false);
											$imgDetailID = ($arResult['OFFERS'][$key]['DETAIL_PICTURE'] ? (is_array($arResult['OFFERS'][$key]['DETAIL_PICTURE']) ? $arResult['OFFERS'][$key]['DETAIL_PICTURE']['ID'] : $arResult['OFFERS'][$key]['DETAIL_PICTURE']) : false);
											if($imgPreviewID || $imgDetailID){
												$arImgPreview = CFile::ResizeImageGet($imgPreviewID ? $imgPreviewID : $imgDetailID, array('width' => 50, 'height' => 50), BX_RESIZE_IMAGE_PROPORTIONAL, true);
												$srcImgPreview = $arImgPreview['src'];
											}
											if($imgDetailID){
												$srcImgDetail = CFile::GetPath($imgDetailID);
											}
											?>
											<?if($srcImgPreview || $srcImgDetail):?>
												<a href="<?=($srcImgDetail ? $srcImgDetail : $srcImgPreview)?>" class="fancy" data-fancybox-group="item_slider"><img src="<?=$srcImgPreview?>" alt="<?=$arSKU['NAME']?>" /></a>
											<?endif;?>
										</td>
									<?endif;?>
									<?if($showSkUName):?>
										<?$collspan++;?>
										<td class="property"><?=$arSKU['NAME']?></td>
									<?endif;?>
									<?foreach( $arResult["SKU_PROPERTIES"] as $arProp ){?>
										<?if(!$arProp["IS_EMPTY"]):?>
											<?$collspan++;?>
											<td class="property">
												<?if($arResult["TMP_OFFERS_PROP"][$arProp["CODE"]]){
													echo $arResult["TMP_OFFERS_PROP"][$arProp["CODE"]]["VALUES"][$arSKU["TREE"]["PROP_".$arProp["ID"]]]["NAME"];?>
												<?}else{
													if (is_array($arSKU["PROPERTIES"][$arProp["CODE"]]["VALUE"])){
														echo implode("/", $arSKU["PROPERTIES"][$arProp["CODE"]]["VALUE"]);
													}else{
														if($arSKU["PROPERTIES"][$arProp["CODE"]]["USER_TYPE"]=="directory" && isset($arSKU["PROPERTIES"][$arProp["CODE"]]["USER_TYPE_SETTINGS"]["TABLE_NAME"])){
															$rsData = \Bitrix\Highloadblock\HighloadBlockTable::getList(array('filter'=>array('=TABLE_NAME'=>$arSKU["PROPERTIES"][$arProp["CODE"]]["USER_TYPE_SETTINGS"]["TABLE_NAME"])));
													        if ($arData = $rsData->fetch()){
													            $entity = \Bitrix\Highloadblock\HighloadBlockTable::compileEntity($arData);
													            $entityDataClass = $entity->getDataClass();
													            $arFilter = array(
													                'limit' => 1,
													                'filter' => array(
													                    '=UF_XML_ID' => $arSKU["PROPERTIES"][$arProp["CODE"]]["VALUE"]
													                )
													            );
													            $arValue = $entityDataClass::getList($arFilter)->fetch();
													            if(isset($arValue["UF_NAME"]) && $arValue["UF_NAME"]){
													            	echo $arValue["UF_NAME"];
													            }else{
													            	echo $arSKU["PROPERTIES"][$arProp["CODE"]]["VALUE"];
													            }
													        }
														}else{
															echo $arSKU["PROPERTIES"][$arProp["CODE"]]["VALUE"];
														}
													}
												}?>
											</td>
										<?endif;?>
									<?}?>
									<td class="price">
										<div class="cost prices clearfix">
											<?
											$collspan++;
											$arCountPricesCanAccess = 0;
											foreach($arSKU["PRICES"] as $key => $arPrice){
												if($arPrice["CAN_ACCESS"]){
													$arCountPricesCanAccess++;
												}
											}?>
											<?foreach($arSKU["PRICES"] as $key => $arPrice){?>
												<?if($arPrice["CAN_ACCESS"]){?>
													<?if($arCountPricesCanAccess > 1):?>
														<?$price = CPrice::GetByID($arPrice["ID"]); ?>
														<div class="many_prices">
														<div class="price_name"><?=$price["CATALOG_GROUP_NAME"];?></div>
													<?endif;?>
													<?if($arPrice["VALUE"] > $arPrice["DISCOUNT_VALUE"]){?>
														<div class="price">
															<?=$arPrice["PRINT_DISCOUNT_VALUE"];?>
															<?if(($arParams["SHOW_MEASURE"]=="Y")&&$arSKU["CATALOG_MEASURE_NAME"]):?><small>/<?=$arSKU["CATALOG_MEASURE_NAME"]?></small><?endif;?>
														</div>
														<div class="price discount">
															<span><?=$arPrice["PRINT_VALUE"];?></span>
														</div>
													<?}else{?>
														<div class="price">
															<?=$arPrice["PRINT_VALUE"];?>
															<?if(($arParams["SHOW_MEASURE"]=="Y")&&$arSKU["CATALOG_MEASURE_NAME"]):?><small>/<?=$arSKU["CATALOG_MEASURE_NAME"]?></small><?endif;?>
														</div>
													<?}?>
													<?if($arCountPricesCanAccess > 1){?>
														</div>
													<?}?>
												<?}?>
											<?}?>
										</div>
										<div class="adaptive text">
											<?if(strlen($arskuQuantityData["TEXT"])):?>
												<div class="count ablock">
													<?=$arskuQuantityData["HTML"]?>
												</div>
											<?endif;?>
											<!--noindex-->
												<?if($arParams["DISPLAY_WISH_BUTTONS"] != "N"  || $arParams["DISPLAY_COMPARE"] == "Y"):?>
													<div class="like_icons ablock">
														<?if($arParams["DISPLAY_WISH_BUTTONS"] != "N"):?>
															<?if($arSKU['CAN_BUY']):?>
																<div class="wish_item_button o_<?=$arSKU["ID"];?>">
																	<span title="<?=GetMessage('CATALOG_WISH')?>" class="wish_item text to <?=$arParams["TYPE_SKU"];?>" data-item="<?=$arSKU["ID"]?>" data-iblock="<?=$arResult["IBLOCK_ID"]?>" data-offers="Y" data-props="<?=$arOfferProps?>"><i></i></span>
																	<span title="<?=GetMessage('CATALOG_WISH_OUT')?>" class="wish_item text in added <?=$arParams["TYPE_SKU"];?>" style="display: none;" data-item="<?=$arSKU["ID"]?>" data-iblock="<?=$arSKU["IBLOCK_ID"]?>"><i></i></span>
																</div>
															<?endif;?>
														<?endif;?>
														<?if($arParams["DISPLAY_COMPARE"] == "Y"):?>
															<div class="compare_item_button o_<?=$arSKU["ID"];?>">
																<span title="<?=GetMessage('CATALOG_COMPARE')?>" class="compare_item to text <?=$arParams["TYPE_SKU"];?>" data-iblock="<?=$arParams["IBLOCK_ID"]?>" data-item="<?=$arSKU["ID"]?>" ><i></i></span>
																<span title="<?=GetMessage('CATALOG_COMPARE_OUT')?>" class="compare_item in added text <?=$arParams["TYPE_SKU"];?>" style="display: none;" data-iblock="<?=$arParams["IBLOCK_ID"]?>" data-item="<?=$arSKU["ID"]?>"><i></i></span>
															</div>
														<?endif;?>
													</div>
												<?endif;?>
												<div class="wrap_md">
													<?if($arskuAddToBasketData["ACTION"] == "ADD"):?>
														<?if($arskuAddToBasketData["OPTIONS"]["USE_PRODUCT_QUANTITY_DETAIL"] && !count($arSKU["OFFERS"]) && $arskuAddToBasketData["ACTION"] == "ADD" && $arSKU["CAN_BUY"]):?>
															<div class="counter_block_wr iblock ablock">
																<div class="counter_block" data-item="<?=$arSKU["ID"];?>">
																	<span class="minus">-</span>
																	<input type="text" class="text" name="count_items" value="<?=$arskuAddToBasketData["MIN_QUANTITY_BUY"];?>" />
																	<span class="plus">+</span>
																</div>
															</div>
														<?endif;?>
													<?endif;?>
													<div class="buy iblock ablock">
														<div class="counter_wrapp">
															<?=$arskuAddToBasketData["HTML"]?>
														</div>
													</div>
												</div>
												<?if($arskuAddToBasketData["ACTION"] == "ADD" && $arSKU["CAN_BUY"] && $arParams["SHOW_ONE_CLICK_BUY"]!="N"):?>
													<div class="one_click_buy ablock">
														<span class="button small transparent one_click" data-item="<?=$arSKU["ID"]?>" data-offers="Y" data-iblockID="<?=$arParams["IBLOCK_ID"]?>" data-quantity="<?=$arskuAddToBasketData["MIN_QUANTITY_BUY"];?>" data-props="<?=$arOfferProps?>" onclick="oneClickBuy('<?=$arSKU["ID"]?>', '<?=$arParams["IBLOCK_ID"]?>', this)">
															<span><?=GetMessage('ONE_CLICK_BUY')?></span>
														</span>
													</div>
												<?endif;?>
											<!--/noindex-->
										</div>
									</td>
									<?if(strlen($arskuQuantityData["TEXT"])):?>
										<?$collspan++;?>
										<td class="count">
											<?=$arskuQuantityData["HTML"]?>
										</td>
									<?endif;?>
									<!--noindex-->
										<?if($arParams["DISPLAY_WISH_BUTTONS"] != "N"  || $arParams["DISPLAY_COMPARE"] == "Y"):?>
											<td class="like_icons">
												<?$collspan++;?>
												<?if($arParams["DISPLAY_WISH_BUTTONS"] != "N"):?>
													<?if($arSKU['CAN_BUY']):?>
														<div class="wish_item_button o_<?=$arSKU["ID"];?>">
															<span title="<?=GetMessage('CATALOG_WISH')?>" class="wish_item text to <?=$arParams["TYPE_SKU"];?>" data-item="<?=$arSKU["ID"]?>" data-iblock="<?=$arResult["IBLOCK_ID"]?>" data-offers="Y" data-props="<?=$arOfferProps?>"><i></i></span>
															<span title="<?=GetMessage('CATALOG_WISH_OUT')?>" class="wish_item text in added <?=$arParams["TYPE_SKU"];?>" style="display: none;" data-item="<?=$arSKU["ID"]?>" data-iblock="<?=$arSKU["IBLOCK_ID"]?>"><i></i></span>
														</div>
													<?endif;?>
												<?endif;?>
												<?if($arParams["DISPLAY_COMPARE"] == "Y"):?>
													<div class="compare_item_button o_<?=$arSKU["ID"];?>">
														<span title="<?=GetMessage('CATALOG_COMPARE')?>" class="compare_item to text <?=$arParams["TYPE_SKU"];?>" data-iblock="<?=$arParams["IBLOCK_ID"]?>" data-item="<?=$arSKU["ID"]?>" ><i></i></span>
														<span title="<?=GetMessage('CATALOG_COMPARE_OUT')?>" class="compare_item in added text <?=$arParams["TYPE_SKU"];?>" style="display: none;" data-iblock="<?=$arParams["IBLOCK_ID"]?>" data-item="<?=$arSKU["ID"]?>"><i></i></span>
													</div>
												<?endif;?>
											</td>
										<?endif;?>
										<?if($arskuAddToBasketData["ACTION"] == "ADD"):?>
											<?if($arskuAddToBasketData["OPTIONS"]["USE_PRODUCT_QUANTITY_DETAIL"] && !count($arSKU["OFFERS"]) && $arskuAddToBasketData["ACTION"] == "ADD" && $arSKU["CAN_BUY"]):?>
												<td class="counter_block_wr">
													<div class="counter_block" data-item="<?=$arSKU["ID"];?>">
														<?$collspan++;?>
														<span class="minus">-</span>
														<input type="text" class="text" name="count_items" value="<?=$arskuAddToBasketData["MIN_QUANTITY_BUY"];?>" />
														<span class="plus">+</span>
													</div>
												</td>
											<?endif;?>
										<?endif;?>
										<td class="buy" <?=($arskuAddToBasketData["ACTION"] !== "ADD" || !$arSKU["CAN_BUY"] || $arParams["SHOW_ONE_CLICK_BUY"]=="N" ? 'colspan="3"' : "")?>>
											<?if($arskuAddToBasketData["ACTION"] !== "ADD"  || !$arSKU["CAN_BUY"]):?>
												<?$collspan += 3;?>
											<?else:?>
												<?$collspan++;?>
											<?endif;?>
											<div class="counter_wrapp">
												<?=$arskuAddToBasketData["HTML"]?>
											</div>
										</td>
										<?if($arskuAddToBasketData["ACTION"] == "ADD" && $arSKU["CAN_BUY"] && $arParams["SHOW_ONE_CLICK_BUY"]!="N"):?>
											<td class="one_click_buy">
												<?$collspan++;?>
												<span class="button small transparent one_click" data-item="<?=$arSKU["ID"]?>" data-offers="Y" data-iblockID="<?=$arParams["IBLOCK_ID"]?>" data-quantity="<?=$arskuAddToBasketData["MIN_QUANTITY_BUY"];?>" data-props="<?=$arOfferProps?>" onclick="oneClickBuy('<?=$arSKU["ID"]?>', '<?=$arParams["IBLOCK_ID"]?>', this)">
													<span><?=GetMessage('ONE_CLICK_BUY')?></span>
												</span>
											</td>
										<?endif;?>
									<!--/noindex-->
								</tr>
								<?if($useStores):?>
									<?$collspan--;?>
									<tr class="offer_stores"><td colspan="<?=$collspan?>">
										<?$APPLICATION->IncludeComponent("bitrix:catalog.store.amount", "main", array(
												"PER_PAGE" => "10",
												"USE_STORE_PHONE" => $arParams["USE_STORE_PHONE"],
												"SCHEDULE" => $arParams["SCHEDULE"],
												"USE_MIN_AMOUNT" => $arParams["USE_MIN_AMOUNT"],
												"MIN_AMOUNT" => $arParams["MIN_AMOUNT"],
												"ELEMENT_ID" => $arSKU["ID"],
												"STORE_PATH"  =>  $arParams["STORE_PATH"],
												"MAIN_TITLE"  =>  $arParams["MAIN_TITLE"],
												"MAX_AMOUNT"=>$arParams["MAX_AMOUNT"],
												"SHOW_EMPTY_STORE" => $arParams['SHOW_EMPTY_STORE'],
												"SHOW_GENERAL_STORE_INFORMATION" => $arParams['SHOW_GENERAL_STORE_INFORMATION'],
												"USE_ONLY_MAX_AMOUNT" => $arParams["USE_ONLY_MAX_AMOUNT"],
												"USER_FIELDS" => $arParams['USER_FIELDS'],
												"FIELDS" => $arParams['FIELDS'],
												"STORES" => $arParams['STORES'],
												"CACHE_TYPE" => "A",
											),
											$component
										);?>
									</tr>
								<?endif;?>
							<?}
						}?>
					</tbody>
				</table>
			</li>
		<?endif;?>
		<?if($arResult["DETAIL_TEXT"] || count($arResult["STOCK"]) || count($arResult["SERVICES"]) || ((count($arResult["PROPERTIES"]["INSTRUCTIONS"]["VALUE"]) && is_array($arResult["PROPERTIES"]["INSTRUCTIONS"]["VALUE"])) || count($arResult["SECTION_FULL"]["UF_FILES"])) || ($showProps && $arParams["PROPERTIES_DISPLAY_LOCATION"] != "TAB")):?>
			<li class="<?=(!($iTab++) ? ' current' : '')?>">
				<?if(strlen($arResult["DETAIL_TEXT"])):?>
					<div class="detail_text"><?=$arResult["DETAIL_TEXT"]?></div>
				<?endif;?>
				<?if($arResult["SERVICES"] && $showProps){?>
					<div class="wrap_md descr_div">
				<?}?>
				<?if($showProps && $arParams["PROPERTIES_DISPLAY_LOCATION"] != "TAB"):?>
					<?if($arParams["PROPERTIES_DISPLAY_TYPE"] != "TABLE"):?>
						<div class="props_block" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['DISPLAY_PROP_DIV']; ?>">
							<?foreach($arResult["PROPERTIES"] as $propCode => $arProp):?>
								<?if(isset($arResult["DISPLAY_PROPERTIES"][$propCode])):?>
									<?$arProp = $arResult["DISPLAY_PROPERTIES"][$propCode];?>
									<?if(!in_array($arProp["CODE"], array("SERVICES", "BRAND", "HIT", "RECOMMEND", "NEW", "STOCK", "VIDEO", "VIDEO_YOUTUBE", "CML2_ARTICLE"))):?>
										<?if((!is_array($arProp["DISPLAY_VALUE"]) && strlen($arProp["DISPLAY_VALUE"])) || (is_array($arProp["DISPLAY_VALUE"]) && implode('', $arProp["DISPLAY_VALUE"]))):?>
											<div class="char">
												<div class="char_name">
													<span <?if($arProp["HINT"] && $arParams["SHOW_HINTS"] == "Y"){?>class="whint"<?}?>><?if($arProp["HINT"] && $arParams["SHOW_HINTS"] == "Y"):?><div class="hint"><span class="icon"><i>?</i></span><div class="tooltip"><?=$arProp["HINT"]?></div></div><?endif;?><?=$arProp["NAME"]?></span>
												</div>
												<div class="char_value">
													<?if(count($arProp["DISPLAY_VALUE"]) > 1):?>
														<?=implode(', ', $arProp["DISPLAY_VALUE"]);?>
													<?else:?>
														<?=$arProp["DISPLAY_VALUE"];?>
													<?endif;?>
												</div>
											</div>
										<?endif;?>
									<?endif;?>
								<?endif;?>
							<?endforeach;?>
						</div>
					<?else:?>
						<div class="iblock char_block <?=(!$arResult["SERVICES"] ? 'wide' : '')?>">
							<h4><?=GetMessage("PROPERTIES_TAB");?></h4>
							<table class="props_list">
								<?foreach($arResult["DISPLAY_PROPERTIES"] as $arProp):?>
									<?if(!in_array($arProp["CODE"], array("SERVICES", "BRAND", "HIT", "RECOMMEND", "NEW", "STOCK", "VIDEO", "VIDEO_YOUTUBE", "CML2_ARTICLE"))):?>
										<?if((!is_array($arProp["DISPLAY_VALUE"]) && strlen($arProp["DISPLAY_VALUE"])) || (is_array($arProp["DISPLAY_VALUE"]) && implode('', $arProp["DISPLAY_VALUE"]))):?>
											<tr>
												<td class="char_name">
													<span <?if($arProp["HINT"] && $arParams["SHOW_HINTS"] == "Y"){?>class="whint"<?}?>><?if($arProp["HINT"] && $arParams["SHOW_HINTS"] == "Y"):?><div class="hint"><span class="icon"><i>?</i></span><div class="tooltip"><?=$arProp["HINT"]?></div></div><?endif;?><?=$arProp["NAME"]?></span>
												</td>
												<td class="char_value">
													<span>
														<?if(count($arProp["DISPLAY_VALUE"]) > 1):?>
															<?=implode(', ', $arProp["DISPLAY_VALUE"]);?>
														<?else:?>
															<?=$arProp["DISPLAY_VALUE"];?>
														<?endif;?>
													</span>
												</td>
											</tr>
										<?endif;?>
									<?endif;?>
								<?endforeach;?>
							</table>
							<table class="props_list" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['DISPLAY_PROP_DIV']; ?>"></table>
						</div>
					<?endif;?>
				<?endif;?>
				<?if($arResult["SERVICES"]):?>
					<div class="iblock serv <?=($arParams["PROPERTIES_DISPLAY_TYPE"] != "TABLE" ? "block_view" : "")?>">
						<h4><?=GetMessage("SERVICES_TITLE")?></h4>
						<div class="services_block">
							<?foreach($arResult["SERVICES"] as $arService):?>
								<span class="item">
									<a href="<?=$arService["DETAIL_PAGE_URL"]?>">
										<i class="arrow"><b></b></i>
										<span class="link"><?=$arService["NAME"]?></span>
										<div class="clearfix"></div>
									</a>
								</span>
							<?endforeach;?>
						</div>
					</div>
				<?endif;?>
				<?if($arResult["SERVICES"] && $showProps){?>
					</div>
				<?}?>
				<?
				$arFiles = array();
				if($arResult["PROPERTIES"]["INSTRUCTIONS"]["VALUE"]){
					$arFiles = $arResult["PROPERTIES"]["INSTRUCTIONS"]["VALUE"];
				}
				else{
					$arFiles = $arResult["SECTION_FULL"]["UF_FILES"];
				}
				if(is_array($arFiles)){
					foreach($arFiles as $key => $value){
						if(!intval($value)){
							unset($arFiles[$key]);
						}
					}
				}
				?>
				<?if($arFiles):?>
					<div class="files_block">
						<h4><?=GetMessage("DOCUMENTS_TITLE")?></h4>
						<div class="wrap_md">
							<div class="wrapp_docs iblock">
							<?
							$i=1;
							foreach($arFiles as $arItem):?>
								<?$arFile=COptimus::GetFileInfo($arItem);?>
								<div class="file_type clearfix <?=$arFile["TYPE"];?>">
									<i class="icon"></i>
									<div class="description">
										<a target="_blank" href="<?=$arFile["SRC"];?>"><?=$arFile["DESCRIPTION"];?></a>
										<span class="size"><?=GetMessage('CT_NAME_SIZE')?>:
											<?=$arFile["FILE_SIZE_FORMAT"];?>
										</span>
									</div>
								</div>
								<?if($i%3==0){?>
									</div><div class="wrapp_docs iblock">
								<?}?>
								<?$i++;?>
							<?endforeach;?>
							</div>
						</div>
					</div>
				<?endif;?>
			</li>
		<?endif;?>

		<?if($showProps && $arParams["PROPERTIES_DISPLAY_LOCATION"] == "TAB"):?>
			<li class="<?=(!($iTab++) ? ' current' : '')?>">
				<?if($arParams["PROPERTIES_DISPLAY_TYPE"] != "TABLE"):?>
					<div class="props_block" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['DISPLAY_PROP_DIV']; ?>">
						<?foreach($arResult["PROPERTIES"] as $propCode => $arProp):?>
							<?if(isset($arResult["DISPLAY_PROPERTIES"][$propCode])):?>
								<?$arProp = $arResult["DISPLAY_PROPERTIES"][$propCode];?>
								<?if(!in_array($arProp["CODE"], array("SERVICES", "BRAND", "HIT", "RECOMMEND", "NEW", "STOCK", "VIDEO", "VIDEO_YOUTUBE", "CML2_ARTICLE"))):?>
									<?if((!is_array($arProp["DISPLAY_VALUE"]) && strlen($arProp["DISPLAY_VALUE"])) || (is_array($arProp["DISPLAY_VALUE"]) && implode('', $arProp["DISPLAY_VALUE"]))):?>
										<div class="char">
											<div class="char_name">
												<span <?if($arProp["HINT"] && $arParams["SHOW_HINTS"] == "Y"){?>class="whint"<?}?>><?if($arProp["HINT"] && $arParams["SHOW_HINTS"] == "Y"):?><div class="hint"><span class="icon"><i>?</i></span><div class="tooltip"><?=$arProp["HINT"]?></div></div><?endif;?><?=$arProp["NAME"]?></span>
											</div>
											<div class="char_value">
												<?if(count($arProp["DISPLAY_VALUE"]) > 1):?>
													<?=implode(', ', $arProp["DISPLAY_VALUE"]);?>
												<?else:?>
													<?=$arProp["DISPLAY_VALUE"];?>
												<?endif;?>
											</div>
										</div>
									<?endif;?>
								<?endif;?>
							<?endif;?>
						<?endforeach;?>
					</div>
				<?else:?>
					<table class="props_list">
						<?foreach($arResult["DISPLAY_PROPERTIES"] as $arProp):?>
							<?if(!in_array($arProp["CODE"], array("SERVICES", "BRAND", "HIT", "RECOMMEND", "NEW", "STOCK", "VIDEO", "VIDEO_YOUTUBE", "CML2_ARTICLE"))):?>
								<?if((!is_array($arProp["DISPLAY_VALUE"]) && strlen($arProp["DISPLAY_VALUE"])) || (is_array($arProp["DISPLAY_VALUE"]) && implode('', $arProp["DISPLAY_VALUE"]))):?>
									<tr>
										<td class="char_name">
											<span <?if($arProp["HINT"] && $arParams["SHOW_HINTS"] == "Y"){?>class="whint"<?}?>><?if($arProp["HINT"] && $arParams["SHOW_HINTS"] == "Y"):?><div class="hint"><span class="icon"><i>?</i></span><div class="tooltip"><?=$arProp["HINT"]?></div></div><?endif;?><?=$arProp["NAME"]?></span>
										</td>
										<td class="char_value">
											<span>
												<?if(count($arProp["DISPLAY_VALUE"]) > 1):?>
													<?=implode(', ', $arProp["DISPLAY_VALUE"]);?>
												<?else:?>
													<?=$arProp["DISPLAY_VALUE"];?>
												<?endif;?>
											</span>
										</td>
									</tr>
								<?endif;?>
							<?endif;?>
						<?endforeach;?>
					</table>
					<table class="props_list" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['DISPLAY_PROP_DIV']; ?>"></table>
				<?endif;?>
			</li>
		<?endif;?>

		<?if(strlen($arResult["DISPLAY_PROPERTIES"]["VIDEO"]["VALUE"]) || strlen($arResult["DISPLAY_PROPERTIES"]["VIDEO_YOUTUBE"]["VALUE"]) || $arResult["SECTION_FULL"]["UF_VIDEO"] || $arResult["SECTION_FULL"]["UF_VIDEO_YOUTUBE"]):?>
			<li class="<?=(!($iTab++) ? ' current' : '')?>">
				<div class="video_block">
					<?if (!empty($arResult["DISPLAY_PROPERTIES"]["VIDEO"]["VALUE"])):?>
						<?=str_replace("frameborder=\"0\"", "", $arResult["DISPLAY_PROPERTIES"]["VIDEO"]["~VALUE"]);?>
					<?elseif (!empty($arResult["DISPLAY_PROPERTIES"]["VIDEO_YOUTUBE"]["VALUE"])):?>
						<?=str_replace("frameborder=\"0\"", "", $arResult["DISPLAY_PROPERTIES"]["VIDEO_YOUTUBE"]["~VALUE"]);?>
					<?elseif (!empty($arResult["SECTION_FULL"]['UF_VIDEO'])):?>
						<?=str_replace("frameborder=\"0\"", "", $arResult["SECTION_FULL"]['~UF_VIDEO']);?>
					<?elseif (!empty($arResult["SECTION_FULL"]['UF_VIDEO_YOUTUBE'])):?>
						<?=str_replace("frameborder=\"0\"", "", $arResult["SECTION_FULL"]['~UF_VIDEO_YOUTUBE']);?>
					<?endif;?>
				</div>
			</li>
		<?endif;?>

		<?if($arParams["USE_REVIEW"] == "Y"):?>
			<li class="<?=(!($iTab++) ? '' : '')?>"></li>
		<?endif;?>

		<?if(($arParams["SHOW_ASK_BLOCK"] == "Y") && (intVal($arParams["ASK_FORM_ID"]))):?>
			<li class="<?=(!($iTab++) ? ' current' : '')?>">
				<div class="wrap_md forms">
					<div class="iblock text_block">
						<?$APPLICATION->IncludeFile(SITE_DIR."include/ask_tab_detail_description.php", array(), array("MODE" => "html", "NAME" => GetMessage('CT_BCE_CATALOG_ASK_DESCRIPTION')));?>
					</div>
					<div class="iblock form_block">
						<div id="ask_block"></div>
					</div>
				</div>
			</li>
		<?endif;?>

		<?if($useStores && ($showCustomOffer || !$arResult["OFFERS"] )):?>
			<li class="stores_tab<?=(!($iTab++) ? ' current' : '')?>">
				<?if($arResult["OFFERS"]){?>
					<span></span>
				<?}else{?>
					<?$APPLICATION->IncludeComponent("bitrix:catalog.store.amount", "main", array(
							"PER_PAGE" => "10",
							"USE_STORE_PHONE" => $arParams["USE_STORE_PHONE"],
							"SCHEDULE" => $arParams["SCHEDULE"],
							"USE_MIN_AMOUNT" => $arParams["USE_MIN_AMOUNT"],
							"MIN_AMOUNT" => $arParams["MIN_AMOUNT"],
							"ELEMENT_ID" => $arResult["ID"],
							"STORE_PATH"  =>  $arParams["STORE_PATH"],
							"MAIN_TITLE"  =>  $arParams["MAIN_TITLE"],
							"MAX_AMOUNT"=>$arParams["MAX_AMOUNT"],
							"USE_ONLY_MAX_AMOUNT" => $arParams["USE_ONLY_MAX_AMOUNT"],
							"SHOW_EMPTY_STORE" => $arParams['SHOW_EMPTY_STORE'],
							"SHOW_GENERAL_STORE_INFORMATION" => $arParams['SHOW_GENERAL_STORE_INFORMATION'],
							"USE_ONLY_MAX_AMOUNT" => $arParams["USE_ONLY_MAX_AMOUNT"],
							"USER_FIELDS" => $arParams['USER_FIELDS'],
							"FIELDS" => $arParams['FIELDS'],
							"STORES" => $arParams['STORES'],
						),
						$component
					);?>
				<?}?>
			</li>
		<?endif;?>

		<?if($arParams["SHOW_ADDITIONAL_TAB"] == "Y"):?>
			<li class="<?=(!($iTab++) ? ' current' : '')?>">
				<?$APPLICATION->IncludeFile(SITE_DIR."include/additional_products_description.php", array(), array("MODE" => "html", "NAME" => GetMessage('CT_BCE_CATALOG_ADDITIONAL_DESCRIPTION')));?>
			</li>
		<?endif;?>
	</ul>
</div>

<div class="gifts">
<?if ($arResult['CATALOG'] && $arParams['USE_GIFTS_DETAIL'] == 'Y' && \Bitrix\Main\ModuleManager::isModuleInstalled("sale"))
{
	$APPLICATION->IncludeComponent("bitrix:sale.gift.product", "main", array(
			"SHOW_UNABLE_SKU_PROPS"=>$arParams["SHOW_UNABLE_SKU_PROPS"],
			'PRODUCT_ID_VARIABLE' => $arParams['PRODUCT_ID_VARIABLE'],
			'ACTION_VARIABLE' => $arParams['ACTION_VARIABLE'],
			'BUY_URL_TEMPLATE' => $arResult['~BUY_URL_TEMPLATE'],
			'ADD_URL_TEMPLATE' => $arResult['~ADD_URL_TEMPLATE'],
			'SUBSCRIBE_URL_TEMPLATE' => $arResult['~SUBSCRIBE_URL_TEMPLATE'],
			'COMPARE_URL_TEMPLATE' => $arResult['~COMPARE_URL_TEMPLATE'],
			"OFFER_HIDE_NAME_PROPS" => $arParams["OFFER_HIDE_NAME_PROPS"],

			"SHOW_DISCOUNT_PERCENT" => $arParams['GIFTS_SHOW_DISCOUNT_PERCENT'],
			"SHOW_OLD_PRICE" => $arParams['GIFTS_SHOW_OLD_PRICE'],
			"PAGE_ELEMENT_COUNT" => $arParams['GIFTS_DETAIL_PAGE_ELEMENT_COUNT'],
			"LINE_ELEMENT_COUNT" => $arParams['GIFTS_DETAIL_PAGE_ELEMENT_COUNT'],
			"HIDE_BLOCK_TITLE" => $arParams['GIFTS_DETAIL_HIDE_BLOCK_TITLE'],
			"BLOCK_TITLE" => $arParams['GIFTS_DETAIL_BLOCK_TITLE'],
			"TEXT_LABEL_GIFT" => $arParams['GIFTS_DETAIL_TEXT_LABEL_GIFT'],
			"SHOW_NAME" => $arParams['GIFTS_SHOW_NAME'],
			"SHOW_IMAGE" => $arParams['GIFTS_SHOW_IMAGE'],
			"MESS_BTN_BUY" => $arParams['GIFTS_MESS_BTN_BUY'],

			"SHOW_PRODUCTS_{$arParams['IBLOCK_ID']}" => "Y",
			"HIDE_NOT_AVAILABLE" => $arParams["HIDE_NOT_AVAILABLE"],
			"PRODUCT_SUBSCRIPTION" => $arParams["PRODUCT_SUBSCRIPTION"],
			"MESS_BTN_DETAIL" => $arParams["MESS_BTN_DETAIL"],
			"MESS_BTN_SUBSCRIBE" => $arParams["MESS_BTN_SUBSCRIBE"],
			"TEMPLATE_THEME" => $arParams["TEMPLATE_THEME"],
			"PRICE_CODE" => $arParams["PRICE_CODE"],
			"SHOW_PRICE_COUNT" => $arParams["SHOW_PRICE_COUNT"],
			"PRICE_VAT_INCLUDE" => $arParams["PRICE_VAT_INCLUDE"],
			"CONVERT_CURRENCY" => $arParams["CONVERT_CURRENCY"],
			"CURRENCY_ID" => $arParams["CURRENCY_ID"],
			"BASKET_URL" => $arParams["BASKET_URL"],
			"ADD_PROPERTIES_TO_BASKET" => $arParams["ADD_PROPERTIES_TO_BASKET"],
			"PRODUCT_PROPS_VARIABLE" => $arParams["PRODUCT_PROPS_VARIABLE"],
			"PARTIAL_PRODUCT_PROPERTIES" => $arParams["PARTIAL_PRODUCT_PROPERTIES"],
			"USE_PRODUCT_QUANTITY" => 'N',
			"OFFER_TREE_PROPS_{$arResult['OFFERS_IBLOCK']}" => $arParams['OFFER_TREE_PROPS'],
			"CART_PROPERTIES_{$arResult['OFFERS_IBLOCK']}" => $arParams['OFFERS_CART_PROPERTIES'],
			"PRODUCT_QUANTITY_VARIABLE" => $arParams["PRODUCT_QUANTITY_VARIABLE"],
			"CACHE_GROUPS" => $arParams["CACHE_GROUPS"],
			"SHOW_DISCOUNT_TIME" => $arParams["SHOW_DISCOUNT_TIME"],
			"SALE_STIKER" => $arParams["SALE_STIKER"],
			"SHOW_OLD_PRICE" => $arParams["SHOW_OLD_PRICE"],
			"SHOW_MEASURE" => $arParams["SHOW_MEASURE"],
			"DISPLAY_TYPE" => "block",
			"SHOW_RATING" => $arParams["SHOW_RATING"],
			"DISPLAY_COMPARE" => $arParams["DISPLAY_COMPARE"],
			"DISPLAY_WISH_BUTTONS" => $arParams["DISPLAY_WISH_BUTTONS"],
			"DEFAULT_COUNT" => $arParams["DEFAULT_COUNT"],
			"TYPE_SKU" => "Y",

			"POTENTIAL_PRODUCT_TO_BUY" => array(
				'ID' => isset($arResult['ID']) ? $arResult['ID'] : null,
				'MODULE' => isset($arResult['MODULE']) ? $arResult['MODULE'] : 'catalog',
				'PRODUCT_PROVIDER_CLASS' => isset($arResult['PRODUCT_PROVIDER_CLASS']) ? $arResult['PRODUCT_PROVIDER_CLASS'] : 'CCatalogProductProvider',
				'QUANTITY' => isset($arResult['QUANTITY']) ? $arResult['QUANTITY'] : null,
				'IBLOCK_ID' => isset($arResult['IBLOCK_ID']) ? $arResult['IBLOCK_ID'] : null,

				'PRIMARY_OFFER_ID' => isset($arResult['OFFERS'][0]['ID']) ? $arResult['OFFERS'][0]['ID'] : null,
				'SECTION' => array(
					'ID' => isset($arResult['SECTION']['ID']) ? $arResult['SECTION']['ID'] : null,
					'IBLOCK_ID' => isset($arResult['SECTION']['IBLOCK_ID']) ? $arResult['SECTION']['IBLOCK_ID'] : null,
					'LEFT_MARGIN' => isset($arResult['SECTION']['LEFT_MARGIN']) ? $arResult['SECTION']['LEFT_MARGIN'] : null,
					'RIGHT_MARGIN' => isset($arResult['SECTION']['RIGHT_MARGIN']) ? $arResult['SECTION']['RIGHT_MARGIN'] : null,
				),
			)
		), $component, array("HIDE_ICONS" => "Y"));
}
if ($arResult['CATALOG'] && $arParams['USE_GIFTS_MAIN_PR_SECTION_LIST'] == 'Y' && \Bitrix\Main\ModuleManager::isModuleInstalled("sale"))
{
	$APPLICATION->IncludeComponent(
			"bitrix:sale.gift.main.products",
			"main",
			array(
				"SHOW_UNABLE_SKU_PROPS"=>$arParams["SHOW_UNABLE_SKU_PROPS"],
				"PAGE_ELEMENT_COUNT" => $arParams['GIFTS_MAIN_PRODUCT_DETAIL_PAGE_ELEMENT_COUNT'],
				"BLOCK_TITLE" => $arParams['GIFTS_MAIN_PRODUCT_DETAIL_BLOCK_TITLE'],

				"OFFERS_FIELD_CODE" => $arParams["OFFERS_FIELD_CODE"],
				"OFFERS_PROPERTY_CODE" => $arParams["OFFERS_PROPERTY_CODE"],

				"AJAX_MODE" => $arParams["AJAX_MODE"],
				"IBLOCK_TYPE" => $arParams["IBLOCK_TYPE"],
				"IBLOCK_ID" => $arParams["IBLOCK_ID"],

				"ELEMENT_SORT_FIELD" => 'ID',
				"ELEMENT_SORT_ORDER" => 'DESC',
				//"ELEMENT_SORT_FIELD2" => $arParams["ELEMENT_SORT_FIELD2"],
				//"ELEMENT_SORT_ORDER2" => $arParams["ELEMENT_SORT_ORDER2"],
				"FILTER_NAME" => 'searchFilter',
				"SECTION_URL" => $arParams["SECTION_URL"],
				"DETAIL_URL" => $arParams["DETAIL_URL"],
				"BASKET_URL" => $arParams["BASKET_URL"],
				"ACTION_VARIABLE" => $arParams["ACTION_VARIABLE"],
				"PRODUCT_ID_VARIABLE" => $arParams["PRODUCT_ID_VARIABLE"],
				"SECTION_ID_VARIABLE" => $arParams["SECTION_ID_VARIABLE"],

				"CACHE_TYPE" => $arParams["CACHE_TYPE"],
				"CACHE_TIME" => $arParams["CACHE_TIME"],

				"CACHE_GROUPS" => $arParams["CACHE_GROUPS"],
				"SET_TITLE" => $arParams["SET_TITLE"],
				"PROPERTY_CODE" => $arParams["PROPERTY_CODE"],
				"PRICE_CODE" => $arParams["PRICE_CODE"],
				"USE_PRICE_COUNT" => $arParams["USE_PRICE_COUNT"],
				"SHOW_PRICE_COUNT" => $arParams["SHOW_PRICE_COUNT"],

				"PRICE_VAT_INCLUDE" => $arParams["PRICE_VAT_INCLUDE"],
				"CONVERT_CURRENCY" => $arParams["CONVERT_CURRENCY"],
				"CURRENCY_ID" => $arParams["CURRENCY_ID"],
				"HIDE_NOT_AVAILABLE" => $arParams["HIDE_NOT_AVAILABLE"],
				"TEMPLATE_THEME" => (isset($arParams["TEMPLATE_THEME"]) ? $arParams["TEMPLATE_THEME"] : ""),

				"ADD_PICT_PROP" => (isset($arParams["ADD_PICT_PROP"]) ? $arParams["ADD_PICT_PROP"] : ""),

				"LABEL_PROP" => (isset($arParams["LABEL_PROP"]) ? $arParams["LABEL_PROP"] : ""),
				"OFFER_ADD_PICT_PROP" => (isset($arParams["OFFER_ADD_PICT_PROP"]) ? $arParams["OFFER_ADD_PICT_PROP"] : ""),
				"OFFER_TREE_PROPS" => (isset($arParams["OFFER_TREE_PROPS"]) ? $arParams["OFFER_TREE_PROPS"] : ""),
				"SHOW_DISCOUNT_PERCENT" => (isset($arParams["SHOW_DISCOUNT_PERCENT"]) ? $arParams["SHOW_DISCOUNT_PERCENT"] : ""),
				"SHOW_OLD_PRICE" => (isset($arParams["SHOW_OLD_PRICE"]) ? $arParams["SHOW_OLD_PRICE"] : ""),
				"MESS_BTN_BUY" => (isset($arParams["MESS_BTN_BUY"]) ? $arParams["MESS_BTN_BUY"] : ""),
				"MESS_BTN_ADD_TO_BASKET" => (isset($arParams["MESS_BTN_ADD_TO_BASKET"]) ? $arParams["MESS_BTN_ADD_TO_BASKET"] : ""),
				"MESS_BTN_DETAIL" => (isset($arParams["MESS_BTN_DETAIL"]) ? $arParams["MESS_BTN_DETAIL"] : ""),
				"MESS_NOT_AVAILABLE" => (isset($arParams["MESS_NOT_AVAILABLE"]) ? $arParams["MESS_NOT_AVAILABLE"] : ""),
				'ADD_TO_BASKET_ACTION' => (isset($arParams["ADD_TO_BASKET_ACTION"]) ? $arParams["ADD_TO_BASKET_ACTION"] : ""),
				'SHOW_CLOSE_POPUP' => (isset($arParams["SHOW_CLOSE_POPUP"]) ? $arParams["SHOW_CLOSE_POPUP"] : ""),
				'DISPLAY_COMPARE' => (isset($arParams['DISPLAY_COMPARE']) ? $arParams['DISPLAY_COMPARE'] : ''),
				'COMPARE_PATH' => (isset($arParams['COMPARE_PATH']) ? $arParams['COMPARE_PATH'] : ''),
				"SHOW_DISCOUNT_TIME" => $arParams["SHOW_DISCOUNT_TIME"],
				"SALE_STIKER" => $arParams["SALE_STIKER"],
				"SHOW_MEASURE" => $arParams["SHOW_MEASURE"],
				"DISPLAY_TYPE" => "block",
				"SHOW_RATING" => $arParams["SHOW_RATING"],
				"DISPLAY_WISH_BUTTONS" => $arParams["DISPLAY_WISH_BUTTONS"],
				"DEFAULT_COUNT" => $arParams["DEFAULT_COUNT"],
			)
			+ array(
				'OFFER_ID' => empty($arResult['OFFERS'][$arResult['OFFERS_SELECTED']]['ID']) ? $arResult['ID'] : $arResult['OFFERS'][$arResult['OFFERS_SELECTED']]['ID'],
				'SECTION_ID' => $arResult['SECTION']['ID'],
				'ELEMENT_ID' => $arResult['ID'],
			),
			$component,
			array("HIDE_ICONS" => "Y")
	);
}
?>
</div>

<script type="text/javascript">	
	BX.message({
		QUANTITY_AVAILIABLE: '<? echo COption::GetOptionString("aspro.optimus", "EXPRESSION_FOR_EXISTS", GetMessage("EXPRESSION_FOR_EXISTS_DEFAULT"), SITE_ID); ?>',
		QUANTITY_NOT_AVAILIABLE: '<? echo COption::GetOptionString("aspro.optimus", "EXPRESSION_FOR_NOTEXISTS", GetMessage("EXPRESSION_FOR_NOTEXISTS"), SITE_ID); ?>',
		ADD_ERROR_BASKET: '<? echo GetMessage("ADD_ERROR_BASKET"); ?>',
		ADD_ERROR_COMPARE: '<? echo GetMessage("ADD_ERROR_COMPARE"); ?>',
		ONE_CLICK_BUY: '<? echo GetMessage("ONE_CLICK_BUY"); ?>',
		SITE_ID: '<? echo SITE_ID; ?>'
	})	
</script>

<!--http://schema.org -->
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Product",
  "description": "<?=strip_tags($arResult["DETAIL_TEXT"])?>",
  "name": "<?=strip_tags($arResult["NAME"])?>"
  <?if($arResult["MORE_PHOTO"]):?>
  ,"image": "<?=$arResult["MORE_PHOTO"][0]["SRC"]?>"
  <?endif;?>
  ,"offers": {
	<?$count_offers=count($arResult["OFFERS"]);?>
	<?if($count_offers > 0):?>
		"@type": "AggregateOffer",
		"lowPrice": "<?=($arResult["MIN_PRICE"]["DISCOUNT_VALUE"] ? $arResult["MIN_PRICE"]["DISCOUNT_VALUE"] : $arResult["MIN_PRICE"]["VALUE"] );?>",
		"offerCount": "<?=$count_offers;?>",
		"priceCurrency": "<?=$arResult["MIN_PRICE"]["CURRENCY"];?>",
		"offers": [
			<?foreach($arResult["OFFERS"] as $key => $arOffer):?>
			<?=($key ? "," : "");?>{
				"@type": "Offer",
				"url": "<?=$arOffer["DETAIL_PAGE_URL"];?>",
				"price": "<?=($arOffer["MIN_PRICE"]["DISCOUNT_VALUE"] ? $arOffer["MIN_PRICE"]["DISCOUNT_VALUE"] : $arOffer["MIN_PRICE"]["VALUE"] );?>",
				"priceCurrency": "<?=$arOffer["MIN_PRICE"]["CURRENCY"];?>"
			  }
			<?endforeach;?>
		]
	<?else:?>
		"@type": "Offer",
		"availability": "http://schema.org/InStock",
		<?if($arResult["MIN_PRICE"]):?>
		"price": "<?=(($arResult["MIN_PRICE"]["VALUE"] > $arResult["MIN_PRICE"]["DISCOUNT_VALUE"] && $arParams["SHOW_OLD_PRICE"]=="Y") ? $arResult["MIN_PRICE"]["DISCOUNT_VALUE"] : $arResult["MIN_PRICE"]["VALUE"] );?>",
		"priceCurrency": "<?=$arResult["MIN_PRICE"]["CURRENCY"];?>"
		<?endif;?>
	<?endif;?>
  }
	<?if($arResult["PROPERTIES"]):?>
		,"additionalProperty":[
		<?$i = 0;?>
		<?foreach($arResult["PROPERTIES"] as $propCode => $arProp):?>
			<?if(isset($arResult["DISPLAY_PROPERTIES"][$propCode])):?>
				<?$arProp = $arResult["DISPLAY_PROPERTIES"][$propCode];?>
				<?if(!in_array($arProp["CODE"], array("SERVICES", "BRAND", "HIT", "RECOMMEND", "NEW", "STOCK", "VIDEO", "VIDEO_YOUTUBE", "CML2_ARTICLE"))):?>
					<?if((!is_array($arProp["DISPLAY_VALUE"]) && strlen($arProp["DISPLAY_VALUE"])) || (is_array($arProp["DISPLAY_VALUE"]) && implode('', $arProp["DISPLAY_VALUE"]))):?>
					<?=($i ? "," : "");?>{
						"@type": "PropertyValue",
						"name": "<?=$arProp["NAME"]?>",
						"value": "<?if(count($arProp["DISPLAY_VALUE"]) > 1):?><?=implode(', ', $arProp["DISPLAY_VALUE"]);?><?else:?><?=$arProp["DISPLAY_VALUE"];?><?endif;?>"
					}
					<?$i++;?>
					<?endif;?>
				<?endif;?>
			<?endif;?>
		<?endforeach;?>
		]
	<?endif;?>
}
</script>146  5005|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/catalog.element/main/component_epilog.php|a138509<?
	if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();
	__IncludeLang($_SERVER["DOCUMENT_ROOT"].$templateFolder."/lang/".LANGUAGE_ID."/template.php");
	
use Bitrix\Main\Loader;
use Bitrix\Main\ModuleManager;
?>
<?if($arResult["ID"]):?>
	<?if($arParams["USE_REVIEW"] == "Y" && IsModuleInstalled("forum")):?>
		<div id="reviews_content">
			<?Bitrix\Main\Page\Frame::getInstance()->startDynamicWithID("area");?>
				<?$APPLICATION->IncludeComponent(
					"bitrix:forum.topic.reviews",
					"main",
					Array(
						"CACHE_TYPE" => $arParams["CACHE_TYPE"],
						"CACHE_TIME" => $arParams["CACHE_TIME"],
						"MESSAGES_PER_PAGE" => $arParams["MESSAGES_PER_PAGE"],
						"USE_CAPTCHA" => $arParams["USE_CAPTCHA"],
						"FORUM_ID" => $arParams["FORUM_ID"],
						"ELEMENT_ID" => $arResult["ID"],
						"IBLOCK_ID" => $arParams["IBLOCK_ID"],
						"AJAX_POST" => $arParams["REVIEW_AJAX_POST"],
						"SHOW_RATING" => "N",
						"SHOW_MINIMIZED" => "Y",
						"SECTION_REVIEW" => "Y",
						"POST_FIRST_MESSAGE" => "Y",
						"MINIMIZED_MINIMIZE_TEXT" => GetMessage("HIDE_FORM"),
						"MINIMIZED_EXPAND_TEXT" => GetMessage("ADD_REVIEW"),
						"SHOW_AVATAR" => "N",
						"SHOW_LINK_TO_FORUM" => "N",
						"PATH_TO_SMILE" => "/bitrix/images/forum/smile/",
					),	false
				);?>
			<?Bitrix\Main\Page\Frame::getInstance()->finishDynamicWithID("area", "");?>
		</div>
	<?endif;?>
	<?if(($arParams["SHOW_ASK_BLOCK"] == "Y") && (intVal($arParams["ASK_FORM_ID"]))):?>
		<div id="ask_block_content">
			<?$APPLICATION->IncludeComponent(
				"bitrix:form.result.new",
				"inline",
				Array(
					"WEB_FORM_ID" => $arParams["ASK_FORM_ID"],
					"IGNORE_CUSTOM_TEMPLATE" => "N",
					"USE_EXTENDED_ERRORS" => "N",
					"SEF_MODE" => "N",
					"CACHE_TYPE" => "A",
					"CACHE_TIME" => "3600000",
					"LIST_URL" => "",
					"EDIT_URL" => "",
					"SUCCESS_URL" => "?send=ok",
					"CHAIN_ITEM_TEXT" => "",
					"CHAIN_ITEM_LINK" => "",
					"VARIABLE_ALIASES" => Array("WEB_FORM_ID" => "WEB_FORM_ID", "RESULT_ID" => "RESULT_ID"),
					"AJAX_MODE" => "Y",
					"AJAX_OPTION_JUMP" => "N",
					"AJAX_OPTION_STYLE" => "Y",
					"AJAX_OPTION_HISTORY" => "N",
				)
			);?>
		</div>
	<?endif;?>
	<script type="text/javascript">
		if($(".specials_tabs_section.specials_slider_wrapp").length && $("#reviews_content").length){
			$("#reviews_content").after($(".specials_tabs_section.specials_slider_wrapp"));
		}
		if($("#ask_block_content").length && $("#ask_block").length){
			$("#ask_block_content").appendTo($("#ask_block"));
		}
		if($(".gifts").length && $("#reviews_content").length){
			$(".gifts").insertAfter($("#reviews_content"));
		}
		if($("#reviews_content").length && !$(".tabs_section ul.tabs_content li.current").length){
			$(".shadow.common").hide();
			$("#reviews_content").show();
		}
		if(!$(".stores_tab").length){
			$('.item-stock .store_view').removeClass('store_view');
		}
		viewItemCounter('<?=$arResult["ID"];?>','<?=current($arParams["PRICE_CODE"]);?>');
	</script>
<?endif;?>
<?if (isset($templateData['TEMPLATE_LIBRARY']) && !empty($templateData['TEMPLATE_LIBRARY'])){
	$loadCurrency = false;
	if (!empty($templateData['CURRENCIES']))
		$loadCurrency = Loader::includeModule('currency');
	CJSCore::Init($templateData['TEMPLATE_LIBRARY']);
	if ($loadCurrency){?>
		<script type="text/javascript">
			BX.Currency.setCurrencies(<? echo $templateData['CURRENCIES']; ?>);
		</script>
	<?}
}?>
<script type="text/javascript">
	var viewedCounter = {
		path: '/bitrix/components/bitrix/catalog.element/ajax.php',
		params: {
			AJAX: 'Y',
			SITE_ID: "<?= SITE_ID ?>",
			PRODUCT_ID: "<?= $arResult['ID'] ?>",
			PARENT_ID: "<?= $arResult['ID'] ?>"
		}
	};
	BX.ready(
		BX.defer(function(){
			$('body').addClass('detail_page');
			<?//if(!isset($templateData['JS_OBJ'])){?>
				BX.ajax.post(
					viewedCounter.path,
					viewedCounter.params
				);
			<?//}?>
			if( $('.stores_tab').length ){
				$.ajax({
					type:"POST",
					url:arOptimusOptions['SITE_DIR']+"ajax/productStoreAmount.php",
					data:<?=CUtil::PhpToJSObject($templateData["STORES"], false, true, true)?>,
					success: function(data){
						var arSearch=parseUrlQuery();
						$('.tabs_content .stores_tab').html(data);
						if("oid" in arSearch)
							$('.stores_tab .sku_stores_'+arSearch.oid).show();
						else
							$('.stores_tab > div:first').show();

					}
				});
			}
		})
		
	);
</script>
<?if($_REQUEST && isset($_REQUEST['formresult'])):?>
	<script>
	$(document).ready(function() {
		if($('#ask_block .form_result').length){
			$('.product_ask_tab').trigger('click');
		}
	});
	</script>
<?endif;?>
<?if(isset($_GET["RID"])){?>
	<?if($_GET["RID"]){?>
		<script>
			$(document).ready(function() {
				$("<div class='rid_item' data-rid='<?=htmlspecialcharsbx($_GET["RID"]);?>'></div>").appendTo($('body'));
			});
		</script>
	<?}?>
<?}?>126  3578|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/news/shops/detail.php|6bde3bd<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();?>
<?$this->setFrameMode(true);?>
<?$APPLICATION->ShowViewContent('map_content');?>
<?$APPLICATION->IncludeComponent(
	"bitrix:news.detail",
	"shops",
	Array(
		"IBLOCK_CATALOG_TYPE" => $arParams["IBLOCK_CATALOG_TYPE"],
		"IBLOCK_CATALOG_ID" => $arParams["IBLOCK_CATALOG_ID"],
		"DISPLAY_DATE" => $arParams["DISPLAY_DATE"],
		"DISPLAY_NAME" => $arParams["DISPLAY_NAME"],
		"DISPLAY_PICTURE" => $arParams["DISPLAY_PICTURE"],
		"DISPLAY_PREVIEW_TEXT" => $arParams["DISPLAY_PREVIEW_TEXT"],
		"IBLOCK_TYPE" => $arParams["IBLOCK_TYPE"],
		"IBLOCK_ID" => $arParams["IBLOCK_ID"],
		"FIELD_CODE" => $arParams["DETAIL_FIELD_CODE"],
		"PROPERTY_CODE" => $arParams["DETAIL_PROPERTY_CODE"],
		"DETAIL_URL"	=>	$arResult["FOLDER"].$arResult["URL_TEMPLATES"]["detail"],
		"SECTION_URL"	=>	$arResult["FOLDER"].$arResult["URL_TEMPLATES"]["section"],
		"META_KEYWORDS" => $arParams["META_KEYWORDS"],
		"META_DESCRIPTION" => $arParams["META_DESCRIPTION"],
		"BROWSER_TITLE" => $arParams["BROWSER_TITLE"],
		"DISPLAY_PANEL" => $arParams["DISPLAY_PANEL"],
		"SET_TITLE" => 'N',
		"SET_STATUS_404" => $arParams["SET_STATUS_404"],
		"INCLUDE_IBLOCK_INTO_CHAIN" => $arParams["INCLUDE_IBLOCK_INTO_CHAIN"],
		"ADD_SECTIONS_CHAIN" => $arParams["ADD_SECTIONS_CHAIN"],
		"ADD_ELEMENT_CHAIN" => 'N',
		"ACTIVE_DATE_FORMAT" => $arParams["DETAIL_ACTIVE_DATE_FORMAT"],
		"CACHE_TYPE" => 'A', // for map!
		"CACHE_TIME" => $arParams["CACHE_TIME"],
		"CACHE_GROUPS" => $arParams["CACHE_GROUPS"],
		"USE_PERMISSIONS" => $arParams["USE_PERMISSIONS"],
		"GROUP_PERMISSIONS" => $arParams["GROUP_PERMISSIONS"],
		"DISPLAY_TOP_PAGER" => $arParams["DETAIL_DISPLAY_TOP_PAGER"],
		"DISPLAY_BOTTOM_PAGER" => $arParams["DETAIL_DISPLAY_BOTTOM_PAGER"],
		"PAGER_TITLE" => $arParams["DETAIL_PAGER_TITLE"],
		"PAGER_SHOW_ALWAYS" => "N",
		"PAGER_TEMPLATE" => $arParams["DETAIL_PAGER_TEMPLATE"],
		"PAGER_SHOW_ALL" => $arParams["DETAIL_PAGER_SHOW_ALL"],
		"CHECK_DATES" => $arParams["CHECK_DATES"],
		"ELEMENT_ID" => $arResult["VARIABLES"]["ELEMENT_ID"],
		"ELEMENT_CODE" => $arResult["VARIABLES"]["ELEMENT_CODE"],
		"IBLOCK_URL" => $arResult["FOLDER"].$arResult["URL_TEMPLATES"]["news"],
		"USE_SHARE" 			=> $arParams["USE_SHARE"],
		"SHARE_HIDE" 			=> $arParams["SHARE_HIDE"],
		"SHARE_TEMPLATE" 		=> $arParams["SHARE_TEMPLATE"],
		"SHARE_HANDLERS" 		=> $arParams["SHARE_HANDLERS"],
		"SHARE_SHORTEN_URL_LOGIN"	=> $arParams["SHARE_SHORTEN_URL_LOGIN"],
		"SHARE_SHORTEN_URL_KEY" => $arParams["SHARE_SHORTEN_URL_KEY"],
		"CATALOG_FILTER_NAME" => $arParams["CATALOG_FILTER_NAME"],
		"IBLOCK_CATALOG_TYPE" => $arParams["IBLOCK_CATALOG_TYPE"],
		"CATALOG_IBLOCK_ID1" => $arParams["CATALOG_IBLOCK_ID1"],
		"CATALOG_IBLOCK_ID2" => $arParams["CATALOG_IBLOCK_ID2"],
		"CATALOG_IBLOCK_ID3"  => $arParams["CATALOG_IBLOCK_ID3"],
		"SHOW_BACK_LINK"  => $arParams["SHOW_BACK_LINK"],
		"GALLERY_PROPERTY" => $arParams["GALLERY_PROPERTY"],
		"SHOW_GALLERY"  => $arParams["SHOW_GALLERY"],
		"LINKED_PRODUCTS_PROPERTY"  => $arParams["LINKED_PRODUCTS_PROPERTY"],
		"SHOW_LINKED_PRODUCTS" => $arParams["SHOW_LINKED_PRODUCTS"],
		"GOOGLE_API_KEY" => $arParams["GOOGLE_API_KEY"],
		"MAP_TYPE" => $arParams["MAP_TYPE"],
	),
	$component
);?>

<?
if ($arParams['SET_TITLE'] == 'Y') {
	$APPLICATION->SetTitle($_SESSION['SHOP_TITLE']);
	$APPLICATION->SetPageProperty("title", $_SESSION['SHOP_TITLE']);
}
if ($arParams['ADD_ELEMENT_CHAIN'] == 'Y') {
	$APPLICATION->AddChainItem($_SESSION['SHOP_TITLE'], "");
}
?>131  628|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/news/shops/.parameters.php|d6962b8d<?
if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true) die();
/** @var array $arCurrentValues */
/** @global CUserTypeManager $USER_FIELD_MANAGER */
global $USER_FIELD_MANAGER;
use Bitrix\Main\Loader;
use Bitrix\Main\ModuleManager;
Loader::includeModule('iblock');

$arValues = array("Yandex", "Google");

$arTemplateParameters = array(
	"GOOGLE_API_KEY" => Array(
		"NAME" => GetMessage("GOOGLE_API_KEY"),
		"TYPE" => "STRING",
		"DEFAULT" => "",
	),
	"MAP_TYPE" => Array(
		"NAME" => GetMessage("MAP_TYPE_TITLE"),
		"TYPE" => "LIST",
		"DEFAULT" => "1",
		"VALUES" => $arValues,
	),	
);

?>126  10047|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/news/shops/news.php|5cf99756<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();?>
<?$this->setFrameMode(true);?>

<?
$arItemsFilter = COptimus::GetIBlockAllElementsFilter($arParams);

if(!($bMap = in_array('MAP', $arParams['LIST_PROPERTY_CODE']))){
	$itemsCnt = COptimusCache::CIBlockElement_GetList(array('CACHE' => array('TAG' => COptimusCache::GetIBlockCacheTag($arParams['IBLOCK_ID']))), $arItemsFilter, array());
}
else{
	// get items & coordinates
	$arItems = COptimusCache::CIBlockElement_GetList(array('CACHE' => array('TAG' => COptimusCache::GetIBlockCacheTag($arParams['IBLOCK_ID']), 'URL_TEMPLATE' => $arResult['FOLDER'].$arResult['URL_TEMPLATES']['detail'])), $arItemsFilter, false, false, array('ID', 'NAME', 'DETAIL_PAGE_URL', 'PREVIEW_TEXT', 'PROPERTY_ADDRESS', 'PROPERTY_PHONE', 'PROPERTY_EMAIL', 'PROPERTY_SCHEDULE', 'PROPERTY_METRO', 'PROPERTY_MAP'));
	$itemsCnt = count($arItems);
}
// print_r($arItems);
if($bMap && $itemsCnt){
		foreach($arItems as $arItem){
			// element coordinates
			$arItem['GPS_S'] = $arItem['GPS_N'] = false;
			if($arStoreMap = explode(',', $arItem['PROPERTY_MAP_VALUE'])){
				$arItem['GPS_S'] = $arStoreMap[0];
				$arItem['GPS_N'] = $arStoreMap[1];
			}

			// use detail link?
			$bDetailLink = $arParams['SHOW_DETAIL_LINK'] !== 'N' && (!strlen($arItem['DETAIL_TEXT']) ? ($arParams['HIDE_LINK_WHEN_NO_DETAIL'] !== 'Y' && $arParams['HIDE_LINK_WHEN_NO_DETAIL'] != 1) : true);

			$html = '';
			// element name
			if(in_array('NAME', $arParams['LIST_FIELD_CODE']) && strlen($arItem['NAME'])){
				$html .= '<div class="title">';
					if($bDetailLink){
						$html .= '<a class="dark_font" href="'.$arItem['DETAIL_PAGE_URL'].'">';
					}
					$html .= $arItem['NAME'];
					
					$bAddress = in_array('ADDRESS', $arParams['LIST_PROPERTY_CODE']) && ($arItem['PROPERTY_ADDRESS_VALUE'] || (!is_array($arItem['PROPERTY_ADDRESS_VALUE']) && strlen($arItem['PROPERTY_ADDRESS_VALUE'])));
					if($bAddress){
							$value = (is_array($arItem['PROPERTY_ADDRESS_VALUE']) ? implode('<br />', $arItem['PROPERTY_ADDRESS_VALUE']) : (strlen($arItem['PROPERTY_ADDRESS_VALUE']) ? $arItem['PROPERTY_ADDRESS_VALUE'] : ''));
							if($value){
								$html .= ((strlen($arItem['NAME']) && strlen($value)) ? ', ' : '').$value;
							}
						}

					if($bDetailLink){
						$html .= '</a>';
					}
				$html .= '</div>';
			}

			$html .= '<div class="info-content">';
				// element metro				
				$bMetro = in_array('METRO', $arParams['LIST_PROPERTY_CODE']) && ($arItem['PROPERTY_METRO_VALUE'] || (!is_array($arItem['PROPERTY_METRO_VALUE']) && strlen($arItem['PROPERTY_METRO_VALUE'])));
				if($bMetro){
					if($bMetro){
						$value = (is_array($arItem['PROPERTY_METRO_VALUE']) ? implode(', ', $arItem['PROPERTY_METRO_VALUE']) : (strlen($arItem['PROPERTY_METRO_VALUE']) ? $arItem['PROPERTY_METRO_VALUE'] : ''));
						if($value){
							$html .= '<div class="metro"><i></i>'.$value.'</div>';
						}
					}
				}

				// element schedule
				if(in_array('SCHEDULE', $arParams['LIST_PROPERTY_CODE']) && ($arItem['PROPERTY_SCHEDULE_VALUE'] || strlen($arItem['PROPERTY_SCHEDULE_VALUE']))){
					$html .= '<div class="schedule">'.$arItem['~PROPERTY_SCHEDULE_VALUE']['TEXT'].'</div>';
				}

				// element phone
				if(in_array('PHONE', $arParams['LIST_PROPERTY_CODE']) && ($arItem['PROPERTY_PHONE_VALUE'] || (!is_array($arItem['PROPERTY_PHONE_VALUE']) && strlen($arItem['PROPERTY_PHONE_VALUE'])))){
					if(is_array($arItem['PROPERTY_PHONE_VALUE'])){
						$values = array();
						foreach($arItem['PROPERTY_PHONE_VALUE'] as $value){
							$values[] = '<a href="tel:'.str_replace(array(' ', ',', '-', '(', ')'), '', $value).'">'.$value.'</a>';
						}
						$html .= '<div class="phone">'.implode('<br>', $values).'</div>';
					}
					elseif(strlen($arItem['PROPERTY_PHONE_VALUE'])){
						$html .= '<div class="phone"><a href="tel:'.str_replace(array(' ', ',', '-', '(', ')'), '', $arItem['PROPERTY_PHONE_VALUE']).'">'.$arItem['PROPERTY_PHONE_VALUE'].'</a></div>';
					}
				}

				// element email
				if(in_array('EMAIL', $arParams['LIST_PROPERTY_CODE']) && ($arItem['PROPERTY_EMAIL_VALUE'] || (!is_array($arItem['PROPERTY_EMAIL_VALUE']) && strlen($arItem['PROPERTY_EMAIL_VALUE'])))){
					if(is_array($arItem['PROPERTY_EMAIL_VALUE'])){
						$values = array();
						foreach($arItem['PROPERTY_EMAIL_VALUE'] as $value){
							$values[] = '<a href="mailto:'.$value.'">'.$value.'</a>';
						}
						$html .= '<div class="email">'.implode(', ', $values).'</div>';
					}
					elseif(strlen($arItem['PROPERTY_EMAIL_VALUE'])){
						$html .= '<div class="email"><a href="mailto:'.$arItem['PROPERTY_EMAIL_VALUE'].'">'.$arItem['PROPERTY_EMAIL_VALUE'].'</a></div>';
					}
				}
			$html .= '</div>';

			// detail page link
			if($bDetailLink){
				$html .= '<a class="button" href="'.$arItem['DETAIL_PAGE_URL'].'"><span>'.GetMessage('T_SHOPS_DETAIL').'</span></a>';
			}

			// add placemark to map
			if($arItem['GPS_S'] && $arItem['GPS_N']){
				$mapLAT += $arItem['GPS_S'];
				$mapLON += $arItem['GPS_N'];
				$arPlacemarks[] = array(
					"ID" => $arItem["ID"],
					"LAT" => $arItem['GPS_S'],
					"LON" => $arItem['GPS_N'],
					"TEXT" => $arItem['NAME'],
					"HTML" => $html,
				);
			}
		}

		// map?>
		<div class="contacts_map">
			<?Bitrix\Main\Page\Frame::getInstance()->startDynamicWithID('shops-map-block');?>
				<?if($arParams["MAP_TYPE"] != "0"):?>
					<?$APPLICATION->IncludeComponent(
						"bitrix:map.google.view",
						"map",
						array(
							"INIT_MAP_TYPE" => "ROADMAP",
							"MAP_DATA" => serialize(array("google_lat" => $mapLAT, "google_lon" => $mapLON, "google_scale" => 15, "PLACEMARKS" => $arPlacemarks)),
							"MAP_WIDTH" => "100%",
							"MAP_HEIGHT" => "400",
							"CONTROLS" => array(
							),
							"OPTIONS" => array(
								0 => "ENABLE_DBLCLICK_ZOOM",
								1 => "ENABLE_DRAGGING",
							),
							"MAP_ID" => "",
							"ZOOM_BLOCK" => array(
								"POSITION" => "right center",
							),
							"API_KEY" => $arParams["GOOGLE_API_KEY"],
							"COMPONENT_TEMPLATE" => "map",
							"COMPOSITE_FRAME_MODE" => "A",
							"COMPOSITE_FRAME_TYPE" => "AUTO"
						),
						false,
						array(
							"HIDE_ICONS" => "Y"
						)
					);?>
				<?else:?>
					<?
					$mapLAT = floatval($mapLAT / count($arItems));
					$mapLON = floatval($mapLON / count($arItems));
					?>
					<?$APPLICATION->IncludeComponent(
						"bitrix:map.yandex.view",
						"",
						array(
							"INIT_MAP_TYPE" => "ROADMAP",
							"MAP_DATA" => serialize(array("yandex_lat" => $mapLAT, "yandex_lon" => $mapLON, "yandex_scale" => 4, "PLACEMARKS" => $arPlacemarks)),
							"MAP_WIDTH" => "100%",
							"MAP_HEIGHT" => "400",
							"CONTROLS" => array(
								0 => "ZOOM",
								1 => "SMALLZOOM",
								3 => "TYPECONTROL",
								4 => "SCALELINE",
							),
							"OPTIONS" => array(
								0 => "ENABLE_DBLCLICK_ZOOM",
								1 => "ENABLE_DRAGGING",
							),
							"MAP_ID" => "",
							"ZOOM_BLOCK" => array(
								"POSITION" => "right center",
							),
							"COMPONENT_TEMPLATE" => "map",
							"API_KEY" => $arParams["GOOGLE_API_KEY"],
							"COMPOSITE_FRAME_MODE" => "A",
							"COMPOSITE_FRAME_TYPE" => "AUTO"
						),
						false, array("HIDE_ICONS" =>"Y")
					);?>
				<?endif;?>
			<?Bitrix\Main\Page\Frame::getInstance()->finishDynamicWithID('shops-map-block', '');?>
		</div>
	<?}
?>

<?$APPLICATION->IncludeComponent(
	"bitrix:news.list",
	"shops",
	Array(
		"IBLOCK_TYPE"	=>	$arParams["IBLOCK_TYPE"],
		"IBLOCK_ID"	=>	$arParams["IBLOCK_ID"],
		"NEWS_COUNT"	=>	$arParams["NEWS_COUNT"],
		"SORT_BY1"	=>	$arParams["SORT_BY1"],
		"SORT_ORDER1"	=>	$arParams["SORT_ORDER1"],
		"SORT_BY2"	=>	$arParams["SORT_BY2"],
		"SORT_ORDER2"	=>	$arParams["SORT_ORDER2"],
		"FIELD_CODE"	=>	$arParams["LIST_FIELD_CODE"],
		"PROPERTY_CODE"	=>	$arParams["LIST_PROPERTY_CODE"],
		"DETAIL_URL"	=>	$arResult["FOLDER"].$arResult["URL_TEMPLATES"]["detail"],
		"SECTION_URL"	=>	$arResult["FOLDER"].$arResult["URL_TEMPLATES"]["section"],
		"IBLOCK_URL"	=>	$arResult["FOLDER"].$arResult["URL_TEMPLATES"]["news"],
		"DISPLAY_PANEL"	=>	$arParams["DISPLAY_PANEL"],
		"SET_TITLE"	=>	"N",
		"SET_STATUS_404" => $arParams["SET_STATUS_404"],
		"INCLUDE_IBLOCK_INTO_CHAIN"	=>	$arParams["INCLUDE_IBLOCK_INTO_CHAIN"],
		"ADD_SECTIONS_CHAIN" => $arParams["ADD_SECTIONS_CHAIN"],
		"ADD_ELEMENT_CHAIN" => $arParams["ADD_ELEMENT_CHAIN"],
		"CACHE_TYPE"	=>	'A', // for map!
		"CACHE_TIME"	=>	$arParams["CACHE_TIME"],
		"CACHE_FILTER"	=>	$arParams["CACHE_FILTER"],
		"CACHE_GROUPS" => $arParams["CACHE_GROUPS"],
		"DISPLAY_TOP_PAGER"	=>	$arParams["DISPLAY_TOP_PAGER"],
		"DISPLAY_BOTTOM_PAGER"	=>	$arParams["DISPLAY_BOTTOM_PAGER"],
		"PAGER_TITLE" => $arParams["PAGER_TITLE"],
		"PAGER_TEMPLATE" => $arParams["PAGER_TEMPLATE"],
		"PAGER_SHOW_ALWAYS" => $arParams["PAGER_SHOW_ALWAYS"],
		"PAGER_DESC_NUMBERING" => $arParams["PAGER_DESC_NUMBERING"],
		"PAGER_DESC_NUMBERING_CACHE_TIME" => $arParams["PAGER_DESC_NUMBERING_CACHE_TIME"],
		"PAGER_SHOW_ALL" => $arParams["PAGER_SHOW_ALL"],
		"PAGER_BASE_LINK_ENABLE" => $arParams["PAGER_BASE_LINK_ENABLE"],
		"PAGER_BASE_LINK" => $arParams["PAGER_BASE_LINK"],
		"PAGER_PARAMS_NAME" => $arParams["PAGER_PARAMS_NAME"],
		"DISPLAY_DATE"	=>	$arParams["DISPLAY_DATE"],
		"DISPLAY_NAME"	=>	"Y",
		"DISPLAY_PICTURE"	=>	$arParams["DISPLAY_PICTURE"],
		"DISPLAY_PREVIEW_TEXT"	=>	$arParams["DISPLAY_PREVIEW_TEXT"],
		"PREVIEW_TRUNCATE_LEN"	=>	$arParams["PREVIEW_TRUNCATE_LEN"],
		"ACTIVE_DATE_FORMAT"	=>	$arParams["LIST_ACTIVE_DATE_FORMAT"],
		"USE_PERMISSIONS"	=>	$arParams["USE_PERMISSIONS"],
		"GROUP_PERMISSIONS"	=>	$arParams["GROUP_PERMISSIONS"],
		"FILTER_NAME"	=>	$arParams["FILTER_NAME"],
		"HIDE_LINK_WHEN_NO_DETAIL"	=>	$arParams["HIDE_LINK_WHEN_NO_DETAIL"],
		"CHECK_DATES"	=>	$arParams["CHECK_DATES"],
	),
	$component
);?>139  133|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/news/shops/lang/ru/.parameters.php|90ab15ac<?
$MESS["GOOGLE_API_KEY"] = "API  google ";
$MESS["MAP_TYPE_TITLE"] = "  ";
?>139  133|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/news/shops/lang/en/.parameters.php|90ab15ac<?
$MESS["GOOGLE_API_KEY"] = "API  google ";
$MESS["MAP_TYPE_TITLE"] = "  ";
?>141  4902|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/form.result.new/inline/template.php|a50cc90c<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true) die();?>
<?$frame = $this->createFrame()->begin('')?>
<?
$bLeftAndRight = false;
if(is_array($arResult["QUESTIONS"])){
	foreach($arResult["QUESTIONS"] as $arQuestion){
		if($arQuestion["STRUCTURE"][0]["FIELD_PARAM"] == 'left'){
			$bLeftAndRight = true;
			break;
		}
	}
}
?>
<div class="form inline <?=$arResult["arForm"]["SID"]?>">
	<!--noindex-->
	<div class="form_head">
		<?if($arResult["isFormTitle"] == "Y"):?>
			<h4><?=$arResult["FORM_TITLE"]?></h4>
		<?endif;?>
		<?if($arResult["isFormDescription"] == "Y"):?>
			<div class="form_desc"><?=$arResult["FORM_DESCRIPTION"]?></div>
		<?endif;?>
	</div>
	<?if($arResult["isFormErrors"] == "Y" || strlen($arResult["FORM_NOTE"])):?>
		<div class="form_result <?=($arResult["isFormErrors"] == "Y" ? 'error' : 'success')?>">
			<?if($arResult["isFormErrors"] == "Y"):?>
				<?=$arResult["FORM_ERRORS_TEXT"]?>
			<?else:?>
				<?$successNoteFile = SITE_DIR."include/form/success_{$arResult["arForm"]["SID"]}.php";?>
				<?if(file_exists($_SERVER["DOCUMENT_ROOT"].$successNoteFile)):?>
				<?$APPLICATION->IncludeFile($successNoteFile, array(), array("MODE" => "html", "NAME" => "Form success note"));?>
				<?else:?>
					<?=GetMessage("FORM_SUCCESS");?>
				<?endif;?>
			<?endif;?>
		</div>
	<?endif;?>
	<?=$arResult["FORM_HEADER"]?>
	<?=bitrix_sessid_post();?>
	<div class="form_body">
		<?if(is_array($arResult["QUESTIONS"])):?>
			<?if(!$bLeftAndRight):?>
				<?foreach($arResult["QUESTIONS"] as $FIELD_SID => $arQuestion):?>
					<?COptimus::drawFormField($FIELD_SID, $arQuestion);?>
				<?endforeach;?>
			<?else:?>
				<div class="form_left">
					<?foreach($arResult["QUESTIONS"] as $FIELD_SID => $arQuestion):?>
						<?if($arQuestion["STRUCTURE"][0]["FIELD_PARAM"] == 'left'):?>
							<?COptimus::drawFormField($FIELD_SID, $arQuestion);?>
						<?endif;?>
					<?endforeach;?>
				</div>
				<div class="form_right">
					<?foreach($arResult["QUESTIONS"] as $FIELD_SID => $arQuestion):?>
						<?if($arQuestion["STRUCTURE"][0]["FIELD_PARAM"] != 'left'):?>
							<?COptimus::drawFormField($FIELD_SID, $arQuestion);?>
						<?endif;?>
					<?endforeach;?>
				</div>
			<?endif;?>
		<?endif;?>
		<div class="clearboth"></div>
		<?if($arResult["isUseCaptcha"] == "Y"):?>
			<div class="form-control captcha-row clearfix">
				<label><span><?=GetMessage("FORM_CAPRCHE_TITLE")?>&nbsp;<span class="star">*</span></span></label>
				<div class="captcha_image">
					<img src="/bitrix/tools/captcha.php?captcha_sid=<?=htmlspecialcharsbx($arResult["CAPTCHACode"])?>" border="0" />
					<input type="hidden" name="captcha_sid" value="<?=htmlspecialcharsbx($arResult["CAPTCHACode"])?>" />
					<div class="captcha_reload"></div>
				</div>
				<div class="captcha_input">
					<input type="text" class="inputtext captcha" name="captcha_word" size="30" maxlength="50" value="" required />
				</div>
			</div>
		<?endif;?>
		<div class="clearboth"></div>
	</div>
	<div class="form_footer">
		<?/*<button type="submit" class="button medium" value="submit" name="web_form_submit" ><span><?=$arResult["arForm"]["BUTTON"]?></span></button>*/?>
		<input type="submit" class="button medium" value="<?=$arResult["arForm"]["BUTTON"]?>" name="web_form_submit">
		<button type="reset" class="button medium transparent" value="reset" name="web_form_reset" ><span><?=GetMessage('FORM_RESET')?></span></button>
		<script type="text/javascript">
		$(document).ready(function(){
			$('form[name="<?=$arResult["arForm"]["VARNAME"]?>"]').validate({
				highlight: function( element ){
					$(element).parent().addClass('error');
				},
				unhighlight: function( element ){
					$(element).parent().removeClass('error');
				},
				submitHandler: function( form ){
					if( $('form[name="<?=$arResult["arForm"]["VARNAME"]?>"]').valid() ){
						form.submit();
						setTimeout(function() {
							$(form).find('button[type="submit"]').attr("disabled", "disabled");
						}, 300);
					}
				},
				errorPlacement: function( error, element ){
					error.insertBefore(element);
				}
			});
			
			if(arOptimusOptions['THEME']['PHONE_MASK'].length){
				var base_mask = arOptimusOptions['THEME']['PHONE_MASK'].replace( /(\d)/g, '_' );
				$('form[name=<?=$arResult["arForm"]["VARNAME"]?>] input.phone, form[name=<?=$arResult["arForm"]["VARNAME"]?>] input[data-sid=PHONE]').inputmask('mask', {'mask': arOptimusOptions['THEME']['PHONE_MASK'] });
				$('form[name=<?=$arResult["arForm"]["VARNAME"]?>] input.phone, form[name=<?=$arResult["arForm"]["VARNAME"]?>] input[data-sid=PHONE]').blur(function(){
					if( $(this).val() == base_mask || $(this).val() == '' ){
						if( $(this).hasClass('required') ){
							$(this).parent().find('label.error').html(BX.message('JS_REQUIRED'));
						}
					}
				});
			}
		});
		</script>
	</div>
	<?=$arResult["FORM_FOOTER"]?>
	<!--/noindex-->
</div>
<?$frame->end()?>140  4013|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/form.result.new/popup/template.php|f727422c<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true) die();?>
<a href="#" class="close jqmClose"><i></i></a>
<div class="form <?=$arResult["arForm"]["SID"]?>">
	<!--noindex-->
	<div class="form_head">
		<?if($arResult["isFormTitle"] == "Y"):?>
			<h2><?=$arResult["FORM_TITLE"]?></h2>
		<?endif;?>
		<?if($arResult["isFormDescription"] == "Y"):?>
			<div class="form_desc"><?=$arResult["FORM_DESCRIPTION"]?></div>
		<?endif;?>
	</div>
	<?if($arResult["isFormErrors"] == "Y" || strlen($arResult["FORM_NOTE"])){?>
		<div class="form_result <?=($arResult["isFormErrors"] == "Y" ? 'error' : 'success')?>">
			<?if($arResult["isFormErrors"] == "Y"):?>
				<?=$arResult["FORM_ERRORS_TEXT"]?>
			<?else:?>
				<?$successNoteFile = SITE_DIR."include/form/success_{$arResult["arForm"]["SID"]}.php";?>
				<?if(file_exists($_SERVER["DOCUMENT_ROOT"].$successNoteFile)):?>
				<?$APPLICATION->IncludeFile($successNoteFile, array(), array("MODE" => "html", "NAME" => "Form success note"));?>
				<?else:?>
					<?=GetMessage("FORM_SUCCESS");?>
				<?endif;?>
			<?endif;?>
		</div>
	<?}else{?>
		<?=$arResult["FORM_HEADER"]?>
		<?=bitrix_sessid_post();?>
		<div class="form_body">
			<?if(is_array($arResult["QUESTIONS"])):?>
				<?foreach($arResult["QUESTIONS"] as $FIELD_SID => $arQuestion):?>
					<?COptimus::drawFormField($FIELD_SID, $arQuestion);?>
				<?endforeach;?>				
			<?endif;?>
			<div class="clearboth"></div>
			<?if($arResult["isUseCaptcha"] == "Y"):?>
				<div class="form-control captcha-row clearfix">
					<label><span><?=GetMessage("FORM_CAPRCHE_TITLE")?>&nbsp;<span class="star">*</span></span></label>
					<div class="captcha_image">
						<img src="/bitrix/tools/captcha.php?captcha_sid=<?=htmlspecialcharsbx($arResult["CAPTCHACode"])?>" border="0" />
						<input type="hidden" name="captcha_sid" value="<?=htmlspecialcharsbx($arResult["CAPTCHACode"])?>" />
						<div class="captcha_reload"></div>
					</div>
					<div class="captcha_input">
						<input type="text" class="inputtext captcha" name="captcha_word" size="30" maxlength="50" value="" required />
					</div>
				</div>
			<?endif;?>
			<div class="clearboth"></div>
		</div>
		<div class="form_footer">
			<?/*<button type="submit" class="button medium" value="submit" name="web_form_submit" ><span><?=$arResult["arForm"]["BUTTON"]?></span></button>*/?>
			<input type="submit" class="button medium" value="<?=$arResult["arForm"]["BUTTON"]?>" name="web_form_submit">
			<button type="reset" class="button medium transparent" value="reset" name="web_form_reset" ><span><?=GetMessage('FORM_CLOSE')?></span></button>
			
		</div>
		<?=$arResult["FORM_FOOTER"]?>
	<?}?>
	<!--/noindex-->
	<script type="text/javascript">
	$(document).ready(function(){
		$('form[name="<?=$arResult["arForm"]["VARNAME"]?>"]').validate({
			highlight: function( element ){
				$(element).parent().addClass('error');
			},
			unhighlight: function( element ){
				$(element).parent().removeClass('error');
			},
			submitHandler: function( form ){
				if( $('form[name="<?=$arResult["arForm"]["VARNAME"]?>"]').valid() ){
					form.submit();
					setTimeout(function() {
						$(form).find('button[type="submit"]').attr("disabled", "disabled");
					}, 300);
				}
			},
			errorPlacement: function( error, element ){
				error.insertBefore(element);
			}
		});

		if(arOptimusOptions['THEME']['PHONE_MASK'].length){
			var base_mask = arOptimusOptions['THEME']['PHONE_MASK'].replace( /(\d)/g, '_' );
			$('form[name=<?=$arResult["arForm"]["VARNAME"]?>] input.phone').inputmask('mask', {'mask': arOptimusOptions['THEME']['PHONE_MASK'] });
			$('form[name=<?=$arResult["arForm"]["VARNAME"]?>] input.phone').blur(function(){
				if( $(this).val() == base_mask || $(this).val() == '' ){
					if( $(this).hasClass('required') ){
						$(this).parent().find('label.error').html(BX.message('JS_REQUIRED'));
					}
				}
			});
		}
		$('.popup').jqmAddClose('a.jqmClose');
		$('.popup').jqmAddClose('button[name="web_form_reset"]');
	});
	</script>
</div>143  24580|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/sale.gift.product/main/script.min.js|637edabafunction bx_sale_gift_product_load(t,s,e){s=s||{},e=e||{},BX.ajax({url:"/bitrix/components/bitrix/sale.gift.product/ajax.php",method:"POST",data:BX.merge(s,e),dataType:"html",processData:!1,start:!0,onsuccess:function(s){var e=BX.processHTML(s);BX(t).innerHTML=e.HTML,BX.ajax.processScripts(e.SCRIPT),initCountdown()}})}!function(t){if(!t.JCSaleGiftProduct){var s=function(t){s.superclass.constructor.apply(this,arguments),this.nameNode=BX.create("span",{props:{className:"bx_medium bx_bt_button",id:this.id},text:t.text}),this.buttonNode=BX.create("span",{attrs:{className:t.ownerClass},style:{marginBottom:"0",borderBottom:"0 none transparent"},children:[this.nameNode],events:this.contextEvents}),BX.browser.IsIE()&&this.buttonNode.setAttribute("hideFocus","hidefocus")};BX.extend(s,BX.PopupWindowButton),t.JCSaleGiftProduct=function(t){if(this.skuVisualParams={SELECT:{TAG_BIND:"select",TAG:"option",ACTIVE_CLASS:"active",HIDE_CLASS:"hidden",EVENT:"change"},LI:{TAG_BIND:"li",TAG:"li",ACTIVE_CLASS:"active",HIDE_CLASS:"missing",EVENT:"click"}},this.productType=0,this.showQuantity=!0,this.showAbsent=!0,this.secondPict=!1,this.showOldPrice=!1,this.showPercent=!1,this.showSkuProps=!1,this.visual={ID:"",PICT_ID:"",SECOND_PICT_ID:"",QUANTITY_ID:"",QUANTITY_UP_ID:"",QUANTITY_DOWN_ID:"",PRICE_ID:"",DSC_PERC:"",SECOND_DSC_PERC:"",DISPLAY_PROP_DIV:"",BASKET_PROP_DIV:""},this.product={checkQuantity:!1,maxQuantity:0,stepQuantity:1,isDblQuantity:!1,canBuy:!0,canSubscription:!0,name:"",pict:{},id:0,addUrl:"",buyUrl:""},this.basketData={useProps:!1,emptyProps:!1,quantity:"quantity",props:"prop",basketUrl:""},this.defaultPict={pict:null,secondPict:null},this.checkQuantity=!1,this.maxQuantity=0,this.stepQuantity=1,this.isDblQuantity=!1,this.canBuy=!0,this.canSubscription=!0,this.precision=6,this.precisionFactor=Math.pow(10,this.precision),this.offers=[],this.offerNum=0,this.treeProps=[],this.obTreeRows=[],this.showCount=[],this.showStart=[],this.selectedValues={},this.obProduct=null,this.obQuantity=null,this.obQuantityUp=null,this.obQuantityDown=null,this.obPict=null,this.obSecondPict=null,this.obPrice=null,this.obTree=null,this.obBuyBtn=null,this.obDscPerc=null,this.obSecondDscPerc=null,this.obSkuProps=null,this.obMeasure=null,this.obPopupWin=null,this.basketUrl="",this.basketParams={},this.treeRowShowSize=5,this.treeEnableArrow={display:"",cursor:"pointer",opacity:1},this.treeDisableArrow={display:"",cursor:"default",opacity:.2},this.lastElement=!1,this.containerHeight=0,this.errorCode=0,"object"==typeof t){switch(this.productType=parseInt(t.PRODUCT_TYPE,10),this.showQuantity=t.SHOW_QUANTITY,this.showAbsent=t.SHOW_ABSENT,this.secondPict=!!t.SECOND_PICT,this.showOldPrice=!!t.SHOW_OLD_PRICE,this.showPercent=!!t.SHOW_DISCOUNT_PERCENT,this.showSkuProps=!!t.SHOW_SKU_PROPS,this.visual=t.VISUAL,this.productType){case 1:case 2:t.PRODUCT&&"object"==typeof t.PRODUCT?(this.showQuantity&&(this.product.checkQuantity=t.PRODUCT.CHECK_QUANTITY,this.product.isDblQuantity=t.PRODUCT.QUANTITY_FLOAT,this.product.checkQuantity&&(this.product.maxQuantity=this.product.isDblQuantity?parseFloat(t.PRODUCT.MAX_QUANTITY):parseInt(t.PRODUCT.MAX_QUANTITY,10)),this.product.stepQuantity=this.product.isDblQuantity?parseFloat(t.PRODUCT.STEP_QUANTITY):parseInt(t.PRODUCT.STEP_QUANTITY,10),this.checkQuantity=this.product.checkQuantity,this.isDblQuantity=this.product.isDblQuantity,this.maxQuantity=this.product.maxQuantity,this.stepQuantity=this.product.stepQuantity,this.isDblQuantity&&(this.stepQuantity=Math.round(this.stepQuantity*this.precisionFactor)/this.precisionFactor)),this.product.canBuy=t.PRODUCT.CAN_BUY,this.product.canSubscription=t.PRODUCT.SUBSCRIPTION,this.canBuy=this.product.canBuy,this.canSubscription=this.product.canSubscription,this.product.name=t.PRODUCT.NAME,this.product.pict=t.PRODUCT.PICT,this.product.id=t.PRODUCT.ID,t.PRODUCT.ADD_URL&&(this.product.addUrl=t.PRODUCT.ADD_URL),t.PRODUCT.BUY_URL&&(this.product.buyUrl=t.PRODUCT.BUY_URL),t.BASKET&&"object"==typeof t.BASKET&&(this.basketData.useProps=!!t.BASKET.ADD_PROPS,this.basketData.emptyProps=!!t.BASKET.EMPTY_PROPS)):this.errorCode=-1;break;case 3:t.OFFERS&&BX.type.isArray(t.OFFERS)?(t.PRODUCT&&"object"==typeof t.PRODUCT&&(this.product.name=t.PRODUCT.NAME,this.product.id=t.PRODUCT.ID),this.offers=t.OFFERS,this.offerNum=0,t.OFFER_SELECTED&&(this.offerNum=parseInt(t.OFFER_SELECTED,10)),isNaN(this.offerNum)&&(this.offerNum=0),t.TREE_PROPS&&(this.treeProps=t.TREE_PROPS),t.DEFAULT_PICTURE&&(this.defaultPict.pict=t.DEFAULT_PICTURE.PICTURE,this.defaultPict.secondPict=t.DEFAULT_PICTURE.PICTURE_SECOND)):this.errorCode=-1;break;default:this.errorCode=-1}t.BASKET&&"object"==typeof t.BASKET&&(t.BASKET.QUANTITY&&(this.basketData.quantity=t.BASKET.QUANTITY),t.BASKET.PROPS&&(this.basketData.props=t.BASKET.PROPS),t.BASKET.BASKET_URL&&(this.basketData.basketUrl=t.BASKET.BASKET_URL)),this.lastElement=!!t.LAST_ELEMENT&&"Y"===t.LAST_ELEMENT}0===this.errorCode&&BX.ready(BX.delegate(this.Init,this))},t.JCSaleGiftProduct.prototype.Init=function(){var t=0,s="",e=null;if(this.obProduct=BX(this.visual.ID),this.obProduct||(this.errorCode=-1),this.obPict=BX(this.visual.PICT_ID),this.obPict||(this.errorCode=-2),this.secondPict&&this.visual.SECOND_PICT_ID&&(this.obSecondPict=BX(this.visual.SECOND_PICT_ID)),this.storeQuanity=BX(this.visual.STORE_QUANTITY),this.obPrice=BX(this.visual.PRICE_ID),this.obPriceOld=BX(this.visual.PRICE_OLD_ID),this.obPrice||(this.errorCode=-16),this.showQuantity&&this.visual.QUANTITY_ID&&(this.obQuantity=BX(this.visual.QUANTITY_ID),this.visual.QUANTITY_UP_ID&&(this.obQuantityUp=BX(this.visual.QUANTITY_UP_ID)),this.visual.QUANTITY_DOWN_ID&&(this.obQuantityDown=BX(this.visual.QUANTITY_DOWN_ID))),3===this.productType){if(this.visual.TREE_ID)for(this.obTree=BX(this.visual.TREE_ID),this.obTree||(this.errorCode=-256),s=this.visual.TREE_ITEM_ID,t=0;t<this.treeProps.length;t++)if(this.obTreeRows[t]={LIST:BX(s+this.treeProps[t].ID+"_list"),CONT:BX(s+this.treeProps[t].ID+"_cont")},!this.obTreeRows[t].LIST||!this.obTreeRows[t].CONT){this.errorCode=-512;break}this.visual.QUANTITY_MEASURE&&(this.obMeasure=BX(this.visual.QUANTITY_MEASURE))}if(this.visual.BUY_ID&&(this.obBuyBtn=BX(this.visual.BUY_ID)),this.showPercent&&(this.visual.DSC_PERC&&(this.obDscPerc=BX(this.visual.DSC_PERC)),this.secondPict&&this.visual.SECOND_DSC_PERC&&(this.obSecondDscPerc=BX(this.visual.SECOND_DSC_PERC))),this.showSkuProps&&this.visual.DISPLAY_PROP_DIV&&(this.obSkuProps=BX(this.visual.DISPLAY_PROP_DIV)),0===this.errorCode){switch(this.showQuantity&&(this.obQuantityUp&&BX.bind(this.obQuantityUp,"click",BX.delegate(this.QuantityUp,this)),this.obQuantityDown&&BX.bind(this.obQuantityDown,"click",BX.delegate(this.QuantityDown,this)),this.obQuantity&&BX.bind(this.obQuantity,"change",BX.delegate(this.QuantityChange,this))),this.productType){case 1:break;case 3:for(var i in this.skuVisualParams){var e=BX.findChildren(this.obTree,{tagName:this.skuVisualParams[i].TAG_BIND},!0);if(e&&0<e.length)for(t=0;t<e.length;t++)$(e[t]).on(this.skuVisualParams[i].EVENT,BX.delegate(this.SelectOfferProp,this))}this.SetCurrent()}this.obBuyBtn&&BX.bind(this.obBuyBtn,"click",BX.delegate(this.Basket,this))}},t.JCSaleGiftProduct.prototype.checkHeight=function(){this.containerHeight=parseInt(this.obProduct.parentNode.offsetHeight,10),isNaN(this.containerHeight)&&(this.containerHeight=0)},t.JCSaleGiftProduct.prototype.setHeight=function(){0<this.containerHeight&&BX.adjust(this.obProduct.parentNode,{style:{height:this.containerHeight+"px"}})},t.JCSaleGiftProduct.prototype.clearHeight=function(){BX.adjust(this.obProduct.parentNode,{style:{height:"auto"}})},t.JCSaleGiftProduct.prototype.QuantityUp=function(){var t=0,s=!0;0===this.errorCode&&this.showQuantity&&this.canBuy&&(t=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(t)||(t+=this.stepQuantity,this.checkQuantity&&t>this.maxQuantity&&(s=!1),s&&(this.isDblQuantity&&(t=Math.round(t*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=t)))},t.JCSaleGiftProduct.prototype.QuantityDown=function(){var t=0,s=!0;0===this.errorCode&&this.showQuantity&&this.canBuy&&(t=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(t)||(t-=this.stepQuantity,t<this.stepQuantity&&(s=!1),s&&(this.isDblQuantity&&(t=Math.round(t*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=t)))},t.JCSaleGiftProduct.prototype.QuantityChange=function(){var t=0,s=!0;0===this.errorCode&&this.showQuantity&&(this.canBuy?(t=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(t)?this.obQuantity.value=this.stepQuantity:(this.checkQuantity&&(t>this.maxQuantity?(s=!1,t=this.maxQuantity):t<this.stepQuantity&&(s=!1,t=this.stepQuantity)),s||(this.obQuantity.value=t))):this.obQuantity.value=this.stepQuantity)},t.JCSaleGiftProduct.prototype.QuantitySet=function(t){0===this.errorCode&&(this.canBuy=this.offers[t].CAN_BUY,this.canBuy?(this.obBasketActions&&BX.style(this.obBasketActions,"display",""),this.obNotAvail&&BX.style(this.obNotAvail,"display","none")):(this.obBasketActions&&(BX.style(this.obBasketActions,"opacity","0"),BX.style(BX.findParent(BX(this.obQuantity),{"class":"counter_block"}),"display","none")),this.obNotAvail&&BX.style(this.obNotAvail,"display","")),this.showQuantity&&(this.isDblQuantity=this.offers[t].QUANTITY_FLOAT,this.checkQuantity=this.offers[t].CHECK_QUANTITY,this.isDblQuantity?(this.maxQuantity=parseFloat(this.offers[t].MAX_QUANTITY),this.stepQuantity=Math.round(parseFloat(this.offers[t].STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor):(this.maxQuantity=parseInt(this.offers[t].MAX_QUANTITY,10),this.stepQuantity=parseInt(this.offers[t].STEP_QUANTITY,10)),this.obQuantity&&(this.obQuantity.value=this.defaultCount,this.obQuantity.disabled=!this.canBuy),this.obMeasure&&(this.offers[t].MEASURE?BX.adjust(this.obMeasure,{html:this.offers[t].MEASURE}):BX.adjust(this.obMeasure,{html:""}))),this.currentBasisPrice=this.offers[t].BASIS_PRICE)},t.JCSaleGiftProduct.prototype.SelectOfferProp=function(){var t=0,s="",e="",i=[],o=null,a=BX.proxy_context;if(a&&a.hasAttribute("data-treevalue")&&(e=a.getAttribute("data-treevalue"),propModes=a.getAttribute("data-showtype"),i=e.split("_"),this.SearchOfferPropIndex(i[0],i[1])&&(o=BX.findChildren(a.parentNode,{tagName:this.skuVisualParams[propModes.toUpperCase()].TAG},!1),o&&0<o.length)))for(t=0;t<o.length;t++)s=o[t].getAttribute("data-onevalue"),"TEXT"==propModes?s===i[1]?o[t].setAttribute("selected","selected"):o[t].removeAttribute("selected"):s===i[1]?$(o[t]).addClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS):$(o[t]).removeClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS)},t.JCSaleGiftProduct.prototype.SearchOfferPropIndex=function(t,s){var e,i,o="",a=!1,r=[],h=-1,n={},u=[];for(e=0;e<this.treeProps.length;e++)if(this.treeProps[e].ID===t){h=e;break}if(h>-1){for(e=0;h>e;e++)o="PROP_"+this.treeProps[e].ID,n[o]=this.selectedValues[o];if(o="PROP_"+this.treeProps[h].ID,a=this.GetRowValues(n,o),!a)return!1;if(!BX.util.in_array(s,a))return!1;for(n[o]=s,e=h+1;e<this.treeProps.length;e++){if(o="PROP_"+this.treeProps[e].ID,a=this.GetRowValues(n,o),!a)return!1;if(this.showAbsent)for(r=[],u=[],u=BX.clone(n,!0),i=0;i<a.length;i++)u[o]=a[i],this.GetCanBuy(u)&&(r[r.length]=a[i]);else r=a;this.selectedValues[o]&&BX.util.in_array(this.selectedValues[o],r)?n[o]=this.selectedValues[o]:n[o]=r[0],this.UpdateRow(e,n[o],a,r)}this.selectedValues=n,this.ChangeInfo()}return!0},t.JCSaleGiftProduct.prototype.RowLeft=function(){var t=0,s="",e=-1,i=BX.proxy_context;if(i&&i.hasAttribute("data-treevalue")){for(s=i.getAttribute("data-treevalue"),t=0;t<this.treeProps.length;t++)if(this.treeProps[t].ID===s){e=t;break}e>-1&&this.treeRowShowSize<this.showCount[e]&&(0>this.showStart[e]&&(this.showStart[e]++,BX.adjust(this.obTreeRows[e].LIST,{style:{marginLeft:20*this.showStart[e]+"%"}}),BX.adjust(this.obTreeRows[e].RIGHT,{style:this.treeEnableArrow})),0<=this.showStart[e]&&BX.adjust(this.obTreeRows[e].LEFT,{style:this.treeDisableArrow}))}},t.JCSaleGiftProduct.prototype.RowRight=function(){var t=0,s="",e=-1,i=BX.proxy_context;if(i&&i.hasAttribute("data-treevalue")){for(s=i.getAttribute("data-treevalue"),t=0;t<this.treeProps.length;t++)if(this.treeProps[t].ID===s){e=t;break}e>-1&&this.treeRowShowSize<this.showCount[e]&&(this.treeRowShowSize-this.showStart[e]<this.showCount[e]&&(this.showStart[e]--,BX.adjust(this.obTreeRows[e].LIST,{style:{marginLeft:20*this.showStart[e]+"%"}}),BX.adjust(this.obTreeRows[e].LEFT,{style:this.treeEnableArrow})),this.treeRowShowSize-this.showStart[e]>=this.showCount[e]&&BX.adjust(this.obTreeRows[e].RIGHT,{style:this.treeDisableArrow}))}},t.JCSaleGiftProduct.prototype.UpdateRow=function(t,s,e,i){var o=0,a=0,r="",h=0,n={},u=!1,c=0,l=(this.treeEnableArrow,this.treeEnableArrow,0),p=null;if(t>-1&&t<this.obTreeRows.length&&(propMode=this.treeProps[t].DISPLAY_TYPE,p=BX.findChildren(this.obTreeRows[t].LIST,{tagName:this.skuVisualParams[propMode].TAG},!1),p&&0<p.length)){for(selectMode="SELECT"===this.treeProps[t].DISPLAY_TYPE,h=e.length,n={style:{},props:{disabled:"",selected:""}},o=0;o<p.length;o++)r=p[o].getAttribute("data-onevalue"),u=r===s&&0!=r,BX.util.in_array(r,i)?n.props.className=u?this.skuVisualParams[propMode].ACTIVE_CLASS:"":n.props.className=u?this.skuVisualParams[propMode].ACTIVE_CLASS+" "+this.skuVisualParams[propMode].HIDE_CLASS:this.skuVisualParams[propMode].HIDE_CLASS,selectMode?(n.props.disabled="disabled",n.props.selected=u?"selected":""):n.style.display="none",BX.util.in_array(r,e)&&(selectMode?n.props.disabled="":n.style.display="",u&&(c=a),a++),BX.adjust(p[o],n);selectMode&&$(this.obTreeRows[t].LIST).parent().hasClass("ik_select")&&$(this.obTreeRows[t].LIST).ikSelect("reset"),this.showCount[t]=h,this.showStart[t]=l}},t.JCSaleGiftProduct.prototype.GetRowValues=function(t,s){var e,i=0,o=[],a=!1,r=!0;if(0===t.length){for(i=0;i<this.offers.length;i++)BX.util.in_array(this.offers[i].TREE[s],o)||(o[o.length]=this.offers[i].TREE[s]);a=!0}else for(i=0;i<this.offers.length;i++){r=!0;for(e in t)if(t[e]!==this.offers[i].TREE[e]){r=!1;break}r&&(BX.util.in_array(this.offers[i].TREE[s],o)||(o[o.length]=this.offers[i].TREE[s]),a=!0)}return a?o:!1},t.JCSaleGiftProduct.prototype.GetCanBuy=function(t){var s,e=0,i=!1,o=!0;for(e=0;e<this.offers.length;e++){o=!0;for(s in t)if(t[s]!==this.offers[e].TREE[s]){o=!1;break}if(o&&this.offers[e].CAN_BUY){i=!0;break}}return i},t.JCSaleGiftProduct.prototype.SetCurrent=function(){var t=0,s=0,e=[],i="",o=!1,a={},r=[],h=this.offers[this.offerNum].TREE;for(t=0;t<this.treeProps.length&&(i="PROP_"+this.treeProps[t].ID,o=this.GetRowValues(a,i),o);t++){if(BX.util.in_array(h[i],o)?a[i]=h[i]:(a[i]=o[0],this.offerNum=0),this.showAbsent)for(e=[],r=[],r=BX.clone(a,!0),s=0;s<o.length;s++)r[i]=o[s],this.GetCanBuy(r)&&(e[e.length]=o[s]);else e=o;this.UpdateRow(t,a[i],o,e)}this.selectedValues=a,this.ChangeInfo()},t.JCSaleGiftProduct.prototype.ChangeInfo=function(){var s,e=0,i=-1,o={},a=!0;for(e=0;e<this.offers.length;e++){a=!0;for(s in this.selectedValues)if(this.selectedValues[s]!==this.offers[e].TREE[s]){a=!1;break}if(a){i=e;break}}if(i>-1){if(this.obPict){var o={attrs:{}};this.offers[i].PREVIEW_PICTURE?o.attrs.src=this.offers[i].PREVIEW_PICTURE.SRC:o.attrs.src=this.defaultPict.pict.SRC,BX.adjust(BX.findChild(this.obPict,{tag:"img"}),o)}this.showSkuProps&&this.obSkuProps&&(0===this.offers[i].DISPLAY_PROPERTIES.length?BX.adjust(this.obSkuProps,{style:{display:"none"},html:""}):BX.adjust(this.obSkuProps,{style:{display:""},html:this.offers[i].DISPLAY_PROPERTIES}));var r=this.offers[i].MEASURE&&"Y"==this.offers[i].SHOW_MEASURE?this.offers[i].MEASURE:"";this.setPrice(this.offers[i].PRICE,r),this.setQuantityStore(this.offers[i].MAX_QUANTITY,this.offers[i].AVAILIABLE.TEXT),this.offerNum=i,this.QuantitySet(this.offerNum),$(this.obProduct).find(".quantity_block .values").length&&$(this.obProduct).find(".quantity_block .values .item span").text(this.offers[i].MAX_QUANTITY).css({opacity:"1"});var h=this.offers[i],n=$(this.obProduct);"undefined"!=typeof arBasketAspro?this.setActualDataBlock(n,h):"undefined"!=typeof t.frameCacheVars&&BX.addCustomEvent("onFrameDataReceived",function(){t.JCCatalogSection.prototype.setActualDataBlock(n,h)})}},t.JCSaleGiftProduct.prototype.setActualDataBlock=function(t,s){this.setLikeBlock(t,".like_icons .wish_item_button",s,"DELAY"),this.setLikeBlock(t,".like_icons .compare_item_button",s,"COMPARE"),this.setBuyBlock(t,s)},t.JCSaleGiftProduct.prototype.setLikeBlock=function(t,s,e,i){var o=t;"DELAY"==i&&(e.CAN_BUY?o.find(s).css("display","block"):o.find(s).hide()),o.find(s).attr("data-item",e.ID),o.find(s).find("span").attr("data-item",e.ID),arBasketAspro[i]&&(o.find(s).find(".to").removeClass("added").css("display","block"),o.find(s).find(".in").hide(),void 0!==arBasketAspro[i][e.ID]&&(o.find(s).find(".to").hide(),o.find(s).find(".in").css("display","block")))},t.JCSaleGiftProduct.prototype.setBuyBlock=function(t,s){var e=t.find(".offer_buy_block");if(e.find(".counter_wrapp .counter_block").length&&e.find(".counter_wrapp .counter_block").attr("data-item",s.ID),s.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL&&"ADD"==s.CONFIG.ACTION&&s.CAN_BUY){var i=s.CONFIG.MAX_QUANTITY_BUY>0?"data-max='"+s.CONFIG.MAX_QUANTITY_BUY+"'":"",o='<span class="minus">-</span><input type="text" class="text" name="'+s.PRODUCT_QUANTITY_VARIABLE+'" value="'+s.CONFIG.MIN_QUANTITY_BUY+'" /><span class="plus" '+i+">+</span>";arBasketAspro.BASKET&&void 0!==arBasketAspro.BASKET[s.ID]?e.find(".counter_wrapp .counter_block").length?e.find(".counter_wrapp .counter_block").hide():(e.find(".counter_wrapp").prepend('<div class="counter_block" data-item="'+s.ID+'"></div>'),e.find(".counter_wrapp .counter_block").html(o).hide()):e.find(".counter_wrapp .counter_block").length?e.find(".counter_wrapp .counter_block").html(o).show():(e.find(".counter_wrapp").prepend('<div class="counter_block" data-item="'+s.ID+'"></div>'),e.find(".counter_wrapp .counter_block").html(o))}else e.find(".counter_wrapp .counter_block").length&&e.find(".counter_wrapp .counter_block").hide();var a="ORDER"==s.CONFIG.ACTION||!s.CAN_BUY||!s.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL||"SUBSCRIBE"==s.CONFIG.ACTION&&"Y"==s.CATALOG_SUBSCRIBE?"wide":"";$('<div class="button_block"></div>');if(e.find(".counter_wrapp").find(".button_block").length?arBasketAspro.BASKET&&void 0!==arBasketAspro.BASKET[s.ID]?(e.find(".counter_wrapp").find(".button_block").addClass("wide").html(s.HTML),markProductAddBasket(s.ID)):a?(e.find(".counter_wrapp").find(".button_block").addClass("wide").html(s.HTML),arBasketAspro.SUBSCRIBE&&void 0!==arBasketAspro.SUBSCRIBE[s.ID]&&markProductSubscribe(s.ID)):e.find(".counter_wrapp").find(".button_block").removeClass("wide").html(s.HTML):(e.find(".counter_wrapp").append('<div class="button_block '+a+'">'+s.HTML+"</div>"),arBasketAspro.BASKET&&void 0!==arBasketAspro.BASKET[s.ID]&&markProductAddBasket(s.ID),arBasketAspro.SUBSCRIBE&&void 0!==arBasketAspro.SUBSCRIBE[s.ID]&&markProductSubscribe(s.ID)),"NOTHING"!==s.CONFIG.ACTION)if("ADD"==s.CONFIG.ACTION&&s.CAN_BUY&&"N"!=s.SHOW_ONE_CLICK_BUY){var r='<span class="transparent big_btn type_block button one_click" data-offers="Y" data-item="'+s.ID+'" data-iblockID="'+s.IBLOCK_ID+'" data-quantity="'+s.CONFIG.MIN_QUANTITY_BUY+'" data-props="'+s.OFFER_PROPS+'" onclick="oneClickBuy('+s.ID+", "+s.IBLOCK_ID+', this)"><span>'+s.ONE_CLICK_BUY+"</span></span>";e.find(".wrapp_one_click").length?e.find(".wrapp_one_click").html(r):e.append('<div class="wrapp_one_click">'+r+"</div>")}else e.find(".wrapp_one_click").length&&e.find(".wrapp_one_click").remove();else e.find(".wrapp_one_click").length&&e.find(".wrapp_one_click").remove();e.fadeIn()},t.JCSaleGiftProduct.prototype.setPrice=function(t,s){var e;this.obPrice&&(e=BX.Currency.currencyFormat(t.DISCOUNT_VALUE,t.CURRENCY,!0),s&&(e=e+"/"+s),BX.adjust(this.obPrice,{html:e}),t.DISCOUNT_VALUE!==t.VALUE&&this.showOldPrice?($(this.obPriceOld).find("strike").show().html(BX.Currency.currencyFormat(t.VALUE,t.CURRENCY,!0)),this.showPercent&&($(this.obPriceOld).closest(".cost").find(".sale_block").show(),$(this.obPriceOld).closest(".cost").find(".value").html(t.DISCOUNT_DIFF_PERCENT_RAW),$(this.obPriceOld).closest(".cost").find(".text span").html(BX.Currency.currencyFormat(t.DISCOUNT_DIFF,t.CURRENCY,!0)))):($(this.obPriceOld).find("strike").hide().html(""),this.showPercent&&$(this.obPriceOld).closest(".cost").find(".sale_block").hide()))},t.JCSaleGiftProduct.prototype.setQuantityStore=function(t,s){parseFloat(t)>0?$(this.storeQuanity).find(".icon").removeClass("order").addClass("stock"):$(this.storeQuanity).find(".icon").removeClass("stock").addClass("order"),$(this.storeQuanity).find(".icon + span").html(s)},t.JCSaleGiftProduct.prototype.InitBasketUrl=function(){switch(this.productType){case 1:case 2:this.basketUrl=this.product.addUrl;break;case 3:this.basketUrl=this.offers[this.offerNum].ADD_URL}this.basketParams={ajax_basket:"Y"},this.showQuantity&&(this.basketParams[this.basketData.quantity]=this.obQuantity.value)},t.JCSaleGiftProduct.prototype.FillBasketProps=function(){if(this.visual.BASKET_PROP_DIV){var t=0,s=null,e=!1,i=null;if(this.basketData.useProps&&!this.basketData.emptyProps?this.obPopupWin&&this.obPopupWin.contentContainer&&(i=this.obPopupWin.contentContainer):i=BX(this.visual.BASKET_PROP_DIV),i){if(s=i.getElementsByTagName("select"),s&&s.length)for(t=0;t<s.length;t++)if(!s[t].disabled)switch(s[t].type.toLowerCase()){case"select-one":this.basketParams[s[t].name]=s[t].value,e=!0}if(s=i.getElementsByTagName("input"),s&&s.length)for(t=0;t<s.length;t++)if(!s[t].disabled)switch(s[t].type.toLowerCase()){case"hidden":this.basketParams[s[t].name]=s[t].value,e=!0;break;case"radio":s[t].checked&&(this.basketParams[s[t].name]=s[t].value,e=!0)}e||(this.basketParams[this.basketData.props]=[],this.basketParams[this.basketData.props][0]=0)}}},t.JCSaleGiftProduct.prototype.SendToBasket=function(){this.canBuy&&(this.InitBasketUrl(),this.FillBasketProps(),BX.ajax.loadJSON(this.basketUrl,this.basketParams,BX.delegate(this.BasketResult,this)))},t.JCSaleGiftProduct.prototype.Basket=function(){var t="";if(this.canBuy)switch(this.productType){case 1:case 2:this.basketData.useProps&&!this.basketData.emptyProps?(this.InitPopupWindow(),this.obPopupWin.setTitleBar({content:BX.create("div",{style:{marginRight:"30px",whiteSpace:"nowrap"},text:BX.message("CVP_TITLE_BASKET_PROPS")})}),BX(this.visual.BASKET_PROP_DIV)&&(t=BX(this.visual.BASKET_PROP_DIV).innerHTML),this.obPopupWin.setContent(t),this.obPopupWin.setButtons([new s({ownerClass:this.obProduct.parentNode.parentNode.parentNode.className,text:BX.message("CVP_BTN_MESSAGE_SEND_PROPS"),events:{click:BX.delegate(this.SendToBasket,this)}})]),this.obPopupWin.show()):this.SendToBasket();break;case 3:this.SendToBasket()}},t.JCSaleGiftProduct.prototype.BasketResult=function(t){var e="",i="",o="",a=!0,r=[];if(this.obPopupWin&&this.obPopupWin.close(),"object"!=typeof t)return!1;if(a="OK"===t.STATUS){switch(BX.onCustomEvent("OnBasketChange"),i=this.product.name,this.productType){case 1:case 2:o=this.product.pict.SRC;break;case 3:o=this.offers[this.offerNum].PREVIEW_PICTURE?this.offers[this.offerNum].PREVIEW_PICTURE.SRC:this.defaultPict.pict.SRC}e='<div style="width: 96%; margin: 10px 2%; text-align: center;"><img src="'+o+'" height="130" style="max-height:130px"><p>'+i+"</p></div>",r=[new s({ownerClass:this.obProduct.parentNode.parentNode.parentNode.className,text:BX.message("CVP_BTN_MESSAGE_BASKET_REDIRECT"),events:{click:BX.delegate(function(){location.href=this.basketData.basketUrl?this.basketData.basketUrl:BX.message("CVP_BASKET_URL")},this)}})]}else e=t.MESSAGE?t.MESSAGE:BX.message("CVP_BASKET_UNKNOWN_ERROR"),r=[new s({ownerClass:this.obProduct.parentNode.parentNode.parentNode.className,text:BX.message("CVP_BTN_MESSAGE_CLOSE"),events:{click:BX.delegate(this.obPopupWin.close,this.obPopupWin)}})];this.InitPopupWindow(),this.obPopupWin.setTitleBar({content:BX.create("div",{style:{marginRight:"30px",whiteSpace:"nowrap"},text:a?BX.message("CVP_TITLE_SUCCESSFUL"):BX.message("CVP_TITLE_ERROR")})}),this.obPopupWin.setContent(e),this.obPopupWin.setButtons(r),this.obPopupWin.show()},t.JCSaleGiftProduct.prototype.InitPopupWindow=function(){this.obPopupWin||(this.obPopupWin=BX.PopupWindowManager.create("CatalogSectionBasket_"+this.visual.ID,null,{autoHide:!1,offsetLeft:0,offsetTop:0,overlay:!0,closeByEsc:!0,titleBar:!0,closeIcon:{top:"10px",right:"10px"}}))}}}(window);139  39406|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/sale.gift.product/main/script.js|2474c1f4(function (window) {

if (!!window.JCSaleGiftProduct)
{
	return;
}

var BasketButton = function(params)
{
	BasketButton.superclass.constructor.apply(this, arguments);
	this.nameNode = BX.create('span', {
		props : { className : 'bx_medium bx_bt_button', id : this.id },
		text: params.text
	});
	this.buttonNode = BX.create('span', {
		attrs: { className: params.ownerClass },
		style: { marginBottom: '0', borderBottom: '0 none transparent' },
		children: [this.nameNode],
		events : this.contextEvents
	});
	if (BX.browser.IsIE())
	{
		this.buttonNode.setAttribute("hideFocus", "hidefocus");
	}
};
BX.extend(BasketButton, BX.PopupWindowButton);

window.JCSaleGiftProduct = function (arParams)
{
	this.skuVisualParams = {
		SELECT:
		{
			TAG_BIND: 'select',
			TAG: 'option',
			ACTIVE_CLASS: 'active',
			HIDE_CLASS: 'hidden',
			EVENT: 'change',
		},
		LI:
		{
			TAG_BIND: 'li',
			TAG: 'li',
			ACTIVE_CLASS: 'active',
			HIDE_CLASS: 'missing',
			EVENT: 'click',
		}
	};
	this.productType = 0;
	this.showQuantity = true;
	this.showAbsent = true;
	this.secondPict = false;
	this.showOldPrice = false;
	this.showPercent = false;
	this.showSkuProps = false;
	this.visual = {
		ID: '',
		PICT_ID: '',
		SECOND_PICT_ID: '',
		QUANTITY_ID: '',
		QUANTITY_UP_ID: '',
		QUANTITY_DOWN_ID: '',
		PRICE_ID: '',
		DSC_PERC: '',
		SECOND_DSC_PERC: '',
		DISPLAY_PROP_DIV: '',
		BASKET_PROP_DIV: ''
	};
	this.product = {
		checkQuantity: false,
		maxQuantity: 0,
		stepQuantity: 1,
		isDblQuantity: false,
		canBuy: true,
		canSubscription: true,
		name: '',
		pict: {},
		id: 0,
		addUrl: '',
		buyUrl: ''
	};
	this.basketData = {
		useProps: false,
		emptyProps: false,
		quantity: 'quantity',
		props: 'prop',
		basketUrl: ''
	};

	this.defaultPict = {
		pict: null,
		secondPict: null
	};

	this.checkQuantity = false;
	this.maxQuantity = 0;
	this.stepQuantity = 1;
	this.isDblQuantity = false;
	this.canBuy = true;
	this.canSubscription = true;
	this.precision = 6;
	this.precisionFactor = Math.pow(10,this.precision);

	this.offers = [];
	this.offerNum = 0;
	this.treeProps = [];
	this.obTreeRows = [];
	this.showCount = [];
	this.showStart = [];
	this.selectedValues = {};

	this.obProduct = null;
	this.obQuantity = null;
	this.obQuantityUp = null;
	this.obQuantityDown = null;
	this.obPict = null;
	this.obSecondPict = null;
	this.obPrice = null;
	this.obTree = null;
	this.obBuyBtn = null;
	this.obDscPerc = null;
	this.obSecondDscPerc = null;
	this.obSkuProps = null;
	this.obMeasure = null;

	this.obPopupWin = null;
	this.basketUrl = '';
	this.basketParams = {};

	this.treeRowShowSize = 5;
	this.treeEnableArrow = { display: '', cursor: 'pointer', opacity: 1 };
	this.treeDisableArrow = { display: '', cursor: 'default', opacity:0.2 };

	this.lastElement = false;
	this.containerHeight = 0;

	this.errorCode = 0;

	if ('object' === typeof arParams)
	{
		this.productType = parseInt(arParams.PRODUCT_TYPE, 10);
		this.showQuantity = arParams.SHOW_QUANTITY;
		this.showAbsent = arParams.SHOW_ABSENT;
		this.secondPict = !!arParams.SECOND_PICT;
		this.showOldPrice = !!arParams.SHOW_OLD_PRICE;
		this.showPercent = !!arParams.SHOW_DISCOUNT_PERCENT;
		this.showSkuProps = !!arParams.SHOW_SKU_PROPS;

		this.visual = arParams.VISUAL;
		switch (this.productType)
		{
			case 1://product
			case 2://set
				if (!!arParams.PRODUCT && 'object' === typeof(arParams.PRODUCT))
				{
					if (this.showQuantity)
					{
						this.product.checkQuantity = arParams.PRODUCT.CHECK_QUANTITY;
						this.product.isDblQuantity = arParams.PRODUCT.QUANTITY_FLOAT;
						if (this.product.checkQuantity)
						{
							this.product.maxQuantity = (this.product.isDblQuantity ? parseFloat(arParams.PRODUCT.MAX_QUANTITY) : parseInt(arParams.PRODUCT.MAX_QUANTITY, 10));
						}
						this.product.stepQuantity = (this.product.isDblQuantity ? parseFloat(arParams.PRODUCT.STEP_QUANTITY) : parseInt(arParams.PRODUCT.STEP_QUANTITY, 10));

						this.checkQuantity = this.product.checkQuantity;
						this.isDblQuantity = this.product.isDblQuantity;
						this.maxQuantity = this.product.maxQuantity;
						this.stepQuantity = this.product.stepQuantity;
						if (this.isDblQuantity)
						{
							this.stepQuantity = Math.round(this.stepQuantity*this.precisionFactor)/this.precisionFactor;
						}
					}
					this.product.canBuy = arParams.PRODUCT.CAN_BUY;
					this.product.canSubscription = arParams.PRODUCT.SUBSCRIPTION;

					this.canBuy = this.product.canBuy;
					this.canSubscription = this.product.canSubscription;

					this.product.name = arParams.PRODUCT.NAME;
					this.product.pict = arParams.PRODUCT.PICT;
					this.product.id = arParams.PRODUCT.ID;
					if (!!arParams.PRODUCT.ADD_URL)
					{
						this.product.addUrl = arParams.PRODUCT.ADD_URL;
					}
					if (!!arParams.PRODUCT.BUY_URL)
					{
						this.product.buyUrl = arParams.PRODUCT.BUY_URL;
					}
					if (!!arParams.BASKET && 'object' === typeof(arParams.BASKET))
					{
						this.basketData.useProps = !!arParams.BASKET.ADD_PROPS;
						this.basketData.emptyProps = !!arParams.BASKET.EMPTY_PROPS;
					}
				}
				else
				{
					this.errorCode = -1;
				}
				break;
			case 3://sku
				if (!!arParams.OFFERS && BX.type.isArray(arParams.OFFERS))
				{
					if (!!arParams.PRODUCT && 'object' === typeof(arParams.PRODUCT))
					{
						this.product.name = arParams.PRODUCT.NAME;
						this.product.id = arParams.PRODUCT.ID;
					}
					this.offers = arParams.OFFERS;
					this.offerNum = 0;
					if (!!arParams.OFFER_SELECTED)
					{
						this.offerNum = parseInt(arParams.OFFER_SELECTED, 10);
					}
					if (isNaN(this.offerNum))
					{
						this.offerNum = 0;
					}
					if (!!arParams.TREE_PROPS)
					{
						this.treeProps = arParams.TREE_PROPS;
					}
					if (!!arParams.DEFAULT_PICTURE)
					{
						this.defaultPict.pict = arParams.DEFAULT_PICTURE.PICTURE;
						this.defaultPict.secondPict = arParams.DEFAULT_PICTURE.PICTURE_SECOND;
					}
				}
				else
				{
					this.errorCode = -1;
				}
				break;
			default:
				this.errorCode = -1;
		}
		if (!!arParams.BASKET && 'object' === typeof(arParams.BASKET))
		{
			if (!!arParams.BASKET.QUANTITY)
			{
				this.basketData.quantity = arParams.BASKET.QUANTITY;
			}
			if (!!arParams.BASKET.PROPS)
			{
				this.basketData.props = arParams.BASKET.PROPS;
			}
			if (!!arParams.BASKET.BASKET_URL)
			{
				this.basketData.basketUrl = arParams.BASKET.BASKET_URL;
			}
		}
		this.lastElement = (!!arParams.LAST_ELEMENT && 'Y' === arParams.LAST_ELEMENT);
	}
	if (0 === this.errorCode)
	{
		BX.ready(BX.delegate(this.Init,this));
	}
};

window.JCSaleGiftProduct.prototype.Init = function()
{
	var i = 0,
		strPrefix = '',
		TreeItems = null;

	this.obProduct = BX(this.visual.ID);

	if (!this.obProduct)
	{
		this.errorCode = -1;
	}
	this.obPict = BX(this.visual.PICT_ID);
	if (!this.obPict)
	{
		this.errorCode = -2;
	}
	if (this.secondPict && !!this.visual.SECOND_PICT_ID)
	{
		this.obSecondPict = BX(this.visual.SECOND_PICT_ID);
	}
	this.storeQuanity = BX(this.visual.STORE_QUANTITY);
	this.obPrice = BX(this.visual.PRICE_ID);
	this.obPriceOld = BX(this.visual.PRICE_OLD_ID);
	if (!this.obPrice)
	{
		this.errorCode = -16;
	}
	if (this.showQuantity && !!this.visual.QUANTITY_ID)
	{
		this.obQuantity = BX(this.visual.QUANTITY_ID);
		if (!!this.visual.QUANTITY_UP_ID)
		{
			this.obQuantityUp = BX(this.visual.QUANTITY_UP_ID);
		}
		if (!!this.visual.QUANTITY_DOWN_ID)
		{
			this.obQuantityDown = BX(this.visual.QUANTITY_DOWN_ID);
		}
	}
	if (3 === this.productType)
	{
		if (!!this.visual.TREE_ID)
		{
			this.obTree = BX(this.visual.TREE_ID);
			if (!this.obTree)
			{
				this.errorCode = -256;
			}
			strPrefix = this.visual.TREE_ITEM_ID;

			for (i = 0; i < this.treeProps.length; i++)
			{
				this.obTreeRows[i] = {
					LIST: BX(strPrefix+this.treeProps[i].ID+'_list'),
					CONT: BX(strPrefix+this.treeProps[i].ID+'_cont')
				};
				
				if (!this.obTreeRows[i].LIST || !this.obTreeRows[i].CONT)
				{
					this.errorCode = -512;
					break;
				}
			}
		}
		if (!!this.visual.QUANTITY_MEASURE)
		{
			this.obMeasure = BX(this.visual.QUANTITY_MEASURE);
		}
	}
	if (!!this.visual.BUY_ID)
	{
		this.obBuyBtn = BX(this.visual.BUY_ID);
	}

	if (this.showPercent)
	{
		if (!!this.visual.DSC_PERC)
		{
			this.obDscPerc = BX(this.visual.DSC_PERC);
		}
		if (this.secondPict && !!this.visual.SECOND_DSC_PERC)
		{
			this.obSecondDscPerc = BX(this.visual.SECOND_DSC_PERC);
		}
	}

	if (this.showSkuProps)
	{
		if (!!this.visual.DISPLAY_PROP_DIV)
		{
			this.obSkuProps = BX(this.visual.DISPLAY_PROP_DIV);
		}
	}
	
	if (0 === this.errorCode)
	{
		if (this.showQuantity)
		{
			if (!!this.obQuantityUp)
			{
				BX.bind(this.obQuantityUp, 'click', BX.delegate(this.QuantityUp, this));
			}
			if (!!this.obQuantityDown)
			{
				BX.bind(this.obQuantityDown, 'click', BX.delegate(this.QuantityDown, this));
			}
			if (!!this.obQuantity)
			{
				BX.bind(this.obQuantity, 'change', BX.delegate(this.QuantityChange, this));
			}
		}

		switch (this.productType)
		{
			case 1://product
				break;
			case 3://sku
				for(var key in this.skuVisualParams){
					var TreeItems = BX.findChildren(this.obTree, {tagName: this.skuVisualParams[key].TAG_BIND}, true);
					if (!!TreeItems && 0 < TreeItems.length){
						for (i = 0; i < TreeItems.length; i++){
							$(TreeItems[i]).on(this.skuVisualParams[key].EVENT, BX.delegate(this.SelectOfferProp, this));
							//BX.bind(TreeItems[i], this.skuVisualParams[key].EVENT, BX.delegate(this.SelectOfferProp, this));
						}
					}
				}

				this.SetCurrent();
				break;
		}
		if (!!this.obBuyBtn)
		{
			BX.bind(this.obBuyBtn, 'click', BX.delegate(this.Basket, this));
		}
	}

};

window.JCSaleGiftProduct.prototype.checkHeight = function()
{
	this.containerHeight = parseInt(this.obProduct.parentNode.offsetHeight, 10);
	if (isNaN(this.containerHeight))
	{
		this.containerHeight = 0;
	}
};

window.JCSaleGiftProduct.prototype.setHeight = function()
{
	if (0 < this.containerHeight)
	{
		BX.adjust(this.obProduct.parentNode, {style: { height: this.containerHeight+'px'}});
	}
};

window.JCSaleGiftProduct.prototype.clearHeight = function()
{
	BX.adjust(this.obProduct.parentNode, {style: { height: 'auto'}});
};

window.JCSaleGiftProduct.prototype.QuantityUp = function()
{
	var curValue = 0,
		boolSet = true;

	if (0 === this.errorCode && this.showQuantity && this.canBuy)
	{
		curValue = (this.isDblQuantity ? parseFloat(this.obQuantity.value) : parseInt(this.obQuantity.value, 10));
		if (!isNaN(curValue))
		{
			curValue += this.stepQuantity;
			if (this.checkQuantity)
			{
				if (curValue > this.maxQuantity)
				{
					boolSet = false;
				}
			}
			if (boolSet)
			{
				if (this.isDblQuantity)
				{
					curValue = Math.round(curValue*this.precisionFactor)/this.precisionFactor;
				}
				this.obQuantity.value = curValue;
			}
		}
	}
};

window.JCSaleGiftProduct.prototype.QuantityDown = function()
{
	var curValue = 0,
		boolSet = true;

	if (0 === this.errorCode && this.showQuantity && this.canBuy)
	{
		curValue = (this.isDblQuantity ? parseFloat(this.obQuantity.value): parseInt(this.obQuantity.value, 10));
		if (!isNaN(curValue))
		{
			curValue -= this.stepQuantity;
			if (curValue < this.stepQuantity)
			{
				boolSet = false;
			}
			if (boolSet)
			{
				if (this.isDblQuantity)
				{
					curValue = Math.round(curValue*this.precisionFactor)/this.precisionFactor;
				}
				this.obQuantity.value = curValue;
			}
		}
	}
};

window.JCSaleGiftProduct.prototype.QuantityChange = function()
{
	var curValue = 0,
		boolSet = true;

	if (0 === this.errorCode && this.showQuantity)
	{
		if (this.canBuy)
		{
			curValue = (this.isDblQuantity ? parseFloat(this.obQuantity.value) : parseInt(this.obQuantity.value, 10));
			if (!isNaN(curValue))
			{
				if (this.checkQuantity)
				{
					if (curValue > this.maxQuantity)
					{
						boolSet = false;
						curValue = this.maxQuantity;
					}
					else if (curValue < this.stepQuantity)
					{
						boolSet = false;
						curValue = this.stepQuantity;
					}
				}
				if (!boolSet)
				{
					this.obQuantity.value = curValue;
				}
			}
			else
			{
				this.obQuantity.value = this.stepQuantity;
			}
		}
		else
		{
			this.obQuantity.value = this.stepQuantity;
		}
	}
};

window.JCSaleGiftProduct.prototype.QuantitySet = function(index)
{
	if (0 === this.errorCode)
	{
		this.canBuy = this.offers[index].CAN_BUY;
		if (this.canBuy)
		{
			if (!!this.obBasketActions)
			{
				BX.style(this.obBasketActions, 'display', '');
			}
			if (!!this.obNotAvail)
			{
				BX.style(this.obNotAvail, 'display', 'none');
			}
		}
		else
		{
			if (!!this.obBasketActions)
			{
				//BX.style(this.obBasketActions, 'display', 'none');
				BX.style(this.obBasketActions, 'opacity', '0');
				BX.style(BX.findParent(BX(this.obQuantity), { 'class':'counter_block' }), 'display', 'none');
			}
			if (!!this.obNotAvail)
			{
				BX.style(this.obNotAvail, 'display', '');
			}
		}
		if (this.showQuantity)
		{
			this.isDblQuantity = this.offers[index].QUANTITY_FLOAT;
			this.checkQuantity = this.offers[index].CHECK_QUANTITY;
			if (this.isDblQuantity)
			{
				this.maxQuantity = parseFloat(this.offers[index].MAX_QUANTITY);
				this.stepQuantity = Math.round(parseFloat(this.offers[index].STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor;
			}
			else
			{
				this.maxQuantity = parseInt(this.offers[index].MAX_QUANTITY, 10);
				this.stepQuantity = parseInt(this.offers[index].STEP_QUANTITY, 10);
			}
			if(!!this.obQuantity){
				this.obQuantity.value = this.defaultCount;
				this.obQuantity.disabled = !this.canBuy;
			}
			if (!!this.obMeasure)
			{
				if (!!this.offers[index].MEASURE)
				{
					BX.adjust(this.obMeasure, { html : this.offers[index].MEASURE});
				}
				else
				{
					BX.adjust(this.obMeasure, { html : ''});
				}
			}
		}
		this.currentBasisPrice = this.offers[index].BASIS_PRICE;
	}
};

/*window.JCSaleGiftProduct.prototype.QuantitySet = function(index)
{
	if (0 === this.errorCode)
	{
		this.canBuy = this.offers[index].CAN_BUY;
		if (this.canBuy)
		{
			BX.addClass(this.obBuyBtn, 'bx_bt_button');
			BX.removeClass(this.obBuyBtn, 'bx_bt_button_type_2');
			this.obBuyBtn.innerHTML = BX.message('CVP_MESS_BTN_BUY');
		}
		else
		{
			BX.addClass(this.obBuyBtn, 'bx_bt_button_type_2');
			BX.removeClass(this.obBuyBtn, 'bx_bt_button');
			this.obBuyBtn.innerHTML = BX.message('CVP_MESS_NOT_AVAILABLE');
		}
		if (this.showQuantity)
		{
			this.isDblQuantity = this.offers[index].QUANTITY_FLOAT;
			this.checkQuantity = this.offers[index].CHECK_QUANTITY;
			if (this.isDblQuantity)
			{
				this.maxQuantity = parseFloat(this.offers[index].MAX_QUANTITY);
				this.stepQuantity = Math.round(parseFloat(this.offers[index].STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor;
			}
			else
			{
				this.maxQuantity = parseInt(this.offers[index].MAX_QUANTITY, 10);
				this.stepQuantity = parseInt(this.offers[index].STEP_QUANTITY, 10);
			}

			this.obQuantity.value = this.stepQuantity;
			this.obQuantity.disabled = !this.canBuy;
			if (!!this.obMeasure)
			{
				if (!!this.offers[index].MEASURE)
				{
					BX.adjust(this.obMeasure, { html : this.offers[index].MEASURE});
				}
				else
				{
					BX.adjust(this.obMeasure, { html : ''});
				}
			}
		}
	}
};*/

window.JCSaleGiftProduct.prototype.SelectOfferProp = function()
{
	var i = 0,
		value = '',
		strTreeValue = '',
		arTreeItem = [],
		RowItems = null,
		target = BX.proxy_context;

	if (!!target && target.hasAttribute('data-treevalue'))
	{
		strTreeValue = target.getAttribute('data-treevalue');
		propModes = target.getAttribute('data-showtype');
		arTreeItem = strTreeValue.split('_');
		if (this.SearchOfferPropIndex(arTreeItem[0], arTreeItem[1]))
		{
			/*RowItems = BX.findChildren(target.parentNode, {tagName: 'li'}, false);
			if (!!RowItems && 0 < RowItems.length)
			{
				for (i = 0; i < RowItems.length; i++)
				{
					value = RowItems[i].getAttribute('data-onevalue');
					if (value === arTreeItem[1])
					{
						BX.addClass(RowItems[i], 'bx_active');
					}
					else
					{
						BX.removeClass(RowItems[i], 'bx_active');
					}
				}
			}*/

			RowItems = BX.findChildren(target.parentNode, {tagName: this.skuVisualParams[propModes.toUpperCase()].TAG}, false);

			if (!!RowItems && 0 < RowItems.length)
			{
				for (i = 0; i < RowItems.length; i++)
				{
					value = RowItems[i].getAttribute('data-onevalue');

					// for SELECTBOXES
					if(propModes == 'TEXT'){
						if (value === arTreeItem[1]){
							RowItems[i].setAttribute('selected', 'selected');
						}else{
							RowItems[i].removeAttribute('selected');
						}
					}else{
						if (value === arTreeItem[1]){
							$(RowItems[i]).addClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS);
						}else{
							$(RowItems[i]).removeClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS);
						}
					}
				}
			}
		}
	}
};

window.JCSaleGiftProduct.prototype.SearchOfferPropIndex = function(strPropID, strPropValue)
{
	var strName = '',
		arShowValues = false,
		i, j,
		arCanBuyValues = [],
		index = -1,
		arFilter = {},
		tmpFilter = [];

	for (i = 0; i < this.treeProps.length; i++)
	{
		if (this.treeProps[i].ID === strPropID)
		{
			index = i;
			break;
		}
	}

	if (-1 < index)
	{
		for (i = 0; i < index; i++)
		{
			strName = 'PROP_'+this.treeProps[i].ID;
			arFilter[strName] = this.selectedValues[strName];
		}
		strName = 'PROP_'+this.treeProps[index].ID;
		arShowValues = this.GetRowValues(arFilter, strName);
		if (!arShowValues)
		{
			return false;
		}
		if (!BX.util.in_array(strPropValue, arShowValues))
		{
			return false;
		}
		arFilter[strName] = strPropValue;
		for (i = index+1; i < this.treeProps.length; i++)
		{
			strName = 'PROP_'+this.treeProps[i].ID;
			arShowValues = this.GetRowValues(arFilter, strName);
			if (!arShowValues)
			{
				return false;
			}
			if (this.showAbsent)
			{
				arCanBuyValues = [];
				tmpFilter = [];
				tmpFilter = BX.clone(arFilter, true);
				for (j = 0; j < arShowValues.length; j++)
				{
					tmpFilter[strName] = arShowValues[j];
					if (this.GetCanBuy(tmpFilter))
					{
						arCanBuyValues[arCanBuyValues.length] = arShowValues[j];
					}
				}
			}
			else
			{
				arCanBuyValues = arShowValues;
			}
			if (!!this.selectedValues[strName] && BX.util.in_array(this.selectedValues[strName], arCanBuyValues))
			{
				arFilter[strName] = this.selectedValues[strName];
			}
			else
			{
				arFilter[strName] = arCanBuyValues[0];
			}
			this.UpdateRow(i, arFilter[strName], arShowValues, arCanBuyValues);
		}
		this.selectedValues = arFilter;
		this.ChangeInfo();
	}
	return true;
};

window.JCSaleGiftProduct.prototype.RowLeft = function()
{
	var i = 0,
		strTreeValue = '',
		index = -1,
		target = BX.proxy_context;

	if (!!target && target.hasAttribute('data-treevalue'))
	{
		strTreeValue = target.getAttribute('data-treevalue');
		for (i = 0; i < this.treeProps.length; i++)
		{
			if (this.treeProps[i].ID === strTreeValue)
			{
				index = i;
				break;
			}
		}
		if (-1 < index && this.treeRowShowSize < this.showCount[index])
		{
			if (0 > this.showStart[index])
			{
				this.showStart[index]++;
				BX.adjust(this.obTreeRows[index].LIST, { style: { marginLeft: this.showStart[index]*20+'%' }});
				BX.adjust(this.obTreeRows[index].RIGHT, { style: this.treeEnableArrow });
			}

			if (0 <= this.showStart[index])
			{
				BX.adjust(this.obTreeRows[index].LEFT, { style: this.treeDisableArrow });
			}
		}
	}
};

window.JCSaleGiftProduct.prototype.RowRight = function()
{
	var i = 0,
		strTreeValue = '',
		index = -1,
		target = BX.proxy_context;

	if (!!target && target.hasAttribute('data-treevalue'))
	{
		strTreeValue = target.getAttribute('data-treevalue');
		for (i = 0; i < this.treeProps.length; i++)
		{
			if (this.treeProps[i].ID === strTreeValue)
			{
				index = i;
				break;
			}
		}
		if (-1 < index && this.treeRowShowSize < this.showCount[index])
		{
			if ((this.treeRowShowSize - this.showStart[index]) < this.showCount[index])
			{
				this.showStart[index]--;
				BX.adjust(this.obTreeRows[index].LIST, { style: { marginLeft: this.showStart[index]*20+'%' }});
				BX.adjust(this.obTreeRows[index].LEFT, { style: this.treeEnableArrow });
			}

			if ((this.treeRowShowSize - this.showStart[index]) >= this.showCount[index])
			{
				BX.adjust(this.obTreeRows[index].RIGHT, { style: this.treeDisableArrow });
			}
		}
	}
};

window.JCSaleGiftProduct.prototype.UpdateRow = function(intNumber, activeID, showID, canBuyID)
{
	var i = 0,
		showI = 0,
		value = '',
		countShow = 0,
		strNewLen = '',
		obData = {},
		pictMode = false,
		extShowMode = false,
		isCurrent = false,
		selectIndex = 0,
		obLeft = this.treeEnableArrow,
		obRight = this.treeEnableArrow,
		currentShowStart = 0,
		RowItems = null;


	if (-1 < intNumber && intNumber < this.obTreeRows.length){

		propMode = this.treeProps[intNumber].DISPLAY_TYPE;
		RowItems = BX.findChildren(this.obTreeRows[intNumber].LIST, {tagName: this.skuVisualParams[propMode].TAG}, false);
		if (!!RowItems && 0 < RowItems.length){
			selectMode = ('SELECT' === this.treeProps[intNumber].DISPLAY_TYPE);
			countShow = showID.length;
			obData = {
				style: {},
				props: {
					disabled: '',
					selected: '',
				},
			};

			for (i = 0; i < RowItems.length; i++){
				value = RowItems[i].getAttribute('data-onevalue');
				isCurrent = (value === activeID && value !=0);
				if (BX.util.in_array(value, canBuyID)){
					obData.props.className = (isCurrent ? this.skuVisualParams[propMode].ACTIVE_CLASS : '');
				}else{
					obData.props.className = (isCurrent ? this.skuVisualParams[propMode].ACTIVE_CLASS+' '+this.skuVisualParams[propMode].HIDE_CLASS : this.skuVisualParams[propMode].HIDE_CLASS);
				}
				// obData.props.className = (isCurrent ? this.skuVisualParams[propMode].ACTIVE_CLASS : '');

				if(selectMode){
					obData.props.disabled = 'disabled';
					obData.props.selected = (isCurrent ? 'selected' : '');
				}else{
					obData.style.display = 'none';
				}

				if (BX.util.in_array(value, showID)){
					if(selectMode){
						obData.props.disabled = '';
					}else{
						obData.style.display = '';
					}
					if (isCurrent){
						selectIndex = showI;
					}
					showI++;
				}
				BX.adjust(RowItems[i], obData);
			}

			if(selectMode){
				if($(this.obTreeRows[intNumber].LIST).parent().hasClass('ik_select'))
					$(this.obTreeRows[intNumber].LIST).ikSelect('reset');
			}

			this.showCount[intNumber] = countShow;
			this.showStart[intNumber] = currentShowStart;
		}
	}
};

window.JCSaleGiftProduct.prototype.GetRowValues = function(arFilter, index)
{
	var i = 0,
		j,
		arValues = [],
		boolSearch = false,
		boolOneSearch = true;

	if (0 === arFilter.length)
	{
		for (i = 0; i < this.offers.length; i++)
		{
			if (!BX.util.in_array(this.offers[i].TREE[index], arValues))
			{
				arValues[arValues.length] = this.offers[i].TREE[index];
			}
		}
		boolSearch = true;
	}
	else
	{
		for (i = 0; i < this.offers.length; i++)
		{
			boolOneSearch = true;
			for (j in arFilter)
			{
				if (arFilter[j] !== this.offers[i].TREE[j])
				{
					boolOneSearch = false;
					break;
				}
			}
			if (boolOneSearch)
			{
				if (!BX.util.in_array(this.offers[i].TREE[index], arValues))
				{
					arValues[arValues.length] = this.offers[i].TREE[index];
				}
				boolSearch = true;
			}
		}
	}
	return (boolSearch ? arValues : false);
};

window.JCSaleGiftProduct.prototype.GetCanBuy = function(arFilter)
{
	var i = 0,
		j,
		boolSearch = false,
		boolOneSearch = true;

	for (i = 0; i < this.offers.length; i++)
	{
		boolOneSearch = true;
		for (j in arFilter)
		{
			if (arFilter[j] !== this.offers[i].TREE[j])
			{
				boolOneSearch = false;
				break;
			}
		}
		if (boolOneSearch)
		{
			if (this.offers[i].CAN_BUY)
			{
				boolSearch = true;
				break;
			}
		}
	}
	return boolSearch;
};

window.JCSaleGiftProduct.prototype.SetCurrent = function()
{
	var i = 0,
		j = 0,
		arCanBuyValues = [],
		strName = '',
		arShowValues = false,
		arFilter = {},
		tmpFilter = [],
		current = this.offers[this.offerNum].TREE;

	for (i = 0; i < this.treeProps.length; i++)
	{
		strName = 'PROP_'+this.treeProps[i].ID;
		arShowValues = this.GetRowValues(arFilter, strName);
		if (!arShowValues)
		{
			break;
		}
		if (BX.util.in_array(current[strName], arShowValues))
		{
			arFilter[strName] = current[strName];
		}
		else
		{
			arFilter[strName] = arShowValues[0];
			this.offerNum = 0;
		}
		if (this.showAbsent)
		{
			arCanBuyValues = [];
			tmpFilter = [];
			tmpFilter = BX.clone(arFilter, true);
			for (j = 0; j < arShowValues.length; j++)
			{
				tmpFilter[strName] = arShowValues[j];
				if (this.GetCanBuy(tmpFilter))
				{
					arCanBuyValues[arCanBuyValues.length] = arShowValues[j];
				}
			}
		}
		else
		{
			arCanBuyValues = arShowValues;
		}
		this.UpdateRow(i, arFilter[strName], arShowValues, arCanBuyValues);
	}
	this.selectedValues = arFilter;
	this.ChangeInfo();
};

window.JCSaleGiftProduct.prototype.ChangeInfo = function()
{
	var i = 0,
		j,
		index = -1,
		obData = {},
		boolOneSearch = true,
		strPrice = '';

	for (i = 0; i < this.offers.length; i++)
	{
		boolOneSearch = true;
		for (j in this.selectedValues)
		{
			if (this.selectedValues[j] !== this.offers[i].TREE[j])
			{
				boolOneSearch = false;
				break;
			}
		}
		if (boolOneSearch)
		{
			index = i;
			break;
		}
	}
	if (-1 < index)
	{
		if (!!this.obPict)
		{
			var obData = {
				attrs: {}
			};

			if (!!this.offers[index].PREVIEW_PICTURE){
				obData.attrs.src = this.offers[index].PREVIEW_PICTURE.SRC;
			}else{
				obData.attrs.src = this.defaultPict.pict.SRC;
			}
			BX.adjust(BX.findChild(this.obPict, {"tag": "img"}), obData);
		}
		
		if (this.showSkuProps && !!this.obSkuProps)
		{
			if (0 === this.offers[index].DISPLAY_PROPERTIES.length)
			{
				BX.adjust(this.obSkuProps, {style: {display: 'none'}, html: ''});
			}
			else
			{
				BX.adjust(this.obSkuProps, {style: {display: ''}, html: this.offers[index].DISPLAY_PROPERTIES});
			}
		}

		var measure = this.offers[index].MEASURE && this.offers[index].SHOW_MEASURE=="Y" ? this.offers[index].MEASURE : '';
		this.setPrice(this.offers[index].PRICE, measure);
		this.setQuantityStore(this.offers[index].MAX_QUANTITY, this.offers[index].AVAILIABLE.TEXT);

		this.offerNum = index;
		this.QuantitySet(this.offerNum);

		/*$(this.obProduct).find('.item-title a').attr('href', this.offers[this.offerNum].URL);
		$(this.obProduct).find('.image_wrapper_block > a').attr('href', this.offers[this.offerNum].URL);*/

		/*quantity discount start*/
		if($(this.obProduct).find('.quantity_block .values').length){
			$(this.obProduct).find('.quantity_block .values .item span').text(this.offers[index].MAX_QUANTITY).css({'opacity':'1'});
		}
		/*quantity discount end*/

		var obj=this.offers[index],
			th=$(this.obProduct);

		if(typeof arBasketAspro !=="undefined"){
			this.setActualDataBlock(th, obj);
		}else{
			if(typeof window.frameCacheVars !== "undefined"){
				BX.addCustomEvent("onFrameDataReceived", function(){
					window.JCCatalogSection.prototype.setActualDataBlock(th, obj);
				});
			}
		}
	}
};

/*set blocks start*/
window.JCSaleGiftProduct.prototype.setActualDataBlock = function(th, obj)
{
	/*like block start*/
	this.setLikeBlock(th, '.like_icons .wish_item_button', obj, 'DELAY');
	this.setLikeBlock(th, '.like_icons .compare_item_button',obj, 'COMPARE');
	/*like block end*/

	/*buy block start*/
	this.setBuyBlock(th, obj);
	/*buy block end*/
}
/*set blocks end*/

/*set compare/wish*/
window.JCSaleGiftProduct.prototype.setLikeBlock = function(th, className, obj, type)
{
	var block=th;
	if(type=="DELAY"){
		if(obj.CAN_BUY){
			block.find(className).css('display','block');
		}else{
			block.find(className).hide();
		}
	}
	block.find(className).attr('data-item', obj.ID);
	block.find(className).find('span').attr('data-item', obj.ID);
	if(arBasketAspro[type]){
		block.find(className).find('.to').removeClass('added').css('display','block');
		block.find(className).find('.in').hide();

		if(arBasketAspro[type][obj.ID]!==undefined){
			block.find(className).find('.to').hide();
			block.find(className).find('.in').css('display','block');
		}
	}
}

/*set buy*/
window.JCSaleGiftProduct.prototype.setBuyBlock = function(th, obj)
{
	var buyBlock=th.find('.offer_buy_block');

	if(buyBlock.find('.counter_wrapp .counter_block').length){
		buyBlock.find('.counter_wrapp .counter_block').attr('data-item', obj.ID);
	}
	if((obj.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL && obj.CONFIG.ACTION == "ADD") && obj.CAN_BUY){
		var max=(obj.CONFIG.MAX_QUANTITY_BUY>0 ? "data-max='"+obj.CONFIG.MAX_QUANTITY_BUY+"'" : ""),
			counterHtml='<span class="minus">-</span>'+
				'<input type="text" class="text" name="'+obj.PRODUCT_QUANTITY_VARIABLE+'" value="'+obj.CONFIG.MIN_QUANTITY_BUY+'" />'+
				'<span class="plus" '+max+'>+</span>';
		if(arBasketAspro["BASKET"] && arBasketAspro["BASKET"][obj.ID]!==undefined){
			if(buyBlock.find('.counter_wrapp .counter_block').length){
				buyBlock.find('.counter_wrapp .counter_block').hide();
			}else{
				buyBlock.find('.counter_wrapp').prepend('<div class="counter_block" data-item="'+obj.ID+'"></div>');
				buyBlock.find('.counter_wrapp .counter_block').html(counterHtml).hide();
			}
		}else{
			if(buyBlock.find('.counter_wrapp .counter_block').length){
				buyBlock.find('.counter_wrapp .counter_block').html(counterHtml).show();
			}else{
				buyBlock.find('.counter_wrapp').prepend('<div class="counter_block" data-item="'+obj.ID+'"></div>');
				buyBlock.find('.counter_wrapp .counter_block').html(counterHtml);
			}
		}
	}else{
		if(buyBlock.find('.counter_wrapp .counter_block').length){
			buyBlock.find('.counter_wrapp .counter_block').hide();
		}
	}
	var className=((obj.CONFIG.ACTION == "ORDER") || !obj.CAN_BUY || !obj.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL || (obj.CONFIG.ACTION == "SUBSCRIBE" && obj.CATALOG_SUBSCRIBE == "Y") ? "wide" : "" ),
		buyBlockBtn=$('<div class="button_block"></div>');

	if(buyBlock.find('.counter_wrapp').find('.button_block').length){
		if(arBasketAspro["BASKET"] && arBasketAspro["BASKET"][obj.ID]!==undefined){
			buyBlock.find('.counter_wrapp').find('.button_block').addClass('wide').html(obj.HTML);
			markProductAddBasket(obj.ID);
		}else{
			if(className){
				buyBlock.find('.counter_wrapp').find('.button_block').addClass('wide').html(obj.HTML);
				if(arBasketAspro["SUBSCRIBE"] && arBasketAspro["SUBSCRIBE"][obj.ID]!==undefined){
					markProductSubscribe(obj.ID);
				}
			}else{
				buyBlock.find('.counter_wrapp').find('.button_block').removeClass('wide').html(obj.HTML);
			}
		}
	}else{
		buyBlock.find('.counter_wrapp').append('<div class="button_block '+className+'">'+obj.HTML+'</div>');
		if(arBasketAspro["BASKET"] && arBasketAspro["BASKET"][obj.ID]!==undefined)
			markProductAddBasket(obj.ID);
		if(arBasketAspro["SUBSCRIBE"] && arBasketAspro["SUBSCRIBE"][obj.ID]!==undefined)
			markProductSubscribe(obj.ID);
	}

	if(obj.CONFIG.ACTION !== "NOTHING"){
		if(obj.CONFIG.ACTION == "ADD" && obj.CAN_BUY && obj.SHOW_ONE_CLICK_BUY!="N"){
			var ocb='<span class="transparent big_btn type_block button one_click" data-offers="Y" data-item="'+obj.ID+'" data-iblockID="'+obj.IBLOCK_ID+'" data-quantity="'+obj.CONFIG.MIN_QUANTITY_BUY+'" data-props="'+obj.OFFER_PROPS+'" onclick="oneClickBuy('+obj.ID+', '+obj.IBLOCK_ID+', this)">'+
				'<span>'+obj.ONE_CLICK_BUY+'</span>'+
				'</span>';
			if(buyBlock.find('.wrapp_one_click').length){
				buyBlock.find('.wrapp_one_click').html(ocb);
			}else{
				buyBlock.append('<div class="wrapp_one_click">'+ocb+'</div>');
			}
		}else{
			if(buyBlock.find('.wrapp_one_click').length){
				buyBlock.find('.wrapp_one_click').remove();
			}
		}
	}else{
		if(buyBlock.find('.wrapp_one_click').length){
			buyBlock.find('.wrapp_one_click').remove();
		}
	}

	buyBlock.fadeIn();
}

window.JCSaleGiftProduct.prototype.setPrice = function(price, measure)
{
	var strPrice,
		obData;

	if (!!this.obPrice){
		strPrice = BX.Currency.currencyFormat(price.DISCOUNT_VALUE, price.CURRENCY, true);
		if(measure){
			strPrice=strPrice+'/'+measure;
		}
		BX.adjust(this.obPrice, {html: strPrice});
		if (price.DISCOUNT_VALUE !== price.VALUE && this.showOldPrice)
		{
			$(this.obPriceOld).find('strike').show().html(BX.Currency.currencyFormat(price.VALUE, price.CURRENCY, true));
			if(this.showPercent){
				$(this.obPriceOld).closest('.cost').find('.sale_block').show();
				$(this.obPriceOld).closest('.cost').find('.value').html(price.DISCOUNT_DIFF_PERCENT_RAW);
				$(this.obPriceOld).closest('.cost').find('.text span').html(BX.Currency.currencyFormat(price.DISCOUNT_DIFF, price.CURRENCY, true));
			}
		}
		else{
			$(this.obPriceOld).find('strike').hide().html('');
			if(this.showPercent){
				$(this.obPriceOld).closest('.cost').find('.sale_block').hide();
			}
		}
	}
};

/*set store quantity*/
window.JCSaleGiftProduct.prototype.setQuantityStore = function(quantity, text)
{
	if(parseFloat(quantity)>0){
		$(this.storeQuanity).find('.icon').removeClass('order').addClass('stock');
	}else{
		$(this.storeQuanity).find('.icon').removeClass('stock').addClass('order');
	}
	$(this.storeQuanity).find('.icon + span').html(text);
}

window.JCSaleGiftProduct.prototype.InitBasketUrl = function()
{
	switch (this.productType)
	{
		case 1://product
		case 2://set
			this.basketUrl = this.product.addUrl;
			break;
		case 3://sku
			this.basketUrl = this.offers[this.offerNum].ADD_URL;
			break;
	}
	this.basketParams = {
		'ajax_basket': 'Y'
	};
	if (this.showQuantity)
	{
		this.basketParams[this.basketData.quantity] = this.obQuantity.value;
	}
};

window.JCSaleGiftProduct.prototype.FillBasketProps = function()
{
	if (!this.visual.BASKET_PROP_DIV)
	{
		return;
	}
	var
		i = 0,
		propCollection = null,
		foundValues = false,
		obBasketProps = null;

	if (this.basketData.useProps && !this.basketData.emptyProps)
	{
		if (!!this.obPopupWin && !!this.obPopupWin.contentContainer)
		{
			obBasketProps = this.obPopupWin.contentContainer;
		}
	}
	else
	{
		obBasketProps = BX(this.visual.BASKET_PROP_DIV);
	}
	if (!obBasketProps)
	{
		return;
	}
	propCollection = obBasketProps.getElementsByTagName('select');
	if (!!propCollection && !!propCollection.length)
	{
		for (i = 0; i < propCollection.length; i++)
		{
			if (!propCollection[i].disabled)
			{
				switch(propCollection[i].type.toLowerCase())
				{
					case 'select-one':
						this.basketParams[propCollection[i].name] = propCollection[i].value;
						foundValues = true;
						break;
					default:
						break;
				}
			}
		}
	}
	propCollection = obBasketProps.getElementsByTagName('input');
	if (!!propCollection && !!propCollection.length)
	{
		for (i = 0; i < propCollection.length; i++)
		{
			if (!propCollection[i].disabled)
			{
				switch(propCollection[i].type.toLowerCase())
				{
					case 'hidden':
						this.basketParams[propCollection[i].name] = propCollection[i].value;
						foundValues = true;
						break;
					case 'radio':
						if (propCollection[i].checked)
						{
							this.basketParams[propCollection[i].name] = propCollection[i].value;
							foundValues = true;
						}
						break;
					default:
						break;
				}
			}
		}
	}
	if (!foundValues)
	{
		this.basketParams[this.basketData.props] = [];
		this.basketParams[this.basketData.props][0] = 0;
	}
};

window.JCSaleGiftProduct.prototype.SendToBasket = function()
{
	if (!this.canBuy)
	{
		return;
	}
	this.InitBasketUrl();
	this.FillBasketProps();
	BX.ajax.loadJSON(
		this.basketUrl,
		this.basketParams,
		BX.delegate(this.BasketResult, this)
	);
};

window.JCSaleGiftProduct.prototype.Basket = function()
{
	var contentBasketProps = '';
	if (!this.canBuy)
	{
		return;
	}
	switch (this.productType)
	{
	case 1://product
	case 2://set
		if (this.basketData.useProps && !this.basketData.emptyProps)
		{
			this.InitPopupWindow();
			this.obPopupWin.setTitleBar({
				content: BX.create('div', {
					style: { marginRight: '30px', whiteSpace: 'nowrap' },
					text: BX.message('CVP_TITLE_BASKET_PROPS')
				})
			});
			if (BX(this.visual.BASKET_PROP_DIV))
			{
				contentBasketProps = BX(this.visual.BASKET_PROP_DIV).innerHTML;
			}
			this.obPopupWin.setContent(contentBasketProps);
			this.obPopupWin.setButtons([
				new BasketButton({
					ownerClass: this.obProduct.parentNode.parentNode.parentNode.className,
					text: BX.message('CVP_BTN_MESSAGE_SEND_PROPS'),
					events: {
						click: BX.delegate(this.SendToBasket, this)
					}
				})
			]);
			this.obPopupWin.show();
		}
		else
		{
			this.SendToBasket();
		}
		break;
	case 3://sku
		this.SendToBasket();
		break;
	}
};

window.JCSaleGiftProduct.prototype.BasketResult = function(arResult)
{
	var strContent = '',
		strName = '',
		strPict = '',
		successful = true,
		buttons = [];

	if (!!this.obPopupWin)
	{
		this.obPopupWin.close();
	}
	if ('object' !== typeof arResult)
	{
		return false;
	}
	successful = ('OK' === arResult.STATUS);
	if (successful)
	{
		BX.onCustomEvent('OnBasketChange');
		strName = this.product.name;
		switch(this.productType)
		{
		case 1://
		case 2://
			strPict = this.product.pict.SRC;
			break;
		case 3:
			strPict = (!!this.offers[this.offerNum].PREVIEW_PICTURE ?
				this.offers[this.offerNum].PREVIEW_PICTURE.SRC :
				this.defaultPict.pict.SRC
			);
			break;
		}
		strContent = '<div style="width: 96%; margin: 10px 2%; text-align: center;"><img src="'+strPict+'" height="130" style="max-height:130px"><p>'+strName+'</p></div>';
		buttons = [
			new BasketButton({
				ownerClass: this.obProduct.parentNode.parentNode.parentNode.className,
				text: BX.message("CVP_BTN_MESSAGE_BASKET_REDIRECT"),
				events: {
					click: BX.delegate(function(){
						location.href = (!!this.basketData.basketUrl ? this.basketData.basketUrl : BX.message('CVP_BASKET_URL'));
					}, this)
				}
			})
		];
	}
	else
	{
		strContent = (!!arResult.MESSAGE ? arResult.MESSAGE : BX.message('CVP_BASKET_UNKNOWN_ERROR'));
		buttons = [
			new BasketButton({
				ownerClass: this.obProduct.parentNode.parentNode.parentNode.className,
				text: BX.message('CVP_BTN_MESSAGE_CLOSE'),
				events: {
					click: BX.delegate(this.obPopupWin.close, this.obPopupWin)
				}
			})
		];
	}
	this.InitPopupWindow();
	this.obPopupWin.setTitleBar({
		content: BX.create('div', {
			style: { marginRight: '30px', whiteSpace: 'nowrap' },
			text: (successful ? BX.message('CVP_TITLE_SUCCESSFUL') : BX.message('CVP_TITLE_ERROR'))
		})
	});
	this.obPopupWin.setContent(strContent);
	this.obPopupWin.setButtons(buttons);
	this.obPopupWin.show();
};

window.JCSaleGiftProduct.prototype.InitPopupWindow = function()
{
	if (!!this.obPopupWin)
	{
		return;
	}
	this.obPopupWin = BX.PopupWindowManager.create('CatalogSectionBasket_'+this.visual.ID, null, {
		autoHide: false,
		offsetLeft: 0,
		offsetTop: 0,
		overlay : true,
		closeByEsc: true,
		titleBar: true,
		closeIcon: {top: '10px', right: '10px'}
	});
};
})(window);

function bx_sale_gift_product_load(injectId, localAjaxData, additionalData)
{
	localAjaxData = localAjaxData || {};
	additionalData = additionalData || {};

	BX.ajax({
		url: '/bitrix/components/bitrix/sale.gift.product/ajax.php',
		method: 'POST',
		data: BX.merge(localAjaxData, additionalData),
		dataType: 'html',
		processData: false,
		start: true,
		onsuccess: function (html) {
			var ob = BX.processHTML(html);

			// inject
			BX(injectId).innerHTML = ob.HTML;
			BX.ajax.processScripts(ob.SCRIPT);
			initCountdown();
		}
	});
}142  21888|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/sale.gift.product/main/template.php|1167a709<?if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED !== true) die();
/** @var CBitrixComponentTemplate $this */
/** @var array $arParams */
/** @var array $arResult */
/** @global CDatabase $DB */

$frame = $this->createFrame()->begin();

$injectId = 'sale_gift_product_'.rand();

$currentProductId = (int)$arResult['POTENTIAL_PRODUCT_TO_BUY']['ID'];

if (isset($arResult['REQUEST_ITEMS']))
{
	CJSCore::Init(array('ajax'));

	// component parameters
	$signer = new \Bitrix\Main\Security\Sign\Signer;
	$signedParameters = $signer->sign(
		base64_encode(serialize($arResult['_ORIGINAL_PARAMS'])),
		'bx.sale.gift.product'
	);
	$signedTemplate = $signer->sign($arResult['RCM_TEMPLATE'], 'bx.sale.gift.product');

	?>

	<span id="<?=$injectId?>" class="sale_gift_product_container"></span>

	<script type="text/javascript">
		BX.ready(function(){

			var currentProductId = <?=CUtil::JSEscape($currentProductId)?>;
			var giftAjaxData = {
				'parameters':'<?=CUtil::JSEscape($signedParameters)?>',
				'template': '<?=CUtil::JSEscape($signedTemplate)?>',
				'site_id': '<?=CUtil::JSEscape(SITE_ID)?>'
			};

			bx_sale_gift_product_load(
				'<?=CUtil::JSEscape($injectId)?>',
				giftAjaxData
			);

			BX.addCustomEvent('onCatalogStoreProductChange', function(offerId){
				if(currentProductId == offerId)
				{
					return;
				}
				currentProductId = offerId;
				bx_sale_gift_product_load(
					'<?=CUtil::JSEscape($injectId)?>',
					giftAjaxData,
					{offerId: offerId}
				);
			});
		});
	</script>

	<?
	$frame->end();
	return;
}

if (!empty($arResult['ITEMS'])){
	$templateData = array(
		'TEMPLATE_CLASS' => 'bx_'.$arParams['TEMPLATE_THEME']
	);
	$arSkuTemplate = array();
	if (!empty($arResult['SKU_PROPS'])){
		$arSkuTemplate=COptimus::GetSKUPropsArray($arResult['SKU_PROPS'], $arResult["SKU_IBLOCK_ID"], "block", $arParams["OFFER_HIDE_NAME_PROPS"], "Y");
	}?>
	<script type="text/javascript">
		BX.message({
			CVP_MESS_BTN_BUY: '<? echo ('' != $arParams['MESS_BTN_BUY'] ? CUtil::JSEscape($arParams['MESS_BTN_BUY']) : GetMessageJS('CVP_TPL_MESS_BTN_BUY_GIFT')); ?>',
			CVP_MESS_BTN_ADD_TO_BASKET: '<? echo ('' != $arParams['MESS_BTN_ADD_TO_BASKET'] ? CUtil::JSEscape($arParams['MESS_BTN_ADD_TO_BASKET']) : GetMessageJS('CVP_TPL_MESS_BTN_ADD_TO_BASKET')); ?>',

			CVP_MESS_BTN_DETAIL: '<? echo ('' != $arParams['MESS_BTN_DETAIL'] ? CUtil::JSEscape($arParams['MESS_BTN_DETAIL']) : GetMessageJS('CVP_TPL_MESS_BTN_DETAIL')); ?>',

			CVP_MESS_NOT_AVAILABLE: '<? echo ('' != $arParams['MESS_BTN_DETAIL'] ? CUtil::JSEscape($arParams['MESS_BTN_DETAIL']) : GetMessageJS('CVP_TPL_MESS_BTN_DETAIL')); ?>',
			CVP_BTN_MESSAGE_BASKET_REDIRECT: '<? echo GetMessageJS('CVP_CATALOG_BTN_MESSAGE_BASKET_REDIRECT'); ?>',
			CVP_BASKET_URL: '<? echo $arParams["BASKET_URL"]; ?>',
			CVP_ADD_TO_BASKET_OK: '<? echo GetMessageJS('CVP_ADD_TO_BASKET_OK'); ?>',
			CVP_TITLE_ERROR: '<? echo GetMessageJS('CVP_CATALOG_TITLE_ERROR') ?>',
			CVP_TITLE_BASKET_PROPS: '<? echo GetMessageJS('CVP_CATALOG_TITLE_BASKET_PROPS') ?>',
			CVP_TITLE_SUCCESSFUL: '<? echo GetMessageJS('CVP_ADD_TO_BASKET_OK'); ?>',
			CVP_BASKET_UNKNOWN_ERROR: '<? echo GetMessageJS('CVP_CATALOG_BASKET_UNKNOWN_ERROR') ?>',
			CVP_BTN_MESSAGE_SEND_PROPS: '<? echo GetMessageJS('CVP_CATALOG_BTN_MESSAGE_SEND_PROPS'); ?>',
			CVP_BTN_MESSAGE_CLOSE: '<? echo GetMessageJS('CVP_CATALOG_BTN_MESSAGE_CLOSE') ?>'
		});
	</script>

	<div class="bx_item_list_you_looked_horizontal <? echo $templateData['TEMPLATE_CLASS']; ?>">
		<div class="common_product wrapper_block s_<?=$injectId;?> <?=($arParams["SHOW_UNABLE_SKU_PROPS"] != "N" ? "show_un_props" : "unshow_un_props");?>">
			<?if(empty($arParams['HIDE_BLOCK_TITLE']) || $arParams['HIDE_BLOCK_TITLE'] == 'N'){?>
				<div class="top_block">
					<div class="title_block"><?=($arParams['BLOCK_TITLE'] ? htmlspecialcharsbx($arParams['BLOCK_TITLE']) : GetMessage('SGP_TPL_BLOCK_TITLE_DEFAULT'));?></div>
				</div>
			<?}?>
			<ul class="viewed_navigation slider_navigation top_big custom_flex border"></ul>
			<div class="all_wrapp">
				<div class="content_inner tab">
					<ul class="tabs_slider slides wr">
						<?
						$elementEdit = CIBlock::GetArrayByID($arParams['IBLOCK_ID'], 'ELEMENT_EDIT');
						$elementDelete = CIBlock::GetArrayByID($arParams['IBLOCK_ID'], 'ELEMENT_DELETE');
						$elementDeleteParams = array('CONFIRM' => GetMessage('CVP_TPL_ELEMENT_DELETE_CONFIRM'));
						?>
						<?foreach($arResult['ITEMS'] as $key => $arItem){
							$this->AddEditAction($arItem['ID'], $arItem['EDIT_LINK'], $elementEdit);
							$this->AddDeleteAction($arItem['ID'], $arItem['DELETE_LINK'], $elementDelete, $elementDeleteParams);
							$arItem["strMainID"] = $this->GetEditAreaId($arItem['ID']);
							$arItemIDs=COptimus::GetItemsIDs($arItem);

							$strMeasure = '';
							$totalCount = COptimus::GetTotalCount($arItem);
							$arQuantityData = COptimus::GetQuantityArray($totalCount, $arItemIDs["ALL_ITEM_IDS"]);
							if(!$arItem["OFFERS"]){
								if($arParams["SHOW_MEASURE"] == "Y" && $arItem["CATALOG_MEASURE"]){
									$arMeasure = CCatalogMeasure::getList(array(), array("ID" => $arItem["CATALOG_MEASURE"]), false, false, array())->GetNext();
									$strMeasure = $arMeasure["SYMBOL_RUS"];
								}
								$arAddToBasketData = COptimus::GetAddToBasketArray($arItem, $totalCount, $arParams["DEFAULT_COUNT"], $arParams["BASKET_URL"], false, $arItemIDs["ALL_ITEM_IDS"], 'small', $arParams);
							}
							elseif($arItem["OFFERS"]){
								$strMeasure = $arItem["MIN_PRICE"]["CATALOG_MEASURE_NAME"];
								if(!$arItem['OFFERS_PROP']){

									$arAddToBasketData = COptimus::GetAddToBasketArray($arItem["OFFERS"][0], $totalCount, $arParams["DEFAULT_COUNT"], $arParams["BASKET_URL"], false, $arItemIDs["ALL_ITEM_IDS"], 'small', $arParams);
								}
							}
							?>
							<li class="catalog_item" id="<?=$arItem["strMainID"];?>">
								<div class="image_wrapper_block">
									<div class="stickers">
										<?if (is_array($arItem["PROPERTIES"]["HIT"]["VALUE_XML_ID"])):?>
											<?foreach($arItem["PROPERTIES"]["HIT"]["VALUE_XML_ID"] as $key=>$class){?>
												<div><div class="sticker_<?=strtolower($class);?>"><?=$arItem["PROPERTIES"]["HIT"]["VALUE"][$key]?></div></div>
											<?}?>
										<?endif;?>
										<?if($arParams["SALE_STIKER"] && $arItem["PROPERTIES"][$arParams["SALE_STIKER"]]["VALUE"]){?>
											<div><div class="sticker_sale_text"><?=$arItem["PROPERTIES"][$arParams["SALE_STIKER"]]["VALUE"];?></div></div>
										<?}?>
									</div>
									<?if((!$arItem["OFFERS"] && $arParams["DISPLAY_WISH_BUTTONS"] != "N" ) || ($arParams["DISPLAY_COMPARE"] == "Y")):?>
										<div class="like_icons">
											<?if($arParams["DISPLAY_WISH_BUTTONS"] != "N"):?>
												<?if(!$arItem["OFFERS"]):?>
													<div class="wish_item_button">
														<span title="<?=GetMessage('CATALOG_WISH')?>" class="wish_item to" data-item="<?=$arItem["ID"]?>" data-iblock="<?=$arItem["IBLOCK_ID"]?>"><i></i></span>
														<span title="<?=GetMessage('CATALOG_WISH_OUT')?>" class="wish_item in added" style="display: none;" data-item="<?=$arItem["ID"]?>" data-iblock="<?=$arItem["IBLOCK_ID"]?>"><i></i></span>
													</div>
												<?elseif($arItem["OFFERS"]):?>
													<div class="wish_item_button" style="display: none;">
														<span title="<?=GetMessage('CATALOG_WISH')?>" class="wish_item to <?=$arParams["TYPE_SKU"];?>" data-item="" data-iblock="<?=$arItem["IBLOCK_ID"]?>" data-offers="Y" data-props="<?=$arOfferProps?>"><i></i></span>
														<span title="<?=GetMessage('CATALOG_WISH_OUT')?>" class="wish_item in added <?=$arParams["TYPE_SKU"];?>" style="display: none;" data-item="" data-iblock="<?=$arItem["IBLOCK_ID"]?>"><i></i></span>
													</div>
												<?endif;?>
											<?endif;?>
											<?if($arParams["DISPLAY_COMPARE"] == "Y"):?>
												<?if(!$arItem["OFFERS"] || $arParams["TYPE_SKU"] !== 'TYPE_1'):?>
													<div class="compare_item_button">
														<span title="<?=GetMessage('CATALOG_COMPARE')?>" class="compare_item to" data-iblock="<?=$arItem["IBLOCK_ID"]?>" data-item="<?=$arItem["ID"]?>" ><i></i></span>
														<span title="<?=GetMessage('CATALOG_COMPARE_OUT')?>" class="compare_item in added" style="display: none;" data-iblock="<?=$arItem["IBLOCK_ID"]?>" data-item="<?=$arItem["ID"]?>"><i></i></span>
													</div>
												<?elseif($arItem["OFFERS"]):?>
													<div class="compare_item_button">
														<span title="<?=GetMessage('CATALOG_COMPARE')?>" class="compare_item to <?=$arParams["TYPE_SKU"];?>" data-iblock="<?=$arItem["IBLOCK_ID"]?>" data-item="" ><i></i></span>
														<span title="<?=GetMessage('CATALOG_COMPARE_OUT')?>" class="compare_item in added <?=$arParams["TYPE_SKU"];?>" style="display: none;" data-iblock="<?=$arItem["IBLOCK_ID"]?>" data-item=""><i></i></span>
													</div>
												<?endif;?>
											<?endif;?>
										</div>
									<?endif;?>
									<a href="<?=$arItem["DETAIL_PAGE_URL"]?>" class="thumb" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PICT']; ?>">
										<?
										$a_alt=($arItem["IPROPERTY_VALUES"]["ELEMENT_PREVIEW_PICTURE_FILE_ALT"] ? $arItem["IPROPERTY_VALUES"]["ELEMENT_PREVIEW_PICTURE_FILE_ALT"] : $arItem["NAME"] );
										$a_title=($arItem["IPROPERTY_VALUES"]["ELEMENT_PREVIEW_PICTURE_FILE_TITLE"] ? $arItem["IPROPERTY_VALUES"]["ELEMENT_PREVIEW_PICTURE_FILE_TITLE"] : $arItem["NAME"] );
										?>
										<?if( !empty($arItem["PREVIEW_PICTURE"]) ):?>
											<img border="0" src="<?=$arItem["PREVIEW_PICTURE"]["SRC"]?>" alt="<?=$a_alt;?>" title="<?=$a_title;?>" />
										<?elseif( !empty($arItem["DETAIL_PICTURE"])):?>
											<?$img = CFile::ResizeImageGet($arItem["DETAIL_PICTURE"], array( "width" => 170, "height" => 170 ), BX_RESIZE_IMAGE_PROPORTIONAL,true );?>
											<img border="0" src="<?=$img["src"]?>" alt="<?=$a_alt;?>" title="<?=$a_title;?>" />
										<?else:?>
											<img border="0" src="<?=SITE_TEMPLATE_PATH?>/images/no_photo_medium.png" alt="<?=$a_alt;?>" title="<?=$a_title;?>" />
										<?endif;?>
									</a>
								</div>
								<div class="item_info <?=$arParams["TYPE_SKU"]?>">
									<div class="item-title">
										<a href="<?=$arItem["DETAIL_PAGE_URL"]?>"><span><?=$arItem["NAME"]?></span></a>
									</div>
									<?if($arParams["SHOW_RATING"] == "Y"):?>
										<div class="rating">
											<?$APPLICATION->IncludeComponent(
											   "bitrix:iblock.vote",
											   "element_rating_front",
											   Array(
												  "IBLOCK_TYPE" => $arParams["IBLOCK_TYPE"],
												  "IBLOCK_ID" => $arItem["IBLOCK_ID"],
												  "ELEMENT_ID" =>$arItem["ID"],
												  "MAX_VOTE" => 5,
												  "VOTE_NAMES" => array(),
												  "CACHE_TYPE" => $arParams["CACHE_TYPE"],
												  "CACHE_TIME" => $arParams["CACHE_TIME"],
												  "DISPLAY_AS_RATING" => 'vote_avg'
											   ),
											   $component, array("HIDE_ICONS" =>"Y")
											);?>
										</div>
									<?endif;?>
									<?=$arQuantityData["HTML"];?>
									<div class="cost prices clearfix">
										<?if( $arItem["OFFERS"]){?>
											<?$minPrice = false;
											if (isset($arItem['MIN_PRICE']) || isset($arItem['RATIO_PRICE'])){
												// $minPrice = (isset($arItem['RATIO_PRICE']) ? $arItem['RATIO_PRICE'] : $arItem['MIN_PRICE']);
												$minPrice = $arItem['MIN_PRICE'];
											}
											$offer_id=0;
											if($arParams["TYPE_SKU"]=="N"){
												$offer_id=$minPrice["MIN_ITEM_ID"];
											}
											$min_price_id=$minPrice["MIN_PRICE_ID"];
											if(!$min_price_id)
												$min_price_id=$minPrice["PRICE_ID"];
											if($minPrice["MIN_ITEM_ID"])
												$item_id=$minPrice["MIN_ITEM_ID"];
											$prefix = '';
											if('N' == $arParams['TYPE_SKU'] || $arParams['DISPLAY_TYPE'] !== 'block'){
												$prefix = GetMessage("CATALOG_FROM");
											}
											if($arParams["SHOW_OLD_PRICE"]=="Y"){?>
												<div class="price" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PRICE']; ?>">
													<?if(strlen($minPrice["PRINT_DISCOUNT_VALUE"])):?>
														<?=$prefix;?> <?=$minPrice["PRINT_DISCOUNT_VALUE"];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
													<?endif;?>
												</div>
												<div class="price discount" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PRICE_OLD']; ?>">
													<strike <?=(!$minPrice["DISCOUNT_DIFF"] ? 'style="display:none;"' : '')?>><?=$minPrice["PRINT_VALUE"];?></strike>
												</div>
												<?/*if($arParams["SHOW_DISCOUNT_PERCENT"]=="Y"){?>
													<div class="sale_block" <?=(!$minPrice["DISCOUNT_DIFF"] ? 'style="display:none;"' : '')?>>
														<?$percent=round(($minPrice["DISCOUNT_DIFF"]/$minPrice["VALUE"])*100, 2);?>
														<div class="value">-<?=$percent;?>%</div>
														<div class="text"><?=GetMessage("CATALOG_ECONOMY");?> <span><?=$minPrice["PRINT_DISCOUNT_DIFF"];?></span></div>
														<div class="clearfix"></div>
													</div>
												<?}*/?>
											<?}else{?>
												<div class="price only_price" id="<?=$arItemIDs["ALL_ITEM_IDS"]['PRICE']?>">
													<?if(strlen($minPrice["PRINT_DISCOUNT_VALUE"])):?>
														<?=$prefix;?> <?=$minPrice['PRINT_DISCOUNT_VALUE'];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
													<?endif;?>
												</div>
											<?}?>
										<?}elseif ( $arItem["PRICES"] ){?>
											<? $arCountPricesCanAccess = 0;
											$min_price_id=0;
											foreach( $arItem["PRICES"] as $key => $arPrice ) { if($arPrice["CAN_ACCESS"]){$arCountPricesCanAccess++;} } ?>
											<?foreach($arItem["PRICES"] as $key => $arPrice){?>
												<?if($arPrice["CAN_ACCESS"]){
													$percent=0;
													if($arPrice["MIN_PRICE"]=="Y"){
														$min_price_id=$arPrice["PRICE_ID"];
													}?>
													<?$price = CPrice::GetByID($arPrice["ID"]);?>
													<?if($arCountPricesCanAccess > 1):?>
														<div class="price_name"><?=$price["CATALOG_GROUP_NAME"];?></div>
													<?endif;?>
													<?if($arPrice["VALUE"] > $arPrice["DISCOUNT_VALUE"] && $arParams["SHOW_OLD_PRICE"]=="Y"){?>
														<div class="price">
															<?if(strlen($arPrice["PRINT_VALUE"])):?>
																<?=$arPrice["PRINT_DISCOUNT_VALUE"];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
															<?endif;?>
														</div>
														<div class="price discount">
															<strike><?=$arPrice["PRINT_VALUE"];?></strike>
														</div>
														<?/*if($arParams["SHOW_DISCOUNT_PERCENT"]=="Y"){?>
															<div class="sale_block">
																<?$percent=round(($arPrice["DISCOUNT_DIFF"]/$arPrice["VALUE"])*100, 2);?>
																<?if($percent && $percent<100){?>
																	<div class="value">-<?=$percent;?>%</div>
																<?}?>
																<div class="text"><?=GetMessage("CATALOG_ECONOMY");?> <span><?=$arPrice["PRINT_DISCOUNT_DIFF"];?></span></div>
																<div class="clearfix"></div>
															</div>
														<?}*/?>
													<?}else{?>
														<div class="price only_price">
															<?if(strlen($arPrice["PRINT_VALUE"])):?>
																<?=$arPrice["PRINT_VALUE"];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
															<?endif;?>
														</div>
													<?}?>
												<?}?>
											<?}?>
										<?}?>
									</div>
									<?if($arParams["SHOW_DISCOUNT_TIME"]=="Y"){?>
										<?$arDiscounts = CCatalogDiscount::GetDiscountByProduct( $arItem["ID"], $USER->GetUserGroupArray(), "N", $min_price_id, SITE_ID );
										$arDiscount=array();
										if($arDiscounts)
											$arDiscount=current($arDiscounts);
										if($arDiscount["ACTIVE_TO"]){?>
											<div class="view_sale_block">
												<div class="count_d_block">
													<span class="active_to hidden"><?=$arDiscount["ACTIVE_TO"];?></span>
													<div class="title"><?=GetMessage("UNTIL_AKC");?></div>
													<span class="countdown values"></span>
												</div>
												<div class="quantity_block">
													<div class="title"><?=GetMessage("TITLE_QUANTITY_BLOCK");?></div>
													<div class="values">
														<span class="item">
															<span  <?=( count( $arItem["OFFERS"] ) > 0 ? 'style="opacity:0;"' : '')?>><?=$totalCount;?></span>
															<div class="text"><?=GetMessage("TITLE_QUANTITY");?></div>
														</span>
													</div>
												</div>
											</div>
										<?}?>
									<?}?>
								</div>
									<div class="buttons_block">
										<?if(!empty($arItem['OFFERS']) && isset($arSkuTemplate[$arItem['IBLOCK_ID']])){?>
											<?if(!empty($arItem['OFFERS_PROP'])){?>
												<div class="sku_props">
													<div class="bx_catalog_item_scu wrapper_sku" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PROP_DIV']; ?>">
														<?foreach ($arSkuTemplate[$arItem['IBLOCK_ID']] as $code => $strTemplate){
															if (!isset($arItem['OFFERS_PROP'][$code]))
																continue;
															echo '<div>', str_replace('#ITEM#_prop_', $arItemIDs["ALL_ITEM_IDS"]['PROP'], $strTemplate), '</div>';
														}?>
													</div>
													<?$arItemJSParams=COptimus::GetSKUJSParams($arResult, $arParams, $arItem, "N", "Y");?>
													
													<script type="text/javascript">
														var <? echo $arItemIDs["strObName"]; ?> = new JCSaleGiftProduct(<? echo CUtil::PhpToJSObject($arItemJSParams, false, true); ?>);
													</script>
												</div>
											<?}?>
										<?}?>
										<?if(!$arItem["OFFERS"] || ($arItem["OFFERS"] && !$arItem['OFFERS_PROP'])):?>
											<div class="counter_wrapp <?=($arItem["OFFERS"] && $arParams["TYPE_SKU"] == "TYPE_1" ? 'woffers' : '')?>">
												<?if(($arAddToBasketData["OPTIONS"]["USE_PRODUCT_QUANTITY_LIST"] && $arAddToBasketData["ACTION"] == "ADD") && $arItem["CAN_BUY"]):?>
													<div class="counter_block" data-offers="<?=($arItem["OFFERS"] ? "Y" : "N");?>" data-item="<?=$arItem["ID"];?>">
														<span class="minus" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['QUANTITY_DOWN']; ?>">-</span>
														<input type="text" class="text" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['QUANTITY']; ?>" name="<? echo $arParams["PRODUCT_QUANTITY_VARIABLE"]; ?>" value="<?=$arAddToBasketData["MIN_QUANTITY_BUY"]?>" />
														<span class="plus" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['QUANTITY_UP']; ?>" <?=($arAddToBasketData["MAX_QUANTITY_BUY"] ? "data-max='".$arAddToBasketData["MAX_QUANTITY_BUY"]."'" : "")?>>+</span>
													</div>
												<?endif;?>
												<div id="<?=$arItemIDs["ALL_ITEM_IDS"]['BASKET_ACTIONS']; ?>" class="button_block <?=(($arAddToBasketData["ACTION"] == "ORDER"/*&& !$arItem["CAN_BUY"]*/)  || !$arItem["CAN_BUY"] || !$arAddToBasketData["OPTIONS"]["USE_PRODUCT_QUANTITY_LIST"] || $arAddToBasketData["ACTION"] == "SUBSCRIBE" ? "wide" : "");?>">
													<!--noindex-->
														<?=$arAddToBasketData["HTML"]?>
													<!--/noindex-->
												</div>
											</div>
										<?elseif($arItem["OFFERS"] && $arItem['OFFERS_PROP']):?>
											<div class="offer_buy_block buys_wrapp woffers" style="display:none;">
												<div class="counter_wrapp"></div>
											</div>
										<?endif;?>
									</div>
							</li>
						<?}?>
					</ul>
				</div>
			</div>
		</div>
	</div>
	<script>
		$(document).ready(function(){
			var flexsliderItemWidth = 220;
			var flexsliderItemMargin = 12;
			$('.s_<?=$injectId;?> .content_inner').flexslider({
				animation: 'slide',
				selector: '.slides > li',
				slideshow: false,
				animationSpeed: 600,
				directionNav: true,
				controlNav: false,
				pauseOnHover: true,
				animationLoop: true, 
				itemWidth: flexsliderItemWidth,
				itemMargin: flexsliderItemMargin, 
				//minItems: flexsliderMinItems,
				controlsContainer: '.viewed_navigation',
				start: function(slider){
					slider.find('li').css('opacity', 1);
				}
			});

			var itemsButtons = $('.s_<?=$injectId;?> .wr > li .buttons_block'),
				itemsButtonsHeight = itemsButtons.getMaxHeights();
			$('.s_<?=$injectId;?> .wr .buttons_block').hide();
			
			var tabsContentUnhover = ($('.s_<?=$injectId;?> .all_wrapp').height() * 1)+20;
			var tabsContentHover = tabsContentUnhover + itemsButtonsHeight+50;

			$('.s_<?=$injectId;?> .slides').equalize({children: '.item-title'}); 
			$('.s_<?=$injectId;?> .slides').equalize({children: '.item_info'}); 
			$('.s_<?=$injectId;?> .slides').equalize({children: '.catalog_item'});

			$('.s_<?=$injectId;?> .all_wrapp .content_inner').attr('data-unhover', tabsContentUnhover);
			$('.s_<?=$injectId;?> .all_wrapp .content_inner').attr('data-hover', tabsContentHover);
			$('.s_<?=$injectId;?> .all_wrapp').height(tabsContentUnhover);
			$('.s_<?=$injectId;?> .all_wrapp .content_inner').addClass('absolute');			

			$('.s_<?=$injectId;?> .wr > li').hover(
				function(){
					var tabsContentHover = $(this).closest('.content_inner').attr('data-hover') * 1;
					$(this).closest('.content_inner').fadeTo(100, 1);
					$(this).closest('.content_inner').stop().css({'height': tabsContentHover});
					$(this).find('.buttons_block').fadeIn(450, 'easeOutCirc');
				},
				function(){
					var tabsContentUnhoverHover = $(this).closest('.content_inner').attr('data-unhover') * 1;
					$(this).closest('.content_inner').stop().animate({'height': tabsContentUnhoverHover}, 100);
					$(this).find('.buttons_block').stop().fadeOut(233);
				}
			);
		})
	</script>
<?}?>
<?$frame->beginStub();?>
<?$frame->end();?>149  29737|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/catalog.section/catalog_list/script.min.js|3a33e100!function(t){t.JCCatalogSection||(t.JCCatalogSection=function(t){if(this.skuVisualParams={SELECT:{TAG_BIND:"select",TAG:"option",ACTIVE_CLASS:"active",HIDE_CLASS:"hidden",EVENT:"change"},LI:{TAG_BIND:"li",TAG:"li",ACTIVE_CLASS:"active",HIDE_CLASS:"missing",EVENT:"click"}},this.productType=0,this.showQuantity=!0,this.showAbsent=!0,this.secondPict=!1,this.showOldPrice=!1,this.showPercent=!1,this.showSkuProps=!1,this.basketAction="ADD",this.basketLinkURL="",this.showClosePopup=!1,this.useCompare=!1,this.visual={ID:"",PICT_ID:"",SECOND_PICT_ID:"",QUANTITY_ID:"",QUANTITY_UP_ID:"",QUANTITY_DOWN_ID:"",STORE_QUANTITY:"",PRICE_ID:"",PRICE_OLD_ID:"",DSC_PERC:"",SECOND_DSC_PERC:"",DISPLAY_PROP_DIV:"",BASKET_PROP_DIV:""},this.product={checkQuantity:!1,maxQuantity:0,stepQuantity:1,isDblQuantity:!1,canBuy:!0,canSubscription:!0,name:"",pict:{},id:0,addUrl:"",buyUrl:""},this.basketMode="",this.basketData={useProps:!1,emptyProps:!1,quantity:"quantity",props:"prop",basketUrl:"",sku_props:"",sku_props_var:"basket_props",add_url:"",buy_url:""},this.compareData={compareUrl:"",comparePath:""},this.defaultPict={pict:null,secondPict:null},this.checkQuantity=!1,this.maxQuantity=0,this.stepQuantity=1,this.defaultCount=1,this.isDblQuantity=!1,this.canBuy=!0,this.currentBasisPrice={},this.canSubscription=!0,this.precision=6,this.precisionFactor=Math.pow(10,this.precision),this.offers=[],this.offerNum=0,this.treeProps=[],this.obTreeRows=[],this.showCount=[],this.showStart=[],this.selectedValues={},this.obProduct=null,this.obQuantity=null,this.obQuantityUp=null,this.obQuantityDown=null,this.obPict=null,this.obSecondPict=null,this.obPrice=null,this.obTree=null,this.obBuyBtn=null,this.obBasketBtn=null,this.obBasketActions=null,this.obNotAvail=null,this.obDscPerc=null,this.obSecondDscPerc=null,this.obSkuProps=null,this.obMeasure=null,this.obCompare=null,this.obPopupWin=null,this.basketUrl="",this.basketParams={},this.treeRowShowSize=5,this.treeEnableArrow={display:"",cursor:"pointer",opacity:1},this.treeDisableArrow={display:"",cursor:"default",opacity:.2},this.lastElement=!1,this.containerHeight=0,this.errorCode=0,"object"==typeof t){switch(this.productType=parseInt(t.PRODUCT_TYPE,10),this.showQuantity=t.SHOW_QUANTITY,this.showAbsent=t.SHOW_ABSENT,this.secondPict=!!t.SECOND_PICT,this.showOldPrice=!!t.SHOW_OLD_PRICE,this.showPercent=!!t.SHOW_DISCOUNT_PERCENT,this.showSkuProps=!!t.SHOW_SKU_PROPS,t.ADD_TO_BASKET_ACTION&&(this.basketAction=t.ADD_TO_BASKET_ACTION),this.showClosePopup=!!t.SHOW_CLOSE_POPUP,this.useCompare=!!t.DISPLAY_COMPARE,this.visual=t.VISUAL,this.defaultCount=t.DEFAULT_COUNT,this.basketLinkURL=t.BASKET_URL,this.productType){case 1:case 2:t.PRODUCT&&"object"==typeof t.PRODUCT?(this.showQuantity&&(this.product.checkQuantity=t.PRODUCT.CHECK_QUANTITY,this.product.isDblQuantity=t.PRODUCT.QUANTITY_FLOAT,this.product.checkQuantity&&(this.product.maxQuantity=this.product.isDblQuantity?parseFloat(t.PRODUCT.MAX_QUANTITY):parseInt(t.PRODUCT.MAX_QUANTITY,10)),this.product.stepQuantity=this.product.isDblQuantity?parseFloat(t.PRODUCT.STEP_QUANTITY):parseInt(t.PRODUCT.STEP_QUANTITY,10),this.checkQuantity=this.product.checkQuantity,this.isDblQuantity=this.product.isDblQuantity,this.maxQuantity=this.product.maxQuantity,this.stepQuantity=this.product.stepQuantity,this.isDblQuantity&&(this.stepQuantity=Math.round(this.stepQuantity*this.precisionFactor)/this.precisionFactor)),this.product.canBuy=t.PRODUCT.CAN_BUY,this.product.canSubscription=t.PRODUCT.SUBSCRIPTION,t.PRODUCT.BASIS_PRICE&&(this.currentBasisPrice=t.PRODUCT.BASIS_PRICE),this.canBuy=this.product.canBuy,this.canSubscription=this.product.canSubscription,this.product.name=t.PRODUCT.NAME,this.product.pict=t.PRODUCT.PICT,this.product.id=t.PRODUCT.ID,t.PRODUCT.ADD_URL&&(this.product.addUrl=t.PRODUCT.ADD_URL),t.PRODUCT.BUY_URL&&(this.product.buyUrl=t.PRODUCT.BUY_URL),t.BASKET&&"object"==typeof t.BASKET&&(this.basketData.useProps=!!t.BASKET.ADD_PROPS,this.basketData.emptyProps=!!t.BASKET.EMPTY_PROPS)):this.errorCode=-1;break;case 3:t.OFFERS&&BX.type.isArray(t.OFFERS)?(t.PRODUCT&&"object"==typeof t.PRODUCT&&(this.product.name=t.PRODUCT.NAME,this.product.id=t.PRODUCT.ID),this.offers=t.OFFERS,this.offerNum=0,t.OFFER_SELECTED&&(this.offerNum=parseInt(t.OFFER_SELECTED,10)),isNaN(this.offerNum)&&(this.offerNum=0),t.TREE_PROPS&&(this.treeProps=t.TREE_PROPS),t.DEFAULT_PICTURE&&(this.defaultPict.pict=t.DEFAULT_PICTURE.PICTURE,this.defaultPict.secondPict=t.DEFAULT_PICTURE.PICTURE_SECOND)):this.errorCode=-1;break;default:this.errorCode=-1}t.BASKET&&"object"==typeof t.BASKET&&(t.BASKET.QUANTITY&&(this.basketData.quantity=t.BASKET.QUANTITY),t.BASKET.PROPS&&(this.basketData.props=t.BASKET.PROPS),t.BASKET.BASKET_URL&&(this.basketData.basketUrl=t.BASKET.BASKET_URL),3===this.productType&&t.BASKET.SKU_PROPS&&(this.basketData.sku_props=t.BASKET.SKU_PROPS),t.BASKET.ADD_URL_TEMPLATE&&(this.basketData.add_url=t.BASKET.ADD_URL_TEMPLATE),t.BASKET.BUY_URL_TEMPLATE&&(this.basketData.buy_url=t.BASKET.BUY_URL_TEMPLATE),""===this.basketData.add_url&&""===this.basketData.buy_url&&(this.errorCode=-1024)),this.useCompare&&(t.COMPARE&&"object"==typeof t.COMPARE?(t.COMPARE.COMPARE_PATH&&(this.compareData.comparePath=t.COMPARE.COMPARE_PATH),t.COMPARE.COMPARE_URL_TEMPLATE_DEL&&(this.compareData.compareUrlDel=t.COMPARE.COMPARE_URL_TEMPLATE_DEL),t.COMPARE.COMPARE_URL_TEMPLATE?this.compareData.compareUrl=t.COMPARE.COMPARE_URL_TEMPLATE:this.useCompare=!1):this.useCompare=!1),this.lastElement=!!t.LAST_ELEMENT&&"Y"===t.LAST_ELEMENT}0===this.errorCode&&BX.ready(BX.delegate(this.Init,this))},t.JCCatalogSection.prototype.Init=function(){var t=0,s="",i=null;if(this.obProduct=BX(this.visual.ID),this.obProduct||(this.errorCode=-1),this.obPict=BX(this.visual.PICT_ID),this.obPict||(this.errorCode=-2),this.secondPict&&this.visual.SECOND_PICT_ID&&(this.obSecondPict=BX(this.visual.SECOND_PICT_ID)),this.storeQuanity=BX(this.visual.STORE_QUANTITY),this.obPrice=BX(this.visual.PRICE_ID),this.obPriceOld=BX(this.visual.PRICE_OLD_ID),this.obPrice||(this.errorCode=-16),this.showQuantity&&this.visual.QUANTITY_ID&&(this.obQuantity=BX(this.visual.QUANTITY_ID),this.visual.QUANTITY_UP_ID&&(this.obQuantityUp=BX(this.visual.QUANTITY_UP_ID)),this.visual.QUANTITY_DOWN_ID&&(this.obQuantityDown=BX(this.visual.QUANTITY_DOWN_ID))),3===this.productType){if(this.visual.TREE_ID)for(this.obTree=BX(this.visual.TREE_ID),this.obTree||(this.errorCode=-256),s=this.visual.TREE_ITEM_ID,t=0;t<this.treeProps.length;t++)if(this.obTreeRows[t]={LIST:BX(s+this.treeProps[t].ID+"_list"),CONT:BX(s+this.treeProps[t].ID+"_cont")},!this.obTreeRows[t].LIST||!this.obTreeRows[t].CONT){this.errorCode=-512;break}this.visual.QUANTITY_MEASURE&&(this.obMeasure=BX(this.visual.QUANTITY_MEASURE))}if(this.obBasketActions=BX(this.visual.BASKET_ACTIONS_ID),this.obBasketActions&&(this.visual.BUY_ID&&(this.obBuyBtn=BX(this.visual.BUY_ID)),this.visual.BASKET_LINK&&(this.obBasketBtn=BX(this.visual.BASKET_LINK))),this.obNotAvail=BX(this.visual.NOT_AVAILABLE_MESS),this.showPercent&&(this.visual.DSC_PERC&&(this.obDscPerc=BX(this.visual.DSC_PERC)),this.secondPict&&this.visual.SECOND_DSC_PERC&&(this.obSecondDscPerc=BX(this.visual.SECOND_DSC_PERC))),this.showSkuProps&&this.visual.DISPLAY_PROP_DIV&&(this.obSkuProps=BX(this.visual.DISPLAY_PROP_DIV)),0===this.errorCode){switch(this.showQuantity&&(this.obQuantityUp&&BX.bind(this.obQuantityUp,"click",BX.delegate(this.QuantityUp,this)),this.obQuantityDown&&BX.bind(this.obQuantityDown,"click",BX.delegate(this.QuantityDown,this)),this.obQuantity&&BX.bind(this.obQuantity,"change",BX.delegate(this.QuantityChange,this))),this.productType){case 1:break;case 3:for(var e in this.skuVisualParams){var i=BX.findChildren(this.obTree,{tagName:this.skuVisualParams[e].TAG_BIND},!0);if(i&&0<i.length)for(t=0;t<i.length;t++)$(i[t]).on(this.skuVisualParams[e].EVENT,BX.delegate(this.SelectOfferProp,this))}this.SetCurrent()}$(this.obProduct).find(".read_more.to-cart").on("click",BX.delegate(this.Add2Basket,this)),this.obBuyBtn&&("ADD"===this.basketAction||BX.bind(this.obBuyBtn,"click",BX.delegate(this.BuyBasket,this))),this.useCompare&&(this.obCompare=BX(this.visual.COMPARE_LINK_ID))}},t.JCCatalogSection.prototype.checkHeight=function(){this.containerHeight=parseInt(this.obProduct.parentNode.offsetHeight,10),isNaN(this.containerHeight)&&(this.containerHeight=0)},t.JCCatalogSection.prototype.setHeight=function(){0<this.containerHeight&&BX.adjust(this.obProduct.parentNode,{style:{height:this.containerHeight+"px"}})},t.JCCatalogSection.prototype.clearHeight=function(){BX.adjust(this.obProduct.parentNode,{style:{height:"auto"}})},t.JCCatalogSection.prototype.QuantityUp=function(){var t=0,s=!0;0===this.errorCode&&this.showQuantity&&this.canBuy&&(t=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(t)||(t+=this.stepQuantity,this.checkQuantity&&t>this.maxQuantity&&(s=!1),s&&(this.isDblQuantity&&(t=Math.round(t*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=t)))},t.JCCatalogSection.prototype.QuantityDown=function(){var t=0,s=!0;0===this.errorCode&&this.showQuantity&&this.canBuy&&(t=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(t)||(t-=this.stepQuantity,t<this.stepQuantity&&(s=!1),s&&(this.isDblQuantity&&(t=Math.round(t*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=t)))},t.JCCatalogSection.prototype.QuantityChange=function(){var t,s,i=0;0===this.errorCode&&this.showQuantity&&(this.canBuy?(i=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(i)?this.obQuantity.value=this.stepQuantity:(this.checkQuantity&&i>this.maxQuantity&&(i=this.maxQuantity),i<this.stepQuantity?i=this.stepQuantity:(s=i/this.stepQuantity,t=parseInt(s,10),isNaN(t)&&(t=1,s=1.1),s>t&&(i=1>=t?this.stepQuantity:t*this.stepQuantity,i=Math.round(i*this.precisionFactor)/this.precisionFactor)),this.obQuantity.value=i)):this.obQuantity.value=this.stepQuantity)},t.JCCatalogSection.prototype.QuantitySet=function(t){0===this.errorCode&&(this.canBuy=this.offers[t].CAN_BUY,this.canBuy?(this.obBasketActions&&BX.style(this.obBasketActions,"display",""),this.obNotAvail&&BX.style(this.obNotAvail,"display","none")):(this.obBasketActions&&(BX.style(this.obBasketActions,"opacity","0"),BX.style(BX.findParent(BX(this.obQuantity),{"class":"counter_block"}),"display","none")),this.obNotAvail&&BX.style(this.obNotAvail,"display","")),this.showQuantity&&(this.isDblQuantity=this.offers[t].QUANTITY_FLOAT,this.checkQuantity=this.offers[t].CHECK_QUANTITY,this.isDblQuantity?(this.maxQuantity=parseFloat(this.offers[t].MAX_QUANTITY),this.stepQuantity=Math.round(parseFloat(this.offers[t].STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor):(this.maxQuantity=parseInt(this.offers[t].MAX_QUANTITY,10),this.stepQuantity=parseInt(this.offers[t].STEP_QUANTITY,10)),this.obQuantity&&(this.obQuantity.value=this.defaultCount,this.obQuantity.disabled=!this.canBuy),this.obMeasure&&(this.offers[t].MEASURE?BX.adjust(this.obMeasure,{html:this.offers[t].MEASURE}):BX.adjust(this.obMeasure,{html:""}))),this.currentBasisPrice=this.offers[t].BASIS_PRICE)},t.JCCatalogSection.prototype.SelectOfferProp=function(){var t=0,s="",i="",e=[],o=null,a=BX.proxy_context;if("undefined"!=typeof a.options&&"undefined"!=typeof a.options[a.selectedIndex]&&(a=a.options[a.selectedIndex]),a&&a.hasAttribute("data-treevalue")&&(i=a.getAttribute("data-treevalue"),propModes=a.getAttribute("data-showtype"),e=i.split("_"),this.SearchOfferPropIndex(e[0],e[1])&&(o=BX.findChildren(a.parentNode,{tagName:this.skuVisualParams[propModes.toUpperCase()].TAG},!1),o&&0<o.length)))for(t=0;t<o.length;t++)s=o[t].getAttribute("data-onevalue"),"TEXT"==propModes?s===e[1]?o[t].setAttribute("selected","selected"):o[t].removeAttribute("selected"):s===e[1]?$(o[t]).addClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS):$(o[t]).removeClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS)},t.JCCatalogSection.prototype.SearchOfferPropIndex=function(t,s){var i,e,o="",a=!1,r=[],h=-1,n={},c=[];for(i=0;i<this.treeProps.length;i++)if(this.treeProps[i].ID===t){h=i;break}if(h>-1){for(i=0;h>i;i++)o="PROP_"+this.treeProps[i].ID,n[o]=this.selectedValues[o];if(o="PROP_"+this.treeProps[h].ID,a=this.GetRowValues(n,o),!a)return!1;if(!BX.util.in_array(s,a))return!1;for(n[o]=s,i=h+1;i<this.treeProps.length;i++){if(o="PROP_"+this.treeProps[i].ID,a=this.GetRowValues(n,o),!a)return!1;if(this.showAbsent)for(r=[],c=[],c=BX.clone(n,!0),e=0;e<a.length;e++)c[o]=a[e],this.GetCanBuy(c)&&(r[r.length]=a[e]);else r=a;this.selectedValues[o]&&BX.util.in_array(this.selectedValues[o],r)?n[o]=this.selectedValues[o]:n[o]=r[0],this.UpdateRow(i,n[o],a,r)}this.selectedValues=n,this.ChangeInfo()}return!0},t.JCCatalogSection.prototype.UpdateRow=function(t,s,i,e){var o=0,a=0,r="",h=0,n={},c=!1,u=0,l=(this.treeEnableArrow,this.treeEnableArrow,0),p=null;if(t>-1&&t<this.obTreeRows.length&&(propMode=this.treeProps[t].DISPLAY_TYPE,p=BX.findChildren(this.obTreeRows[t].LIST,{tagName:this.skuVisualParams[propMode].TAG},!1),p&&0<p.length)){for(selectMode="SELECT"===this.treeProps[t].DISPLAY_TYPE,h=i.length,n={style:{},props:{disabled:"",selected:""}},o=0;o<p.length;o++)r=p[o].getAttribute("data-onevalue"),c=r===s&&0!=r,BX.util.in_array(r,e)?n.props.className=c?this.skuVisualParams[propMode].ACTIVE_CLASS:"":n.props.className=c?this.skuVisualParams[propMode].ACTIVE_CLASS+" "+this.skuVisualParams[propMode].HIDE_CLASS:this.skuVisualParams[propMode].HIDE_CLASS,selectMode?(n.props.disabled="disabled",n.props.selected=c?"selected":""):n.style.display="none",BX.util.in_array(r,i)&&(selectMode?n.props.disabled="":n.style.display="",c&&(u=a),a++),BX.adjust(p[o],n);selectMode&&$(this.obTreeRows[t].LIST).parent().hasClass("ik_select")&&$(this.obTreeRows[t].LIST).ikSelect("reset"),this.showCount[t]=h,this.showStart[t]=l}},t.JCCatalogSection.prototype.GetRowValues=function(t,s){var i,e=0,o=[],a=!1,r=!0;if(0===t.length){for(e=0;e<this.offers.length;e++)BX.util.in_array(this.offers[e].TREE[s],o)||(o[o.length]=this.offers[e].TREE[s]);a=!0}else for(e=0;e<this.offers.length;e++){r=!0;for(i in t)if(t[i]!==this.offers[e].TREE[i]){r=!1;break}r&&(BX.util.in_array(this.offers[e].TREE[s],o)||(o[o.length]=this.offers[e].TREE[s]),a=!0)}return a?o:!1},t.JCCatalogSection.prototype.GetCanBuy=function(t){var s,i=0,e=!1,o=!0;for(i=0;i<this.offers.length;i++){o=!0;for(s in t)if(t[s]!==this.offers[i].TREE[s]){o=!1;break}if(o&&this.offers[i].CAN_BUY){e=!0;break}}return e},t.JCCatalogSection.prototype.SetCurrent=function(){var t=0,s=0,i=[],e="",o=!1,a={},r=[],h=this.offers[this.offerNum].TREE;for(t=0;t<this.treeProps.length&&(e="PROP_"+this.treeProps[t].ID,o=this.GetRowValues(a,e),o);t++){if(BX.util.in_array(h[e],o)?a[e]=h[e]:(a[e]=o[0],this.offerNum=0),this.showAbsent)for(i=[],r=[],r=BX.clone(a,!0),s=0;s<o.length;s++)r[e]=o[s],this.GetCanBuy(r)&&(i[i.length]=o[s]);else i=o;this.UpdateRow(t,a[e],o,i)}this.selectedValues=a,this.ChangeInfo()},t.JCCatalogSection.prototype.ChangeInfo=function(){var s,i=0,e=-1,o=!0;for(i=0;i<this.offers.length;i++){o=!0;for(s in this.selectedValues)if(this.selectedValues[s]!==this.offers[i].TREE[s]){o=!1;break}if(o){e=i;break}}if(e>-1){if(this.obPict){var a={attrs:{}};this.offers[e].PREVIEW_PICTURE?a.attrs.src=this.offers[e].PREVIEW_PICTURE.SRC:a.attrs.src=this.defaultPict.pict.SRC,BX.adjust(BX.findChild(this.obPict,{tag:"img"}),a)}this.secondPict&&this.obSecondPict&&(this.offers[e].PREVIEW_PICTURE_SECOND?BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.offers[e].PREVIEW_PICTURE_SECOND.SRC+")"}}):this.offers[e].PREVIEW_PICTURE.SRC?BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.offers[e].PREVIEW_PICTURE.SRC+")"}}):this.defaultPict.secondPict?BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.defaultPict.secondPict.SRC+")"}}):BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.defaultPict.pict.SRC+")"}})),this.showSkuProps&&this.obSkuProps&&(0===this.offers[e].DISPLAY_PROPERTIES.length?BX.adjust(this.obSkuProps,{style:{display:"none"},html:""}):BX.adjust(this.obSkuProps,{style:{display:""},html:this.offers[e].DISPLAY_PROPERTIES})),$(this.obBuyBtn).data("item",this.offers[e].ID),$(this.obBasketBtn).data("item",this.offers[e].ID),$(this.obBasketActions).closest(".counter_wrapp").css("opacity",0);var r=this.offers[e].MEASURE&&"Y"==this.offers[e].SHOW_MEASURE?this.offers[e].MEASURE:"";this.setPrice(this.offers[e].PRICE,r),this.setQuantityStore(this.offers[e].MAX_QUANTITY,this.offers[e].AVAILIABLE.TEXT),this.offerNum=e,this.QuantitySet(this.offerNum),$(this.obProduct).find(".item-title a").attr("href",this.offers[this.offerNum].URL),$(this.obProduct).find(".image_wrapper_block > a").attr("href",this.offers[this.offerNum].URL),$(this.obProduct).find(".quantity_block .values").length&&$(this.obProduct).find(".quantity_block .values .item span.value").text(this.offers[e].MAX_QUANTITY).css({opacity:"1"});var h=this.offers[e],n=$(this.obProduct);this.setArticle(n.find(".article_block"),h),"undefined"!=typeof arBasketAspro?this.setActualDataBlock(n,h):"undefined"!=typeof t.frameCacheVars&&BX.addCustomEvent("onFrameDataReceived",function(){t.JCCatalogSection.prototype.setActualDataBlock(n,h)})}},t.JCCatalogSection.prototype.setArticle=function(t,s){s.ARTICLE&&t.html(s.ARTICLE)},t.JCCatalogSection.prototype.setActualDataBlock=function(t,s){this.setLikeBlock(t,".like_icons .wish_item_button",s,"DELAY"),this.setLikeBlock(t,".like_icons .compare_item_button",s,"COMPARE"),this.setBuyBlock(t,s)},t.JCCatalogSection.prototype.setLikeBlock=function(t,s,i,e){var o=t;"DELAY"==e&&(i.CAN_BUY?o.find(s).css("display","inline-block"):o.find(s).hide()),o.find(s).attr("data-item",i.ID),o.find(s).find("span").attr("data-item",i.ID),arBasketAspro[e]&&(o.find(s).find(".to").removeClass("added").css("display","block"),o.find(s).find(".in").hide(),void 0!==arBasketAspro[e][i.ID]&&(o.find(s).find(".to").hide(),o.find(s).find(".in").addClass("added").css("display","block")))},t.JCCatalogSection.prototype.setBuyBlock=function(t,s){var i=t.find(".offer_buy_block");if(i.find(".counter_wrapp .counter_block").length&&i.find(".counter_wrapp .counter_block").attr("data-item",s.ID),s.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL&&"ADD"==s.CONFIG.ACTION&&s.CAN_BUY){var e=s.CONFIG.MAX_QUANTITY_BUY>0?"data-max='"+s.CONFIG.MAX_QUANTITY_BUY+"'":"",o='<span class="minus">-</span><input type="text" class="text" name="'+s.PRODUCT_QUANTITY_VARIABLE+'" value="'+s.CONFIG.MIN_QUANTITY_BUY+'" /><span class="plus" '+e+">+</span>";arBasketAspro.BASKET&&void 0!==arBasketAspro.BASKET[s.ID]?i.find(".counter_wrapp .counter_block").length?i.find(".counter_wrapp .counter_block").hide():(i.find(".counter_wrapp").prepend('<div class="counter_block" data-item="'+s.ID+'"></div>'),i.find(".counter_wrapp .counter_block").html(o).hide()):i.find(".counter_wrapp .counter_block").length?i.find(".counter_wrapp .counter_block").html(o).show():(i.find(".counter_wrapp").prepend('<div class="counter_block" data-item="'+s.ID+'"></div>'),i.find(".counter_wrapp .counter_block").html(o))}else i.find(".counter_wrapp .counter_block").length&&i.find(".counter_wrapp .counter_block").hide();var a="ORDER"==s.CONFIG.ACTION||!s.CAN_BUY||!s.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL||"SUBSCRIBE"==s.CONFIG.ACTION&&"Y"==s.CATALOG_SUBSCRIBE?"wide":"";$('<div class="button_block"></div>');if(i.find(".counter_wrapp").find(".button_block").length?arBasketAspro.BASKET&&void 0!==arBasketAspro.BASKET[s.ID]?(i.find(".counter_wrapp").find(".button_block").addClass("wide").html(s.HTML),markProductAddBasket(s.ID)):a?(i.find(".counter_wrapp").find(".button_block").addClass("wide").html(s.HTML),arBasketAspro.SUBSCRIBE&&void 0!==arBasketAspro.SUBSCRIBE[s.ID]&&markProductSubscribe(s.ID)):i.find(".counter_wrapp").find(".button_block").removeClass("wide").html(s.HTML):(i.find(".counter_wrapp").append('<div class="button_block '+a+'">'+s.HTML+"</div>"),arBasketAspro.BASKET&&void 0!==arBasketAspro.BASKET[s.ID]&&markProductAddBasket(s.ID),arBasketAspro.SUBSCRIBE&&void 0!==arBasketAspro.SUBSCRIBE[s.ID]&&markProductSubscribe(s.ID)),"NOTHING"!==s.CONFIG.ACTION)if("ADD"==s.CONFIG.ACTION&&s.CAN_BUY&&"N"!=s.SHOW_ONE_CLICK_BUY){var r='<span class="transparent big_btn type_block button one_click" data-offers="Y" data-item="'+s.ID+'" data-iblockID="'+s.IBLOCK_ID+'" data-quantity="'+s.CONFIG.MIN_QUANTITY_BUY+'" data-props="'+s.OFFER_PROPS+'" onclick="oneClickBuy('+s.ID+", "+s.IBLOCK_ID+', this)"><span>'+s.ONE_CLICK_BUY+"</span></span>";i.find(".wrapp_one_click").length?i.find(".wrapp_one_click").html(r):i.append('<div class="wrapp_one_click">'+r+"</div>")}else i.find(".wrapp_one_click").length&&i.find(".wrapp_one_click").remove();else i.find(".wrapp_one_click").length&&i.find(".wrapp_one_click").remove();i.fadeIn()},t.JCCatalogSection.prototype.CompareCountResult=function(t){if(t.COMPARE_COUNT){for(var s in t.ITEMS){if(t.ITEMS[s]==this.offers[this.offerNum].ID){this.offers[this.offerNum].COMPARE_ACTIVE=!0;break}this.offers[this.offerNum].COMPARE_ACTIVE=!1}this.offers[this.offerNum].COMPARE_ACTIVE?($(this.obCompare).find(".compare_item.to").hide(),$(this.obCompare).find(".compare_item.added").show()):($(this.obCompare).find(".compare_item.added").hide(),$(this.obCompare).find(".compare_item.to").show())}},t.JCCatalogSection.prototype.ItemInfoResult=function(t){t.HTML&&($(this.obBasketActions).html(t.HTML),$(this.obBasketActions).show(),this.obBuyBtn=BX(this.visual.BUY_ID),this.obBasketBtn=BX(this.visual.BASKET_LINK),this.obSubscribeBtn=BX(this.visual.SUBSCRIBE_ID),this.obSubscribedBtn=BX(this.visual.SUBSCRIBED_ID),BX.bind(this.obBuyBtn,"click",BX.delegate(this.Add2Basket,this)),$(this.obBasketActions).removeClass("wide"),this.ajax_type_item=t.BUYMISSINGGOODS,"ADD"==t.BUYMISSINGGOODS||this.canBuy?$(this.obQuantity).css("display",""):$(this.obBasketActions).addClass("wide")),basketParams={ajax_action:"Y"},BX.ajax.loadJSON(arOptimusOptions.SITE_DIR+"ajax/get_basket_count.php",basketParams,BX.delegate(this.BasketCountResult,this))},t.JCCatalogSection.prototype.BasketCountResult=function(t){for(var s in t.ITEMS){if(t.ITEMS[s].PRODUCT_ID==this.offers[this.offerNum].ID){this.offers[this.offerNum].BASKET_ACTIVE=!0;break}this.offers[this.offerNum].BASKET_ACTIVE=!1}for(var s in t.SUBSCRIBE_ITEMS){if(t.SUBSCRIBE_ITEMS[s].PRODUCT_ID==this.offers[this.offerNum].ID){this.offers[this.offerNum].SUBSCRIBE_ACTIVE=!0;break}this.offers[this.offerNum].SUBSCRIBE_ACTIVE=!1}this.BasketStateRefresh()},t.JCCatalogSection.prototype.BasketStateRefresh=function(s){this.offers[this.offerNum].SUBSCRIBE_ACTIVE?($(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .to-subscribe").hide(),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .in-subscribe").show()):($(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .to-subscribe").show(),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .in-subscribe").hide()),this.offers[this.offerNum].BASKET_ACTIVE?($(this.obProduct).find(".information_wrapp .o_"+this.offers[this.offerNum].ID).addClass("wide"),$(this.obProduct).find(".information_wrapp .o_"+this.offers[this.offerNum].ID+" .button_block").addClass("wide"),$(this.obProduct).find(".information_wrapp .o_"+this.offers[this.offerNum].ID+" .to-cart").hide(),$(this.obProduct).find(".information_wrapp .o_"+this.offers[this.offerNum].ID+" .in-cart").show(),$(this.obProduct).find(".information_wrapp .o_"+this.offers[this.offerNum].ID+" .counter_block").hide()):($(this.obProduct).find(".information_wrapp .o_"+this.offers[this.offerNum].ID).removeClass("wide"),$(this.obProduct).find(".information_wrapp .o_"+this.offers[this.offerNum].ID+" .button_block").removeClass("wide"),$(this.obProduct).find(".information_wrapp .o_"+this.offers[this.offerNum].ID+" .to-cart").show(),$(this.obProduct).find(".information_wrapp .o_"+this.offers[this.offerNum].ID+" .in-cart").hide(),$(this.obProduct).find(".information_wrapp .o_"+this.offers[this.offerNum].ID+" .counter_block").show()),BX.style(this.obBasketActions,"opacity","1"),$(this.obBasketActions).closest(".counter_wrapp").css("opacity",1),"undefined"!==s&&"Y"==s&&($("#basket_line .basket_fly").length&&$(t).outerWidth()>768?basketFly("open"):$("#basket_line .cart").length&&($("#basket_line .cart").is(".empty_cart")&&($("#basket_line .cart").removeClass("empty_cart").find(".cart_wrapp a.basket_link").removeAttr("href").addClass("cart-call"),touchBasket(".cart:not(.empty_cart) .basket_block .link")),reloadTopBasket("add",$("#basket_line"),200,2e3,"Y")),animateBasketLine(200))},t.JCCatalogSection.prototype.setPrice=function(t,s){var i;this.obPrice&&(i=BX.Currency.currencyFormat(t.DISCOUNT_VALUE,t.CURRENCY,!0),s&&(i=i?i+"/"+s:"&nbsp;"),BX.adjust(this.obPrice,{html:i}),t.DISCOUNT_VALUE!==t.VALUE&&this.showOldPrice?($(this.obPriceOld).find("strike").show().html(BX.Currency.currencyFormat(t.VALUE,t.CURRENCY,!0)),this.showPercent&&($(this.obPriceOld).closest(".cost").find(".sale_block").show(),$(this.obPriceOld).closest(".cost").find(".value").html(t.DISCOUNT_DIFF_PERCENT_RAW),$(this.obPriceOld).closest(".cost").find(".text span").html(BX.Currency.currencyFormat(t.DISCOUNT_DIFF,t.CURRENCY,!0)))):($(this.obPriceOld).find("strike").hide().html(""),this.showPercent&&$(this.obPriceOld).closest(".cost").find(".sale_block").hide()))},t.JCCatalogSection.prototype.setQuantityStore=function(t,s){parseFloat(t)>0?$(this.storeQuanity).find(".icon").removeClass("order").addClass("stock"):$(this.storeQuanity).find(".icon").removeClass("stock").addClass("order"),$(this.storeQuanity).find(".icon + span").html(s)},t.JCCatalogSection.prototype.Compare=function(){var t,s;if($(this.obProduct).find(".like_icons .o_"+this.offers[this.offerNum].ID).data("changed","Y"),$(this.obProduct).find(".like_icons .o_"+this.offers[this.offerNum].ID).find(".compare_item.added").is(":visible")?(s=this.compareData.compareUrlDel,this.compareData.Added=!1):(s=this.compareData.compareUrl,this.compareData.Added=!0),s){switch(this.productType){case 1:case 2:s=s.replace("#ID#",this.product.id.toString());break;case 3:s=s.replace("#ID#",this.offers[this.offerNum].ID)}t={ajax_action:"Y"},BX.ajax.loadJSON(s,t,BX.proxy(this.CompareResult,this))}},t.JCCatalogSection.prototype.CompareResult=function(t){return"object"!=typeof t?!1:("OK"===t.STATUS?(BX.onCustomEvent("OnCompareChange"),this.compareData.Added?($(this.obProduct).find(".like_icons .o_"+this.offers[this.offerNum].ID).find(".to").hide(),$(this.obProduct).find(".like_icons .o_"+this.offers[this.offerNum].ID).find(".in").show()):($(this.obProduct).find(".like_icons .o_"+this.offers[this.offerNum].ID).find(".in").hide(),$(this.obProduct).find(".like_icons .o_"+this.offers[this.offerNum].ID).find(".to").show()),jsAjaxUtil.InsertDataToNode(arOptimusOptions.SITE_DIR+"ajax/show_compare_preview_top.php","compare_line",!1)):console.log(BX.message("ADD_ERROR_COMPARE")),!1)},t.JCCatalogSection.prototype.CompareRedirect=function(){this.compareData.comparePath?location.href=this.compareData.comparePath:this.obPopupWin.close()},t.JCCatalogSection.prototype.InitBasketUrl=function(){switch(this.basketUrl="ADD"===this.basketMode?this.basketData.add_url:this.basketData.buy_url,this.productType){case 1:case 2:this.basketUrl=this.basketUrl.replace("#ID#",this.product.id.toString());break;case 3:this.basketUrl=this.basketUrl.replace("#ID#",this.offers[this.offerNum].ID)}this.basketParams={ajax_basket:"Y"},this.showQuantity&&(this.basketParams[this.basketData.quantity]=$(this.obProduct).find(".counter_wrapp.o_"+this.offers[this.offerNum].ID).find(".counter_block .text").val()),this.basketData.sku_props&&(this.basketParams[this.basketData.sku_props_var]=this.basketData.sku_props)},t.JCCatalogSection.prototype.FillBasketProps=function(){if(this.visual.BASKET_PROP_DIV){var t=0,s=null,i=!1,e=null;if(this.basketData.useProps&&!this.basketData.emptyProps?this.obPopupWin&&this.obPopupWin.contentContainer&&(e=this.obPopupWin.contentContainer):e=BX(this.visual.BASKET_PROP_DIV),e){if(s=e.getElementsByTagName("select"),s&&s.length)for(t=0;t<s.length;t++)if(!s[t].disabled)switch(s[t].type.toLowerCase()){case"select-one":this.basketParams[s[t].name]=s[t].value,i=!0}if(s=e.getElementsByTagName("input"),s&&s.length)for(t=0;t<s.length;t++)if(!s[t].disabled)switch(s[t].type.toLowerCase()){case"hidden":this.basketParams[s[t].name]=s[t].value,i=!0;break;case"radio":s[t].checked&&(this.basketParams[s[t].name]=s[t].value,i=!0)}}i||(this.basketParams[this.basketData.props]=[],this.basketParams[this.basketData.props][0]=0)}},t.JCCatalogSection.prototype.Add2Basket=function(){this.basketMode="ADD",this.Basket()},t.JCCatalogSection.prototype.BuyBasket=function(){this.basketMode="BUY",this.Basket()},t.JCCatalogSection.prototype.SendToBasket=function(){this.canBuy&&(this.InitBasketUrl(),this.FillBasketProps(),BX.ajax.loadJSON(this.basketUrl,this.basketParams,BX.delegate(this.BasketResult,this)))},t.JCCatalogSection.prototype.Basket=function(){this.canBuy&&this.SendToBasket()},t.JCCatalogSection.prototype.BasketResult=function(t){var s;return this.obPopupWin&&this.obPopupWin.close(),"object"!=typeof t?!1:(s="OK"===t.STATUS,void(s&&"BUY"===this.basketAction?this.BasketRedirect():s?(BX.onCustomEvent("OnBasketChange"),this.offers[this.offerNum].BASKET_ACTIVE=!0,this.BasketStateRefresh("Y"),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID).data("changed","Y")):console.log(BX.message("ADD_ERROR_BASKET"))))},t.JCCatalogSection.prototype.BasketRedirect=function(){location.href=this.basketData.basketUrl?this.basketData.basketUrl:BX.message("BASKET_URL")})}(window);145  47439|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/catalog.section/catalog_list/script.js|5710af4c(function (window) {

if (!!window.JCCatalogSection)
{
	return;
}

window.JCCatalogSection = function (arParams)
{
	this.skuVisualParams = {
		SELECT:
		{
			TAG_BIND: 'select',
			TAG: 'option',
			ACTIVE_CLASS: 'active',
			HIDE_CLASS: 'hidden',
			EVENT: 'change',
		},
		LI:
		{
			TAG_BIND: 'li',
			TAG: 'li',
			ACTIVE_CLASS: 'active',
			HIDE_CLASS: 'missing',
			EVENT: 'click',
		}
	};
	this.productType = 0;
	this.showQuantity = true;
	this.showAbsent = true;
	this.secondPict = false;
	this.showOldPrice = false;
	this.showPercent = false;
	this.showSkuProps = false;
	this.basketAction = 'ADD';
	this.basketLinkURL = '';
	this.showClosePopup = false;
	this.useCompare = false;
	this.visual = {
		ID: '',
		PICT_ID: '',
		SECOND_PICT_ID: '',
		QUANTITY_ID: '',
		QUANTITY_UP_ID: '',
		QUANTITY_DOWN_ID: '',
		STORE_QUANTITY: '',
		PRICE_ID: '',
		PRICE_OLD_ID: '',
		DSC_PERC: '',
		SECOND_DSC_PERC: '',
		DISPLAY_PROP_DIV: '',
		BASKET_PROP_DIV: ''
	};
	this.product = {
		checkQuantity: false,
		maxQuantity: 0,
		stepQuantity: 1,
		isDblQuantity: false,
		canBuy: true,
		canSubscription: true,
		name: '',
		pict: {},
		id: 0,
		addUrl: '',
		buyUrl: ''
	};

	this.basketMode = '';
	this.basketData = {
		useProps: false,
		emptyProps: false,
		quantity: 'quantity',
		props: 'prop',
		basketUrl: '',
		sku_props: '',
		sku_props_var: 'basket_props',
		add_url: '',
		buy_url: ''
	};

	this.compareData = {
		compareUrl: '',
		comparePath: ''
	};

	this.defaultPict = {
		pict: null,
		secondPict: null
	};

	this.checkQuantity = false;
	this.maxQuantity = 0;
	this.stepQuantity = 1;
	this.defaultCount = 1;
	this.isDblQuantity = false;
	this.canBuy = true;
	this.currentBasisPrice = {};
	this.canSubscription = true;
	this.precision = 6;
	this.precisionFactor = Math.pow(10,this.precision);

	this.offers = [];
	this.offerNum = 0;
	this.treeProps = [];
	this.obTreeRows = [];
	this.showCount = [];
	this.showStart = [];
	this.selectedValues = {};

	this.obProduct = null;
	this.obQuantity = null;
	this.obQuantityUp = null;
	this.obQuantityDown = null;
	this.obPict = null;
	this.obSecondPict = null;
	this.obPrice = null;
	this.obTree = null;
	this.obBuyBtn = null;
	this.obBasketBtn = null;
	this.obBasketActions = null;
	this.obNotAvail = null;
	this.obDscPerc = null;
	this.obSecondDscPerc = null;
	this.obSkuProps = null;
	this.obMeasure = null;
	this.obCompare = null;

	this.obPopupWin = null;
	this.basketUrl = '';
	this.basketParams = {};

	this.treeRowShowSize = 5;
	this.treeEnableArrow = { display: '', cursor: 'pointer', opacity: 1 };
	this.treeDisableArrow = { display: '', cursor: 'default', opacity:0.2 };

	this.lastElement = false;
	this.containerHeight = 0;

	this.errorCode = 0;

	if ('object' === typeof arParams)
	{
		this.productType = parseInt(arParams.PRODUCT_TYPE, 10);
		this.showQuantity = arParams.SHOW_QUANTITY;
		this.showAbsent = arParams.SHOW_ABSENT;
		this.secondPict = !!arParams.SECOND_PICT;
		this.showOldPrice = !!arParams.SHOW_OLD_PRICE;
		this.showPercent = !!arParams.SHOW_DISCOUNT_PERCENT;
		this.showSkuProps = !!arParams.SHOW_SKU_PROPS;
		if (!!arParams.ADD_TO_BASKET_ACTION)
		{
			this.basketAction = arParams.ADD_TO_BASKET_ACTION;
		}
		this.showClosePopup = !!arParams.SHOW_CLOSE_POPUP;
		this.useCompare = !!arParams.DISPLAY_COMPARE;

		this.visual = arParams.VISUAL;
		this.defaultCount = arParams.DEFAULT_COUNT;
		this.basketLinkURL = arParams.BASKET_URL;
		switch (this.productType)
		{
			case 1://product
			case 2://set
				if (!!arParams.PRODUCT && 'object' === typeof(arParams.PRODUCT))
				{
					if (this.showQuantity)
					{
						this.product.checkQuantity = arParams.PRODUCT.CHECK_QUANTITY;
						this.product.isDblQuantity = arParams.PRODUCT.QUANTITY_FLOAT;
						if (this.product.checkQuantity)
						{
							this.product.maxQuantity = (this.product.isDblQuantity ? parseFloat(arParams.PRODUCT.MAX_QUANTITY) : parseInt(arParams.PRODUCT.MAX_QUANTITY, 10));
						}
						this.product.stepQuantity = (this.product.isDblQuantity ? parseFloat(arParams.PRODUCT.STEP_QUANTITY) : parseInt(arParams.PRODUCT.STEP_QUANTITY, 10));

						this.checkQuantity = this.product.checkQuantity;
						this.isDblQuantity = this.product.isDblQuantity;
						this.maxQuantity = this.product.maxQuantity;
						this.stepQuantity = this.product.stepQuantity;
						if (this.isDblQuantity)
						{
							this.stepQuantity = Math.round(this.stepQuantity*this.precisionFactor)/this.precisionFactor;
						}
					}
					this.product.canBuy = arParams.PRODUCT.CAN_BUY;
					this.product.canSubscription = arParams.PRODUCT.SUBSCRIPTION;
					if (!!arParams.PRODUCT.BASIS_PRICE)
					{
						this.currentBasisPrice = arParams.PRODUCT.BASIS_PRICE;
					}

					this.canBuy = this.product.canBuy;
					this.canSubscription = this.product.canSubscription;

					this.product.name = arParams.PRODUCT.NAME;
					this.product.pict = arParams.PRODUCT.PICT;
					this.product.id = arParams.PRODUCT.ID;
					if (!!arParams.PRODUCT.ADD_URL)
					{
						this.product.addUrl = arParams.PRODUCT.ADD_URL;
					}
					if (!!arParams.PRODUCT.BUY_URL)
					{
						this.product.buyUrl = arParams.PRODUCT.BUY_URL;
					}
					if (!!arParams.BASKET && 'object' === typeof(arParams.BASKET))
					{
						this.basketData.useProps = !!arParams.BASKET.ADD_PROPS;
						this.basketData.emptyProps = !!arParams.BASKET.EMPTY_PROPS;
					}
				}
				else
				{
					this.errorCode = -1;
				}
				break;
			case 3://sku
				if (!!arParams.OFFERS && BX.type.isArray(arParams.OFFERS))
				{
					if (!!arParams.PRODUCT && 'object' === typeof(arParams.PRODUCT))
					{
						this.product.name = arParams.PRODUCT.NAME;
						this.product.id = arParams.PRODUCT.ID;
					}
					this.offers = arParams.OFFERS;
					this.offerNum = 0;
					if (!!arParams.OFFER_SELECTED)
					{
						this.offerNum = parseInt(arParams.OFFER_SELECTED, 10);
					}
					if (isNaN(this.offerNum))
					{
						this.offerNum = 0;
					}
					if (!!arParams.TREE_PROPS)
					{
						this.treeProps = arParams.TREE_PROPS;
					}
					if (!!arParams.DEFAULT_PICTURE)
					{
						this.defaultPict.pict = arParams.DEFAULT_PICTURE.PICTURE;
						this.defaultPict.secondPict = arParams.DEFAULT_PICTURE.PICTURE_SECOND;
					}
				}
				else
				{
					this.errorCode = -1;
				}
				break;
			default:
				this.errorCode = -1;
		}
		if (!!arParams.BASKET && 'object' === typeof(arParams.BASKET))
		{
			if (!!arParams.BASKET.QUANTITY)
			{
				this.basketData.quantity = arParams.BASKET.QUANTITY;
			}
			if (!!arParams.BASKET.PROPS)
			{
				this.basketData.props = arParams.BASKET.PROPS;
			}
			if (!!arParams.BASKET.BASKET_URL)
			{
				this.basketData.basketUrl = arParams.BASKET.BASKET_URL;
			}
			if (3 === this.productType)
			{
				if (!!arParams.BASKET.SKU_PROPS)
				{
					this.basketData.sku_props = arParams.BASKET.SKU_PROPS;
				}
			}
			if (!!arParams.BASKET.ADD_URL_TEMPLATE)
			{
				this.basketData.add_url = arParams.BASKET.ADD_URL_TEMPLATE;
			}
			if (!!arParams.BASKET.BUY_URL_TEMPLATE)
			{
				this.basketData.buy_url = arParams.BASKET.BUY_URL_TEMPLATE;
			}
			if (this.basketData.add_url === '' && this.basketData.buy_url === '')
			{
				this.errorCode = -1024;
			}
		}
		if (this.useCompare)
		{
			if (!!arParams.COMPARE && typeof(arParams.COMPARE) === 'object')
			{
				if (!!arParams.COMPARE.COMPARE_PATH)
				{
					this.compareData.comparePath = arParams.COMPARE.COMPARE_PATH;
				}
				if (!!arParams.COMPARE.COMPARE_URL_TEMPLATE_DEL)
				{
					this.compareData.compareUrlDel = arParams.COMPARE.COMPARE_URL_TEMPLATE_DEL;
				}
				if (!!arParams.COMPARE.COMPARE_URL_TEMPLATE)
				{
					this.compareData.compareUrl = arParams.COMPARE.COMPARE_URL_TEMPLATE;
				}
				else
				{
					this.useCompare = false;
				}
			}
			else
			{
				this.useCompare = false;
			}
		}

		this.lastElement = (!!arParams.LAST_ELEMENT && 'Y' === arParams.LAST_ELEMENT);
	}
	if (0 === this.errorCode)
	{
		BX.ready(BX.delegate(this.Init,this));
	}
};

window.JCCatalogSection.prototype.Init = function()
{
	var i = 0,
		strPrefix = '',
		TreeItems = null;

	this.obProduct = BX(this.visual.ID);
	if (!this.obProduct)
	{
		this.errorCode = -1;
	}
	this.obPict = BX(this.visual.PICT_ID);
	if (!this.obPict)
	{
		this.errorCode = -2;
	}
	if (this.secondPict && !!this.visual.SECOND_PICT_ID)
	{
		this.obSecondPict = BX(this.visual.SECOND_PICT_ID);
	}
	this.storeQuanity = BX(this.visual.STORE_QUANTITY);
	this.obPrice = BX(this.visual.PRICE_ID);
	this.obPriceOld = BX(this.visual.PRICE_OLD_ID);
	if (!this.obPrice)
	{
		this.errorCode = -16;
	}
	if (this.showQuantity && !!this.visual.QUANTITY_ID)
	{
		this.obQuantity = BX(this.visual.QUANTITY_ID);
		if (!!this.visual.QUANTITY_UP_ID)
		{
			this.obQuantityUp = BX(this.visual.QUANTITY_UP_ID);
		}
		if (!!this.visual.QUANTITY_DOWN_ID)
		{
			this.obQuantityDown = BX(this.visual.QUANTITY_DOWN_ID);
		}
	}
	if (3 === this.productType)
	{
		if (!!this.visual.TREE_ID)
		{
			this.obTree = BX(this.visual.TREE_ID);
			if (!this.obTree)
			{
				this.errorCode = -256;
			}
			strPrefix = this.visual.TREE_ITEM_ID;
			for (i = 0; i < this.treeProps.length; i++)
			{
				this.obTreeRows[i] = {
					LIST: BX(strPrefix+this.treeProps[i].ID+'_list'),
					CONT: BX(strPrefix+this.treeProps[i].ID+'_cont')
				};
				if (!this.obTreeRows[i].LIST || !this.obTreeRows[i].CONT)
				{
					this.errorCode = -512;
					break;
				}
			}
		}
		if (!!this.visual.QUANTITY_MEASURE)
		{
			this.obMeasure = BX(this.visual.QUANTITY_MEASURE);
		}
	}

	this.obBasketActions = BX(this.visual.BASKET_ACTIONS_ID);
	if (!!this.obBasketActions)
	{
		if (!!this.visual.BUY_ID)
		{
			this.obBuyBtn = BX(this.visual.BUY_ID);
		}
		if (!!this.visual.BASKET_LINK)
		{
			this.obBasketBtn = BX(this.visual.BASKET_LINK);
		}
	}
	this.obNotAvail = BX(this.visual.NOT_AVAILABLE_MESS);

	if (this.showPercent)
	{
		if (!!this.visual.DSC_PERC)
		{
			this.obDscPerc = BX(this.visual.DSC_PERC);
		}
		if (this.secondPict && !!this.visual.SECOND_DSC_PERC)
		{
			this.obSecondDscPerc = BX(this.visual.SECOND_DSC_PERC);
		}
	}

	if (this.showSkuProps)
	{
		if (!!this.visual.DISPLAY_PROP_DIV)
		{
			this.obSkuProps = BX(this.visual.DISPLAY_PROP_DIV);
		}
	}

	if (0 === this.errorCode)
	{
		if (this.showQuantity)
		{
			if (!!this.obQuantityUp)
			{
				BX.bind(this.obQuantityUp, 'click', BX.delegate(this.QuantityUp, this));
			}
			if (!!this.obQuantityDown)
			{
				BX.bind(this.obQuantityDown, 'click', BX.delegate(this.QuantityDown, this));
			}
			if (!!this.obQuantity)
			{
				BX.bind(this.obQuantity, 'change', BX.delegate(this.QuantityChange, this));
			}
		}
		switch (this.productType)
		{
			case 1://product
				break;
			case 3://sku
				for(var key in this.skuVisualParams){
					var TreeItems = BX.findChildren(this.obTree, {tagName: this.skuVisualParams[key].TAG_BIND}, true);
					if (!!TreeItems && 0 < TreeItems.length){
						for (i = 0; i < TreeItems.length; i++){
							$(TreeItems[i]).on(this.skuVisualParams[key].EVENT, BX.delegate(this.SelectOfferProp, this));
							//BX.bind(TreeItems[i], this.skuVisualParams[key].EVENT, BX.delegate(this.SelectOfferProp, this));
						}
					}
				}
				this.SetCurrent();
				break;
		}
		$(this.obProduct).find(".read_more.to-cart").on('click', BX.delegate(this.Add2Basket, this));
		if (!!this.obBuyBtn)
		{
			if (this.basketAction === 'ADD')
			{
				// BX.bind(this.obBuyBtn, 'click', BX.delegate(this.Add2Basket, this));


			}
			else
			{
				BX.bind(this.obBuyBtn, 'click', BX.delegate(this.BuyBasket, this));
			}
		}
		if (this.useCompare){
			this.obCompare = BX(this.visual.COMPARE_LINK_ID);
			//if (!!this.obCompare){
				/*BX.bind(BX.findChild(this.obCompare, {"class": "compare_item to"}), 'click', BX.proxy(this.Compare, this));
				BX.bind(BX.findChild(this.obCompare, {"class": "compare_item in"}), 'click', BX.proxy(this.Compare, this));*/
				//$(this.obProduct).find(".compare_item.to").on('click', BX.proxy(this.Compare, this));
				//$(this.obProduct).find(".compare_item.in").on('click', BX.proxy(this.Compare, this));
			//}
		}
	}
};

window.JCCatalogSection.prototype.checkHeight = function()
{
	this.containerHeight = parseInt(this.obProduct.parentNode.offsetHeight, 10);
	if (isNaN(this.containerHeight)){
		this.containerHeight = 0;
	}
};

window.JCCatalogSection.prototype.setHeight = function()
{
	if (0 < this.containerHeight){
		BX.adjust(this.obProduct.parentNode, {style: { height: this.containerHeight+'px'}});
	}
};

window.JCCatalogSection.prototype.clearHeight = function()
{
	BX.adjust(this.obProduct.parentNode, {style: { height: 'auto'}});
};

window.JCCatalogSection.prototype.QuantityUp = function()
{
	var curValue = 0,
		boolSet = true,
		calcPrice;

	if (0 === this.errorCode && this.showQuantity && this.canBuy)
	{
		curValue = (this.isDblQuantity ? parseFloat(this.obQuantity.value) : parseInt(this.obQuantity.value, 10));
		if (!isNaN(curValue))
		{
			curValue += this.stepQuantity;
			if (this.checkQuantity)
			{
				if (curValue > this.maxQuantity)
				{
					boolSet = false;
				}
			}
			if (boolSet)
			{
				if (this.isDblQuantity)
				{
					curValue = Math.round(curValue*this.precisionFactor)/this.precisionFactor;
				}
				this.obQuantity.value = curValue;
			}
		}
	}
};

window.JCCatalogSection.prototype.QuantityDown = function()
{
	var curValue = 0,
		boolSet = true,
		calcPrice;

	if (0 === this.errorCode && this.showQuantity && this.canBuy)
	{
		curValue = (this.isDblQuantity ? parseFloat(this.obQuantity.value): parseInt(this.obQuantity.value, 10));
		if (!isNaN(curValue))
		{
			curValue -= this.stepQuantity;
			if (curValue < this.stepQuantity)
			{
				boolSet = false;
			}
			if (boolSet)
			{
				if (this.isDblQuantity)
				{
					curValue = Math.round(curValue*this.precisionFactor)/this.precisionFactor;
				}
				this.obQuantity.value = curValue;
			}
		}
	}
};

window.JCCatalogSection.prototype.QuantityChange = function()
{
	var curValue = 0,
		calcPrice,
		intCount,
		count;

	if (0 === this.errorCode && this.showQuantity)
	{
		if (this.canBuy)
		{
			curValue = (this.isDblQuantity ? parseFloat(this.obQuantity.value) : parseInt(this.obQuantity.value, 10));
			if (!isNaN(curValue))
			{
				if (this.checkQuantity)
				{
					if (curValue > this.maxQuantity)
					{
						curValue = this.maxQuantity;
					}
				}
				if (curValue < this.stepQuantity)
				{
					curValue = this.stepQuantity;
				}
				else
				{
					count = curValue/this.stepQuantity;
					intCount = parseInt(count, 10);
					if (isNaN(intCount))
					{
						intCount = 1;
						count = 1.1;
					}
					if (count > intCount)
					{
						curValue = (intCount <= 1 ? this.stepQuantity : intCount*this.stepQuantity);
						curValue = Math.round(curValue*this.precisionFactor)/this.precisionFactor;
					}
				}
				this.obQuantity.value = curValue;
			}
			else
			{
				this.obQuantity.value = this.stepQuantity;
			}
		}
		else
		{
			this.obQuantity.value = this.stepQuantity;
		}
	}
};

window.JCCatalogSection.prototype.QuantitySet = function(index)
{
	if (0 === this.errorCode)
	{
		this.canBuy = this.offers[index].CAN_BUY;
		if (this.canBuy)
		{
			if (!!this.obBasketActions)
			{
				BX.style(this.obBasketActions, 'display', '');
			}
			if (!!this.obNotAvail)
			{
				BX.style(this.obNotAvail, 'display', 'none');
			}
		}
		else
		{
			if (!!this.obBasketActions)
			{
				//BX.style(this.obBasketActions, 'display', 'none');
				BX.style(this.obBasketActions, 'opacity', '0');
				BX.style(BX.findParent(BX(this.obQuantity), { 'class':'counter_block' }), 'display', 'none');
			}
			if (!!this.obNotAvail)
			{
				BX.style(this.obNotAvail, 'display', '');
			}
		}
		if (this.showQuantity)
		{
			this.isDblQuantity = this.offers[index].QUANTITY_FLOAT;
			this.checkQuantity = this.offers[index].CHECK_QUANTITY;
			if (this.isDblQuantity)
			{
				this.maxQuantity = parseFloat(this.offers[index].MAX_QUANTITY);
				this.stepQuantity = Math.round(parseFloat(this.offers[index].STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor;
			}
			else
			{
				this.maxQuantity = parseInt(this.offers[index].MAX_QUANTITY, 10);
				this.stepQuantity = parseInt(this.offers[index].STEP_QUANTITY, 10);
			}
			if(!!this.obQuantity){
				this.obQuantity.value = this.defaultCount;
				this.obQuantity.disabled = !this.canBuy;
			}
			if (!!this.obMeasure)
			{
				if (!!this.offers[index].MEASURE)
				{
					BX.adjust(this.obMeasure, { html : this.offers[index].MEASURE});
				}
				else
				{
					BX.adjust(this.obMeasure, { html : ''});
				}
			}
		}
		this.currentBasisPrice = this.offers[index].BASIS_PRICE;
	}
};

window.JCCatalogSection.prototype.SelectOfferProp = function()
{
	var i = 0,
		value = '',
		strTreeValue = '',
		arTreeItem = [],
		RowItems = null,
		target = BX.proxy_context;
	if(typeof target.options !== 'undefined' && typeof target.options[target.selectedIndex] !== 'undefined')
		target = target.options[target.selectedIndex];

	if (!!target && target.hasAttribute('data-treevalue'))
	{
		strTreeValue = target.getAttribute('data-treevalue');
		propModes = target.getAttribute('data-showtype');
		arTreeItem = strTreeValue.split('_');
		if (this.SearchOfferPropIndex(arTreeItem[0], arTreeItem[1]))
		{
			RowItems = BX.findChildren(target.parentNode, {tagName: this.skuVisualParams[propModes.toUpperCase()].TAG}, false);

			if (!!RowItems && 0 < RowItems.length)
			{
				for (i = 0; i < RowItems.length; i++)
				{
					value = RowItems[i].getAttribute('data-onevalue');

					// for SELECTBOXES
					if(propModes == 'TEXT'){
						if (value === arTreeItem[1]){
							RowItems[i].setAttribute('selected', 'selected');
						}else{
							RowItems[i].removeAttribute('selected');
						}
					}else{
						if (value === arTreeItem[1]){
							$(RowItems[i]).addClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS);
						}else{
							$(RowItems[i]).removeClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS);
						}
					}
				}
			}
		}
	}
};

window.JCCatalogSection.prototype.SearchOfferPropIndex = function(strPropID, strPropValue)
{
	var strName = '',
		arShowValues = false,
		i, j,
		arCanBuyValues = [],
		index = -1,
		arFilter = {},
		tmpFilter = [];

	for (i = 0; i < this.treeProps.length; i++)
	{
		if (this.treeProps[i].ID === strPropID)
		{
			index = i;
			break;
		}
	}

	if (-1 < index)
	{
		for (i = 0; i < index; i++)
		{
			strName = 'PROP_'+this.treeProps[i].ID;
			arFilter[strName] = this.selectedValues[strName];
		}
		strName = 'PROP_'+this.treeProps[index].ID;
		arShowValues = this.GetRowValues(arFilter, strName);
		if (!arShowValues)
		{
			return false;
		}
		if (!BX.util.in_array(strPropValue, arShowValues))
		{
			return false;
		}
		arFilter[strName] = strPropValue;
		for (i = index+1; i < this.treeProps.length; i++)
		{
			strName = 'PROP_'+this.treeProps[i].ID;
			arShowValues = this.GetRowValues(arFilter, strName);
			if (!arShowValues)
			{
				return false;
			}
			if (this.showAbsent)
			{
				arCanBuyValues = [];
				tmpFilter = [];
				tmpFilter = BX.clone(arFilter, true);
				for (j = 0; j < arShowValues.length; j++)
				{
					tmpFilter[strName] = arShowValues[j];
					if (this.GetCanBuy(tmpFilter))
					{
						arCanBuyValues[arCanBuyValues.length] = arShowValues[j];
					}
				}
			}
			else
			{
				arCanBuyValues = arShowValues;
			}
			if (!!this.selectedValues[strName] && BX.util.in_array(this.selectedValues[strName], arCanBuyValues))
			{
				arFilter[strName] = this.selectedValues[strName];
			}
			else
			{
				arFilter[strName] = arCanBuyValues[0];
			}
			this.UpdateRow(i, arFilter[strName], arShowValues, arCanBuyValues);
		}
		this.selectedValues = arFilter;
		this.ChangeInfo();
	}
	return true;
};

window.JCCatalogSection.prototype.UpdateRow = function(intNumber, activeID, showID, canBuyID)
{
	var i = 0,
		showI = 0,
		value = '',
		countShow = 0,
		strNewLen = '',
		obData = {},
		pictMode = false,
		extShowMode = false,
		isCurrent = false,
		selectIndex = 0,
		obLeft = this.treeEnableArrow,
		obRight = this.treeEnableArrow,
		currentShowStart = 0,
		RowItems = null;

	if (-1 < intNumber && intNumber < this.obTreeRows.length){
		propMode = this.treeProps[intNumber].DISPLAY_TYPE;
		RowItems = BX.findChildren(this.obTreeRows[intNumber].LIST, {tagName: this.skuVisualParams[propMode].TAG}, false);
		if (!!RowItems && 0 < RowItems.length){
			selectMode = ('SELECT' === this.treeProps[intNumber].DISPLAY_TYPE);
			countShow = showID.length;
			obData = {
				style: {},
				props: {
					disabled: '',
					selected: '',
				},
			};

			for (i = 0; i < RowItems.length; i++){
				value = RowItems[i].getAttribute('data-onevalue');
				isCurrent = (value === activeID && value !=0);
				if (BX.util.in_array(value, canBuyID)){
					obData.props.className = (isCurrent ? this.skuVisualParams[propMode].ACTIVE_CLASS : '');
				}else{
					obData.props.className = (isCurrent ? this.skuVisualParams[propMode].ACTIVE_CLASS+' '+this.skuVisualParams[propMode].HIDE_CLASS : this.skuVisualParams[propMode].HIDE_CLASS);
				}
				// obData.props.className = (isCurrent ? this.skuVisualParams[propMode].ACTIVE_CLASS : '');

				if(selectMode){
					obData.props.disabled = 'disabled';
					obData.props.selected = (isCurrent ? 'selected' : '');
				}else{
					obData.style.display = 'none';
				}

				if (BX.util.in_array(value, showID)){
					if(selectMode){
						obData.props.disabled = '';
					}else{
						obData.style.display = '';
					}
					if (isCurrent){
						selectIndex = showI;
					}
					showI++;
				}
				BX.adjust(RowItems[i], obData);
			}

			if(selectMode){
				if($(this.obTreeRows[intNumber].LIST).parent().hasClass('ik_select'))
					$(this.obTreeRows[intNumber].LIST).ikSelect('reset');
			}

			this.showCount[intNumber] = countShow;
			this.showStart[intNumber] = currentShowStart;
		}
	}
};

window.JCCatalogSection.prototype.GetRowValues = function(arFilter, index)
{
	var i = 0,
		j,
		arValues = [],
		boolSearch = false,
		boolOneSearch = true;

	if (0 === arFilter.length)
	{
		for (i = 0; i < this.offers.length; i++)
		{
			if (!BX.util.in_array(this.offers[i].TREE[index], arValues))
			{
				arValues[arValues.length] = this.offers[i].TREE[index];
			}
		}
		boolSearch = true;
	}
	else
	{
		for (i = 0; i < this.offers.length; i++)
		{
			boolOneSearch = true;
			for (j in arFilter)
			{
				if (arFilter[j] !== this.offers[i].TREE[j])
				{
					boolOneSearch = false;
					break;
				}
			}
			if (boolOneSearch)
			{
				if (!BX.util.in_array(this.offers[i].TREE[index], arValues))
				{
					arValues[arValues.length] = this.offers[i].TREE[index];
				}
				boolSearch = true;
			}
		}
	}
	return (boolSearch ? arValues : false);
};

window.JCCatalogSection.prototype.GetCanBuy = function(arFilter)
{
	var i = 0,
		j,
		boolSearch = false,
		boolOneSearch = true;

	for (i = 0; i < this.offers.length; i++)
	{
		boolOneSearch = true;
		for (j in arFilter)
		{
			if (arFilter[j] !== this.offers[i].TREE[j])
			{
				boolOneSearch = false;
				break;
			}
		}
		if (boolOneSearch)
		{
			if (this.offers[i].CAN_BUY)
			{
				boolSearch = true;
				break;
			}
		}
	}
	return boolSearch;
};

window.JCCatalogSection.prototype.SetCurrent = function()
{
	var i = 0,
		j = 0,
		arCanBuyValues = [],
		strName = '',
		arShowValues = false,
		arFilter = {},
		tmpFilter = [],
		current = this.offers[this.offerNum].TREE;
	for (i = 0; i < this.treeProps.length; i++)
	{
		strName = 'PROP_'+this.treeProps[i].ID;
		arShowValues = this.GetRowValues(arFilter, strName);
		if (!arShowValues)
		{
			break;
		}
		if (BX.util.in_array(current[strName], arShowValues))
		{
			arFilter[strName] = current[strName];
		}
		else
		{
			arFilter[strName] = arShowValues[0];
			this.offerNum = 0;
		}
		if (this.showAbsent)
		{
			arCanBuyValues = [];
			tmpFilter = [];
			tmpFilter = BX.clone(arFilter, true);
			for (j = 0; j < arShowValues.length; j++)
			{
				tmpFilter[strName] = arShowValues[j];
				if (this.GetCanBuy(tmpFilter))
				{
					arCanBuyValues[arCanBuyValues.length] = arShowValues[j];
				}
			}
		}
		else
		{
			arCanBuyValues = arShowValues;
		}
		this.UpdateRow(i, arFilter[strName], arShowValues, arCanBuyValues);
	}
	this.selectedValues = arFilter;
	this.ChangeInfo();
};

window.JCCatalogSection.prototype.ChangeInfo = function()
{
	var i = 0,
		j,
		index = -1,
		compareParams,
		boolOneSearch = true;

	for (i = 0; i < this.offers.length; i++)
	{
		boolOneSearch = true;
		for (j in this.selectedValues)
		{
			if (this.selectedValues[j] !== this.offers[i].TREE[j])
			{
				boolOneSearch = false;
				break;
			}
		}
		if (boolOneSearch)
		{
			index = i;
			break;
		}
	}
	if (-1 < index){
		if (!!this.obPict){
			var obData = {
				attrs: {}
			};

			if (!!this.offers[index].PREVIEW_PICTURE){
				obData.attrs.src = this.offers[index].PREVIEW_PICTURE.SRC;
			}else{
				obData.attrs.src = this.defaultPict.pict.SRC;
			}
			BX.adjust(BX.findChild(this.obPict, {"tag": "img"}), obData);
		}
		if (this.secondPict && !!this.obSecondPict)
		{
			if (!!this.offers[index].PREVIEW_PICTURE_SECOND)
			{
				BX.adjust(this.obSecondPict, {style: {backgroundImage: 'url('+this.offers[index].PREVIEW_PICTURE_SECOND.SRC+')'}});
			}
			else if (!!this.offers[index].PREVIEW_PICTURE.SRC)
			{
				BX.adjust(this.obSecondPict, {style: {backgroundImage: 'url('+this.offers[index].PREVIEW_PICTURE.SRC+')'}});
			}
			else if (!!this.defaultPict.secondPict)
			{
				BX.adjust(this.obSecondPict, {style: {backgroundImage: 'url('+this.defaultPict.secondPict.SRC+')'}});
			}
			else
			{
				BX.adjust(this.obSecondPict, {style: {backgroundImage: 'url('+this.defaultPict.pict.SRC+')'}});
			}
		}
		if (this.showSkuProps && !!this.obSkuProps)
		{
			if (0 === this.offers[index].DISPLAY_PROPERTIES.length)
			{
				BX.adjust(this.obSkuProps, {style: {display: 'none'}, html: ''});
			}
			else
			{
				BX.adjust(this.obSkuProps, {style: {display: ''}, html: this.offers[index].DISPLAY_PROPERTIES});
			}
		}


		$(this.obBuyBtn).data("item", this.offers[index].ID);
		$(this.obBasketBtn).data("item", this.offers[index].ID);

		$(this.obBasketActions).closest('.counter_wrapp').css('opacity', 0);

		var measure = this.offers[index].MEASURE && this.offers[index].SHOW_MEASURE=="Y" ? this.offers[index].MEASURE : '';
		this.setPrice(this.offers[index].PRICE, measure);
		this.setQuantityStore(this.offers[index].MAX_QUANTITY, this.offers[index].AVAILIABLE.TEXT);
		this.offerNum = index;
		this.QuantitySet(this.offerNum);

		$(this.obProduct).find('.item-title a').attr('href', this.offers[this.offerNum].URL);
		$(this.obProduct).find('.image_wrapper_block > a').attr('href', this.offers[this.offerNum].URL);


		/*quantity discount start*/
		if($(this.obProduct).find('.quantity_block .values').length){
			$(this.obProduct).find('.quantity_block .values .item span.value').text(this.offers[index].MAX_QUANTITY).css({'opacity':'1'});
		}
		/*quantity discount end*/

		var obj=this.offers[index],
			th=$(this.obProduct);

		/*set article start*/
		this.setArticle(th.find('.article_block'), obj);
		/*set article end*/

		if(typeof arBasketAspro !=="undefined"){
			this.setActualDataBlock(th, obj);
		}else{
			if(typeof window.frameCacheVars !== "undefined"){
				BX.addCustomEvent("onFrameDataReceived", function(){
					window.JCCatalogSection.prototype.setActualDataBlock(th, obj);
				});
			}
		}
	}
};

/*set article start*/
window.JCCatalogSection.prototype.setArticle = function(th, obj)
{
	if(obj.ARTICLE)
		th.html(obj.ARTICLE);
}
/*set article end*/

/*set blocks start*/
window.JCCatalogSection.prototype.setActualDataBlock = function(th, obj)
{
	/*like block start*/
	this.setLikeBlock(th, '.like_icons .wish_item_button', obj, 'DELAY');
	this.setLikeBlock(th, '.like_icons .compare_item_button',obj, 'COMPARE');
	/*like block end*/

	/*buy block start*/
	this.setBuyBlock(th, obj);
	/*buy block end*/
}
/*set blocks end*/

/*set compare/wish*/
window.JCCatalogSection.prototype.setLikeBlock = function(th, className, obj, type)
{
	var block=th;
	if(type=="DELAY"){
		if(obj.CAN_BUY){
			block.find(className).css('display','inline-block');
		}else{
			block.find(className).hide();
		}
	}
	block.find(className).attr('data-item', obj.ID);
	block.find(className).find('span').attr('data-item', obj.ID);
	if(arBasketAspro[type]){
		block.find(className).find('.to').removeClass('added').css('display','block');
		block.find(className).find('.in').hide();

		if(arBasketAspro[type][obj.ID]!==undefined){
			block.find(className).find('.to').hide();
			block.find(className).find('.in').addClass('added').css('display','block');
		}
	}
}

/*set buy*/
window.JCCatalogSection.prototype.setBuyBlock = function(th, obj)
{
	var buyBlock=th.find('.offer_buy_block');

	if(buyBlock.find('.counter_wrapp .counter_block').length){
		buyBlock.find('.counter_wrapp .counter_block').attr('data-item', obj.ID);
	}
	if((obj.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL && obj.CONFIG.ACTION == "ADD") && obj.CAN_BUY){
		var max=(obj.CONFIG.MAX_QUANTITY_BUY>0 ? "data-max='"+obj.CONFIG.MAX_QUANTITY_BUY+"'" : ""),
			counterHtml='<span class="minus">-</span>'+
				'<input type="text" class="text" name="'+obj.PRODUCT_QUANTITY_VARIABLE+'" value="'+obj.CONFIG.MIN_QUANTITY_BUY+'" />'+
				'<span class="plus" '+max+'>+</span>';
		if(arBasketAspro["BASKET"] && arBasketAspro["BASKET"][obj.ID]!==undefined){
			if(buyBlock.find('.counter_wrapp .counter_block').length){
				buyBlock.find('.counter_wrapp .counter_block').hide();
			}else{
				buyBlock.find('.counter_wrapp').prepend('<div class="counter_block" data-item="'+obj.ID+'"></div>');
				buyBlock.find('.counter_wrapp .counter_block').html(counterHtml).hide();
			}
		}else{
			if(buyBlock.find('.counter_wrapp .counter_block').length){
				buyBlock.find('.counter_wrapp .counter_block').html(counterHtml).show();
			}else{
				buyBlock.find('.counter_wrapp').prepend('<div class="counter_block" data-item="'+obj.ID+'"></div>');
				buyBlock.find('.counter_wrapp .counter_block').html(counterHtml);
			}
		}
	}else{
		if(buyBlock.find('.counter_wrapp .counter_block').length){
			buyBlock.find('.counter_wrapp .counter_block').hide();
		}
	}
	var className=((obj.CONFIG.ACTION == "ORDER") || !obj.CAN_BUY || !obj.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL || (obj.CONFIG.ACTION == "SUBSCRIBE" && obj.CATALOG_SUBSCRIBE == "Y") ? "wide" : "" ),
		buyBlockBtn=$('<div class="button_block"></div>');

	if(buyBlock.find('.counter_wrapp').find('.button_block').length){
		if(arBasketAspro["BASKET"] && arBasketAspro["BASKET"][obj.ID]!==undefined){
			buyBlock.find('.counter_wrapp').find('.button_block').addClass('wide').html(obj.HTML);
			markProductAddBasket(obj.ID);
		}else{
			if(className){
				buyBlock.find('.counter_wrapp').find('.button_block').addClass('wide').html(obj.HTML);
				if(arBasketAspro["SUBSCRIBE"] && arBasketAspro["SUBSCRIBE"][obj.ID]!==undefined){
					markProductSubscribe(obj.ID);
				}
			}else{
				buyBlock.find('.counter_wrapp').find('.button_block').removeClass('wide').html(obj.HTML);
			}
		}
	}else{
		buyBlock.find('.counter_wrapp').append('<div class="button_block '+className+'">'+obj.HTML+'</div>');
		if(arBasketAspro["BASKET"] && arBasketAspro["BASKET"][obj.ID]!==undefined)
			markProductAddBasket(obj.ID);
		if(arBasketAspro["SUBSCRIBE"] && arBasketAspro["SUBSCRIBE"][obj.ID]!==undefined)
			markProductSubscribe(obj.ID);
	}

	if(obj.CONFIG.ACTION !== "NOTHING"){
		if(obj.CONFIG.ACTION == "ADD" && obj.CAN_BUY && obj.SHOW_ONE_CLICK_BUY!="N"){
			var ocb='<span class="transparent big_btn type_block button one_click" data-offers="Y" data-item="'+obj.ID+'" data-iblockID="'+obj.IBLOCK_ID+'" data-quantity="'+obj.CONFIG.MIN_QUANTITY_BUY+'" data-props="'+obj.OFFER_PROPS+'" onclick="oneClickBuy('+obj.ID+', '+obj.IBLOCK_ID+', this)">'+
				'<span>'+obj.ONE_CLICK_BUY+'</span>'+
				'</span>';
			if(buyBlock.find('.wrapp_one_click').length){
				buyBlock.find('.wrapp_one_click').html(ocb);
			}else{
				buyBlock.append('<div class="wrapp_one_click">'+ocb+'</div>');
			}
		}else{
			if(buyBlock.find('.wrapp_one_click').length){
				buyBlock.find('.wrapp_one_click').remove();
			}
		}
	}else{
		if(buyBlock.find('.wrapp_one_click').length){
			buyBlock.find('.wrapp_one_click').remove();
		}
	}

	buyBlock.fadeIn();
}

/*get compare sku*/
window.JCCatalogSection.prototype.CompareCountResult = function(result)
{
	if(result.COMPARE_COUNT){
		for(var i in result.ITEMS){
			if(result.ITEMS[i]==this.offers[this.offerNum].ID){
				this.offers[this.offerNum].COMPARE_ACTIVE=true;
				break;
			}else{
				this.offers[this.offerNum].COMPARE_ACTIVE=false;
			}
		}
		if(this.offers[this.offerNum].COMPARE_ACTIVE){
			$(this.obCompare).find('.compare_item.to').hide();
			$(this.obCompare).find('.compare_item.added').show();
		}else{
			$(this.obCompare).find('.compare_item.added').hide();
			$(this.obCompare).find('.compare_item.to').show();
		}
	}
}

/*get item info*/
window.JCCatalogSection.prototype.ItemInfoResult = function(result)
{
	if(result.HTML){
		$(this.obBasketActions).html(result.HTML);
		$(this.obBasketActions).show();
		this.obBuyBtn = BX(this.visual.BUY_ID);
		this.obBasketBtn = BX(this.visual.BASKET_LINK);
		this.obSubscribeBtn = BX(this.visual.SUBSCRIBE_ID);
		this.obSubscribedBtn = BX(this.visual.SUBSCRIBED_ID);
		BX.bind(this.obBuyBtn, 'click', BX.delegate(this.Add2Basket, this));
		$(this.obBasketActions).removeClass('wide');
		this.ajax_type_item=result.BUYMISSINGGOODS;
		if(result.BUYMISSINGGOODS!="ADD" && !this.canBuy){
			$(this.obBasketActions).addClass('wide');
		}else{
			$(this.obQuantity).css('display','');
		}
	}
	//if(this.canBuy){
		basketParams = {
			ajax_action: 'Y'
		};
		BX.ajax.loadJSON(
			arOptimusOptions['SITE_DIR']+'ajax/get_basket_count.php',
			basketParams,
			BX.delegate(this.BasketCountResult, this)
		);
	//}
}

/*get basket items*/
window.JCCatalogSection.prototype.BasketCountResult = function(result)
{
	//if(result.TOTAL_COUNT){
		for(var i in result.ITEMS){
			if(result.ITEMS[i].PRODUCT_ID==this.offers[this.offerNum].ID){
				this.offers[this.offerNum].BASKET_ACTIVE=true;
				break;
			}else{
				this.offers[this.offerNum].BASKET_ACTIVE=false;
			}
		}
		for(var i in result.SUBSCRIBE_ITEMS){
			if(result.SUBSCRIBE_ITEMS[i].PRODUCT_ID==this.offers[this.offerNum].ID){
				this.offers[this.offerNum].SUBSCRIBE_ACTIVE=true;
				break;
			}else{
				this.offers[this.offerNum].SUBSCRIBE_ACTIVE=false;
			}
		}

		this.BasketStateRefresh();
	//}
}

window.JCCatalogSection.prototype.BasketStateRefresh = function(buy_basket)
{
	/*if(this.offers[this.offerNum].SUBSCRIBE_ACTIVE){
		$(this.obBasketActions).addClass('wide');
		$(this.obSubscribeBtn).hide();
		$(this.obSubscribedBtn).show();
	}else{
		$(this.obBasketActions).addClass('wide');
		$(this.obSubscribedBtn).hide();
		$(this.obSubscribeBtn).show();
	}
	if(this.offers[this.offerNum].BASKET_ACTIVE){
		$(this.obBuyBtn).hide();
		$(this.obBasketBtn).show();
		$(this.obQuantity).closest('.counter_wrapp').find('.counter_block').hide();
		$(this.obBasketActions).addClass('wide');
	}else{
		$(this.obBasketActions).removeClass('wide');
		$(this.obBasketBtn).hide();
		$(this.obBuyBtn).show();
		if(this.ajax_type_item=="ADD" || this.canBuy)
			$(this.obQuantity).closest('.counter_wrapp').find('.counter_block').show();

	}
	if(!this.canBuy){
		$(this.obBasketActions).addClass('wide');
	}*/
	if(this.offers[this.offerNum].SUBSCRIBE_ACTIVE){
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .to-subscribe').hide();
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .in-subscribe').show();
	}else{
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .to-subscribe').show();
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .in-subscribe').hide();
	}
	if(this.offers[this.offerNum].BASKET_ACTIVE){
		$(this.obProduct).find('.information_wrapp .o_'+this.offers[this.offerNum].ID).addClass('wide');
		$(this.obProduct).find('.information_wrapp .o_'+this.offers[this.offerNum].ID+' .button_block').addClass('wide');
		$(this.obProduct).find('.information_wrapp .o_'+this.offers[this.offerNum].ID+' .to-cart').hide();
		$(this.obProduct).find('.information_wrapp .o_'+this.offers[this.offerNum].ID+' .in-cart').show();
		$(this.obProduct).find('.information_wrapp .o_'+this.offers[this.offerNum].ID+' .counter_block').hide();
	}else{
		$(this.obProduct).find('.information_wrapp .o_'+this.offers[this.offerNum].ID).removeClass('wide');
		$(this.obProduct).find('.information_wrapp .o_'+this.offers[this.offerNum].ID+' .button_block').removeClass('wide');
		$(this.obProduct).find('.information_wrapp .o_'+this.offers[this.offerNum].ID+' .to-cart').show();
		$(this.obProduct).find('.information_wrapp .o_'+this.offers[this.offerNum].ID+' .in-cart').hide();
		$(this.obProduct).find('.information_wrapp .o_'+this.offers[this.offerNum].ID+' .counter_block').show();

	}
	BX.style(this.obBasketActions, 'opacity', '1');
	$(this.obBasketActions).closest('.counter_wrapp').css('opacity', 1);
	if(buy_basket!== 'undefined' && buy_basket=="Y"){
		if($("#basket_line .basket_fly").length && $(window).outerWidth()>768)
		{
			// preAnimateBasketFly($("#basket_line .basket_fly"), 200, 333);
			basketFly('open');
		}
		else if($("#basket_line .cart").length)
		{
			if($("#basket_line .cart").is(".empty_cart"))
			{
				$("#basket_line .cart").removeClass("empty_cart").find(".cart_wrapp a.basket_link").removeAttr("href").addClass("cart-call");
				touchBasket('.cart:not(.empty_cart) .basket_block .link');
			}
			reloadTopBasket('add', $('#basket_line'), 200, 2000, 'Y');
			/*if($(window).outerWidth() > 520){
				//if(arOptimusOptions['THEME']['SHOW_BASKET_ONADDTOCART'] !== 'N'){
					preAnimateBasketPopup('', $('.card_popup_frame'), 0, 200);
				//}
			};*/
		}
		animateBasketLine(200);
	}
}

window.JCCatalogSection.prototype.setPrice = function(price, measure)
{
	var strPrice,
		obData;

	if (!!this.obPrice){
		strPrice = BX.Currency.currencyFormat(price.DISCOUNT_VALUE, price.CURRENCY, true);
		if(measure){
			strPrice=(strPrice ? strPrice +'/'+measure : "&nbsp;");
		}
		BX.adjust(this.obPrice, {html: strPrice});
		if (price.DISCOUNT_VALUE !== price.VALUE && this.showOldPrice)
		{
			$(this.obPriceOld).find('strike').show().html(BX.Currency.currencyFormat(price.VALUE, price.CURRENCY, true));
			if(this.showPercent){
				$(this.obPriceOld).closest('.cost').find('.sale_block').show();
				$(this.obPriceOld).closest('.cost').find('.value').html(price.DISCOUNT_DIFF_PERCENT_RAW);
				$(this.obPriceOld).closest('.cost').find('.text span').html(BX.Currency.currencyFormat(price.DISCOUNT_DIFF, price.CURRENCY, true));
			}
		}
		else{
			$(this.obPriceOld).find('strike').hide().html('');
			if(this.showPercent){
				$(this.obPriceOld).closest('.cost').find('.sale_block').hide();
			}
		}
	}
};

/*set store quantity*/
window.JCCatalogSection.prototype.setQuantityStore = function(quantity, text)
{
	if(parseFloat(quantity)>0){
		$(this.storeQuanity).find('.icon').removeClass('order').addClass('stock');
		//$(this.storeQuanity).find('.icon + span').html(BX.message('QUANTITY_AVAILIABLE')+' ('+quantity+')');
	}else{
		$(this.storeQuanity).find('.icon').removeClass('stock').addClass('order');
		//$(this.storeQuanity).find('.icon + span').html(BX.message('QUANTITY_NOT_AVAILIABLE'));
	}
	$(this.storeQuanity).find('.icon + span').html(text);
}

window.JCCatalogSection.prototype.Compare = function()
{
	var compareParams, compareLink;
	$(this.obProduct).find('.like_icons .o_'+this.offers[this.offerNum].ID).data('changed','Y');
	// if($(this.obCompare).find('.compare_item.added').is(':visible')){
	if($(this.obProduct).find('.like_icons .o_'+this.offers[this.offerNum].ID).find('.compare_item.added').is(':visible')){
		compareLink = this.compareData.compareUrlDel;
		this.compareData.Added = false;
	}else{
		compareLink = this.compareData.compareUrl;
		this.compareData.Added = true;
	}
	if (!!compareLink){
		switch (this.productType){
			case 1://product
			case 2://set
				compareLink = compareLink.replace('#ID#', this.product.id.toString());
				break;
			case 3://sku
				compareLink = compareLink.replace('#ID#', this.offers[this.offerNum].ID);
				break;
		}
		compareParams = {
			ajax_action: 'Y'
		};
		BX.ajax.loadJSON(
			compareLink,
			compareParams,
			BX.proxy(this.CompareResult, this)
		);
	}
};

window.JCCatalogSection.prototype.CompareResult = function(result)
{
	var popupContent, popupButtons, popupTitle;

	if (typeof result !== 'object'){
		return false;
	}

	if (result.STATUS === 'OK'){
		BX.onCustomEvent('OnCompareChange');
		/*if(!this.compareData.Added){
			$(this.obCompare).find('.in').hide();
			$(this.obCompare).find('.to').show();
		}
		else{
			$(this.obCompare).find('.to').hide();
			$(this.obCompare).find('.in').show();
		}*/
		if(!this.compareData.Added){
			$(this.obProduct).find('.like_icons .o_'+this.offers[this.offerNum].ID).find('.in').hide();
			$(this.obProduct).find('.like_icons .o_'+this.offers[this.offerNum].ID).find('.to').show();
		}
		else{
			$(this.obProduct).find('.like_icons .o_'+this.offers[this.offerNum].ID).find('.to').hide();
			$(this.obProduct).find('.like_icons .o_'+this.offers[this.offerNum].ID).find('.in').show();
		}
		jsAjaxUtil.InsertDataToNode(arOptimusOptions['SITE_DIR'] + 'ajax/show_compare_preview_top.php', 'compare_line', false);
	}else{
		console.log(BX.message('ADD_ERROR_COMPARE'));
	}
	return false;
};

window.JCCatalogSection.prototype.CompareRedirect = function()
{
	if (!!this.compareData.comparePath){
		location.href = this.compareData.comparePath;
	}else{
		this.obPopupWin.close();
	}
};

window.JCCatalogSection.prototype.InitBasketUrl = function()
{
	this.basketUrl = (this.basketMode === 'ADD' ? this.basketData.add_url : this.basketData.buy_url);
	switch (this.productType)
	{
		case 1://product
		case 2://set
			this.basketUrl = this.basketUrl.replace('#ID#', this.product.id.toString());
			break;
		case 3://sku
			this.basketUrl = this.basketUrl.replace('#ID#', this.offers[this.offerNum].ID);
			break;
	}
	this.basketParams = {
		'ajax_basket': 'Y'
	};
	if (this.showQuantity)
	{
		// this.basketParams[this.basketData.quantity] = this.obQuantity.value;
		this.basketParams[this.basketData.quantity] = $(this.obProduct).find('.counter_wrapp.o_'+this.offers[this.offerNum].ID).find('.counter_block .text').val();
	}
	if (!!this.basketData.sku_props)
	{
		this.basketParams[this.basketData.sku_props_var] = this.basketData.sku_props;
	}
};

window.JCCatalogSection.prototype.FillBasketProps = function()
{
	if (!this.visual.BASKET_PROP_DIV)
	{
		return;
	}
	var
		i = 0,
		propCollection = null,
		foundValues = false,
		obBasketProps = null;

	if (this.basketData.useProps && !this.basketData.emptyProps)
	{
		if (!!this.obPopupWin && !!this.obPopupWin.contentContainer)
		{
			obBasketProps = this.obPopupWin.contentContainer;
		}
	}
	else
	{
		obBasketProps = BX(this.visual.BASKET_PROP_DIV);
	}
	if (!!obBasketProps)
	{
		propCollection = obBasketProps.getElementsByTagName('select');
		if (!!propCollection && !!propCollection.length)
		{
			for (i = 0; i < propCollection.length; i++)
			{
				if (!propCollection[i].disabled)
				{
					switch(propCollection[i].type.toLowerCase())
					{
						case 'select-one':
							this.basketParams[propCollection[i].name] = propCollection[i].value;
							foundValues = true;
							break;
						default:
							break;
					}
				}
			}
		}
		propCollection = obBasketProps.getElementsByTagName('input');
		if (!!propCollection && !!propCollection.length)
		{
			for (i = 0; i < propCollection.length; i++)
			{
				if (!propCollection[i].disabled)
				{
					switch(propCollection[i].type.toLowerCase())
					{
						case 'hidden':
							this.basketParams[propCollection[i].name] = propCollection[i].value;
							foundValues = true;
							break;
						case 'radio':
							if (propCollection[i].checked)
							{
								this.basketParams[propCollection[i].name] = propCollection[i].value;
								foundValues = true;
							}
							break;
						default:
							break;
					}
				}
			}
		}
	}
	if (!foundValues)
	{
		this.basketParams[this.basketData.props] = [];
		this.basketParams[this.basketData.props][0] = 0;
	}
};

window.JCCatalogSection.prototype.Add2Basket = function()
{
	this.basketMode = 'ADD';
	this.Basket();
};

window.JCCatalogSection.prototype.BuyBasket = function()
{
	this.basketMode = 'BUY';
	this.Basket();
};

window.JCCatalogSection.prototype.SendToBasket = function()
{
	if (!this.canBuy){
		return;
	}

	this.InitBasketUrl();
	this.FillBasketProps();

	BX.ajax.loadJSON(
		this.basketUrl,
		this.basketParams,
		BX.delegate(this.BasketResult, this)
	);
};

window.JCCatalogSection.prototype.Basket = function()
{
	var contentBasketProps = '';
	if (!this.canBuy){
		return;
	}

	this.SendToBasket();
};

window.JCCatalogSection.prototype.BasketResult = function(arResult)
{
	var strContent = '',
		strPict = '',
		successful,
		buttons = [];

	if (!!this.obPopupWin){
		this.obPopupWin.close();
	}
	if ('object' !== typeof arResult){
		return false;
	}
	successful = (arResult.STATUS === 'OK');
	if (successful && this.basketAction === 'BUY'){
		this.BasketRedirect();
	}else{
		if (successful){
			BX.onCustomEvent('OnBasketChange');
			this.offers[this.offerNum].BASKET_ACTIVE=true;
			this.BasketStateRefresh("Y");
			$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID).data('changed','Y');

		}else{
			console.log(BX.message('ADD_ERROR_BASKET'));
		}
	}
};

window.JCCatalogSection.prototype.BasketRedirect = function()
{
	location.href = (!!this.basketData.basketUrl ? this.basketData.basketUrl : BX.message('BASKET_URL'));
};

})(window);148  23185|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/catalog.section/catalog_list/template.php|1e5c4495<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();?>
<?$this->setFrameMode(true);?>
<?if( count( $arResult["ITEMS"] ) >= 1 ){?>
	<?if($arParams["AJAX_REQUEST"]=="N"){?>
		<div class="display_list <?=($arParams["SHOW_UNABLE_SKU_PROPS"] != "N" ? "show_un_props" : "unshow_un_props");?>">
	<?}?>
		<?
		$currencyList = '';
		if (!empty($arResult['CURRENCIES'])){
			$templateLibrary[] = 'currency';
			$currencyList = CUtil::PhpToJSObject($arResult['CURRENCIES'], false, true, true);
		}
		$templateData = array(
			'TEMPLATE_LIBRARY' => $templateLibrary,
			'CURRENCIES' => $currencyList
		);
		unset($currencyList, $templateLibrary);

		$arParams["BASKET_ITEMS"] = ($arParams["BASKET_ITEMS"] ? $arParams["BASKET_ITEMS"] : array());

		$arOfferProps = implode(';', $arParams['OFFERS_CART_PROPERTIES']);
		?>
		<?foreach($arResult["ITEMS"] as $arItem){?>

			<?$this->AddEditAction($arItem['ID'], $arItem['EDIT_LINK'], CIBlock::GetArrayByID($arParams["IBLOCK_ID"], "ELEMENT_EDIT"));
			$this->AddDeleteAction($arItem['ID'], $arItem['DELETE_LINK'], CIBlock::GetArrayByID($arParams["IBLOCK_ID"], "ELEMENT_DELETE"), array("CONFIRM" => GetMessage('CT_BCS_ELEMENT_DELETE_CONFIRM')));

			$arItem["strMainID"] = $this->GetEditAreaId($arItem['ID']);
			$arItemIDs=COptimus::GetItemsIDs($arItem);

			$totalCount = COptimus::GetTotalCount($arItem);
			$arQuantityData = COptimus::GetQuantityArray($totalCount, $arItemIDs["ALL_ITEM_IDS"]);

			$item_id = $arItem["ID"];
			$strMeasure = '';
			if(!$arItem["OFFERS"] || $arParams['TYPE_SKU'] !== 'TYPE_1'){
				if($arParams["SHOW_MEASURE"] == "Y" && $arItem["CATALOG_MEASURE"]){
					$arMeasure = CCatalogMeasure::getList(array(), array("ID" => $arItem["CATALOG_MEASURE"]), false, false, array())->GetNext();
					$strMeasure = $arMeasure["SYMBOL_RUS"];
				}
			}
			elseif($arItem["OFFERS"]){
				$strMeasure = $arItem["MIN_PRICE"]["CATALOG_MEASURE_NAME"];
			}
			?>
			<div class="list_item_wrapp item_wrap item">
				<table class="list_item" id="<?=$arItemIDs["strMainID"];?>" cellspacing="0" cellpadding="0" border="0" width="100%">
					<tr class="adaptive_name">
						<td colspan="2">
							<div class="desc_name"><a href="<?=$arItem["DETAIL_PAGE_URL"]?>"><span><?=$arItem["NAME"]?></span></a></div>
						</td>
					</tr>
					<tr>
					<td class="image_block">
						<div class="image_wrapper_block">
							<div class="stickers">
								<?if (is_array($arItem["PROPERTIES"]["HIT"]["VALUE_XML_ID"])):?>
									<?foreach($arItem["PROPERTIES"]["HIT"]["VALUE_XML_ID"] as $key=>$class){?>
										<div><div class="sticker_<?=strtolower($class);?>"><?=$arItem["PROPERTIES"]["HIT"]["VALUE"][$key]?></div></div>
									<?}?>
								<?endif;?>
								<?if($arParams["SALE_STIKER"] && $arItem["PROPERTIES"][$arParams["SALE_STIKER"]]["VALUE"]){?>
									<div><div class="sticker_sale_text"><?=$arItem["PROPERTIES"][$arParams["SALE_STIKER"]]["VALUE"];?></div></div>
								<?}?>
							</div>
							<a href="<?=$arItem["DETAIL_PAGE_URL"]?>" class="thumb" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PICT']; ?>">
								<?
								$a_alt=($arItem["PREVIEW_PICTURE"]["DESCRIPTION"] ? $arItem["PREVIEW_PICTURE"]["DESCRIPTION"] : ($arItem["IPROPERTY_VALUES"]["ELEMENT_PREVIEW_PICTURE_FILE_ALT"] ? $arItem["IPROPERTY_VALUES"]["ELEMENT_PREVIEW_PICTURE_FILE_ALT"] : $arItem["NAME"] ));
								$a_title=($arItem["PREVIEW_PICTURE"]["DESCRIPTION"] ? $arItem["PREVIEW_PICTURE"]["DESCRIPTION"] : ($arItem["IPROPERTY_VALUES"]["ELEMENT_PREVIEW_PICTURE_FILE_TITLE"] ? $arItem["IPROPERTY_VALUES"]["ELEMENT_PREVIEW_PICTURE_FILE_TITLE"] : $arItem["NAME"] ));
								?>
								<?if( !empty($arItem["PREVIEW_PICTURE"]) ):?>
									<img src="<?=$arItem["PREVIEW_PICTURE"]["SRC"]?>" alt="<?=$a_alt;?>" title="<?=$a_title;?>" />
								<?elseif( !empty($arItem["DETAIL_PICTURE"])):?>
									<?$img = CFile::ResizeImageGet($arItem["DETAIL_PICTURE"], array( "width" => 170, "height" => 170 ), BX_RESIZE_IMAGE_PROPORTIONAL,true );?>
									<img src="<?=$img["src"]?>" alt="<?=$a_alt;?>" title="<?=$a_title;?>" />
								<?else:?>
									<img src="<?=SITE_TEMPLATE_PATH?>/images/no_photo_medium.png" alt="<?=$a_alt;?>" title="<?=$a_title;?>" />
								<?endif;?>
							</a>
						</div>
					</td>

					<td class="description_wrapp">
						<div class="description">
							<div class="item-title">
								<a href="<?=$arItem["DETAIL_PAGE_URL"]?>"><span><?=$arItem["NAME"]?></span></a>
							</div>
							<div class="wrapp_stockers">
								<?if($arParams["SHOW_RATING"] == "Y"):?>
									<div class="rating">
										<?$APPLICATION->IncludeComponent(
										   "bitrix:iblock.vote",
										   "element_rating_front",
										   Array(
											  "IBLOCK_TYPE" => $arParams["IBLOCK_TYPE"],
											  "IBLOCK_ID" => $arItem["IBLOCK_ID"],
											  "ELEMENT_ID" =>$arItem["ID"],
											  "MAX_VOTE" => 5,
											  "VOTE_NAMES" => array(),
											  "CACHE_TYPE" => $arParams["CACHE_TYPE"],
											  "CACHE_TIME" => $arParams["CACHE_TIME"],
											  "DISPLAY_AS_RATING" => 'vote_avg'
										   ),
										   $component, array("HIDE_ICONS" =>"Y")
										);?>
									</div>
								<?endif;?>
								<?=$arQuantityData["HTML"];?>
								<div class="article_block">
									<?if(isset($arItem['ARTICLE']) && $arItem['ARTICLE']['VALUE']){?>
										<?=$arItem['ARTICLE']['NAME'];?>: <?=$arItem['ARTICLE']['VALUE'];?>
									<?}?>
								</div>
							</div>
							<?if ($arItem["PREVIEW_TEXT"]):?> <div class="preview_text"><?=$arItem["PREVIEW_TEXT"]?></div> <?endif;?>
							<?$boolShowOfferProps = ($arItem['OFFERS_PROPS_DISPLAY']);
							$boolShowProductProps = (isset($arItem['DISPLAY_PROPERTIES']) && !empty($arItem['DISPLAY_PROPERTIES']));?>
							<?if($boolShowProductProps || $boolShowOfferProps):?>
								<div class="props_list_wrapp">
									<table class="props_list prod">
										<?if ($boolShowProductProps){
											foreach( $arItem["DISPLAY_PROPERTIES"] as $arProp ){?>
												<?if( !empty( $arProp["VALUE"] ) ){?>
													<tr>
														<td><span><?=$arProp["NAME"]?></span></td>
														<td>
															<span>
															<?
															if(count($arProp["DISPLAY_VALUE"])>1) { foreach($arProp["DISPLAY_VALUE"] as $key => $value) { if ($arProp["DISPLAY_VALUE"][$key+1]) {echo $value.", ";} else {echo $value;} }}
															else { echo $arProp["DISPLAY_VALUE"]; }
															?>
															</span>
														</td>
													</tr>
												<?}?>
											<?}
										}?>
									</table>
									<?if ($boolShowOfferProps){?>
										<table class="props_list offers" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['DISPLAY_PROP_DIV']; ?>" style="display: none;"></table>
									<?}?>
								</div>
								<div class="show_props dark_link">
									<span class="icons_fa char_title"><span><?=GetMessage('PROPERTIES')?></span></span>
								</div>
							<?endif;?>
						</div>
						<?if((!$arItem["OFFERS"] && $arParams["DISPLAY_WISH_BUTTONS"] != "N" ) || ($arParams["DISPLAY_COMPARE"] == "Y")):?>
							<div class="like_icons">
								<?if($arParams["DISPLAY_WISH_BUTTONS"] != "N"):?>
									<?if(!$arItem["OFFERS"]):?>
										<div class="wish_item_button">
											<span class="wish_item to" data-item="<?=$arItem["ID"]?>" data-iblock="<?=$arItem["IBLOCK_ID"]?>"><i></i><div><?=GetMessage('CATALOG_WISH')?></div></span>
											<span class="wish_item in added" style="display: none;" data-item="<?=$arItem["ID"]?>" data-iblock="<?=$arItem["IBLOCK_ID"]?>"><i></i><div><?=GetMessage('CATALOG_WISH_OUT')?></div></span>
										</div>
									<?elseif($arItem["OFFERS"] && !empty($arItem['OFFERS_PROP'])):?>
										<div class="wish_item_button" style="display: none;">
											<span class="wish_item to <?=$arParams["TYPE_SKU"];?>" data-item="" data-iblock="<?=$arItem["IBLOCK_ID"]?>" data-offers="Y" data-props="<?=$arOfferProps?>"><i></i><div><?=GetMessage('CATALOG_WISH')?></div></span>
											<span class="wish_item in added <?=$arParams["TYPE_SKU"];?>" style="display: none;" data-item="" data-iblock="<?=$arItem["IBLOCK_ID"]?>"><i></i><div><?=GetMessage('CATALOG_WISH_OUT')?></div></span>
										</div>
									<?endif;?>
								<?endif;?>
								<?if($arParams["DISPLAY_COMPARE"] == "Y"):?>
									<?if(!$arItem["OFFERS"] || $arParams["TYPE_SKU"] !== 'TYPE_1'):?>
										<div class="compare_item_button">
											<span class="compare_item to" data-iblock="<?=$arParams["IBLOCK_ID"]?>" data-item="<?=$arItem["ID"]?>" ><i></i><div><?=GetMessage('CATALOG_COMPARE')?></div></span>
											<span class="compare_item in added" style="display: none;" data-iblock="<?=$arParams["IBLOCK_ID"]?>" data-item="<?=$arItem["ID"]?>"><i></i><div><?=GetMessage('CATALOG_COMPARE_OUT')?></div></span>
										</div>
									<?elseif($arItem["OFFERS"]):?>
										<div class="compare_item_button">
											<span class="compare_item to <?=$arParams["TYPE_SKU"];?>" data-iblock="<?=$arParams["IBLOCK_ID"]?>" data-item="" ><i></i><div><?=GetMessage('CATALOG_COMPARE')?></div></span>
											<span class="compare_item in added <?=$arParams["TYPE_SKU"];?>" style="display: none;" data-iblock="<?=$arParams["IBLOCK_ID"]?>" data-item=""><i></i><div><?=GetMessage('CATALOG_COMPARE_OUT')?></div></span>
										</div>
									<?endif;?>
								<?endif;?>
							</div>
						<?endif;?>
					</td>
					<td class="information_wrapp">
						<div class="information">
							<div class="cost prices clearfix">
								<?if( count( $arItem["OFFERS"] ) > 0 ){
									$minPrice = false;
									$min_price_id=0;
									if (isset($arItem['MIN_PRICE']) || isset($arItem['RATIO_PRICE'])){
										// $minPrice = (isset($arItem['RATIO_PRICE']) ? $arItem['RATIO_PRICE'] : $arItem['MIN_PRICE']);
										$minPrice = $arItem['MIN_PRICE'];
									}
									$offer_id=0;
									if($arParams["TYPE_SKU"]=="N"){
										$offer_id=$minPrice["MIN_ITEM_ID"];
									}
									$min_price_id=$minPrice["MIN_PRICE_ID"];
									if(!$min_price_id)
										$min_price_id=$minPrice["PRICE_ID"];
									if($minPrice["MIN_ITEM_ID"])
										$item_id=$minPrice["MIN_ITEM_ID"];
									$prefix='';
									if('N' == $arParams['TYPE_SKU'] || $arParams['DISPLAY_TYPE'] =='table' || empty($arItem['OFFERS_PROP'])){
										$prefix=GetMessage("CATALOG_FROM");
									}
									if($arParams["SHOW_OLD_PRICE"]=="Y"){?>
										<div class="price" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PRICE']; ?>">
											<?if(strlen($minPrice["PRINT_DISCOUNT_VALUE"])):?>
												<?=$prefix;?> <?=$minPrice["PRINT_DISCOUNT_VALUE"];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
											<?endif;?>
										</div>
										<div class="price discount" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PRICE_OLD']; ?>" <?=(!$minPrice["DISCOUNT_DIFF"] ? 'style="display:none;"' : '')?>>
											<span <?=(!$minPrice["DISCOUNT_DIFF"] ? 'style="display:none;"' : '')?>><?=$minPrice["PRINT_VALUE"];?></span>
										</div>
										<?/*if($arParams["SHOW_DISCOUNT_PERCENT"]=="Y"){?>
											<div class="sale_block" <?=(!$minPrice["DISCOUNT_DIFF"] ? 'style="display:none;"' : '')?>>
												<?$percent=round(($minPrice["DISCOUNT_DIFF"]/$minPrice["VALUE"])*100, 2);?>
												<div class="value">-<?=$percent;?>%</div>
												<div class="text"><?=GetMessage("CATALOG_ECONOMY");?> <span><?=$minPrice["PRINT_DISCOUNT_DIFF"];?></span></div>
												<div class="clearfix"></div>
											</div>
										<?}*/?>
									<?}else{?>
										<div class="price" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PRICE']; ?>">
											<?if(strlen($minPrice["PRINT_DISCOUNT_VALUE"])):?>
												<?=$prefix;?> <?=$minPrice['PRINT_DISCOUNT_VALUE'];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
											<?endif;?>
										</div>
									<?}?>
								<?}else{?>
									<?
									$arCountPricesCanAccess = 0;
									$min_price_id=0;
									foreach( $arItem["PRICES"] as $key => $arPrice ) { if($arPrice["CAN_ACCESS"]){$arCountPricesCanAccess++;} }
									?>
									<?foreach($arItem["PRICES"] as $key => $arPrice){?>
										<?if($arPrice["CAN_ACCESS"]){
											$percent=0;
											if($arPrice["MIN_PRICE"]=="Y"){
												$min_price_id=$arPrice["PRICE_ID"];
											}?>
											<?$price = CPrice::GetByID($arPrice["ID"]);?>
											<?if($arCountPricesCanAccess > 1):?>
												<div class="price_name"><?=$price["CATALOG_GROUP_NAME"];?></div>
											<?endif;?>
											<?if($arPrice["VALUE"] > $arPrice["DISCOUNT_VALUE"] && $arParams["SHOW_OLD_PRICE"]=="Y"){?>
												<div class="price" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PRICE']; ?>">
													<?if(strlen($arPrice["PRINT_DISCOUNT_VALUE"])):?>
														<?=$arPrice["PRINT_DISCOUNT_VALUE"];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
													<?endif;?>
												</div>
												<div class="price discount">
													<span><?=$arPrice["PRINT_VALUE"];?></span>
												</div>
												<?/*if($arParams["SHOW_DISCOUNT_PERCENT"]=="Y"){?>
													<div class="sale_block">
														<?$percent=round(($arPrice["DISCOUNT_DIFF"]/$arPrice["VALUE"])*100, 2);?>
														<?if($percent && $percent<100){?>
															<div class="value">-<?=$percent;?>%</div>
														<?}?>
														<div class="text"><?=GetMessage("CATALOG_ECONOMY");?> <span><?=$arPrice["PRINT_DISCOUNT_DIFF"];?></span></div>
														<div class="clearfix"></div>
													</div>
												<?}*/?>
											<?}else{?>
												<div class="price" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PRICE']; ?>">
													<?if(strlen($arPrice["PRINT_VALUE"])):?>
														<?=$arPrice["PRINT_VALUE"];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
													<?endif;?>
												</div>
											<?}?>
										<?}?>
									<?}?>
								<?}?>
							</div>
							<?if($arParams["SHOW_DISCOUNT_TIME"]=="Y"){?>
								<?$arDiscounts = CCatalogDiscount::GetDiscountByProduct( $item_id, $USER->GetUserGroupArray(), "N", $min_price_id, SITE_ID );
								$arDiscount=array();
								if($arDiscounts)
									$arDiscount=current($arDiscounts);
								if($arDiscount["ACTIVE_TO"]){?>
									<div class="view_sale_block">
										<div class="count_d_block">
											<span class="active_to hidden"><?=$arDiscount["ACTIVE_TO"];?></span>
											<div class="title"><?=GetMessage("UNTIL_AKC");?></div>
											<span class="countdown values"></span>
										</div>
										<div class="quantity_block">
											<div class="title"><?=GetMessage("TITLE_QUANTITY_BLOCK");?></div>
											<div class="values">
												<span class="item">
													<span class="value" ><?=$totalCount;?></span>
													<span class="text"><?=GetMessage("TITLE_QUANTITY");?></span>
												</span>
											</div>
										</div>
									</div>
								<?}?>
							<?}?>
							<?if($arItem["OFFERS"]){?>
								<?if(!empty($arItem['OFFERS_PROP'])){?>
									<div class="sku_props">
										<div class="bx_catalog_item_scu wrapper_sku" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PROP_DIV']; ?>">
											<?$arSkuTemplate = array();?>
											<?$arSkuTemplate=COptimus::GetSKUPropsArray($arItem['OFFERS_PROPS_JS'], $arResult["SKU_IBLOCK_ID"], $arParams["DISPLAY_TYPE"], $arParams["OFFER_HIDE_NAME_PROPS"]);?>
											<?foreach ($arSkuTemplate as $code => $strTemplate){
												if (!isset($arItem['OFFERS_PROP'][$code]))
													continue;
												echo '<div>', str_replace('#ITEM#_prop_', $arItemIDs["ALL_ITEM_IDS"]['PROP'], $strTemplate), '</div>';
											}?>
										</div>
										<?$arItemJSParams=COptimus::GetSKUJSParams($arResult, $arParams, $arItem);?>
										<script type="text/javascript">
											var <? echo $arItemIDs["strObName"]; ?> = new JCCatalogSection(<? echo CUtil::PhpToJSObject($arItemJSParams, false, true); ?>);
										</script>
									</div>
								<?}?>
							<?}?>

							<div class="basket_props_block" id="bx_basket_div_<?=$arItem["ID"];?>" style="display: none;">
								<?if (!empty($arItem['PRODUCT_PROPERTIES_FILL'])){
									foreach ($arItem['PRODUCT_PROPERTIES_FILL'] as $propID => $propInfo){?>
										<input type="hidden" name="<? echo $arParams['PRODUCT_PROPS_VARIABLE']; ?>[<? echo $propID; ?>]" value="<? echo htmlspecialcharsbx($propInfo['ID']); ?>">
										<?if (isset($arItem['PRODUCT_PROPERTIES'][$propID]))
											unset($arItem['PRODUCT_PROPERTIES'][$propID]);
									}
								}
								$arItem["EMPTY_PROPS_JS"]="Y";
								$emptyProductProperties = empty($arItem['PRODUCT_PROPERTIES']);
								if (!$emptyProductProperties){
									$arItem["EMPTY_PROPS_JS"]="N";?>
									<div class="wrapper">
										<table>
											<?foreach ($arItem['PRODUCT_PROPERTIES'] as $propID => $propInfo){?>
												<tr>
													<td><? echo $arItem['PROPERTIES'][$propID]['NAME']; ?></td>
													<td>
														<?if('L' == $arItem['PROPERTIES'][$propID]['PROPERTY_TYPE']	&& 'C' == $arItem['PROPERTIES'][$propID]['LIST_TYPE']){
															foreach($propInfo['VALUES'] as $valueID => $value){?>
																<label>
																	<input type="radio" name="<? echo $arParams['PRODUCT_PROPS_VARIABLE']; ?>[<? echo $propID; ?>]" value="<? echo $valueID; ?>" <? echo ($valueID == $propInfo['SELECTED'] ? '"checked"' : ''); ?>><? echo $value; ?>
																</label>
															<?}
														}else{?>
															<select name="<? echo $arParams['PRODUCT_PROPS_VARIABLE']; ?>[<? echo $propID; ?>]"><?
																foreach($propInfo['VALUES'] as $valueID => $value){?>
																	<option value="<? echo $valueID; ?>" <? echo ($valueID == $propInfo['SELECTED'] ? '"selected"' : ''); ?>><? echo $value; ?></option>
																<?}?>
															</select>
														<?}?>
													</td>
												</tr>
											<?}?>
										</table>
									</div>
									<?
								}?>
							</div>

							<?if(!$arItem["OFFERS"] || $arParams['TYPE_SKU'] !== 'TYPE_1'):?>
								<?$arAddToBasketData = COptimus::GetAddToBasketArray($arItem, $totalCount, $arParams["DEFAULT_COUNT"], $arParams["BASKET_URL"], false, $arItemIDs["ALL_ITEM_IDS"], 'small', $arParams);?>
								<div class="counter_wrapp <?=($arItem["OFFERS"] && $arParams["TYPE_SKU"] == "TYPE_1" ? 'woffers' : '')?>">
									<?if(($arAddToBasketData["OPTIONS"]["USE_PRODUCT_QUANTITY_LIST"] && $arAddToBasketData["ACTION"] == "ADD") && $arItem["CAN_BUY"]):?>
										<div class="counter_block" data-offers="<?=($arItem["OFFERS"] ? "Y" : "N");?>" data-item="<?=$arItem["ID"];?>">
											<span class="minus" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['QUANTITY_DOWN']; ?>">-</span>
											<input type="text" class="text" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['QUANTITY']; ?>" name="<? echo $arParams["PRODUCT_QUANTITY_VARIABLE"]; ?>" value="<?=$arAddToBasketData["MIN_QUANTITY_BUY"]?>" />
											<span class="plus" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['QUANTITY_UP']; ?>" <?=($arAddToBasketData["MAX_QUANTITY_BUY"] ? "data-max='".$arAddToBasketData["MAX_QUANTITY_BUY"]."'" : "")?>>+</span>
										</div>
									<?endif;?>
									<div id="<?=$arItemIDs["ALL_ITEM_IDS"]['BASKET_ACTIONS']; ?>" class="button_block <?=(($arAddToBasketData["ACTION"] == "ORDER"/*&& !$arItem["CAN_BUY"]*/) || !$arItem["CAN_BUY"] || !$arAddToBasketData["OPTIONS"]["USE_PRODUCT_QUANTITY_LIST"] || $arAddToBasketData["ACTION"] == "SUBSCRIBE" ? "wide" : "");?>">
										<!--noindex-->
											<?=$arAddToBasketData["HTML"]?>
										<!--/noindex-->
									</div>
								</div>
							<?elseif($arItem["OFFERS"]):?>
								<?if(empty($arItem['OFFERS_PROP'])){?>
									<div class="offer_buy_block buys_wrapp woffers">
										<div class="counter_wrapp">
										<?
										$arItem["OFFERS_MORE"] = "Y";
										$arAddToBasketData = COptimus::GetAddToBasketArray($arItem, $totalCount, $arParams["DEFAULT_COUNT"], $arParams["BASKET_URL"], false, $arItemIDs["ALL_ITEM_IDS"], 'small read_more1', $arParams);?>
										<!--noindex-->
											<?=$arAddToBasketData["HTML"]?>
										<!--/noindex-->
										</div>
									</div>
								<?}else{?>
									<div class="offer_buy_block buys_wrapp woffers" style="display:none;">
										<div class="counter_wrapp"></div>
									</div>
								<?}?>
							<?endif;?>
						</div>
					</td></tr>
				</table>
			</div>
		<?}?>
	<?if($arParams["AJAX_REQUEST"]=="N"){?>
		</div>
	<?}?>
	<?if($arParams["AJAX_REQUEST"]=="Y"){?>
		<div class="wrap_nav">
	<?}?>
	<div class="bottom_nav <?=$arParams["DISPLAY_TYPE"];?>" <?=($arParams["AJAX_REQUEST"]=="Y" ? "style='display: none; '" : "");?>>
		<?if( $arParams["DISPLAY_BOTTOM_PAGER"] == "Y" ){?><?=$arResult["NAV_STRING"]?><?}?>
	</div>
	<?if($arParams["AJAX_REQUEST"]=="Y"){?>
		</div>
	<?}?>
<?}else{?>
	<script>
		// $(document).ready(function(){
			$('.sort_header').animate({'opacity':'1'}, 500);
		// })
	</script>
	<div class="no_goods">
		<div class="no_products">
			<div class="wrap_text_empty">
				<?if($_REQUEST["set_filter"]){?>
					<?$APPLICATION->IncludeFile(SITE_DIR."include/section_no_products_filter.php", Array(), Array("MODE" => "html",  "NAME" => GetMessage('EMPTY_CATALOG_DESCR')));?>
				<?}else{?>
					<?$APPLICATION->IncludeFile(SITE_DIR."include/section_no_products.php", Array(), Array("MODE" => "html",  "NAME" => GetMessage('EMPTY_CATALOG_DESCR')));?>
				<?}?>
			</div>
		</div>
		<?if($_REQUEST["set_filter"]){?>
			<span class="button wide"><?=GetMessage('RESET_FILTERS');?></span>
		<?}?>
	</div>
<?}?>
<script>
	function realWidth(obj){
		var clone = obj.clone();
		clone.css("visibility","hidden");
		$('body').append(clone);
		var width = clone.width()+0;
		clone.remove();
		return width;
	}
	function setPropWidth(){
		if($('table.props_list.offers').length){
			$('table.props_list.offers').each(function(){
				$(this).width(realWidth($(this).closest('.props_list_wrapp').find("table.props_list.prod")));
			});
		}
	}
	setPropWidth();
	BX.message({
		QUANTITY_AVAILIABLE: '<? echo COption::GetOptionString("aspro.optimus", "EXPRESSION_FOR_EXISTS", GetMessage("EXPRESSION_FOR_EXISTS_DEFAULT"), SITE_ID); ?>',
		QUANTITY_NOT_AVAILIABLE: '<? echo COption::GetOptionString("aspro.optimus", "EXPRESSION_FOR_NOTEXISTS", GetMessage("EXPRESSION_FOR_NOTEXISTS"), SITE_ID); ?>',
		ADD_ERROR_BASKET: '<? echo GetMessage("ADD_ERROR_BASKET"); ?>',
		ADD_ERROR_COMPARE: '<? echo GetMessage("ADD_ERROR_COMPARE"); ?>',
	})
</script>
149  14853|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/catalog.section/catalog_table/template.php|9e0159c1<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();?>
<?$this->setFrameMode(true);?>
<?if( count( $arResult["ITEMS"] ) >= 1 ){?>
	<?$arParams["BASKET_ITEMS"]=($arParams["BASKET_ITEMS"] ? $arParams["BASKET_ITEMS"] : array());?>
	<?if($arParams["AJAX_REQUEST"]=="N"){?>
	<table class="module_products_list">
		<tbody>
	<?}?>
			<?$arOfferProps = implode(';', $arParams['OFFERS_CART_PROPERTIES']);?>
			<?foreach($arResult["ITEMS"]  as $arItem){
				$this->AddEditAction($arItem['ID'], $arItem['EDIT_LINK'], CIBlock::GetArrayByID($arParams["IBLOCK_ID"], "ELEMENT_EDIT"));
				$this->AddDeleteAction($arItem['ID'], $arItem['DELETE_LINK'], CIBlock::GetArrayByID($arParams["IBLOCK_ID"], "ELEMENT_DELETE"), array("CONFIRM" => GetMessage('CT_BCS_ELEMENT_DELETE_CONFIRM')));
				$totalCount = COptimus::GetTotalCount($arItem);
				$arQuantityData = COptimus::GetQuantityArray($totalCount);

				$strMeasure = '';
				if(!$arItem["OFFERS"] || $arParams['TYPE_SKU'] === 'TYPE_2'){
					if($arParams["SHOW_MEASURE"] == "Y" && $arItem["CATALOG_MEASURE"]){
						$arMeasure = CCatalogMeasure::getList(array(), array("ID" => $arItem["CATALOG_MEASURE"]), false, false, array())->GetNext();
						$strMeasure = $arMeasure["SYMBOL_RUS"];
					}
					$arItem["OFFERS_MORE"]="Y";
				}
				elseif($arItem["OFFERS"]){
					$strMeasure = $arItem["MIN_PRICE"]["CATALOG_MEASURE_NAME"];
					$arItem["OFFERS_MORE"]="Y";
				}
				?>
				<tr class="item" id="<?=$this->GetEditAreaId($arItem['ID']);?>">
					<td class="foto-cell">
						<div class="image_wrapper_block">
							<?
							$a_alt=($arItem["IPROPERTY_VALUES"]["ELEMENT_PREVIEW_PICTURE_FILE_ALT"] ? $arItem["IPROPERTY_VALUES"]["ELEMENT_PREVIEW_PICTURE_FILE_ALT"] : $arItem["NAME"] );
							$a_title=($arItem["IPROPERTY_VALUES"]["ELEMENT_PREVIEW_PICTURE_FILE_TITLE"] ? $arItem["IPROPERTY_VALUES"]["ELEMENT_PREVIEW_PICTURE_FILE_TITLE"] : $arItem["NAME"] );
							?>
							<?if( !empty($arItem["DETAIL_PICTURE"]) || !empty($arItem["PREVIEW_PICTURE"]) ){?>
								<?
								$picture=($arItem["PREVIEW_PICTURE"] ? $arItem["PREVIEW_PICTURE"] : $arItem["DETAIL_PICTURE"]);
								$img_preview = CFile::ResizeImageGet( $picture, array( "width" => 50, "height" => 50 ), BX_RESIZE_IMAGE_PROPORTIONAL_ALT, true);?>
								<?if ($arParams["LIST_DISPLAY_POPUP_IMAGE"]=="Y"){?>
									<a class="popup_image fancy" href="<?=$arItem["DETAIL_PICTURE"]["SRC"]?>" title="<?=$a_title;?>">
								<?}?>
									<img src="<?=$img_preview["src"]?>" alt="<?=$a_alt;?>" title="<?=$a_title;?>" />
								<?if ($arParams["LIST_DISPLAY_POPUP_IMAGE"]=="Y"){?>
									</a>
								<?}?>
							<?}else{?>
								<img src="<?=SITE_TEMPLATE_PATH?>/images/no_photo_small.png" alt="<?=$a_alt;?>" title="<?=$a_title;?>" />
							<?}?>
						</div>
					</td>
					<td class="item-name-cell">
						<div class="title"><a href="<?=$arItem["DETAIL_PAGE_URL"]?>"><?=$arItem["NAME"]?></a></div>
						<?if($arParams["SHOW_RATING"] == "Y"):?>
							<div class="rating">
								<?$APPLICATION->IncludeComponent(
								   "bitrix:iblock.vote",
								   "element_rating_front",
								   Array(
									  "IBLOCK_TYPE" => $arParams["IBLOCK_TYPE"],
									  "IBLOCK_ID" => $arItem["IBLOCK_ID"],
									  "ELEMENT_ID" =>$arItem["ID"],
									  "MAX_VOTE" => 5,
									  "VOTE_NAMES" => array(),
									  "CACHE_TYPE" => $arParams["CACHE_TYPE"],
									  "CACHE_TIME" => $arParams["CACHE_TIME"],
									  "DISPLAY_AS_RATING" => 'vote_avg'
								   ),
								   $component, array("HIDE_ICONS" =>"Y")
								);?>
							</div>
						<?endif;?>
						<?=$arQuantityData["HTML"];?>
					</td>
					<td class="price-cell">
						<div class="cost prices clearfix">
							<?if( count( $arItem["OFFERS"] ) > 0 ){?>
								<?$minPrice = false;
								if (isset($arItem['MIN_PRICE']) || isset($arItem['RATIO_PRICE']))
									$minPrice = (isset($arItem['RATIO_PRICE']) ? $arItem['RATIO_PRICE'] : $arItem['MIN_PRICE']);
								$prefix='';
								if('N' == $arParams['TYPE_SKU'] || $arParams['DISPLAY_TYPE'] =='table'){
									$prefix=GetMessage("CATALOG_FROM");
								}
								if($minPrice["VALUE"]>$minPrice["DISCOUNT_VALUE"]){?>
									<div class="price">
										<?if(strlen($minPrice["PRINT_DISCOUNT_VALUE"])):?>
											<?=$prefix;?> <?=$minPrice["PRINT_DISCOUNT_VALUE"];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
										<?endif;?>
									</div>
									<div class="price discount">
										<span><?=$minPrice["PRINT_VALUE"];?></span>
									</div>
								<?}else{?>
									<div class="price">
										<?if(strlen($minPrice["PRINT_DISCOUNT_VALUE"])):?>
											<?=$prefix;?> <?=$minPrice['PRINT_DISCOUNT_VALUE'];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
										<?endif;?>
									</div>
								<?}?>
							<?}else{?>
								<?
								$arCountPricesCanAccess = 0;
								$min_price_id=0;
								foreach( $arItem["PRICES"] as $key => $arPrice ) { if($arPrice["CAN_ACCESS"]){$arCountPricesCanAccess++;} }
								?>
								<?foreach($arItem["PRICES"] as $key => $arPrice){?>
									<?if($arPrice["CAN_ACCESS"]){
										$percent=0;
										if($arPrice["MIN_PRICE"]=="Y"){
											$min_price_id=$arPrice["PRICE_ID"];
										}?>
										<?$price = CPrice::GetByID($arPrice["ID"]);?>
										<?if($arCountPricesCanAccess > 1):?>
											<div class="price_name"><?=$price["CATALOG_GROUP_NAME"];?></div>
										<?endif;?>
										<?if($arPrice["VALUE"] > $arPrice["DISCOUNT_VALUE"]){?>
											<div class="price">
												<?if(strlen($arPrice["PRINT_DISCOUNT_VALUE"])):?>
													<?=$arPrice["PRINT_DISCOUNT_VALUE"];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
												<?endif;?>
											</div>
											<div class="price discount">
												<span><?=$arPrice["PRINT_VALUE"];?></span>
											</div>
										<?}else{?>
											<div class="price">
												<?if(strlen($arPrice["PRINT_VALUE"])):?>
													<?=$arPrice["PRINT_VALUE"];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
												<?endif;?>
											</div>
										<?}?>
									<?}?>
								<?}?>
							<?}?>							
						</div>

						<div class="basket_props_block" id="bx_basket_div_<?=$arItem["ID"];?>" style="display: none;">
							<?if (!empty($arItem['PRODUCT_PROPERTIES_FILL'])){
								foreach ($arItem['PRODUCT_PROPERTIES_FILL'] as $propID => $propInfo){?>
									<input type="hidden" name="<? echo $arParams['PRODUCT_PROPS_VARIABLE']; ?>[<? echo $propID; ?>]" value="<? echo htmlspecialcharsbx($propInfo['ID']); ?>">
									<?if (isset($arItem['PRODUCT_PROPERTIES'][$propID]))
										unset($arItem['PRODUCT_PROPERTIES'][$propID]);
								}
							}
							$arItem["EMPTY_PROPS_JS"]="Y";
							$emptyProductProperties = empty($arItem['PRODUCT_PROPERTIES']);
							if (!$emptyProductProperties){
								$arItem["EMPTY_PROPS_JS"]="N";?>
								<div class="wrapper">
									<table>
										<?foreach ($arItem['PRODUCT_PROPERTIES'] as $propID => $propInfo){?>
											<tr>
												<td><? echo $arItem['PROPERTIES'][$propID]['NAME']; ?></td>
												<td>
													<?if('L' == $arItem['PROPERTIES'][$propID]['PROPERTY_TYPE']	&& 'C' == $arItem['PROPERTIES'][$propID]['LIST_TYPE']){
														foreach($propInfo['VALUES'] as $valueID => $value){?>
															<label>
																<input type="radio" name="<? echo $arParams['PRODUCT_PROPS_VARIABLE']; ?>[<? echo $propID; ?>]" value="<? echo $valueID; ?>" <? echo ($valueID == $propInfo['SELECTED'] ? '"checked"' : ''); ?>><? echo $value; ?>
															</label>
														<?}
													}else{?>
														<select name="<? echo $arParams['PRODUCT_PROPS_VARIABLE']; ?>[<? echo $propID; ?>]"><?
															foreach($propInfo['VALUES'] as $valueID => $value){?>
																<option value="<? echo $valueID; ?>" <? echo ($valueID == $propInfo['SELECTED'] ? '"selected"' : ''); ?>><? echo $value; ?></option>
															<?}?>
														</select>
													<?}?>
												</td>
											</tr>
										<?}?>
									</table>
								</div>
								<?
							}?>
						</div>
						<?$arAddToBasketData = COptimus::GetAddToBasketArray($arItem, $totalCount, $arParams["DEFAULT_COUNT"], $arParams["BASKET_URL"], false, array(), 'small', $arParams);?>
						<div class="adaptive_button_buy">
							<!--noindex-->
								<?=$arAddToBasketData["HTML"]?>
							<!--/noindex-->
						</div>				
					</td>
					<td class="but-cell item_<?=$arItem["ID"]?>">
						<div class="counter_wrapp">
							<?if($arAddToBasketData["OPTIONS"]["USE_PRODUCT_QUANTITY_LIST"] && !count($arItem["OFFERS"]) && $arAddToBasketData["ACTION"] == "ADD" && $arItem["CAN_BUY"]):?>
								<div class="counter_block" data-item="<?=$arItem["ID"];?>" <?=(in_array($arItem["ID"], $arParams["BASKET_ITEMS"]) ? "style='display: none;'" : "");?>>
									<span class="minus">-</span>
									<input type="text" class="text" name="count_items" value="<?=$arAddToBasketData["MIN_QUANTITY_BUY"]?>" />
									<span class="plus" <?=($arAddToBasketData["MAX_QUANTITY_BUY"] ? "data-max='".$arAddToBasketData["MAX_QUANTITY_BUY"]."'" : "")?>>+</span>
								</div>
							<?endif;?>
							<div class="button_block <?=(in_array($arItem["ID"], $arParams["BASKET_ITEMS"])  || $arAddToBasketData["ACTION"] == "ORDER" || !$arItem["CAN_BUY"] || !$arAddToBasketData["OPTIONS"]["USE_PRODUCT_QUANTITY_LIST"] ? "wide" : "");?>">
								<!--noindex-->
									<?=$arAddToBasketData["HTML"]?>
								<!--/noindex-->
							</div>
						</div>
					</td>
					<?//if((!$arItem["OFFERS"] && $arParams["DISPLAY_WISH_BUTTONS"] != "N" ) || ($arParams["DISPLAY_COMPARE"] == "Y")):?>
						<td class="like_icons <?=(((!$arItem["OFFERS"] && $arParams["DISPLAY_WISH_BUTTONS"] != "N" && $arItem["CAN_BUY"]) && ($arParams["DISPLAY_COMPARE"] == "Y")) ? " full" : "")?>">
							<div class="wrapp_stockers">
								<div class="like_icons">
									<?if($arParams["DISPLAY_WISH_BUTTONS"] != "N"):?>
										<?if(!$arItem["OFFERS"]):?>
											<div class="wish_item_button">
												<span title="<?=GetMessage('CATALOG_WISH')?>" class="wish_item to" data-item="<?=$arItem["ID"]?>" data-iblock="<?=$arItem["IBLOCK_ID"]?>"><i></i></span>
												<span title="<?=GetMessage('CATALOG_WISH_OUT')?>" class="wish_item in added" style="display: none;" data-item="<?=$arItem["ID"]?>" data-iblock="<?=$arItem["IBLOCK_ID"]?>"><i></i></span>
											</div>
										<?elseif($arItem["OFFERS"]):?>
											<?foreach($arItem["OFFERS"] as $arOffer):?>
												<?if($arOffer['CAN_BUY']):?>
													<div class="wish_item_button o_<?=$arOffer["ID"];?>" style="display: none;">
														<span title="<?=GetMessage('CATALOG_WISH')?>" class="wish_item to <?=$arParams["TYPE_SKU"];?>" data-item="<?=$arOffer["ID"]?>" data-iblock="<?=$arItem["IBLOCK_ID"]?>" data-offers="Y" data-props="<?=$arOfferProps?>"><i></i></span>
														<span title="<?=GetMessage('CATALOG_WISH_OUT')?>" class="wish_item in added <?=$arParams["TYPE_SKU"];?>" style="display: none;" data-item="<?=$arOffer["ID"]?>" data-iblock="<?=$arOffer["IBLOCK_ID"]?>"><i></i></span>
													</div>
												<?endif;?>
											<?endforeach;?>
										<?endif;?>
									<?endif;?>
									<?if($arParams["DISPLAY_COMPARE"] == "Y"):?>
										<?if(!$arItem["OFFERS"] || $arParams["TYPE_SKU"] !== 'TYPE_1'):?>
											<div class="compare_item_button">
												<span title="<?=GetMessage('CATALOG_COMPARE')?>" class="compare_item to" data-iblock="<?=$arParams["IBLOCK_ID"]?>" data-item="<?=$arItem["ID"]?>" ><i></i></span>
												<span title="<?=GetMessage('CATALOG_COMPARE_OUT')?>" class="compare_item in added" style="display: none;" data-iblock="<?=$arParams["IBLOCK_ID"]?>" data-item="<?=$arItem["ID"]?>"><i></i></span>
											</div>
										<?elseif($arItem["OFFERS"]):?>
											<?foreach($arItem["OFFERS"] as $arOffer):?>
												<div class="compare_item_button o_<?=$arOffer["ID"];?>" style="display: none;">
													<span title="<?=GetMessage('CATALOG_COMPARE')?>" class="compare_item to <?=$arParams["TYPE_SKU"];?>" data-iblock="<?=$arParams["IBLOCK_ID"]?>" data-item="<?=$arOffer["ID"]?>" ><i></i></span>
													<span title="<?=GetMessage('CATALOG_COMPARE_OUT')?>" class="compare_item in added <?=$arParams["TYPE_SKU"];?>" style="display: none;" data-iblock="<?=$arParams["IBLOCK_ID"]?>" data-item="<?=$arOffer["ID"]?>"><i></i></span>
												</div>
											<?endforeach;?>
										<?endif;?>
									<?endif;?>
								</div>
							</div>
						</td>
					<?//endif;?>
				</tr>
			<?}?>
	<?if($arParams["AJAX_REQUEST"]=="N"){?>
		</tbody>
	</table>
		<script>
			$(document).ready(function(){
				$('.sort_header').fadeIn();
			})
		</script>
	<?}?>
	<?if($arParams["AJAX_REQUEST"]=="Y"){?>
		<div class="wrap_nav">
		<tr <?=($arResult["NavPageCount"]>1 ? "" : "style='display: none;'");?>><td>
	<?}?>

		<div>
		<div class="bottom_nav <?=$arParams["DISPLAY_TYPE"];?>" <?=($arParams["AJAX_REQUEST"]=="Y"  && $arResult["NavPageCount"]<=1 ? "style='display: none; '" : "");?>>
			<?if( $arParams["DISPLAY_BOTTOM_PAGER"] == "Y" ){?><?=$arResult["NAV_STRING"]?><?}?>
		</div>
		</div>

	<?if($arParams["AJAX_REQUEST"]=="Y"){?>
		</td></tr>
		</div>
	<?}?>
	<script type="text/javascript">
		$('.module_products_list').removeClass('errors');
	</script>
<?}else{?>
	<?if($arParams["AJAX_REQUEST"]!="Y"){?>
		<table class="module_products_list errors">
		<tbody>
		<tr><td>
	<?}?>
		<script type="text/javascript">
			$('.module_products_list').addClass('errors');
		</script>
		<div class="module_products_list_b">
			<div class="no_goods">
				<div class="no_products">
					<div class="wrap_text_empty">
						<?if($_REQUEST["set_filter"]){?>
							<?$APPLICATION->IncludeFile(SITE_DIR."include/section_no_products_filter.php", Array(), Array("MODE" => "html",  "NAME" => GetMessage('EMPTY_CATALOG_DESCR')));?>
						<?}else{?>
							<?$APPLICATION->IncludeFile(SITE_DIR."include/section_no_products.php", Array(), Array("MODE" => "html",  "NAME" => GetMessage('EMPTY_CATALOG_DESCR')));?>
						<?}?>
					</div>
				</div>
				<?if($_REQUEST["set_filter"]){?>
					<span class="button wide"><?=GetMessage('RESET_FILTERS');?></span>
				<?}?>
			</div>
		</div>
		<?if($arParams["AJAX_REQUEST"]!="Y"){?>
		</td></tr>
		</tbody>
		</table>
	<?}?>
<?}?>150  29501|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/catalog.section/catalog_block/script.min.js|ed245fbb!function(t){t.JCCatalogSection||(t.JCCatalogSection=function(t){if(this.skuVisualParams={SELECT:{TAG_BIND:"select",TAG:"option",ACTIVE_CLASS:"active",HIDE_CLASS:"hidden",EVENT:"change"},LI:{TAG_BIND:"li",TAG:"li",ACTIVE_CLASS:"active",HIDE_CLASS:"missing",EVENT:"click"}},this.productType=0,this.showQuantity=!0,this.showAbsent=!0,this.secondPict=!1,this.showOldPrice=!1,this.showPercent=!1,this.showSkuProps=!1,this.basketAction="ADD",this.basketLinkURL="",this.showClosePopup=!1,this.useCompare=!1,this.visual={ID:"",PICT_ID:"",SECOND_PICT_ID:"",QUANTITY_ID:"",QUANTITY_UP_ID:"",QUANTITY_DOWN_ID:"",STORE_QUANTITY:"",PRICE_ID:"",PRICE_OLD_ID:"",DSC_PERC:"",SECOND_DSC_PERC:"",DISPLAY_PROP_DIV:"",BASKET_PROP_DIV:""},this.product={checkQuantity:!1,maxQuantity:0,stepQuantity:1,isDblQuantity:!1,canBuy:!0,canSubscription:!0,name:"",pict:{},id:0,addUrl:"",buyUrl:""},this.basketMode="",this.basketData={useProps:!1,emptyProps:!1,quantity:"quantity",props:"prop",basketUrl:"",sku_props:"",sku_props_var:"basket_props",add_url:"",buy_url:""},this.compareData={compareUrl:"",comparePath:""},this.defaultPict={pict:null,secondPict:null},this.checkQuantity=!1,this.maxQuantity=0,this.stepQuantity=1,this.defaultCount=1,this.isDblQuantity=!1,this.canBuy=!0,this.currentBasisPrice={},this.canSubscription=!0,this.precision=6,this.precisionFactor=Math.pow(10,this.precision),this.offers=[],this.offerNum=0,this.treeProps=[],this.obTreeRows=[],this.showCount=[],this.showStart=[],this.selectedValues={},this.obProduct=null,this.obQuantity=null,this.obQuantityUp=null,this.obQuantityDown=null,this.obPict=null,this.obSecondPict=null,this.obPrice=null,this.obTree=null,this.obBuyBtn=null,this.obBasketBtn=null,this.obBasketActions=null,this.obNotAvail=null,this.obDscPerc=null,this.obSecondDscPerc=null,this.obSkuProps=null,this.obMeasure=null,this.obCompare=null,this.obPopupWin=null,this.basketUrl="",this.basketParams={},this.treeRowShowSize=5,this.treeEnableArrow={display:"",cursor:"pointer",opacity:1},this.treeDisableArrow={display:"",cursor:"default",opacity:.2},this.lastElement=!1,this.containerHeight=0,this.errorCode=0,"object"==typeof t){switch(this.productType=parseInt(t.PRODUCT_TYPE,10),this.showQuantity=t.SHOW_QUANTITY,this.showAbsent=t.SHOW_ABSENT,this.secondPict=!!t.SECOND_PICT,this.showOldPrice=!!t.SHOW_OLD_PRICE,this.showPercent=!!t.SHOW_DISCOUNT_PERCENT,this.showSkuProps=!!t.SHOW_SKU_PROPS,t.ADD_TO_BASKET_ACTION&&(this.basketAction=t.ADD_TO_BASKET_ACTION),this.showClosePopup=!!t.SHOW_CLOSE_POPUP,this.useCompare=!!t.DISPLAY_COMPARE,this.visual=t.VISUAL,this.defaultCount=t.DEFAULT_COUNT,this.basketLinkURL=t.BASKET_URL,this.productType){case 1:case 2:t.PRODUCT&&"object"==typeof t.PRODUCT?(this.showQuantity&&(this.product.checkQuantity=t.PRODUCT.CHECK_QUANTITY,this.product.isDblQuantity=t.PRODUCT.QUANTITY_FLOAT,this.product.checkQuantity&&(this.product.maxQuantity=this.product.isDblQuantity?parseFloat(t.PRODUCT.MAX_QUANTITY):parseInt(t.PRODUCT.MAX_QUANTITY,10)),this.product.stepQuantity=this.product.isDblQuantity?parseFloat(t.PRODUCT.STEP_QUANTITY):parseInt(t.PRODUCT.STEP_QUANTITY,10),this.checkQuantity=this.product.checkQuantity,this.isDblQuantity=this.product.isDblQuantity,this.maxQuantity=this.product.maxQuantity,this.stepQuantity=this.product.stepQuantity,this.isDblQuantity&&(this.stepQuantity=Math.round(this.stepQuantity*this.precisionFactor)/this.precisionFactor)),this.product.canBuy=t.PRODUCT.CAN_BUY,this.product.canSubscription=t.PRODUCT.SUBSCRIPTION,t.PRODUCT.BASIS_PRICE&&(this.currentBasisPrice=t.PRODUCT.BASIS_PRICE),this.canBuy=this.product.canBuy,this.canSubscription=this.product.canSubscription,this.product.name=t.PRODUCT.NAME,this.product.pict=t.PRODUCT.PICT,this.product.id=t.PRODUCT.ID,t.PRODUCT.ADD_URL&&(this.product.addUrl=t.PRODUCT.ADD_URL),t.PRODUCT.BUY_URL&&(this.product.buyUrl=t.PRODUCT.BUY_URL),t.BASKET&&"object"==typeof t.BASKET&&(this.basketData.useProps=!!t.BASKET.ADD_PROPS,this.basketData.emptyProps=!!t.BASKET.EMPTY_PROPS)):this.errorCode=-1;break;case 3:t.OFFERS&&BX.type.isArray(t.OFFERS)?(t.PRODUCT&&"object"==typeof t.PRODUCT&&(this.product.name=t.PRODUCT.NAME,this.product.id=t.PRODUCT.ID),this.offers=t.OFFERS,this.offerNum=0,t.OFFER_SELECTED&&(this.offerNum=parseInt(t.OFFER_SELECTED,10)),isNaN(this.offerNum)&&(this.offerNum=0),t.TREE_PROPS&&(this.treeProps=t.TREE_PROPS),t.DEFAULT_PICTURE&&(this.defaultPict.pict=t.DEFAULT_PICTURE.PICTURE,this.defaultPict.secondPict=t.DEFAULT_PICTURE.PICTURE_SECOND)):this.errorCode=-1;break;default:this.errorCode=-1}t.BASKET&&"object"==typeof t.BASKET&&(t.BASKET.QUANTITY&&(this.basketData.quantity=t.BASKET.QUANTITY),t.BASKET.PROPS&&(this.basketData.props=t.BASKET.PROPS),t.BASKET.BASKET_URL&&(this.basketData.basketUrl=t.BASKET.BASKET_URL),3===this.productType&&t.BASKET.SKU_PROPS&&(this.basketData.sku_props=t.BASKET.SKU_PROPS),t.BASKET.ADD_URL_TEMPLATE&&(this.basketData.add_url=t.BASKET.ADD_URL_TEMPLATE),t.BASKET.BUY_URL_TEMPLATE&&(this.basketData.buy_url=t.BASKET.BUY_URL_TEMPLATE),""===this.basketData.add_url&&""===this.basketData.buy_url&&(this.errorCode=-1024)),this.useCompare&&(t.COMPARE&&"object"==typeof t.COMPARE?(t.COMPARE.COMPARE_PATH&&(this.compareData.comparePath=t.COMPARE.COMPARE_PATH),t.COMPARE.COMPARE_URL_TEMPLATE_DEL&&(this.compareData.compareUrlDel=t.COMPARE.COMPARE_URL_TEMPLATE_DEL),t.COMPARE.COMPARE_URL_TEMPLATE?this.compareData.compareUrl=t.COMPARE.COMPARE_URL_TEMPLATE:this.useCompare=!1):this.useCompare=!1),this.lastElement=!!t.LAST_ELEMENT&&"Y"===t.LAST_ELEMENT}0===this.errorCode&&BX.ready(BX.delegate(this.Init,this))},t.JCCatalogSection.prototype.Init=function(){var t=0,s="",i=null;if(this.obProduct=BX(this.visual.ID),this.obProduct||(this.errorCode=-1),this.obPict=BX(this.visual.PICT_ID),this.obPict||(this.errorCode=-2),this.secondPict&&this.visual.SECOND_PICT_ID&&(this.obSecondPict=BX(this.visual.SECOND_PICT_ID)),this.storeQuanity=BX(this.visual.STORE_QUANTITY),this.obPrice=BX(this.visual.PRICE_ID),this.obPriceOld=BX(this.visual.PRICE_OLD_ID),this.obPrice||(this.errorCode=-16),this.showQuantity&&this.visual.QUANTITY_ID&&(this.obQuantity=BX(this.visual.QUANTITY_ID),this.visual.QUANTITY_UP_ID&&(this.obQuantityUp=BX(this.visual.QUANTITY_UP_ID)),this.visual.QUANTITY_DOWN_ID&&(this.obQuantityDown=BX(this.visual.QUANTITY_DOWN_ID))),3===this.productType){if(this.visual.TREE_ID)for(this.obTree=BX(this.visual.TREE_ID),this.obTree||(this.errorCode=-256),s=this.visual.TREE_ITEM_ID,t=0;t<this.treeProps.length;t++)if(this.obTreeRows[t]={LIST:BX(s+this.treeProps[t].ID+"_list"),CONT:BX(s+this.treeProps[t].ID+"_cont")},!this.obTreeRows[t].LIST||!this.obTreeRows[t].CONT){this.errorCode=-512;break}this.visual.QUANTITY_MEASURE&&(this.obMeasure=BX(this.visual.QUANTITY_MEASURE))}if(this.obBasketActions=BX(this.visual.BASKET_ACTIONS_ID),this.obBasketActions&&(this.visual.BUY_ID&&(this.obBuyBtn=BX(this.visual.BUY_ID)),this.visual.BASKET_LINK&&(this.obBasketBtn=BX(this.visual.BASKET_LINK))),this.obNotAvail=BX(this.visual.NOT_AVAILABLE_MESS),this.showPercent&&(this.visual.DSC_PERC&&(this.obDscPerc=BX(this.visual.DSC_PERC)),this.secondPict&&this.visual.SECOND_DSC_PERC&&(this.obSecondDscPerc=BX(this.visual.SECOND_DSC_PERC))),this.showSkuProps&&this.visual.DISPLAY_PROP_DIV&&(this.obSkuProps=BX(this.visual.DISPLAY_PROP_DIV)),0===this.errorCode){switch(this.showQuantity&&(this.obQuantityUp&&BX.bind(this.obQuantityUp,"click",BX.delegate(this.QuantityUp,this)),this.obQuantityDown&&BX.bind(this.obQuantityDown,"click",BX.delegate(this.QuantityDown,this)),this.obQuantity&&BX.bind(this.obQuantity,"change",BX.delegate(this.QuantityChange,this))),this.productType){case 1:break;case 3:for(var e in this.skuVisualParams){var i=BX.findChildren(this.obTree,{tagName:this.skuVisualParams[e].TAG_BIND},!0);if(i&&0<i.length)for(t=0;t<i.length;t++)$(i[t]).on(this.skuVisualParams[e].EVENT,BX.delegate(this.SelectOfferProp,this))}this.SetCurrent()}this.obBuyBtn&&("ADD"===this.basketAction||BX.bind(this.obBuyBtn,"click",BX.delegate(this.BuyBasket,this))),this.useCompare&&(this.obCompare=BX(this.visual.COMPARE_LINK_ID))}},t.JCCatalogSection.prototype.checkHeight=function(){this.containerHeight=parseInt(this.obProduct.parentNode.offsetHeight,10),isNaN(this.containerHeight)&&(this.containerHeight=0)},t.JCCatalogSection.prototype.setHeight=function(){0<this.containerHeight&&BX.adjust(this.obProduct.parentNode,{style:{height:this.containerHeight+"px"}})},t.JCCatalogSection.prototype.clearHeight=function(){BX.adjust(this.obProduct.parentNode,{style:{height:"auto"}})},t.JCCatalogSection.prototype.QuantityUp=function(){var t=0,s=!0;0===this.errorCode&&this.showQuantity&&this.canBuy&&(t=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(t)||(t+=this.stepQuantity,this.checkQuantity&&t>this.maxQuantity&&(s=!1),s&&(this.isDblQuantity&&(t=Math.round(t*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=t)))},t.JCCatalogSection.prototype.QuantityDown=function(){var t=0,s=!0;0===this.errorCode&&this.showQuantity&&this.canBuy&&(t=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(t)||(t-=this.stepQuantity,t<this.stepQuantity&&(s=!1),s&&(this.isDblQuantity&&(t=Math.round(t*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=t)))},t.JCCatalogSection.prototype.QuantityChange=function(){var t,s,i=0;0===this.errorCode&&this.showQuantity&&(this.canBuy?(i=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(i)?this.obQuantity.value=this.stepQuantity:(this.checkQuantity&&i>this.maxQuantity&&(i=this.maxQuantity),i<this.stepQuantity?i=this.stepQuantity:(s=i/this.stepQuantity,t=parseInt(s,10),isNaN(t)&&(t=1,s=1.1),s>t&&(i=1>=t?this.stepQuantity:t*this.stepQuantity,i=Math.round(i*this.precisionFactor)/this.precisionFactor)),this.obQuantity.value=i)):this.obQuantity.value=this.stepQuantity)},t.JCCatalogSection.prototype.QuantitySet=function(t){0===this.errorCode&&(this.canBuy=this.offers[t].CAN_BUY,this.canBuy?(this.obBasketActions&&BX.style(this.obBasketActions,"display",""),this.obNotAvail&&BX.style(this.obNotAvail,"display","none")):(this.obBasketActions&&(BX.style(this.obBasketActions,"opacity","0"),BX.style(BX.findParent(BX(this.obQuantity),{"class":"counter_block"}),"display","none")),this.obNotAvail&&BX.style(this.obNotAvail,"display","")),this.showQuantity&&(this.isDblQuantity=this.offers[t].QUANTITY_FLOAT,this.checkQuantity=this.offers[t].CHECK_QUANTITY,this.isDblQuantity?(this.maxQuantity=parseFloat(this.offers[t].MAX_QUANTITY),this.stepQuantity=Math.round(parseFloat(this.offers[t].STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor):(this.maxQuantity=parseInt(this.offers[t].MAX_QUANTITY,10),this.stepQuantity=parseInt(this.offers[t].STEP_QUANTITY,10)),this.obQuantity&&(this.obQuantity.value=this.defaultCount,this.obQuantity.disabled=!this.canBuy),this.obMeasure&&(this.offers[t].MEASURE?BX.adjust(this.obMeasure,{html:this.offers[t].MEASURE}):BX.adjust(this.obMeasure,{html:""}))),this.currentBasisPrice=this.offers[t].BASIS_PRICE)},t.JCCatalogSection.prototype.SelectOfferProp=function(){var t=0,s="",i="",e=[],o=null,a=BX.proxy_context;if("undefined"!=typeof a.options&&"undefined"!=typeof a.options[a.selectedIndex]&&(a=a.options[a.selectedIndex]),a&&a.hasAttribute("data-treevalue")&&(i=a.getAttribute("data-treevalue"),propModes=a.getAttribute("data-showtype"),e=i.split("_"),this.SearchOfferPropIndex(e[0],e[1])&&(o=BX.findChildren(a.parentNode,{tagName:this.skuVisualParams[propModes.toUpperCase()].TAG},!1),o&&0<o.length)))for(t=0;t<o.length;t++)s=o[t].getAttribute("data-onevalue"),"TEXT"==propModes?s===e[1]?o[t].setAttribute("selected","selected"):o[t].removeAttribute("selected"):s===e[1]?$(o[t]).addClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS):$(o[t]).removeClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS)},t.JCCatalogSection.prototype.SearchOfferPropIndex=function(t,s){var i,e,o="",a=!1,r=[],h=-1,n={},c=[];for(i=0;i<this.treeProps.length;i++)if(this.treeProps[i].ID===t){h=i;break}if(h>-1){for(i=0;h>i;i++)o="PROP_"+this.treeProps[i].ID,n[o]=this.selectedValues[o];if(o="PROP_"+this.treeProps[h].ID,a=this.GetRowValues(n,o),!a)return!1;if(!BX.util.in_array(s,a))return!1;for(n[o]=s,i=h+1;i<this.treeProps.length;i++){if(o="PROP_"+this.treeProps[i].ID,a=this.GetRowValues(n,o),!a)return!1;if(this.showAbsent)for(r=[],c=[],c=BX.clone(n,!0),e=0;e<a.length;e++)c[o]=a[e],this.GetCanBuy(c)&&(r[r.length]=a[e]);else r=a;this.selectedValues[o]&&BX.util.in_array(this.selectedValues[o],r)?n[o]=this.selectedValues[o]:n[o]=r[0],this.UpdateRow(i,n[o],a,r)}this.selectedValues=n,this.ChangeInfo()}return!0},t.JCCatalogSection.prototype.UpdateRow=function(t,s,i,e){var o=0,a=0,r="",h=0,n={},c=!1,u=0,l=(this.treeEnableArrow,this.treeEnableArrow,0),p=null;if(t>-1&&t<this.obTreeRows.length&&(propMode=this.treeProps[t].DISPLAY_TYPE,p=BX.findChildren(this.obTreeRows[t].LIST,{tagName:this.skuVisualParams[propMode].TAG},!1),p&&0<p.length)){for(selectMode="SELECT"===this.treeProps[t].DISPLAY_TYPE,h=i.length,n={style:{},props:{disabled:"",selected:""}},o=0;o<p.length;o++)r=p[o].getAttribute("data-onevalue"),c=r===s&&0!=r,BX.util.in_array(r,e)?n.props.className=c?this.skuVisualParams[propMode].ACTIVE_CLASS:"":n.props.className=c?this.skuVisualParams[propMode].ACTIVE_CLASS+" "+this.skuVisualParams[propMode].HIDE_CLASS:this.skuVisualParams[propMode].HIDE_CLASS,selectMode?(n.props.disabled="disabled",n.props.selected=c?"selected":""):n.style.display="none",BX.util.in_array(r,i)&&(selectMode?n.props.disabled="":n.style.display="",c&&(u=a),a++),BX.adjust(p[o],n);selectMode&&$(this.obTreeRows[t].LIST).parent().hasClass("ik_select")&&$(this.obTreeRows[t].LIST).ikSelect("reset"),this.showCount[t]=h,this.showStart[t]=l}},t.JCCatalogSection.prototype.GetRowValues=function(t,s){var i,e=0,o=[],a=!1,r=!0;if(0===t.length){for(e=0;e<this.offers.length;e++)BX.util.in_array(this.offers[e].TREE[s],o)||(o[o.length]=this.offers[e].TREE[s]);a=!0}else for(e=0;e<this.offers.length;e++){r=!0;for(i in t)if(t[i]!==this.offers[e].TREE[i]){r=!1;break}r&&(BX.util.in_array(this.offers[e].TREE[s],o)||(o[o.length]=this.offers[e].TREE[s]),a=!0)}return a?o:!1},t.JCCatalogSection.prototype.GetCanBuy=function(t){var s,i=0,e=!1,o=!0;for(i=0;i<this.offers.length;i++){o=!0;for(s in t)if(t[s]!==this.offers[i].TREE[s]){o=!1;break}if(o&&this.offers[i].CAN_BUY){e=!0;break}}return e},t.JCCatalogSection.prototype.SetCurrent=function(){var t=0,s=0,i=[],e="",o=!1,a={},r=[],h=this.offers[this.offerNum].TREE;for(t=0;t<this.treeProps.length&&(e="PROP_"+this.treeProps[t].ID,o=this.GetRowValues(a,e),o);t++){if(BX.util.in_array(h[e],o)?a[e]=h[e]:(a[e]=o[0],this.offerNum=0),this.showAbsent)for(i=[],r=[],r=BX.clone(a,!0),s=0;s<o.length;s++)r[e]=o[s],this.GetCanBuy(r)&&(i[i.length]=o[s]);else i=o;this.UpdateRow(t,a[e],o,i)}this.selectedValues=a,this.ChangeInfo()},t.JCCatalogSection.prototype.ChangeInfo=function(){var s,i=0,e=-1,o=!0;for(i=0;i<this.offers.length;i++){o=!0;for(s in this.selectedValues)if(this.selectedValues[s]!==this.offers[i].TREE[s]){o=!1;break}if(o){e=i;break}}if(e>-1){if(this.obPict){var a={attrs:{}};this.offers[e].PREVIEW_PICTURE?a.attrs.src=this.offers[e].PREVIEW_PICTURE.SRC:a.attrs.src=this.defaultPict.pict.SRC,BX.adjust(BX.findChild(this.obPict,{tag:"img"}),a)}this.secondPict&&this.obSecondPict&&(this.offers[e].PREVIEW_PICTURE_SECOND?BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.offers[e].PREVIEW_PICTURE_SECOND.SRC+")"}}):this.offers[e].PREVIEW_PICTURE.SRC?BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.offers[e].PREVIEW_PICTURE.SRC+")"}}):this.defaultPict.secondPict?BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.defaultPict.secondPict.SRC+")"}}):BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.defaultPict.pict.SRC+")"}})),this.showSkuProps&&this.obSkuProps&&(0===this.offers[e].DISPLAY_PROPERTIES.length?BX.adjust(this.obSkuProps,{style:{display:"none"},html:""}):BX.adjust(this.obSkuProps,{style:{display:""},html:this.offers[e].DISPLAY_PROPERTIES})),$(this.obBuyBtn).data("item",this.offers[e].ID),$(this.obBasketBtn).data("item",this.offers[e].ID),$(this.obBasketActions).closest(".counter_wrapp").css("opacity",0);var r=this.offers[e].MEASURE&&"Y"==this.offers[e].SHOW_MEASURE?this.offers[e].MEASURE:"";this.setPrice(this.offers[e].PRICE,r),this.setQuantityStore(this.offers[e].MAX_QUANTITY,this.offers[e].AVAILIABLE.TEXT),this.offerNum=e,this.QuantitySet(this.offerNum),$(this.obProduct).find(".item-title a").attr("href",this.offers[this.offerNum].URL),$(this.obProduct).find(".image_wrapper_block > a").attr("href",this.offers[this.offerNum].URL),$(this.obProduct).find(".quantity_block .values").length&&$(this.obProduct).find(".quantity_block .values .item span.value").text(this.offers[e].MAX_QUANTITY).css({opacity:"1"});var h=this.offers[e],n=$(this.obProduct).closest(".catalog_item_wrapp");"undefined"!=typeof arBasketAspro?this.setActualDataBlock(n,h):"undefined"!=typeof t.frameCacheVars&&BX.addCustomEvent("onFrameDataReceived",function(){t.JCCatalogSection.prototype.setActualDataBlock(n,h)})}},t.JCCatalogSection.prototype.setActualDataBlock=function(t,s){this.setLikeBlock(t,".like_icons .wish_item_button",s,"DELAY"),this.setLikeBlock(t,".like_icons .compare_item_button",s,"COMPARE"),this.setBuyBlock(t,s)},t.JCCatalogSection.prototype.setLikeBlock=function(t,s,i,e){var o=t;"DELAY"==e&&(i.CAN_BUY?o.find(s).css("display","block"):o.find(s).hide()),o.find(s).attr("data-item",i.ID),o.find(s).find("span").attr("data-item",i.ID),arBasketAspro[e]&&(o.find(s).find(".to").removeClass("added").css("display","block"),o.find(s).find(".in").hide(),void 0!==arBasketAspro[e][i.ID]&&(o.find(s).find(".to").hide(),o.find(s).find(".in").css("display","block")))},t.JCCatalogSection.prototype.setBuyBlock=function(t,s){var i=t.find(".offer_buy_block");if(i.find(".counter_wrapp .counter_block").length&&i.find(".counter_wrapp .counter_block").attr("data-item",s.ID),s.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL&&"ADD"==s.CONFIG.ACTION&&s.CAN_BUY){var e=s.CONFIG.MAX_QUANTITY_BUY>0?"data-max='"+s.CONFIG.MAX_QUANTITY_BUY+"'":"",o='<span class="minus">-</span><input type="text" class="text" name="'+s.PRODUCT_QUANTITY_VARIABLE+'" value="'+s.CONFIG.MIN_QUANTITY_BUY+'" /><span class="plus" '+e+">+</span>";arBasketAspro.BASKET&&void 0!==arBasketAspro.BASKET[s.ID]?i.find(".counter_wrapp .counter_block").length?i.find(".counter_wrapp .counter_block").hide():(i.find(".counter_wrapp").prepend('<div class="counter_block" data-item="'+s.ID+'"></div>'),i.find(".counter_wrapp .counter_block").html(o).hide()):i.find(".counter_wrapp .counter_block").length?i.find(".counter_wrapp .counter_block").html(o).show():(i.find(".counter_wrapp").prepend('<div class="counter_block" data-item="'+s.ID+'"></div>'),i.find(".counter_wrapp .counter_block").html(o))}else i.find(".counter_wrapp .counter_block").length&&i.find(".counter_wrapp .counter_block").hide();var a="ORDER"==s.CONFIG.ACTION||!s.CAN_BUY||!s.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL||"SUBSCRIBE"==s.CONFIG.ACTION&&"Y"==s.CATALOG_SUBSCRIBE?"wide":"";$('<div class="button_block"></div>');if(i.find(".counter_wrapp").find(".button_block").length?arBasketAspro.BASKET&&void 0!==arBasketAspro.BASKET[s.ID]?(i.find(".counter_wrapp").find(".button_block").addClass("wide").html(s.HTML),markProductAddBasket(s.ID)):a?(i.find(".counter_wrapp").find(".button_block").addClass("wide").html(s.HTML),arBasketAspro.SUBSCRIBE&&void 0!==arBasketAspro.SUBSCRIBE[s.ID]&&markProductSubscribe(s.ID)):i.find(".counter_wrapp").find(".button_block").removeClass("wide").html(s.HTML):(i.find(".counter_wrapp").append('<div class="button_block '+a+'">'+s.HTML+"</div>"),arBasketAspro.BASKET&&void 0!==arBasketAspro.BASKET[s.ID]&&markProductAddBasket(s.ID),arBasketAspro.SUBSCRIBE&&void 0!==arBasketAspro.SUBSCRIBE[s.ID]&&markProductSubscribe(s.ID)),"NOTHING"!==s.CONFIG.ACTION)if("ADD"==s.CONFIG.ACTION&&s.CAN_BUY&&"N"!=s.SHOW_ONE_CLICK_BUY){var r='<span class="transparent big_btn type_block button one_click" data-offers="Y" data-item="'+s.ID+'" data-iblockID="'+s.IBLOCK_ID+'" data-quantity="'+s.CONFIG.MIN_QUANTITY_BUY+'" data-props="'+s.OFFER_PROPS+'" onclick="oneClickBuy('+s.ID+", "+s.IBLOCK_ID+', this)"><span>'+s.ONE_CLICK_BUY+"</span></span>";i.find(".wrapp_one_click").length?i.find(".wrapp_one_click").html(r):i.append('<div class="wrapp_one_click">'+r+"</div>")}else i.find(".wrapp_one_click").length&&i.find(".wrapp_one_click").remove();else i.find(".wrapp_one_click").length&&i.find(".wrapp_one_click").remove();i.fadeIn()},t.JCCatalogSection.prototype.CompareCountResult=function(t){if(t.COMPARE_COUNT){for(var s in t.ITEMS){if(t.ITEMS[s]==this.offers[this.offerNum].ID){this.offers[this.offerNum].COMPARE_ACTIVE=!0;break}this.offers[this.offerNum].COMPARE_ACTIVE=!1}this.offers[this.offerNum].COMPARE_ACTIVE?($(this.obCompare).find(".compare_item.to").hide(),$(this.obCompare).find(".compare_item.added").show()):($(this.obCompare).find(".compare_item.added").hide(),$(this.obCompare).find(".compare_item.to").show())}},t.JCCatalogSection.prototype.ItemInfoResult=function(t){t.HTML&&($(this.obBasketActions).html(t.HTML),$(this.obBasketActions).show(),this.obBuyBtn=BX(this.visual.BUY_ID),this.obBasketBtn=BX(this.visual.BASKET_LINK),this.obSubscribeBtn=BX(this.visual.SUBSCRIBE_ID),this.obSubscribedBtn=BX(this.visual.SUBSCRIBED_ID),BX.bind(this.obBuyBtn,"click",BX.delegate(this.Add2Basket,this)),$(this.obBasketActions).removeClass("wide"),this.ajax_type_item=t.BUYMISSINGGOODS,"ADD"==t.BUYMISSINGGOODS||this.canBuy?$(this.obQuantity).css("display",""):$(this.obBasketActions).addClass("wide")),basketParams={ajax_action:"Y"},BX.ajax.loadJSON(arOptimusOptions.SITE_DIR+"ajax/get_basket_count.php",basketParams,BX.delegate(this.BasketCountResult,this))},t.JCCatalogSection.prototype.BasketCountResult=function(t){for(var s in t.ITEMS){if(t.ITEMS[s].PRODUCT_ID==this.offers[this.offerNum].ID){this.offers[this.offerNum].BASKET_ACTIVE=!0;break}this.offers[this.offerNum].BASKET_ACTIVE=!1}for(var s in t.SUBSCRIBE_ITEMS){if(t.SUBSCRIBE_ITEMS[s].PRODUCT_ID==this.offers[this.offerNum].ID){this.offers[this.offerNum].SUBSCRIBE_ACTIVE=!0;break}this.offers[this.offerNum].SUBSCRIBE_ACTIVE=!1}this.BasketStateRefresh()},t.JCCatalogSection.prototype.BasketStateRefresh=function(s){this.offers[this.offerNum].SUBSCRIBE_ACTIVE?($(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .to-subscribe").hide(),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .in-subscribe").show()):($(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .to-subscribe").show(),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .in-subscribe").hide()),this.offers[this.offerNum].BASKET_ACTIVE?($(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID).addClass("wide"),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .button_block").addClass("wide"),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .to-cart").hide(),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .in-cart").show(),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .counter_block").hide()):($(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID).removeClass("wide"),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .button_block").removeClass("wide"),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .to-cart").show(),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .in-cart").hide(),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .counter_block").show()),BX.style(this.obBasketActions,"opacity","1"),$(this.obBasketActions).closest(".counter_wrapp").css("opacity",1),"undefined"!==s&&"Y"==s&&($("#basket_line .basket_fly").length&&$(t).outerWidth()>768?basketFly("open"):$("#basket_line .cart").length&&($("#basket_line .cart").is(".empty_cart")&&($("#basket_line .cart").removeClass("empty_cart").find(".cart_wrapp a.basket_link").removeAttr("href").addClass("cart-call"),touchBasket(".cart:not(.empty_cart) .basket_block .link")),reloadTopBasket("add",$("#basket_line"),200,2e3,"Y")),animateBasketLine(200))},t.JCCatalogSection.prototype.setPrice=function(t,s){var i;this.obPrice&&(i=BX.Currency.currencyFormat(t.DISCOUNT_VALUE,t.CURRENCY,!0),s&&(i=i?i+"/"+s:"&nbsp;"),BX.adjust(this.obPrice,{html:i}),t.DISCOUNT_VALUE!==t.VALUE&&this.showOldPrice?($(this.obPriceOld).find("strike").show().html(BX.Currency.currencyFormat(t.VALUE,t.CURRENCY,!0)),this.showPercent&&($(this.obPriceOld).closest(".cost").find(".sale_block").show(),$(this.obPriceOld).closest(".cost").find(".value").html(t.DISCOUNT_DIFF_PERCENT_RAW),$(this.obPriceOld).closest(".cost").find(".text span").html(BX.Currency.currencyFormat(t.DISCOUNT_DIFF,t.CURRENCY,!0)))):($(this.obPriceOld).find("strike").hide().html(""),this.showPercent&&$(this.obPriceOld).closest(".cost").find(".sale_block").hide()))},t.JCCatalogSection.prototype.setQuantityStore=function(t,s){parseFloat(t)>0?$(this.storeQuanity).find(".icon").removeClass("order").addClass("stock"):$(this.storeQuanity).find(".icon").removeClass("stock").addClass("order"),$(this.storeQuanity).find(".icon + span").html(s)},t.JCCatalogSection.prototype.Compare=function(){var t,s;if($(this.obProduct).find(".like_icons .o_"+this.offers[this.offerNum].ID).data("changed","Y"),$(this.obProduct).find(".like_icons .o_"+this.offers[this.offerNum].ID).find(".compare_item.added").is(":visible")?(s=this.compareData.compareUrlDel,this.compareData.Added=!1):(s=this.compareData.compareUrl,this.compareData.Added=!0),s){switch(this.productType){case 1:case 2:s=s.replace("#ID#",this.product.id.toString());break;case 3:s=s.replace("#ID#",this.offers[this.offerNum].ID)}t={ajax_action:"Y"},BX.ajax.loadJSON(s,t,BX.proxy(this.CompareResult,this))}},t.JCCatalogSection.prototype.CompareResult=function(t){return"object"!=typeof t?!1:("OK"===t.STATUS?(BX.onCustomEvent("OnCompareChange"),this.compareData.Added?($(this.obProduct).find(".like_icons .o_"+this.offers[this.offerNum].ID).find(".to").hide(),$(this.obProduct).find(".like_icons .o_"+this.offers[this.offerNum].ID).find(".in").show()):($(this.obProduct).find(".like_icons .o_"+this.offers[this.offerNum].ID).find(".in").hide(),$(this.obProduct).find(".like_icons .o_"+this.offers[this.offerNum].ID).find(".to").show()),jsAjaxUtil.InsertDataToNode(arOptimusOptions.SITE_DIR+"ajax/show_compare_preview_top.php","compare_line",!1)):console.log(BX.message("ADD_ERROR_COMPARE")),!1)},t.JCCatalogSection.prototype.CompareRedirect=function(){this.compareData.comparePath?location.href=this.compareData.comparePath:this.obPopupWin.close()},t.JCCatalogSection.prototype.InitBasketUrl=function(){switch(this.basketUrl="ADD"===this.basketMode?this.basketData.add_url:this.basketData.buy_url,this.productType){case 1:case 2:this.basketUrl=this.basketUrl.replace("#ID#",this.product.id.toString());break;case 3:this.basketUrl=this.basketUrl.replace("#ID#",this.offers[this.offerNum].ID)}this.basketParams={ajax_basket:"Y"},this.showQuantity&&(this.basketParams[this.basketData.quantity]=$(this.obProduct).find(".counter_wrapp").find(".counter_block .text").val()),this.basketData.sku_props&&(this.basketParams[this.basketData.sku_props_var]=this.basketData.sku_props)},t.JCCatalogSection.prototype.FillBasketProps=function(){if(this.visual.BASKET_PROP_DIV){var t=0,s=null,i=!1,e=null;if(this.basketData.useProps&&!this.basketData.emptyProps?this.obPopupWin&&this.obPopupWin.contentContainer&&(e=this.obPopupWin.contentContainer):e=BX(this.visual.BASKET_PROP_DIV),e){if(s=e.getElementsByTagName("select"),s&&s.length)for(t=0;t<s.length;t++)if(!s[t].disabled)switch(s[t].type.toLowerCase()){case"select-one":this.basketParams[s[t].name]=s[t].value,i=!0}if(s=e.getElementsByTagName("input"),s&&s.length)for(t=0;t<s.length;t++)if(!s[t].disabled)switch(s[t].type.toLowerCase()){case"hidden":this.basketParams[s[t].name]=s[t].value,i=!0;break;case"radio":s[t].checked&&(this.basketParams[s[t].name]=s[t].value,i=!0)}}i||(this.basketParams[this.basketData.props]=[],this.basketParams[this.basketData.props][0]=0)}},t.JCCatalogSection.prototype.Add2Basket=function(){this.basketMode="ADD",this.Basket()},t.JCCatalogSection.prototype.BuyBasket=function(){this.basketMode="BUY",this.Basket()},t.JCCatalogSection.prototype.SendToBasket=function(){this.canBuy&&(this.InitBasketUrl(),this.FillBasketProps(),BX.ajax.loadJSON(this.basketUrl,this.basketParams,BX.delegate(this.BasketResult,this)))},t.JCCatalogSection.prototype.Basket=function(){this.canBuy&&this.SendToBasket()},t.JCCatalogSection.prototype.BasketResult=function(t){var s;return this.obPopupWin&&this.obPopupWin.close(),"object"!=typeof t?!1:(s="OK"===t.STATUS,void(s&&"BUY"===this.basketAction?this.BasketRedirect():s?(getActualBasket(),markProductAddBasket(this.offers[this.offerNum].ID),BX.onCustomEvent("OnBasketChange"),this.offers[this.offerNum].BASKET_ACTIVE=!0,this.BasketStateRefresh("Y"),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID).data("changed","Y")):console.log(BX.message("ADD_ERROR_BASKET"))))},t.JCCatalogSection.prototype.BasketRedirect=function(){location.href=this.basketData.basketUrl?this.basketData.basketUrl:BX.message("BASKET_URL")})}(window);146  46519|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/catalog.section/catalog_block/script.js|ac181dd6(function (window) {

if (!!window.JCCatalogSection)
{
	return;
}

window.JCCatalogSection = function (arParams)
{
	this.skuVisualParams = {
		SELECT:
		{
			TAG_BIND: 'select',
			TAG: 'option',
			ACTIVE_CLASS: 'active',
			HIDE_CLASS: 'hidden',
			EVENT: 'change',
		},
		LI:
		{
			TAG_BIND: 'li',
			TAG: 'li',
			ACTIVE_CLASS: 'active',
			HIDE_CLASS: 'missing',
			EVENT: 'click',
		}
	};
	this.productType = 0;
	this.showQuantity = true;
	this.showAbsent = true;
	this.secondPict = false;
	this.showOldPrice = false;
	this.showPercent = false;
	this.showSkuProps = false;
	this.basketAction = 'ADD';
	this.basketLinkURL = '';
	this.showClosePopup = false;
	this.useCompare = false;
	this.visual = {
		ID: '',
		PICT_ID: '',
		SECOND_PICT_ID: '',
		QUANTITY_ID: '',
		QUANTITY_UP_ID: '',
		QUANTITY_DOWN_ID: '',
		STORE_QUANTITY: '',
		PRICE_ID: '',
		PRICE_OLD_ID: '',
		DSC_PERC: '',
		SECOND_DSC_PERC: '',
		DISPLAY_PROP_DIV: '',
		BASKET_PROP_DIV: ''
	};
	this.product = {
		checkQuantity: false,
		maxQuantity: 0,
		stepQuantity: 1,
		isDblQuantity: false,
		canBuy: true,
		canSubscription: true,
		name: '',
		pict: {},
		id: 0,
		addUrl: '',
		buyUrl: ''
	};

	this.basketMode = '';
	this.basketData = {
		useProps: false,
		emptyProps: false,
		quantity: 'quantity',
		props: 'prop',
		basketUrl: '',
		sku_props: '',
		sku_props_var: 'basket_props',
		add_url: '',
		buy_url: ''
	};

	this.compareData = {
		compareUrl: '',
		comparePath: ''
	};

	this.defaultPict = {
		pict: null,
		secondPict: null
	};

	this.checkQuantity = false;
	this.maxQuantity = 0;
	this.stepQuantity = 1;
	this.defaultCount = 1;
	this.isDblQuantity = false;
	this.canBuy = true;
	this.currentBasisPrice = {};
	this.canSubscription = true;
	this.precision = 6;
	this.precisionFactor = Math.pow(10,this.precision);

	this.offers = [];
	this.offerNum = 0;
	this.treeProps = [];
	this.obTreeRows = [];
	this.showCount = [];
	this.showStart = [];
	this.selectedValues = {};

	this.obProduct = null;
	this.obQuantity = null;
	this.obQuantityUp = null;
	this.obQuantityDown = null;
	this.obPict = null;
	this.obSecondPict = null;
	this.obPrice = null;
	this.obTree = null;
	this.obBuyBtn = null;
	this.obBasketBtn = null;
	this.obBasketActions = null;
	this.obNotAvail = null;
	this.obDscPerc = null;
	this.obSecondDscPerc = null;
	this.obSkuProps = null;
	this.obMeasure = null;
	this.obCompare = null;

	this.obPopupWin = null;
	this.basketUrl = '';
	this.basketParams = {};

	this.treeRowShowSize = 5;
	this.treeEnableArrow = { display: '', cursor: 'pointer', opacity: 1 };
	this.treeDisableArrow = { display: '', cursor: 'default', opacity:0.2 };

	this.lastElement = false;
	this.containerHeight = 0;

	this.errorCode = 0;

	if ('object' === typeof arParams)
	{
		this.productType = parseInt(arParams.PRODUCT_TYPE, 10);
		this.showQuantity = arParams.SHOW_QUANTITY;
		this.showAbsent = arParams.SHOW_ABSENT;
		this.secondPict = !!arParams.SECOND_PICT;
		this.showOldPrice = !!arParams.SHOW_OLD_PRICE;
		this.showPercent = !!arParams.SHOW_DISCOUNT_PERCENT;
		this.showSkuProps = !!arParams.SHOW_SKU_PROPS;
		if (!!arParams.ADD_TO_BASKET_ACTION)
		{
			this.basketAction = arParams.ADD_TO_BASKET_ACTION;
		}
		this.showClosePopup = !!arParams.SHOW_CLOSE_POPUP;
		this.useCompare = !!arParams.DISPLAY_COMPARE;

		this.visual = arParams.VISUAL;
		this.defaultCount = arParams.DEFAULT_COUNT;
		this.basketLinkURL = arParams.BASKET_URL;
		switch (this.productType)
		{
			case 1://product
			case 2://set
				if (!!arParams.PRODUCT && 'object' === typeof(arParams.PRODUCT))
				{
					if (this.showQuantity)
					{
						this.product.checkQuantity = arParams.PRODUCT.CHECK_QUANTITY;
						this.product.isDblQuantity = arParams.PRODUCT.QUANTITY_FLOAT;
						if (this.product.checkQuantity)
						{
							this.product.maxQuantity = (this.product.isDblQuantity ? parseFloat(arParams.PRODUCT.MAX_QUANTITY) : parseInt(arParams.PRODUCT.MAX_QUANTITY, 10));
						}
						this.product.stepQuantity = (this.product.isDblQuantity ? parseFloat(arParams.PRODUCT.STEP_QUANTITY) : parseInt(arParams.PRODUCT.STEP_QUANTITY, 10));

						this.checkQuantity = this.product.checkQuantity;
						this.isDblQuantity = this.product.isDblQuantity;
						this.maxQuantity = this.product.maxQuantity;
						this.stepQuantity = this.product.stepQuantity;
						if (this.isDblQuantity)
						{
							this.stepQuantity = Math.round(this.stepQuantity*this.precisionFactor)/this.precisionFactor;
						}
					}
					this.product.canBuy = arParams.PRODUCT.CAN_BUY;
					this.product.canSubscription = arParams.PRODUCT.SUBSCRIPTION;
					if (!!arParams.PRODUCT.BASIS_PRICE)
					{
						this.currentBasisPrice = arParams.PRODUCT.BASIS_PRICE;
					}

					this.canBuy = this.product.canBuy;
					this.canSubscription = this.product.canSubscription;

					this.product.name = arParams.PRODUCT.NAME;
					this.product.pict = arParams.PRODUCT.PICT;
					this.product.id = arParams.PRODUCT.ID;
					if (!!arParams.PRODUCT.ADD_URL)
					{
						this.product.addUrl = arParams.PRODUCT.ADD_URL;
					}
					if (!!arParams.PRODUCT.BUY_URL)
					{
						this.product.buyUrl = arParams.PRODUCT.BUY_URL;
					}
					if (!!arParams.BASKET && 'object' === typeof(arParams.BASKET))
					{
						this.basketData.useProps = !!arParams.BASKET.ADD_PROPS;
						this.basketData.emptyProps = !!arParams.BASKET.EMPTY_PROPS;
					}
				}
				else
				{
					this.errorCode = -1;
				}
				break;
			case 3://sku
				if (!!arParams.OFFERS && BX.type.isArray(arParams.OFFERS))
				{
					if (!!arParams.PRODUCT && 'object' === typeof(arParams.PRODUCT))
					{
						this.product.name = arParams.PRODUCT.NAME;
						this.product.id = arParams.PRODUCT.ID;
					}
					this.offers = arParams.OFFERS;
					this.offerNum = 0;
					if (!!arParams.OFFER_SELECTED)
					{
						this.offerNum = parseInt(arParams.OFFER_SELECTED, 10);
					}
					if (isNaN(this.offerNum))
					{
						this.offerNum = 0;
					}
					if (!!arParams.TREE_PROPS)
					{
						this.treeProps = arParams.TREE_PROPS;
					}
					if (!!arParams.DEFAULT_PICTURE)
					{
						this.defaultPict.pict = arParams.DEFAULT_PICTURE.PICTURE;
						this.defaultPict.secondPict = arParams.DEFAULT_PICTURE.PICTURE_SECOND;
					}
				}
				else
				{
					this.errorCode = -1;
				}
				break;
			default:
				this.errorCode = -1;
		}
		if (!!arParams.BASKET && 'object' === typeof(arParams.BASKET))
		{
			if (!!arParams.BASKET.QUANTITY)
			{
				this.basketData.quantity = arParams.BASKET.QUANTITY;
			}
			if (!!arParams.BASKET.PROPS)
			{
				this.basketData.props = arParams.BASKET.PROPS;
			}
			if (!!arParams.BASKET.BASKET_URL)
			{
				this.basketData.basketUrl = arParams.BASKET.BASKET_URL;
			}
			if (3 === this.productType)
			{
				if (!!arParams.BASKET.SKU_PROPS)
				{
					this.basketData.sku_props = arParams.BASKET.SKU_PROPS;
				}
			}
			if (!!arParams.BASKET.ADD_URL_TEMPLATE)
			{
				this.basketData.add_url = arParams.BASKET.ADD_URL_TEMPLATE;
			}
			if (!!arParams.BASKET.BUY_URL_TEMPLATE)
			{
				this.basketData.buy_url = arParams.BASKET.BUY_URL_TEMPLATE;
			}
			if (this.basketData.add_url === '' && this.basketData.buy_url === '')
			{
				this.errorCode = -1024;
			}
		}
		if (this.useCompare)
		{
			if (!!arParams.COMPARE && typeof(arParams.COMPARE) === 'object')
			{
				if (!!arParams.COMPARE.COMPARE_PATH)
				{
					this.compareData.comparePath = arParams.COMPARE.COMPARE_PATH;
				}
				if (!!arParams.COMPARE.COMPARE_URL_TEMPLATE_DEL)
				{
					this.compareData.compareUrlDel = arParams.COMPARE.COMPARE_URL_TEMPLATE_DEL;
				}
				if (!!arParams.COMPARE.COMPARE_URL_TEMPLATE)
				{
					this.compareData.compareUrl = arParams.COMPARE.COMPARE_URL_TEMPLATE;
				}
				else
				{
					this.useCompare = false;
				}
			}
			else
			{
				this.useCompare = false;
			}
		}

		this.lastElement = (!!arParams.LAST_ELEMENT && 'Y' === arParams.LAST_ELEMENT);
	}
	if (0 === this.errorCode)
	{
		BX.ready(BX.delegate(this.Init,this));
	}
};

window.JCCatalogSection.prototype.Init = function()
{
	var i = 0,
		strPrefix = '',
		TreeItems = null;

	this.obProduct = BX(this.visual.ID);
	if (!this.obProduct)
	{
		this.errorCode = -1;
	}
	this.obPict = BX(this.visual.PICT_ID);
	if (!this.obPict)
	{
		this.errorCode = -2;
	}
	if (this.secondPict && !!this.visual.SECOND_PICT_ID)
	{
		this.obSecondPict = BX(this.visual.SECOND_PICT_ID);
	}
	this.storeQuanity = BX(this.visual.STORE_QUANTITY);
	this.obPrice = BX(this.visual.PRICE_ID);
	this.obPriceOld = BX(this.visual.PRICE_OLD_ID);
	if (!this.obPrice)
	{
		this.errorCode = -16;
	}
	if (this.showQuantity && !!this.visual.QUANTITY_ID)
	{
		this.obQuantity = BX(this.visual.QUANTITY_ID);
		if (!!this.visual.QUANTITY_UP_ID)
		{
			this.obQuantityUp = BX(this.visual.QUANTITY_UP_ID);
		}
		if (!!this.visual.QUANTITY_DOWN_ID)
		{
			this.obQuantityDown = BX(this.visual.QUANTITY_DOWN_ID);
		}
	}
	if (3 === this.productType)
	{
		if (!!this.visual.TREE_ID)
		{
			this.obTree = BX(this.visual.TREE_ID);
			if (!this.obTree)
			{
				this.errorCode = -256;
			}
			strPrefix = this.visual.TREE_ITEM_ID;
			for (i = 0; i < this.treeProps.length; i++)
			{
				this.obTreeRows[i] = {
					LIST: BX(strPrefix+this.treeProps[i].ID+'_list'),
					CONT: BX(strPrefix+this.treeProps[i].ID+'_cont')
				};
				if (!this.obTreeRows[i].LIST || !this.obTreeRows[i].CONT)
				{
					this.errorCode = -512;
					break;
				}
			}
		}
		if (!!this.visual.QUANTITY_MEASURE)
		{
			this.obMeasure = BX(this.visual.QUANTITY_MEASURE);
		}
	}

	this.obBasketActions = BX(this.visual.BASKET_ACTIONS_ID);
	if (!!this.obBasketActions)
	{
		if (!!this.visual.BUY_ID)
		{
			this.obBuyBtn = BX(this.visual.BUY_ID);
		}
		if (!!this.visual.BASKET_LINK)
		{
			this.obBasketBtn = BX(this.visual.BASKET_LINK);
		}
	}
	this.obNotAvail = BX(this.visual.NOT_AVAILABLE_MESS);

	if (this.showPercent)
	{
		if (!!this.visual.DSC_PERC)
		{
			this.obDscPerc = BX(this.visual.DSC_PERC);
		}
		if (this.secondPict && !!this.visual.SECOND_DSC_PERC)
		{
			this.obSecondDscPerc = BX(this.visual.SECOND_DSC_PERC);
		}
	}

	if (this.showSkuProps)
	{
		if (!!this.visual.DISPLAY_PROP_DIV)
		{
			this.obSkuProps = BX(this.visual.DISPLAY_PROP_DIV);
		}
	}

	if (0 === this.errorCode)
	{
		if (this.showQuantity)
		{
			if (!!this.obQuantityUp)
			{
				BX.bind(this.obQuantityUp, 'click', BX.delegate(this.QuantityUp, this));
			}
			if (!!this.obQuantityDown)
			{
				BX.bind(this.obQuantityDown, 'click', BX.delegate(this.QuantityDown, this));
			}
			if (!!this.obQuantity)
			{
				BX.bind(this.obQuantity, 'change', BX.delegate(this.QuantityChange, this));
			}
		}
		switch (this.productType)
		{
			case 1://product
				break;
			case 3://sku
				for(var key in this.skuVisualParams){
					var TreeItems = BX.findChildren(this.obTree, {tagName: this.skuVisualParams[key].TAG_BIND}, true);
					if (!!TreeItems && 0 < TreeItems.length){
						for (i = 0; i < TreeItems.length; i++){
							$(TreeItems[i]).on(this.skuVisualParams[key].EVENT, BX.delegate(this.SelectOfferProp, this));
							//BX.bind(TreeItems[i], this.skuVisualParams[key].EVENT, BX.delegate(this.SelectOfferProp, this));
						}
					}
				}
				this.SetCurrent();
				break;
		}
		// $(this.obProduct).find(".read_more.to-cart").on('click', BX.delegate(this.Add2Basket, this));
		if (!!this.obBuyBtn)
		{
			if (this.basketAction === 'ADD')
			{
				// BX.bind(this.obBuyBtn, 'click', BX.delegate(this.Add2Basket, this));


			}
			else
			{
				BX.bind(this.obBuyBtn, 'click', BX.delegate(this.BuyBasket, this));
			}
		}
		if (this.useCompare){
			this.obCompare = BX(this.visual.COMPARE_LINK_ID);
		}
	}
};

window.JCCatalogSection.prototype.checkHeight = function()
{
	this.containerHeight = parseInt(this.obProduct.parentNode.offsetHeight, 10);
	if (isNaN(this.containerHeight)){
		this.containerHeight = 0;
	}
};

window.JCCatalogSection.prototype.setHeight = function()
{
	if (0 < this.containerHeight){
		BX.adjust(this.obProduct.parentNode, {style: { height: this.containerHeight+'px'}});
	}
};

window.JCCatalogSection.prototype.clearHeight = function()
{
	BX.adjust(this.obProduct.parentNode, {style: { height: 'auto'}});
};

window.JCCatalogSection.prototype.QuantityUp = function()
{
	var curValue = 0,
		boolSet = true,
		calcPrice;

	if (0 === this.errorCode && this.showQuantity && this.canBuy)
	{
		curValue = (this.isDblQuantity ? parseFloat(this.obQuantity.value) : parseInt(this.obQuantity.value, 10));
		if (!isNaN(curValue))
		{
			curValue += this.stepQuantity;
			if (this.checkQuantity)
			{
				if (curValue > this.maxQuantity)
				{
					boolSet = false;
				}
			}
			if (boolSet)
			{
				if (this.isDblQuantity)
				{
					curValue = Math.round(curValue*this.precisionFactor)/this.precisionFactor;
				}
				this.obQuantity.value = curValue;
			}
		}
	}
};

window.JCCatalogSection.prototype.QuantityDown = function()
{
	var curValue = 0,
		boolSet = true,
		calcPrice;

	if (0 === this.errorCode && this.showQuantity && this.canBuy)
	{
		curValue = (this.isDblQuantity ? parseFloat(this.obQuantity.value): parseInt(this.obQuantity.value, 10));
		if (!isNaN(curValue))
		{
			curValue -= this.stepQuantity;
			if (curValue < this.stepQuantity)
			{
				boolSet = false;
			}
			if (boolSet)
			{
				if (this.isDblQuantity)
				{
					curValue = Math.round(curValue*this.precisionFactor)/this.precisionFactor;
				}
				this.obQuantity.value = curValue;
			}
		}
	}
};

window.JCCatalogSection.prototype.QuantityChange = function()
{
	var curValue = 0,
		calcPrice,
		intCount,
		count;

	if (0 === this.errorCode && this.showQuantity)
	{
		if (this.canBuy)
		{
			curValue = (this.isDblQuantity ? parseFloat(this.obQuantity.value) : parseInt(this.obQuantity.value, 10));
			if (!isNaN(curValue))
			{
				if (this.checkQuantity)
				{
					if (curValue > this.maxQuantity)
					{
						curValue = this.maxQuantity;
					}
				}
				if (curValue < this.stepQuantity)
				{
					curValue = this.stepQuantity;
				}
				else
				{
					count = curValue/this.stepQuantity;
					intCount = parseInt(count, 10);
					if (isNaN(intCount))
					{
						intCount = 1;
						count = 1.1;
					}
					if (count > intCount)
					{
						curValue = (intCount <= 1 ? this.stepQuantity : intCount*this.stepQuantity);
						curValue = Math.round(curValue*this.precisionFactor)/this.precisionFactor;
					}
				}
				this.obQuantity.value = curValue;
			}
			else
			{
				this.obQuantity.value = this.stepQuantity;
			}
		}
		else
		{
			this.obQuantity.value = this.stepQuantity;
		}
	}
};

window.JCCatalogSection.prototype.QuantitySet = function(index)
{
	if (0 === this.errorCode)
	{
		this.canBuy = this.offers[index].CAN_BUY;
		if (this.canBuy)
		{
			if (!!this.obBasketActions)
			{
				BX.style(this.obBasketActions, 'display', '');
			}
			if (!!this.obNotAvail)
			{
				BX.style(this.obNotAvail, 'display', 'none');
			}
		}
		else
		{
			if (!!this.obBasketActions)
			{
				//BX.style(this.obBasketActions, 'display', 'none');
				BX.style(this.obBasketActions, 'opacity', '0');
				BX.style(BX.findParent(BX(this.obQuantity), { 'class':'counter_block' }), 'display', 'none');
			}
			if (!!this.obNotAvail)
			{
				BX.style(this.obNotAvail, 'display', '');
			}
		}
		if (this.showQuantity)
		{
			this.isDblQuantity = this.offers[index].QUANTITY_FLOAT;
			this.checkQuantity = this.offers[index].CHECK_QUANTITY;
			if (this.isDblQuantity)
			{
				this.maxQuantity = parseFloat(this.offers[index].MAX_QUANTITY);
				this.stepQuantity = Math.round(parseFloat(this.offers[index].STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor;
			}
			else
			{
				this.maxQuantity = parseInt(this.offers[index].MAX_QUANTITY, 10);
				this.stepQuantity = parseInt(this.offers[index].STEP_QUANTITY, 10);
			}
			if(!!this.obQuantity){
				this.obQuantity.value = this.defaultCount;
				this.obQuantity.disabled = !this.canBuy;
			}
			if (!!this.obMeasure)
			{
				if (!!this.offers[index].MEASURE)
				{
					BX.adjust(this.obMeasure, { html : this.offers[index].MEASURE});
				}
				else
				{
					BX.adjust(this.obMeasure, { html : ''});
				}
			}
		}
		this.currentBasisPrice = this.offers[index].BASIS_PRICE;
	}
};

window.JCCatalogSection.prototype.SelectOfferProp = function()
{
	var i = 0,
		value = '',
		strTreeValue = '',
		arTreeItem = [],
		RowItems = null,
		target = BX.proxy_context;
	if(typeof target.options !== 'undefined' && typeof target.options[target.selectedIndex] !== 'undefined')
		target = target.options[target.selectedIndex];

	if (!!target && target.hasAttribute('data-treevalue'))
	{
		strTreeValue = target.getAttribute('data-treevalue');
		propModes = target.getAttribute('data-showtype');
		arTreeItem = strTreeValue.split('_');
		if (this.SearchOfferPropIndex(arTreeItem[0], arTreeItem[1]))
		{
			RowItems = BX.findChildren(target.parentNode, {tagName: this.skuVisualParams[propModes.toUpperCase()].TAG}, false);

			if (!!RowItems && 0 < RowItems.length)
			{
				for (i = 0; i < RowItems.length; i++)
				{
					value = RowItems[i].getAttribute('data-onevalue');

					// for SELECTBOXES
					if(propModes == 'TEXT'){
						if (value === arTreeItem[1]){
							RowItems[i].setAttribute('selected', 'selected');
						}else{
							RowItems[i].removeAttribute('selected');
						}
					}else{
						if (value === arTreeItem[1]){
							$(RowItems[i]).addClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS);
						}else{
							$(RowItems[i]).removeClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS);
						}
					}
				}
			}
		}
	}
};

window.JCCatalogSection.prototype.SearchOfferPropIndex = function(strPropID, strPropValue)
{
	var strName = '',
		arShowValues = false,
		i, j,
		arCanBuyValues = [],
		index = -1,
		arFilter = {},
		tmpFilter = [];

	for (i = 0; i < this.treeProps.length; i++)
	{
		if (this.treeProps[i].ID === strPropID)
		{
			index = i;
			break;
		}
	}

	if (-1 < index)
	{
		for (i = 0; i < index; i++)
		{
			strName = 'PROP_'+this.treeProps[i].ID;
			arFilter[strName] = this.selectedValues[strName];
		}
		strName = 'PROP_'+this.treeProps[index].ID;
		arShowValues = this.GetRowValues(arFilter, strName);
		if (!arShowValues)
		{
			return false;
		}
		if (!BX.util.in_array(strPropValue, arShowValues))
		{
			return false;
		}
		arFilter[strName] = strPropValue;
		for (i = index+1; i < this.treeProps.length; i++)
		{
			strName = 'PROP_'+this.treeProps[i].ID;
			arShowValues = this.GetRowValues(arFilter, strName);
			if (!arShowValues)
			{
				return false;
			}
			if (this.showAbsent)
			{
				arCanBuyValues = [];
				tmpFilter = [];
				tmpFilter = BX.clone(arFilter, true);
				for (j = 0; j < arShowValues.length; j++)
				{
					tmpFilter[strName] = arShowValues[j];
					if (this.GetCanBuy(tmpFilter))
					{
						arCanBuyValues[arCanBuyValues.length] = arShowValues[j];
					}
				}
			}
			else
			{
				arCanBuyValues = arShowValues;
			}
			if (!!this.selectedValues[strName] && BX.util.in_array(this.selectedValues[strName], arCanBuyValues))
			{
				arFilter[strName] = this.selectedValues[strName];
			}
			else
			{
				arFilter[strName] = arCanBuyValues[0];
			}
			this.UpdateRow(i, arFilter[strName], arShowValues, arCanBuyValues);
		}
		this.selectedValues = arFilter;
		this.ChangeInfo();
	}
	return true;
};

window.JCCatalogSection.prototype.UpdateRow = function(intNumber, activeID, showID, canBuyID)
{
	var i = 0,
		showI = 0,
		value = '',
		countShow = 0,
		strNewLen = '',
		obData = {},
		pictMode = false,
		extShowMode = false,
		isCurrent = false,
		selectIndex = 0,
		obLeft = this.treeEnableArrow,
		obRight = this.treeEnableArrow,
		currentShowStart = 0,
		RowItems = null;

	if (-1 < intNumber && intNumber < this.obTreeRows.length){
		propMode = this.treeProps[intNumber].DISPLAY_TYPE;
		RowItems = BX.findChildren(this.obTreeRows[intNumber].LIST, {tagName: this.skuVisualParams[propMode].TAG}, false);
		if (!!RowItems && 0 < RowItems.length){
			selectMode = ('SELECT' === this.treeProps[intNumber].DISPLAY_TYPE);
			countShow = showID.length;
			obData = {
				style: {},
				props: {
					disabled: '',
					selected: '',
				},
			};

			for (i = 0; i < RowItems.length; i++){
				value = RowItems[i].getAttribute('data-onevalue');
				isCurrent = (value === activeID && value !=0);
				if (BX.util.in_array(value, canBuyID)){
					obData.props.className = (isCurrent ? this.skuVisualParams[propMode].ACTIVE_CLASS : '');
				}else{
					obData.props.className = (isCurrent ? this.skuVisualParams[propMode].ACTIVE_CLASS+' '+this.skuVisualParams[propMode].HIDE_CLASS : this.skuVisualParams[propMode].HIDE_CLASS);
				}
				// obData.props.className = (isCurrent ? this.skuVisualParams[propMode].ACTIVE_CLASS : '');

				if(selectMode){
					obData.props.disabled = 'disabled';
					obData.props.selected = (isCurrent ? 'selected' : '');
				}else{
					obData.style.display = 'none';
				}

				if (BX.util.in_array(value, showID)){
					if(selectMode){
						obData.props.disabled = '';
					}else{
						obData.style.display = '';
					}
					if (isCurrent){
						selectIndex = showI;
					}
					showI++;
				}
				BX.adjust(RowItems[i], obData);
			}

			if(selectMode){
				if($(this.obTreeRows[intNumber].LIST).parent().hasClass('ik_select'))
					$(this.obTreeRows[intNumber].LIST).ikSelect('reset');
			}

			this.showCount[intNumber] = countShow;
			this.showStart[intNumber] = currentShowStart;
		}
	}
};

window.JCCatalogSection.prototype.GetRowValues = function(arFilter, index)
{
	var i = 0,
		j,
		arValues = [],
		boolSearch = false,
		boolOneSearch = true;

	if (0 === arFilter.length)
	{
		for (i = 0; i < this.offers.length; i++)
		{
			if (!BX.util.in_array(this.offers[i].TREE[index], arValues))
			{
				arValues[arValues.length] = this.offers[i].TREE[index];
			}
		}
		boolSearch = true;
	}
	else
	{
		for (i = 0; i < this.offers.length; i++)
		{
			boolOneSearch = true;
			for (j in arFilter)
			{
				if (arFilter[j] !== this.offers[i].TREE[j])
				{
					boolOneSearch = false;
					break;
				}
			}
			if (boolOneSearch)
			{
				if (!BX.util.in_array(this.offers[i].TREE[index], arValues))
				{
					arValues[arValues.length] = this.offers[i].TREE[index];
				}
				boolSearch = true;
			}
		}
	}
	return (boolSearch ? arValues : false);
};

window.JCCatalogSection.prototype.GetCanBuy = function(arFilter)
{
	var i = 0,
		j,
		boolSearch = false,
		boolOneSearch = true;

	for (i = 0; i < this.offers.length; i++)
	{
		boolOneSearch = true;
		for (j in arFilter)
		{
			if (arFilter[j] !== this.offers[i].TREE[j])
			{
				boolOneSearch = false;
				break;
			}
		}
		if (boolOneSearch)
		{
			if (this.offers[i].CAN_BUY)
			{
				boolSearch = true;
				break;
			}
		}
	}
	return boolSearch;
};

window.JCCatalogSection.prototype.SetCurrent = function()
{
	var i = 0,
		j = 0,
		arCanBuyValues = [],
		strName = '',
		arShowValues = false,
		arFilter = {},
		tmpFilter = [],
		current = this.offers[this.offerNum].TREE;
	for (i = 0; i < this.treeProps.length; i++)
	{
		strName = 'PROP_'+this.treeProps[i].ID;
		arShowValues = this.GetRowValues(arFilter, strName);
		if (!arShowValues)
		{
			break;
		}
		if (BX.util.in_array(current[strName], arShowValues))
		{
			arFilter[strName] = current[strName];
		}
		else
		{
			arFilter[strName] = arShowValues[0];
			this.offerNum = 0;
		}
		if (this.showAbsent)
		{
			arCanBuyValues = [];
			tmpFilter = [];
			tmpFilter = BX.clone(arFilter, true);
			for (j = 0; j < arShowValues.length; j++)
			{
				tmpFilter[strName] = arShowValues[j];
				if (this.GetCanBuy(tmpFilter))
				{
					arCanBuyValues[arCanBuyValues.length] = arShowValues[j];
				}
			}
		}
		else
		{
			arCanBuyValues = arShowValues;
		}
		this.UpdateRow(i, arFilter[strName], arShowValues, arCanBuyValues);
	}
	this.selectedValues = arFilter;
	this.ChangeInfo();
};

window.JCCatalogSection.prototype.ChangeInfo = function()
{
	var i = 0,
		j,
		index = -1,
		compareParams,
		boolOneSearch = true;

	for (i = 0; i < this.offers.length; i++)
	{
		boolOneSearch = true;
		for (j in this.selectedValues)
		{
			if (this.selectedValues[j] !== this.offers[i].TREE[j])
			{
				boolOneSearch = false;
				break;
			}
		}
		if (boolOneSearch)
		{
			index = i;
			break;
		}
	}
	if (-1 < index){
		if (!!this.obPict){
			var obData = {
				attrs: {}
			};

			if (!!this.offers[index].PREVIEW_PICTURE){
				obData.attrs.src = this.offers[index].PREVIEW_PICTURE.SRC;
			}else{
				obData.attrs.src = this.defaultPict.pict.SRC;
			}
			BX.adjust(BX.findChild(this.obPict, {"tag": "img"}), obData);
		}
		if (this.secondPict && !!this.obSecondPict)
		{
			if (!!this.offers[index].PREVIEW_PICTURE_SECOND)
			{
				BX.adjust(this.obSecondPict, {style: {backgroundImage: 'url('+this.offers[index].PREVIEW_PICTURE_SECOND.SRC+')'}});
			}
			else if (!!this.offers[index].PREVIEW_PICTURE.SRC)
			{
				BX.adjust(this.obSecondPict, {style: {backgroundImage: 'url('+this.offers[index].PREVIEW_PICTURE.SRC+')'}});
			}
			else if (!!this.defaultPict.secondPict)
			{
				BX.adjust(this.obSecondPict, {style: {backgroundImage: 'url('+this.defaultPict.secondPict.SRC+')'}});
			}
			else
			{
				BX.adjust(this.obSecondPict, {style: {backgroundImage: 'url('+this.defaultPict.pict.SRC+')'}});
			}
		}
		if (this.showSkuProps && !!this.obSkuProps)
		{
			if (0 === this.offers[index].DISPLAY_PROPERTIES.length)
			{
				BX.adjust(this.obSkuProps, {style: {display: 'none'}, html: ''});
			}
			else
			{
				BX.adjust(this.obSkuProps, {style: {display: ''}, html: this.offers[index].DISPLAY_PROPERTIES});
			}
		}


		$(this.obBuyBtn).data("item", this.offers[index].ID);
		$(this.obBasketBtn).data("item", this.offers[index].ID);

		$(this.obBasketActions).closest('.counter_wrapp').css('opacity', 0);

		var measure = this.offers[index].MEASURE && this.offers[index].SHOW_MEASURE=="Y" ? this.offers[index].MEASURE : '';
		this.setPrice(this.offers[index].PRICE, measure);
		this.setQuantityStore(this.offers[index].MAX_QUANTITY, this.offers[index].AVAILIABLE.TEXT);
		this.offerNum = index;
		this.QuantitySet(this.offerNum);

		$(this.obProduct).find('.item-title a').attr('href', this.offers[this.offerNum].URL);
		$(this.obProduct).find('.image_wrapper_block > a').attr('href', this.offers[this.offerNum].URL);

		/*quantity discount start*/
		if($(this.obProduct).find('.quantity_block .values').length){
			$(this.obProduct).find('.quantity_block .values .item span.value').text(this.offers[index].MAX_QUANTITY).css({'opacity':'1'});
		}
		/*quantity discount end*/

		var obj=this.offers[index],
			th=$(this.obProduct).closest('.catalog_item_wrapp');

		if(typeof arBasketAspro !=="undefined"){
			this.setActualDataBlock(th, obj);
		}else{
			if(typeof window.frameCacheVars !== "undefined"){
				BX.addCustomEvent("onFrameDataReceived", function(){
					window.JCCatalogSection.prototype.setActualDataBlock(th, obj);
				});
			}
		}
	}
};

/*set blocks start*/
window.JCCatalogSection.prototype.setActualDataBlock = function(th, obj)
{
	/*like block start*/
	this.setLikeBlock(th, '.like_icons .wish_item_button', obj, 'DELAY');
	this.setLikeBlock(th, '.like_icons .compare_item_button',obj, 'COMPARE');
	/*like block end*/

	/*buy block start*/
	this.setBuyBlock(th, obj);
	/*buy block end*/
}
/*set blocks end*/

/*set compare/wish*/
window.JCCatalogSection.prototype.setLikeBlock = function(th, className, obj, type)
{
	var block=th;
	if(type=="DELAY"){
		if(obj.CAN_BUY){
			block.find(className).css('display','block');
		}else{
			block.find(className).hide();
		}
	}
	block.find(className).attr('data-item', obj.ID);
	block.find(className).find('span').attr('data-item', obj.ID);
	if(arBasketAspro[type]){
		block.find(className).find('.to').removeClass('added').css('display','block');
		block.find(className).find('.in').hide();

		if(arBasketAspro[type][obj.ID]!==undefined){
			block.find(className).find('.to').hide();
			block.find(className).find('.in').css('display','block');
		}
	}
}

/*set buy*/
window.JCCatalogSection.prototype.setBuyBlock = function(th, obj)
{
	var buyBlock=th.find('.offer_buy_block');

	if(buyBlock.find('.counter_wrapp .counter_block').length){
		buyBlock.find('.counter_wrapp .counter_block').attr('data-item', obj.ID);
	}
	if((obj.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL && obj.CONFIG.ACTION == "ADD") && obj.CAN_BUY){
		var max=(obj.CONFIG.MAX_QUANTITY_BUY>0 ? "data-max='"+obj.CONFIG.MAX_QUANTITY_BUY+"'" : ""),
			counterHtml='<span class="minus">-</span>'+
				'<input type="text" class="text" name="'+obj.PRODUCT_QUANTITY_VARIABLE+'" value="'+obj.CONFIG.MIN_QUANTITY_BUY+'" />'+
				'<span class="plus" '+max+'>+</span>';
		if(arBasketAspro["BASKET"] && arBasketAspro["BASKET"][obj.ID]!==undefined){
			if(buyBlock.find('.counter_wrapp .counter_block').length){
				buyBlock.find('.counter_wrapp .counter_block').hide();
			}else{
				buyBlock.find('.counter_wrapp').prepend('<div class="counter_block" data-item="'+obj.ID+'"></div>');
				buyBlock.find('.counter_wrapp .counter_block').html(counterHtml).hide();
			}
		}else{
			if(buyBlock.find('.counter_wrapp .counter_block').length){
				buyBlock.find('.counter_wrapp .counter_block').html(counterHtml).show();
			}else{
				buyBlock.find('.counter_wrapp').prepend('<div class="counter_block" data-item="'+obj.ID+'"></div>');
				buyBlock.find('.counter_wrapp .counter_block').html(counterHtml);
			}
		}
	}else{
		if(buyBlock.find('.counter_wrapp .counter_block').length){
			buyBlock.find('.counter_wrapp .counter_block').hide();
		}
	}
	var className=((obj.CONFIG.ACTION == "ORDER") || !obj.CAN_BUY || !obj.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL || (obj.CONFIG.ACTION == "SUBSCRIBE" && obj.CATALOG_SUBSCRIBE == "Y") ? "wide" : "" ),
		buyBlockBtn=$('<div class="button_block"></div>');

	if(buyBlock.find('.counter_wrapp').find('.button_block').length){
		if(arBasketAspro["BASKET"] && arBasketAspro["BASKET"][obj.ID]!==undefined){
			buyBlock.find('.counter_wrapp').find('.button_block').addClass('wide').html(obj.HTML);
			markProductAddBasket(obj.ID);
		}else{
			if(className){
				buyBlock.find('.counter_wrapp').find('.button_block').addClass('wide').html(obj.HTML);
				if(arBasketAspro["SUBSCRIBE"] && arBasketAspro["SUBSCRIBE"][obj.ID]!==undefined){
					markProductSubscribe(obj.ID);
				}
			}else{
				buyBlock.find('.counter_wrapp').find('.button_block').removeClass('wide').html(obj.HTML);
			}
		}
	}else{
		buyBlock.find('.counter_wrapp').append('<div class="button_block '+className+'">'+obj.HTML+'</div>');
		if(arBasketAspro["BASKET"] && arBasketAspro["BASKET"][obj.ID]!==undefined)
			markProductAddBasket(obj.ID);
		if(arBasketAspro["SUBSCRIBE"] && arBasketAspro["SUBSCRIBE"][obj.ID]!==undefined)
			markProductSubscribe(obj.ID);
	}

	if(obj.CONFIG.ACTION !== "NOTHING"){
		if(obj.CONFIG.ACTION == "ADD" && obj.CAN_BUY && obj.SHOW_ONE_CLICK_BUY!="N"){
			var ocb='<span class="transparent big_btn type_block button one_click" data-offers="Y" data-item="'+obj.ID+'" data-iblockID="'+obj.IBLOCK_ID+'" data-quantity="'+obj.CONFIG.MIN_QUANTITY_BUY+'" data-props="'+obj.OFFER_PROPS+'" onclick="oneClickBuy('+obj.ID+', '+obj.IBLOCK_ID+', this)">'+
				'<span>'+obj.ONE_CLICK_BUY+'</span>'+
				'</span>';
			if(buyBlock.find('.wrapp_one_click').length){
				buyBlock.find('.wrapp_one_click').html(ocb);
			}else{
				buyBlock.append('<div class="wrapp_one_click">'+ocb+'</div>');
			}
		}else{
			if(buyBlock.find('.wrapp_one_click').length){
				buyBlock.find('.wrapp_one_click').remove();
			}
		}
	}else{
		if(buyBlock.find('.wrapp_one_click').length){
			buyBlock.find('.wrapp_one_click').remove();
		}
	}

	buyBlock.fadeIn();
}

/*get compare sku*/
window.JCCatalogSection.prototype.CompareCountResult = function(result)
{
	if(result.COMPARE_COUNT){
		for(var i in result.ITEMS){
			if(result.ITEMS[i]==this.offers[this.offerNum].ID){
				this.offers[this.offerNum].COMPARE_ACTIVE=true;
				break;
			}else{
				this.offers[this.offerNum].COMPARE_ACTIVE=false;
			}
		}
		if(this.offers[this.offerNum].COMPARE_ACTIVE){
			$(this.obCompare).find('.compare_item.to').hide();
			$(this.obCompare).find('.compare_item.added').show();
		}else{
			$(this.obCompare).find('.compare_item.added').hide();
			$(this.obCompare).find('.compare_item.to').show();
		}
	}
}

/*get item info*/
window.JCCatalogSection.prototype.ItemInfoResult = function(result)
{
	if(result.HTML){
		$(this.obBasketActions).html(result.HTML);
		$(this.obBasketActions).show();
		this.obBuyBtn = BX(this.visual.BUY_ID);
		this.obBasketBtn = BX(this.visual.BASKET_LINK);
		this.obSubscribeBtn = BX(this.visual.SUBSCRIBE_ID);
		this.obSubscribedBtn = BX(this.visual.SUBSCRIBED_ID);
		BX.bind(this.obBuyBtn, 'click', BX.delegate(this.Add2Basket, this));
		$(this.obBasketActions).removeClass('wide');
		this.ajax_type_item=result.BUYMISSINGGOODS;
		if(result.BUYMISSINGGOODS!="ADD" && !this.canBuy){
			$(this.obBasketActions).addClass('wide');
		}else{
			$(this.obQuantity).css('display','');
		}
	}
	//if(this.canBuy){
		basketParams = {
			ajax_action: 'Y'
		};
		BX.ajax.loadJSON(
			arOptimusOptions['SITE_DIR']+'ajax/get_basket_count.php',
			basketParams,
			BX.delegate(this.BasketCountResult, this)
		);
	//}
}

/*get basket items*/
window.JCCatalogSection.prototype.BasketCountResult = function(result)
{
	//if(result.TOTAL_COUNT){
		for(var i in result.ITEMS){
			if(result.ITEMS[i].PRODUCT_ID==this.offers[this.offerNum].ID){
				this.offers[this.offerNum].BASKET_ACTIVE=true;
				break;
			}else{
				this.offers[this.offerNum].BASKET_ACTIVE=false;
			}
		}
		for(var i in result.SUBSCRIBE_ITEMS){
			if(result.SUBSCRIBE_ITEMS[i].PRODUCT_ID==this.offers[this.offerNum].ID){
				this.offers[this.offerNum].SUBSCRIBE_ACTIVE=true;
				break;
			}else{
				this.offers[this.offerNum].SUBSCRIBE_ACTIVE=false;
			}
		}

		this.BasketStateRefresh();
	//}
}

window.JCCatalogSection.prototype.BasketStateRefresh = function(buy_basket)
{
	/*if(this.offers[this.offerNum].SUBSCRIBE_ACTIVE){
		$(this.obBasketActions).addClass('wide');
		$(this.obSubscribeBtn).hide();
		$(this.obSubscribedBtn).show();
	}else{
		$(this.obBasketActions).addClass('wide');
		$(this.obSubscribedBtn).hide();
		$(this.obSubscribeBtn).show();
	}
	if(this.offers[this.offerNum].BASKET_ACTIVE){
		$(this.obBuyBtn).hide();
		$(this.obBasketBtn).show();
		$(this.obQuantity).closest('.counter_wrapp').find('.counter_block').hide();
		$(this.obBasketActions).addClass('wide');
	}else{
		$(this.obBasketActions).removeClass('wide');
		$(this.obBasketBtn).hide();
		$(this.obBuyBtn).show();
		if(this.ajax_type_item=="ADD" || this.canBuy)
			$(this.obQuantity).closest('.counter_wrapp').find('.counter_block').show();

	}
	if(!this.canBuy){
		$(this.obBasketActions).addClass('wide');
	}*/
	if(this.offers[this.offerNum].SUBSCRIBE_ACTIVE){
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .to-subscribe').hide();
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .in-subscribe').show();
	}else{
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .to-subscribe').show();
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .in-subscribe').hide();
	}
	if(this.offers[this.offerNum].BASKET_ACTIVE){
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID).addClass('wide');
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .button_block').addClass('wide');
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .to-cart').hide();
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .in-cart').show();
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .counter_block').hide();
	}else{
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID).removeClass('wide');
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .button_block').removeClass('wide');
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .to-cart').show();
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .in-cart').hide();
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .counter_block').show();

	}
	BX.style(this.obBasketActions, 'opacity', '1');
	$(this.obBasketActions).closest('.counter_wrapp').css('opacity', 1);
	if(buy_basket!== 'undefined' && buy_basket=="Y"){
		if($("#basket_line .basket_fly").length && $(window).outerWidth()>768)
		{
			// preAnimateBasketFly($("#basket_line .basket_fly"), 200, 333);
			basketFly('open');
		}
		else if($("#basket_line .cart").length)
		{
			if($("#basket_line .cart").is(".empty_cart"))
			{
				$("#basket_line .cart").removeClass("empty_cart").find(".cart_wrapp a.basket_link").removeAttr("href").addClass("cart-call");
				touchBasket('.cart:not(.empty_cart) .basket_block .link');
			}
			reloadTopBasket('add', $('#basket_line'), 200, 2000, 'Y');
			/*if($(window).outerWidth() > 520){
				//if(arOptimusOptions['THEME']['SHOW_BASKET_ONADDTOCART'] !== 'N'){
					preAnimateBasketPopup('', $('.card_popup_frame'), 0, 200);
				//}
			};*/
		}
		animateBasketLine(200);
	}
}

window.JCCatalogSection.prototype.setPrice = function(price, measure)
{
	var strPrice,
		obData;

	if (!!this.obPrice){
		strPrice = BX.Currency.currencyFormat(price.DISCOUNT_VALUE, price.CURRENCY, true);
		if(measure){
			strPrice=(strPrice ? strPrice +'/'+measure : "&nbsp;");
		}
		BX.adjust(this.obPrice, {html: strPrice});
		if (price.DISCOUNT_VALUE !== price.VALUE && this.showOldPrice)
		{
			$(this.obPriceOld).find('strike').show().html(BX.Currency.currencyFormat(price.VALUE, price.CURRENCY, true));
			if(this.showPercent){
				$(this.obPriceOld).closest('.cost').find('.sale_block').show();
				$(this.obPriceOld).closest('.cost').find('.value').html(price.DISCOUNT_DIFF_PERCENT_RAW);
				$(this.obPriceOld).closest('.cost').find('.text span').html(BX.Currency.currencyFormat(price.DISCOUNT_DIFF, price.CURRENCY, true));
			}
		}
		else{
			$(this.obPriceOld).find('strike').hide().html('');
			if(this.showPercent){
				$(this.obPriceOld).closest('.cost').find('.sale_block').hide();
			}
		}
	}
};

/*set store quantity*/
window.JCCatalogSection.prototype.setQuantityStore = function(quantity, text)
{
	if(parseFloat(quantity)>0){
		$(this.storeQuanity).find('.icon').removeClass('order').addClass('stock');
	}else{
		$(this.storeQuanity).find('.icon').removeClass('stock').addClass('order');
	}
	$(this.storeQuanity).find('.icon + span').html(text);
}

window.JCCatalogSection.prototype.Compare = function()
{
	var compareParams, compareLink;
	$(this.obProduct).find('.like_icons .o_'+this.offers[this.offerNum].ID).data('changed','Y');
	// if($(this.obCompare).find('.compare_item.added').is(':visible')){
	if($(this.obProduct).find('.like_icons .o_'+this.offers[this.offerNum].ID).find('.compare_item.added').is(':visible')){
		compareLink = this.compareData.compareUrlDel;
		this.compareData.Added = false;
	}else{
		compareLink = this.compareData.compareUrl;
		this.compareData.Added = true;
	}
	if (!!compareLink){
		switch (this.productType){
			case 1://product
			case 2://set
				compareLink = compareLink.replace('#ID#', this.product.id.toString());
				break;
			case 3://sku
				compareLink = compareLink.replace('#ID#', this.offers[this.offerNum].ID);
				break;
		}
		compareParams = {
			ajax_action: 'Y'
		};
		BX.ajax.loadJSON(
			compareLink,
			compareParams,
			BX.proxy(this.CompareResult, this)
		);
	}
};

window.JCCatalogSection.prototype.CompareResult = function(result)
{
	var popupContent, popupButtons, popupTitle;

	if (typeof result !== 'object'){
		return false;
	}

	if (result.STATUS === 'OK'){
		BX.onCustomEvent('OnCompareChange');
		/*if(!this.compareData.Added){
			$(this.obCompare).find('.in').hide();
			$(this.obCompare).find('.to').show();
		}
		else{
			$(this.obCompare).find('.to').hide();
			$(this.obCompare).find('.in').show();
		}*/
		if(!this.compareData.Added){
			$(this.obProduct).find('.like_icons .o_'+this.offers[this.offerNum].ID).find('.in').hide();
			$(this.obProduct).find('.like_icons .o_'+this.offers[this.offerNum].ID).find('.to').show();
		}
		else{
			$(this.obProduct).find('.like_icons .o_'+this.offers[this.offerNum].ID).find('.to').hide();
			$(this.obProduct).find('.like_icons .o_'+this.offers[this.offerNum].ID).find('.in').show();
		}
		jsAjaxUtil.InsertDataToNode(arOptimusOptions['SITE_DIR'] + 'ajax/show_compare_preview_top.php', 'compare_line', false);
	}else{
		console.log(BX.message('ADD_ERROR_COMPARE'));
	}
	return false;
};

window.JCCatalogSection.prototype.CompareRedirect = function()
{
	if (!!this.compareData.comparePath){
		location.href = this.compareData.comparePath;
	}else{
		this.obPopupWin.close();
	}
};

window.JCCatalogSection.prototype.InitBasketUrl = function()
{
	this.basketUrl = (this.basketMode === 'ADD' ? this.basketData.add_url : this.basketData.buy_url);
	switch (this.productType)
	{
		case 1://product
		case 2://set
			this.basketUrl = this.basketUrl.replace('#ID#', this.product.id.toString());
			break;
		case 3://sku
			this.basketUrl = this.basketUrl.replace('#ID#', this.offers[this.offerNum].ID);
			break;
	}
	this.basketParams = {
		'ajax_basket': 'Y'
	};
	if (this.showQuantity)
	{
		// this.basketParams[this.basketData.quantity] = this.obQuantity.value;
		this.basketParams[this.basketData.quantity] = $(this.obProduct).find('.counter_wrapp').find('.counter_block .text').val();
	}
	if (!!this.basketData.sku_props)
	{
		this.basketParams[this.basketData.sku_props_var] = this.basketData.sku_props;
	}
};

window.JCCatalogSection.prototype.FillBasketProps = function()
{
	if (!this.visual.BASKET_PROP_DIV)
	{
		return;
	}
	var
		i = 0,
		propCollection = null,
		foundValues = false,
		obBasketProps = null;

	if (this.basketData.useProps && !this.basketData.emptyProps)
	{
		if (!!this.obPopupWin && !!this.obPopupWin.contentContainer)
		{
			obBasketProps = this.obPopupWin.contentContainer;
		}
	}
	else
	{
		obBasketProps = BX(this.visual.BASKET_PROP_DIV);
	}
	if (!!obBasketProps)
	{
		propCollection = obBasketProps.getElementsByTagName('select');
		if (!!propCollection && !!propCollection.length)
		{
			for (i = 0; i < propCollection.length; i++)
			{
				if (!propCollection[i].disabled)
				{
					switch(propCollection[i].type.toLowerCase())
					{
						case 'select-one':
							this.basketParams[propCollection[i].name] = propCollection[i].value;
							foundValues = true;
							break;
						default:
							break;
					}
				}
			}
		}
		propCollection = obBasketProps.getElementsByTagName('input');
		if (!!propCollection && !!propCollection.length)
		{
			for (i = 0; i < propCollection.length; i++)
			{
				if (!propCollection[i].disabled)
				{
					switch(propCollection[i].type.toLowerCase())
					{
						case 'hidden':
							this.basketParams[propCollection[i].name] = propCollection[i].value;
							foundValues = true;
							break;
						case 'radio':
							if (propCollection[i].checked)
							{
								this.basketParams[propCollection[i].name] = propCollection[i].value;
								foundValues = true;
							}
							break;
						default:
							break;
					}
				}
			}
		}
	}
	if (!foundValues)
	{
		this.basketParams[this.basketData.props] = [];
		this.basketParams[this.basketData.props][0] = 0;
	}
};

window.JCCatalogSection.prototype.Add2Basket = function()
{
	this.basketMode = 'ADD';
	this.Basket();
};

window.JCCatalogSection.prototype.BuyBasket = function()
{
	this.basketMode = 'BUY';
	this.Basket();
};

window.JCCatalogSection.prototype.SendToBasket = function()
{
	if (!this.canBuy){
		return;
	}

	this.InitBasketUrl();
	this.FillBasketProps();

	BX.ajax.loadJSON(
		this.basketUrl,
		this.basketParams,
		BX.delegate(this.BasketResult, this)
	);
};

window.JCCatalogSection.prototype.Basket = function()
{
	var contentBasketProps = '';
	if (!this.canBuy){
		return;
	}

	this.SendToBasket();
};

window.JCCatalogSection.prototype.BasketResult = function(arResult)
{
	var strContent = '',
		strPict = '',
		successful,
		buttons = [];

	if (!!this.obPopupWin){
		this.obPopupWin.close();
	}
	if ('object' !== typeof arResult){
		return false;
	}
	successful = (arResult.STATUS === 'OK');
	if (successful && this.basketAction === 'BUY'){
		this.BasketRedirect();
	}else{
		if (successful){
			getActualBasket();
			markProductAddBasket(this.offers[this.offerNum].ID);
			BX.onCustomEvent('OnBasketChange');
			this.offers[this.offerNum].BASKET_ACTIVE=true;
			this.BasketStateRefresh("Y");
			$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID).data('changed','Y');

		}else{
			console.log(BX.message('ADD_ERROR_BASKET'));
		}
	}
};

window.JCCatalogSection.prototype.BasketRedirect = function()
{
	location.href = (!!this.basketData.basketUrl ? this.basketData.basketUrl : BX.message('BASKET_URL'));
};

})(window);149  21320|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/catalog.section/catalog_block/template.php|3707f3c8<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();?>
<?$this->setFrameMode(true);?>
<?if( count( $arResult["ITEMS"] ) >= 1 ){?>
	<?if(($arParams["AJAX_REQUEST"]=="N") || !isset($arParams["AJAX_REQUEST"])){?>
		<div class="top_wrapper rows_block <?=($arParams["SHOW_UNABLE_SKU_PROPS"] != "N" ? "show_un_props" : "unshow_un_props");?>">
			<div class="catalog_block items block_list">
	<?}?>
		<?
		$currencyList = '';
		if (!empty($arResult['CURRENCIES'])){
			$templateLibrary[] = 'currency';
			$currencyList = CUtil::PhpToJSObject($arResult['CURRENCIES'], false, true, true);
		}
		$templateData = array(
			'TEMPLATE_LIBRARY' => $templateLibrary,
			'CURRENCIES' => $currencyList
		);
		unset($currencyList, $templateLibrary);

		$arParams["BASKET_ITEMS"]=($arParams["BASKET_ITEMS"] ? $arParams["BASKET_ITEMS"] : array());
		$arOfferProps = implode(';', $arParams['OFFERS_CART_PROPERTIES']);


		switch ($arParams["LINE_ELEMENT_COUNT"]){
			case '2':
				$col=2;
				break;
			case '3':
				$col=3;
				break;
			default:
				$col=4;
				break;
		}?>
		<?foreach($arResult["ITEMS"] as $arItem){?>
			<div class="item_block col-<?=$col;?>">
				<div class="catalog_item_wrapp item">
					<div class="basket_props_block" id="bx_basket_div_<?=$arItem["ID"];?>" style="display: none;">
						<?if (!empty($arItem['PRODUCT_PROPERTIES_FILL'])){
							foreach ($arItem['PRODUCT_PROPERTIES_FILL'] as $propID => $propInfo){?>
								<input type="hidden" name="<? echo $arParams['PRODUCT_PROPS_VARIABLE']; ?>[<? echo $propID; ?>]" value="<? echo htmlspecialcharsbx($propInfo['ID']); ?>">
								<?if (isset($arItem['PRODUCT_PROPERTIES'][$propID]))
									unset($arItem['PRODUCT_PROPERTIES'][$propID]);
							}
						}
						$arItem["EMPTY_PROPS_JS"]="Y";
						$emptyProductProperties = empty($arItem['PRODUCT_PROPERTIES']);
						if (!$emptyProductProperties){
							$arItem["EMPTY_PROPS_JS"]="N";?>
							<div class="wrapper">
								<table>
									<?foreach ($arItem['PRODUCT_PROPERTIES'] as $propID => $propInfo){?>
										<tr>
											<td><? echo $arItem['PROPERTIES'][$propID]['NAME']; ?></td>
											<td>
												<?if('L' == $arItem['PROPERTIES'][$propID]['PROPERTY_TYPE']	&& 'C' == $arItem['PROPERTIES'][$propID]['LIST_TYPE']){
													foreach($propInfo['VALUES'] as $valueID => $value){?>
														<label>
															<input type="radio" name="<? echo $arParams['PRODUCT_PROPS_VARIABLE']; ?>[<? echo $propID; ?>]" value="<? echo $valueID; ?>" <? echo ($valueID == $propInfo['SELECTED'] ? '"checked"' : ''); ?>><? echo $value; ?>
														</label>
													<?}
												}else{?>
													<select name="<? echo $arParams['PRODUCT_PROPS_VARIABLE']; ?>[<? echo $propID; ?>]"><?
														foreach($propInfo['VALUES'] as $valueID => $value){?>
															<option value="<? echo $valueID; ?>" <? echo ($valueID == $propInfo['SELECTED'] ? '"selected"' : ''); ?>><? echo $value; ?></option>
														<?}?>
													</select>
												<?}?>
											</td>
										</tr>
									<?}?>
								</table>
							</div>
							<?
						}?>
					</div>
					<?$this->AddEditAction($arItem['ID'], $arItem['EDIT_LINK'], CIBlock::GetArrayByID($arParams["IBLOCK_ID"], "ELEMENT_EDIT"));
					$this->AddDeleteAction($arItem['ID'], $arItem['DELETE_LINK'], CIBlock::GetArrayByID($arParams["IBLOCK_ID"], "ELEMENT_DELETE"), array("CONFIRM" => GetMessage('CT_BCS_ELEMENT_DELETE_CONFIRM')));

					$arItem["strMainID"] = $this->GetEditAreaId($arItem['ID']);
					$arItemIDs=COptimus::GetItemsIDs($arItem);

					$totalCount = COptimus::GetTotalCount($arItem);
					$arQuantityData = COptimus::GetQuantityArray($totalCount, $arItemIDs["ALL_ITEM_IDS"]);

					$item_id = $arItem["ID"];
					$strMeasure = '';
					if(!$arItem["OFFERS"] || $arParams['TYPE_SKU'] !== 'TYPE_1'){
						if($arParams["SHOW_MEASURE"] == "Y" && $arItem["CATALOG_MEASURE"]){
							$arMeasure = CCatalogMeasure::getList(array(), array("ID" => $arItem["CATALOG_MEASURE"]), false, false, array())->GetNext();
							$strMeasure = $arMeasure["SYMBOL_RUS"];
						}
						$arAddToBasketData = COptimus::GetAddToBasketArray($arItem, $totalCount, $arParams["DEFAULT_COUNT"], $arParams["BASKET_URL"], false, $arItemIDs["ALL_ITEM_IDS"], 'small', $arParams);
					}
					elseif($arItem["OFFERS"]){
						$strMeasure = $arItem["MIN_PRICE"]["CATALOG_MEASURE_NAME"];
					}
					?>
					<div class="catalog_item item_wrap <?=(($_GET['q'])) ? 's' : ''?>" id="<?=$arItemIDs["strMainID"];?>">
						<div>
							<div class="image_wrapper_block">
								<div class="stickers">
									<?if (is_array($arItem["PROPERTIES"]["HIT"]["VALUE_XML_ID"])):?>
										<?foreach($arItem["PROPERTIES"]["HIT"]["VALUE_XML_ID"] as $key=>$class){?>
											<div><div class="sticker_<?=strtolower($class);?>"><?=$arItem["PROPERTIES"]["HIT"]["VALUE"][$key]?></div></div>
										<?}?>
									<?endif;?>
									<?if($arParams["SALE_STIKER"] && $arItem["PROPERTIES"][$arParams["SALE_STIKER"]]["VALUE"]){?>
										<div><div class="sticker_sale_text"><?=$arItem["PROPERTIES"][$arParams["SALE_STIKER"]]["VALUE"];?></div></div>
									<?}?>
								</div>
								<?if((!$arItem["OFFERS"] && $arParams["DISPLAY_WISH_BUTTONS"] != "N" ) || ($arParams["DISPLAY_COMPARE"] == "Y")):?>
									<div class="like_icons">
										<?if($arParams["DISPLAY_WISH_BUTTONS"] != "N"):?>
											<?if(!$arItem["OFFERS"]):?>
												<div class="wish_item_button">
													<span title="<?=GetMessage('CATALOG_WISH')?>" class="wish_item to" data-item="<?=$arItem["ID"]?>" data-iblock="<?=$arItem["IBLOCK_ID"]?>"><i></i></span>
													<span title="<?=GetMessage('CATALOG_WISH_OUT')?>" class="wish_item in added" style="display: none;" data-item="<?=$arItem["ID"]?>" data-iblock="<?=$arItem["IBLOCK_ID"]?>"><i></i></span>
												</div>
											<?elseif($arItem["OFFERS"] && !empty($arItem['OFFERS_PROP'])):?>
												<div class="wish_item_button" style="display: none;">
													<span title="<?=GetMessage('CATALOG_WISH')?>" class="wish_item to <?=$arParams["TYPE_SKU"];?>" data-item="" data-iblock="<?=$arItem["IBLOCK_ID"]?>" data-offers="Y" data-props="<?=$arOfferProps?>"><i></i></span>
													<span title="<?=GetMessage('CATALOG_WISH_OUT')?>" class="wish_item in added <?=$arParams["TYPE_SKU"];?>" style="display: none;" data-item="" data-iblock="<?=$arOffer["IBLOCK_ID"]?>"><i></i></span>
												</div>
											<?endif;?>
										<?endif;?>
										<?if($arParams["DISPLAY_COMPARE"] == "Y"):?>
											<?if(!$arItem["OFFERS"] || $arParams["TYPE_SKU"] !== 'TYPE_1'):?>
												<div class="compare_item_button">
													<span title="<?=GetMessage('CATALOG_COMPARE')?>" class="compare_item to" data-iblock="<?=$arParams["IBLOCK_ID"]?>" data-item="<?=$arItem["ID"]?>" ><i></i></span>
													<span title="<?=GetMessage('CATALOG_COMPARE_OUT')?>" class="compare_item in added" style="display: none;" data-iblock="<?=$arParams["IBLOCK_ID"]?>" data-item="<?=$arItem["ID"]?>"><i></i></span>
												</div>
											<?elseif($arItem["OFFERS"]):?>
												<div class="compare_item_button">
													<span title="<?=GetMessage('CATALOG_COMPARE')?>" class="compare_item to <?=$arParams["TYPE_SKU"];?>" data-iblock="<?=$arParams["IBLOCK_ID"]?>" data-item="" ><i></i></span>
													<span title="<?=GetMessage('CATALOG_COMPARE_OUT')?>" class="compare_item in added <?=$arParams["TYPE_SKU"];?>" style="display: none;" data-iblock="<?=$arParams["IBLOCK_ID"]?>" data-item=""><i></i></span>
												</div>
											<?endif;?>
										<?endif;?>
									</div>
								<?endif;?>
								<a href="<?=$arItem["DETAIL_PAGE_URL"]?>" class="thumb" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PICT']; ?>">
									<?
									$a_alt=($arItem["IPROPERTY_VALUES"]["ELEMENT_PREVIEW_PICTURE_FILE_ALT"] ? $arItem["IPROPERTY_VALUES"]["ELEMENT_PREVIEW_PICTURE_FILE_ALT"] : $arItem["NAME"] );
									$a_title=($arItem["IPROPERTY_VALUES"]["ELEMENT_PREVIEW_PICTURE_FILE_TITLE"] ? $arItem["IPROPERTY_VALUES"]["ELEMENT_PREVIEW_PICTURE_FILE_TITLE"] : $arItem["NAME"] );
									?>
									<?if( !empty($arItem["PREVIEW_PICTURE"]) ):?>
										<img src="<?=$arItem["PREVIEW_PICTURE"]["SRC"]?>" alt="<?=$a_alt;?>" title="<?=$a_title;?>" />
									<?elseif( !empty($arItem["DETAIL_PICTURE"])):?>
										<?$img = CFile::ResizeImageGet($arItem["DETAIL_PICTURE"], array( "width" => 170, "height" => 170 ), BX_RESIZE_IMAGE_PROPORTIONAL,true );?>
										<img src="<?=$img["src"]?>" alt="<?=$a_alt;?>" title="<?=$a_title;?>" />
									<?else:?>
										<img src="<?=SITE_TEMPLATE_PATH?>/images/no_photo_medium.png" alt="<?=$a_alt;?>" title="<?=$a_title;?>" />
									<?endif;?>
								</a>
							</div>
							<div class="item_info <?=$arParams["TYPE_SKU"]?>">
								<div class="item-title">
									<a href="<?=$arItem["DETAIL_PAGE_URL"]?>"><span><?=$arItem["NAME"]?></span></a>
								</div>
								<?if($arParams["SHOW_RATING"] == "Y"):?>
									<div class="rating">
										<?$APPLICATION->IncludeComponent(
										   "bitrix:iblock.vote",
										   "element_rating_front",
										   Array(
											  "IBLOCK_TYPE" => $arParams["IBLOCK_TYPE"],
											  "IBLOCK_ID" => $arItem["IBLOCK_ID"],
											  "ELEMENT_ID" =>$arItem["ID"],
											  "MAX_VOTE" => 5,
											  "VOTE_NAMES" => array(),
											  "CACHE_TYPE" => $arParams["CACHE_TYPE"],
											  "CACHE_TIME" => $arParams["CACHE_TIME"],
											  "DISPLAY_AS_RATING" => 'vote_avg'
										   ),
										   $component, array("HIDE_ICONS" =>"Y")
										);?>
									</div>
								<?endif;?>
								<?=$arQuantityData["HTML"];?>
								<div class="cost prices clearfix">
									<?if( $arItem["OFFERS"]){?>
										<?$minPrice = false;
										if (isset($arItem['MIN_PRICE']) || isset($arItem['RATIO_PRICE'])){
											// $minPrice = (isset($arItem['RATIO_PRICE']) ? $arItem['RATIO_PRICE'] : $arItem['MIN_PRICE']);
											$minPrice = $arItem['MIN_PRICE'];
										}
										$offer_id=0;
										if($arParams["TYPE_SKU"]=="N"){
											$offer_id=$minPrice["MIN_ITEM_ID"];
										}
										$min_price_id=$minPrice["MIN_PRICE_ID"];
										if(!$min_price_id)
											$min_price_id=$minPrice["PRICE_ID"];
										if($minPrice["MIN_ITEM_ID"])
											$item_id=$minPrice["MIN_ITEM_ID"];
										$prefix = '';
										if('N' == $arParams['TYPE_SKU'] || $arParams['DISPLAY_TYPE'] !== 'block' || empty($arItem['OFFERS_PROP'])){
											$prefix = GetMessage("CATALOG_FROM");
										}
										if($arParams["SHOW_OLD_PRICE"]=="Y"){?>
											<div class="price" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PRICE']; ?>">
												<?if(strlen($minPrice["PRINT_DISCOUNT_VALUE"])):?>
													<?=$prefix;?> <?=$minPrice["PRINT_DISCOUNT_VALUE"];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
												<?endif;?>
											</div>
											<div class="price discount" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PRICE_OLD']; ?>">
												<span <?=(!$minPrice["DISCOUNT_DIFF"] ? 'style="display:none;"' : '')?>><?=$minPrice["PRINT_VALUE"];?></span>
											</div>
											<?/*if($arParams["SHOW_DISCOUNT_PERCENT"]=="Y"){?>
												<div class="sale_block" <?=(!$minPrice["DISCOUNT_DIFF"] ? 'style="display:none;"' : '')?>>
													<?$percent=round(($minPrice["DISCOUNT_DIFF"]/$minPrice["VALUE"])*100, 2);?>
													<div class="value">-<?=$percent;?>%</div>
													<div class="text"><?=GetMessage("CATALOG_ECONOMY");?> <span><?=$minPrice["PRINT_DISCOUNT_DIFF"];?></span></div>
													<div class="clearfix"></div>
												</div>
											<?}*/?>
										<?}else{?>
											<div class="price only_price" id="<?=$arItemIDs["ALL_ITEM_IDS"]['PRICE']?>">
												<?if(strlen($minPrice["PRINT_DISCOUNT_VALUE"])):?>
													<?=$prefix;?> <?=$minPrice['PRINT_DISCOUNT_VALUE'];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
												<?endif;?>
											</div>
										<?}?>
									<?}elseif ( $arItem["PRICES"] ){?>
										<? $arCountPricesCanAccess = 0;
										$min_price_id=0;
										foreach( $arItem["PRICES"] as $key => $arPrice ) { if($arPrice["CAN_ACCESS"]){$arCountPricesCanAccess++;} } ?>
										<?foreach($arItem["PRICES"] as $key => $arPrice){?>
											<?if($arPrice["CAN_ACCESS"]){
												$percent=0;
												if($arPrice["MIN_PRICE"]=="Y"){
													$min_price_id=$arPrice["PRICE_ID"];
												}?>
												<?$price = CPrice::GetByID($arPrice["ID"]);?>
												<?if($arCountPricesCanAccess > 1):?>
													<div class="price_name"><?=$price["CATALOG_GROUP_NAME"];?></div>
												<?endif;?>
												<?if($arPrice["VALUE"] > $arPrice["DISCOUNT_VALUE"] && $arParams["SHOW_OLD_PRICE"]=="Y"){?>
													<div class="price">
														<?if(strlen($arPrice["PRINT_VALUE"])):?>
															<?=$arPrice["PRINT_DISCOUNT_VALUE"];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
														<?endif;?>
													</div>
													<div class="price discount">
														<span><?=$arPrice["PRINT_VALUE"];?></span>
													</div>
													<?/*if($arParams["SHOW_DISCOUNT_PERCENT"]=="Y"){?>
														<div class="sale_block">
															<?$percent=round(($arPrice["DISCOUNT_DIFF"]/$arPrice["VALUE"])*100, 2);?>
															<?if($percent && $percent<100){?>
																<div class="value">-<?=$percent;?>%</div>
															<?}?>
															<div class="text"><?=GetMessage("CATALOG_ECONOMY");?> <span><?=$arPrice["PRINT_DISCOUNT_DIFF"];?></span></div>
															<div class="clearfix"></div>
														</div>
													<?}*/?>
												<?}else{?>
													<div class="price only_price">
														<?if(strlen($arPrice["PRINT_VALUE"])):?>
															<?=$arPrice["PRINT_VALUE"];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
														<?endif;?>
													</div>
												<?}?>
											<?}?>
										<?}?>
									<?}?>
								</div>
								<?if($arParams["SHOW_DISCOUNT_TIME"]=="Y"){?>
									<?$arDiscounts = CCatalogDiscount::GetDiscountByProduct( $arItem["ID"], $USER->GetUserGroupArray(), "N", $min_price_id, SITE_ID );
									$arDiscount=array();
									if($arDiscounts)
										$arDiscount=current($arDiscounts);
									if($arDiscount["ACTIVE_TO"]){?>
										<div class="view_sale_block">
											<div class="count_d_block">
												<span class="active_to hidden"><?=$arDiscount["ACTIVE_TO"];?></span>
												<div class="title"><?=GetMessage("UNTIL_AKC");?></div>
												<span class="countdown values"></span>
											</div>
											<div class="quantity_block">
												<div class="title"><?=GetMessage("TITLE_QUANTITY_BLOCK");?></div>
												<div class="values">
													<span class="item">
														<span class="value" <?=((count( $arItem["OFFERS"] ) > 0 && $arParams["TYPE_SKU"] == 'TYPE_1') ? 'style="opacity:0;"' : '')?>><?=$totalCount;?></span>
														<span class="text"><?=GetMessage("TITLE_QUANTITY");?></span>
													</span>
												</div>
											</div>
										</div>
									<?}?>
								<?}?>
								<div class="hover_block1 footer_button">
									<?if($arItem["OFFERS"]){?>
										<?if(!empty($arItem['OFFERS_PROP'])){?>
											<div class="sku_props">
												<div class="bx_catalog_item_scu wrapper_sku" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PROP_DIV']; ?>">
													<?$arSkuTemplate = array();?>
													<?$arSkuTemplate=COptimus::GetSKUPropsArray($arItem['OFFERS_PROPS_JS'], $arResult["SKU_IBLOCK_ID"], $arParams["DISPLAY_TYPE"], $arParams["OFFER_HIDE_NAME_PROPS"]);?>
													<?foreach ($arSkuTemplate as $code => $strTemplate){
														if (!isset($arItem['OFFERS_PROP'][$code]))
															continue;
														echo '<div>', str_replace('#ITEM#_prop_', $arItemIDs["ALL_ITEM_IDS"]['PROP'], $strTemplate), '</div>';
													}?>
												</div>
												<?$arItemJSParams=COptimus::GetSKUJSParams($arResult, $arParams, $arItem);?>

												<script type="text/javascript">
													var <? echo $arItemIDs["strObName"]; ?> = new JCCatalogSection(<? echo CUtil::PhpToJSObject($arItemJSParams, false, true); ?>);
												</script>
											</div>
										<?}?>
									<?}?>
									<?if(!$arItem["OFFERS"] || $arParams['TYPE_SKU'] !== 'TYPE_1'):?>
										<div class="counter_wrapp <?=($arItem["OFFERS"] && $arParams["TYPE_SKU"] == "TYPE_1" ? 'woffers' : '')?>">
											<?if(($arAddToBasketData["OPTIONS"]["USE_PRODUCT_QUANTITY_LIST"] && $arAddToBasketData["ACTION"] == "ADD") && $arItem["CAN_BUY"]):?>
												<div class="counter_block" data-offers="<?=($arItem["OFFERS"] ? "Y" : "N");?>" data-item="<?=$arItem["ID"];?>">
													<span class="minus" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['QUANTITY_DOWN']; ?>">-</span>
													<input type="text" class="text" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['QUANTITY']; ?>" name="<? echo $arParams["PRODUCT_QUANTITY_VARIABLE"]; ?>" value="<?=$arAddToBasketData["MIN_QUANTITY_BUY"]?>" />
													<span class="plus" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['QUANTITY_UP']; ?>" <?=($arAddToBasketData["MAX_QUANTITY_BUY"] ? "data-max='".$arAddToBasketData["MAX_QUANTITY_BUY"]."'" : "")?>>+</span>
												</div>
											<?endif;?>
											<div id="<?=$arItemIDs["ALL_ITEM_IDS"]['BASKET_ACTIONS']; ?>" class="button_block <?=(($arAddToBasketData["ACTION"] == "ORDER"/*&& !$arItem["CAN_BUY"]*/)  || !$arItem["CAN_BUY"] || !$arAddToBasketData["OPTIONS"]["USE_PRODUCT_QUANTITY_LIST"] || $arAddToBasketData["ACTION"] == "SUBSCRIBE" ? "wide" : "");?>">
												<!--noindex-->
													<?=$arAddToBasketData["HTML"]?>
												<!--/noindex-->
											</div>
										</div>
									<?elseif($arItem["OFFERS"]):?>
										<?if(empty($arItem['OFFERS_PROP'])){?>
											<div class="offer_buy_block buys_wrapp woffers">
												<?
												$arItem["OFFERS_MORE"] = "Y";
												$arAddToBasketData = COptimus::GetAddToBasketArray($arItem, $totalCount, $arParams["DEFAULT_COUNT"], $arParams["BASKET_URL"], false, $arItemIDs["ALL_ITEM_IDS"], 'small read_more1', $arParams);?>
												<!--noindex-->
													<?=$arAddToBasketData["HTML"]?>
												<!--/noindex-->
											</div>
										<?}else{?>
											<div class="offer_buy_block buys_wrapp woffers" style="display:none;">
												<div class="counter_wrapp"></div>
											</div>
										<?}?>
									<?endif;?>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		<?}?>
	<?if(($arParams["AJAX_REQUEST"]=="N") || !isset($arParams["AJAX_REQUEST"])){?>
			</div>
		</div>
	<?}?>
	<?if($arParams["AJAX_REQUEST"]=="Y"){?>
		<div class="wrap_nav">
	<?}?>
	<div class="bottom_nav <?=$arParams["DISPLAY_TYPE"];?>" <?=($arParams["AJAX_REQUEST"]=="Y" ? "style='display: none; '" : "");?>>
		<?if( $arParams["DISPLAY_BOTTOM_PAGER"] == "Y" ){?><?=$arResult["NAV_STRING"]?><?}?>
	</div>
	<?if($arParams["AJAX_REQUEST"]=="Y"){?>
		</div>
	<?}?>
<?}else{?>
	<script>
		// $(document).ready(function(){
			$('.sort_header').animate({'opacity':'1'}, 500);
		// })
	</script>
	<div class="no_goods catalog_block_view">
		<div class="no_products">
			<div class="wrap_text_empty">
				<?if($_REQUEST["set_filter"]){?>
					<?$APPLICATION->IncludeFile(SITE_DIR."include/section_no_products_filter.php", Array(), Array("MODE" => "html",  "NAME" => GetMessage('EMPTY_CATALOG_DESCR')));?>
				<?}else{?>
					<?$APPLICATION->IncludeFile(SITE_DIR."include/section_no_products.php", Array(), Array("MODE" => "html",  "NAME" => GetMessage('EMPTY_CATALOG_DESCR')));?>
				<?}?>
			</div>
		</div>
		<?if($_REQUEST["set_filter"]){?>
			<span class="button wide"><?=GetMessage('RESET_FILTERS');?></span>
		<?}?>
	</div>
<?}?>

<script>
	$(document).ready(function(){
		$('.catalog_block .catalog_item_wrapp .catalog_item .item-title').sliceHeight();
		$('.catalog_block .catalog_item_wrapp .catalog_item .cost').sliceHeight();
		$('.catalog_block .catalog_item_wrapp .item_info').sliceHeight({classNull: '.footer_button'});
		$('.catalog_block .catalog_item_wrapp').sliceHeight({classNull: '.footer_button'});
	});

	BX.message({
		QUANTITY_AVAILIABLE: '<? echo COption::GetOptionString("aspro.optimus", "EXPRESSION_FOR_EXISTS", GetMessage("EXPRESSION_FOR_EXISTS_DEFAULT"), SITE_ID); ?>',
		QUANTITY_NOT_AVAILIABLE: '<? echo COption::GetOptionString("aspro.optimus", "EXPRESSION_FOR_NOTEXISTS", GetMessage("EXPRESSION_FOR_NOTEXISTS"), SITE_ID); ?>',
		ADD_ERROR_BASKET: '<? echo GetMessage("ADD_ERROR_BASKET"); ?>',
		ADD_ERROR_COMPARE: '<? echo GetMessage("ADD_ERROR_COMPARE"); ?>',
	})
</script>157  29470|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/catalog.section/catalog_block_slider/script.min.js|eec976aa!function(t){t.JCCatalogSection||(t.JCCatalogSection=function(t){if(this.skuVisualParams={SELECT:{TAG_BIND:"select",TAG:"option",ACTIVE_CLASS:"active",HIDE_CLASS:"hidden",EVENT:"change"},LI:{TAG_BIND:"li",TAG:"li",ACTIVE_CLASS:"active",HIDE_CLASS:"missing",EVENT:"click"}},this.productType=0,this.showQuantity=!0,this.showAbsent=!0,this.secondPict=!1,this.showOldPrice=!1,this.showPercent=!1,this.showSkuProps=!1,this.basketAction="ADD",this.basketLinkURL="",this.showClosePopup=!1,this.useCompare=!1,this.visual={ID:"",PICT_ID:"",SECOND_PICT_ID:"",QUANTITY_ID:"",QUANTITY_UP_ID:"",QUANTITY_DOWN_ID:"",STORE_QUANTITY:"",PRICE_ID:"",PRICE_OLD_ID:"",DSC_PERC:"",SECOND_DSC_PERC:"",DISPLAY_PROP_DIV:"",BASKET_PROP_DIV:""},this.product={checkQuantity:!1,maxQuantity:0,stepQuantity:1,isDblQuantity:!1,canBuy:!0,canSubscription:!0,name:"",pict:{},id:0,addUrl:"",buyUrl:""},this.basketMode="",this.basketData={useProps:!1,emptyProps:!1,quantity:"quantity",props:"prop",basketUrl:"",sku_props:"",sku_props_var:"basket_props",add_url:"",buy_url:""},this.compareData={compareUrl:"",comparePath:""},this.defaultPict={pict:null,secondPict:null},this.checkQuantity=!1,this.maxQuantity=0,this.stepQuantity=1,this.defaultCount=1,this.isDblQuantity=!1,this.canBuy=!0,this.currentBasisPrice={},this.canSubscription=!0,this.precision=6,this.precisionFactor=Math.pow(10,this.precision),this.offers=[],this.offerNum=0,this.treeProps=[],this.obTreeRows=[],this.showCount=[],this.showStart=[],this.selectedValues={},this.obProduct=null,this.obQuantity=null,this.obQuantityUp=null,this.obQuantityDown=null,this.obPict=null,this.obSecondPict=null,this.obPrice=null,this.obTree=null,this.obBuyBtn=null,this.obBasketBtn=null,this.obBasketActions=null,this.obNotAvail=null,this.obDscPerc=null,this.obSecondDscPerc=null,this.obSkuProps=null,this.obMeasure=null,this.obCompare=null,this.obPopupWin=null,this.basketUrl="",this.basketParams={},this.treeRowShowSize=5,this.treeEnableArrow={display:"",cursor:"pointer",opacity:1},this.treeDisableArrow={display:"",cursor:"default",opacity:.2},this.lastElement=!1,this.containerHeight=0,this.errorCode=0,"object"==typeof t){switch(this.productType=parseInt(t.PRODUCT_TYPE,10),this.showQuantity=t.SHOW_QUANTITY,this.showAbsent=t.SHOW_ABSENT,this.secondPict=!!t.SECOND_PICT,this.showOldPrice=!!t.SHOW_OLD_PRICE,this.showPercent=!!t.SHOW_DISCOUNT_PERCENT,this.showSkuProps=!!t.SHOW_SKU_PROPS,t.ADD_TO_BASKET_ACTION&&(this.basketAction=t.ADD_TO_BASKET_ACTION),this.showClosePopup=!!t.SHOW_CLOSE_POPUP,this.useCompare=!!t.DISPLAY_COMPARE,this.visual=t.VISUAL,this.defaultCount=t.DEFAULT_COUNT,this.basketLinkURL=t.BASKET_URL,this.productType){case 1:case 2:t.PRODUCT&&"object"==typeof t.PRODUCT?(this.showQuantity&&(this.product.checkQuantity=t.PRODUCT.CHECK_QUANTITY,this.product.isDblQuantity=t.PRODUCT.QUANTITY_FLOAT,this.product.checkQuantity&&(this.product.maxQuantity=this.product.isDblQuantity?parseFloat(t.PRODUCT.MAX_QUANTITY):parseInt(t.PRODUCT.MAX_QUANTITY,10)),this.product.stepQuantity=this.product.isDblQuantity?parseFloat(t.PRODUCT.STEP_QUANTITY):parseInt(t.PRODUCT.STEP_QUANTITY,10),this.checkQuantity=this.product.checkQuantity,this.isDblQuantity=this.product.isDblQuantity,this.maxQuantity=this.product.maxQuantity,this.stepQuantity=this.product.stepQuantity,this.isDblQuantity&&(this.stepQuantity=Math.round(this.stepQuantity*this.precisionFactor)/this.precisionFactor)),this.product.canBuy=t.PRODUCT.CAN_BUY,this.product.canSubscription=t.PRODUCT.SUBSCRIPTION,t.PRODUCT.BASIS_PRICE&&(this.currentBasisPrice=t.PRODUCT.BASIS_PRICE),this.canBuy=this.product.canBuy,this.canSubscription=this.product.canSubscription,this.product.name=t.PRODUCT.NAME,this.product.pict=t.PRODUCT.PICT,this.product.id=t.PRODUCT.ID,t.PRODUCT.ADD_URL&&(this.product.addUrl=t.PRODUCT.ADD_URL),t.PRODUCT.BUY_URL&&(this.product.buyUrl=t.PRODUCT.BUY_URL),t.BASKET&&"object"==typeof t.BASKET&&(this.basketData.useProps=!!t.BASKET.ADD_PROPS,this.basketData.emptyProps=!!t.BASKET.EMPTY_PROPS)):this.errorCode=-1;break;case 3:t.OFFERS&&BX.type.isArray(t.OFFERS)?(t.PRODUCT&&"object"==typeof t.PRODUCT&&(this.product.name=t.PRODUCT.NAME,this.product.id=t.PRODUCT.ID),this.offers=t.OFFERS,this.offerNum=0,t.OFFER_SELECTED&&(this.offerNum=parseInt(t.OFFER_SELECTED,10)),isNaN(this.offerNum)&&(this.offerNum=0),t.TREE_PROPS&&(this.treeProps=t.TREE_PROPS),t.DEFAULT_PICTURE&&(this.defaultPict.pict=t.DEFAULT_PICTURE.PICTURE,this.defaultPict.secondPict=t.DEFAULT_PICTURE.PICTURE_SECOND)):this.errorCode=-1;break;default:this.errorCode=-1}t.BASKET&&"object"==typeof t.BASKET&&(t.BASKET.QUANTITY&&(this.basketData.quantity=t.BASKET.QUANTITY),t.BASKET.PROPS&&(this.basketData.props=t.BASKET.PROPS),t.BASKET.BASKET_URL&&(this.basketData.basketUrl=t.BASKET.BASKET_URL),3===this.productType&&t.BASKET.SKU_PROPS&&(this.basketData.sku_props=t.BASKET.SKU_PROPS),t.BASKET.ADD_URL_TEMPLATE&&(this.basketData.add_url=t.BASKET.ADD_URL_TEMPLATE),t.BASKET.BUY_URL_TEMPLATE&&(this.basketData.buy_url=t.BASKET.BUY_URL_TEMPLATE),""===this.basketData.add_url&&""===this.basketData.buy_url&&(this.errorCode=-1024)),this.useCompare&&(t.COMPARE&&"object"==typeof t.COMPARE?(t.COMPARE.COMPARE_PATH&&(this.compareData.comparePath=t.COMPARE.COMPARE_PATH),t.COMPARE.COMPARE_URL_TEMPLATE_DEL&&(this.compareData.compareUrlDel=t.COMPARE.COMPARE_URL_TEMPLATE_DEL),t.COMPARE.COMPARE_URL_TEMPLATE?this.compareData.compareUrl=t.COMPARE.COMPARE_URL_TEMPLATE:this.useCompare=!1):this.useCompare=!1),this.lastElement=!!t.LAST_ELEMENT&&"Y"===t.LAST_ELEMENT}0===this.errorCode&&BX.ready(BX.delegate(this.Init,this))},t.JCCatalogSection.prototype.Init=function(){var t=0,s="",i=null;if(this.obProduct=BX(this.visual.ID),this.obProduct||(this.errorCode=-1),this.obPict=BX(this.visual.PICT_ID),this.obPict||(this.errorCode=-2),this.secondPict&&this.visual.SECOND_PICT_ID&&(this.obSecondPict=BX(this.visual.SECOND_PICT_ID)),this.storeQuanity=BX(this.visual.STORE_QUANTITY),this.obPrice=BX(this.visual.PRICE_ID),this.obPriceOld=BX(this.visual.PRICE_OLD_ID),this.obPrice||(this.errorCode=-16),this.showQuantity&&this.visual.QUANTITY_ID&&(this.obQuantity=BX(this.visual.QUANTITY_ID),this.visual.QUANTITY_UP_ID&&(this.obQuantityUp=BX(this.visual.QUANTITY_UP_ID)),this.visual.QUANTITY_DOWN_ID&&(this.obQuantityDown=BX(this.visual.QUANTITY_DOWN_ID))),3===this.productType){if(this.visual.TREE_ID)for(this.obTree=BX(this.visual.TREE_ID),this.obTree||(this.errorCode=-256),s=this.visual.TREE_ITEM_ID,t=0;t<this.treeProps.length;t++)if(this.obTreeRows[t]={LIST:BX(s+this.treeProps[t].ID+"_list"),CONT:BX(s+this.treeProps[t].ID+"_cont")},!this.obTreeRows[t].LIST||!this.obTreeRows[t].CONT){this.errorCode=-512;break}this.visual.QUANTITY_MEASURE&&(this.obMeasure=BX(this.visual.QUANTITY_MEASURE))}if(this.obBasketActions=BX(this.visual.BASKET_ACTIONS_ID),this.obBasketActions&&(this.visual.BUY_ID&&(this.obBuyBtn=BX(this.visual.BUY_ID)),this.visual.BASKET_LINK&&(this.obBasketBtn=BX(this.visual.BASKET_LINK))),this.obNotAvail=BX(this.visual.NOT_AVAILABLE_MESS),this.showPercent&&(this.visual.DSC_PERC&&(this.obDscPerc=BX(this.visual.DSC_PERC)),this.secondPict&&this.visual.SECOND_DSC_PERC&&(this.obSecondDscPerc=BX(this.visual.SECOND_DSC_PERC))),this.showSkuProps&&this.visual.DISPLAY_PROP_DIV&&(this.obSkuProps=BX(this.visual.DISPLAY_PROP_DIV)),0===this.errorCode){switch(this.showQuantity&&(this.obQuantityUp&&BX.bind(this.obQuantityUp,"click",BX.delegate(this.QuantityUp,this)),this.obQuantityDown&&BX.bind(this.obQuantityDown,"click",BX.delegate(this.QuantityDown,this)),this.obQuantity&&BX.bind(this.obQuantity,"change",BX.delegate(this.QuantityChange,this))),this.productType){case 1:break;case 3:for(var e in this.skuVisualParams){var i=BX.findChildren(this.obTree,{tagName:this.skuVisualParams[e].TAG_BIND},!0);if(i&&0<i.length)for(t=0;t<i.length;t++)$(i[t]).on(this.skuVisualParams[e].EVENT,BX.delegate(this.SelectOfferProp,this))}this.SetCurrent()}this.obBuyBtn&&("ADD"===this.basketAction||BX.bind(this.obBuyBtn,"click",BX.delegate(this.BuyBasket,this))),this.useCompare&&(this.obCompare=BX(this.visual.COMPARE_LINK_ID))}},t.JCCatalogSection.prototype.checkHeight=function(){this.containerHeight=parseInt(this.obProduct.parentNode.offsetHeight,10),isNaN(this.containerHeight)&&(this.containerHeight=0)},t.JCCatalogSection.prototype.setHeight=function(){0<this.containerHeight&&BX.adjust(this.obProduct.parentNode,{style:{height:this.containerHeight+"px"}})},t.JCCatalogSection.prototype.clearHeight=function(){BX.adjust(this.obProduct.parentNode,{style:{height:"auto"}})},t.JCCatalogSection.prototype.QuantityUp=function(){var t=0,s=!0;0===this.errorCode&&this.showQuantity&&this.canBuy&&(t=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(t)||(t+=this.stepQuantity,this.checkQuantity&&t>this.maxQuantity&&(s=!1),s&&(this.isDblQuantity&&(t=Math.round(t*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=t)))},t.JCCatalogSection.prototype.QuantityDown=function(){var t=0,s=!0;0===this.errorCode&&this.showQuantity&&this.canBuy&&(t=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(t)||(t-=this.stepQuantity,t<this.stepQuantity&&(s=!1),s&&(this.isDblQuantity&&(t=Math.round(t*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=t)))},t.JCCatalogSection.prototype.QuantityChange=function(){var t,s,i=0;0===this.errorCode&&this.showQuantity&&(this.canBuy?(i=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(i)?this.obQuantity.value=this.stepQuantity:(this.checkQuantity&&i>this.maxQuantity&&(i=this.maxQuantity),i<this.stepQuantity?i=this.stepQuantity:(s=i/this.stepQuantity,t=parseInt(s,10),isNaN(t)&&(t=1,s=1.1),s>t&&(i=1>=t?this.stepQuantity:t*this.stepQuantity,i=Math.round(i*this.precisionFactor)/this.precisionFactor)),this.obQuantity.value=i)):this.obQuantity.value=this.stepQuantity)},t.JCCatalogSection.prototype.QuantitySet=function(t){0===this.errorCode&&(this.canBuy=this.offers[t].CAN_BUY,this.canBuy?(this.obBasketActions&&BX.style(this.obBasketActions,"display",""),this.obNotAvail&&BX.style(this.obNotAvail,"display","none")):(this.obBasketActions&&(BX.style(this.obBasketActions,"opacity","0"),BX.style(BX.findParent(BX(this.obQuantity),{"class":"counter_block"}),"display","none")),this.obNotAvail&&BX.style(this.obNotAvail,"display","")),this.showQuantity&&(this.isDblQuantity=this.offers[t].QUANTITY_FLOAT,this.checkQuantity=this.offers[t].CHECK_QUANTITY,this.isDblQuantity?(this.maxQuantity=parseFloat(this.offers[t].MAX_QUANTITY),this.stepQuantity=Math.round(parseFloat(this.offers[t].STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor):(this.maxQuantity=parseInt(this.offers[t].MAX_QUANTITY,10),this.stepQuantity=parseInt(this.offers[t].STEP_QUANTITY,10)),this.obQuantity&&(this.obQuantity.value=this.defaultCount,this.obQuantity.disabled=!this.canBuy),this.obMeasure&&(this.offers[t].MEASURE?BX.adjust(this.obMeasure,{html:this.offers[t].MEASURE}):BX.adjust(this.obMeasure,{html:""}))),this.currentBasisPrice=this.offers[t].BASIS_PRICE)},t.JCCatalogSection.prototype.SelectOfferProp=function(){var t=0,s="",i="",e=[],o=null,a=BX.proxy_context;if("undefined"!=typeof a.options&&"undefined"!=typeof a.options[a.selectedIndex]&&(a=a.options[a.selectedIndex]),a&&a.hasAttribute("data-treevalue")&&(i=a.getAttribute("data-treevalue"),propModes=a.getAttribute("data-showtype"),e=i.split("_"),this.SearchOfferPropIndex(e[0],e[1])&&(o=BX.findChildren(a.parentNode,{tagName:this.skuVisualParams[propModes.toUpperCase()].TAG},!1),o&&0<o.length)))for(t=0;t<o.length;t++)s=o[t].getAttribute("data-onevalue"),"TEXT"==propModes?s===e[1]?o[t].setAttribute("selected","selected"):o[t].removeAttribute("selected"):s===e[1]?$(o[t]).addClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS):$(o[t]).removeClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS)},t.JCCatalogSection.prototype.SearchOfferPropIndex=function(t,s){var i,e,o="",a=!1,r=[],h=-1,n={},c=[];for(i=0;i<this.treeProps.length;i++)if(this.treeProps[i].ID===t){h=i;break}if(h>-1){for(i=0;h>i;i++)o="PROP_"+this.treeProps[i].ID,n[o]=this.selectedValues[o];if(o="PROP_"+this.treeProps[h].ID,a=this.GetRowValues(n,o),!a)return!1;if(!BX.util.in_array(s,a))return!1;for(n[o]=s,i=h+1;i<this.treeProps.length;i++){if(o="PROP_"+this.treeProps[i].ID,a=this.GetRowValues(n,o),!a)return!1;if(this.showAbsent)for(r=[],c=[],c=BX.clone(n,!0),e=0;e<a.length;e++)c[o]=a[e],this.GetCanBuy(c)&&(r[r.length]=a[e]);else r=a;this.selectedValues[o]&&BX.util.in_array(this.selectedValues[o],r)?n[o]=this.selectedValues[o]:n[o]=r[0],this.UpdateRow(i,n[o],a,r)}this.selectedValues=n,this.ChangeInfo()}return!0},t.JCCatalogSection.prototype.UpdateRow=function(t,s,i,e){var o=0,a=0,r="",h=0,n={},c=!1,u=0,l=(this.treeEnableArrow,this.treeEnableArrow,0),p=null;if(t>-1&&t<this.obTreeRows.length&&(propMode=this.treeProps[t].DISPLAY_TYPE,p=BX.findChildren(this.obTreeRows[t].LIST,{tagName:this.skuVisualParams[propMode].TAG},!1),p&&0<p.length)){for(selectMode="SELECT"===this.treeProps[t].DISPLAY_TYPE,h=i.length,n={style:{},props:{disabled:"",selected:""}},o=0;o<p.length;o++)r=p[o].getAttribute("data-onevalue"),c=r===s&&0!=r,BX.util.in_array(r,e)?n.props.className=c?this.skuVisualParams[propMode].ACTIVE_CLASS:"":n.props.className=c?this.skuVisualParams[propMode].ACTIVE_CLASS+" "+this.skuVisualParams[propMode].HIDE_CLASS:this.skuVisualParams[propMode].HIDE_CLASS,selectMode?(n.props.disabled="disabled",n.props.selected=c?"selected":""):n.style.display="none",BX.util.in_array(r,i)&&(selectMode?n.props.disabled="":n.style.display="",c&&(u=a),a++),BX.adjust(p[o],n);selectMode&&$(this.obTreeRows[t].LIST).parent().hasClass("ik_select")&&$(this.obTreeRows[t].LIST).ikSelect("reset"),this.showCount[t]=h,this.showStart[t]=l}},t.JCCatalogSection.prototype.GetRowValues=function(t,s){var i,e=0,o=[],a=!1,r=!0;if(0===t.length){for(e=0;e<this.offers.length;e++)BX.util.in_array(this.offers[e].TREE[s],o)||(o[o.length]=this.offers[e].TREE[s]);a=!0}else for(e=0;e<this.offers.length;e++){r=!0;for(i in t)if(t[i]!==this.offers[e].TREE[i]){r=!1;break}r&&(BX.util.in_array(this.offers[e].TREE[s],o)||(o[o.length]=this.offers[e].TREE[s]),a=!0)}return a?o:!1},t.JCCatalogSection.prototype.GetCanBuy=function(t){var s,i=0,e=!1,o=!0;for(i=0;i<this.offers.length;i++){o=!0;for(s in t)if(t[s]!==this.offers[i].TREE[s]){o=!1;break}if(o&&this.offers[i].CAN_BUY){e=!0;break}}return e},t.JCCatalogSection.prototype.SetCurrent=function(){var t=0,s=0,i=[],e="",o=!1,a={},r=[],h=this.offers[this.offerNum].TREE;for(t=0;t<this.treeProps.length&&(e="PROP_"+this.treeProps[t].ID,o=this.GetRowValues(a,e),o);t++){if(BX.util.in_array(h[e],o)?a[e]=h[e]:(a[e]=o[0],this.offerNum=0),this.showAbsent)for(i=[],r=[],r=BX.clone(a,!0),s=0;s<o.length;s++)r[e]=o[s],this.GetCanBuy(r)&&(i[i.length]=o[s]);else i=o;this.UpdateRow(t,a[e],o,i)}this.selectedValues=a,this.ChangeInfo()},t.JCCatalogSection.prototype.ChangeInfo=function(){var s,i=0,e=-1,o=!0;for(i=0;i<this.offers.length;i++){o=!0;for(s in this.selectedValues)if(this.selectedValues[s]!==this.offers[i].TREE[s]){o=!1;break}if(o){e=i;break}}if(e>-1){if(this.obPict){var a={attrs:{}};this.offers[e].PREVIEW_PICTURE?a.attrs.src=this.offers[e].PREVIEW_PICTURE.SRC:a.attrs.src=this.defaultPict.pict.SRC,BX.adjust(BX.findChild(this.obPict,{tag:"img"}),a)}this.secondPict&&this.obSecondPict&&(this.offers[e].PREVIEW_PICTURE_SECOND?BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.offers[e].PREVIEW_PICTURE_SECOND.SRC+")"}}):this.offers[e].PREVIEW_PICTURE.SRC?BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.offers[e].PREVIEW_PICTURE.SRC+")"}}):this.defaultPict.secondPict?BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.defaultPict.secondPict.SRC+")"}}):BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.defaultPict.pict.SRC+")"}})),this.showSkuProps&&this.obSkuProps&&(0===this.offers[e].DISPLAY_PROPERTIES.length?BX.adjust(this.obSkuProps,{style:{display:"none"},html:""}):BX.adjust(this.obSkuProps,{style:{display:""},html:this.offers[e].DISPLAY_PROPERTIES})),$(this.obBuyBtn).data("item",this.offers[e].ID),$(this.obBasketBtn).data("item",this.offers[e].ID),$(this.obBasketActions).closest(".counter_wrapp").css("opacity",0);var r=this.offers[e].MEASURE&&"Y"==this.offers[e].SHOW_MEASURE?this.offers[e].MEASURE:"";this.setPrice(this.offers[e].PRICE,r),this.setQuantityStore(this.offers[e].MAX_QUANTITY,this.offers[e].AVAILIABLE.TEXT),this.offerNum=e,this.QuantitySet(this.offerNum),$(this.obProduct).find(".item-title a").attr("href",this.offers[this.offerNum].URL),$(this.obProduct).find(".image_wrapper_block > a").attr("href",this.offers[this.offerNum].URL),$(this.obProduct).find(".quantity_block .values").length&&$(this.obProduct).find(".quantity_block .values .item span.value").text(this.offers[e].MAX_QUANTITY).css({opacity:"1"});var h=this.offers[e],n=$(this.obProduct);"undefined"!=typeof arBasketAspro?this.setActualDataBlock(n,h):"undefined"!=typeof t.frameCacheVars&&BX.addCustomEvent("onFrameDataReceived",function(){t.JCCatalogSection.prototype.setActualDataBlock(n,h)})}},t.JCCatalogSection.prototype.setActualDataBlock=function(t,s){this.setLikeBlock(t,".like_icons .wish_item_button",s,"DELAY"),this.setLikeBlock(t,".like_icons .compare_item_button",s,"COMPARE"),this.setBuyBlock(t,s)},t.JCCatalogSection.prototype.setLikeBlock=function(t,s,i,e){var o=t;"DELAY"==e&&(i.CAN_BUY?o.find(s).css("display","block"):o.find(s).hide()),o.find(s).attr("data-item",i.ID),o.find(s).find("span").attr("data-item",i.ID),arBasketAspro[e]&&(o.find(s).find(".to").removeClass("added").css("display","block"),o.find(s).find(".in").hide(),void 0!==arBasketAspro[e][i.ID]&&(o.find(s).find(".to").hide(),o.find(s).find(".in").css("display","block")))},t.JCCatalogSection.prototype.setBuyBlock=function(t,s){var i=t.find(".offer_buy_block");if(i.find(".counter_wrapp .counter_block").length&&i.find(".counter_wrapp .counter_block").attr("data-item",s.ID),s.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL&&"ADD"==s.CONFIG.ACTION&&s.CAN_BUY){var e=s.CONFIG.MAX_QUANTITY_BUY>0?"data-max='"+s.CONFIG.MAX_QUANTITY_BUY+"'":"",o='<span class="minus">-</span><input type="text" class="text" name="'+s.PRODUCT_QUANTITY_VARIABLE+'" value="'+s.CONFIG.MIN_QUANTITY_BUY+'" /><span class="plus" '+e+">+</span>";arBasketAspro.BASKET&&void 0!==arBasketAspro.BASKET[s.ID]?i.find(".counter_wrapp .counter_block").length?i.find(".counter_wrapp .counter_block").hide():(i.find(".counter_wrapp").prepend('<div class="counter_block" data-item="'+s.ID+'"></div>'),i.find(".counter_wrapp .counter_block").html(o).hide()):i.find(".counter_wrapp .counter_block").length?i.find(".counter_wrapp .counter_block").html(o).show():(i.find(".counter_wrapp").prepend('<div class="counter_block" data-item="'+s.ID+'"></div>'),i.find(".counter_wrapp .counter_block").html(o))}else i.find(".counter_wrapp .counter_block").length&&i.find(".counter_wrapp .counter_block").hide();var a="ORDER"==s.CONFIG.ACTION||!s.CAN_BUY||!s.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL||"SUBSCRIBE"==s.CONFIG.ACTION&&"Y"==s.CATALOG_SUBSCRIBE?"wide":"";$('<div class="button_block"></div>');if(i.find(".counter_wrapp").find(".button_block").length?arBasketAspro.BASKET&&void 0!==arBasketAspro.BASKET[s.ID]?(i.find(".counter_wrapp").find(".button_block").addClass("wide").html(s.HTML),markProductAddBasket(s.ID)):a?(i.find(".counter_wrapp").find(".button_block").addClass("wide").html(s.HTML),arBasketAspro.SUBSCRIBE&&void 0!==arBasketAspro.SUBSCRIBE[s.ID]&&markProductSubscribe(s.ID)):i.find(".counter_wrapp").find(".button_block").removeClass("wide").html(s.HTML):(i.find(".counter_wrapp").append('<div class="button_block '+a+'">'+s.HTML+"</div>"),arBasketAspro.BASKET&&void 0!==arBasketAspro.BASKET[s.ID]&&markProductAddBasket(s.ID),arBasketAspro.SUBSCRIBE&&void 0!==arBasketAspro.SUBSCRIBE[s.ID]&&markProductSubscribe(s.ID)),"NOTHING"!==s.CONFIG.ACTION)if("ADD"==s.CONFIG.ACTION&&s.CAN_BUY&&"N"!=s.SHOW_ONE_CLICK_BUY){var r='<span class="transparent big_btn type_block button one_click" data-offers="Y" data-item="'+s.ID+'" data-iblockID="'+s.IBLOCK_ID+'" data-quantity="'+s.CONFIG.MIN_QUANTITY_BUY+'" data-props="'+s.OFFER_PROPS+'" onclick="oneClickBuy('+s.ID+", "+s.IBLOCK_ID+', this)"><span>'+s.ONE_CLICK_BUY+"</span></span>";i.find(".wrapp_one_click").length?i.find(".wrapp_one_click").html(r):i.append('<div class="wrapp_one_click">'+r+"</div>")}else i.find(".wrapp_one_click").length&&i.find(".wrapp_one_click").remove();else i.find(".wrapp_one_click").length&&i.find(".wrapp_one_click").remove();i.fadeIn()},t.JCCatalogSection.prototype.CompareCountResult=function(t){if(t.COMPARE_COUNT){for(var s in t.ITEMS){if(t.ITEMS[s]==this.offers[this.offerNum].ID){this.offers[this.offerNum].COMPARE_ACTIVE=!0;break}this.offers[this.offerNum].COMPARE_ACTIVE=!1}this.offers[this.offerNum].COMPARE_ACTIVE?($(this.obCompare).find(".compare_item.to").hide(),$(this.obCompare).find(".compare_item.added").show()):($(this.obCompare).find(".compare_item.added").hide(),$(this.obCompare).find(".compare_item.to").show())}},t.JCCatalogSection.prototype.ItemInfoResult=function(t){t.HTML&&($(this.obBasketActions).html(t.HTML),$(this.obBasketActions).show(),this.obBuyBtn=BX(this.visual.BUY_ID),this.obBasketBtn=BX(this.visual.BASKET_LINK),this.obSubscribeBtn=BX(this.visual.SUBSCRIBE_ID),this.obSubscribedBtn=BX(this.visual.SUBSCRIBED_ID),BX.bind(this.obBuyBtn,"click",BX.delegate(this.Add2Basket,this)),$(this.obBasketActions).removeClass("wide"),this.ajax_type_item=t.BUYMISSINGGOODS,"ADD"==t.BUYMISSINGGOODS||this.canBuy?$(this.obQuantity).css("display",""):$(this.obBasketActions).addClass("wide")),basketParams={ajax_action:"Y"},BX.ajax.loadJSON(arOptimusOptions.SITE_DIR+"ajax/get_basket_count.php",basketParams,BX.delegate(this.BasketCountResult,this))},t.JCCatalogSection.prototype.BasketCountResult=function(t){for(var s in t.ITEMS){if(t.ITEMS[s].PRODUCT_ID==this.offers[this.offerNum].ID){this.offers[this.offerNum].BASKET_ACTIVE=!0;break}this.offers[this.offerNum].BASKET_ACTIVE=!1}for(var s in t.SUBSCRIBE_ITEMS){if(t.SUBSCRIBE_ITEMS[s].PRODUCT_ID==this.offers[this.offerNum].ID){this.offers[this.offerNum].SUBSCRIBE_ACTIVE=!0;break}this.offers[this.offerNum].SUBSCRIBE_ACTIVE=!1}this.BasketStateRefresh()},t.JCCatalogSection.prototype.BasketStateRefresh=function(s){this.offers[this.offerNum].SUBSCRIBE_ACTIVE?($(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .to-subscribe").hide(),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .in-subscribe").show()):($(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .to-subscribe").show(),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .in-subscribe").hide()),this.offers[this.offerNum].BASKET_ACTIVE?($(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID).addClass("wide"),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .button_block").addClass("wide"),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .to-cart").hide(),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .in-cart").show(),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .counter_block").hide()):($(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID).removeClass("wide"),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .button_block").removeClass("wide"),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .to-cart").show(),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .in-cart").hide(),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID+" .counter_block").show()),BX.style(this.obBasketActions,"opacity","1"),$(this.obBasketActions).closest(".counter_wrapp").css("opacity",1),"undefined"!==s&&"Y"==s&&($("#basket_line .basket_fly").length&&$(t).outerWidth()>768?basketFly("open"):$("#basket_line .cart").length&&($("#basket_line .cart").is(".empty_cart")&&($("#basket_line .cart").removeClass("empty_cart").find(".cart_wrapp a.basket_link").removeAttr("href").addClass("cart-call"),touchBasket(".cart:not(.empty_cart) .basket_block .link")),reloadTopBasket("add",$("#basket_line"),200,2e3,"Y")),animateBasketLine(200))},t.JCCatalogSection.prototype.setPrice=function(t,s){var i;this.obPrice&&(i=BX.Currency.currencyFormat(t.DISCOUNT_VALUE,t.CURRENCY,!0),s&&(i=i?i+"/"+s:"&nbsp;"),BX.adjust(this.obPrice,{html:i}),t.DISCOUNT_VALUE!==t.VALUE&&this.showOldPrice?($(this.obPriceOld).find("strike").show().html(BX.Currency.currencyFormat(t.VALUE,t.CURRENCY,!0)),this.showPercent&&($(this.obPriceOld).closest(".cost").find(".sale_block").show(),$(this.obPriceOld).closest(".cost").find(".value").html(t.DISCOUNT_DIFF_PERCENT_RAW),$(this.obPriceOld).closest(".cost").find(".text span").html(BX.Currency.currencyFormat(t.DISCOUNT_DIFF,t.CURRENCY,!0)))):($(this.obPriceOld).find("strike").hide().html(""),this.showPercent&&$(this.obPriceOld).closest(".cost").find(".sale_block").hide()))},t.JCCatalogSection.prototype.setQuantityStore=function(t,s){parseFloat(t)>0?$(this.storeQuanity).find(".icon").removeClass("order").addClass("stock"):$(this.storeQuanity).find(".icon").removeClass("stock").addClass("order"),$(this.storeQuanity).find(".icon + span").html(s)},t.JCCatalogSection.prototype.Compare=function(){var t,s;if($(this.obProduct).find(".like_icons .o_"+this.offers[this.offerNum].ID).data("changed","Y"),$(this.obProduct).find(".like_icons .o_"+this.offers[this.offerNum].ID).find(".compare_item.added").is(":visible")?(s=this.compareData.compareUrlDel,this.compareData.Added=!1):(s=this.compareData.compareUrl,this.compareData.Added=!0),s){switch(this.productType){case 1:case 2:s=s.replace("#ID#",this.product.id.toString());break;case 3:s=s.replace("#ID#",this.offers[this.offerNum].ID)}t={ajax_action:"Y"},BX.ajax.loadJSON(s,t,BX.proxy(this.CompareResult,this))}},t.JCCatalogSection.prototype.CompareResult=function(t){return"object"!=typeof t?!1:("OK"===t.STATUS?(BX.onCustomEvent("OnCompareChange"),this.compareData.Added?($(this.obProduct).find(".like_icons .o_"+this.offers[this.offerNum].ID).find(".to").hide(),$(this.obProduct).find(".like_icons .o_"+this.offers[this.offerNum].ID).find(".in").show()):($(this.obProduct).find(".like_icons .o_"+this.offers[this.offerNum].ID).find(".in").hide(),$(this.obProduct).find(".like_icons .o_"+this.offers[this.offerNum].ID).find(".to").show()),jsAjaxUtil.InsertDataToNode(arOptimusOptions.SITE_DIR+"ajax/show_compare_preview_top.php","compare_line",!1)):console.log(BX.message("ADD_ERROR_COMPARE")),!1)},t.JCCatalogSection.prototype.CompareRedirect=function(){this.compareData.comparePath?location.href=this.compareData.comparePath:this.obPopupWin.close()},t.JCCatalogSection.prototype.InitBasketUrl=function(){switch(this.basketUrl="ADD"===this.basketMode?this.basketData.add_url:this.basketData.buy_url,this.productType){case 1:case 2:this.basketUrl=this.basketUrl.replace("#ID#",this.product.id.toString());break;case 3:this.basketUrl=this.basketUrl.replace("#ID#",this.offers[this.offerNum].ID)}this.basketParams={ajax_basket:"Y"},this.showQuantity&&(this.basketParams[this.basketData.quantity]=$(this.obProduct).find(".counter_wrapp").find(".counter_block .text").val()),this.basketData.sku_props&&(this.basketParams[this.basketData.sku_props_var]=this.basketData.sku_props)},t.JCCatalogSection.prototype.FillBasketProps=function(){if(this.visual.BASKET_PROP_DIV){var t=0,s=null,i=!1,e=null;if(this.basketData.useProps&&!this.basketData.emptyProps?this.obPopupWin&&this.obPopupWin.contentContainer&&(e=this.obPopupWin.contentContainer):e=BX(this.visual.BASKET_PROP_DIV),e){if(s=e.getElementsByTagName("select"),s&&s.length)for(t=0;t<s.length;t++)if(!s[t].disabled)switch(s[t].type.toLowerCase()){case"select-one":this.basketParams[s[t].name]=s[t].value,i=!0}if(s=e.getElementsByTagName("input"),s&&s.length)for(t=0;t<s.length;t++)if(!s[t].disabled)switch(s[t].type.toLowerCase()){case"hidden":this.basketParams[s[t].name]=s[t].value,i=!0;break;case"radio":s[t].checked&&(this.basketParams[s[t].name]=s[t].value,i=!0)}}i||(this.basketParams[this.basketData.props]=[],this.basketParams[this.basketData.props][0]=0)}},t.JCCatalogSection.prototype.Add2Basket=function(){this.basketMode="ADD",this.Basket()},t.JCCatalogSection.prototype.BuyBasket=function(){this.basketMode="BUY",this.Basket()},t.JCCatalogSection.prototype.SendToBasket=function(){this.canBuy&&(this.InitBasketUrl(),this.FillBasketProps(),BX.ajax.loadJSON(this.basketUrl,this.basketParams,BX.delegate(this.BasketResult,this)))},t.JCCatalogSection.prototype.Basket=function(){this.canBuy&&this.SendToBasket()},t.JCCatalogSection.prototype.BasketResult=function(t){var s;return this.obPopupWin&&this.obPopupWin.close(),"object"!=typeof t?!1:(s="OK"===t.STATUS,void(s&&"BUY"===this.basketAction?this.BasketRedirect():s?(getActualBasket(),markProductAddBasket(this.offers[this.offerNum].ID),BX.onCustomEvent("OnBasketChange"),this.offers[this.offerNum].BASKET_ACTIVE=!0,this.BasketStateRefresh("Y"),$(this.obProduct).find(".hover_block .o_"+this.offers[this.offerNum].ID).data("changed","Y")):console.log(BX.message("ADD_ERROR_BASKET"))))},t.JCCatalogSection.prototype.BasketRedirect=function(){location.href=this.basketData.basketUrl?this.basketData.basketUrl:BX.message("BASKET_URL")})}(window);153  46488|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/catalog.section/catalog_block_slider/script.js|7824b03a(function (window) {

if (!!window.JCCatalogSection)
{
	return;
}

window.JCCatalogSection = function (arParams)
{
	this.skuVisualParams = {
		SELECT:
		{
			TAG_BIND: 'select',
			TAG: 'option',
			ACTIVE_CLASS: 'active',
			HIDE_CLASS: 'hidden',
			EVENT: 'change',
		},
		LI:
		{
			TAG_BIND: 'li',
			TAG: 'li',
			ACTIVE_CLASS: 'active',
			HIDE_CLASS: 'missing',
			EVENT: 'click',
		}
	};
	this.productType = 0;
	this.showQuantity = true;
	this.showAbsent = true;
	this.secondPict = false;
	this.showOldPrice = false;
	this.showPercent = false;
	this.showSkuProps = false;
	this.basketAction = 'ADD';
	this.basketLinkURL = '';
	this.showClosePopup = false;
	this.useCompare = false;
	this.visual = {
		ID: '',
		PICT_ID: '',
		SECOND_PICT_ID: '',
		QUANTITY_ID: '',
		QUANTITY_UP_ID: '',
		QUANTITY_DOWN_ID: '',
		STORE_QUANTITY: '',
		PRICE_ID: '',
		PRICE_OLD_ID: '',
		DSC_PERC: '',
		SECOND_DSC_PERC: '',
		DISPLAY_PROP_DIV: '',
		BASKET_PROP_DIV: ''
	};
	this.product = {
		checkQuantity: false,
		maxQuantity: 0,
		stepQuantity: 1,
		isDblQuantity: false,
		canBuy: true,
		canSubscription: true,
		name: '',
		pict: {},
		id: 0,
		addUrl: '',
		buyUrl: ''
	};

	this.basketMode = '';
	this.basketData = {
		useProps: false,
		emptyProps: false,
		quantity: 'quantity',
		props: 'prop',
		basketUrl: '',
		sku_props: '',
		sku_props_var: 'basket_props',
		add_url: '',
		buy_url: ''
	};

	this.compareData = {
		compareUrl: '',
		comparePath: ''
	};

	this.defaultPict = {
		pict: null,
		secondPict: null
	};

	this.checkQuantity = false;
	this.maxQuantity = 0;
	this.stepQuantity = 1;
	this.defaultCount = 1;
	this.isDblQuantity = false;
	this.canBuy = true;
	this.currentBasisPrice = {};
	this.canSubscription = true;
	this.precision = 6;
	this.precisionFactor = Math.pow(10,this.precision);

	this.offers = [];
	this.offerNum = 0;
	this.treeProps = [];
	this.obTreeRows = [];
	this.showCount = [];
	this.showStart = [];
	this.selectedValues = {};

	this.obProduct = null;
	this.obQuantity = null;
	this.obQuantityUp = null;
	this.obQuantityDown = null;
	this.obPict = null;
	this.obSecondPict = null;
	this.obPrice = null;
	this.obTree = null;
	this.obBuyBtn = null;
	this.obBasketBtn = null;
	this.obBasketActions = null;
	this.obNotAvail = null;
	this.obDscPerc = null;
	this.obSecondDscPerc = null;
	this.obSkuProps = null;
	this.obMeasure = null;
	this.obCompare = null;

	this.obPopupWin = null;
	this.basketUrl = '';
	this.basketParams = {};

	this.treeRowShowSize = 5;
	this.treeEnableArrow = { display: '', cursor: 'pointer', opacity: 1 };
	this.treeDisableArrow = { display: '', cursor: 'default', opacity:0.2 };

	this.lastElement = false;
	this.containerHeight = 0;

	this.errorCode = 0;

	if ('object' === typeof arParams)
	{
		this.productType = parseInt(arParams.PRODUCT_TYPE, 10);
		this.showQuantity = arParams.SHOW_QUANTITY;
		this.showAbsent = arParams.SHOW_ABSENT;
		this.secondPict = !!arParams.SECOND_PICT;
		this.showOldPrice = !!arParams.SHOW_OLD_PRICE;
		this.showPercent = !!arParams.SHOW_DISCOUNT_PERCENT;
		this.showSkuProps = !!arParams.SHOW_SKU_PROPS;
		if (!!arParams.ADD_TO_BASKET_ACTION)
		{
			this.basketAction = arParams.ADD_TO_BASKET_ACTION;
		}
		this.showClosePopup = !!arParams.SHOW_CLOSE_POPUP;
		this.useCompare = !!arParams.DISPLAY_COMPARE;

		this.visual = arParams.VISUAL;
		this.defaultCount = arParams.DEFAULT_COUNT;
		this.basketLinkURL = arParams.BASKET_URL;
		switch (this.productType)
		{
			case 1://product
			case 2://set
				if (!!arParams.PRODUCT && 'object' === typeof(arParams.PRODUCT))
				{
					if (this.showQuantity)
					{
						this.product.checkQuantity = arParams.PRODUCT.CHECK_QUANTITY;
						this.product.isDblQuantity = arParams.PRODUCT.QUANTITY_FLOAT;
						if (this.product.checkQuantity)
						{
							this.product.maxQuantity = (this.product.isDblQuantity ? parseFloat(arParams.PRODUCT.MAX_QUANTITY) : parseInt(arParams.PRODUCT.MAX_QUANTITY, 10));
						}
						this.product.stepQuantity = (this.product.isDblQuantity ? parseFloat(arParams.PRODUCT.STEP_QUANTITY) : parseInt(arParams.PRODUCT.STEP_QUANTITY, 10));

						this.checkQuantity = this.product.checkQuantity;
						this.isDblQuantity = this.product.isDblQuantity;
						this.maxQuantity = this.product.maxQuantity;
						this.stepQuantity = this.product.stepQuantity;
						if (this.isDblQuantity)
						{
							this.stepQuantity = Math.round(this.stepQuantity*this.precisionFactor)/this.precisionFactor;
						}
					}
					this.product.canBuy = arParams.PRODUCT.CAN_BUY;
					this.product.canSubscription = arParams.PRODUCT.SUBSCRIPTION;
					if (!!arParams.PRODUCT.BASIS_PRICE)
					{
						this.currentBasisPrice = arParams.PRODUCT.BASIS_PRICE;
					}

					this.canBuy = this.product.canBuy;
					this.canSubscription = this.product.canSubscription;

					this.product.name = arParams.PRODUCT.NAME;
					this.product.pict = arParams.PRODUCT.PICT;
					this.product.id = arParams.PRODUCT.ID;
					if (!!arParams.PRODUCT.ADD_URL)
					{
						this.product.addUrl = arParams.PRODUCT.ADD_URL;
					}
					if (!!arParams.PRODUCT.BUY_URL)
					{
						this.product.buyUrl = arParams.PRODUCT.BUY_URL;
					}
					if (!!arParams.BASKET && 'object' === typeof(arParams.BASKET))
					{
						this.basketData.useProps = !!arParams.BASKET.ADD_PROPS;
						this.basketData.emptyProps = !!arParams.BASKET.EMPTY_PROPS;
					}
				}
				else
				{
					this.errorCode = -1;
				}
				break;
			case 3://sku
				if (!!arParams.OFFERS && BX.type.isArray(arParams.OFFERS))
				{
					if (!!arParams.PRODUCT && 'object' === typeof(arParams.PRODUCT))
					{
						this.product.name = arParams.PRODUCT.NAME;
						this.product.id = arParams.PRODUCT.ID;
					}
					this.offers = arParams.OFFERS;
					this.offerNum = 0;
					if (!!arParams.OFFER_SELECTED)
					{
						this.offerNum = parseInt(arParams.OFFER_SELECTED, 10);
					}
					if (isNaN(this.offerNum))
					{
						this.offerNum = 0;
					}
					if (!!arParams.TREE_PROPS)
					{
						this.treeProps = arParams.TREE_PROPS;
					}
					if (!!arParams.DEFAULT_PICTURE)
					{
						this.defaultPict.pict = arParams.DEFAULT_PICTURE.PICTURE;
						this.defaultPict.secondPict = arParams.DEFAULT_PICTURE.PICTURE_SECOND;
					}
				}
				else
				{
					this.errorCode = -1;
				}
				break;
			default:
				this.errorCode = -1;
		}
		if (!!arParams.BASKET && 'object' === typeof(arParams.BASKET))
		{
			if (!!arParams.BASKET.QUANTITY)
			{
				this.basketData.quantity = arParams.BASKET.QUANTITY;
			}
			if (!!arParams.BASKET.PROPS)
			{
				this.basketData.props = arParams.BASKET.PROPS;
			}
			if (!!arParams.BASKET.BASKET_URL)
			{
				this.basketData.basketUrl = arParams.BASKET.BASKET_URL;
			}
			if (3 === this.productType)
			{
				if (!!arParams.BASKET.SKU_PROPS)
				{
					this.basketData.sku_props = arParams.BASKET.SKU_PROPS;
				}
			}
			if (!!arParams.BASKET.ADD_URL_TEMPLATE)
			{
				this.basketData.add_url = arParams.BASKET.ADD_URL_TEMPLATE;
			}
			if (!!arParams.BASKET.BUY_URL_TEMPLATE)
			{
				this.basketData.buy_url = arParams.BASKET.BUY_URL_TEMPLATE;
			}
			if (this.basketData.add_url === '' && this.basketData.buy_url === '')
			{
				this.errorCode = -1024;
			}
		}
		if (this.useCompare)
		{
			if (!!arParams.COMPARE && typeof(arParams.COMPARE) === 'object')
			{
				if (!!arParams.COMPARE.COMPARE_PATH)
				{
					this.compareData.comparePath = arParams.COMPARE.COMPARE_PATH;
				}
				if (!!arParams.COMPARE.COMPARE_URL_TEMPLATE_DEL)
				{
					this.compareData.compareUrlDel = arParams.COMPARE.COMPARE_URL_TEMPLATE_DEL;
				}
				if (!!arParams.COMPARE.COMPARE_URL_TEMPLATE)
				{
					this.compareData.compareUrl = arParams.COMPARE.COMPARE_URL_TEMPLATE;
				}
				else
				{
					this.useCompare = false;
				}
			}
			else
			{
				this.useCompare = false;
			}
		}

		this.lastElement = (!!arParams.LAST_ELEMENT && 'Y' === arParams.LAST_ELEMENT);
	}
	if (0 === this.errorCode)
	{
		BX.ready(BX.delegate(this.Init,this));
	}
};

window.JCCatalogSection.prototype.Init = function()
{
	var i = 0,
		strPrefix = '',
		TreeItems = null;

	this.obProduct = BX(this.visual.ID);
	if (!this.obProduct)
	{
		this.errorCode = -1;
	}
	this.obPict = BX(this.visual.PICT_ID);
	if (!this.obPict)
	{
		this.errorCode = -2;
	}
	if (this.secondPict && !!this.visual.SECOND_PICT_ID)
	{
		this.obSecondPict = BX(this.visual.SECOND_PICT_ID);
	}
	this.storeQuanity = BX(this.visual.STORE_QUANTITY);
	this.obPrice = BX(this.visual.PRICE_ID);
	this.obPriceOld = BX(this.visual.PRICE_OLD_ID);
	if (!this.obPrice)
	{
		this.errorCode = -16;
	}
	if (this.showQuantity && !!this.visual.QUANTITY_ID)
	{
		this.obQuantity = BX(this.visual.QUANTITY_ID);
		if (!!this.visual.QUANTITY_UP_ID)
		{
			this.obQuantityUp = BX(this.visual.QUANTITY_UP_ID);
		}
		if (!!this.visual.QUANTITY_DOWN_ID)
		{
			this.obQuantityDown = BX(this.visual.QUANTITY_DOWN_ID);
		}
	}
	if (3 === this.productType)
	{
		if (!!this.visual.TREE_ID)
		{
			this.obTree = BX(this.visual.TREE_ID);
			if (!this.obTree)
			{
				this.errorCode = -256;
			}
			strPrefix = this.visual.TREE_ITEM_ID;
			for (i = 0; i < this.treeProps.length; i++)
			{
				this.obTreeRows[i] = {
					LIST: BX(strPrefix+this.treeProps[i].ID+'_list'),
					CONT: BX(strPrefix+this.treeProps[i].ID+'_cont')
				};
				if (!this.obTreeRows[i].LIST || !this.obTreeRows[i].CONT)
				{
					this.errorCode = -512;
					break;
				}
			}
		}
		if (!!this.visual.QUANTITY_MEASURE)
		{
			this.obMeasure = BX(this.visual.QUANTITY_MEASURE);
		}
	}

	this.obBasketActions = BX(this.visual.BASKET_ACTIONS_ID);
	if (!!this.obBasketActions)
	{
		if (!!this.visual.BUY_ID)
		{
			this.obBuyBtn = BX(this.visual.BUY_ID);
		}
		if (!!this.visual.BASKET_LINK)
		{
			this.obBasketBtn = BX(this.visual.BASKET_LINK);
		}
	}
	this.obNotAvail = BX(this.visual.NOT_AVAILABLE_MESS);

	if (this.showPercent)
	{
		if (!!this.visual.DSC_PERC)
		{
			this.obDscPerc = BX(this.visual.DSC_PERC);
		}
		if (this.secondPict && !!this.visual.SECOND_DSC_PERC)
		{
			this.obSecondDscPerc = BX(this.visual.SECOND_DSC_PERC);
		}
	}

	if (this.showSkuProps)
	{
		if (!!this.visual.DISPLAY_PROP_DIV)
		{
			this.obSkuProps = BX(this.visual.DISPLAY_PROP_DIV);
		}
	}

	if (0 === this.errorCode)
	{
		if (this.showQuantity)
		{
			if (!!this.obQuantityUp)
			{
				BX.bind(this.obQuantityUp, 'click', BX.delegate(this.QuantityUp, this));
			}
			if (!!this.obQuantityDown)
			{
				BX.bind(this.obQuantityDown, 'click', BX.delegate(this.QuantityDown, this));
			}
			if (!!this.obQuantity)
			{
				BX.bind(this.obQuantity, 'change', BX.delegate(this.QuantityChange, this));
			}
		}
		switch (this.productType)
		{
			case 1://product
				break;
			case 3://sku
				for(var key in this.skuVisualParams){
					var TreeItems = BX.findChildren(this.obTree, {tagName: this.skuVisualParams[key].TAG_BIND}, true);
					if (!!TreeItems && 0 < TreeItems.length){
						for (i = 0; i < TreeItems.length; i++){
							$(TreeItems[i]).on(this.skuVisualParams[key].EVENT, BX.delegate(this.SelectOfferProp, this));
							//BX.bind(TreeItems[i], this.skuVisualParams[key].EVENT, BX.delegate(this.SelectOfferProp, this));
						}
					}
				}
				this.SetCurrent();
				break;
		}
		// $(this.obProduct).find(".read_more.to-cart").on('click', BX.delegate(this.Add2Basket, this));
		if (!!this.obBuyBtn)
		{
			if (this.basketAction === 'ADD')
			{
				// BX.bind(this.obBuyBtn, 'click', BX.delegate(this.Add2Basket, this));


			}
			else
			{
				BX.bind(this.obBuyBtn, 'click', BX.delegate(this.BuyBasket, this));
			}
		}
		if (this.useCompare){
			this.obCompare = BX(this.visual.COMPARE_LINK_ID);
		}
	}
};

window.JCCatalogSection.prototype.checkHeight = function()
{
	this.containerHeight = parseInt(this.obProduct.parentNode.offsetHeight, 10);
	if (isNaN(this.containerHeight)){
		this.containerHeight = 0;
	}
};

window.JCCatalogSection.prototype.setHeight = function()
{
	if (0 < this.containerHeight){
		BX.adjust(this.obProduct.parentNode, {style: { height: this.containerHeight+'px'}});
	}
};

window.JCCatalogSection.prototype.clearHeight = function()
{
	BX.adjust(this.obProduct.parentNode, {style: { height: 'auto'}});
};

window.JCCatalogSection.prototype.QuantityUp = function()
{
	var curValue = 0,
		boolSet = true,
		calcPrice;

	if (0 === this.errorCode && this.showQuantity && this.canBuy)
	{
		curValue = (this.isDblQuantity ? parseFloat(this.obQuantity.value) : parseInt(this.obQuantity.value, 10));
		if (!isNaN(curValue))
		{
			curValue += this.stepQuantity;
			if (this.checkQuantity)
			{
				if (curValue > this.maxQuantity)
				{
					boolSet = false;
				}
			}
			if (boolSet)
			{
				if (this.isDblQuantity)
				{
					curValue = Math.round(curValue*this.precisionFactor)/this.precisionFactor;
				}
				this.obQuantity.value = curValue;
			}
		}
	}
};

window.JCCatalogSection.prototype.QuantityDown = function()
{
	var curValue = 0,
		boolSet = true,
		calcPrice;

	if (0 === this.errorCode && this.showQuantity && this.canBuy)
	{
		curValue = (this.isDblQuantity ? parseFloat(this.obQuantity.value): parseInt(this.obQuantity.value, 10));
		if (!isNaN(curValue))
		{
			curValue -= this.stepQuantity;
			if (curValue < this.stepQuantity)
			{
				boolSet = false;
			}
			if (boolSet)
			{
				if (this.isDblQuantity)
				{
					curValue = Math.round(curValue*this.precisionFactor)/this.precisionFactor;
				}
				this.obQuantity.value = curValue;
			}
		}
	}
};

window.JCCatalogSection.prototype.QuantityChange = function()
{
	var curValue = 0,
		calcPrice,
		intCount,
		count;

	if (0 === this.errorCode && this.showQuantity)
	{
		if (this.canBuy)
		{
			curValue = (this.isDblQuantity ? parseFloat(this.obQuantity.value) : parseInt(this.obQuantity.value, 10));
			if (!isNaN(curValue))
			{
				if (this.checkQuantity)
				{
					if (curValue > this.maxQuantity)
					{
						curValue = this.maxQuantity;
					}
				}
				if (curValue < this.stepQuantity)
				{
					curValue = this.stepQuantity;
				}
				else
				{
					count = curValue/this.stepQuantity;
					intCount = parseInt(count, 10);
					if (isNaN(intCount))
					{
						intCount = 1;
						count = 1.1;
					}
					if (count > intCount)
					{
						curValue = (intCount <= 1 ? this.stepQuantity : intCount*this.stepQuantity);
						curValue = Math.round(curValue*this.precisionFactor)/this.precisionFactor;
					}
				}
				this.obQuantity.value = curValue;
			}
			else
			{
				this.obQuantity.value = this.stepQuantity;
			}
		}
		else
		{
			this.obQuantity.value = this.stepQuantity;
		}
	}
};

window.JCCatalogSection.prototype.QuantitySet = function(index)
{
	if (0 === this.errorCode)
	{
		this.canBuy = this.offers[index].CAN_BUY;
		if (this.canBuy)
		{
			if (!!this.obBasketActions)
			{
				BX.style(this.obBasketActions, 'display', '');
			}
			if (!!this.obNotAvail)
			{
				BX.style(this.obNotAvail, 'display', 'none');
			}
		}
		else
		{
			if (!!this.obBasketActions)
			{
				//BX.style(this.obBasketActions, 'display', 'none');
				BX.style(this.obBasketActions, 'opacity', '0');
				BX.style(BX.findParent(BX(this.obQuantity), { 'class':'counter_block' }), 'display', 'none');
			}
			if (!!this.obNotAvail)
			{
				BX.style(this.obNotAvail, 'display', '');
			}
		}
		if (this.showQuantity)
		{
			this.isDblQuantity = this.offers[index].QUANTITY_FLOAT;
			this.checkQuantity = this.offers[index].CHECK_QUANTITY;
			if (this.isDblQuantity)
			{
				this.maxQuantity = parseFloat(this.offers[index].MAX_QUANTITY);
				this.stepQuantity = Math.round(parseFloat(this.offers[index].STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor;
			}
			else
			{
				this.maxQuantity = parseInt(this.offers[index].MAX_QUANTITY, 10);
				this.stepQuantity = parseInt(this.offers[index].STEP_QUANTITY, 10);
			}
			if(!!this.obQuantity){
				this.obQuantity.value = this.defaultCount;
				this.obQuantity.disabled = !this.canBuy;
			}
			if (!!this.obMeasure)
			{
				if (!!this.offers[index].MEASURE)
				{
					BX.adjust(this.obMeasure, { html : this.offers[index].MEASURE});
				}
				else
				{
					BX.adjust(this.obMeasure, { html : ''});
				}
			}
		}
		this.currentBasisPrice = this.offers[index].BASIS_PRICE;
	}
};

window.JCCatalogSection.prototype.SelectOfferProp = function()
{
	var i = 0,
		value = '',
		strTreeValue = '',
		arTreeItem = [],
		RowItems = null,
		target = BX.proxy_context;
	if(typeof target.options !== 'undefined' && typeof target.options[target.selectedIndex] !== 'undefined')
		target = target.options[target.selectedIndex];
	if (!!target && target.hasAttribute('data-treevalue'))
	{
		strTreeValue = target.getAttribute('data-treevalue');
		propModes = target.getAttribute('data-showtype');
		arTreeItem = strTreeValue.split('_');
		if (this.SearchOfferPropIndex(arTreeItem[0], arTreeItem[1]))
		{
			RowItems = BX.findChildren(target.parentNode, {tagName: this.skuVisualParams[propModes.toUpperCase()].TAG}, false);

			if (!!RowItems && 0 < RowItems.length)
			{
				for (i = 0; i < RowItems.length; i++)
				{
					value = RowItems[i].getAttribute('data-onevalue');

					// for SELECTBOXES
					if(propModes == 'TEXT'){
						if (value === arTreeItem[1]){
							RowItems[i].setAttribute('selected', 'selected');
						}else{
							RowItems[i].removeAttribute('selected');
						}
					}else{
						if (value === arTreeItem[1]){
							$(RowItems[i]).addClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS);
						}else{
							$(RowItems[i]).removeClass(this.skuVisualParams[propModes.toUpperCase()].ACTIVE_CLASS);
						}
					}
				}
			}
		}
	}
};

window.JCCatalogSection.prototype.SearchOfferPropIndex = function(strPropID, strPropValue)
{
	var strName = '',
		arShowValues = false,
		i, j,
		arCanBuyValues = [],
		index = -1,
		arFilter = {},
		tmpFilter = [];

	for (i = 0; i < this.treeProps.length; i++)
	{
		if (this.treeProps[i].ID === strPropID)
		{
			index = i;
			break;
		}
	}

	if (-1 < index)
	{
		for (i = 0; i < index; i++)
		{
			strName = 'PROP_'+this.treeProps[i].ID;
			arFilter[strName] = this.selectedValues[strName];
		}
		strName = 'PROP_'+this.treeProps[index].ID;
		arShowValues = this.GetRowValues(arFilter, strName);
		if (!arShowValues)
		{
			return false;
		}
		if (!BX.util.in_array(strPropValue, arShowValues))
		{
			return false;
		}
		arFilter[strName] = strPropValue;
		for (i = index+1; i < this.treeProps.length; i++)
		{
			strName = 'PROP_'+this.treeProps[i].ID;
			arShowValues = this.GetRowValues(arFilter, strName);
			if (!arShowValues)
			{
				return false;
			}
			if (this.showAbsent)
			{
				arCanBuyValues = [];
				tmpFilter = [];
				tmpFilter = BX.clone(arFilter, true);
				for (j = 0; j < arShowValues.length; j++)
				{
					tmpFilter[strName] = arShowValues[j];
					if (this.GetCanBuy(tmpFilter))
					{
						arCanBuyValues[arCanBuyValues.length] = arShowValues[j];
					}
				}
			}
			else
			{
				arCanBuyValues = arShowValues;
			}
			if (!!this.selectedValues[strName] && BX.util.in_array(this.selectedValues[strName], arCanBuyValues))
			{
				arFilter[strName] = this.selectedValues[strName];
			}
			else
			{
				arFilter[strName] = arCanBuyValues[0];
			}
			this.UpdateRow(i, arFilter[strName], arShowValues, arCanBuyValues);
		}
		this.selectedValues = arFilter;
		this.ChangeInfo();
	}
	return true;
};

window.JCCatalogSection.prototype.UpdateRow = function(intNumber, activeID, showID, canBuyID)
{
	var i = 0,
		showI = 0,
		value = '',
		countShow = 0,
		strNewLen = '',
		obData = {},
		pictMode = false,
		extShowMode = false,
		isCurrent = false,
		selectIndex = 0,
		obLeft = this.treeEnableArrow,
		obRight = this.treeEnableArrow,
		currentShowStart = 0,
		RowItems = null;

	if (-1 < intNumber && intNumber < this.obTreeRows.length){
		propMode = this.treeProps[intNumber].DISPLAY_TYPE;
		RowItems = BX.findChildren(this.obTreeRows[intNumber].LIST, {tagName: this.skuVisualParams[propMode].TAG}, false);
		if (!!RowItems && 0 < RowItems.length){
			selectMode = ('SELECT' === this.treeProps[intNumber].DISPLAY_TYPE);
			countShow = showID.length;
			obData = {
				style: {},
				props: {
					disabled: '',
					selected: '',
				},
			};

			for (i = 0; i < RowItems.length; i++){
				value = RowItems[i].getAttribute('data-onevalue');
				isCurrent = (value === activeID && value !=0);
				if (BX.util.in_array(value, canBuyID)){
					obData.props.className = (isCurrent ? this.skuVisualParams[propMode].ACTIVE_CLASS : '');
				}else{
					obData.props.className = (isCurrent ? this.skuVisualParams[propMode].ACTIVE_CLASS+' '+this.skuVisualParams[propMode].HIDE_CLASS : this.skuVisualParams[propMode].HIDE_CLASS);
				}
				// obData.props.className = (isCurrent ? this.skuVisualParams[propMode].ACTIVE_CLASS : '');

				if(selectMode){
					obData.props.disabled = 'disabled';
					obData.props.selected = (isCurrent ? 'selected' : '');
				}else{
					obData.style.display = 'none';
				}

				if (BX.util.in_array(value, showID)){
					if(selectMode){
						obData.props.disabled = '';
					}else{
						obData.style.display = '';
					}
					if (isCurrent){
						selectIndex = showI;
					}
					showI++;
				}
				BX.adjust(RowItems[i], obData);
			}

			if(selectMode){
				if($(this.obTreeRows[intNumber].LIST).parent().hasClass('ik_select'))
					$(this.obTreeRows[intNumber].LIST).ikSelect('reset');
			}

			this.showCount[intNumber] = countShow;
			this.showStart[intNumber] = currentShowStart;
		}
	}
};

window.JCCatalogSection.prototype.GetRowValues = function(arFilter, index)
{
	var i = 0,
		j,
		arValues = [],
		boolSearch = false,
		boolOneSearch = true;

	if (0 === arFilter.length)
	{
		for (i = 0; i < this.offers.length; i++)
		{
			if (!BX.util.in_array(this.offers[i].TREE[index], arValues))
			{
				arValues[arValues.length] = this.offers[i].TREE[index];
			}
		}
		boolSearch = true;
	}
	else
	{
		for (i = 0; i < this.offers.length; i++)
		{
			boolOneSearch = true;
			for (j in arFilter)
			{
				if (arFilter[j] !== this.offers[i].TREE[j])
				{
					boolOneSearch = false;
					break;
				}
			}
			if (boolOneSearch)
			{
				if (!BX.util.in_array(this.offers[i].TREE[index], arValues))
				{
					arValues[arValues.length] = this.offers[i].TREE[index];
				}
				boolSearch = true;
			}
		}
	}
	return (boolSearch ? arValues : false);
};

window.JCCatalogSection.prototype.GetCanBuy = function(arFilter)
{
	var i = 0,
		j,
		boolSearch = false,
		boolOneSearch = true;

	for (i = 0; i < this.offers.length; i++)
	{
		boolOneSearch = true;
		for (j in arFilter)
		{
			if (arFilter[j] !== this.offers[i].TREE[j])
			{
				boolOneSearch = false;
				break;
			}
		}
		if (boolOneSearch)
		{
			if (this.offers[i].CAN_BUY)
			{
				boolSearch = true;
				break;
			}
		}
	}
	return boolSearch;
};

window.JCCatalogSection.prototype.SetCurrent = function()
{
	var i = 0,
		j = 0,
		arCanBuyValues = [],
		strName = '',
		arShowValues = false,
		arFilter = {},
		tmpFilter = [],
		current = this.offers[this.offerNum].TREE;
	for (i = 0; i < this.treeProps.length; i++)
	{
		strName = 'PROP_'+this.treeProps[i].ID;
		arShowValues = this.GetRowValues(arFilter, strName);
		if (!arShowValues)
		{
			break;
		}
		if (BX.util.in_array(current[strName], arShowValues))
		{
			arFilter[strName] = current[strName];
		}
		else
		{
			arFilter[strName] = arShowValues[0];
			this.offerNum = 0;
		}
		if (this.showAbsent)
		{
			arCanBuyValues = [];
			tmpFilter = [];
			tmpFilter = BX.clone(arFilter, true);
			for (j = 0; j < arShowValues.length; j++)
			{
				tmpFilter[strName] = arShowValues[j];
				if (this.GetCanBuy(tmpFilter))
				{
					arCanBuyValues[arCanBuyValues.length] = arShowValues[j];
				}
			}
		}
		else
		{
			arCanBuyValues = arShowValues;
		}
		this.UpdateRow(i, arFilter[strName], arShowValues, arCanBuyValues);
	}
	this.selectedValues = arFilter;
	this.ChangeInfo();
};

window.JCCatalogSection.prototype.ChangeInfo = function()
{
	var i = 0,
		j,
		index = -1,
		compareParams,
		boolOneSearch = true;

	for (i = 0; i < this.offers.length; i++)
	{
		boolOneSearch = true;
		for (j in this.selectedValues)
		{
			if (this.selectedValues[j] !== this.offers[i].TREE[j])
			{
				boolOneSearch = false;
				break;
			}
		}
		if (boolOneSearch)
		{
			index = i;
			break;
		}
	}
	if (-1 < index){
		if (!!this.obPict){
			var obData = {
				attrs: {}
			};

			if (!!this.offers[index].PREVIEW_PICTURE){
				obData.attrs.src = this.offers[index].PREVIEW_PICTURE.SRC;
			}else{
				obData.attrs.src = this.defaultPict.pict.SRC;
			}
			BX.adjust(BX.findChild(this.obPict, {"tag": "img"}), obData);
		}
		if (this.secondPict && !!this.obSecondPict)
		{
			if (!!this.offers[index].PREVIEW_PICTURE_SECOND)
			{
				BX.adjust(this.obSecondPict, {style: {backgroundImage: 'url('+this.offers[index].PREVIEW_PICTURE_SECOND.SRC+')'}});
			}
			else if (!!this.offers[index].PREVIEW_PICTURE.SRC)
			{
				BX.adjust(this.obSecondPict, {style: {backgroundImage: 'url('+this.offers[index].PREVIEW_PICTURE.SRC+')'}});
			}
			else if (!!this.defaultPict.secondPict)
			{
				BX.adjust(this.obSecondPict, {style: {backgroundImage: 'url('+this.defaultPict.secondPict.SRC+')'}});
			}
			else
			{
				BX.adjust(this.obSecondPict, {style: {backgroundImage: 'url('+this.defaultPict.pict.SRC+')'}});
			}
		}
		if (this.showSkuProps && !!this.obSkuProps)
		{
			if (0 === this.offers[index].DISPLAY_PROPERTIES.length)
			{
				BX.adjust(this.obSkuProps, {style: {display: 'none'}, html: ''});
			}
			else
			{
				BX.adjust(this.obSkuProps, {style: {display: ''}, html: this.offers[index].DISPLAY_PROPERTIES});
			}
		}


		$(this.obBuyBtn).data("item", this.offers[index].ID);
		$(this.obBasketBtn).data("item", this.offers[index].ID);

		$(this.obBasketActions).closest('.counter_wrapp').css('opacity', 0);

		var measure = this.offers[index].MEASURE && this.offers[index].SHOW_MEASURE=="Y" ? this.offers[index].MEASURE : '';
		this.setPrice(this.offers[index].PRICE, measure);
		this.setQuantityStore(this.offers[index].MAX_QUANTITY, this.offers[index].AVAILIABLE.TEXT);
		this.offerNum = index;
		this.QuantitySet(this.offerNum);

		$(this.obProduct).find('.item-title a').attr('href', this.offers[this.offerNum].URL);
		$(this.obProduct).find('.image_wrapper_block > a').attr('href', this.offers[this.offerNum].URL);

		/*quantity discount start*/
		if($(this.obProduct).find('.quantity_block .values').length){
			$(this.obProduct).find('.quantity_block .values .item span.value').text(this.offers[index].MAX_QUANTITY).css({'opacity':'1'});
		}
		/*quantity discount end*/

		var obj=this.offers[index],
			th=$(this.obProduct);

		if(typeof arBasketAspro !=="undefined"){
			this.setActualDataBlock(th, obj);
		}else{
			if(typeof window.frameCacheVars !== "undefined"){
				BX.addCustomEvent("onFrameDataReceived", function(){
					window.JCCatalogSection.prototype.setActualDataBlock(th, obj);
				});
			}
		}
	}
};

/*set blocks start*/
window.JCCatalogSection.prototype.setActualDataBlock = function(th, obj)
{
	/*like block start*/
	this.setLikeBlock(th, '.like_icons .wish_item_button', obj, 'DELAY');
	this.setLikeBlock(th, '.like_icons .compare_item_button',obj, 'COMPARE');
	/*like block end*/

	/*buy block start*/
	this.setBuyBlock(th, obj);
	/*buy block end*/
}
/*set blocks end*/

/*set compare/wish*/
window.JCCatalogSection.prototype.setLikeBlock = function(th, className, obj, type)
{
	var block=th;
	if(type=="DELAY"){
		if(obj.CAN_BUY){
			block.find(className).css('display','block');
		}else{
			block.find(className).hide();
		}
	}

	block.find(className).attr('data-item', obj.ID);
	block.find(className).find('span').attr('data-item', obj.ID);
	if(arBasketAspro[type]){
		block.find(className).find('.to').removeClass('added').css('display','block');
		block.find(className).find('.in').hide();

		if(arBasketAspro[type][obj.ID]!==undefined){
			block.find(className).find('.to').hide();
			block.find(className).find('.in').css('display','block');
		}
	}
}

/*set buy*/
window.JCCatalogSection.prototype.setBuyBlock = function(th, obj)
{
	var buyBlock=th.find('.offer_buy_block');

	if(buyBlock.find('.counter_wrapp .counter_block').length){
		buyBlock.find('.counter_wrapp .counter_block').attr('data-item', obj.ID);
	}
	if((obj.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL && obj.CONFIG.ACTION == "ADD") && obj.CAN_BUY){
		var max=(obj.CONFIG.MAX_QUANTITY_BUY>0 ? "data-max='"+obj.CONFIG.MAX_QUANTITY_BUY+"'" : ""),
			counterHtml='<span class="minus">-</span>'+
				'<input type="text" class="text" name="'+obj.PRODUCT_QUANTITY_VARIABLE+'" value="'+obj.CONFIG.MIN_QUANTITY_BUY+'" />'+
				'<span class="plus" '+max+'>+</span>';
		if(arBasketAspro["BASKET"] && arBasketAspro["BASKET"][obj.ID]!==undefined){
			if(buyBlock.find('.counter_wrapp .counter_block').length){
				buyBlock.find('.counter_wrapp .counter_block').hide();
			}else{
				buyBlock.find('.counter_wrapp').prepend('<div class="counter_block" data-item="'+obj.ID+'"></div>');
				buyBlock.find('.counter_wrapp .counter_block').html(counterHtml).hide();
			}
		}else{
			if(buyBlock.find('.counter_wrapp .counter_block').length){
				buyBlock.find('.counter_wrapp .counter_block').html(counterHtml).show();
			}else{
				buyBlock.find('.counter_wrapp').prepend('<div class="counter_block" data-item="'+obj.ID+'"></div>');
				buyBlock.find('.counter_wrapp .counter_block').html(counterHtml);
			}
		}
	}else{
		if(buyBlock.find('.counter_wrapp .counter_block').length){
			buyBlock.find('.counter_wrapp .counter_block').hide();
		}
	}
	var className=((obj.CONFIG.ACTION == "ORDER") || !obj.CAN_BUY || !obj.CONFIG.OPTIONS.USE_PRODUCT_QUANTITY_DETAIL || (obj.CONFIG.ACTION == "SUBSCRIBE" && obj.CATALOG_SUBSCRIBE == "Y") ? "wide" : "" ),
		buyBlockBtn=$('<div class="button_block"></div>');

	if(buyBlock.find('.counter_wrapp').find('.button_block').length){
		if(arBasketAspro["BASKET"] && arBasketAspro["BASKET"][obj.ID]!==undefined){
			buyBlock.find('.counter_wrapp').find('.button_block').addClass('wide').html(obj.HTML);
			markProductAddBasket(obj.ID);
		}else{
			if(className){
				buyBlock.find('.counter_wrapp').find('.button_block').addClass('wide').html(obj.HTML);
				if(arBasketAspro["SUBSCRIBE"] && arBasketAspro["SUBSCRIBE"][obj.ID]!==undefined){
					markProductSubscribe(obj.ID);
				}
			}else{
				buyBlock.find('.counter_wrapp').find('.button_block').removeClass('wide').html(obj.HTML);
			}
		}
	}else{
		buyBlock.find('.counter_wrapp').append('<div class="button_block '+className+'">'+obj.HTML+'</div>');
		if(arBasketAspro["BASKET"] && arBasketAspro["BASKET"][obj.ID]!==undefined)
			markProductAddBasket(obj.ID);
		if(arBasketAspro["SUBSCRIBE"] && arBasketAspro["SUBSCRIBE"][obj.ID]!==undefined)
			markProductSubscribe(obj.ID);
	}

	if(obj.CONFIG.ACTION !== "NOTHING"){
		if(obj.CONFIG.ACTION == "ADD" && obj.CAN_BUY && obj.SHOW_ONE_CLICK_BUY!="N"){
			var ocb='<span class="transparent big_btn type_block button one_click" data-offers="Y" data-item="'+obj.ID+'" data-iblockID="'+obj.IBLOCK_ID+'" data-quantity="'+obj.CONFIG.MIN_QUANTITY_BUY+'" data-props="'+obj.OFFER_PROPS+'" onclick="oneClickBuy('+obj.ID+', '+obj.IBLOCK_ID+', this)">'+
				'<span>'+obj.ONE_CLICK_BUY+'</span>'+
				'</span>';
			if(buyBlock.find('.wrapp_one_click').length){
				buyBlock.find('.wrapp_one_click').html(ocb);
			}else{
				buyBlock.append('<div class="wrapp_one_click">'+ocb+'</div>');
			}
		}else{
			if(buyBlock.find('.wrapp_one_click').length){
				buyBlock.find('.wrapp_one_click').remove();
			}
		}
	}else{
		if(buyBlock.find('.wrapp_one_click').length){
			buyBlock.find('.wrapp_one_click').remove();
		}
	}

	buyBlock.fadeIn();
}

/*get compare sku*/
window.JCCatalogSection.prototype.CompareCountResult = function(result)
{
	if(result.COMPARE_COUNT){
		for(var i in result.ITEMS){
			if(result.ITEMS[i]==this.offers[this.offerNum].ID){
				this.offers[this.offerNum].COMPARE_ACTIVE=true;
				break;
			}else{
				this.offers[this.offerNum].COMPARE_ACTIVE=false;
			}
		}
		if(this.offers[this.offerNum].COMPARE_ACTIVE){
			$(this.obCompare).find('.compare_item.to').hide();
			$(this.obCompare).find('.compare_item.added').show();
		}else{
			$(this.obCompare).find('.compare_item.added').hide();
			$(this.obCompare).find('.compare_item.to').show();
		}
	}
}

/*get item info*/
window.JCCatalogSection.prototype.ItemInfoResult = function(result)
{
	if(result.HTML){
		$(this.obBasketActions).html(result.HTML);
		$(this.obBasketActions).show();
		this.obBuyBtn = BX(this.visual.BUY_ID);
		this.obBasketBtn = BX(this.visual.BASKET_LINK);
		this.obSubscribeBtn = BX(this.visual.SUBSCRIBE_ID);
		this.obSubscribedBtn = BX(this.visual.SUBSCRIBED_ID);
		BX.bind(this.obBuyBtn, 'click', BX.delegate(this.Add2Basket, this));
		$(this.obBasketActions).removeClass('wide');
		this.ajax_type_item=result.BUYMISSINGGOODS;
		if(result.BUYMISSINGGOODS!="ADD" && !this.canBuy){
			$(this.obBasketActions).addClass('wide');
		}else{
			$(this.obQuantity).css('display','');
		}
	}
	//if(this.canBuy){
		basketParams = {
			ajax_action: 'Y'
		};
		BX.ajax.loadJSON(
			arOptimusOptions['SITE_DIR']+'ajax/get_basket_count.php',
			basketParams,
			BX.delegate(this.BasketCountResult, this)
		);
	//}
}

/*get basket items*/
window.JCCatalogSection.prototype.BasketCountResult = function(result)
{
	//if(result.TOTAL_COUNT){
		for(var i in result.ITEMS){
			if(result.ITEMS[i].PRODUCT_ID==this.offers[this.offerNum].ID){
				this.offers[this.offerNum].BASKET_ACTIVE=true;
				break;
			}else{
				this.offers[this.offerNum].BASKET_ACTIVE=false;
			}
		}
		for(var i in result.SUBSCRIBE_ITEMS){
			if(result.SUBSCRIBE_ITEMS[i].PRODUCT_ID==this.offers[this.offerNum].ID){
				this.offers[this.offerNum].SUBSCRIBE_ACTIVE=true;
				break;
			}else{
				this.offers[this.offerNum].SUBSCRIBE_ACTIVE=false;
			}
		}

		this.BasketStateRefresh();
	//}
}

window.JCCatalogSection.prototype.BasketStateRefresh = function(buy_basket)
{
	/*if(this.offers[this.offerNum].SUBSCRIBE_ACTIVE){
		$(this.obBasketActions).addClass('wide');
		$(this.obSubscribeBtn).hide();
		$(this.obSubscribedBtn).show();
	}else{
		$(this.obBasketActions).addClass('wide');
		$(this.obSubscribedBtn).hide();
		$(this.obSubscribeBtn).show();
	}
	if(this.offers[this.offerNum].BASKET_ACTIVE){
		$(this.obBuyBtn).hide();
		$(this.obBasketBtn).show();
		$(this.obQuantity).closest('.counter_wrapp').find('.counter_block').hide();
		$(this.obBasketActions).addClass('wide');
	}else{
		$(this.obBasketActions).removeClass('wide');
		$(this.obBasketBtn).hide();
		$(this.obBuyBtn).show();
		if(this.ajax_type_item=="ADD" || this.canBuy)
			$(this.obQuantity).closest('.counter_wrapp').find('.counter_block').show();

	}
	if(!this.canBuy){
		$(this.obBasketActions).addClass('wide');
	}*/
	if(this.offers[this.offerNum].SUBSCRIBE_ACTIVE){
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .to-subscribe').hide();
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .in-subscribe').show();
	}else{
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .to-subscribe').show();
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .in-subscribe').hide();
	}
	if(this.offers[this.offerNum].BASKET_ACTIVE){
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID).addClass('wide');
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .button_block').addClass('wide');
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .to-cart').hide();
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .in-cart').show();
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .counter_block').hide();
	}else{
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID).removeClass('wide');
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .button_block').removeClass('wide');
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .to-cart').show();
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .in-cart').hide();
		$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID+' .counter_block').show();

	}
	BX.style(this.obBasketActions, 'opacity', '1');
	$(this.obBasketActions).closest('.counter_wrapp').css('opacity', 1);
	if(buy_basket!== 'undefined' && buy_basket=="Y"){
		if($("#basket_line .basket_fly").length && $(window).outerWidth()>768)
		{
			// preAnimateBasketFly($("#basket_line .basket_fly"), 200, 333);
			basketFly('open');
		}
		else if($("#basket_line .cart").length)
		{
			if($("#basket_line .cart").is(".empty_cart"))
			{
				$("#basket_line .cart").removeClass("empty_cart").find(".cart_wrapp a.basket_link").removeAttr("href").addClass("cart-call");
				touchBasket('.cart:not(.empty_cart) .basket_block .link');
			}
			reloadTopBasket('add', $('#basket_line'), 200, 2000, 'Y');
			/*if($(window).outerWidth() > 520){
				//if(arOptimusOptions['THEME']['SHOW_BASKET_ONADDTOCART'] !== 'N'){
					preAnimateBasketPopup('', $('.card_popup_frame'), 0, 200);
				//}
			};*/
		}
		animateBasketLine(200);
	}
}

window.JCCatalogSection.prototype.setPrice = function(price, measure)
{
	var strPrice,
		obData;

	if (!!this.obPrice){
		strPrice = BX.Currency.currencyFormat(price.DISCOUNT_VALUE, price.CURRENCY, true);
		if(measure){
			strPrice=(strPrice ? strPrice +'/'+measure : "&nbsp;");
		}
		BX.adjust(this.obPrice, {html: strPrice});
		if (price.DISCOUNT_VALUE !== price.VALUE && this.showOldPrice)
		{
			$(this.obPriceOld).find('strike').show().html(BX.Currency.currencyFormat(price.VALUE, price.CURRENCY, true));
			if(this.showPercent){
				$(this.obPriceOld).closest('.cost').find('.sale_block').show();
				$(this.obPriceOld).closest('.cost').find('.value').html(price.DISCOUNT_DIFF_PERCENT_RAW);
				$(this.obPriceOld).closest('.cost').find('.text span').html(BX.Currency.currencyFormat(price.DISCOUNT_DIFF, price.CURRENCY, true));
			}
		}
		else{
			$(this.obPriceOld).find('strike').hide().html('');
			if(this.showPercent){
				$(this.obPriceOld).closest('.cost').find('.sale_block').hide();
			}
		}
	}
};

/*set store quantity*/
window.JCCatalogSection.prototype.setQuantityStore = function(quantity, text)
{
	if(parseFloat(quantity)>0){
		$(this.storeQuanity).find('.icon').removeClass('order').addClass('stock');
	}else{
		$(this.storeQuanity).find('.icon').removeClass('stock').addClass('order');
	}
	$(this.storeQuanity).find('.icon + span').html(text);
}

window.JCCatalogSection.prototype.Compare = function()
{
	var compareParams, compareLink;
	$(this.obProduct).find('.like_icons .o_'+this.offers[this.offerNum].ID).data('changed','Y');
	// if($(this.obCompare).find('.compare_item.added').is(':visible')){
	if($(this.obProduct).find('.like_icons .o_'+this.offers[this.offerNum].ID).find('.compare_item.added').is(':visible')){
		compareLink = this.compareData.compareUrlDel;
		this.compareData.Added = false;
	}else{
		compareLink = this.compareData.compareUrl;
		this.compareData.Added = true;
	}
	if (!!compareLink){
		switch (this.productType){
			case 1://product
			case 2://set
				compareLink = compareLink.replace('#ID#', this.product.id.toString());
				break;
			case 3://sku
				compareLink = compareLink.replace('#ID#', this.offers[this.offerNum].ID);
				break;
		}
		compareParams = {
			ajax_action: 'Y'
		};
		BX.ajax.loadJSON(
			compareLink,
			compareParams,
			BX.proxy(this.CompareResult, this)
		);
	}
};

window.JCCatalogSection.prototype.CompareResult = function(result)
{
	var popupContent, popupButtons, popupTitle;

	if (typeof result !== 'object'){
		return false;
	}

	if (result.STATUS === 'OK'){
		BX.onCustomEvent('OnCompareChange');
		/*if(!this.compareData.Added){
			$(this.obCompare).find('.in').hide();
			$(this.obCompare).find('.to').show();
		}
		else{
			$(this.obCompare).find('.to').hide();
			$(this.obCompare).find('.in').show();
		}*/
		if(!this.compareData.Added){
			$(this.obProduct).find('.like_icons .o_'+this.offers[this.offerNum].ID).find('.in').hide();
			$(this.obProduct).find('.like_icons .o_'+this.offers[this.offerNum].ID).find('.to').show();
		}
		else{
			$(this.obProduct).find('.like_icons .o_'+this.offers[this.offerNum].ID).find('.to').hide();
			$(this.obProduct).find('.like_icons .o_'+this.offers[this.offerNum].ID).find('.in').show();
		}
		jsAjaxUtil.InsertDataToNode(arOptimusOptions['SITE_DIR'] + 'ajax/show_compare_preview_top.php', 'compare_line', false);
	}else{
		console.log(BX.message('ADD_ERROR_COMPARE'));
	}
	return false;
};

window.JCCatalogSection.prototype.CompareRedirect = function()
{
	if (!!this.compareData.comparePath){
		location.href = this.compareData.comparePath;
	}else{
		this.obPopupWin.close();
	}
};

window.JCCatalogSection.prototype.InitBasketUrl = function()
{
	this.basketUrl = (this.basketMode === 'ADD' ? this.basketData.add_url : this.basketData.buy_url);
	switch (this.productType)
	{
		case 1://product
		case 2://set
			this.basketUrl = this.basketUrl.replace('#ID#', this.product.id.toString());
			break;
		case 3://sku
			this.basketUrl = this.basketUrl.replace('#ID#', this.offers[this.offerNum].ID);
			break;
	}
	this.basketParams = {
		'ajax_basket': 'Y'
	};
	if (this.showQuantity)
	{
		// this.basketParams[this.basketData.quantity] = this.obQuantity.value;
		this.basketParams[this.basketData.quantity] = $(this.obProduct).find('.counter_wrapp').find('.counter_block .text').val();
	}
	if (!!this.basketData.sku_props)
	{
		this.basketParams[this.basketData.sku_props_var] = this.basketData.sku_props;
	}
};

window.JCCatalogSection.prototype.FillBasketProps = function()
{
	if (!this.visual.BASKET_PROP_DIV)
	{
		return;
	}
	var
		i = 0,
		propCollection = null,
		foundValues = false,
		obBasketProps = null;

	if (this.basketData.useProps && !this.basketData.emptyProps)
	{
		if (!!this.obPopupWin && !!this.obPopupWin.contentContainer)
		{
			obBasketProps = this.obPopupWin.contentContainer;
		}
	}
	else
	{
		obBasketProps = BX(this.visual.BASKET_PROP_DIV);
	}
	if (!!obBasketProps)
	{
		propCollection = obBasketProps.getElementsByTagName('select');
		if (!!propCollection && !!propCollection.length)
		{
			for (i = 0; i < propCollection.length; i++)
			{
				if (!propCollection[i].disabled)
				{
					switch(propCollection[i].type.toLowerCase())
					{
						case 'select-one':
							this.basketParams[propCollection[i].name] = propCollection[i].value;
							foundValues = true;
							break;
						default:
							break;
					}
				}
			}
		}
		propCollection = obBasketProps.getElementsByTagName('input');
		if (!!propCollection && !!propCollection.length)
		{
			for (i = 0; i < propCollection.length; i++)
			{
				if (!propCollection[i].disabled)
				{
					switch(propCollection[i].type.toLowerCase())
					{
						case 'hidden':
							this.basketParams[propCollection[i].name] = propCollection[i].value;
							foundValues = true;
							break;
						case 'radio':
							if (propCollection[i].checked)
							{
								this.basketParams[propCollection[i].name] = propCollection[i].value;
								foundValues = true;
							}
							break;
						default:
							break;
					}
				}
			}
		}
	}
	if (!foundValues)
	{
		this.basketParams[this.basketData.props] = [];
		this.basketParams[this.basketData.props][0] = 0;
	}
};

window.JCCatalogSection.prototype.Add2Basket = function()
{
	this.basketMode = 'ADD';
	this.Basket();
};

window.JCCatalogSection.prototype.BuyBasket = function()
{
	this.basketMode = 'BUY';
	this.Basket();
};

window.JCCatalogSection.prototype.SendToBasket = function()
{
	if (!this.canBuy){
		return;
	}

	this.InitBasketUrl();
	this.FillBasketProps();

	BX.ajax.loadJSON(
		this.basketUrl,
		this.basketParams,
		BX.delegate(this.BasketResult, this)
	);
};

window.JCCatalogSection.prototype.Basket = function()
{
	var contentBasketProps = '';
	if (!this.canBuy){
		return;
	}

	this.SendToBasket();
};

window.JCCatalogSection.prototype.BasketResult = function(arResult)
{
	var strContent = '',
		strPict = '',
		successful,
		buttons = [];

	if (!!this.obPopupWin){
		this.obPopupWin.close();
	}
	if ('object' !== typeof arResult){
		return false;
	}
	successful = (arResult.STATUS === 'OK');
	if (successful && this.basketAction === 'BUY'){
		this.BasketRedirect();
	}else{
		if (successful){
			getActualBasket();
			markProductAddBasket(this.offers[this.offerNum].ID);
			BX.onCustomEvent('OnBasketChange');
			this.offers[this.offerNum].BASKET_ACTIVE=true;
			this.BasketStateRefresh("Y");
			$(this.obProduct).find('.hover_block .o_'+this.offers[this.offerNum].ID).data('changed','Y');

		}else{
			console.log(BX.message('ADD_ERROR_BASKET'));
		}
	}
};

window.JCCatalogSection.prototype.BasketRedirect = function()
{
	location.href = (!!this.basketData.basketUrl ? this.basketData.basketUrl : BX.message('BASKET_URL'));
};

})(window);156  20126|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/catalog.section/catalog_block_slider/template.php|3beea090<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();?>
<?$this->setFrameMode(true);?>
<?if( count( $arResult["ITEMS"] ) >= 1 ){
	$injectId = 'sale_gift_product_'.$this->randString();?>
	<ul class="viewed_navigation slider_navigation top_big custom_flex border"></ul>
	<div class="s_<?=$injectId;?> <?=($arParams["SHOW_UNABLE_SKU_PROPS"] != "N" ? "show_un_props" : "unshow_un_props");?>">
		<div class="all_wrapp s_<?=$injectId;?>">
			<div class="content_inner tab">
				<ul class="tabs_slider slides wr">
					<?
					$elementEdit = CIBlock::GetArrayByID($arParams['IBLOCK_ID'], 'ELEMENT_EDIT');
					$elementDelete = CIBlock::GetArrayByID($arParams['IBLOCK_ID'], 'ELEMENT_DELETE');
					$elementDeleteParams = array('CONFIRM' => GetMessage('CVP_TPL_ELEMENT_DELETE_CONFIRM'));
					?>
					<?foreach($arResult['ITEMS'] as $key => $arItem){
						$this->AddEditAction($arItem['ID'], $arItem['EDIT_LINK'], $elementEdit);
						$this->AddDeleteAction($arItem['ID'], $arItem['DELETE_LINK'], $elementDelete, $elementDeleteParams);
						$arItem["strMainID"] = $this->GetEditAreaId($arItem['ID']);
						$arItemIDs=COptimus::GetItemsIDs($arItem);

						$strMeasure = '';
						$totalCount = COptimus::GetTotalCount($arItem);
						$arQuantityData = COptimus::GetQuantityArray($totalCount, $arItemIDs["ALL_ITEM_IDS"]);
						if(!$arItem["OFFERS"]){
							if($arParams["SHOW_MEASURE"] == "Y" && $arItem["CATALOG_MEASURE"]){
								$arMeasure = CCatalogMeasure::getList(array(), array("ID" => $arItem["CATALOG_MEASURE"]), false, false, array())->GetNext();
								$strMeasure = $arMeasure["SYMBOL_RUS"];
							}
							$arAddToBasketData = COptimus::GetAddToBasketArray($arItem, $totalCount, $arParams["DEFAULT_COUNT"], $arParams["BASKET_URL"], false, $arItemIDs["ALL_ITEM_IDS"], 'small', $arParams);
						}
						elseif($arItem["OFFERS"]){
							$strMeasure = $arItem["MIN_PRICE"]["CATALOG_MEASURE_NAME"];
							if(!$arItem['OFFERS_PROP']){

								$arAddToBasketData = COptimus::GetAddToBasketArray($arItem["OFFERS"][0], $totalCount, $arParams["DEFAULT_COUNT"], $arParams["BASKET_URL"], false, $arItemIDs["ALL_ITEM_IDS"], 'small', $arParams);
							}
						}
						?>
						<li class="catalog_item" id="<?=$arItem["strMainID"];?>">
							<div class="image_wrapper_block">
								<div class="stickers">
									<?if (is_array($arItem["PROPERTIES"]["HIT"]["VALUE_XML_ID"])):?>
										<?foreach($arItem["PROPERTIES"]["HIT"]["VALUE_XML_ID"] as $key=>$class){?>
											<div><div class="sticker_<?=strtolower($class);?>"><?=$arItem["PROPERTIES"]["HIT"]["VALUE"][$key]?></div></div>
										<?}?>
									<?endif;?>
									<?if($arParams["SALE_STIKER"] && $arItem["PROPERTIES"][$arParams["SALE_STIKER"]]["VALUE"]){?>
										<div><div class="sticker_sale_text"><?=$arItem["PROPERTIES"][$arParams["SALE_STIKER"]]["VALUE"];?></div></div>
									<?}?>
								</div>
								<?if((!$arItem["OFFERS"] && $arParams["DISPLAY_WISH_BUTTONS"] != "N" ) || ($arParams["DISPLAY_COMPARE"] == "Y")):?>
									<div class="like_icons">
										<?if($arParams["DISPLAY_WISH_BUTTONS"] != "N"):?>
											<?if(!$arItem["OFFERS"]):?>
												<div class="wish_item_button">
													<span title="<?=GetMessage('CATALOG_WISH')?>" class="wish_item to" data-item="<?=$arItem["ID"]?>" data-iblock="<?=$arItem["IBLOCK_ID"]?>"><i></i></span>
													<span title="<?=GetMessage('CATALOG_WISH_OUT')?>" class="wish_item in added" style="display: none;" data-item="<?=$arItem["ID"]?>" data-iblock="<?=$arItem["IBLOCK_ID"]?>"><i></i></span>
												</div>
											<?elseif($arItem["OFFERS"] && !empty($arItem['OFFERS_PROP'])):?>
												<div class="wish_item_button" style="display: none;">
													<span title="<?=GetMessage('CATALOG_WISH')?>" class="wish_item to <?=$arParams["TYPE_SKU"];?>" data-item="" data-iblock="<?=$arItem["IBLOCK_ID"]?>" data-offers="Y" data-props="<?=$arOfferProps?>"><i></i></span>
													<span title="<?=GetMessage('CATALOG_WISH_OUT')?>" class="wish_item in added <?=$arParams["TYPE_SKU"];?>" style="display: none;" data-item="" data-iblock="<?=$arItem["IBLOCK_ID"]?>"><i></i></span>
												</div>
											<?endif;?>
										<?endif;?>
										<?if($arParams["DISPLAY_COMPARE"] == "Y"):?>
											<?if(!$arItem["OFFERS"] || $arParams["TYPE_SKU"] !== 'TYPE_1'):?>
												<div class="compare_item_button">
													<span title="<?=GetMessage('CATALOG_COMPARE')?>" class="compare_item to" data-iblock="<?=$arItem["IBLOCK_ID"]?>" data-item="<?=$arItem["ID"]?>" ><i></i></span>
													<span title="<?=GetMessage('CATALOG_COMPARE_OUT')?>" class="compare_item in added" style="display: none;" data-iblock="<?=$arItem["IBLOCK_ID"]?>" data-item="<?=$arItem["ID"]?>"><i></i></span>
												</div>
											<?elseif($arItem["OFFERS"]):?>
												<div class="compare_item_button">
													<span title="<?=GetMessage('CATALOG_COMPARE')?>" class="compare_item to <?=$arParams["TYPE_SKU"];?>" data-iblock="<?=$arItem["IBLOCK_ID"]?>" data-item="" ><i></i></span>
													<span title="<?=GetMessage('CATALOG_COMPARE_OUT')?>" class="compare_item in added <?=$arParams["TYPE_SKU"];?>" style="display: none;" data-iblock="<?=$arItem["IBLOCK_ID"]?>" data-item=""><i></i></span>
												</div>
											<?endif;?>
										<?endif;?>
									</div>
								<?endif;?>
								<a href="<?=$arItem["DETAIL_PAGE_URL"]?>" class="thumb" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PICT']; ?>">
									<?
									$a_alt=($arItem["IPROPERTY_VALUES"]["ELEMENT_PREVIEW_PICTURE_FILE_ALT"] ? $arItem["IPROPERTY_VALUES"]["ELEMENT_PREVIEW_PICTURE_FILE_ALT"] : $arItem["NAME"] );
									$a_title=($arItem["IPROPERTY_VALUES"]["ELEMENT_PREVIEW_PICTURE_FILE_TITLE"] ? $arItem["IPROPERTY_VALUES"]["ELEMENT_PREVIEW_PICTURE_FILE_TITLE"] : $arItem["NAME"] );
									?>
									<?if( !empty($arItem["PREVIEW_PICTURE"]) ):?>
										<img src="<?=$arItem["PREVIEW_PICTURE"]["SRC"]?>" alt="<?=$a_alt;?>" title="<?=$a_title;?>" />
									<?elseif( !empty($arItem["DETAIL_PICTURE"])):?>
										<?$img = CFile::ResizeImageGet($arItem["DETAIL_PICTURE"], array( "width" => 170, "height" => 170 ), BX_RESIZE_IMAGE_PROPORTIONAL,true );?>
										<img src="<?=$img["src"]?>" alt="<?=$a_alt;?>" title="<?=$a_title;?>" />
									<?else:?>
										<img src="<?=SITE_TEMPLATE_PATH?>/images/no_photo_medium.png" alt="<?=$a_alt;?>" title="<?=$a_title;?>" />
									<?endif;?>
								</a>
							</div>
							<div class="item_info <?=$arParams["TYPE_SKU"]?>">
								<div class="item-title">
									<a href="<?=$arItem["DETAIL_PAGE_URL"]?>"><span><?=$arItem["NAME"]?></span></a>
								</div>
								<?if($arParams["SHOW_RATING"] == "Y"):?>
									<div class="rating">
										<?$APPLICATION->IncludeComponent(
										   "bitrix:iblock.vote",
										   "element_rating_front",
										   Array(
											  "IBLOCK_TYPE" => $arParams["IBLOCK_TYPE"],
											  "IBLOCK_ID" => $arItem["IBLOCK_ID"],
											  "ELEMENT_ID" =>$arItem["ID"],
											  "MAX_VOTE" => 5,
											  "VOTE_NAMES" => array(),
											  "CACHE_TYPE" => $arParams["CACHE_TYPE"],
											  "CACHE_TIME" => $arParams["CACHE_TIME"],
											  "DISPLAY_AS_RATING" => 'vote_avg'
										   ),
										   $component, array("HIDE_ICONS" =>"Y")
										);?>
									</div>
								<?endif;?>
								<?=$arQuantityData["HTML"];?>
								<div class="cost prices clearfix">
									<?if( $arItem["OFFERS"]){?>
										<?$minPrice = false;
										if (isset($arItem['MIN_PRICE']) || isset($arItem['RATIO_PRICE'])){
											// $minPrice = (isset($arItem['RATIO_PRICE']) ? $arItem['RATIO_PRICE'] : $arItem['MIN_PRICE']);
											$minPrice = $arItem['MIN_PRICE'];
										}
										$offer_id=0;
										if($arParams["TYPE_SKU"]=="N"){
											$offer_id=$minPrice["MIN_ITEM_ID"];
										}
										$min_price_id=$minPrice["MIN_PRICE_ID"];
										if(!$min_price_id)
											$min_price_id=$minPrice["PRICE_ID"];
										if($minPrice["MIN_ITEM_ID"])
											$item_id=$minPrice["MIN_ITEM_ID"];
										$prefix = '';
										if('N' == $arParams['TYPE_SKU'] || $arParams['DISPLAY_TYPE'] !== 'block' || empty($arItem['OFFERS_PROP'])){
											$prefix = GetMessage("CATALOG_FROM");
										}
										if($arParams["SHOW_OLD_PRICE"]=="Y"){?>
											<div class="price" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PRICE']; ?>">
												<?if(strlen($minPrice["PRINT_DISCOUNT_VALUE"])):?>
													<?=$prefix;?> <?=$minPrice["PRINT_DISCOUNT_VALUE"];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
												<?endif;?>
											</div>
											<div class="price discount" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PRICE_OLD']; ?>" <?=(!$minPrice["DISCOUNT_DIFF"] ? 'style="display:none;"' : '')?>>
												<span <?=(!$minPrice["DISCOUNT_DIFF"] ? 'style="display:none;"' : '')?>><?=$minPrice["PRINT_VALUE"];?></span>
											</div>
											<?/*if($arParams["SHOW_DISCOUNT_PERCENT"]=="Y"){?>
												<div class="sale_block" <?=(!$minPrice["DISCOUNT_DIFF"] ? 'style="display:none;"' : '')?>>
													<?$percent=round(($minPrice["DISCOUNT_DIFF"]/$minPrice["VALUE"])*100, 2);?>
													<div class="value">-<?=$percent;?>%</div>
													<div class="text"><?=GetMessage("CATALOG_ECONOMY");?> <span><?=$minPrice["PRINT_DISCOUNT_DIFF"];?></span></div>
													<div class="clearfix"></div>
												</div>
											<?}*/?>
										<?}else{?>
											<div class="price only_price" id="<?=$arItemIDs["ALL_ITEM_IDS"]['PRICE']?>">
												<?if(strlen($minPrice["PRINT_DISCOUNT_VALUE"])):?>
													<?=$prefix;?> <?=$minPrice['PRINT_DISCOUNT_VALUE'];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
												<?endif;?>
											</div>
										<?}?>
									<?}elseif ( $arItem["PRICES"] ){?>
										<? $arCountPricesCanAccess = 0;
										$min_price_id=0;
										foreach( $arItem["PRICES"] as $key => $arPrice ) { if($arPrice["CAN_ACCESS"]){$arCountPricesCanAccess++;} } ?>
										<?foreach($arItem["PRICES"] as $key => $arPrice){?>
											<?if($arPrice["CAN_ACCESS"]){
												$percent=0;
												if($arPrice["MIN_PRICE"]=="Y"){
													$min_price_id=$arPrice["PRICE_ID"];
												}?>
												<?$price = CPrice::GetByID($arPrice["ID"]);?>
												<?if($arCountPricesCanAccess > 1):?>
													<div class="price_name"><?=$price["CATALOG_GROUP_NAME"];?></div>
												<?endif;?>
												<?if($arPrice["VALUE"] > $arPrice["DISCOUNT_VALUE"] && $arParams["SHOW_OLD_PRICE"]=="Y"){?>
													<div class="price">
														<?if(strlen($arPrice["PRINT_VALUE"])):?>
															<?=$arPrice["PRINT_DISCOUNT_VALUE"];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
														<?endif;?>
													</div>
													<div class="price discount">
														<span><?=$arPrice["PRINT_VALUE"];?></span>
													</div>
													<?/*if($arParams["SHOW_DISCOUNT_PERCENT"]=="Y"){?>
														<div class="sale_block">
															<?$percent=round(($arPrice["DISCOUNT_DIFF"]/$arPrice["VALUE"])*100, 2);?>
															<?if($percent && $percent<100){?>
																<div class="value">-<?=$percent;?>%</div>
															<?}?>
															<div class="text"><?=GetMessage("CATALOG_ECONOMY");?> <span><?=$arPrice["PRINT_DISCOUNT_DIFF"];?></span></div>
															<div class="clearfix"></div>
														</div>
													<?}*/?>
												<?}else{?>
													<div class="price only_price">
														<?if(strlen($arPrice["PRINT_VALUE"])):?>
															<?=$arPrice["PRINT_VALUE"];?><?if (($arParams["SHOW_MEASURE"]=="Y") && $strMeasure):?>/<?=$strMeasure?><?endif;?>
														<?endif;?>
													</div>
												<?}?>
											<?}?>
										<?}?>
									<?}?>
								</div>
								<?if($arParams["SHOW_DISCOUNT_TIME"]=="Y"){?>
									<?$arDiscounts = CCatalogDiscount::GetDiscountByProduct( $arItem["ID"], $USER->GetUserGroupArray(), "N", $min_price_id, SITE_ID );
									$arDiscount=array();
									if($arDiscounts)
										$arDiscount=current($arDiscounts);
									if($arDiscount["ACTIVE_TO"]){?>
										<div class="view_sale_block">
											<div class="count_d_block">
												<span class="active_to hidden"><?=$arDiscount["ACTIVE_TO"];?></span>
												<div class="title"><?=GetMessage("UNTIL_AKC");?></div>
												<span class="countdown values"></span>
											</div>
											<div class="quantity_block">
												<div class="title"><?=GetMessage("TITLE_QUANTITY_BLOCK");?></div>
												<div class="values">
													<span class="item">
														<span class="value" <?=((count( $arItem["OFFERS"] ) > 0 && $arParams["TYPE_SKU"] == 'TYPE_1') ? 'style="opacity:0;"' : '')?>><?=$totalCount;?></span>
														<span class="text"><?=GetMessage("TITLE_QUANTITY");?></span>
													</span>
												</div>
											</div>
										</div>
									<?}?>
								<?}?>
							</div>
							<div class="buttons_block">
								<?if($arItem["OFFERS"]){?>
										<?if(!empty($arItem['OFFERS_PROP'])){?>
											<div class="sku_props">
												<div class="bx_catalog_item_scu wrapper_sku" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['PROP_DIV']; ?>">
													<?$arSkuTemplate = array();?>
													<?$arSkuTemplate=COptimus::GetSKUPropsArray($arItem['OFFERS_PROPS_JS'], $arResult["SKU_IBLOCK_ID"], $arParams["DISPLAY_TYPE"], $arParams["OFFER_HIDE_NAME_PROPS"]);?>
													<?foreach ($arSkuTemplate as $code => $strTemplate){
														if (!isset($arItem['OFFERS_PROP'][$code]))
															continue;
														echo '<div>', str_replace('#ITEM#_prop_', $arItemIDs["ALL_ITEM_IDS"]['PROP'], $strTemplate), '</div>';
													}?>
												</div>
												<?$arItemJSParams=COptimus::GetSKUJSParams($arResult, $arParams, $arItem);?>

												<script type="text/javascript">
													var <? echo $arItemIDs["strObName"]; ?> = new JCCatalogSection(<? echo CUtil::PhpToJSObject($arItemJSParams, false, true); ?>);
												</script>
											</div>
										<?}?>
									<?}?>
								<?if(!$arItem["OFFERS"] || ($arItem["OFFERS"] && !$arItem['OFFERS_PROP'])):?>
									<div class="counter_wrapp <?=($arItem["OFFERS"] && $arParams["TYPE_SKU"] == "TYPE_1" ? 'woffers' : '')?>">
										<?if(($arAddToBasketData["OPTIONS"]["USE_PRODUCT_QUANTITY_LIST"] && $arAddToBasketData["ACTION"] == "ADD") && $arItem["CAN_BUY"]):?>
											<div class="counter_block" data-offers="<?=($arItem["OFFERS"] ? "Y" : "N");?>" data-item="<?=$arItem["ID"];?>">
												<span class="minus" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['QUANTITY_DOWN']; ?>">-</span>
												<input type="text" class="text" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['QUANTITY']; ?>" name="<? echo $arParams["PRODUCT_QUANTITY_VARIABLE"]; ?>" value="<?=$arAddToBasketData["MIN_QUANTITY_BUY"]?>" />
												<span class="plus" id="<? echo $arItemIDs["ALL_ITEM_IDS"]['QUANTITY_UP']; ?>" <?=($arAddToBasketData["MAX_QUANTITY_BUY"] ? "data-max='".$arAddToBasketData["MAX_QUANTITY_BUY"]."'" : "")?>>+</span>
											</div>
										<?endif;?>
										<div id="<?=$arItemIDs["ALL_ITEM_IDS"]['BASKET_ACTIONS']; ?>" class="button_block <?=(($arAddToBasketData["ACTION"] == "ORDER"/*&& !$arItem["CAN_BUY"]*/)  || !$arItem["CAN_BUY"] || !$arAddToBasketData["OPTIONS"]["USE_PRODUCT_QUANTITY_LIST"] || $arAddToBasketData["ACTION"] == "SUBSCRIBE" ? "wide" : "");?>">
											<!--noindex-->
												<?=$arAddToBasketData["HTML"]?>
											<!--/noindex-->
										</div>
									</div>
								<?elseif($arItem["OFFERS"]):?>
									<?if(empty($arItem['OFFERS_PROP'])){?>
										<div class="offer_buy_block buys_wrapp woffers">
											<?
											$arItem["OFFERS_MORE"] = "Y";
											$arAddToBasketData = COptimus::GetAddToBasketArray($arItem, $totalCount, $arParams["DEFAULT_COUNT"], $arParams["BASKET_URL"], false, $arItemIDs["ALL_ITEM_IDS"], 'small read_more1', $arParams);?>
											<!--noindex-->
												<?=$arAddToBasketData["HTML"]?>
											<!--/noindex-->
										</div>
									<?}else{?>
										<div class="offer_buy_block buys_wrapp woffers" style="display:none;">
											<div class="counter_wrapp"></div>
										</div>
									<?}?>
								<?endif;?>
							</div>
						</li>
					<?}?>
				</ul>
			</div>
		</div>
	</div>
<?}else{?>
	<script>
		$(document).ready(function(){
			if($('.bx_item_list_you_looked_horizontal').length){
				$('.bx_item_list_you_looked_horizontal').remove();
			}
		})
	</script>
<?}?>

<script>
		$(document).ready(function(){
			var flexsliderItemWidth = 220;
			var flexsliderItemMargin = 12;
			$('.s_<?=$injectId;?> .content_inner').flexslider({
				animation: 'slide',
				selector: '.slides > li',
				slideshow: false,
				animationSpeed: 600,
				directionNav: true,
				controlNav: false,
				pauseOnHover: true,
				animationLoop: true,
				itemWidth: flexsliderItemWidth,
				itemMargin: flexsliderItemMargin,
				//minItems: flexsliderMinItems,
				controlsContainer: '.viewed_navigation',
				start: function(slider){
					slider.find('li').css('opacity', 1);
				}
			});

			var itemsButtons = $('.s_<?=$injectId;?> .wr > li .buttons_block'),
				itemsButtonsHeight = itemsButtons.getMaxHeights();
			$('.s_<?=$injectId;?> .wr .buttons_block').hide();

			var tabsContentUnhover = ($('.s_<?=$injectId;?> .all_wrapp').height() * 1)+20;
			var tabsContentHover = tabsContentUnhover + itemsButtonsHeight+50;

			$('.s_<?=$injectId;?> .slides').equalize({children: '.item-title'});
			$('.s_<?=$injectId;?> .slides').equalize({children: '.item_info'});
			$('.s_<?=$injectId;?> .slides').equalize({children: '.catalog_item'});

			$('.s_<?=$injectId;?> .all_wrapp .content_inner').attr('data-unhover', tabsContentUnhover);
			$('.s_<?=$injectId;?> .all_wrapp .content_inner').attr('data-hover', tabsContentHover);
			$('.s_<?=$injectId;?> .all_wrapp').height(tabsContentUnhover);
			$('.s_<?=$injectId;?> .all_wrapp .content_inner').addClass('absolute');

			$('.s_<?=$injectId;?> .wr > li').hover(
				function(){
					var tabsContentHover = $(this).closest('.content_inner').attr('data-hover') * 1;
					$(this).closest('.content_inner').fadeTo(100, 1);
					$(this).closest('.content_inner').stop().css({'height': tabsContentHover});
					$(this).find('.buttons_block').fadeIn(450, 'easeOutCirc');
				},
				function(){
					var tabsContentUnhoverHover = $(this).closest('.content_inner').attr('data-unhover') * 1;
					$(this).closest('.content_inner').stop().animate({'height': tabsContentUnhoverHover}, 100);
					$(this).find('.buttons_block').stop().fadeOut(233);
				}
			);
		})
	</script>

<script>
	$(document).ready(function(){
		$('.catalog_block .catalog_item_wrapp .catalog_item .item-title').sliceHeight();
		$('.catalog_block .catalog_item_wrapp .catalog_item .cost').sliceHeight();
		$('.catalog_block .catalog_item_wrapp .item_info').sliceHeight({classNull: '.footer_button'});
		$('.catalog_block .catalog_item_wrapp').sliceHeight({classNull: '.footer_button'});
	});

	BX.message({
		QUANTITY_AVAILIABLE: '<? echo COption::GetOptionString("aspro.optimus", "EXPRESSION_FOR_EXISTS", GetMessage("EXPRESSION_FOR_EXISTS_DEFAULT"), SITE_ID); ?>',
		QUANTITY_NOT_AVAILIABLE: '<? echo COption::GetOptionString("aspro.optimus", "EXPRESSION_FOR_NOTEXISTS", GetMessage("EXPRESSION_FOR_NOTEXISTS"), SITE_ID); ?>',
		ADD_ERROR_BASKET: '<? echo GetMessage("ADD_ERROR_BASKET"); ?>',
		ADD_ERROR_COMPARE: '<? echo GetMessage("ADD_ERROR_COMPARE"); ?>',
	})
</script>147  6573|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/sale.gift.main.products/main/template.php|a8d5c79b<?if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED !== true) die();

$frame = $this->createFrame()->begin();

$injectId = 'sale_gift_main_products_'.rand();

$templateData['JS_OBJ'] = "BX.Sale['GiftMainProductsClass_{$component->getComponentId()}']";

// component parameters
$signer = new \Bitrix\Main\Security\Sign\Signer;
$signedParameters = $signer->sign(
	base64_encode(serialize($arResult['_ORIGINAL_PARAMS'])),
	'bx.sale.gift.main.products'
);
$signedTemplate = $signer->sign($arResult['RCM_TEMPLATE'], 'bx.sale.gift.main.products');

?>
<div class="bx_item_list_you_looked_horizontal">
	<div id="<?= $injectId ?>" class="bx_sale_gift_main_products common_product wrapper_block">
		<?
		if($arResult['HAS_MAIN_PRODUCTS'])
		{
			global $searchFilter;
			$searchFilter = array();
			if($arResult['MAIN_ELEMENT_IDS'])
			{
				$searchFilter = array(
					"=ID" => $arResult['MAIN_ELEMENT_IDS'],
				);
			}
			?>
			<?if(empty($arParams['HIDE_BLOCK_TITLE']) || $arParams['HIDE_BLOCK_TITLE'] !== 'Y'){?>
				<div class="top_block">
					<div class="title_block"><? echo ($arParams['BLOCK_TITLE']? htmlspecialcharsbx($arParams['BLOCK_TITLE']) : GetMessage('SLB_TPL_TITLE_GIFT')) ?></div>
				</div>
			<?}?>
			<?
			$APPLICATION->IncludeComponent(
				"bitrix:catalog.section",
				"catalog_block_slider",
				array(
					"CUSTOM_CURRENT_PAGE" => $arParams["SGMP_CUR_BASE_PAGE"],
					"AJAX_MODE" => "N",
					"SHOW_UNABLE_SKU_PROPS"=>$arParams["SHOW_UNABLE_SKU_PROPS"],
					"IBLOCK_TYPE" => $arParams["IBLOCK_TYPE"],
					"IBLOCK_ID" => $arParams["IBLOCK_ID"],

					'SECTION_ID' => reset($arResult['MAIN_SECTION_IDS']),

					"ELEMENT_SORT_FIELD" => 'ID',
					"ELEMENT_SORT_ORDER" => 'DESC',
					//		"ELEMENT_SORT_FIELD2" => $arParams["ELEMENT_SORT_FIELD2"],
					//		"ELEMENT_SORT_ORDER2" => $arParams["ELEMENT_SORT_ORDER2"],
					"FILTER_NAME" => 'searchFilter',
					"SECTION_URL" => $arParams["SECTION_URL"],
					"DETAIL_URL" => $arParams["DETAIL_URL"],
					"BASKET_URL" => $arParams["BASKET_URL"],
					"ACTION_VARIABLE" => $arParams["ACTION_VARIABLE"],
					"PRODUCT_ID_VARIABLE" => $arParams["PRODUCT_ID_VARIABLE"],
					"SECTION_ID_VARIABLE" => $arParams["SECTION_ID_VARIABLE"],

					"CACHE_TYPE" => $arParams["CACHE_TYPE"],
					"CACHE_TIME" => $arParams["CACHE_TIME"],

					"CACHE_GROUPS" => $arParams["CACHE_GROUPS"],
					"SET_TITLE" => $arParams["SET_TITLE"],
					"PROPERTY_CODE" => $arParams["PROPERTY_CODE"],
					"PRICE_CODE" => $arParams["PRICE_CODE"],
					"USE_PRICE_COUNT" => $arParams["USE_PRICE_COUNT"],
					"SHOW_PRICE_COUNT" => $arParams["SHOW_PRICE_COUNT"],

					"PRICE_VAT_INCLUDE" => $arParams["PRICE_VAT_INCLUDE"],
					"CONVERT_CURRENCY" => $arParams["CONVERT_CURRENCY"],
					"CURRENCY_ID" => $arParams["CURRENCY_ID"],
					"HIDE_NOT_AVAILABLE" => $arParams["HIDE_NOT_AVAILABLE"],
					"TEMPLATE_THEME" => (isset($arParams["TEMPLATE_THEME"]) ? $arParams["TEMPLATE_THEME"] : ""),

					"ADD_PICT_PROP" => (isset($arParams["ADD_PICT_PROP"]) ? $arParams["ADD_PICT_PROP"] : ""),

					"LABEL_PROP" => (isset($arParams["LABEL_PROP"]) ? $arParams["LABEL_PROP"] : ""),
					"OFFER_ADD_PICT_PROP" => (isset($arParams["OFFER_ADD_PICT_PROP"]) ? $arParams["OFFER_ADD_PICT_PROP"] : ""),
					"OFFER_TREE_PROPS" => (isset($arParams["OFFER_TREE_PROPS"]) ? $arParams["OFFER_TREE_PROPS"] : ""),
					"SHOW_DISCOUNT_PERCENT" => (isset($arParams["SHOW_DISCOUNT_PERCENT"]) ? $arParams["SHOW_DISCOUNT_PERCENT"] : ""),
					"SHOW_OLD_PRICE" => (isset($arParams["SHOW_OLD_PRICE"]) ? $arParams["SHOW_OLD_PRICE"] : ""),
					"MESS_BTN_BUY" => (isset($arParams["MESS_BTN_BUY"]) ? $arParams["MESS_BTN_BUY"] : ""),
					"MESS_BTN_ADD_TO_BASKET" => (isset($arParams["MESS_BTN_ADD_TO_BASKET"]) ? $arParams["MESS_BTN_ADD_TO_BASKET"] : ""),
					"MESS_BTN_DETAIL" => (isset($arParams["MESS_BTN_DETAIL"]) ? $arParams["MESS_BTN_DETAIL"] : ""),
					"MESS_NOT_AVAILABLE" => (isset($arParams["MESS_NOT_AVAILABLE"]) ? $arParams["MESS_NOT_AVAILABLE"] : ""),
					'ADD_TO_BASKET_ACTION' => (isset($arParams["ADD_TO_BASKET_ACTION"]) ? $arParams["ADD_TO_BASKET_ACTION"] : ""),
					'SHOW_CLOSE_POPUP' => (isset($arParams["SHOW_CLOSE_POPUP"]) ? $arParams["SHOW_CLOSE_POPUP"] : ""),
					'DISPLAY_COMPARE' => (isset($arParams['DISPLAY_COMPARE']) ? $arParams['DISPLAY_COMPARE'] : ''),
					'COMPARE_PATH' => (isset($arParams['COMPARE_PATH']) ? $arParams['COMPARE_PATH'] : ''),

					"OFFERS_FIELD_CODE" => $arParams["OFFERS_FIELD_CODE"],
					"OFFERS_PROPERTY_CODE" => $arParams["OFFERS_PROPERTY_CODE"],

					"SHOW_DISCOUNT_TIME" => $arParams["SHOW_DISCOUNT_TIME"],
					"SALE_STIKER" => $arParams["SALE_STIKER"],
					"SHOW_MEASURE" => $arParams["SHOW_MEASURE"],
					"DISPLAY_TYPE" => "block",
					"SHOW_RATING" => $arParams["SHOW_RATING"],
					"DISPLAY_WISH_BUTTONS" => $arParams["DISPLAY_WISH_BUTTONS"],
					"DEFAULT_COUNT" => $arParams["DEFAULT_COUNT"],

					//self
					"DISPLAY_PANEL" => $arParams["DISPLAY_PANEL"],
					"CACHE_FILTER" => $arParams["CACHE_FILTER"],
					"PAGE_ELEMENT_COUNT" => $arParams["PAGE_ELEMENT_COUNT"],
					"LINE_ELEMENT_COUNT" => $arParams["LINE_ELEMENT_COUNT"],
					"BY_LINK" => "N",
					"DISPLAY_TOP_PAGER" => 'N',
					"DISPLAY_BOTTOM_PAGER" => 'N',
					"PAGER_TITLE" => $arParams["PAGER_TITLE"],
					"PAGER_TEMPLATE" => 'round',
					"PAGER_DESC_NUMBERING_CACHE_TIME" => $arParams["PAGER_DESC_NUMBERING_CACHE_TIME"],
					"PRODUCT_DISPLAY_MODE" => 'Y',
					"PAGER_SHOW_ALWAYS" => "N",
					"PAGER_DESC_NUMBERING" => "N",
					"PAGER_BASE_LINK_ENABLE" => "Y",
					"HIDE_SECTION_DESCRIPTION" => "Y",
					"SHOW_ALL_WO_SECTION" => "Y",
					"PAGER_BASE_LINK" => "/bitrix/components/bitrix/sale.gift.main.products/ajax.php",
				),
				$component,
				array('HIDE_ICONS' => 'Y')
			);
		}
		?>
	</div>
</div>
<script type="text/javascript">
BX(function () {
	BX.Sale['GiftMainProductsClass_<?= $component->getComponentId() ?>'] = new BX.Sale.GiftMainProductsClass({
		contextAjaxData:  {
			parameters:'<?=CUtil::JSEscape($signedParameters)?>',
			template: '<?=CUtil::JSEscape($signedTemplate)?>',
			site_id: '<?=CUtil::JSEscape(SITE_ID)?>'
		},
		injectId:  '<?= $injectId ?>',
		mainProductState:  '<?= $arResult['MAIN_PRODUCT_STATE'] ?>',
		isGift:  <?= $arResult['HAS_MAIN_PRODUCTS']? 'true' : 'false'; ?>,
		productId:  <?= $arParams['ELEMENT_ID']?: 'null'; ?>,
		offerId: <?= $arParams['OFFER_ID']?: 'null'; ?>
	});
	if(!$('.bx_item_list_you_looked_horizontal .all_wrapp').length){
		$('.bx_item_list_you_looked_horizontal').remove();
	}
});
BX.message({});
</script>
<?$frame->beginStub();?>
<?$frame->end();?>129  1343|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/catalog/main/filter.php|1ea22a0c<?if('Y' == $arParams['USE_FILTER']):?>
	<?$APPLICATION->IncludeComponent(
		"bitrix:catalog.smart.filter",
		($arParams["AJAX_FILTER_CATALOG"]=="Y" ? "main_ajax" : "main"),
		Array(
			"IBLOCK_TYPE" => $arParams["IBLOCK_TYPE"],
			"IBLOCK_ID" => $arParams["IBLOCK_ID"],
			"SECTION_ID" => (isset($arSection["ID"]) ? $arSection["ID"] : ''),
			"FILTER_NAME" => $arParams["FILTER_NAME"],
			"PRICE_CODE" => $arParams["FILTER_PRICE_CODE"],
			"CACHE_TYPE" => $arParams["CACHE_TYPE"],
			"CACHE_TIME" => $arParams["CACHE_TIME"],
			"CACHE_NOTES" => "",
			"CACHE_GROUPS" => $arParams["CACHE_GROUPS"],
			"SAVE_IN_SESSION" => "N",
			"XML_EXPORT" => "Y",
			"SECTION_TITLE" => "NAME",
			"SECTION_DESCRIPTION" => "DESCRIPTION",
			"SHOW_HINTS" => $arParams["SHOW_HINTS"],
			'CONVERT_CURRENCY' => $arParams['CONVERT_CURRENCY'],
			'CURRENCY_ID' => $arParams['CURRENCY_ID'],
			"INSTANT_RELOAD" => "Y",
			"VIEW_MODE" => strtolower($TEMPLATE_OPTIONS["TYPE_VIEW_FILTER"]["CURRENT_VALUE"]),
			"SEF_MODE" => (strlen($arResult["URL_TEMPLATES"]["smart_filter"]) ? "Y" : "N"),
			"SEF_RULE" => $arResult["FOLDER"].$arResult["URL_TEMPLATES"]["smart_filter"],
			"SMART_FILTER_PATH" => $arResult["VARIABLES"]["SMART_FILTER_PATH"],
			"HIDE_NOT_AVAILABLE" => $arParams["HIDE_NOT_AVAILABLE"],
		),
		$component);
	?>
<?endif;?>131  13015|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/catalog/main/section.php|e9abf3f0<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED !== true) die();?>
<?$this->setFrameMode(true);?>
<?

use Bitrix\Main\Loader,
	Bitrix\Main\ModuleManager;

Loader::includeModule("iblock");

// get current section ID
global $TEMPLATE_OPTIONS, $OptimusSectionID;
$arPageParams = $arSection = $section = array();

if($arResult["VARIABLES"]["SECTION_ID"] > 0){
	$section=COptimusCache::CIBlockSection_GetList(array('CACHE' => array("MULTI" =>"N", "TAG" => COptimusCache::GetIBlockCacheTag($arParams["IBLOCK_ID"]))), array('GLOBAL_ACTIVE' => 'Y', "ID" => $arResult["VARIABLES"]["SECTION_ID"], "IBLOCK_ID" => $arParams["IBLOCK_ID"]), false, array("ID", "IBLOCK_ID", "NAME", "DESCRIPTION", "UF_SECTION_DESCR", $arParams["SECTION_DISPLAY_PROPERTY"], "IBLOCK_SECTION_ID"));
}
elseif(strlen(trim($arResult["VARIABLES"]["SECTION_CODE"])) > 0){

	$section=COptimusCache::CIBlockSection_GetList(array('CACHE' => array("MULTI" =>"N", "TAG" => COptimusCache::GetIBlockCacheTag($arParams["IBLOCK_ID"]))), array('GLOBAL_ACTIVE' => 'Y', "=CODE" => $arResult["VARIABLES"]["SECTION_CODE"], "IBLOCK_ID" => $arParams["IBLOCK_ID"]), false, array("ID", "IBLOCK_ID", "NAME", "DESCRIPTION", "UF_SECTION_DESCR", $arParams["SECTION_DISPLAY_PROPERTY"], "IBLOCK_SECTION_ID"));
}

if($section){
	$arSection["ID"] = $section["ID"];
	$arSection["NAME"] = $section["NAME"];
	$arSection["IBLOCK_SECTION_ID"] = $section["IBLOCK_SECTION_ID"];
	if($section[$arParams["SECTION_DISPLAY_PROPERTY"]]){
		$arDisplayRes = CUserFieldEnum::GetList(array(), array("ID" => $section[$arParams["SECTION_DISPLAY_PROPERTY"]]));
		if($arDisplay = $arDisplayRes->GetNext()){
			$arSection["DISPLAY"] = $arDisplay["XML_ID"];
		}
	}
	if(strlen($section["DESCRIPTION"]))
		$arSection["DESCRIPTION"] = $section["DESCRIPTION"];
	if(strlen($section["UF_SECTION_DESCR"]))
		$arSection["UF_SECTION_DESCR"] = $section["UF_SECTION_DESCR"];
	$posSectionDescr = COption::GetOptionString("aspro.optimus", "SHOW_SECTION_DESCRIPTION", "BOTTOM", SITE_ID);
}

$OptimusSectionID = $arSection["ID"];?>

<?$APPLICATION->IncludeComponent(
	"bitrix:catalog.section.list",
	"subsections_list",
	Array(
		"IBLOCK_TYPE" => $arParams["IBLOCK_TYPE"],
		"IBLOCK_ID" => $arParams["IBLOCK_ID"],
		"SECTION_ID" => $arResult["VARIABLES"]["SECTION_ID"],
		"SECTION_CODE" => $arResult["VARIABLES"]["SECTION_CODE"],
		"DISPLAY_PANEL" => $arParams["DISPLAY_PANEL"],
		"CACHE_TYPE" => $arParams["CACHE_TYPE"],
		"CACHE_TIME" => $arParams["CACHE_TIME"],
		"CACHE_GROUPS" => $arParams["CACHE_GROUPS"],
		"SECTION_URL" => $arResult["FOLDER"].$arResult["URL_TEMPLATES"]["section"],
		"COUNT_ELEMENTS" => "N",
		"ADD_SECTIONS_CHAIN" => "N",
		"SHOW_SECTIONS_LIST_PREVIEW" => $arParams["SHOW_SECTIONS_LIST_PREVIEW"],
		"SECTIONS_LIST_PREVIEW_PROPERTY" => $arParams["SECTION_PREVIEW_PROPERTY"],
		"SHOW_SECTION_LIST_PICTURES" => $arParams["SHOW_SECTION_PICTURES"],
		"SECTIONS_LIST_PREVIEW_DESCRIPTION" => $arParams["SECTION_PREVIEW_DESCRIPTION"],
		"TOP_DEPTH" => "1",
	),
	$component
);?>

<?if($TEMPLATE_OPTIONS["TYPE_VIEW_FILTER"]["CURRENT_VALUE"]=="VERTICAL"){?>
	<?ob_start()?>
		<?include_once("filter.php")?>
	<?$html=ob_get_clean();?>
	<?$APPLICATION->AddViewContent('left_menu', $html);?>
<?}?>
<div class="right_block1 clearfix catalog <?=strtolower($TEMPLATE_OPTIONS["TYPE_VIEW_FILTER"]["CURRENT_VALUE"]);?>" id="right_block_ajax">
	
	<?$isAjax="N";?>
	<?if(isset($_SERVER["HTTP_X_REQUESTED_WITH"]) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == "xmlhttprequest"  && isset($_GET["ajax_get"]) && $_GET["ajax_get"] == "Y" || (isset($_GET["ajax_basket"]) && $_GET["ajax_basket"]=="Y")){
		$isAjax="Y";
	}?>
	<?if(isset($_SERVER["HTTP_X_REQUESTED_WITH"]) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == "xmlhttprequest" && isset($_GET["ajax_get_filter"]) && $_GET["ajax_get_filter"] == "Y" ){
		$isAjaxFilter="Y";
	}?>
	<?if($TEMPLATE_OPTIONS["TYPE_VIEW_FILTER"]["CURRENT_VALUE"]=="HORIZONTAL"){?>
		<div class="filter_horizontal">
			<?include_once("filter.php")?>
		</div>
	<?}else{?>
		<div class="js_filter filter_horizontal">
			<div class="bx_filter bx_filter_vertical"></div>			
		</div>
	<?}?>
	<?$section_pos_top = \Bitrix\Main\Config\Option::get("aspro.optimus", "TOP_SECTION_DESCRIPTION_POSITION", "UF_SECTION_DESCR", SITE_ID );?>
	<?$section_pos_bottom = \Bitrix\Main\Config\Option::get("aspro.optimus", "BOTTOM_SECTION_DESCRIPTION_POSITION", "DESCRIPTION", SITE_ID );?>
	<div class="inner_wrapper">
		<?if($posSectionDescr=="BOTH"):?>
			<?if ($arSection[$section_pos_top]):?>
				<div class="group_description_block top">
					<div><?=$arSection[$section_pos_top]?></div>
				</div>
			<?endif;?>
		<?elseif($posSectionDescr=="TOP"):?>
			<?if ($arSection[$arParams["SECTION_PREVIEW_PROPERTY"]]):?>
				<div class="group_description_block top">
					<div><?=$arSection[$arParams["SECTION_PREVIEW_PROPERTY"]]?></div>
				</div>
			<?elseif ($arSection["DESCRIPTION"]):?>
				<div class="group_description_block top">
					<div><?=$arSection["DESCRIPTION"]?></div>
				</div>
			<?elseif($arSection["UF_SECTION_DESCR"]):?>
				<div class="group_description_block top">
					<div><?=$arSection["UF_SECTION_DESCR"]?></div>
				</div>
			<?endif;?>
		<?endif;?>
		<?if('Y' == $arParams['USE_FILTER']):?>
			<div class="adaptive_filter">
				<a class="filter_opener<?=($_REQUEST["set_filter"] == "y" ? " active" : "")?>"><i></i><span><?=GetMessage("CATALOG_SMART_FILTER_TITLE")?></span></a>
			</div>
			<script type="text/javascript">
			$(".filter_opener").click(function(){
				$(this).toggleClass("opened");
				$(".bx_filter_vertical, .bx_filter").slideToggle(333);
			});
			</script>
		<?endif;?>

		<?if($isAjax=="N"){
			$frame = new \Bitrix\Main\Page\FrameHelper("viewtype-block");
			$frame->begin();?>
		<?}?>
		<?include_once("sort.php");?>
		
		<?if($isAjax=="Y"){
			$APPLICATION->RestartBuffer();
		}?>
		<?$show = $arParams["PAGE_ELEMENT_COUNT"];?>
		<?if($isAjax=="N"){?>
			<div class="ajax_load <?=$display;?>">
		<?}?>
			<?$APPLICATION->IncludeComponent(
				"bitrix:catalog.section",
				$template,
				Array(
					"SHOW_UNABLE_SKU_PROPS"=>$arParams["SHOW_UNABLE_SKU_PROPS"],
					"SEF_URL_TEMPLATES" => $arParams["SEF_URL_TEMPLATES"],
					"IBLOCK_TYPE" => $arParams["IBLOCK_TYPE"],
					"IBLOCK_ID" => $arParams["IBLOCK_ID"],
					"SECTION_ID" => $arResult["VARIABLES"]["SECTION_ID"],
					"SECTION_CODE" => $arResult["VARIABLES"]["SECTION_CODE"],
					"AJAX_REQUEST" => $isAjax,
					"ELEMENT_SORT_FIELD" => $sort,
					"ELEMENT_SORT_ORDER" => $sort_order,
					"ELEMENT_SORT_FIELD2" => $arParams["ELEMENT_SORT_FIELD2"],
					"ELEMENT_SORT_ORDER2" => $arParams["ELEMENT_SORT_ORDER2"],
					"FILTER_NAME" => $arParams["FILTER_NAME"],
					"INCLUDE_SUBSECTIONS" => $arParams["INCLUDE_SUBSECTIONS"],
					"PAGE_ELEMENT_COUNT" => $show,
					"LINE_ELEMENT_COUNT" => $arParams["LINE_ELEMENT_COUNT"],
					"DISPLAY_TYPE" => $display,
					"TYPE_SKU" => $TEMPLATE_OPTIONS["TYPE_SKU"]["CURRENT_VALUE"],
					"PROPERTY_CODE" => $arParams["LIST_PROPERTY_CODE"],

					"OFFERS_FIELD_CODE" => $arParams["LIST_OFFERS_FIELD_CODE"],
					"OFFERS_PROPERTY_CODE" => $arParams["LIST_OFFERS_PROPERTY_CODE"],
					"OFFERS_SORT_FIELD" => $arParams["OFFERS_SORT_FIELD"],
					"OFFERS_SORT_ORDER" => $arParams["OFFERS_SORT_ORDER"],
					"OFFERS_SORT_FIELD2" => $arParams["OFFERS_SORT_FIELD2"],
					"OFFERS_SORT_ORDER2" => $arParams["OFFERS_SORT_ORDER2"],
					'OFFER_TREE_PROPS' => $arParams['OFFER_TREE_PROPS'],

					"OFFERS_LIMIT" => $arParams["LIST_OFFERS_LIMIT"],
					
					"SECTION_URL" => $arResult["FOLDER"].$arResult["URL_TEMPLATES"]["section"],
					"DETAIL_URL" => $arResult["FOLDER"].$arResult["URL_TEMPLATES"]["element"],
					"BASKET_URL" => $arParams["BASKET_URL"],
					"ACTION_VARIABLE" => $arParams["ACTION_VARIABLE"],
					"PRODUCT_ID_VARIABLE" => $arParams["PRODUCT_ID_VARIABLE"],
					"PRODUCT_QUANTITY_VARIABLE" => "quantity",
					"PRODUCT_PROPS_VARIABLE" => "prop",
					"SECTION_ID_VARIABLE" => $arParams["SECTION_ID_VARIABLE"],
					"SET_LAST_MODIFIED" => $arParams["SET_LAST_MODIFIED"],
					"AJAX_MODE" => $arParams["AJAX_MODE"],
					"AJAX_OPTION_JUMP" => $arParams["AJAX_OPTION_JUMP"],
					"AJAX_OPTION_STYLE" => $arParams["AJAX_OPTION_STYLE"],
					"AJAX_OPTION_HISTORY" => $arParams["AJAX_OPTION_HISTORY"],
					"CACHE_TYPE" =>$arParams["CACHE_TYPE"],
					"CACHE_TIME" => $arParams["CACHE_TIME"],
					"CACHE_GROUPS" => $arParams["CACHE_GROUPS"],
					"CACHE_FILTER" => "Y",
					"META_KEYWORDS" => $arParams["LIST_META_KEYWORDS"],
					"META_DESCRIPTION" => $arParams["LIST_META_DESCRIPTION"],
					"BROWSER_TITLE" => $arParams["LIST_BROWSER_TITLE"],
					"ADD_SECTIONS_CHAIN" => $arParams["ADD_SECTIONS_CHAIN"],
					"HIDE_NOT_AVAILABLE" => $arParams["HIDE_NOT_AVAILABLE"],
					"DISPLAY_COMPARE" => $arParams["USE_COMPARE"],
					"SET_TITLE" => $arParams["SET_TITLE"],
					"SET_STATUS_404" => $arParams["SET_STATUS_404"],
					"SHOW_404" => $arParams["SHOW_404"],
					"MESSAGE_404" => $arParams["MESSAGE_404"],
					"FILE_404" => $arParams["FILE_404"],
					"PRICE_CODE" => $arParams["PRICE_CODE"],
					"USE_PRICE_COUNT" => $arParams["USE_PRICE_COUNT"],
					"SHOW_PRICE_COUNT" => $arParams["SHOW_PRICE_COUNT"],
					"PRICE_VAT_INCLUDE" => $arParams["PRICE_VAT_INCLUDE"],
					"USE_PRODUCT_QUANTITY" => $arParams["USE_PRODUCT_QUANTITY"],
					"OFFERS_CART_PROPERTIES" => $arParams["OFFERS_CART_PROPERTIES"],
					"DISPLAY_TOP_PAGER" => $arParams["DISPLAY_TOP_PAGER"],
					"DISPLAY_BOTTOM_PAGER" => $arParams["DISPLAY_BOTTOM_PAGER"],

					"PAGER_TITLE" => $arParams["PAGER_TITLE"],
					"PAGER_SHOW_ALWAYS" => $arParams["PAGER_SHOW_ALWAYS"],
					"PAGER_TEMPLATE" => $arParams["PAGER_TEMPLATE"],
					"PAGER_DESC_NUMBERING" => $arParams["PAGER_DESC_NUMBERING"],
					"PAGER_DESC_NUMBERING_CACHE_TIME" => $arParams["PAGER_DESC_NUMBERING_CACHE_TIME"],
					"PAGER_SHOW_ALL" => $arParams["PAGER_SHOW_ALL"],

					"AJAX_OPTION_ADDITIONAL" => "",
					"ADD_CHAIN_ITEM" => "N",
					"SHOW_QUANTITY" => $arParams["SHOW_QUANTITY"],
					"SHOW_QUANTITY_COUNT" => $arParams["SHOW_QUANTITY_COUNT"],
					"SHOW_DISCOUNT_PERCENT" => $arParams["SHOW_DISCOUNT_PERCENT"],
					"SHOW_DISCOUNT_TIME" => $arParams["SHOW_DISCOUNT_TIME"],
					"SHOW_OLD_PRICE" => $arParams["SHOW_OLD_PRICE"],
					"CONVERT_CURRENCY" => $arParams["CONVERT_CURRENCY"],
					"CURRENCY_ID" => $arParams["CURRENCY_ID"],
					"USE_STORE" => $arParams["USE_STORE"],
					"MAX_AMOUNT" => $arParams["MAX_AMOUNT"],
					"MIN_AMOUNT" => $arParams["MIN_AMOUNT"],
					"USE_MIN_AMOUNT" => $arParams["USE_MIN_AMOUNT"],
					"USE_ONLY_MAX_AMOUNT" => $arParams["USE_ONLY_MAX_AMOUNT"],
					"DISPLAY_WISH_BUTTONS" => $arParams["DISPLAY_WISH_BUTTONS"],
					"LIST_DISPLAY_POPUP_IMAGE" => $arParams["LIST_DISPLAY_POPUP_IMAGE"],
					"DEFAULT_COUNT" => $arParams["DEFAULT_COUNT"],
					"SHOW_MEASURE" => $arParams["SHOW_MEASURE"],
					"SHOW_HINTS" => $arParams["SHOW_HINTS"],
					"OFFER_HIDE_NAME_PROPS" => $arParams["OFFER_HIDE_NAME_PROPS"],
					"SHOW_SECTIONS_LIST_PREVIEW" => $arParams["SHOW_SECTIONS_LIST_PREVIEW"],
					"SECTIONS_LIST_PREVIEW_PROPERTY" => $arParams["SECTIONS_LIST_PREVIEW_PROPERTY"],
					"SHOW_SECTION_LIST_PICTURES" => $arParams["SHOW_SECTION_LIST_PICTURES"],
					"USE_MAIN_ELEMENT_SECTION" => $arParams["USE_MAIN_ELEMENT_SECTION"],
					"ADD_PROPERTIES_TO_BASKET" => (isset($arParams["ADD_PROPERTIES_TO_BASKET"]) ? $arParams["ADD_PROPERTIES_TO_BASKET"] : ''),
					"PARTIAL_PRODUCT_PROPERTIES" => (isset($arParams["PARTIAL_PRODUCT_PROPERTIES"]) ? $arParams["PARTIAL_PRODUCT_PROPERTIES"] : ''),
					"PRODUCT_PROPERTIES" => $arParams["PRODUCT_PROPERTIES"],
					"SALE_STIKER" => $arParams["SALE_STIKER"],
					"SHOW_RATING" => $arParams["SHOW_RATING"],
				), $component, array("HIDE_ICONS" => $isAjax)
			);?>
		<?if($isAjax=="N"){?>
			<?if($posSectionDescr=="BOTH"):?>
				<?if($arSection[$section_pos_bottom]):?>
					<div class="group_description_block bottom">
						<div><?=$arSection[$section_pos_bottom]?></div>
					</div>
				<?endif;?>
			<?elseif($posSectionDescr=="BOTTOM"):?>
				<?if($arSection[$arParams["SECTION_PREVIEW_PROPERTY"]]):?>
					<div class="group_description_block bottom">
						<div><?=$arSection[$arParams["SECTION_PREVIEW_PROPERTY"]]?></div>
					</div>
				<?elseif ($arSection["DESCRIPTION"]):?>
					<div class="group_description_block bottom">
						<div><?=$arSection["DESCRIPTION"]?></div>
					</div>
				<?elseif($arSection["UF_SECTION_DESCR"]):?>
					<div class="group_description_block bottom">
						<div><?=$arSection["UF_SECTION_DESCR"]?></div>
					</div>
				<?endif;?>
			<?endif;?>
			<div class="clear"></div>
			</div>
		<?}?>
		<?if($isAjax!="Y"){?>
			<?$frame->end();?>
		<?}?>
		<?if($isAjax=="Y"){
			die();
		}?>
	</div>
</div>135  17176|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/catalog/main/.parameters.php|52a190ba<?
	if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true) die();
	/** @var array $arCurrentValues */
	/** @global CUserTypeManager $USER_FIELD_MANAGER */
	global $USER_FIELD_MANAGER;
	use Bitrix\Main\Loader;
	use Bitrix\Main\ModuleManager;
	Loader::includeModule('iblock');
	$arSKU = false;
	$boolSKU = false;
	

	$arSort = CIBlockParameters::GetElementSortFields(
		array('SHOWS', 'SORT', 'TIMESTAMP_X', 'NAME', 'ID', 'ACTIVE_FROM', 'ACTIVE_TO'),
		array('KEY_LOWERCASE' => 'Y')
	);

	$arIBlocks=Array();
	$db_iblock = CIBlock::GetList(Array("SORT"=>"ASC"), Array("SITE_ID"=>$_REQUEST["site"], "TYPE" => ($arCurrentValues["IBLOCK_BANNERS_TYPE"]!="-"?$arCurrentValues["IBLOCK_BANNERS_TYPE"]:"")));
	while($arRes = $db_iblock->Fetch()) $arIBlocks[$arRes["ID"]] = $arRes["NAME"];
	
	$arTypes = array();
	if ($arCurrentValues["IBLOCK_BANNERS_TYPE_ID"])
	{
		$rsTypes=CIBlockElement::GetList(array(), array("IBLOCK_ID"=>$arCurrentValues["IBLOCK_BANNERS_TYPE_ID"], "ACTIVE" =>"Y"), false, false, array("ID", "IBLOCK_ID", "NAME", "CODE"));
		while($arr=$rsTypes->Fetch()) $arTypes[$arr["ID"]] = "[".$arr["ID"]."] ".$arr["NAME"];
	}
	$arTypesEx = CIBlockParameters::GetIBlockTypes(Array("-"=>" "));
	
	
	$arPrice = array();
	if (Loader::includeModule("catalog"))
	{
		$arSort = array_merge($arSort, CCatalogIBlockParameters::GetCatalogSortFields());
		$rsPrice=CCatalogGroup::GetList($v1="sort", $v2="asc");
		while($arr=$rsPrice->Fetch()) $arPrice[$arr["NAME"]] = "[".$arr["NAME"]."] ".$arr["NAME_LANG"];
		if ((isset($arCurrentValues['IBLOCK_ID']) && (int)$arCurrentValues['IBLOCK_ID']) > 0)
		{
			$arSKU = CCatalogSKU::GetInfoByProductIBlock($arCurrentValues['IBLOCK_ID']);
			$boolSKU = !empty($arSKU) && is_array($arSKU);
		}
	} else {$arPrice = $arProperty_N;}
	$arPrice  = array_merge(array("MINIMUM_PRICE"=>GetMessage("SORT_PRICES_MINIMUM_PRICE"), "MAXIMUM_PRICE"=>GetMessage("SORT_PRICES_MAXIMUM_PRICE")), $arPrice);

	$arProperty_S = array();
	if (0 < intval($arCurrentValues['IBLOCK_ID']))
	{
		$rsProp = CIBlockProperty::GetList(Array("sort"=>"asc", "name"=>"asc"), Array("IBLOCK_ID"=>$arCurrentValues["IBLOCK_ID"], "ACTIVE"=>"Y"));
		while ($arr=$rsProp->Fetch())
		{
			if($arr["PROPERTY_TYPE"]=="S")
				$arProperty_S[$arr["CODE"]] = "[".$arr["CODE"]."] ".$arr["NAME"];
		}
	}


	$arUserFields_S = array();
	$arUserFields_E = array();
	$arUserFields = $USER_FIELD_MANAGER->GetUserFields("IBLOCK_".$arCurrentValues["IBLOCK_ID"]."_SECTION");
	foreach($arUserFields as $FIELD_NAME=>$arUserField) {
		if($arUserField["USER_TYPE"]["BASE_TYPE"]=="enum")
			{ $arUserFields_E[$FIELD_NAME] = $arUserField["LIST_COLUMN_LABEL"]? $arUserField["LIST_COLUMN_LABEL"]: $FIELD_NAME; }
		if($arUserField["USER_TYPE"]["BASE_TYPE"]=="string")
			{ $arUserFields_S[$FIELD_NAME] = $arUserField["LIST_COLUMN_LABEL"]? $arUserField["LIST_COLUMN_LABEL"]: $FIELD_NAME; }
	}	

	$arTemplateParametersParts = array();

	$arTemplateParametersParts[] = array(
		"IBLOCK_STOCK_ID" => Array(
			"NAME" => GetMessage("IBLOCK_STOCK_NAME"),
			"TYPE" => "STRING",
			"DEFAULT" => "",
		),	
		"SHOW_MEASURE" => Array(
				"NAME" => GetMessage("SHOW_MEASURE"),
				"TYPE" => "CHECKBOX",
				"DEFAULT" => "N",
		),
		"SORT_BUTTONS" => Array(
			"SORT" => 100,
			"NAME" => GetMessage("SORT_BUTTONS"),
			"TYPE" => "LIST",
			"VALUES" => array("POPULARITY"=>GetMessage("SORT_BUTTONS_POPULARITY"), "NAME"=>GetMessage("SORT_BUTTONS_NAME"), "PRICE"=>GetMessage("SORT_BUTTONS_PRICE"), "QUANTITY"=>GetMessage("SORT_BUTTONS_QUANTITY")),
			"DEFAULT" => array("POPULARITY", "NAME", "PRICE"),
			"PARENT" => "LIST_SETTINGS",
			"TYPE" => "LIST",
			"REFRESH" => "Y",
			"MULTIPLE" => "Y",
		),
	);
		
		
	if(is_array($arCurrentValues["SORT_BUTTONS"])){
		if (in_array("PRICE", $arCurrentValues["SORT_BUTTONS"])){
			$arTemplateParametersParts[]["SORT_PRICES"] = Array(
				"SORT"=>200,
				"NAME" => GetMessage("SORT_PRICES"),
				"TYPE" => "LIST",
				"VALUES" => $arPrice,
				"DEFAULT" => array("MINIMUM_PRICE"),
				"PARENT" => "LIST_SETTINGS",
				"MULTIPLE" => "N",
			);
		}	
	}

	$detailPictMode = array(
		'IMG' => GetMessage('DETAIL_PICTURE_MODE_IMG'),
		'POPUP' => GetMessage('DETAIL_PICTURE_MODE_POPUP'),
		'MAGNIFIER' => GetMessage('DETAIL_PICTURE_MODE_MAGNIFIER')
	);

	$arTemplateParametersParts[] = array(	
		"DEFAULT_LIST_TEMPLATE" => Array(
				"NAME" => GetMessage("DEFAULT_LIST_TEMPLATE"),
				"TYPE" => "LIST",
				"VALUES" => array("block"=>GetMessage("DEFAULT_LIST_TEMPLATE_BLOCK"), "list"=>GetMessage("DEFAULT_LIST_TEMPLATE_LIST"), "table"=>GetMessage("DEFAULT_LIST_TEMPLATE_TABLE")),
				"DEFAULT" => "list",
				"PARENT" => "LIST_SETTINGS",
		),
		"SECTION_DISPLAY_PROPERTY" => Array(
				"NAME" => GetMessage("SECTION_DISPLAY_PROPERTY"),
				"TYPE" => "LIST",
				"VALUES" => $arUserFields_E,
				"DEFAULT" => "list",
				"MULTIPLE" => "N",
				"PARENT" => "LIST_SETTINGS",
		),
		"SECTION_TOP_BLOCK_TITLE" => Array(
				"NAME" => GetMessage("SECTION_TOP_BLOCK_TITLE"),
				"TYPE" => "STRING",
				"DEFAULT" => GetMessage("SECTION_TOP_BLOCK_TITLE_VALUE"),
				"PARENT" => "TOP_SETTINGS",
		),
		"USE_RATING" => array(
				"NAME" => GetMessage("USE_RATING"),
				"TYPE" => "CHECKBOX",
				"DEFAULT" => "Y",
		),
		"SHOW_UNABLE_SKU_PROPS" => array(
				"NAME" => GetMessage("SHOW_UNABLE_SKU_PROPS"),
				"TYPE" => "CHECKBOX",
				"DEFAULT" => "Y",
		),
		"LIST_DISPLAY_POPUP_IMAGE" => array(
			"NAME" => GetMessage("LIST_DISPLAY_POPUP_IMAGE"),
			"PARENT" => "LIST_SETTINGS",
			"TYPE" => "CHECKBOX",
			"MULTIPLE" => "N",
			"ADDITIONAL_VALUES" => "N",
			"DEFAULT" => "Y",
		),
		"DISPLAY_WISH_BUTTONS" => array(
			"NAME" => GetMessage("DISPLAY_WISH_BUTTONS"),
			"TYPE" => "CHECKBOX",
			"MULTIPLE" => "N",
			"ADDITIONAL_VALUES" => "N",
			"DEFAULT" => "Y",
		),
		"DEFAULT_COUNT" => array(
			"NAME" => GetMessage("DEFAULT_COUNT"),
			"TYPE" => "STRING",
			"DEFAULT" => "1",
		),
		"DISPLAY_ELEMENT_SLIDER" => Array(
			"NAME" => GetMessage("DISPLAY_ELEMENT_SLIDER"),
			"TYPE" => "STRING",
			"DEFAULT" => "10",
			"PARENT" => "DETAIL_SETTINGS",
		),
		"PROPERTIES_DISPLAY_LOCATION" => Array(
			"NAME" => GetMessage("PROPERTIES_DISPLAY_LOCATION"),
			"TYPE" => "LIST",
			"VALUES" => array("DESCRIPTION"=>GetMessage("PROPERTIES_DISPLAY_LOCATION_DESCRIPTION"), "TAB"=>GetMessage("PROPERTIES_DISPLAY_LOCATION_TAB")),
			"DEFAULT" => "DESCRIPTION",
			"PARENT" => "DETAIL_SETTINGS",
		),
		"DETAIL_ADD_DETAIL_TO_SLIDER" => array(
			'PARENT' => 'DETAIL_SETTINGS',
			'NAME' => GetMessage('CP_BC_TPL_DETAIL_ADD_DETAIL_TO_SLIDER'),
			'TYPE' => 'CHECKBOX',
			'DEFAULT' => 'N'
		),
		"SHOW_BRAND_PICTURE" => Array(
				"NAME" => GetMessage("SHOW_BRAND_PICTURE"),
				"TYPE" => "CHECKBOX",
				"DEFAULT" => "Y",
				"PARENT" => "DETAIL_SETTINGS",
		),
		"SHOW_ASK_BLOCK" => Array(
				"NAME" => GetMessage("SHOW_ASK_BLOCK"),
				"TYPE" => "CHECKBOX",
				"DEFAULT" => "Y",
				"PARENT" => "DETAIL_SETTINGS",
		),
		"ASK_FORM_ID" => Array(
				"NAME" => GetMessage("ASK_FORM_ID"),
				"TYPE" => "STRING",
				"DEFAULT" => "",
				"PARENT" => "DETAIL_SETTINGS",
		),
		"DETAIL_OFFERS_LIMIT" => Array(
				"NAME" => GetMessage("DETAIL_OFFERS_LIMIT"),
				"TYPE" => "STRING",
				"DEFAULT" => "0",
				"PARENT" => "DETAIL_SETTINGS",
		),
		"DETAIL_EXPANDABLES_TITLE" => Array(
				"NAME" => GetMessage("DETAIL_EXPANDABLES_TITLE"),
				"TYPE" => "STRING",
				"DEFAULT" => GetMessage("DETAIL_EXPANDABLES_VALUE"),
				"PARENT" => "DETAIL_SETTINGS",
		),
		"DETAIL_ASSOCIATED_TITLE" => Array(
				"NAME" => GetMessage("DETAIL_ASSOCIATED_TITLE"),
				"TYPE" => "STRING",
				"DEFAULT" => GetMessage("DETAIL_ASSOCIATED_VALUE"),
				"PARENT" => "DETAIL_SETTINGS",
		),
		"SALE_STIKER" =>array(
			"PARENT" => "ADDITIONAL_SETTINGS",
			"NAME" => GetMessage("SALE_STIKER"),
			"TYPE" => "LIST",
			"DEFAULT" => "-",
			"ADDITIONAL_VALUES" => "Y",
			"VALUES" => array_merge(Array("-"=>" "), $arProperty_S),
		),
		"SHOW_ADDITIONAL_TAB" => Array(
			"NAME" => GetMessage("SHOW_ADDITIONAL_TAB"),
			"TYPE" => "CHECKBOX",
			"DEFAULT" => "Y",
			"PARENT" => "DETAIL_SETTINGS",
		),
		"SHOW_HINTS" => Array(
			"NAME" => GetMessage("SHOW_HINTS"),
			"TYPE" => "CHECKBOX",
			"DEFAULT" => "Y",
		),
		"PROPERTIES_DISPLAY_TYPE" => Array(
			"NAME" => GetMessage("PROPERTIES_DISPLAY_TYPE"),
			"TYPE" => "LIST",
			"MULTIPLE" => "N",
			"VALUES" => array("BLOCK"=>GetMessage("PROPERTIES_DISPLAY_TYPE_BLOCK"), "TABLE"=>GetMessage("PROPERTIES_DISPLAY_TYPE_TABLE")),
			"DEFAULT" => "BLOCK",
			"PARENT" => "DETAIL_SETTINGS",
		),
		/*"SHOW_DISCOUNT_PERCENT" => array(
			'PARENT' => 'VISUAL',
			'NAME' => GetMessage('CP_BC_TPL_SHOW_DISCOUNT_PERCENT'),
			'TYPE' => 'CHECKBOX',
			'DEFAULT' => 'N',
		),*/
		/*"DETAIL_PICTURE_MODE" => array(
			'PARENT' => 'VISUAL',
			'NAME' => GetMessage('CP_BCE_TPL_DETAIL_PICTURE_MODE'),
			'TYPE' => 'LIST',
			'DEFAULT' => 'POPUP',
			'VALUES' => $detailPictMode
		),*/
		"SHOW_DISCOUNT_TIME" => Array(
			'PARENT' => 'VISUAL',
			"NAME" => GetMessage("SHOW_DISCOUNT_TIME"),
			"TYPE" => "CHECKBOX",
			"DEFAULT" => "Y",
		),
		"SHOW_RATING" => Array(
			'PARENT' => 'VISUAL',
			"NAME" => GetMessage("SHOW_RATING"),
			"TYPE" => "CHECKBOX",
			"DEFAULT" => "Y",
		),
		"SHOW_OLD_PRICE" => array(
			'PARENT' => 'VISUAL',
			'NAME' => GetMessage('CP_BC_TPL_SHOW_OLD_PRICE'),
			'TYPE' => 'CHECKBOX',
			'DEFAULT' => 'N',
		),
	);

	$arTemplateParametersParts[]["SECTIONS_LIST_PREVIEW_PROPERTY"] = Array(
		"NAME" => GetMessage("SHOW_SECTION_PREVIEW_PROPERTY"),
		"VALUES" => array_merge(array("DESCRIPTION"=>GetMessage("SHOW_SECTION_PREVIEW_PROPERTY_DESCRIPTION")), $arUserFields_S),
		"TYPE" => "LIST",
		"MULTIPLE" => "N",
		"DEFAULT" => "DESCRIPTION",
		"PARENT" => "SECTIONS_SETTINGS",
	);	

	$arTemplateParametersParts[]["SECTION_PREVIEW_PROPERTY"] = Array(
		"NAME" => GetMessage("SHOW_SECTION_PREVIEW_PROPERTY"),
		"VALUES" => array_merge(array("DESCRIPTION"=>GetMessage("SHOW_SECTION_PREVIEW_PROPERTY_DESCRIPTION")), $arUserFields_S),
		"TYPE" => "LIST",
		"MULTIPLE" => "N",
		"DEFAULT" => "DESCRIPTION",
		"PARENT" => "LIST_SETTINGS");
	$arTemplateParametersParts[]["SECTIONS_LIST_PREVIEW_DESCRIPTION"] = Array(
		"NAME" => GetMessage("SHOW_SECTION_ROOT_PREVIEW"),
		"TYPE" => "CHECKBOX",
		"DEFAULT" => "Y",
		"PARENT" => "SECTIONS_SETTINGS");
	$arTemplateParametersParts[]["SECTION_PREVIEW_DESCRIPTION"] = Array(
		"NAME" => GetMessage("SHOW_SECTION_ROOT_PREVIEW"),
		"TYPE" => "CHECKBOX",
		"DEFAULT" => "Y",
		"PARENT" => "LIST_SETTINGS");
	
	
	$arTemplateParametersParts[] = Array(
		"SHOW_SECTION_LIST_PICTURES" => Array(
			"NAME" => GetMessage("SHOW_SECTION_PICTURES"),
			"TYPE" => "CHECKBOX",
			"DEFAULT" => "Y",
			"PARENT" => "SECTIONS_SETTINGS",
		),
		"SHOW_SECTION_PICTURES" => Array(
			"NAME" => GetMessage("SHOW_SECTION_PICTURES"),
			"TYPE" => "CHECKBOX",
			"DEFAULT" => "Y",
			"PARENT" => "LIST_SETTINGS",
		),
		/*"SHOW_SECTION_SIBLINGS" => Array(
			"NAME" => GetMessage("SHOW_SECTION_SIBLINGS"),
			"TYPE" => "CHECKBOX",
			"DEFAULT" => "N",
			"REFRESH" => "N",
			"PARENT" => "LIST_SETTINGS",
		),*/
		"SHOW_KIT_PARTS" => Array(
			"NAME" => GetMessage("SHOW_KIT_PARTS"),
			"TYPE" => "CHECKBOX",
			"DEFAULT" => "N",
			"REFRESH" => "N",
			"PARENT" => "DETAIL_SETTINGS",
		),
		"SHOW_KIT_PARTS_PRICES" => Array(
			"NAME" => GetMessage("SHOW_KIT_PARTS_PRICES"),
			"TYPE" => "CHECKBOX",
			"DEFAULT" => "N",
			"REFRESH" => "N",
			"PARENT" => "DETAIL_SETTINGS",
		),
		"SHOW_ONE_CLICK_BUY" => Array(
			"NAME" => GetMessage("SHOW_ONE_CLICK_BUY"),
			"TYPE" => "CHECKBOX",
			"DEFAULT" => "Y",
			"REFRESH" => "N",
			"PARENT" => "DETAIL_SETTINGS",
		),
		"SKU_DETAIL_ID" => Array(
			"NAME" => GetMessage("SKU_DETAIL_ID"),
			"TYPE" => "STRING",
			"DEFAULT" => "oid",
			"PARENT" => "DETAIL_SETTINGS",
		),
		"AJAX_FILTER_CATALOG" => Array(
			"NAME" => GetMessage("AJAX_FILTER_CATALOG_TITLE"),
			"TYPE" => "CHECKBOX",
			"DEFAULT" => "N",
			"REFRESH" => "N",
			"PARENT" => "FILTER_SETTINGS",
		),
	);
	
	$arAllPropList = array();
	$arFilePropList = array(
		'-' => GetMessage('CP_BC_TPL_PROP_EMPTY')
	);
	$arListPropList = array(
		'-' => GetMessage('CP_BC_TPL_PROP_EMPTY')
	);
	$arHighloadPropList = array(
		'-' => GetMessage('CP_BC_TPL_PROP_EMPTY')
	);
	$rsProps = CIBlockProperty::GetList(
		array('SORT' => 'ASC', 'ID' => 'ASC'),
		array('IBLOCK_ID' => $arCurrentValues['IBLOCK_ID'], 'ACTIVE' => 'Y')
	);
	while ($arProp = $rsProps->Fetch())
	{
		$strPropName = '['.$arProp['ID'].']'.('' != $arProp['CODE'] ? '['.$arProp['CODE'].']' : '').' '.$arProp['NAME'];
		if ('' == $arProp['CODE'])
			$arProp['CODE'] = $arProp['ID'];
		$arAllPropList[$arProp['CODE']] = $strPropName;
		if ('F' == $arProp['PROPERTY_TYPE'])
			$arFilePropList[$arProp['CODE']] = $strPropName;
		if ('L' == $arProp['PROPERTY_TYPE'])
			$arListPropList[$arProp['CODE']] = $strPropName;
		if ('S' == $arProp['PROPERTY_TYPE'] && 'directory' == $arProp['USER_TYPE'] && CIBlockPriceTools::checkPropDirectory($arProp))
			$arHighloadPropList[$arProp['CODE']] = $strPropName;
	}
	
	$arTemplateParametersParts[] = array(
		'ADD_PICT_PROP' => array(
			'PARENT' => 'VISUAL',
			'NAME' => GetMessage('CP_BC_TPL_ADD_PICT_PROP'),
			'TYPE' => 'LIST',
			'MULTIPLE' => 'N',
			'ADDITIONAL_VALUES' => 'N',
			'REFRESH' => 'N',
			'DEFAULT' => '-',
			'VALUES' => $arFilePropList
		)
	);
	
	if ($boolSKU)
	{
		$arAllOfferPropList = array();
		$arFileOfferPropList = array(
			'-' => GetMessage('CP_BC_TPL_PROP_EMPTY')
		);
		$arTreeOfferPropList = array(
			'-' => GetMessage('CP_BC_TPL_PROP_EMPTY')
		);
		$rsProps = CIBlockProperty::GetList(
			array('SORT' => 'ASC', 'ID' => 'ASC'),
			array('IBLOCK_ID' => $arSKU['IBLOCK_ID'], 'ACTIVE' => 'Y')
		);
		while ($arProp = $rsProps->Fetch())
		{
			if ($arProp['ID'] == $arSKU['SKU_PROPERTY_ID'])
				continue;
			$arProp['USER_TYPE'] = (string)$arProp['USER_TYPE'];
			$strPropName = '['.$arProp['ID'].']'.('' != $arProp['CODE'] ? '['.$arProp['CODE'].']' : '').' '.$arProp['NAME'];
			if ('' == $arProp['CODE'])
				$arProp['CODE'] = $arProp['ID'];
			if ('F' == $arProp['PROPERTY_TYPE'])
				$arFileOfferPropList[$arProp['CODE']] = $strPropName;
			if ('N' != $arProp['MULTIPLE'])
				continue;
			if (
				'L' == $arProp['PROPERTY_TYPE']
				|| 'E' == $arProp['PROPERTY_TYPE']
				|| ('S' == $arProp['PROPERTY_TYPE'] && 'directory' == $arProp['USER_TYPE'] && CIBlockPriceTools::checkPropDirectory($arProp))
			)
				$arTreeOfferPropList[$arProp['CODE']] = $strPropName;
		}
		$arTemplateParametersParts[] = array(
			'OFFER_ADD_PICT_PROP' => array(
				'PARENT' => 'VISUAL',
				'NAME' => GetMessage('CP_BC_TPL_OFFER_ADD_PICT_PROP'),
				'TYPE' => 'LIST',
				'MULTIPLE' => 'N',
				'ADDITIONAL_VALUES' => 'N',
				'REFRESH' => 'N',
				'DEFAULT' => '-',
				'VALUES' => $arFileOfferPropList
			)
		);
		$arTemplateParametersParts[]=array(
			'OFFER_TREE_PROPS' => array(
				'PARENT' => 'OFFERS_SETTINGS',
				'NAME' => GetMessage('OFFERS_SETTINGS'),
				'TYPE' => 'LIST',
				'MULTIPLE' => 'Y',
				'ADDITIONAL_VALUES' => 'N',
				'REFRESH' => 'N',
				'DEFAULT' => '-',
				'VALUES' => $arTreeOfferPropList
			)
		);
		$arTemplateParametersParts[]=array(
			'OFFER_HIDE_NAME_PROPS' => array(
				'PARENT' => 'OFFERS_SETTINGS',
				'NAME' => GetMessage('OFFER_HIDE_NAME_PROPS_TITLE'),
				'TYPE' => 'CHECKBOX',
				'DEFAULT' => 'N',
			)
		);
	}
	if (ModuleManager::isModuleInstalled("sale"))
	{
		$arTemplateParametersParts[]=array(
			'USE_BIG_DATA' => array(
				'PARENT' => 'BIG_DATA_SETTINGS',
				'NAME' => GetMessage('CP_BC_TPL_USE_BIG_DATA'),
				'TYPE' => 'CHECKBOX',
				'DEFAULT' => 'Y',
				'REFRESH' => 'Y'
			)
		);
		if (!isset($arCurrentValues['USE_BIG_DATA']) || $arCurrentValues['USE_BIG_DATA'] == 'Y')
		{
			$rcmTypeList = array(
				'bestsell' => GetMessage('CP_BC_TPL_RCM_BESTSELLERS'),
				'personal' => GetMessage('CP_BC_TPL_RCM_PERSONAL'),
				'similar_sell' => GetMessage('CP_BC_TPL_RCM_SOLD_WITH'),
				'similar_view' => GetMessage('CP_BC_TPL_RCM_VIEWED_WITH'),
				'similar' => GetMessage('CP_BC_TPL_RCM_SIMILAR'),
				'any_similar' => GetMessage('CP_BC_TPL_RCM_SIMILAR_ANY'),
				'any_personal' => GetMessage('CP_BC_TPL_RCM_PERSONAL_WBEST'),
				'any' => GetMessage('CP_BC_TPL_RCM_RAND')
			);
			$arTemplateParametersParts[]=array(
				'BIG_DATA_RCM_TYPE' => array(
					'PARENT' => 'BIG_DATA_SETTINGS',
					'NAME' => GetMessage('CP_BC_TPL_BIG_DATA_RCM_TYPE'),
					'TYPE' => 'LIST',
					'VALUES' => $rcmTypeList
				)
			);
			unset($rcmTypeList);
		}
	}
		

	//merge parameters to one array 
	$arTemplateParameters = array();
	foreach($arTemplateParametersParts as $i => $part) { $arTemplateParameters = array_merge($arTemplateParameters, $part); }
?>
131  26148|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/catalog/main/element.php|f2ef2b2b<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED !== true) die();?>
<?$this->setFrameMode(true);?>
<?

use Bitrix\Main\Loader;
use Bitrix\Main\ModuleManager;

Loader::includeModule("iblock");
Loader::includeModule("highloadblock");

// get current section ID
global $OptimusSectionID;
$section = array();
if($arResult["VARIABLES"]["SECTION_ID"] > 0){
	$section=COptimusCache::CIBlockSection_GetList(array('CACHE' => array("MULTI" =>"N", "TAG" => COptimusCache::GetIBlockCacheTag($arParams["IBLOCK_ID"]))), array('GLOBAL_ACTIVE' => 'Y', "ID" => $arResult["VARIABLES"]["SECTION_ID"], "IBLOCK_ID" => $arParams["IBLOCK_ID"]), false, array("ID", "IBLOCK_ID", "UF_TIZERS"));
}
elseif(strlen(trim($arResult["VARIABLES"]["SECTION_CODE"])) > 0){
	$section=COptimusCache::CIBlockSection_GetList(array('CACHE' => array("MULTI" =>"N", "TAG" => COptimusCache::GetIBlockCacheTag($arParams["IBLOCK_ID"]))), array('GLOBAL_ACTIVE' => 'Y', "=CODE" => $arResult["VARIABLES"]["SECTION_CODE"], "IBLOCK_ID" => $arParams["IBLOCK_ID"]), false, array("ID", "IBLOCK_ID", "UF_TIZERS"));
}
if(!$section["ID"]){
	if($arResult["VARIABLES"]["ELEMENT_ID"] > 0){
		$arElement = COptimusCache::CIBLockElement_GetList(array('CACHE' => array("MULTI" =>"N", "TAG" => COptimusCache::GetIBlockCacheTag($arParams["IBLOCK_ID"]))), array("IBLOCK_ID" => $arParams["IBLOCK_ID"], "ACTIVE"=>"Y", "ID" => $arResult["VARIABLES"]["ELEMENT_ID"]), false, false, array("ID", "IBLOCK_ID", "IBLOCK_SECTION_ID"));
		if($arElement["IBLOCK_SECTION_ID"] && !$section){
			$section=COptimusCache::CIBlockSection_GetList(array('CACHE' => array("MULTI" =>"N", "TAG" => COptimusCache::GetIBlockCacheTag($arParams["IBLOCK_ID"]))), array('GLOBAL_ACTIVE' => 'Y', "ID" => $arElement["IBLOCK_SECTION_ID"], "IBLOCK_ID" => $arElement["IBLOCK_ID"]), false, array("ID", "IBLOCK_ID", "UF_TIZERS"));
		}
	}
	elseif(strlen(trim($arResult["VARIABLES"]["ELEMENT_CODE"])) > 0){
		$arElement = COptimusCache::CIBLockElement_GetList(array('CACHE' => array("MULTI" =>"N", "TAG" => COptimusCache::GetIBlockCacheTag($arParams["IBLOCK_ID"]))), array("IBLOCK_ID" => $arParams["IBLOCK_ID"], "ACTIVE"=>"Y", "=CODE" => $arResult["VARIABLES"]["ELEMENT_CODE"]), false, false, array("ID", "IBLOCK_ID", "IBLOCK_SECTION_ID"));
		if($arElement["IBLOCK_SECTION_ID"] && !$section){
			$section=COptimusCache::CIBlockSection_GetList(array('CACHE' => array("MULTI" =>"N", "TAG" => COptimusCache::GetIBlockCacheTag($arParams["IBLOCK_ID"]))), array('GLOBAL_ACTIVE' => 'Y', "ID" => $arElement["IBLOCK_SECTION_ID"], "IBLOCK_ID" => $arElement["IBLOCK_ID"]), false, array("ID", "IBLOCK_ID", "UF_TIZERS"));
		}
	}
}

$OptimusSectionID = $section["ID"];

global $TEMPLATE_OPTIONS;
?>
<div class="catalog_detail">
	<?$ElementID = $APPLICATION->IncludeComponent(
		"bitrix:catalog.element",
		"main",
		Array(
			"SECTION_TIZER"=>$section["UF_TIZERS"],
			"SHOW_UNABLE_SKU_PROPS"=>$arParams["SHOW_UNABLE_SKU_PROPS"],
			"SHOW_DISCOUNT_TIME"=>$arParams["SHOW_DISCOUNT_TIME"],
			"TYPE_SKU" => $TEMPLATE_OPTIONS["TYPE_SKU"]["CURRENT_VALUE"],
			// "SKU_DETAIL_ID" => (isset($_GET[$arParams["SKU_DETAIL_ID"]]) && strlen($arParams["SKU_DETAIL_ID"]) && $TEMPLATE_OPTIONS["TYPE_SKU"]["CURRENT_VALUE"] == "TYPE_1" ? $_GET[$arParams["SKU_DETAIL_ID"]] : "" ),
			"SEF_URL_TEMPLATES" => $arParams["SEF_URL_TEMPLATES"],
			"IBLOCK_REVIEWS_TYPE" => $arParams["IBLOCK_REVIEWS_TYPE"],
			"IBLOCK_REVIEWS_ID" => $arParams["IBLOCK_REVIEWS_ID"],
			"SHOW_ONE_CLICK_BUY" => $arParams["SHOW_ONE_CLICK_BUY"],
			"SEF_MODE_BRAND_SECTIONS" => $arParams["SEF_MODE_BRAND_SECTIONS"],
			"SEF_MODE_BRAND_ELEMENT" => $arParams["SEF_MODE_BRAND_ELEMENT"],
			"DISPLAY_COMPARE" => $arParams["USE_COMPARE"],
			"IBLOCK_TYPE" => $arParams["IBLOCK_TYPE"],
			"IBLOCK_ID" => $arParams["IBLOCK_ID"],
			"PROPERTY_CODE" => $arParams["DETAIL_PROPERTY_CODE"],
			"META_KEYWORDS" => $arParams["DETAIL_META_KEYWORDS"],
			"META_DESCRIPTION" => $arParams["DETAIL_META_DESCRIPTION"],
			"BROWSER_TITLE" => $arParams["DETAIL_BROWSER_TITLE"],
			"BASKET_URL" => $arParams["BASKET_URL"],
			"ACTION_VARIABLE" => $arParams["ACTION_VARIABLE"],
			"PRODUCT_ID_VARIABLE" => $arParams["PRODUCT_ID_VARIABLE"],
			"SECTION_ID_VARIABLE" => $arParams["SECTION_ID_VARIABLE"],
			"DISPLAY_PANEL" => $arParams["DISPLAY_PANEL"],
			"CACHE_TYPE" => $arParams["CACHE_TYPE"],
			"CACHE_TIME" => $arParams["CACHE_TIME"],
			"CACHE_GROUPS" => $arParams["CACHE_GROUPS"],
			"SET_TITLE" => $arParams["SET_TITLE"],
			"SET_CANONICAL_URL" => $arParams["DETAIL_SET_CANONICAL_URL"],
			"SET_LAST_MODIFIED" => "Y",
			"SET_STATUS_404" => $arParams["SET_STATUS_404"],
			"MESSAGE_404" => $arParams["MESSAGE_404"],
			"SHOW_404" => $arParams["SHOW_404"],
			"FILE_404" => $arParams["FILE_404"],
			"PRICE_CODE" => $arParams["PRICE_CODE"],
			"USE_PRICE_COUNT" => $arParams["USE_PRICE_COUNT"],
			"SHOW_PRICE_COUNT" => $arParams["SHOW_PRICE_COUNT"],
			"PRICE_VAT_INCLUDE" => $arParams["PRICE_VAT_INCLUDE"],
			"PRICE_VAT_SHOW_VALUE" => $arParams["PRICE_VAT_SHOW_VALUE"],
			"LINK_IBLOCK_TYPE" => $arParams["LINK_IBLOCK_TYPE"],
			"LINK_IBLOCK_ID" => $arParams["LINK_IBLOCK_ID"],
			"LINK_PROPERTY_SID" => $arParams["LINK_PROPERTY_SID"],
			"LINK_ELEMENTS_URL" => $arParams["LINK_ELEMENTS_URL"],
			"USE_ALSO_BUY" => $arParams["USE_ALSO_BUY"],
			'ADD_PICT_PROP' => $arParams['ADD_PICT_PROP'],
			'OFFER_ADD_PICT_PROP' => $arParams['OFFER_ADD_PICT_PROP'],
			"OFFERS_CART_PROPERTIES" => $arParams["OFFERS_CART_PROPERTIES"],
			"OFFERS_FIELD_CODE" => $arParams["DETAIL_OFFERS_FIELD_CODE"],
			"OFFERS_PROPERTY_CODE" => $arParams["DETAIL_OFFERS_PROPERTY_CODE"],
			"OFFERS_SORT_FIELD" => $arParams["OFFERS_SORT_FIELD"],
			"OFFERS_SORT_ORDER" => $arParams["OFFERS_SORT_ORDER"],
			"SKU_DISPLAY_LOCATION" => $arParams["SKU_DISPLAY_LOCATION"],
			"ELEMENT_ID" => $arResult["VARIABLES"]["ELEMENT_ID"],
			"ELEMENT_CODE" => $arResult["VARIABLES"]["ELEMENT_CODE"],
			"SECTION_ID" => $arResult["VARIABLES"]["SECTION_ID"],
			"SECTION_CODE" => $arResult["VARIABLES"]["SECTION_CODE"],
			"SECTION_URL" => $arResult["FOLDER"].$arResult["URL_TEMPLATES"]["section"],
			"DETAIL_URL" => $arResult["FOLDER"].$arResult["URL_TEMPLATES"]["element"],
			"ADD_SECTIONS_CHAIN" => $arParams["ADD_SECTIONS_CHAIN"],
			"ADD_ELEMENT_CHAIN" => $arParams["ADD_ELEMENT_CHAIN"],
			"USE_STORE" => $arParams["USE_STORE"],
			"USE_STORE_PHONE" => $arParams["USE_STORE_PHONE"],
			"USE_STORE_SCHEDULE" => $arParams["USE_STORE_SCHEDULE"],
			"USE_MIN_AMOUNT" => $arParams["USE_MIN_AMOUNT"],
			"MIN_AMOUNT" => $arParams["MIN_AMOUNT"],
			"STORE_PATH" => $arParams["STORE_PATH"],
			"MAIN_TITLE" => $arParams["MAIN_TITLE"],
			"USE_PRODUCT_QUANTITY" => $arParams["USE_PRODUCT_QUANTITY"],
			"PRODUCT_QUANTITY_VARIABLE" => $arParams["PRODUCT_QUANTITY_VARIABLE"],
			"IBLOCK_STOCK_ID" => $arParams["IBLOCK_STOCK_ID"],
			"SEF_MODE_STOCK_SECTIONS" => $arParams["SEF_MODE_STOCK_SECTIONS"],
			"SHOW_QUANTITY" => $arParams["SHOW_QUANTITY"],
			"SHOW_QUANTITY_COUNT" => $arParams["SHOW_QUANTITY_COUNT"],
			"CONVERT_CURRENCY" => $arParams["CONVERT_CURRENCY"],
			"CURRENCY_ID" => $arParams["CURRENCY_ID"],
			'HIDE_NOT_AVAILABLE' => $arParams["HIDE_NOT_AVAILABLE"],
			'SHOW_DEACTIVATED' => $arParams['SHOW_DEACTIVATED'],
			"USE_ELEMENT_COUNTER" => $arParams["USE_ELEMENT_COUNTER"],
			"USE_RATING" => $arParams["USE_RATING"],
			"USE_REVIEW" => $arParams["USE_REVIEW"],
			"FORUM_ID" => $arParams["FORUM_ID"],
			"MAX_AMOUNT" => $arParams["MAX_AMOUNT"],
			"USE_ONLY_MAX_AMOUNT" => $arParams["USE_ONLY_MAX_AMOUNT"],
			"DISPLAY_WISH_BUTTONS" => $arParams["DISPLAY_WISH_BUTTONS"],
			"DEFAULT_COUNT" => $arParams["DEFAULT_COUNT"],
			"SHOW_BRAND_PICTURE" => $arParams["SHOW_BRAND_PICTURE"],
			"PROPERTIES_DISPLAY_LOCATION" => $arParams["PROPERTIES_DISPLAY_LOCATION"],
			"PROPERTIES_DISPLAY_TYPE" => $arParams["PROPERTIES_DISPLAY_TYPE"],
			"SHOW_ADDITIONAL_TAB" => $arParams["SHOW_ADDITIONAL_TAB"],
			"SHOW_ASK_BLOCK" => $arParams["SHOW_ASK_BLOCK"],
			"ASK_FORM_ID" => $arParams["ASK_FORM_ID"],
			"SHOW_MEASURE" => $arParams["SHOW_MEASURE"],
			"SHOW_HINTS" => $arParams["SHOW_HINTS"],
			"OFFER_HIDE_NAME_PROPS" => $arParams["OFFER_HIDE_NAME_PROPS"],
			"SHOW_KIT_PARTS" => $arParams["SHOW_KIT_PARTS"],
			"SHOW_KIT_PARTS_PRICES" => $arParams["SHOW_KIT_PARTS_PRICES"],
			"SHOW_DISCOUNT_PERCENT" => $arParams["SHOW_DISCOUNT_PERCENT"],
			"SHOW_OLD_PRICE" => $arParams["SHOW_OLD_PRICE"],
			'OFFER_TREE_PROPS' => $arParams['OFFER_TREE_PROPS'],
			'ADD_DETAIL_TO_SLIDER' => (isset($arParams['DETAIL_ADD_DETAIL_TO_SLIDER']) ? $arParams['DETAIL_ADD_DETAIL_TO_SLIDER'] : ''),
			"SHOW_EMPTY_STORE" => $arParams['SHOW_EMPTY_STORE'],
			"SHOW_GENERAL_STORE_INFORMATION" => $arParams['SHOW_GENERAL_STORE_INFORMATION'],
			"USER_FIELDS" => $arParams['USER_FIELDS'],
			"FIELDS" => $arParams['FIELDS'],
			"STORES" => $arParams['STORES'],
			"BIG_DATA_RCM_TYPE" => $arParams['BIG_DATA_RCM_TYPE'],
			"USE_MAIN_ELEMENT_SECTION" => $arParams["USE_MAIN_ELEMENT_SECTION"],
			"PARTIAL_PRODUCT_PROPERTIES" => (isset($arParams["PARTIAL_PRODUCT_PROPERTIES"]) ? $arParams["PARTIAL_PRODUCT_PROPERTIES"] : ''),
			"ADD_PROPERTIES_TO_BASKET" => (isset($arParams["ADD_PROPERTIES_TO_BASKET"]) ? $arParams["ADD_PROPERTIES_TO_BASKET"] : ''),
			"PRODUCT_PROPERTIES" => $arParams["PRODUCT_PROPERTIES"],
			"SALE_STIKER" => $arParams["SALE_STIKER"],
			"SHOW_RATING" => $arParams["SHOW_RATING"],

			"OFFERS_LIMIT" => $arParams["DETAIL_OFFERS_LIMIT"],

			'SHOW_BASIS_PRICE' => (isset($arParams['DETAIL_SHOW_BASIS_PRICE']) ? $arParams['DETAIL_SHOW_BASIS_PRICE'] : 'Y'),
			"DETAIL_PICTURE_MODE" => (isset($TEMPLATE_OPTIONS["DETAIL_PICTURE_MODE"]["CURRENT_VALUE"]) ? $TEMPLATE_OPTIONS["DETAIL_PICTURE_MODE"]["CURRENT_VALUE"] : 'POPUP'),

			'DISABLE_INIT_JS_IN_COMPONENT' => (isset($arParams['DISABLE_INIT_JS_IN_COMPONENT']) ? $arParams['DISABLE_INIT_JS_IN_COMPONENT'] : ''),
			'SET_VIEWED_IN_COMPONENT' => (isset($arParams['DETAIL_SET_VIEWED_IN_COMPONENT']) ? $arParams['DETAIL_SET_VIEWED_IN_COMPONENT'] : ''),

			"USE_GIFTS_DETAIL" => $arParams['USE_GIFTS_DETAIL']?: 'Y',
			"USE_GIFTS_MAIN_PR_SECTION_LIST" => $arParams['USE_GIFTS_MAIN_PR_SECTION_LIST']?: 'Y',
			"GIFTS_SHOW_DISCOUNT_PERCENT" => $arParams['GIFTS_SHOW_DISCOUNT_PERCENT'],
			"GIFTS_SHOW_OLD_PRICE" => $arParams['GIFTS_SHOW_OLD_PRICE'],
			"GIFTS_DETAIL_PAGE_ELEMENT_COUNT" => $arParams['GIFTS_DETAIL_PAGE_ELEMENT_COUNT'],
			"GIFTS_DETAIL_HIDE_BLOCK_TITLE" => $arParams['GIFTS_DETAIL_HIDE_BLOCK_TITLE'],
			"GIFTS_DETAIL_TEXT_LABEL_GIFT" => $arParams['GIFTS_DETAIL_TEXT_LABEL_GIFT'],
			"GIFTS_DETAIL_BLOCK_TITLE" => $arParams["GIFTS_DETAIL_BLOCK_TITLE"],
			"GIFTS_SHOW_NAME" => $arParams['GIFTS_SHOW_NAME'],
			"GIFTS_SHOW_IMAGE" => $arParams['GIFTS_SHOW_IMAGE'],
			"GIFTS_MESS_BTN_BUY" => $arParams['GIFTS_MESS_BTN_BUY'],

			"GIFTS_MAIN_PRODUCT_DETAIL_PAGE_ELEMENT_COUNT" => $arParams['GIFTS_MAIN_PRODUCT_DETAIL_PAGE_ELEMENT_COUNT'],
			"GIFTS_MAIN_PRODUCT_DETAIL_BLOCK_TITLE" => $arParams['GIFTS_MAIN_PRODUCT_DETAIL_BLOCK_TITLE'],
		),
		$component
	);?>
</div>
<div class="clearfix"></div>

<?/*fix title after ajax form start*/
$arAdditionalData = $arNavParams = array();
$arAdditionalData['TITLE'] = htmlspecialcharsback($APPLICATION->GetTitle());
$arAdditionalData['WINDOW_TITLE'] = htmlspecialcharsback($APPLICATION->GetTitle('title'));

// dirty hack: try to get breadcrumb call params
for ($i = 0, $cnt = count($APPLICATION->buffer_content_type); $i < $cnt; $i++){
	if ($APPLICATION->buffer_content_type[$i]['F'][1] == 'GetNavChain'){
		$arNavParams = $APPLICATION->buffer_content_type[$i]['P'];
	}
}
if ($arNavParams){
	$arAdditionalData['NAV_CHAIN'] = $APPLICATION->GetNavChain($arNavParams[0], $arNavParams[1], $arNavParams[2], $arNavParams[3], $arNavParams[4]);
}
?>
<script type="text/javascript">	
	BX.addCustomEvent(window, "onAjaxSuccess", function(){
		var arAjaxPageData = <?=CUtil::PhpToJSObject($arAdditionalData);?>;
		if (arAjaxPageData.TITLE)
			BX.ajax.UpdatePageTitle(arAjaxPageData.TITLE);
		if (arAjaxPageData.WINDOW_TITLE || arAjaxPageData.TITLE)
			BX.ajax.UpdateWindowTitle(arAjaxPageData.WINDOW_TITLE || arAjaxPageData.TITLE);
		if (arAjaxPageData.NAV_CHAIN)
			BX.ajax.UpdatePageNavChain(arAjaxPageData.NAV_CHAIN);
		// top.BX.ajax.UpdatePageData(arAjaxPageData);
	});	
</script>
<?/*fix title after ajax form end*/?>

<?$arAllValues=$arSimilar=$arAccessories=array();
/*similar goods*/
$arExpValues=COptimusCache::CIBlockElement_GetProperty($arParams["IBLOCK_ID"], $ElementID, array("CACHE" => array("TAG" =>COptimusCache::GetIBlockCacheTag($arParams["IBLOCK_ID"]))), array("CODE" => "EXPANDABLES"));
if($arExpValues){
	$arAllValues["EXPANDABLES"]=$arExpValues;
}
/*accessories goods*/
$arAccessories=COptimusCache::CIBlockElement_GetProperty($arParams["IBLOCK_ID"], $ElementID, array("CACHE" => array("TAG" =>COptimusCache::GetIBlockCacheTag($arParams["IBLOCK_ID"]))), array("CODE" => "ASSOCIATED"));
if($arAccessories){
	$arAllValues["ASSOCIATED"]=$arAccessories;
}
?>

<?if($arAccessories || $arExpValues || (ModuleManager::isModuleInstalled("sale") && (!isset($arParams['USE_BIG_DATA']) || $arParams['USE_BIG_DATA'] != 'N'))){?>
	<?$class_block="s_".$this->randString();
	$arTab=array();
	if($arExpValues){
		$arTab["EXPANDABLES"]=($arParams["DETAIL_EXPANDABLES_TITLE"] ? $arParams["DETAIL_EXPANDABLES_TITLE"] : GetMessage("EXPANDABLES_TITLE"));
	}
	if($arAccessories){
		$arTab["ASSOCIATED"]=( $arParams["DETAIL_ASSOCIATED_TITLE"] ? $arParams["DETAIL_ASSOCIATED_TITLE"] : GetMessage("ASSOCIATED_TITLE"));
	}
	/* Start Big Data */
	if(ModuleManager::isModuleInstalled("sale") && (!isset($arParams['USE_BIG_DATA']) || $arParams['USE_BIG_DATA'] != 'N')){
		$arTab["RECOMENDATION"]=GetMessage("RECOMENDATION_TITLE");
	}?>
	<div class="bottom_slider specials tab_slider_wrapp <?=$class_block;?>">
		<div class="top_blocks">
			<ul class="tabs">
				<?$i=1;
				foreach($arTab as $code=>$title):?>
					<li data-code="<?=$code?>" <?=($code=="RECOMENDATION" ? "style='display:none;'" : "" );?> <?=($i==1 ? "class='cur'" : "")?>><span><?=$title;?></span></li>
					<?$i++;?>
				<?endforeach;?>
				<li class="stretch"></li>
			</ul>
			<ul class="slider_navigation top custom_flex border">
				<?$i=1;
				foreach($arTab as $code=>$title):?>
					<li class="tabs_slider_navigation <?=$code?>_nav <?=($i==1 ? "cur" : "")?>" data-code="<?=$code?>"></li>
					<?$i++;?>
				<?endforeach;?>
			</ul>
		</div>
		<?$disply_elements=($arParams["DISPLAY_ELEMENT_SLIDER"] ? $arParams["DISPLAY_ELEMENT_SLIDER"] : 10);?>
		<ul class="tabs_content">
			<?foreach($arTab as $code=>$title){?>
				<li class="tab <?=$code?>_wrapp" data-code="<?=$code?>">
					<?if($code=="RECOMENDATION"){?>
						<?
						$GLOBALS["CATALOG_CURRENT_ELEMENT_ID"] = $ElementID;
						?>
						<?$APPLICATION->IncludeComponent("bitrix:catalog.bigdata.products", COptimus::checkVersionExt(), array(
							"LINE_ELEMENT_COUNT" => 5,
							"TEMPLATE_THEME" => (isset($arParams['TEMPLATE_THEME']) ? $arParams['TEMPLATE_THEME'] : ''),
							"DETAIL_URL" => $arResult["FOLDER"].$arResult["URL_TEMPLATES"]["element"],
							"BASKET_URL" => $arParams["BASKET_URL"],
							"ACTION_VARIABLE" => (!empty($arParams["ACTION_VARIABLE"]) ? $arParams["ACTION_VARIABLE"] : "action")."_cbdp",
							"PRODUCT_ID_VARIABLE" => $arParams["PRODUCT_ID_VARIABLE"],
							"PRODUCT_QUANTITY_VARIABLE" => $arParams["PRODUCT_QUANTITY_VARIABLE"],
							"ADD_PROPERTIES_TO_BASKET" => "N",
							"PRODUCT_PROPS_VARIABLE" => $arParams["PRODUCT_PROPS_VARIABLE"],
							"PARTIAL_PRODUCT_PROPERTIES" => (isset($arParams["PARTIAL_PRODUCT_PROPERTIES"]) ? $arParams["PARTIAL_PRODUCT_PROPERTIES"] : ''),
							"SHOW_OLD_PRICE" => $arParams['SHOW_OLD_PRICE'],
							"SHOW_DISCOUNT_PERCENT" => $arParams['SHOW_DISCOUNT_PERCENT'],
							"PRICE_CODE" => $arParams["PRICE_CODE"],
							"SHOW_PRICE_COUNT" => $arParams["SHOW_PRICE_COUNT"],
							"PRODUCT_SUBSCRIPTION" => $arParams['PRODUCT_SUBSCRIPTION'],
							"PRICE_VAT_INCLUDE" => $arParams["PRICE_VAT_INCLUDE"],
							"USE_PRODUCT_QUANTITY" => $arParams['USE_PRODUCT_QUANTITY'],
							"SHOW_NAME" => "Y",
							"SHOW_IMAGE" => "Y",
							"SHOW_MEASURE" => $arParams["SHOW_MEASURE"],
							"SHOW_RATING" => $arParams["SHOW_RATING"],
							"MESS_BTN_BUY" => $arParams['MESS_BTN_BUY'],
							"MESS_BTN_DETAIL" => $arParams['MESS_BTN_DETAIL'],
							"MESS_BTN_SUBSCRIBE" => $arParams['MESS_BTN_SUBSCRIBE'],
							"MESS_NOT_AVAILABLE" => $arParams['MESS_NOT_AVAILABLE'],
							"PAGE_ELEMENT_COUNT" => $disply_elements,
							"SHOW_FROM_SECTION" => "N",
							"IBLOCK_TYPE" => $arParams["IBLOCK_TYPE"],
							"IBLOCK_ID" => $arParams["IBLOCK_ID"],
							"SALE_STIKER" => $arParams["SALE_STIKER"],
							"DEPTH" => "2",
							"CACHE_TYPE" => $arParams["CACHE_TYPE"],
							"CACHE_TIME" => $arParams["CACHE_TIME"],
							"CACHE_GROUPS" => $arParams["CACHE_GROUPS"],
							"SHOW_PRODUCTS_".$arParams["IBLOCK_ID"] => "Y",
							"ADDITIONAL_PICT_PROP_".$arParams["IBLOCK_ID"] => $arParams['ADD_PICT_PROP'],
							"LABEL_PROP_".$arParams["IBLOCK_ID"] => "-",
							"HIDE_NOT_AVAILABLE" => $arParams["HIDE_NOT_AVAILABLE"],
							"CONVERT_CURRENCY" => $arParams["CONVERT_CURRENCY"],
							"CURRENCY_ID" => $arParams["CURRENCY_ID"],
							"SECTION_ID" => $arResult["VARIABLES"]["SECTION_ID"],
							"SECTION_CODE" => $arResult["VARIABLES"]["SECTION_CODE"],
							"SECTION_ELEMENT_ID" => $arResult["VARIABLES"]["SECTION_ID"],
							"SECTION_ELEMENT_CODE" => $arResult["VARIABLES"]["SECTION_CODE"],
							"ID" => $ElementID,
							"PROPERTY_CODE_".$arParams["IBLOCK_ID"] => $arParams["LIST_PROPERTY_CODE"],
							"CART_PROPERTIES_".$arParams["IBLOCK_ID"] => $arParams["PRODUCT_PROPERTIES"],
							"RCM_TYPE" => (isset($arParams['BIG_DATA_RCM_TYPE']) ? $arParams['BIG_DATA_RCM_TYPE'] : ''),
							"DISPLAY_WISH_BUTTONS" => $arParams["DISPLAY_WISH_BUTTONS"],
							"DISPLAY_COMPARE" => $arParams["USE_COMPARE"],
							"OFFERS_LIMIT" => $arParams["LIST_OFFERS_LIMIT"],
							),
							false,
							array("HIDE_ICONS" => "Y")
						);
						?>
					<?}else{?>
						<ul class="tabs_slider <?=$code?>_slides wr">
							<?$GLOBALS['arrFilter'.$code] = array( "ID" => $arAllValues[$code] );?>
							<?$APPLICATION->IncludeComponent(
								"bitrix:catalog.top",
								"main",
								array(
									"TITLE_BLOCK" => $arParams["SECTION_TOP_BLOCK_TITLE"],
									"IBLOCK_TYPE" => $arParams["IBLOCK_TYPE"],
									"IBLOCK_ID" => $arParams["IBLOCK_ID"],
									"SALE_STIKER" => $arParams["SALE_STIKER"],
									"SHOW_RATING" => $arParams["SHOW_RATING"],
									"FILTER_NAME" => 'arrFilter'.$code,
									"ELEMENT_SORT_FIELD" => $arParams["ELEMENT_SORT_FIELD"],
									"ELEMENT_SORT_ORDER" => $arParams["ELEMENT_SORT_ORDER"],
									"ELEMENT_SORT_FIELD2" => $arParams["ELEMENT_SORT_FIELD2"],
									"ELEMENT_SORT_ORDER2" => $arParams["ELEMENT_SORT_ORDER2"],
									"SECTION_URL" => $arResult["FOLDER"].$arResult["URL_TEMPLATES"]["section"],
									"DETAIL_URL" => $arResult["FOLDER"].$arResult["URL_TEMPLATES"]["element"],
									"BASKET_URL" => $arParams["BASKET_URL"],
									"ACTION_VARIABLE" => $arParams["ACTION_VARIABLE"],
									"PRODUCT_ID_VARIABLE" => $arParams["PRODUCT_ID_VARIABLE"],
									"SECTION_ID_VARIABLE" => $arParams["SECTION_ID_VARIABLE"],
									"PRODUCT_QUANTITY_VARIABLE" => $arParams["PRODUCT_QUANTITY_VARIABLE"],
									"PRODUCT_PROPS_VARIABLE" => $arParams["PRODUCT_PROPS_VARIABLE"],
									"DISPLAY_COMPARE" => $arParams["USE_COMPARE"],
									"DISPLAY_WISH_BUTTONS" => $arParams["DISPLAY_WISH_BUTTONS"],
									"ELEMENT_COUNT" => $disply_elements,
									"SHOW_MEASURE" => $arParams["SHOW_MEASURE"],
									"LINE_ELEMENT_COUNT" => $arParams["TOP_LINE_ELEMENT_COUNT"],
									"PROPERTY_CODE" => $arParams["DETAIL_PROPERTY_CODE"],
									"PRICE_CODE" => $arParams["PRICE_CODE"],
									"USE_PRICE_COUNT" => $arParams["USE_PRICE_COUNT"],
									"SHOW_PRICE_COUNT" => $arParams["SHOW_PRICE_COUNT"],
									"PRICE_VAT_INCLUDE" => $arParams["PRICE_VAT_INCLUDE"],
									"PRICE_VAT_SHOW_VALUE" => $arParams["PRICE_VAT_SHOW_VALUE"],
									"USE_PRODUCT_QUANTITY" => $arParams['USE_PRODUCT_QUANTITY'],
									"ADD_PROPERTIES_TO_BASKET" => (isset($arParams["ADD_PROPERTIES_TO_BASKET"]) ? $arParams["ADD_PROPERTIES_TO_BASKET"] : ''),
									"PARTIAL_PRODUCT_PROPERTIES" => (isset($arParams["PARTIAL_PRODUCT_PROPERTIES"]) ? $arParams["PARTIAL_PRODUCT_PROPERTIES"] : ''),
									"PRODUCT_PROPERTIES" => $arParams["PRODUCT_PROPERTIES"],
									"CACHE_TYPE" => $arParams["CACHE_TYPE"],
									"CACHE_TIME" => $arParams["CACHE_TIME"],
									"CACHE_GROUPS" => $arParams["CACHE_GROUPS"],
									"CACHE_FILTER" => $arParams["CACHE_FILTER"],
									"OFFERS_CART_PROPERTIES" => $arParams["OFFERS_CART_PROPERTIES"],
									"OFFERS_FIELD_CODE" => $arParams["LIST_OFFERS_FIELD_CODE"],
									"OFFERS_PROPERTY_CODE" => $arParams["OFFERS_PROPERTY_CODE"],
									"OFFERS_SORT_FIELD" => $arParams["OFFERS_SORT_FIELD"],
									"OFFERS_SORT_ORDER" => $arParams["OFFERS_SORT_ORDER"],
									"OFFERS_SORT_FIELD2" => $arParams["OFFERS_SORT_FIELD2"],
									"OFFERS_SORT_ORDER2" => $arParams["OFFERS_SORT_ORDER2"],
									"OFFERS_LIMIT" => $arParams["LIST_OFFERS_LIMIT"],
									'CONVERT_CURRENCY' => $arParams['CONVERT_CURRENCY'],
									'CURRENCY_ID' => $arParams['CURRENCY_ID'],
									'HIDE_NOT_AVAILABLE' => $arParams['HIDE_NOT_AVAILABLE'],
									'VIEW_MODE' => (isset($arParams['TOP_VIEW_MODE']) ? $arParams['TOP_VIEW_MODE'] : ''),
									'ROTATE_TIMER' => (isset($arParams['TOP_ROTATE_TIMER']) ? $arParams['TOP_ROTATE_TIMER'] : ''),
									'TEMPLATE_THEME' => (isset($arParams['TEMPLATE_THEME']) ? $arParams['TEMPLATE_THEME'] : ''),
									'LABEL_PROP' => $arParams['LABEL_PROP'],
									'ADD_PICT_PROP' => $arParams['ADD_PICT_PROP'],
									'PRODUCT_DISPLAY_MODE' => $arParams['PRODUCT_DISPLAY_MODE'],

									'OFFER_ADD_PICT_PROP' => $arParams['OFFER_ADD_PICT_PROP'],
									'OFFER_TREE_PROPS' => $arParams['OFFER_TREE_PROPS'],
									'PRODUCT_SUBSCRIPTION' => $arParams['PRODUCT_SUBSCRIPTION'],
									'SHOW_DISCOUNT_PERCENT' => $arParams['SHOW_DISCOUNT_PERCENT'],
									'SHOW_OLD_PRICE' => $arParams['SHOW_OLD_PRICE'],
									'MESS_BTN_BUY' => $arParams['MESS_BTN_BUY'],
									'MESS_BTN_ADD_TO_BASKET' => $arParams['MESS_BTN_ADD_TO_BASKET'],
									'MESS_BTN_SUBSCRIBE' => $arParams['MESS_BTN_SUBSCRIBE'],
									'MESS_BTN_DETAIL' => $arParams['MESS_BTN_DETAIL'],
									'MESS_NOT_AVAILABLE' => $arParams['MESS_NOT_AVAILABLE'],
									'ADD_TO_BASKET_ACTION' => $basketAction,
									'SHOW_CLOSE_POPUP' => isset($arParams['COMMON_SHOW_CLOSE_POPUP']) ? $arParams['COMMON_SHOW_CLOSE_POPUP'] : '',
									'COMPARE_PATH' => $arResult['FOLDER'].$arResult['URL_TEMPLATES']['compare'],
								),
								false, array("HIDE_ICONS"=>"Y")
							);?>
						</ul>
					<?}?>
				</li>
			<?}?>
		</ul>
	</div>
	<script type="text/javascript">
		$(document).ready(function(){
			
			$('.tab_slider_wrapp.<?=$class_block;?> .tabs > li').first().addClass('cur');
			$('.tab_slider_wrapp.<?=$class_block;?> .slider_navigation > li').first().addClass('cur');
			$('.tab_slider_wrapp.<?=$class_block;?> .tabs_content > li').first().addClass('cur');
			
			var flexsliderItemWidth = 220;
			var flexsliderItemMargin = 12;
			
			var sliderWidth = $('.tab_slider_wrapp.<?=$class_block;?>').outerWidth();
			var flexsliderMinItems = Math.floor(sliderWidth / (flexsliderItemWidth + flexsliderItemMargin));
			$('.tab_slider_wrapp.<?=$class_block;?> .tabs_content > li.cur').flexslider({
				animation: 'slide',
				selector: '.tabs_slider .catalog_item',
				slideshow: false,
				animationSpeed: 600,
				directionNav: true,
				controlNav: false,
				pauseOnHover: true,
				animationLoop: true, 
				itemWidth: flexsliderItemWidth,
				itemMargin: flexsliderItemMargin, 
				minItems: flexsliderMinItems,
				controlsContainer: '.tabs_slider_navigation.cur',
				start: function(slider){
					slider.find('li').css('opacity', 1);
				}
			});
			
			$('.tab_slider_wrapp.<?=$class_block;?> .tabs > li').on('click', function(){
				var sliderIndex = $(this).index();				
				if(!$('.tab_slider_wrapp.<?=$class_block;?> .tabs_content > li.cur .flex-viewport').length){
					$('.tab_slider_wrapp.<?=$class_block;?> .tabs_content > li.cur').flexslider({
						animation: 'slide',
						selector: '.tabs_slider .catalog_item',
						slideshow: false,
						animationSpeed: 600,
						directionNav: true,
						controlNav: false,
						pauseOnHover: true,
						animationLoop: true, 
						itemWidth: flexsliderItemWidth,
						itemMargin: flexsliderItemMargin, 
						minItems: flexsliderMinItems,
						controlsContainer: '.tabs_slider_navigation.cur',
					});
					setHeightBlockSlider();
				}
				if($(this).data("code")=="RECOMENDATION"){
					if($(this).data("clicked")!="Y"){
						$(window).resize();
						$(this).data("clicked","Y");
						setHeightBlockSlider();
					}
				}
			});

			setHeightBlockSlider();

			$(document).on({
				mouseover: function(e){
					var tabsContentHover = $(this).closest('.tab').attr('data-hover') * 1;
					$(this).closest('.tab').fadeTo(100, 1);
					$(this).closest('.tab').stop().css({'height': tabsContentHover});
					$(this).find('.buttons_block').fadeIn(450, 'easeOutCirc');
				},
				mouseleave: function(e){
					var tabsContentUnhoverHover = $(this).closest('.tab').attr('data-unhover') * 1;
					$(this).closest('.tab').stop().animate({'height': tabsContentUnhoverHover}, 100);
					$(this).find('.buttons_block').stop().fadeOut(233);
				}
			}, '.<?=$class_block;?> .tabs_slider > li');
		})
	</script>
<?}?>143  12058|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/catalog/main/lang/ru/.parameters.php|f2811901<?
	$MESS["IBLOCK_STOCK_NAME"] = "  ";
	
	$MESS["SEF_MODE_STOCK_SECTIONS"] = "  ";
	$MESS["SEF_MODE_STOCK_ELEMENT"] = " ";
	
	$MESS["IBLOCK_ADVT_TYPE"] = "  ";
	$MESS["IBLOCK_ADVT_NAME"] = "ID  ";
	$MESS["IBLOCK_ADVT_SECTION_NAME"] = "ID    ";
	$MESS["IBLOCK_ADVT_SECTION_NAME_SECT"] = "ID    ";
	
	$MESS["SEF_MODE_BRAND_SECTIONS"] = "  ";
	$MESS["SEF_MODE_BRAND_ELEMENT"] = " ";
	
	$MESS["IBLOCK_REVIEWS_TYPE"] = "  ";
	$MESS["IBLOCK_REVIEWS_NAME"] = "ID  ";
	
	$MESS["SKU_DISPLAY_LOCATION"] = "   ";
	$MESS["SKU_DISPLAY_LOCATION_RIGHT"] = "   ";
	$MESS["SKU_DISPLAY_LOCATION_BOTTOM"] = "  ";
	$MESS["SKU_DISPLAY_LOCATION_TIP"] = "         ,    -     ";
	
	$MESS["SHOW_QUANTITY"] = "  ";
	$MESS["SECTION_TOP_BLOCK_TITLE"] = " ";
	$MESS["SECTION_TOP_BLOCK_TITLE_VALUE"] = " ";
	$MESS["VIEWED_ELEMENT_COUNT"] = "   ";
	$MESS["VIEWED_BLOCK_TITLE"] = "    ";
	$MESS["VIEWED_TITLE"] = "  ";
	$MESS["CP_BC_TPL_DETAIL_ADD_DETAIL_TO_SLIDER"] = "    ";
	$MESS["SKU_DETAIL_ID"] = "  SKU  ";
	$MESS["SKU_DETAIL_ID_TIP"] = "         ";
	
	
	$MESS["DEFAULT_LIST_TEMPLATE"] = "     ";
	$MESS["DEFAULT_LIST_TEMPLATE_TABLE"] = "";
	$MESS["DEFAULT_LIST_TEMPLATE_LIST"] = "";
	$MESS["DEFAULT_LIST_TEMPLATE_BLOCK"] = "";
	$MESS["USE_RATING"] = " ";
	$MESS["MAX_AMOUNT"] = ',    ""';
	$MESS["USE_ONLY_MAX_AMOUNT"] = '    ""  " "';
	$MESS["LIST_DISPLAY_POPUP_IMAGE"] = '      ""';
	$MESS["LIST_DEFAULT_CATALOG_TEMPLATE"] = '   ';
	$MESS["LIST_DEFAULT_CATALOG_TEMPLATE_LIST"] = '';
	$MESS["LIST_DEFAULT_CATALOG_TEMPLATE_TABLE"] = '';
	$MESS["LIST_DEFAULT_CATALOG_TEMPLATE_BLOCK"] = '';
	$MESS["SECTION_DISPLAY_PROPERTY"] = '     ';
	$MESS["MAX_COUNT_TIP"] = " (    )  ,        . 0 -     ";
	$MESS["MAX_BASKET_PRODUCTS"] = "  ,    (0 -  )";
	$MESS["DEFAULT_BASKET_PRODUCTS"] = "       ";
	$MESS["DISPLAY_WISH_BUTTONS"] = "  ''";
	$MESS["DEFAULT_COUNT"] = ",     ";
	$MESS["SHOW_BRAND_PICTURE"] = "  ";	
	$MESS["PROPERTIES_DISPLAY_LOCATION"] = "  ";
	$MESS["PROPERTIES_DISPLAY_LOCATION_DESCRIPTION"] = " ";
	$MESS["PROPERTIES_DISPLAY_LOCATION_TAB"] = "  ";
	$MESS["PROPERTIES_DISPLAY_TYPE"] = " ";
	$MESS["PROPERTIES_DISPLAY_TYPE_BLOCK"] = "";
	$MESS["PROPERTIES_DISPLAY_TYPE_TABLE"] = "";
	$MESS["SHOW_ADDITIONAL_TAB"] = "  ''";
	$MESS["SHOW_ASK_BLOCK"] = "  ' '";
	$MESS["ASK_FORM_ID"] = "ID  ' '";
	
	$MESS["SHOW_MEASURE"] = "  ";
	$MESS["SHOW_QUANTITY_COUNT"] = "   ";
	$MESS["SHOW_HINTS"] = "   ";
	
	
	$MESS["SORT_BUTTONS"] = " ";
	$MESS["SORT_BUTTONS_POPULARITY"] = " ";
	$MESS["SORT_BUTTONS_NAME"] = " ";
	$MESS["SORT_BUTTONS_PRICE"] = " ";
	$MESS["SORT_BUTTONS_QUANTITY"] = " ";
	
	$MESS["SORT_PRICES"] = "  ";
	$MESS["SORT_PRICES_MINIMUM_PRICE"] = " ";
	$MESS["SORT_PRICES_MAXIMUM_PRICE"] = " ";
	
	$MESS["SHOW_SECTION_PREVIEW"] = "  ";
	$MESS["SHOW_SECTION_ROOT_PREVIEW"] = "  ";
	$MESS["SHOW_SECTION_PREVIEW_PROPERTY"] = "  ";
	$MESS["SHOW_SECTION_PREVIEW_PROPERTY_DESCRIPTION"] = " ";
	$MESS["SHOW_SECTION_PREVIEW_PROPERTY_UF"] = " ";
	
	$MESS["SHOW_SECTION_PREVIEW"] = " SEO   ";
	$MESS["SECTION_PREVIEW_PROPERTY"] = "  SEO  ";
	
	$MESS["SHOW_SECTION_PICTURES"] = "  ";
	$MESS["SHOW_ROOT_SECTION_PICTURE"] = "     ";
	$MESS["SHOW_SECTION_SIBLINGS"] = "  ";
	$MESS["SHOW_KIT_PARTS"] = "  ";
	$MESS["SHOW_KIT_PARTS_PRICES"] = "   ";
	
	$MESS["IBLOCK_BANNERS_TYPE"] =  "  ";
	$MESS["IBLOCK_BANNERS_ID"] = "ID  ";
	$MESS["IBLOCK_BANNERS_TYPE_ID"] ="ID    ";
	$MESS["IBLOCK_SMALL_BANNERS_TYPE_ID"] = "     ";
	
	$MESS["OFFERS_SETTINGS"] = "   ";
	$MESS["CP_BC_TPL_ADD_PICT_PROP"] = "   ";
	$MESS["CP_BC_TPL_LABEL_PROP"] = "  ";
	$MESS["CP_BC_TPL_PRODUCT_DISPLAY_MODE"] = " ";
	$MESS["CP_BC_TPL_OFFER_ADD_PICT_PROP"] = "  ";
	
	$MESS["CP_BC_TPL_PROP_EMPTY"] = " ";
	
	$MESS["CP_BC_TPL_SHOW_DISCOUNT_PERCENT"] = "  ";
	$MESS["SHOW_DISCOUNT_TIME"] = "   ";
	$MESS["CP_BC_TPL_SHOW_OLD_PRICE"] = "  ";
	$MESS["DETAIL_OFFERS_LIMIT"] = "     (0 - )";
	
	$MESS["AJAX_FILTER_CATALOG_TITLE"] = " ajax ";
	$MESS["OFFER_HIDE_NAME_PROPS_TITLE"] = "    ";
	
	$MESS["CP_BC_TPL_USE_BIG_DATA"] = "  ";
	$MESS["CP_BC_TPL_BIG_DATA_RCM_TYPE"] = " ";
	$MESS["CP_BC_TPL_RCM_BESTSELLERS"] = " ";
	$MESS["CP_BC_TPL_RCM_PERSONAL"] = " ";
	$MESS["CP_BC_TPL_RCM_SOLD_WITH"] = "   ";
	$MESS["CP_BC_TPL_RCM_VIEWED_WITH"] = "   ";
	$MESS["CP_BC_TPL_RCM_SIMILAR"] = " ";
	$MESS["CP_BC_TPL_RCM_SIMILAR_ANY"] = "// ";
	$MESS["CP_BC_TPL_RCM_PERSONAL_WBEST"] = " /";
	$MESS["CP_BC_TPL_RCM_RAND"] = " ";
	
	$MESS["USE_BIG_DATA_TIP"] = "     ";
	$MESS["SHOW_DISCOUNT_PERCENT_TIP"] = "   ,   ";
	$MESS["SHOW_OLD_PRICE_TIP"] = "  ,   ";
	
	$MESS["ADD_PICT_PROP_TIP"] = "   ";
	$MESS["OFFER_ADD_PICT_PROP_TIP"] = "    ( )";
	$MESS["AJAX_FILTER_CATALOG_TIP"] = "          ";
	$MESS["OFFER_HIDE_NAME_PROPS_TIP"] = "         ";

	$MESS["SHOW_ONE_CLICK_BUY"] = "  \"  1 \"   ";
	$MESS["DISPLAY_ELEMENT_SLIDER"] = "   ";
	$MESS["DISPLAY_ELEMENT_SLIDER_TIP"] = "    : ,  ,  ";

	$MESS["SALE_STIKER"] = "   ";
	$MESS["SHOW_RATING"] = " ";

	$MESS["DETAIL_EXPANDABLES_TITLE"] = "  \"\"";
	$MESS["DETAIL_EXPANDABLES_VALUE"] = "";
	$MESS["DETAIL_ASSOCIATED_TITLE"] = "  \" \"";
	$MESS["DETAIL_ASSOCIATED_VALUE"] = " ";

	$MESS["DETAIL_PICTURE_MODE_IMG"] = "";
	$MESS["DETAIL_PICTURE_MODE_POPUP"] = " ";
	$MESS["DETAIL_PICTURE_MODE_MAGNIFIER"] = "";
	$MESS["CP_BCE_TPL_DETAIL_PICTURE_MODE"] = "   ";
	$MESS["SHOW_UNABLE_SKU_PROPS"] = "     ";
?>151  1137|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/catalog.store.amount/main/result_modifier.php|68d3abfa<?if(!isset($arProperty["NUM_AMOUNT"])){	$arSelect=array("ID", "PRODUCT_AMOUNT", 'ADDRESS');	if($arParams["SHOW_GENERAL_STORE_INFORMATION"] != "Y"){		foreach($arResult["STORES"] as $pid => $arProperty){			$arStore = CCatalogStore::GetList(array('TITLE' => 'ASC', 'ID' => 'ASC'), array("ACTIVE" => "Y", "PRODUCT_ID" => $arParams["ELEMENT_ID"], "ID" => $arProperty["ID"]), false, false, $arSelect)->Fetch();			$arResult["STORES"][$pid]["NUM_AMOUNT"] = $arStore["PRODUCT_AMOUNT"];			$arResult["STORES"][$pid]["ADDRESS"] = $arStore["ADDRESS"];		}	}else{		$filter = array( "ACTIVE" => "Y", "PRODUCT_ID" => $arParams["ELEMENT_ID"], "+SITE_ID" => SITE_ID, "ISSUING_CENTER" => 'Y' );		$rsProps = CCatalogStore::GetList( array('TITLE' => 'ASC', 'ID' => 'ASC'), $filter, false, false, $arSelect );		while ($prop = $rsProps->GetNext()){			$amount = (is_null($prop["PRODUCT_AMOUNT"])) ? 0 : $prop["PRODUCT_AMOUNT"];			$quantity += $amount;			$arResult["STORES"][$prop['ID']]["ADDRESS"] = $prop["ADDRESS"];		}		unset($arResult["STORES"]);		$arResult["STORES"][0]["NUM_AMOUNT"] =$arResult["STORES"][0]["AMOUNT"] = $quantity;	}}?>144  3257|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/catalog.store.amount/main/template.php|1fbac1a1<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();?>
<?$frame = $this->createFrame()->begin();?>
<?
if(strlen($arResult["ERROR_MESSAGE"]) > 0){
	ShowError($arResult["ERROR_MESSAGE"]);
}
?>
<?if(count($arResult["STORES"]) > 0):?>
	<?
	// get shops
	$arShops = array();
	CModule::IncludeModule('iblock');
	$dbRes = CIBlock::GetList(array(), array('CODE' => 'aspro_optimus_shops', 'ACTIVE' => 'Y', 'SITE_ID' => SITE_ID));
	if ($arShospIblock = $dbRes->Fetch()){
		$dbRes = CIBlockElement::GetList(array(), array('ACTIVE' => 'Y', 'IBLOCK_ID' => $arShospIblock['ID']), false, false, array('ID', 'DETAIL_PAGE_URL', 'PROPERTY_STORE_ID'));
		while($arShop = $dbRes->GetNext()){
			$arShops[$arShop['PROPERTY_STORE_ID_VALUE']] = $arShop;
		}
	}
	?>
	<div class="stores_block_wrap">
		<?$empty_count=0;
		$count_stores=count($arResult["STORES"]);?>
		<?foreach($arResult["STORES"] as $pid => $arProperty):
			if($arParams['SHOW_EMPTY_STORE'] == 'N' && $arProperty['AMOUNT'] <= 0)
				$empty_count++;?>
			<div class="stores_block <?=(isset($arProperty["IMAGE_ID"]) && !empty($arProperty["IMAGE_ID"]) ? 'w_image' : 'wo_image')?>" style="display: <? echo ($arParams['SHOW_EMPTY_STORE'] == 'N' && $arProperty['AMOUNT'] <= 0 ? 'none' : ''); ?>;">
				<div class="stores_text_wrapp <?=(isset($arProperty["IMAGE_ID"]) && !empty($arProperty["IMAGE_ID"]) ? 'image_block' : '')?>">
					<?if (isset($arProperty["IMAGE_ID"]) && !empty($arProperty["IMAGE_ID"])):?>
						<div class="imgs"><?=GetMessage('S_IMAGE')?> <?=CFile::ShowImage($arProperty["IMAGE_ID"], 100, 100, "border=0", "", true);?></div>
					<?endif;?>
					<div class="main_info">
						<?if (isset($arProperty["TITLE"])):?>
							<span>
								<a class="title_stores" href="<?=$arProperty["URL"]?>" data-storehref="<?=$arProperty["URL"]?>" data-iblockhref="<?=$arShops[$arProperty['ID']]['DETAIL_PAGE_URL']?>"> <?=$arProperty["TITLE"].(strlen($arProperty["ADDRESS"]) && strlen($arProperty["TITLE"]) ? ', ' : '').$arProperty["ADDRESS"]?></a>
							</span>
						<?endif;?>
						<?if(isset($arProperty["PHONE"])):?><span class="store_phone p10"><?=GetMessage('S_PHONE')?> <?=$arProperty["PHONE"]?></span><?endif;?>
						<?if(isset($arProperty["SCHEDULE"])):?><div class="schedule p10"><?=GetMessage('S_SCHEDULE')?>&nbsp;<?=str_replace("&lt;br/&gt;", "<br/>", $arProperty["SCHEDULE"]);?></div><?endif;?>
						<?if (!empty($arProperty['USER_FIELDS']) && is_array($arProperty['USER_FIELDS'])){
							foreach ($arProperty['USER_FIELDS'] as $userField){
								if (isset($userField['CONTENT'])){
									?><span><?=$userField['TITLE']?>: <?=$userField['CONTENT']?></span><br /><?
								}
							}
						}?>
						<?if ($arParams['SHOW_GENERAL_STORE_INFORMATION'] == "Y"){?>
							<?=GetMessage('BALANCE')?>
						<?}?>
					</div>
				</div>
				<?
				$totalCount = COptimus::CheckTypeCount($arProperty["NUM_AMOUNT"]);
				$arQuantityData = COptimus::GetQuantityArray($totalCount);
				?>
				<?if(strlen($arQuantityData["TEXT"])):?>
					<?=$arQuantityData["HTML"]?>
				<?endif;?>
			</div>
		<?endforeach;?>
		<?if($empty_count==$count_stores){?>
			<div class="stores_block">
				<div class="stores_text_wrapp"><?=GetMessage('NO_STORES')?></div>
			</div>
		<?}?>
	</div>
<?endif;?>138  11659|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/main.register/main/template.php|5e4eb7f3<? if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true) die(); ?>
<div class="module-form-block-wr registraion-page">
	<?if($USER->IsAuthorized()){?>
		<p><?echo GetMessage("MAIN_REGISTER_AUTH")?></p>
	<?}else{?>
		<?if (count($arResult["ERRORS"]) > 0){
			foreach ($arResult["ERRORS"] as $key => $error)
				if (intval($key) == 0 && $key !== 0) 
					$arResult["ERRORS"][$key] = str_replace("#FIELD_NAME#", "&quot;".GetMessage("REGISTER_FIELD_".$key)."&quot;", $error);

			ShowError(implode("<br />", $arResult["ERRORS"]));
		}elseif($arResult["USE_EMAIL_CONFIRMATION"] === "Y"){?>
			
		<?}?>
	<?}?>

	<?if( empty($arResult["ERRORS"]) && !empty($_POST["register_submit_button"]) && $arResult["USE_EMAIL_CONFIRMATION"]=="N"){
		LocalRedirect(SITE_DIR.'personal/');
	}elseif( empty($arResult["ERRORS"]) && !empty($_POST["register_submit_button"]) && $arResult["USE_EMAIL_CONFIRMATION"]=="Y"){?>
		<p><?echo GetMessage("REGISTER_EMAIL_WILL_BE_SENT")?></p>
	<?}else{?>
		<div class="form-block border_block">
			<div class="wrap_md">
				<div class="main_info iblock">
					<div class="top">
						<?$APPLICATION->IncludeFile(SITE_DIR."include/register_description.php", Array(), Array("MODE" => "html", "NAME" => GetMessage("REGISTER_INCLUDE_AREA"), ));?>
					</div>
					<script>
						$(document).ready(function(){
							$.validator.addClassRules({
								'phone_input':{
									regexp: arOptimusOptions['THEME']['VALIDATE_PHONE_MASK']
								}
							});

							$("form#registraion-page-form").validate
							({
								rules:{ emails: "email"},
								messages: {
									"captcha_word": {
										remote: '<?=GetMessage("VALIDATOR_CAPTCHA")?>'
									},
								},
								highlight: function( element ){
									$(element).parent().addClass('error');
								},
								unhighlight: function( element ){
									$(element).parent().removeClass('error');
								},
								submitHandler: function( form ){
										form.submit();
									if( $("form#registraion-page-form").valid() ){
										setTimeout(function() {
											//$(form).find('button[type="submit"]').attr("disabled", "disabled");
										}, 300);
									}
								},
								errorPlacement: function( error, element ){
									error.insertBefore(element);
								}
							});
							$("form[name=bx_auth_servicesform_inline]").validate();

							if(arOptimusOptions['THEME']['PHONE_MASK'].length){
								var base_mask = arOptimusOptions['THEME']['PHONE_MASK'].replace( /(\d)/g, '_' );
								$('form#registraion-page-form input.phone_input').inputmask('mask', {'mask': arOptimusOptions['THEME']['PHONE_MASK'] });
								$('form#registraion-page-form input.phone_input').blur(function(){
									if( $(this).val() == base_mask || $(this).val() == '' ){
										if( $(this).hasClass('required') ){
											$(this).parent().find('label.error').html(BX.message('JS_REQUIRED'));
										}
									}
								});
							}
						})
					</script>
					
					<form id="registraion-page-form" method="post" action="<?=POST_FORM_ACTION_URI?>" name="regform" enctype="multipart/form-data" >					
						<?if($arResult["BACKURL"] <> ''):?>
							<input type="hidden" name="backurl" value="<?=$arResult["BACKURL"]?>" />
						<?endif;?>
						<input type="hidden" name="register_submit_button" value="reg" />
						<?/*$arResult['SHOW_FIELDS'] = array(
							   'NAME',
							   'PERSONAL_PHONE',
							   'EMAIL',                                           
							   'PASSWORD',
							   'CONFIRM_PASSWORD',
							   //'PERSONAL_STREET',
								'LOGIN'
							);
						*/?>
						<?
						$arTmpField=$arFields=$arUFields=array();
						$arTmpField=array_combine($arResult['SHOW_FIELDS'], $arResult['SHOW_FIELDS']);
						unset($arTmpField["PASSWORD"]);
						unset($arTmpField["CONFIRM_PASSWORD"]);

						if($arResult["USER_PROPERTIES"]["SHOW"] == "Y"){
							foreach($arParams["USER_PROPERTY"] as $name){
								$arUFields[$name]=$arResult["USER_PROPERTIES"]["DATA"][$name];
							}
						}

						if($arParams["SHOW_FIELDS"]){
							foreach($arParams["SHOW_FIELDS"] as $name){
								$arFields[$arTmpField[$name]]=$name;
							}
						}else{
							$arFields=$arTmpField;
						}
						$arFields["PASSWORD"]="PASSWORD";
						$arFields["CONFIRM_PASSWORD"]="CONFIRM_PASSWORD";
						$arFields["LOGIN"]="LOGIN";

						?>
						<?foreach ($arFields as $FIELD):?>
							<?if( $FIELD != "LOGIN" ){?>
								<div class="form-control bg">
									<div class="wrap_md">
										<div class="iblock label_block">
							<?}?>
										<?if( $FIELD != "LOGIN" ):?>
											<label for="input_<?=$FIELD;?>"><?=GetMessage("REGISTER_FIELD_".$FIELD)?> <?if ($arResult["REQUIRED_FIELDS_FLAGS"][$FIELD] == "Y"):?><span class="star">*</span><?endif;?></label>
										<?endif;?>
										<?if( array_key_exists( $FIELD, $arResult["ERRORS"] ) ):?>
											<?$class='class="error"'?>
										<?endif;?>
										
										<?switch ($FIELD){
											case "PASSWORD":?>
												<input size="30" type="password" id="input_<?=$FIELD;?>" name="REGISTER[<?=$FIELD?>]" required value="<?=$arResult["VALUES"][$FIELD]?>" autocomplete="off" class="password <?=(array_key_exists( $FIELD, $arResult["ERRORS"] ))? 'error': ''?>"  />
												
											<?break;
											case "CONFIRM_PASSWORD":?>
												<input size="30" type="password" id="input_<?=$FIELD;?>" name="REGISTER[<?=$FIELD?>]" required value="<?=$arResult["VALUES"][$FIELD]?>" autocomplete="off" class="confirm_password <?=(array_key_exists( $FIELD, $arResult["ERRORS"] ))? 'error': ''?>" />
											
											<?break;
											case "PERSONAL_GENDER":?>
												<select name="REGISTER[<?=$FIELD?>]" id="input_<?=$FIELD;?>">
													<option value=""><?=GetMessage("USER_DONT_KNOW")?></option>
													<option value="M"<?=$arResult["VALUES"][$FIELD] == "M" ? " selected=\"selected\"" : ""?>><?=GetMessage("USER_MALE")?></option>
													<option value="F"<?=$arResult["VALUES"][$FIELD] == "F" ? " selected=\"selected\"" : ""?>><?=GetMessage("USER_FEMALE")?></option>
												</select>
												<?break;
											case "PERSONAL_COUNTRY":
											case "WORK_COUNTRY":?>
												<select name="REGISTER[<?=$FIELD?>]" id="input_<?=$FIELD;?>">
													<?foreach ($arResult["COUNTRIES"]["reference_id"] as $key => $value){?>
														<option value="<?=$value?>"<?if ($value == $arResult["VALUES"][$FIELD]):?> selected="selected"<?endif?>><?=$arResult["COUNTRIES"]["reference"][$key]?></option>
													<?}?>
												</select>
												<?break;
											case "PERSONAL_PHOTO":
											case "WORK_LOGO":?>
												<input size="30" type="file" id="input_<?=$FIELD;?>" name="REGISTER_FILES_<?=$FIELD?>" />
												<?break;
											case "PERSONAL_NOTES":
											case "WORK_NOTES":?>
												<textarea cols="30" rows="5" id="input_<?=$FIELD;?>" name="REGISTER[<?=$FIELD?>]"><?=$arResult["VALUES"][$FIELD]?></textarea>
												
											<?case "PERSONAL_STREET":?>
												<textarea cols="30" rows="5" id="input_<?=$FIELD;?>" name="REGISTER[<?=$FIELD?>]"><?=$arResult["VALUES"][$FIELD]?></textarea>
												<?break;?>
											<?case "EMAIL":?>
												<input size="30" type="email" id="input_<?=$FIELD;?>" name="REGISTER[<?=$FIELD?>]" required value="<?=$arResult["VALUES"][$FIELD]?>" <?=$class?> id="emails"/>
											<?break;?>
											<?case "NAME":?>
												<input size="30" type="text" id="input_<?=$FIELD;?>" name="REGISTER[<?=$FIELD?>]" <?=($arResult["REQUIRED_FIELDS_FLAGS"][$FIELD] == "Y" ? "required": "");?> value="<?=$_REQUEST["REGISTER"]["NAME"]?>" <?=$class?>/>                              
											<?break;?>
											<?case "PERSONAL_PHONE":?>
												<input size="30" type="text" id="input_<?=$FIELD;?>" name="REGISTER[<?=$FIELD?>]" class="phone_input <?=(array_key_exists( $FIELD, $arResult["ERRORS"] ))? 'error': ''?>" <?=($arResult["REQUIRED_FIELDS_FLAGS"][$FIELD] == "Y" ? "required": "");?> value="<?=$arResult["VALUES"][$FIELD]?>" />
											<?break;?>	
											<?break;
											default:?>
												<?// hide login?>
												<input size="30" id="input_<?=$FIELD;?>" <?=$FIELD == "LOGIN" ? 'type="hidden" value="1"' : 'type="text"'?> name="REGISTER[<?=$FIELD?>]"  />
												<?if ($FIELD == "PERSONAL_BIRTHDAY"){?>
													<?$APPLICATION->IncludeComponent(
														'bitrix:main.calendar',
														'',
														array(
															'SHOW_INPUT' => 'N',
															'FORM_NAME' => 'regform',
															'INPUT_NAME' => 'REGISTER[PERSONAL_BIRTHDAY]',
															'SHOW_TIME' => 'N'
														),
														null,
														array("HIDE_ICONS"=>"Y")
													);?>
												<?}?>
												<?break;?>
										<?}?>
										<?if( $FIELD != "LOGIN" && array_key_exists( $FIELD, $arResult["ERRORS"] ) ):?>
											<label class="error"><?=GetMessage("REGISTER_FILL_IT")?></label>
										<?endif;?>
							<?if( $FIELD != "LOGIN" ){?>
										</div>
										<div class="iblock text_block">
											<?=GetMessage("REGISTER_FIELD_TEXT_".$FIELD);?>
										</div>
									</div>
								</div>
							<?}?>
						<?endforeach?>
						<?if($arUFields){?>
							<?foreach($arUFields as $arUField){?>
								<div class="r">				
									<label><?=$arUField["EDIT_FORM_LABEL"];?>:<?if ($arUField["MANDATORY"] == "Y"):?><span class="star">*</span><?endif;?></label>
									<?$APPLICATION->IncludeComponent(
									"bitrix:system.field.edit",
									$arUField["USER_TYPE"]["USER_TYPE_ID"],
									array("bVarsFromForm" => $arResult["bVarsFromForm"], "arUserField" => $arUField, "form_name" => "regform"), null, array("HIDE_ICONS"=>"Y"));?>
								</div>
							<?}?>
						<?}?>
						<?if ($arResult["USE_CAPTCHA"] == "Y"){?>
							<div class="form-control bg register-captcha captcha-row clearfix">
								<div class="iblock label_block">
									<label><span><?=GetMessage("REGISTER_CAPTCHA_PROMT")?>&nbsp;<span class="star">*</span></span></label>
									<div class="captcha_image">
										<img src="/bitrix/tools/captcha.php?captcha_sid=<?=$arResult["CAPTCHA_CODE"]?>" border="0" />
										<input type="hidden" name="captcha_sid" value="<?=$arResult["CAPTCHA_CODE"]?>" />
										<div class="captcha_reload"><?=GetMessage("RELOAD")?></div>
									</div>
									<div class="captcha_input">
										<input type="text" class="inputtext captcha" name="captcha_word" size="30" maxlength="50" value="" required />
									</div>
								</div>
								<div class="iblock text_block"></div>
							</div>
						<?}?>
						<div class="but-r">
							<button class="button short" type="submit" name="register_submit_button1" value="<?=GetMessage("AUTH_REGISTER")?>">
								<?=GetMessage("REGISTER_REGISTER")?>
							</button>
							<?/*<div class="prompt"><span class="star">*</span> &nbsp;&mdash;&nbsp; <?=GetMessage("REQUIRED_FIELDS")?></div>*/?>
							<div class="clearboth"></div>
						</div>				
					</form>
				</div>
				<div class="social_block iblock">
					<?$APPLICATION->IncludeComponent(
						"bitrix:system.auth.form",
						"popup",
						array(
							"TITLE" => "",
							"PROFILE_URL" => $arParams["PATH_TO_PERSONAL"],
							"SHOW_ERRORS" => "Y",
							"POPUP_AUTH" => "Y"
						)
					);?>
				</div>
			</div>
		</div>
	<?}?>
</div>144  2578|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/components/bitrix/news.detail/shops/component_epilog.php|cea16070<?
$arResult['TITLE'] = (in_array('NAME', $arParams['FIELD_CODE']) ? $arResult['NAME'] : '');
$arResult['ADDRESS'] = (in_array('ADDRESS', $arParams['PROPERTY_CODE']) ? $arResult['PROPERTIES']['ADDRESS']['VALUE'] : '');
$arResult['ADDRESS'] = $arResult['TITLE'].((strlen($arResult['TITLE']) && strlen($arResult['ADDRESS'])) ? ', ' : '').$arResult['ADDRESS'];
$_SESSION['SHOP_TITLE'] = $arResult['ADDRESS'];
?>
<?$arShop=COptimus::prepareShopDetailArray($arResult, $arParams);?>
<?ob_start()?>
	<?if(abs($arShop["POINTS"]["LAT"]) > 0 && abs($arShop["POINTS"]["LON"]) > 0):?>
		<div class="contacts_map">
			<?if($arParams["MAP_TYPE"] != "0"):?>
				<?$APPLICATION->IncludeComponent(
					"bitrix:map.google.view",
					"map",
					array(
						"INIT_MAP_TYPE" => "ROADMAP",
						"MAP_DATA" => serialize(array("google_lat" => $arShop["POINTS"]["LAT"], "google_lon" => $arShop["POINTS"]["LON"], "google_scale" => 16, "PLACEMARKS" => $arShop["PLACEMARKS"])),
						"MAP_WIDTH" => "100%",
						"MAP_HEIGHT" => "400",
						"CONTROLS" => array(
						),
						"OPTIONS" => array(
							0 => "ENABLE_DBLCLICK_ZOOM",
							1 => "ENABLE_DRAGGING",
						),
						"MAP_ID" => "",
						"ZOOM_BLOCK" => array(
							"POSITION" => "right center",
						),
						"COMPONENT_TEMPLATE" => "map",
						"API_KEY" => $arParams["GOOGLE_API_KEY"],
						"COMPOSITE_FRAME_MODE" => "A",
						"COMPOSITE_FRAME_TYPE" => "AUTO"
					),
					false, array("HIDE_ICONS" =>"Y")
				);?>
			<?else:?>
				<?$APPLICATION->IncludeComponent(
					"bitrix:map.yandex.view",
					"",
					array(
						"INIT_MAP_TYPE" => "ROADMAP",
						"MAP_DATA" => serialize(array("yandex_lat" => $arShop["POINTS"]["LAT"], "yandex_lon" => $arShop["POINTS"]["LON"], "yandex_scale" => 17, "PLACEMARKS" => $arShop["PLACEMARKS"])),
						"MAP_WIDTH" => "100%",
						"MAP_HEIGHT" => "400",
						"CONTROLS" => array(
							0 => "ZOOM",
							1 => "SMALLZOOM",
							3 => "TYPECONTROL",
							4 => "SCALELINE",
						),
						"OPTIONS" => array(
							0 => "ENABLE_DBLCLICK_ZOOM",
							1 => "ENABLE_DRAGGING",
						),
						"MAP_ID" => "",
						"ZOOM_BLOCK" => array(
							"POSITION" => "right center",
						),
						"COMPONENT_TEMPLATE" => "map",
						"API_KEY" => $arParams["GOOGLE_API_KEY"],
						"COMPOSITE_FRAME_MODE" => "A",
						"COMPOSITE_FRAME_TYPE" => "AUTO"
					),
					false, array("HIDE_ICONS" =>"Y")
				);?>
			<?endif;?>
		</div>
	<?endif;?>
<?$html=ob_get_clean();?>
<?$APPLICATION->AddViewContent('map_content', $html);?>114  17826|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/js/jquery.ikSelect.min.js|97f6245b!function(t,i,e,s){function o(i,e){var s={};this.el=i,this.$el=t(i);for(var o in h)s[o]=this.$el.data(o.toLowerCase());this.options=t.extend({},h,e,s),t.browser.mobile&&(this.options.filter=!1),this.init()}var n,r=t(i),h={syntax:'<div class="ik_select_link"><div class="ik_select_link_text"></div></div><div class="ik_select_dropdown"><div class="ik_select_list"></div></div>',autoWidth:!0,ddFullWidth:!0,equalWidths:!0,dynamicWidth:!1,extractLink:!1,customClass:"",linkCustomClass:"",ddCustomClass:"",ddMaxHeight:200,filter:!1,nothingFoundText:"Nothing found",isDisabled:!1,onInit:function(){},onShow:function(){},onHide:function(){},onKeyUp:function(){},onKeyDown:function(){},onHoverMove:function(){}},l=function(t){t=t.toLowerCase();var i=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:i[1]||"",version:i[2]||"0"}};if(!t.browser){var p=l(navigator.userAgent),a={};p.browser&&(a[p.browser]=!0,a.version=p.version),a.chrome?a.webkit=!0:a.webkit&&(a.safari=!0),t.browser=a}t.browser.mobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile/i.test(navigator.userAgent),t.browser.operamini="[object OperaMini]"===Object.prototype.toString.call(i.operamini),t.extend(o.prototype,{init:function(){this.$wrapper=t('<div class="ik_select">'+this.options.syntax+"</div>"),this.$link=t(".ik_select_link",this.$wrapper),this.$linkText=t(".ik_select_link_text",this.$wrapper),this.$dropdown=t(".ik_select_dropdown",this.$wrapper),this.$list=t(".ik_select_list",this.$wrapper),this.$listInner=t('<div class="ik_select_list_inner"/>'),this.$active=t([]),this.$hover=t([]),this.hoverIndex=0,this.$optionSet=t([]),this.$optgroupSet=t([]),this.$list.append(this.$listInner),this.options.filter&&(this.$filter=t([]),this.$optionSetOriginal=t([]),this.$nothingFoundText=t('<div class="ik_select_nothing_found"/>').html(this.options.nothingFoundText),this.$filterWrap=t(".ik_select_filter_wrap",this.$wrapper),this.$filterWrap.length||(this.$filterWrap=t('<div class="ik_select_filter_wrap"/>')),this.$filter=t('<input type="text" class="ik_select_filter">'),this.$filterWrap.append(this.$filter),this.$list.prepend(this.$filterWrap),this.$filter.on({"keydown.ikSelect keyup.ikSelect":t.proxy(this,"_elKeyUpDown"),"keyup.ikSelect":t.proxy(this,"_filterKeyup")})),this.$wrapper.addClass(this.options.customClass),this.$link.addClass(this.options.linkCustomClass||this.options.customClass&&this.options.customClass+"-link"),this.$dropdown.addClass(this.options.ddCustomClass||this.options.customClass&&this.options.customClass+"-dd"),this.reset(),this.toggle(!(this.options.isDisabled||this.$el.prop("disabled")||this.$el.hasClass("hidden"))),this.$link.on("click.ikSelect",t.proxy(this,"_linkClick")),this.$el.on({"focus.ikSelect":t.proxy(this,"_elFocus"),"blur.ikSelect":t.proxy(this,"_elBlur"),"change.ikSelect":t.proxy(this,"_syncOriginalOption"),"keydown.ikSelect keyup.ikSelect":t.proxy(this,"_elKeyUpDown")}),this.$list.on({"click.ikSelect":t.proxy(this,"_optionClick"),"mouseover.ikSelect":t.proxy(this,"_optionMouseover")},".ik_select_option"),this.$wrapper.on("click",function(){return!1}),this.$el.after(this.$wrapper),this.redraw(),this.$el.appendTo(this.$wrapper),this.options.onInit(this),this.$el.trigger("ikinit",this)},_linkClick:function(){this.isDisabled||(this===n?this.hideDropdown():this.showDropdown())},_optionClick:function(){this._makeOptionActive(this.searchIndexes?this.$optionSetOriginal.index(this.$hover):this.hoverIndex,!0),this.hideDropdown(),this.$el.change().focus()},_optionMouseover:function(i){var e=t(i.currentTarget);e.hasClass("ik_select_option_disabled")||(this.$hover.removeClass("ik_select_hover"),this.$hover=e.addClass("ik_select_hover"),this.hoverIndex=this.$optionSet.index(this.$hover))},_makeOptionActive:function(i,e){var s=t(this.el.options[i]),o="";s.data("img_src")&&(o+='<span class="icon_color" style="background: url('+s.data("img_src")+')"></span>',this.$link.addClass("img")),s.attr("title")&&this.$link.attr("title",s.attr("title")),o+=s.text(),this.$linkText.html(o),this.$link.toggleClass("ik_select_link_novalue",!s.attr("value")),this.$hover.removeClass("ik_select_hover"),this.$active.removeClass("ik_select_active"),this.$hover=this.$active=this.$optionSet.eq(i).addClass("ik_select_hover ik_select_active"),this.hoverIndex=i,e&&this._syncFakeOption()},_elKeyUpDown:function(i){var e,s=t(i.currentTarget),o=i.type,n=i.which;switch(n){case 38:"keydown"===o&&(i.preventDefault(),this._moveToPrevActive());break;case 40:"keydown"===o&&(i.preventDefault(),this._moveToNextActive());break;case 33:"keydown"===o&&(i.preventDefault(),e=this.$hover.position().top-this.$listInner.height(),this._moveToPrevActive(function(t){return e>=t}));break;case 34:"keydown"===o&&(i.preventDefault(),e=this.$hover.position().top+this.$listInner.height(),this._moveToNextActive(function(t){return t>=e}));break;case 36:"keydown"===o&&s.is(this.$el)&&(i.preventDefault(),this._moveToFirstActive());break;case 35:"keydown"===o&&s.is(this.$el)&&(i.preventDefault(),this._moveToLastActive());break;case 32:"keydown"===o&&s.is(this.$el)&&(i.preventDefault(),this.$dropdown.is(":visible")?this.$hover.click():this._linkClick());break;case 13:"keydown"===o&&this.$dropdown.is(":visible")&&(i.preventDefault(),this.$hover.click());break;case 27:"keydown"===o&&this.$dropdown.is(":visible")&&(i.preventDefault(),this.hideDropdown());break;case 9:"keydown"===o&&(t.browser.webkit&&this.$dropdown.is(":visible")?i.preventDefault():this.hideDropdown());break;default:"keyup"===o&&s.is(this.$el)&&this._syncOriginalOption()}"keyup"===o&&t.browser.mozilla&&this._syncFakeOption(),"keydown"===o&&(this.options.onKeyDown(this,n),this.$el.trigger("ikkeydown",[this,n])),"keyup"===o&&(this.options.onKeyUp(this,n),this.$el.trigger("ikkeyup",[this,n]))},_moveTo:function(i){var e,s,o;return!this.$dropdown.is(":visible")&&t.browser.webkit?(this.showDropdown(),this):(!this.$dropdown.is(":visible")||t.browser.mozilla?this._makeOptionActive(i,!0):(this.$hover.removeClass("ik_select_hover"),this.$hover=this.$optionSet.eq(i).addClass("ik_select_hover"),this.hoverIndex=i),e=this.$hover.position().top,s=e+this.$active.outerHeight(),this.$hover.index()||(o=this.$hover.closest(".ik_select_optgroup"),o.length&&(e=o.position().top)),s>this.$listInner.height()?this.$listInner.scrollTop(this.$listInner.scrollTop()+s-this.$listInner.height()):0>e&&this.$listInner.scrollTop(this.$listInner.scrollTop()+e),this.options.onHoverMove(this),void this.$el.trigger("ikhovermove",this))},_moveToFirstActive:function(){for(var t=0;t<this.$optionSet.length;t++)if(!this.$optionSet.eq(t).hasClass("ik_select_option_disabled")){this._moveTo(t);break}},_moveToLastActive:function(){for(var t=this.$optionSet.length-1;t>=0;t++)if(!this.$optionSet.eq(t).hasClass("ik_select_option_disabled")){this._moveTo(t);break}},_moveToPrevActive:function(t){for(var i,e=this.hoverIndex-1;e>=0;e--)if(i=this.$optionSet.eq(e),!i.hasClass("ik_select_option_disabled")&&("undefined"==typeof t||t(i.position().top))){this._moveTo(e);break}},_moveToNextActive:function(t){for(var i,e=this.hoverIndex+1;e<this.$optionSet.length;e++)if(i=this.$optionSet.eq(e),!i.hasClass("ik_select_option_disabled")&&("undefined"==typeof t||t(i.position().top))){this._moveTo(e);break}},_elFocus:function(){var t,i,e,s;return this.isDisabled?this:(this.$link.addClass("ik_select_link_focus"),t=this.$wrapper.offset().top,i=this.$wrapper.height(),e=r.scrollTop(),s=r.height(),void((t+i>e+s||e>t)&&r.scrollTop(t-s/2)))},_elBlur:function(){this.$link.removeClass("ik_select_link_focus")},_filterKeyup:function(){var i,e=t.trim(this.$filter.val());this.$listInner.show(),"undefined"==typeof this.searchIndexes&&(this.$optionSetOriginal=this.$optionSet,this.searchIndexes=t.makeArray(this.$optionSet.map(function(i,e){return t(e).text().toLowerCase()}))),e!==i&&(""===e?(this.$optionSet=this.$optionSetOriginal.show(),this.$optgroupSet.show(),this.$nothingFoundText.remove()):(this.$optionSet=t([]),this.$optgroupSet.show(),this.$optionSetOriginal.each(t.proxy(function(i,s){var o=t(s);this.searchIndexes[i].indexOf(e.toLowerCase())>=0?(this.$optionSet=this.$optionSet.add(o),o.show()):o.hide()},this)),this.$optionSet.length?(this.$nothingFoundText.remove(),this.$optgroupSet.each(function(i,e){var s=t(e);t(".ik_select_option:visible",s).length||s.hide()}),this.$hover.is(":visible")||this._moveToFirstActive()):(this.$listInner.hide(),this.$list.append(this.$nothingFoundText))),i=e)},_syncFakeOption:function(){this.el.selectedIndex=this.hoverIndex},_syncOriginalOption:function(){this._makeOptionActive(this.el.selectedIndex)},_fixHeight:function(){this.$dropdown.show(),this.$listInner.css("height","auto"),this.$listInner.height()>this.options.ddMaxHeight&&this.$listInner.css({overflow:"auto",height:this.options.ddMaxHeight,position:"relative"}),this.$dropdown.hide()},redraw:function(){var i,e,s;this.options.filter&&this.$filter.hide(),this.$wrapper.css({position:"relative"}),this.$dropdown.css({position:"absolute",zIndex:9998,width:"100%"}),this.$list.css({position:"relative"}),this._fixHeight(),(this.options.dynamicWidth||this.options.autoWidth||this.options.ddFullWidth)&&(this.$wrapper.width(""),this.$dropdown.show().width(9999),this.$listInner.css("float","left"),this.$list.css("float","left"),i=this.$list.outerWidth(!0),e=this.$listInner.width()-this.$listInnerUl.width(),this.$list.css("float",""),this.$listInner.css("float",""),this.$dropdown.css("width","100%"),this.options.ddFullWidth&&this.$dropdown.width(i+e),this.options.dynamicWidth?this.$wrapper.css({display:"inline-block",width:"auto",verticalAlign:"top"}):this.options.autoWidth&&this.$wrapper.width(i+(this.options.equalWidths?e:0)).addClass("ik_select_autowidth"),s=this.$wrapper.parent().width(),this.$wrapper.width()>s&&this.$wrapper.width(s)),this.options.filter&&this.$filter.show().outerWidth(this.$filterWrap.width()),this.$dropdown.hide(),this.$el.css({position:"absolute",margin:0,padding:0,top:0,left:-9999}),t.browser.mobile&&this.$el.css({opacity:0,left:0,height:this.$wrapper.height(),width:this.$wrapper.width()})},reset:function(){var i="";this.$linkText.html(this.$el.val()),this.$listInner.empty(),i="<ul>",this.$el.children().each(t.proxy(function(e,s){var o,n=t(s),r=s.tagName.toLowerCase();"optgroup"===r?(o=n.children().map(t.proxy(function(i,e){return this._generateOptionObject(t(e))},this)),o=t.makeArray(o),i+=this._renderListOptgroup({label:n.attr("label")||"&nbsp;",isDisabled:n.is(":disabled"),options:o})):"option"===r&&(i+=this._renderListOption(this._generateOptionObject(n)))},this)),i+="</ul>",this.$listInner.append(i),this._syncOriginalOption(),this.$listInnerUl=t("> ul",this.$listInner),this.$optgroupSet=t(".ik_select_optgroup",this.$listInner),this.$optionSet=t(".ik_select_option",this.$listInner)},hideDropdown:function(){this.options.filter&&(this.$filter.val(""),this._filterKeyup()),this.$dropdown.hide().appendTo(this.$wrapper).css({left:"",top:""}),this.options.extractLink&&(this.$wrapper.outerWidth(this.$wrapper.data("outerWidth")),this.$wrapper.height(""),this.$link.removeClass("ik_select_link_extracted").css({position:"",top:"",left:"",zIndex:""}).prependTo(this.$wrapper)),n=null,this.$el.focus(),this.options.onHide(this),this.$el.trigger("ikhide",this)},showDropdown:function(){var i,e,s,o,h,l,p,a,d;n!==this&&this.$optionSet.length&&(n&&n.hideDropdown(),this._syncOriginalOption(),t(".show_un_props").length?this.$dropdown.addClass("show_un_props"):t(".unshow_un_props").length&&this.$dropdown.addClass("unshow_un_props"),this.$dropdown.show(),i=this.$dropdown.offset(),e=this.$dropdown.outerWidth(!0),s=this.$dropdown.outerHeight(!0),o=this.$wrapper.offset(),l=r.width(),p=r.height(),a=r.scrollTop(),this.options.ddFullWidth&&o.left+e>l&&(i.left=l-e),i.top+s>a+p&&(i.top=a+p-s),this.$dropdown.css({left:i.left,top:i.top,width:this.$dropdown.width()}).appendTo("body"),this.options.extractLink&&(d=this.$link.offset(),h=this.$wrapper.outerWidth(),this.$wrapper.data("outerWidth",h),this.$wrapper.outerWidth(h),this.$wrapper.outerHeight(this.$wrapper.outerHeight()),this.$link.outerWidth(this.$link.outerWidth()),this.$link.addClass("ik_select_link_extracted").css({position:"absolute",top:d.top,left:d.left,zIndex:9999}).appendTo("body")),this.$listInner.scrollTop(this.$active.position().top-this.$list.height()/2),this.options.filter?this.$filter.focus():this.$el.focus(),n=this,this.options.onShow(this),this.$el.trigger("ikshow",this))},_generateOptionObject:function(t){return{value:t.val(),label:t.html()||"&nbsp;",isDisabled:t.is(":disabled"),dataParam:t.data(),className:t.attr("class"),title:t.attr("title")}},_renderListOption:function(t){var i,e=t.isDisabled?" ik_select_option_disabled":"",s=t.dataParam.img_src?" img":"",o="hidden"==t.className?" missing":"",n=t.title;return i='<li class="ik_select_option'+e+s+o+'" title="'+n+'" data-value="'+t.value+'">',i+='<span class="ik_select_option_label" title="'+n+'">',t.dataParam.img_src&&(i+='<span class="icon_color" style="background: url('+t.dataParam.img_src+')"></span>'),i+=t.label,i+="</span>",i+="</li>"},_renderListOptgroup:function(i){var e,s=i.isDisabled?" ik_select_optgroup_disabled":"";return e='<li class="ik_select_optgroup'+s+'">',e+='<div class="ik_select_optgroup_label">'+i.label+"</div>",e+="<ul>",t.isArray(i.options)&&t.each(i.options,t.proxy(function(t,i){e+=this._renderListOption({value:i.value,label:i.label||"&nbsp;",isDisabled:i.isDisabled})},this)),e+="</ul>",e+="</li>"},_renderOption:function(t){return'<option value="'+t.value+'">'+t.label+"</option>"},_renderOptgroup:function(i){var e;return e='<optgroup label="'+i.label+'">',t.isArray(i.options)&&t.each(i.options,t.proxy(function(t,i){e+=this._renderOption(i)},this)),e+="</option>"},addOptions:function(i,e,s){var o,n,r="",h="",l=this.$listInnerUl,p=this.$el;i=t.isArray(i)?i:[i],t.each(i,t.proxy(function(t,i){r+=this._renderListOption(i),h+=this._renderOption(i)},this)),t.isNumeric(s)&&s<this.$optgroupSet.length&&(l=this.$optgroupSet.eq(s),p=t("optgroup",this.$el).eq(s)),t.isNumeric(e)&&(o=t(".ik_select_option",l),e<o.length&&(o.eq(e).before(r),n=t("option",p),n.eq(e).before(h))),n||(l.append(r),p.append(h)),this.$optionSet=t(".ik_select_option",this.$listInner),this._fixHeight()},addOptgroups:function(i,e){var s="",o="";i&&(i=t.isArray(i)?i:[i],t.each(i,t.proxy(function(t,i){s+=this._renderListOptgroup(i),o+=this._renderOptgroup(i)},this)),t.isNumeric(e)&&e<this.$optgroupSet.length?(this.$optgroupSet.eq(e).before(s),t("optgroup",this.$el).eq(e).before(o)):(this.$listInnerUl.append(s),this.$el.append(o)),this.$optgroupSet=t(".ik_select_optgroup",this.$listInner),this.$optionSet=t(".ik_select_option",this.$listInner),this._fixHeight())},removeOptions:function(i,e){var s,o,n=t([]);t.isNumeric(e)&&(0>e?(s=t("> .ik_select_option",this.$listInnerUl),o=t("> option",this.$el)):e<this.$optgroupSet.length&&(s=t(".ik_select_option",this.$optgroupSet.eq(e)),o=t("optgroup",this.$el).eq(e).find("option"))),s||(s=this.$optionSet,o=t(this.el.options)),t.isArray(i)||(i=[i]),t.each(i,t.proxy(function(t,i){i<s.length&&(n=n.add(s.eq(i)).add(o.eq(i)))},this)),n.remove(),this.$optionSet=t(".ik_select_option",this.$listInner),this._syncOriginalOption(),this._fixHeight()},removeOptgroups:function(i){var e=t([]),s=t("optgroup",this.el);t.isArray(i)||(i=[i]),t.each(i,t.proxy(function(t,i){i<this.$optgroupSet.length&&(e=e.add(this.$optgroupSet.eq(i)).add(s.eq(i)))},this)),e.remove(),this.$optionSet=t(".ik_select_option",this.$listInner),this.$optgroupSet=t(".ik_select_optgroup",this.$listInner),this._syncOriginalOption(),this._fixHeight()},disable:function(){this.toggle(!1)},enable:function(){this.toggle(!0)},toggle:function(t){this.isDisabled="undefined"!=typeof t?!t:!this.isDisabled,this.$el.prop("disabled",this.isDisabled),this.$link.toggleClass("ik_select_link_disabled",this.isDisabled)},select:function(t,i){i?this.el.selectedIndex=t:this.$el.val(t),this._syncOriginalOption()},disableOptgroups:function(t){this.toggleOptgroups(t,!1)},enableOptgroups:function(t){this.toggleOptgroups(t,!0)},toggleOptgroups:function(i,e){t.isArray(i)||(i=[i]),t.each(i,t.proxy(function(i,s){var o,n,r,h=[],l=t("optgroup",this.$el).eq(s);o="undefined"!=typeof e?e:l.prop("disabled"),l.prop("disabled",!o),this.$optgroupSet.eq(s).toggleClass("ik_select_optgroup_disabled",!o),n=t("option",l),r=t(this.el.options).index(n.eq(0));for(var p=r;p<r+n.length;p++)h.push(p);this.toggleOptions(h,!0,o)},this)),this._syncOriginalOption()},disableOptions:function(t,i){this.toggleOptions(t,i,!1)},enableOptions:function(t,i){this.toggleOptions(t,i,!0)},toggleOptions:function(i,e,s){var o=t("option",this.el);t.isArray(i)||(i=[i]);var n=t.proxy(function(t,i){var e="undefined"!=typeof s?s:t.prop("disabled");t.prop("disabled",!e),this.$optionSet.eq(i).toggleClass("ik_select_option_disabled",!e)},this);t.each(i,function(i,s){e?n(o.eq(s),s):o.each(function(i,e){var o=t(e);return o.val()===s?(n(o,i),this):void 0})}),this._syncOriginalOption()},detach:function(){this.$el.off(".ikSelect").css({width:"",height:"",left:"",top:"",position:"",margin:"",padding:""}),this.$wrapper.before(this.$el),this.$wrapper.remove(),this.$el.removeData("plugin_ikSelect")}}),t.fn.ikSelect=function(i){var e;return t.browser.operamini?this:(e=Array.prototype.slice.call(arguments,1),this.each(function(){var s;t.data(this,"plugin_ikSelect")?"string"==typeof i&&(s=t.data(this,"plugin_ikSelect"),"function"==typeof s[i]&&s[i].apply(s,e)):t.data(this,"plugin_ikSelect",new o(this,i))}))},t.ikSelect={extendDefaults:function(i){t.extend(h,i)}},t(e).bind("click.ikSelect",function(){n&&n.hideDropdown()})}(jQuery,window,document);103  78372|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/js/main.min.js|8cf0dbb5function setLocationSKU(t){var e=parseUrlQuery(),a=0,i="",o="",s="";if("oid"in e&&parseInt(e.oid)>0){e.oid=t;for(var n in e)parseInt(a)>0&&(i="&"),o=o+i+n+"="+e[n],a++;o&&(s=location.pathname+"?"+o);try{return void history.pushState(null,null,s)}catch(r){}location.hash="#"+s.substr(1)}}function clearViewedProduct(){try{var t=arOptimusOptions.SITE_ID,e="OPTIMUS_VIEWED_ITEMS_"+t,a={path:"/",expires:30};"undefined"!=typeof BX.localStorage&&BX.localStorage.set(e,{},0),$.removeCookie(e,a)}catch(i){console.error(i)}}function setViewedProduct(t,e){try{var a=$.cookie.json;$.cookie.json=!0;var i=arOptimusOptions.SITE_ID,o="OPTIMUS_VIEWED_ITEMS_"+i,s={path:"/",expires:30};if("undefined"!=typeof BX.localStorage&&"undefined"!=typeof t&&"undefined"!=typeof e){var n="undefined"!=typeof e.PRODUCT_ID?e.PRODUCT_ID:t,r=BX.localStorage.get(o)?BX.localStorage.get(o):{},c=$.cookie(o)?$.cookie(o):{},l=0;for(var d in r)r[d].IS_LAST=!1,"undefined"==typeof c[d]&&delete r[d];for(var d in c)"undefined"==typeof r[d]&&delete c[d];for(var d in c)l++;"undefined"!=typeof r[n]&&r[n].ID!=t&&(delete r[n],delete c[n]),delete r[2243],delete c[2243];var u=(new Date).getTime();e.ID=t,e.ACTIVE_FROM=u,e.IS_LAST=!0,r[n]=e,c[n]=[u.toString(),e.PICTURE_ID],$.cookie(o,c,s),BX.localStorage.set(o,r,2592e3)}}catch(p){console.error(p)}finally{$.cookie.json=a}}function initSelects(t){var e=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1;if(!e&&!$("#bx-soa-order").length){$(t).find(".wrapper select:visible").ikSelect({syntax:'<div class="ik_select_link"> 						<span class="ik_select_link_text"></span> 						<div class="trigger"></div> 					</div> 					<div class="ik_select_dropdown"> 						<div class="ik_select_list"> 						</div> 					</div>',dynamicWidth:!0,ddMaxHeight:112,customClass:"common_select",onShow:function(t){t.$dropdown.css("top",parseFloat(t.$dropdown.css("top"))-5+"px"),t.$dropdown.outerWidth()<t.$link.outerWidth()&&t.$dropdown.css("width",t.$link.outerWidth()),t.$dropdown.outerWidth()>t.$link.outerWidth()&&t.$dropdown.css("width",t.$link.outerWidth());var e=0,a=0;t.$dropdown.css("left",t.$link.offset().left),$(t.$listInnerUl).find("li").each(function(){$(this).hasClass("ik_select_option_disabled")||(++e,a+=$(this).outerHeight())}),112>a?t.$listInner.css("height","auto"):t.$listInner.css("height","112px"),t.$link.addClass("opened"),t.$listInner.addClass("scroller")},onHide:function(t){t.$link.removeClass("opened")}});var a;$(window).on("resize",function(){clearTimeout(a),a=setTimeout(function(){var t="";(t=$(".common_select-link.opened + select").ikSelect().data("plugin_ikSelect"))&&t.$dropdown.css("left",t.$link.offset().left+"px")},20)})}}function initHoverBlock(t){$(t).find(".catalog_item.item_wrap").on("mouseenter",function(){$(this).addClass("hover")}),$(t).find(".catalog_item.item_wrap").on("mouseleave",function(){$(this).removeClass("hover")})}function setStatusButton(){$.ajax({url:arOptimusOptions.SITE_DIR+"ajax/getAjaxBasket.php",type:"POST",success:function(t){if(t.BASKET)for(var e in t.BASKET)$(".to-cart[data-item="+t.BASKET[e]+"]").hide(),$(".counter_block[data-item="+t.BASKET[e]+"]").hide(),$(".in-cart[data-item="+t.BASKET[e]+"]").show(),$(".in-cart[data-item="+t.BASKET[e]+"]").closest(".button_block").addClass("wide");if(t.DELAY)for(var e in t.DELAY)$(".wish_item.to[data-item="+t.DELAY[e]+"]").hide(),$(".wish_item.in[data-item="+t.DELAY[e]+"]").show(),$(".wish_item[data-item="+t.DELAY[e]+"]").find(".value.added").length&&($(".wish_item[data-item="+t.DELAY[e]+"]").addClass("added"),$(".wish_item[data-item="+t.DELAY[e]+"]").find(".value").hide(),$(".wish_item[data-item="+t.DELAY[e]+"]").find(".value.added").show());if(t.SUBSCRIBE)for(var e in t.SUBSCRIBE)$(".to-subscribe[data-item="+t.SUBSCRIBE[e]+"]").hide(),$(".in-subscribe[data-item="+t.SUBSCRIBE[e]+"]").show();if(t.COMPARE)for(var e in t.COMPARE)$(".compare_item.to[data-item="+t.COMPARE[e]+"]").hide(),$(".compare_item.in[data-item="+t.COMPARE[e]+"]").show(),$(".compare_item[data-item="+t.COMPARE[e]+"]").find(".value.added").length&&($(".compare_item[data-item="+t.COMPARE[e]+"]").find(".value").hide(),$(".compare_item[data-item="+t.COMPARE[e]+"]").find(".value.added").show())}})}function scroll_block(t){var e=t.offset().top;$("header").outerHeight(!0,!0);if($(".stores_tab").length)$(".stores_tab").addClass("current").siblings().removeClass("current");else if($(".prices_tab").addClass("current").siblings().removeClass("current"),$(".prices_tab .opener").length&&!$(".prices_tab .opener .opened").length){var a=$(".prices_tab .opener").first();a.find(".opener_icon").addClass("opened"),a.parents("tr").addClass("nb"),a.parents("tr").next(".offer_stores").find(".stores_block_wrap").slideDown(200)}$("html,body").animate({scrollTop:e-30},150)}function replaceBasketPopup(t){"undefined"!=typeof t&&(t.w.hide(),t.o.hide())}function waitLayer(t,e){"undefined"!=typeof dataLayer&&"function"==typeof e?e():setTimeout(function(){waitLayer(t,e)},t)}function checkCounters(t){return"undefined"!=typeof t?"google"==t&&"Y"==arOptimusOptions.COUNTERS.GOOGLE_ECOMERCE&&arOptimusOptions.COUNTERS.GOOGLE_COUNTER>0?!0:"yandex"==t&&"Y"==arOptimusOptions.COUNTERS.YANDEX_ECOMERCE&&arOptimusOptions.COUNTERS.YANDEX_COUNTER>0?!0:!1:"Y"==arOptimusOptions.COUNTERS.YANDEX_ECOMERCE&&arOptimusOptions.COUNTERS.YANDEX_COUNTER>0||"Y"==arOptimusOptions.COUNTERS.GOOGLE_ECOMERCE&&arOptimusOptions.COUNTERS.GOOGLE_COUNTER>0?!0:!1}function addBasketCounter(t){checkCounters()&&$.ajax({url:arOptimusOptions.SITE_DIR+"ajax/goals.php",dataType:"json",type:"POST",data:{ID:t},success:function(t){t&&t.ID&&waitLayer(100,function(){dataLayer.push({event:arOptimusOptions.COUNTERS.GOOGLE_EVENTS.ADD2BASKET,ecommerce:{currencyCode:t.CURRENCY,add:{products:[{id:t.ID,name:t.NAME,price:t.PRICE,brand:t.BRAND,category:t.CATEGORY,quantity:t.QUANTITY}]}}})})}})}function purchaseCounter(t,e){checkCounters()&&$.ajax({url:arOptimusOptions.SITE_DIR+"ajax/goals.php",dataType:"json",type:"POST",data:{ORDER_ID:t,TYPE:e},success:function(t){var a=[];if(t.ITEMS)for(var i in t.ITEMS)a.push({id:t.ITEMS[i].ID,sku:t.ITEMS[i].ID,name:t.ITEMS[i].NAME,price:t.ITEMS[i].PRICE,brand:t.ITEMS[i].BRAND,category:t.ITEMS[i].CATEGORY,quantity:t.ITEMS[i].QUANTITY});t.ID&&waitLayer(100,function(){dataLayer.push({ecommerce:{purchase:{actionField:{id:t.ACCOUNT_NUMBER,shipping:t.PRICE_DELIVERY,tax:t.TAX_VALUE,list:e,revenue:t.PRICE},products:a}}})})}})}function viewItemCounter(t,e){checkCounters()&&$.ajax({url:arOptimusOptions.SITE_DIR+"ajax/goals.php",dataType:"json",type:"POST",data:{PRODUCT_ID:t,PRICE_ID:e},success:function(t){t.ID&&waitLayer(100,function(){dataLayer.push({ecommerce:{detail:{products:[{id:t.ID,name:t.NAME,price:t.PRICE,brand:t.BRAND,category:t.CATEGORY}]}}})})}})}function checkoutCounter(t,e,a){checkCounters("google")&&$.ajax({url:arOptimusOptions.SITE_DIR+"ajax/goals.php",dataType:"json",type:"POST",data:{BASKET:"Y"},success:function(a){var i=[];if(a.ITEMS)for(var o in a.ITEMS)i.push({id:a.ITEMS[o].ID,name:a.ITEMS[o].NAME,price:a.ITEMS[o].PRICE,brand:a.ITEMS[o].BRAND,category:a.ITEMS[o].CATEGORY,quantity:a.ITEMS[o].QUANTITY});i&&waitLayer(100,function(){dataLayer.push({event:arOptimusOptions.COUNTERS.GOOGLE_EVENTS.CHECKOUT_ORDER,ecommerce:{actionField:{step:t,option:e},products:i}})})}})}function delFromBasketCounter(t,e){checkCounters()&&$.ajax({url:arOptimusOptions.SITE_DIR+"ajax/goals.php",dataType:"json",type:"POST",data:{ID:t},success:function(t){t.ID&&waitLayer(100,function(){dataLayer.push({event:arOptimusOptions.COUNTERS.GOOGLE_EVENTS.REMOVE_BASKET,ecommerce:{remove:{products:[{id:t.ID,name:t.NAME,category:t.CATEGORY}]}}}),"function"==typeof e&&e()})}})}function setHeightCompany(){$(".md-50.img").height($(".md-50.big").outerHeight()-35)}function initSly(){var t=$(document).find(".frame"),e=(t.children("ul").eq(0),t.parent());arOptimusOptions.PAGES.CATALOG_PAGE&&(t.sly({horizontal:1,itemNav:"basic",smart:1,mouseDragging:0,touchDragging:0,releaseSwing:0,startAt:0,scrollBar:e.find(".scrollbar"),scrollBy:1,speed:300,elasticBounds:0,easing:"swing",dragHandle:1,dynamicHandle:1,clickBar:1,forward:e.find(".forward"),backward:e.find(".backward")}),t.sly("reload"))}function createTableCompare(t,e,a){try{var i=t.clone().removeAttr("id").addClass("clone");a.length?(a.remove(),e.html(""),e.html(i)):e.append(i)}catch(o){}finally{}}function isRealValue(t){return t&&"null"!==t&&"undefined"!==t}function rightScroll(t,e){var a=BX("prop_"+t+"_"+e);if(a){var i=parseInt(a.style.marginLeft);i>=0&&(a.style.marginLeft=i-20+"%")}}function leftScroll(t,e){var a=BX("prop_"+t+"_"+e);if(a){var i=parseInt(a.style.marginLeft);0>i&&(a.style.marginLeft=i+20+"%")}}function touchMenu(t){$(window).outerWidth()>600?$(t).each(function(){var t=$(this);t.on("touchend",function(e){t.find(".child").length&&!t.hasClass("hover")&&(e.preventDefault(),e.stopPropagation(),t.siblings().removeClass("hover"),t.addClass("hover"),$(".menu .child").css({display:"none"}),t.find(".child").css({display:"block"}))})}):$(t).off()}function touchItemBlock(t){$(t).each(function(){var t=$(this),e=t.closest(".catalog_item");t.on("touchend",function(a){if(!e.hasClass("hover")){a.preventDefault(),a.stopPropagation(),e.siblings().removeClass("hover"),e.siblings().blur(),e.closest(".catalog_block").find(".catalog_item").removeClass("hover"),e.addClass("hover"),e.addClass("touch");var i=1*t.closest(".tab").attr("data-hover"),o=1*t.closest(".tab").attr("data-unhover");t.closest(".tab").stop().animate({height:o},100),t.closest(".catalog_item").siblings().find(".buttons_block").stop().fadeOut(233),t.closest(".tab").fadeTo(100,1),t.closest(".tab").stop().css({height:i}),t.closest(".catalog_item").find(".buttons_block").fadeIn(450,"easeOutCirc")}})})}function touchBasket(t){"N"!==arOptimusOptions.THEME.SHOW_BASKET_ONADDTOCART&&($(window).outerWidth()>600?$(document).find(t).on("touchend",function(t){$(this).parent().find(".basket_popup_wrapp").length&&!$(this).hasClass("hover")&&(t.preventDefault(),t.stopPropagation(),$(this).addClass("hover"),$(this).parent().find(".basket_popup_wrapp").slideDown())}):$(t).off())}function initFull(){initSelects(document),initHoverBlock(document),touchItemBlock(".catalog_item a"),InitOrderCustom(),$("html.print").length?window.print():checkStickyFooter(),basketActions(),orderActions()}var basketTimeoutSlide,resizeEventTimer,funcDefined=function(t){try{return"function"==typeof t?!0:"function"==typeof window[t]}catch(e){return!1}};if(!funcDefined("setLocationSKU"),!funcDefined("trimPrice"))var trimPrice=function(t){return t=t.split(" ").join(""),t=t.split("&nbsp;").join("")};if(!funcDefined("markProductRemoveBasket"))var markProductRemoveBasket=function(t){$(".in-cart[data-item="+t+"]").hide(),$(".to-cart[data-item="+t+"]").show(),$(".to-cart[data-item="+t+"]").closest(".button_block").removeClass("wide"),$(".to-cart[data-item="+t+"]").closest(".counter_wrapp").find(".counter_block").show(),$(".counter_block[data-item="+t+"]").show(),$(".in-subscribe[data-item="+t+"]").hide(),$(".to-subscribe[data-item="+t+"]").show(),$(".wish_item[data-item="+t+"]").removeClass("added"),$(".wish_item[data-item="+t+"] .value:not(.added)").show(),$(".wish_item[data-item="+t+"] .value.added").hide()};if(!funcDefined("markProductAddBasket"))var markProductAddBasket=function(t){$(".to-cart[data-item="+t+"]").hide(),$(".to-cart[data-item="+t+"]").closest(".counter_wrapp").find(".counter_block").hide(),$(".to-cart[data-item="+t+"]").closest(".button_block").addClass("wide"),$(".in-cart[data-item="+t+"]").show(),$(".wish_item[data-item="+t+"]").removeClass("added"),$(".wish_item[data-item="+t+"] .value:not(.added)").show(),$(".wish_item[data-item="+t+"] .value.added").hide()};if(!funcDefined("markProductDelay"))var markProductDelay=function(t){$(".in-cart[data-item="+t+"]").hide(),$(".to-cart[data-item="+t+"]").show(),$(".to-cart[data-item="+t+"]").closest(".counter_wrapp").find(".counter_block").show(),$(".to-cart[data-item="+t+"]").closest(".button_block").removeClass("wide"),$(".wish_item[data-item="+t+"]").addClass("added"),$(".wish_item[data-item="+t+"] .value:not(.added)").hide(),$(".wish_item[data-item="+t+"] .value.added").css("display","block")};if(!funcDefined("markProductSubscribe"))var markProductSubscribe=function(t){$(".to-subscribe[data-item="+t+"]").hide(),$(".in-subscribe[data-item="+t+"]").css("display","block")};if(!funcDefined("basketFly"))var basketFly=function(t){$.post(arOptimusOptions.SITE_DIR+"ajax/basket_fly.php","PARAMS="+$("#basket_form").find("input#fly_basket_params").val(),$.proxy(function(e){var a=$(".opener .basket_count").hasClass("small");$(e).find(".basket_count").find(".items div").text();$("#basket_line .basket_fly").addClass("loaded").html(e),"refresh"==t&&$("li[data-type=AnDelCanBuy]").trigger("click"),window.matchMedia("(min-width: 769px)").matches&&("open"==t?a?"N"!==arOptimusOptions.THEME.SHOW_BASKET_ONADDTOCART&&$(".opener .basket_count").click():($(".opener .basket_count").removeClass("small"),$('.tabs_content.basket li[item-section="AnDelCanBuy"]').addClass("cur"),$('#basket_line ul.tabs li[item-section="AnDelCanBuy"]').addClass("cur")):"wish"==t?a?"N"!==arOptimusOptions.THEME.SHOW_BASKET_ONADDTOCART&&$(".opener .wish_count").click():($(".opener .wish_count").removeClass("small"),$('.tabs_content.basket li[item-section="DelDelCanBuy"]').addClass("cur"),$('#basket_line ul.tabs li[item-section="DelDelCanBuy"]').addClass("cur")):"N"!==arOptimusOptions.THEME.SHOW_BASKET_ONADDTOCART&&$(".opener .basket_count").click())}))};if(!funcDefined("clearViewedProduct"),!funcDefined("setViewedProduct"),!funcDefined("initSelects"),funcDefined("CheckTopMenuFullCatalogSubmenu")||(CheckTopMenuFullCatalogSubmenu=function(){var t=$(".menu_top_block"),e=t.parents(".wrap_menu"),a=e.actual("outerWidth"),i=e.offset().left,o=i+a,s=t.hasClass("catalogfirst"),n=$(".menu_top_block:visible li.full"),r=t.actual("outerWidth");$(".catalog_block.menu_top_block").length&&$(".catalog_block.menu_top_block").is(":visible")&&(n=$(".menu_top_block.catalog_block li.full")),n.each(function(){var t=$(this),e=t.find(">.dropdown");e.length&&(s?e.css({left:r+"px",width:a-r+"px","padding-left":"0px","padding-right":"0px"}):e.css({left:-1*t.offset().left+"px",width:$(window).width()-1+"px","padding-left":i+"px","padding-right":$(window).width()-o+"px"}),!isOnceInited&&s&&"top"==arOptimusOptions.THEME.MENU_POSITION&&t.on("mouseenter",function(){e.css("min-height",t.closest(".dropdown").actual("outerHeight")+"px")}))})}),$.fn.getMaxHeights=function(t,e,a){for(var i=this.map(function(e,a){var i=0;return $(a).css("height",""),i=1==t?$(a).actual("outerHeight"):$(a).actual("height")}).get(),o=0,s=i.length;s>o;++o)i[o]%2&&--i[o];return Math.max.apply(this,i)},$.fn.equalizeHeights=function(t,e,a){for(var i=this.map(function(i,o){var s=0,n=0;return e!==!1&&(s=parseInt($(o).find(e).actual("outerHeight"))),s&&(s+=12),$(o).css("height",""),n=1==t?$(o).actual("outerHeight")-s:$(o).actual("height")-s,a!==!1&&(a>n&&(n+=a-n),window.matchMedia("(max-width: 520px)").matches&&(n=300),window.matchMedia("(max-width: 400px)").matches&&(n=200)),n}).get(),o=0,s=i.length;s>o;++o)i[o]%2&&--i[o];return this.height(Math.max.apply(this,i))},$.fn.getFloatWidth=function(){var t=0;if($(this).length){var e=$(this)[0].getBoundingClientRect();(t=e.width)||(t=e.right-e.left)}return t},$.fn.sliceHeight=function(t){function e(e){if(e.each(function(){$(this).css("line-height",""),$(this).css("height","")}),"undefined"==typeof t.autoslicecount||t.autoslicecount!==!1){var a="undefined"!=typeof t.row&&t.row.length?e.first().parents(t.row).getFloatWidth():e.first().parents(".items").getFloatWidth(),i="undefined"!=typeof t.item&&t.item.length?$(t.item).first().getFloatWidth():e.first().hasClass("item")?e.first().getFloatWidth():e.first().parents(".item").getFloatWidth();a||(a=e.first().parents(".row").getFloatWidth()),a&&i&&(t.slice=Math.floor(a/i))}if(t.slice)for(var o=0;o<e.length;o+=t.slice)$(e.slice(o,o+t.slice)).equalizeHeights(t.outer,t.classNull,t.minHeight);if(t.lineheight){var s=parseInt(t.lineheight);isNaN(s)&&(s=0),e.each(function(){$(this).css("line-height",$(this).actual("height")+s+"px")})}}var t=$.extend({slice:null,outer:!1,lineheight:!1,autoslicecount:!0,classNull:!1,minHeight:!1,options:!1,resize:!0,row:!1,item:!1},t),a=$(this);e(a),t.resize&&BX.addCustomEvent("onWindowResize",function(t){ignoreResize.push(!0),e(a),ignoreResize.pop()})},$.fn.sliceHeightNoResize=function(t){function e(e){if(e.each(function(){$(this).css("line-height",""),$(this).css("height","")}),"undefined"==typeof t.autoslicecount||t.autoslicecount!==!1){var a=e.first().hasClass("item")?e.first().getFloatWidth():e.first().parents(".item").getFloatWidth(),i=e.first().parents(".items").getFloatWidth();i||(i=e.first().parents(".row").getFloatWidth()),i&&a&&(t.slice=Math.floor(i/a))}if(t.slice)for(var o=0;o<e.length;o+=t.slice)$(e.slice(o,o+t.slice)).equalizeHeights(t.outer,t.classNull,t.minHeight);if(t.lineheight){var s=parseInt(t.lineheight);isNaN(s)&&(s=0),e.each(function(){$(this).css("line-height",$(this).actual("height")+s+"px")})}}var t=$.extend({slice:null,outer:!1,lineheight:!1,autoslicecount:!0,classNull:!1,minHeight:!1,options:!1,resize:!0},t),a=$(this);e(a)},!funcDefined("initHoverBlock"),!funcDefined("setStatusButton"),!funcDefined("onLoadjqm"))var onLoadjqm=function(t,e,a,i,o,s,n){e.w.addClass("show").css({"margin-left":$(window).width()>e.w.outerWidth()?"-"+e.w.outerWidth()/2+"px":"-"+$(window).width()/2+"px",top:$(document).scrollTop()+($(window).height()>e.w.outerHeight()?($(window).height()-e.w.outerHeight())/2:10)+"px",opacity:1}),"undefined"==typeof a&&(a=""),"undefined"==typeof i&&(i=!1);var r=$("."+t+"_frame").width();$("."+t+"_frame").css("margin-left","-"+r/2+"px"),"order-popup-call"==t||("order-button"==t?$(".order-button_frame").find("div[product_name]").find("input").val(e.t.title).attr("readonly","readonly").css({overflow:"hidden","text-overflow":"ellipsis"}):"to-order"==t&&i?($(".to-order_frame").find('[data-sid="PRODUCT_NAME"]').val($(i).data("name")).attr("readonly","readonly").css({overflow:"hidden","text-overflow":"ellipsis"}),$(".to-order_frame").find('[data-sid="PRODUCT_ID"]').val($(i).attr("data-item"))):"services"==t&&i?$(".services_frame").find('[data-sid="SERVICE"]').val($(i).attr("data-title")):"resume"==t&&i?$(i).attr("data-jobs")&&$(".resume_frame").find('[data-sid="POST"]').attr("readonly","readonly").val($(i).attr("data-jobs")):"basket_error"==t?($(".basket_error_frame .pop-up-title").text(o),$(".basket_error_frame .ajax_text").html(a),initSelects(document),"Y"==s&&n&&$("<div class='popup_button_basket_wr'><span class='popup_button_basket big_btn button' data-item="+n.data("item")+"><span>"+BX.message("ERROR_BASKET_BUTTON")+"</span></span></div>").insertAfter($(".basket_error_frame .ajax_text"))):"one_click_buy"==t?($("#one_click_buy_form_button").on("click",function(){$(this).hasClass("clicked")||$("#one_click_buy_form").valid()&&($(this).addClass("clicked"),$("#one_click_buy_form").submit())}),$("#one_click_buy_form").submit(function(){return $("."+t+"_frame form input.error").length||$("."+t+"_frame form textarea.error").length?!1:($.ajax({url:$(this).attr("action"),data:$(this).serialize(),type:"POST",dataType:"json",error:function(t){alert("Error connecting server")},success:function(t){"Y"==t.result?($(".one_click_buy_result").show(),$(".one_click_buy_result_success").show(),purchaseCounter(t.message,arOptimusOptions.COUNTERS.TYPE.ONE_CLICK)):($(".one_click_buy_result").show(),$(".one_click_buy_result_fail").show(),"err"in t&&t.err&&(t.message=t.message+" \n"+t.err),$(".one_click_buy_result_text").html(t.message)),$(".one_click_buy_modules_button",self).removeClass("disabled"),$("#one_click_buy_form").hide(),$("#one_click_buy_form_result").show()}}),!1)})):"one_click_buy_basket"==t&&($("#one_click_buy_form_button").on("click",function(){$(this).hasClass("clicked")||$("#one_click_buy_form").valid()&&($(this).addClass("clicked"),$("#one_click_buy_form").submit())}),$("#one_click_buy_form").on("submit",function(){return $("."+t+"_frame form input.error").length||$("."+t+"_frame form textarea.error").length?!1:($.ajax({url:$(this).attr("action"),data:$(this).serialize(),type:"POST",dataType:"json",error:function(t){window.console&&console.log(t)},success:function(t){"Y"==t.result?($(".one_click_buy_result").show(),$(".one_click_buy_result_success").show(),purchaseCounter(t.message,arOptimusOptions.COUNTERS.TYPE.QUICK_ORDER)):($(".one_click_buy_result").show(),$(".one_click_buy_result_fail").show(),"err"in t&&t.err&&(t.message=t.message+" \n"+t.err),$(".one_click_buy_result_text").text(t.message)),$(".one_click_buy_modules_button",self).removeClass("disabled"),$("#one_click_buy_form").hide(),$("#one_click_buy_form_result").show()}}),!1)}))),$("."+t+"_frame").show()};if(!funcDefined("onHidejqm"))var onHidejqm=function(t,e){e.w.find(".one_click_buy_result_success").is(":visible")&&"one_click_buy_basket"==t&&(window.location.href=window.location.href),e.w.css("opacity",0).hide(),e.w.empty(),e.o.remove(),e.w.removeClass("show")};if(!funcDefined("oneClickBuy"))var oneClickBuy=function(t,e,a){var i="one_click_buy",o=1,s=!1,n=$(a).closest(".buy_block").find(".to-cart"),r=$(a).closest("tr").find(".to-cart");"undefined"!=typeof a&&(o=$(a).attr("data-quantity"),s=$(a).attr("data-props")),0>o&&(o=1);var c=n.data("props"),l=r.data("props"),d="",u="",p="N",m={},h=n.data("iblockid"),f=n.attr("data-item");c?d=c.split(";"):l&&(d=l.split(";")),n.data("part_props")&&(u=n.data("part_props")),n.data("add_props")&&(p=n.data("add_props")),m=fillBasketPropsExt(n,"prop",n.data("bakset_div")),m.iblockID=h,m.part_props=u,m.add_props=p,m.props=JSON.stringify(d),m.item=f,m.ocb_item="Y",$("body").find("."+i+"_frame").remove(),$("body").append('<div class="'+i+'_frame popup"></div>'),$("."+i+"_frame").jqm({trigger:"."+i+"_frame.popup",onHide:function(t){onHidejqm(i,t)},toTop:!1,onLoad:function(t){onLoadjqm(i,t)},ajax:arOptimusOptions.SITE_DIR+"ajax/one_click_buy.php?ELEMENT_ID="+t+"&IBLOCK_ID="+e+"&ELEMENT_QUANTITY="+o+"&OFFER_PROPS="+m.props}),$("."+i+"_frame.popup").click()};if(!funcDefined("oneClickBuyBasket"))var oneClickBuyBasket=function(){name="one_click_buy_basket",$("body").find("."+name+"_frame").remove(),$("body").append('<div class="'+name+'_frame popup"></div>'),$("."+name+"_frame").jqm({trigger:"."+name+"_frame.popup",onHide:function(t){onHidejqm(name,t)},onLoad:function(t){onLoadjqm(name,t)},ajax:arOptimusOptions.SITE_DIR+"ajax/one_click_buy_basket.php"}),$("."+name+"_frame.popup").click()};if(!funcDefined("scroll_block"),!funcDefined("jqmEd"))var jqmEd=function(t,e,a,i,o,s,n,r){return"undefined"==typeof i&&(i=""),"undefined"==typeof o&&(o=!1),$("body").find("."+t+"_frame").remove(),$("body").append('<div class="'+t+'_frame popup"></div>'),"undefined"==typeof a?$("."+t+"_frame").jqm({trigger:"."+t+"_frame.popup",onHide:function(e){onHidejqm(t,e)},onLoad:function(e){onLoadjqm(t,e,i,o)},ajax:arOptimusOptions.SITE_DIR+"ajax/form.php?form_id="+e+(i.length?"&"+i:"")}):("enter"==t?$("."+t+"_frame").jqm({trigger:a,onHide:function(e){onHidejqm(t,e)},onLoad:function(e){onLoadjqm(t,e,i,o)},ajax:arOptimusOptions.SITE_DIR+"ajax/auth.php"}):"basket_error"==t?$("."+t+"_frame").jqm({trigger:a,onHide:function(e){onHidejqm(t,e)},onLoad:function(e){onLoadjqm(t,e,i,o,s,n,r)},ajax:arOptimusOptions.SITE_DIR+"ajax/basket_error.php"}):$("."+t+"_frame").jqm({trigger:a,onHide:function(e){onHidejqm(t,e)},onLoad:function(e){onLoadjqm(t,e,i,o)},ajax:arOptimusOptions.SITE_DIR+"ajax/form.php?form_id="+e+(i.length?"&"+i:"")}),$(a).dblclick(function(){return!1})),!0};if(!funcDefined("replaceBasketPopup"),!funcDefined("waitLayer"),funcDefined("InitTopestMenuGummi")||(InitTopestMenuGummi=function(){function t(){var t=a.find(">li:not(.more)"),e=t.length;if(e)for(var i=0,o=0;e>o;++o){var r=t.eq(o),c=r.actual("outerWidth",{includeMargin:!0});n[o]=(i+=c)+(o!==e-1?s:0)}}function e(){var t=a.actual("innerWidth"),e=a.find(">li:not(.more),li.more>.dropdown>li"),s=e.length;if(s){for(var r=!1,c=s-1;c>=0;--c){var l=e.eq(c),d=l.parents(".more").length>0;if(!d&&n[c]>t){r||(r=!0,i.removeClass("hidden"));var u=l.clone();u.find(">a").addClass("dark_font"),u.prependTo(o),l.addClass("cloned")}}for(var c=0;s>c;++c){var l=e.eq(c),d=l.parents(".more").length>0;if(d&&n[c]<=t){c===s-1&&(r=!1,i.addClass("hidden"));var u=l.clone();u.find(">a").removeClass("dark_font"),u.insertBefore(i),l.addClass("cloned")}}a.find("li.cloned").remove()}}if(!isOnceInited){var a=$(".menu.topest"),i=a.find(">.more"),o=i.find(">.dropdown"),s=i.actual("outerWidth",{includeMargin:!0}),n=[];ignoreResize.push(!0),t(),e(),ignoreResize.pop(),$(window).resize(function(){ignoreResize.push(!0),e(),ignoreResize.pop()})}}),funcDefined("InitTopMenuGummi")||(InitTopMenuGummi=function(){function t(){var t=a.closest(".wrap_menu").find(".inc_menu .menu_top_block >li:not(.more)"),e=t.length;if(e)for(var i=0,o=0;e>o;++o){var s=t.eq(o),c=s.actual("outerWidth");r[o]=(i+=c)+(o!==e-1?n:0)}}function e(){var t=i.actual("innerWidth")-o.actual("innerWidth"),e=a.find(">li:not(.more):not(.catalog),li.more>.dropdown>li"),n=e.length;if(n){for(var l=!1,u=n-1;u>=0;--u){var p=e.eq(u),m=p.parents(".more").length>0;if(!m&&r[u]>t){l||(l=!0,s.removeClass("hidden"));var h=p.clone();h.find(">.dropdown").removeAttr("style").removeClass("toleft"),h.find(">a").addClass("dark_font").removeAttr("style"),h.prependTo(c),p.addClass("cloned")}}for(var u=0;n>u;++u){var p=e.eq(u),m=p.parents(".more").length>0;if(m&&r[u]<=t){u===n-1&&(l=!1,s.addClass("hidden"));var h=p.clone();h.find(">a").removeClass("dark_font"),h.insertBefore(s),p.addClass("cloned")}}a.find("li.cloned").remove();var f=a.find(">li:not(.more):not(.catalog)").length,_=t-r[f-1],b=Math.floor(_/(f+(s.hasClass("hidden")?0:1))),v=d+b,k=Math.floor(v/2),g=v-k;a.find(">li:not(.catalog):visible>a").each(function(){$(this).css({"padding-left":k+"px"}),$(this).css({"padding-right":g+"px"})});var w=v+_-(f+(s.is(":visible")?1:0))*b,C=Math.floor(w/2),E=w-C;a.find(">li:visible").last().find(">a").css({"padding-left":C+"px"}),a.find(">li:visible").last().find(">a").css({"padding-right":E+"px"}),CheckTopMenuFullCatalogSubmenu()}}var a=$(".menu_top_block"),i=a.parents(".wrap_menu"),o=i.find(".catalog_menu_ext"),s=a.find(">.more"),n=s.actual("outerWidth",{includeMargin:!0});s.addClass("hidden");var r=[],c=s.find(">.dropdown"),l=2*parseInt(s.find(">a").css("padding-left")),d=l;ignoreResize.push(!0),t(),e(),ignoreResize.pop(),$(window).resize(function(){ignoreResize.push(!0),e(),ignoreResize.pop()})}),!funcDefined("checkCounters"),!funcDefined("addBasketCounter"),!funcDefined("purchaseCounter"),!funcDefined("viewItemCounter"),!funcDefined("checkoutCounter"),!funcDefined("delFromBasketCounter"),!funcDefined("setHeightCompany"),!funcDefined("initSly"),!funcDefined("createTableCompare"),funcDefined("fillBasketPropsExt")||(fillBasketPropsExt=function(t,e,a){var i=0,o=null,s=!1,n={},r=null;if(r=BX(a)){if(o=r.getElementsByTagName("select"),o&&o.length)for(i=0;i<o.length;i++)if(!o[i].disabled)switch(o[i].type.toLowerCase()){case"select-one":n[o[i].name]=o[i].value,s=!0}if(o=r.getElementsByTagName("input"),o&&o.length)for(i=0;i<o.length;i++)if(!o[i].disabled)switch(o[i].type.toLowerCase()){case"hidden":n[o[i].name]=o[i].value,s=!0;break;case"radio":o[i].checked&&(n[o[i].name]=o[i].value,s=!0)}}return s||(n[e]=[],n[e][0]=0),n}),funcDefined("showBasketError")||(showBasketError=function(t,e,a,i){var o=e?e:BX.message("ERROR_BASKET_TITLE"),s="N",n="";void 0!==typeof a&&(s="Y"),void 0!==typeof i&&(n=i),$("body").append("<span class='add-error-bakset' style='display:none;'></span>"),jqmEd("basket_error","error-bakset",".add-error-bakset",t,this,o,s,n),$("body .add-error-bakset").click(),$("body .add-error-bakset").remove()}),!funcDefined("isRealValue"),!funcDefined("rightScroll"),!funcDefined("leftScroll"),funcDefined("InitOrderCustom")||(InitOrderCustom=function(){$(".ps_logo img").wrap('<div class="image"></div>'),$("#bx-soa-order .radio-inline").each(function(){"checked"==$(this).find("input").attr("checked")&&$(this).addClass("checked")}),$("#bx-soa-order .checkbox input[type=checkbox]").each(function(){"checked"==$(this).attr("checked")&&$(this).parent().addClass("checked")}),$("#bx-soa-order .bx-authform-starrequired").each(function(){var t=$(this).html();$(this).closest("label").append('<span class="bx-authform-starrequired"> '+t+"</span>"),$(this).detach()}),$(".bx_ordercart_coupon").each(function(){$(this).find(".bad").length?$(this).addClass("bad"):$(this).find(".good").length&&$(this).addClass("good")})}),funcDefined("InitLabelAnimation")||(InitLabelAnimation=function(t){$(t).length&&($(t).find(".form-group").each(function(){$(this).find("input[type=text], textarea").length&&!$(this).find(".dropdown-block").length&&""!=$(this).find("input[type=text], textarea").val()&&$(this).addClass("value_y")}),$(document).on("click",t+" .form-group:not(.bx-soa-pp-field) label",function(){$(this).parent().find("input, textarea").focus()}),$(document).on("focusout",t+" .form-group:not(.bx-soa-pp-field) input, "+t+" .form-group:not(.bx-soa-pp-field) textarea",function(){var t=$(this).val();""==t||$(this).closest(".form-group").find(".dropdown-block").length||$(this).closest(".form-group").find("#profile_change").length?$(this).closest(".form-group").removeClass("value_y"):$(this).closest(".form-group").addClass("value_y")}),$(document).on("focus",t+" .form-group:not(.bx-soa-pp-field) input, "+t+" .form-group:not(.bx-soa-pp-field) textarea",function(){$(this).closest(".form-group").find(".dropdown-block").length||$(this).closest(".form-group").find("#profile_change").length||$(this).closest(".form-group").find("[name=PERSON_TYPE_OLD]").length||$(this).closest(".form-group").addClass("value_y")}))}),checkPopupWidth=function(){$(".popup.show").each(function(){var t=$(this).actual("width");$(this).css({"margin-left":$(window).width()>t?"-"+t/2+"px":"-"+$(window).width()/2+"px"})})},checkCaptchaWidth=function(){$(".captcha-row").each(function(){var t=$(this).actual("width");$(this).hasClass("b")?t>320&&$(this).removeClass("b"):320>=t&&$(this).addClass("b")})},checkFormWidth=function(){$(".form .form_left").each(function(){var t=$(this).parents(".form"),e=t.actual("width");t.hasClass("b")?e>417&&t.removeClass("b"):417>=e&&t.addClass("b")})},checkFormControlWidth=function(){$(".form-control").each(function(){var t=$(this).actual("width"),e=$(this).find("label:not(.error) > span").actual("width"),a=$(this).find("label.error").actual("width");a>0?$(this).hasClass("h")?t>e+a+5&&$(this).removeClass("h"):e+a+5>=t&&$(this).addClass("h"):$(this).removeClass("h")})},scrollToTop=function(){if("NONE"!==arOptimusOptions.THEME.SCROLLTOTOP_TYPE){var t=!1;$("body").append($("<a />").addClass("scroll-to-top "+arOptimusOptions.THEME.SCROLLTOTOP_TYPE+" "+arOptimusOptions.THEME.SCROLLTOTOP_POSITION).attr({href:"#",id:"scrollToTop"})),$("#scrollToTop").click(function(t){return t.preventDefault(),$("body, html").animate({scrollTop:0},500),!1}),$(window).scroll(function(){t||(t=!0,$(window).scrollTop()>150?($("#scrollToTop").stop(!0,!0).addClass("visible"),t=!1):($("#scrollToTop").stop(!0,!0).removeClass("visible"),t=!1),checkScrollToTop())})}},checkScrollToTop=function(){var t=55,e=$(window).scrollTop(),a=$(window).height(),i=$("footer").offset().top+70;"CONTENT"==arOptimusOptions.THEME.SCROLLTOTOP_POSITION&&(warpperWidth=$("body > .wrapper > .wrapper_inner").width(),$("#scrollToTop").css("margin-left",Math.ceil(warpperWidth/2)+23)),e+a>i?$("#scrollToTop").css("bottom",t+e+a-i-0):parseInt($("#scrollToTop").css("bottom"))>t&&$("#scrollToTop").css("bottom",t)},CheckObjectsSizes=function(){$(".container iframe,.container object,.container video").each(function(){var t=$(this).attr("height"),e=$(this).attr("width");t&&e&&$(this).css("height",$(this).outerWidth()*t/e)})},!funcDefined("reloadTopBasket"))var reloadTopBasket=function(t,e,a,i,o,s){var n={
PARAMS:$("#top_basket_params").val(),ACTION:t};"undefined"!=typeof s&&(n.delete_top_item="Y",n.delete_top_item_id=s.data("id")),$.post(arOptimusOptions.SITE_DIR+"ajax/show_basket_popup.php",n,$.proxy(function(t){$(e).html(t),getActualBasket(),"N"!==arOptimusOptions.THEME.SHOW_BASKET_ONADDTOCART&&$(window).outerWidth()>520&&("Y"==o&&$(e).find(".basket_popup_wrapp").stop(!0,!0).slideDown(a),clearTimeout(basketTimeoutSlide),basketTimeoutSlide=setTimeout(function(){var t=$("#basket_line").find(".basket_popup_wrapp");t.is(":hover")?t.show():$("#basket_line").find(".basket_popup_wrapp").slideUp(a)},i))}))};if(!funcDefined("initCountdown"))var initCountdown=function(){$(".view_sale_block").size()&&$(".view_sale_block").each(function(){var t=$(this).find(".active_to").text(),e=new Date(t.replace(/(\d+)\.(\d+)\.(\d+)/,"$3/$2/$1"));$(this).find(".countdown").countdown({until:e,format:"dHMS",padZeroes:!0,layout:'{d<}<span class="days item">{dnn}<div class="text">{dl}</div></span>{d>} <span class="hours item">{hnn}<div class="text">{hl}</div></span> <span class="minutes item">{mnn}<div class="text">{ml}</div></span> <span class="sec item">{snn}<div class="text">{sl}</div></span>'},$.countdown.regionalOptions.ru)})};var isOnceInited=insertFilter=!1,animationTime=200,delayTime=200,topMenuEnterTimer=!1,isMobile=jQuery.browser.mobile;if(isMobile&&(document.documentElement.className+=" mobile"),!funcDefined("checkVerticalMobileFilter"))var checkVerticalMobileFilter=function(){$(".right_block1.catalog.vertical").length&&(window.matchMedia("(max-width: 950px)").matches?insertFilter||($(".js_filter .bx_filter.bx_filter_vertical").html($(".left_block .bx_filter.bx_filter_vertical").html()),$(".left_block .bx_filter.bx_filter_vertical .bx_filter_section").remove(),insertFilter=!0):insertFilter&&($(".left_block .bx_filter.bx_filter_vertical").html($(".js_filter .bx_filter.bx_filter_vertical").html()),$(".js_filter .bx_filter.bx_filter_vertical .bx_filter_section").remove(),insertFilter=!1))};$(document).on("click",".menu_top_block>li .more a",function(){$this=$(this),$this.parents(".dropdown").first().find(">.hidden").removeClass("hidden"),$this.parent().addClass("hidden"),setTimeout(function(){$this.parent().remove()},500)}),$(document).on("mouseenter",".menu_top_block.catalogfirst>li>.dropdown>li.full",function(){var t=$(this).find(">.dropdown");t.length&&topMenuEnterTimer&&(clearTimeout(topMenuEnterTimer),topMenuEnterTimer=!1)}),$(document).on("mouseenter",".menu_top_block>li:not(.full)",function(){var t=$(this).find(">.dropdown");if(t.length&&!t.hasClass("visible")){var e=$(this).parents(".menu"),a=e.parents(".wrap_menu"),i=a.actual("outerWidth"),o=a.offset().left,s=o+i,n=s-($(this).offset().left+t.actual("outerWidth"));if(window.matchMedia("(min-width: 951px)").matches&&$(this).hasClass("catalog")&&($(".banner_auto").hasClass("catalog_page")||$(".banner_auto").hasClass("front_page")))return;0>n&&t.css({left:n+"px"}),t.stop().slideDown(animationTime,function(){t.css({height:"",overflow:"visible"})}),$(this).on("mouseleave",function(){var e=setTimeout(function(){t.stop().slideUp(animationTime,function(){t.css({left:""})})},delayTime);$(this).on("mouseenter",function(){e&&(clearTimeout(e),e=!1)})})}}),$(document).on("mouseenter",".menu_top_block>li .dropdown>li",function(){var t=$(this),e=t.find(">.dropdown");if(e.length&&(!t.parents(".full").length&&!t.hasClass("full")||t.parents(".more").length)){var a=t.parents(".menu"),o=a.parents(".wrap_menu"),s=[];topMenuEnterTimer=setTimeout(function(){var a=o.actual("outerWidth"),i=o.offset().left,n=i+a,r=t.parent(),c=r.hasClass("toleft")?!0:!1;c=c?t.offset().left+t.actual("outerWidth")-e.actual("outerWidth")<i:t.offset().left+t.actual("outerWidth")+e.actual("outerWidth")>n,c?t.find(">.dropdown").addClass("toleft").show():t.find(">.dropdown").removeClass("toleft").show();var l=e.offset().left,d=l+e.actual("outerWidth");t.parents(".dropdown").each(function(){var t=$(this),e=t.offset().left,a=e+t.actual("outerWidth");(e>=l&&d-1>e||a>l+1&&d>=a)&&(s.push(t),t.find(">li>a").css({opacity:"0.1"}))})},delayTime),t.unbind("mouseleave"),t.on("mouseleave",function(){var e=setTimeout(function(){if(t.find(".dropdown").removeClass("toleft").hide(),s.length)for(i in s)s[i].find(">li>a").css({opacity:""})},delayTime);t.unbind("mouseenter"),t.on("mouseenter",function(){e&&(clearTimeout(e),e=!1)})})}}),getGridSize=function(t){var e=1;return window.matchMedia("(min-width: 1200px)").matches&&(e=t[0]),window.matchMedia("(max-width: 1200px)").matches&&(e=t[1]),window.matchMedia("(max-width: 992px)").matches&&(e=t[2]),t[3]&&window.matchMedia("(max-width: 600px)").matches&&(e=t[3]),t[4]&&window.matchMedia("(max-width: 400px)").matches&&(e=t[4]),e},CheckFlexSlider=function(){$(".flexslider:not(.thmb)").each(function(){var t=$(this);t.resize();var e=t.data("flexslider").vars.counts;if("undefined"!=typeof e){var a=getGridSize(e),i=a!=t.data("flexslider").vars.minItems||a!=t.data("flexslider").vars.maxItems||a!=t.data("flexslider").vars.move;i&&(t.data("flexslider").vars.minItems=a,t.data("flexslider").vars.maxItems=a,t.data("flexslider").vars.move=a,t.flexslider(0),t.resize(),t.resize())}})},InitFlexSlider=function(){$(".flexslider:not(.thmb):not(.flexslider-init)").each(function(){var t,e=$(this),a={animationLoop:!1,controlNav:!1,directionNav:!0,animation:"slide"},i=$.extend({},a,t,e.data("plugin-options"));e.parent().hasClass("top_slider_wrapp")||("undefined"!=typeof i.counts&&"vertical"!==i.direction&&(i.maxItems=getGridSize(i.counts),i.minItems=getGridSize(i.counts),i.move=getGridSize(i.counts),i.itemWidth=200),i.after=i.start=function(t){var e={slider:t};BX.onCustomEvent("onSlide",[e])},i.end=function(t){var e={slider:t};BX.onCustomEvent("onSlideEnd",[e])},e.flexslider(i).addClass("flexslider-init"),i.controlNav&&e.addClass("flexslider-control-nav"),i.directionNav&&e.addClass("flexslider-direction-nav"))})},InitZoomPict=function(){if($(".zoom_picture").length){var t,e=$(".zoom_picture").closest(".slides"),a=$(".zoom_picture"),i={zoomrange:[1,12],zoomstart:4,magnifierborder:"1px solid #cccccd",magnifiersize:[e.width(),e.height()],rightoffset:30},o=$.extend({},i,t,a.data("plugin-options"));a.imagezoomsl(o).addClass("zoom-init")}};var arBasketAsproCounters={};SetActualBasketFlyCounters=function(){1==arBasketAsproCounters.DEFAULT?$.ajax({url:arOptimusOptions.SITE_DIR+"ajax/basket_fly.php",type:"post",success:function(t){$("#basket_line .basket_fly").addClass("loaded").html(t)}}):($("#header .basket_fly .opener .basket_count .count").attr("class","count"+(arBasketAsproCounters.READY.COUNT>0?"":" empty_items")).find(".items span").text(arBasketAsproCounters.READY.COUNT),$("#header .basket_fly .opener .basket_count + a").attr("href",arBasketAsproCounters.READY.HREF),$("#header .basket_fly .opener .basket_count").attr("title",arBasketAsproCounters.READY.TITLE).attr("class","basket_count small clicked"+(arBasketAsproCounters.READY.COUNT>0?"":" empty")),$("#header .basket_fly .opener .wish_count .count").attr("class","count"+(arBasketAsproCounters.DELAY.COUNT>0?"":" empty_items")).find(".items span").text(arBasketAsproCounters.DELAY.COUNT),$("#header .basket_fly .opener .wish_count + a").attr("href",arBasketAsproCounters.DELAY.HREF),$("#header .basket_fly .opener .wish_count").attr("title",arBasketAsproCounters.DELAY.TITLE).attr("class","wish_count small clicked"+(arBasketAsproCounters.DELAY.COUNT>0?"":" empty")),$("#header .basket_fly .opener .compare_count .count").attr("class","count"+(arBasketAsproCounters.COMPARE.COUNT>0?"":" empty_items")).find(".items span").text(arBasketAsproCounters.COMPARE.COUNT),$("#header .basket_fly .opener .compare_count + a").attr("href",arBasketAsproCounters.COMPARE.HREF),$("#header .basket_fly .opener .user_block").attr("title",arBasketAsproCounters.PERSONAL.TITLE).find("+ a").attr("href",arBasketAsproCounters.PERSONAL.HREF),$("#header .basket_fly .opener .user_block .wraps_icon_block").attr("class","wraps_icon_block"+(arBasketAsproCounters.PERSONAL.ID>0?" user_auth":" user_reg")+(arBasketAsproCounters.PERSONAL.SRC?" w_img":" no_img")).attr("style",arBasketAsproCounters.PERSONAL.SRC?'background:url("'+arBasketAsproCounters.PERSONAL.SRC+'") center center no-repeat;':""))},$(document).ready(function(){if(arOptimusOptions.PAGES.ORDER_PAGE){var t=parseUrlQuery();"ORDER_ID"in t&&$.ajax({url:arOptimusOptions.SITE_DIR+"ajax/check_order.php",dataType:"json",type:"POST",data:{ID:t.ORDER_ID},success:function(t){parseInt(t)&&purchaseCounter(parseInt(t),BX.message("FULL_ORDER"))}})}scrollToTop(),checkVerticalMobileFilter(),setTimeout(function(){InitTopestMenuGummi(),InitTopMenuGummi(),isOnceInited=!0,InitFlexSlider();try{$("header .wrap_menu").css({overflow:"visible"}),$(".visible_on_ready").removeClass("visible_on_ready")}catch(t){console.error(t)}},100),InitZoomPict(),$("body").on("click",".captcha_reload",function(t){var e=$(this).parents(".captcha-row");t.preventDefault(),$.ajax({url:arOptimusOptions.SITE_DIR+"ajax/captcha.php"}).done(function(t){e.find("input[name=captcha_sid]").val(t),e.find("img").attr("src","/bitrix/tools/captcha.php?captcha_sid="+t),e.find("input[name=captcha_word]").val("").removeClass("error"),e.find(".captcha_input").removeClass("error").find(".error").remove()})}),setTimeout(function(){$(".bg_image_site").css({opacity:1})},200),window.matchMedia("(min-width: 768px)").matches&&$(".wrapper_middle_menu.wrap_menu").removeClass("mobile"),window.matchMedia("(max-width: 767px)").matches&&$(".wrapper_middle_menu.wrap_menu").addClass("mobile"),setTimeout(function(){$(window).scroll()},400),$(".show_props").live("click",function(){$(this).prev(".props_list_wrapp").stop().slideToggle(333),$(this).find(".char_title").toggleClass("opened")}),$(".see_more").live("click",function(t){t.preventDefault();var e=$(this).is(".see_more")?$(this):$(this).parents(".see_more").first(),a=e.find("> a").length?e.find("> a"):e,i=e.parent().find("> .d");return e.hasClass("open")?(a.text(BX.message("CATALOG_VIEW_MORE")),e.removeClass("open"),i.hide()):(a.text(BX.message("CATALOG_VIEW_LESS")),e.addClass("open"),i.show()),!1}),$(".button.faq_button").click(function(t){t.preventDefault(),$(this).toggleClass("opened"),$(".faq_ask .form").slideToggle()}),$(".staff.list .staff_section .staff_section_title a").click(function(t){t.preventDefault(),$(this).parents(".staff_section").toggleClass("opened"),$(this).parents(".staff_section").find(".staff_section_items").stop().slideToggle(600),$(this).parents(".staff_section_title").find(".opener_icon").toggleClass("opened")}),$(".jobs_wrapp .item .name").click(function(t){$(this).closest(".item").toggleClass("opened"),$(this).closest(".item").find(".description_wrapp").stop().slideToggle(600),$(this).closest(".item").find(".opener_icon").toggleClass("opened")}),$(".faq.list .item .q a").live("click",function(t){t.preventDefault(),$(this).parents(".item").toggleClass("opened"),$(this).parents(".item").find(".a").stop().slideToggle(),$(this).parents(".item").find(".q .opener_icon").toggleClass("opened")}),$(".opener_icon").click(function(t){t.preventDefault(),$(this).parent().find("a").trigger("click")}),$(".to-order").live("click",function(t){t.preventDefault(),$("body").append("<span class='evb-toorder' style='display:none;'></span>"),jqmEd("to-order",arOptimusOptions.FORM.TOORDER_FORM_ID,".evb-toorder","",this),$("body .evb-toorder").click(),$("body .evb-toorder").remove()}),$(".dotdot").dotdotdot(),$(".more_block span").live("click",function(){var t=$(".catalog_detail .tabs_section").offset();$("html, body").animate({scrollTop:t.top-23},400)}),$(".counter_block:not(.basket) .plus").live("click",function(){if(!$(this).parents(".basket_wrapp").length&&"Y"!=$(this).parent().data("offers")){var t=$(this).parents(".counter_block_wr").length;input=$(this).parents(".counter_block").find("input[type=text]"),tmp_ratio=t?$(this).parents("tr").first().find("td.buy .to-cart").data("ratio"):$(this).parents(".counter_wrapp").find(".to-cart").data("ratio"),isDblQuantity=t?$(this).parents("tr").first().find("td.buy .to-cart").data("float_ratio"):$(this).parents(".counter_wrapp").find(".to-cart").data("float_ratio"),ratio=isDblQuantity?parseFloat(tmp_ratio):parseInt(tmp_ratio,10),max_value="",currentValue=input.val(),isDblQuantity&&(ratio=Math.round(ratio*arOptimusOptions.JS_ITEM_CLICK.precisionFactor)/arOptimusOptions.JS_ITEM_CLICK.precisionFactor),curValue=isDblQuantity?parseFloat(currentValue):parseInt(currentValue,10),curValue+=ratio,isDblQuantity&&(curValue=Math.round(curValue*arOptimusOptions.JS_ITEM_CLICK.precisionFactor)/arOptimusOptions.JS_ITEM_CLICK.precisionFactor),parseFloat($(this).data("max"))>0?input.val()<$(this).data("max")&&(curValue>$(this).data("max")?input.val($(this).data("max")):input.val(curValue),input.change()):(input.val(curValue),input.change())}}),$(".counter_block:not(.basket) .minus").live("click",function(){if(!$(this).parents(".basket_wrapp").length&&"Y"!=$(this).parent().data("offers")){var t=$(this).parents(".counter_block_wr").length;input=$(this).parents(".counter_block").find("input[type=text]"),tmp_ratio=t?$(this).parents("tr").first().find("td.buy .to-cart").data("ratio"):$(this).parents(".counter_wrapp").find(".to-cart").data("ratio"),isDblQuantity=t?$(this).parents("tr").first().find("td.buy .to-cart").data("float_ratio"):$(this).parents(".counter_wrapp").find(".to-cart").data("float_ratio"),ratio=isDblQuantity?parseFloat(tmp_ratio):parseInt(tmp_ratio,10),max_value="",currentValue=input.val(),isDblQuantity&&(ratio=Math.round(ratio*arOptimusOptions.JS_ITEM_CLICK.precisionFactor)/arOptimusOptions.JS_ITEM_CLICK.precisionFactor),curValue=isDblQuantity?parseFloat(currentValue):parseInt(currentValue,10),curValue-=ratio,isDblQuantity&&(curValue=Math.round(curValue*arOptimusOptions.JS_ITEM_CLICK.precisionFactor)/arOptimusOptions.JS_ITEM_CLICK.precisionFactor),parseFloat($(this).parents(".counter_block").find(".plus").data("max"))>0?currentValue>ratio&&(curValue<ratio?input.val(ratio):input.val(curValue),input.change()):(curValue>ratio?input.val(curValue):ratio?input.val(ratio):currentValue>1&&input.val(curValue),input.change())}}),$(".counter_block input[type=text]").numeric({allow:"."}),$(".counter_block input[type=text]").live("focus",function(){$(this).addClass("focus")}),$(".counter_block input[type=text]").live("blur",function(){$(this).removeClass("focus")}),$(".counter_block input[type=text]").live("change",function(t){if(!$(this).parents(".basket_wrapp").length){var e=$(this).val(),a=$(this).parents(".counter_wrapp").find(".to-cart").data("ratio")?$(this).parents(".counter_wrapp").find(".to-cart").data("ratio"):$(this).parents("tr").first().find("td.buy .to-cart").data("ratio"),i=$(this).parents(".counter_wrapp").find(".to-cart").data("float_ratio")?$(this).parents(".counter_wrapp").find(".to-cart").data("float_ratio"):$(this).parents("tr").first().find("td.buy .to-cart").data("float_ratio"),o=i?parseFloat(a):parseInt(a,10);i&&(o=Math.round(o*arOptimusOptions.JS_ITEM_CLICK.precisionFactor)/arOptimusOptions.JS_ITEM_CLICK.precisionFactor),$(this).hasClass("focus")&&(e-=e%o),parseFloat($(this).parents(".counter_block").find(".plus").data("max"))>0&&e>parseFloat($(this).parents(".counter_block").find(".plus").data("max"))&&(e=parseFloat($(this).parents(".counter_block").find(".plus").data("max")),e-=e%o),o>e?e=o:parseFloat(e)||(e=1),$(this).parents(".counter_block").parent().parent().find(".to-cart").attr("data-quantity",e),$(this).parents(".counter_block").parent().parent().find(".one_click").attr("data-quantity",e),$(this).val(e)}}),$(document).on("mouseenter","#basket_line .basket_normal:not(.empty_cart):not(.bcart) .basket_block ",function(){$(this).closest(".basket_normal").find(".popup").addClass("block"),$(this).closest(".basket_normal").find(".basket_popup_wrapp").stop(!0,!0).slideDown(150)}),$(document).on("mouseleave","#basket_line .basket_normal .basket_block ",function(){var t=$(this);$(this).closest(".basket_normal").find(".basket_popup_wrapp").stop(!0,!0).slideUp(150,function(){t.closest(".basket_normal").find(".popup").removeClass("block")})}),$(document).on("click",".popup_button_basket",function(){var t=$(".to-cart[data-item="+$(this).data("item")+"]"),e=t.attr("data-quantity");e||($val=1);var a=t.data("props"),i="",o="",s="N",n={},r=t.data("iblockid"),c=t.data("offers"),l="",d="",u=t.attr("data-item");"Y"!=c?c="N":d=t.closest(".prices_tab").find(".bx_sku_props input").val(),a&&(i=a.split(";")),t.data("part_props")&&(o=t.data("part_props")),t.data("add_props")&&(s=t.data("add_props")),$(".rid_item").length?l=$(".rid_item").data("rid"):t.data("rid")&&(l=t.data("rid")),n=fillBasketPropsExt(t,"prop","bx_ajax_text"),n.quantity=e,n.add_item="Y",n.rid=l,n.offers=c,n.iblockID=r,n.part_props=o,n.add_props=s,n.props=JSON.stringify(i),n.item=u,n.basket_props=d,$.ajax({type:"POST",url:arOptimusOptions.SITE_DIR+"ajax/item.php",data:n,dataType:"json",success:function(e){$(".basket_error_frame").jqmHide(),"STATUS"in e?(getActualBasket(n.iblockID),"OK"===e.STATUS?(t.hide(),t.closest(".counter_wrapp").find(".counter_block").hide(),t.parents("tr").find(".counter_block_wr .counter_block").hide(),t.closest(".button_block").addClass("wide"),t.parent().find(".in-cart").show(),addBasketCounter(u),$(".wish_item[data-item="+u+"]").removeClass("added"),$(".wish_item[data-item="+u+"]").find(".value").show(),$(".wish_item[data-item="+u+"]").find(".value.added").hide(),$("#basket_line .cart").length?($("#basket_line .cart").is(".empty_cart")&&($("#basket_line .cart").removeClass("empty_cart").find(".cart_wrapp a.basket_link").removeAttr("href").addClass("cart-call"),$("#basket_line .cart").removeClass("ecart"),touchBasket(".cart:not(.empty_cart) .basket_block .link")),reloadTopBasket("add",$("#basket_line"),200,5e3,"Y")):$("#basket_line .basket_fly").length&&basketFly($(window).outerWidth()>768?"open":"refresh")):showBasketError(BX.message(e.MESSAGE))):showBasketError(BX.message("CATALOG_PARTIAL_BASKET_PROPERTIES_ERROR"))}})}),$(document).on("click",".to-cart:not(.read_more)",function(t){t.preventDefault();var e=$(this),a=$(this).attr("data-quantity");a||($val=1);var i=$(this).data("props"),o="",s="",n="N",r={},c=$(this).data("iblockid"),l=$(this).data("offers"),d="",u="",p=$(this).attr("data-item");"Y"!=l?l="N":u=$(this).closest(".prices_tab").find(".bx_sku_props input").val(),i&&(o=i.split(";")),$(this).data("part_props")&&(s=$(this).data("part_props")),$(this).data("add_props")&&(n=$(this).data("add_props")),$(".rid_item").length?d=$(".rid_item").data("rid"):$(this).data("rid")&&(d=$(this).data("rid")),r=fillBasketPropsExt(e,"prop",e.data("bakset_div")),r.quantity=a,r.add_item="Y",r.rid=d,r.offers=l,r.iblockID=c,r.part_props=s,r.add_props=n,r.props=JSON.stringify(o),r.item=p,r.basket_props=u,"N"==e.data("empty_props")?showBasketError($("#"+e.data("bakset_div")).html(),BX.message("ERROR_BASKET_PROP_TITLE"),"Y",e):$.ajax({type:"POST",url:arOptimusOptions.SITE_DIR+"ajax/item.php",data:r,dataType:"json",success:function(t){getActualBasket(r.iblockID),null!==t?"STATUS"in t?(null===t.MESSAGE_EXT&&(t.MESSAGE_EXT=""),"OK"===t.STATUS?(e.hide(),e.closest(".counter_wrapp").find(".counter_block").hide(),e.parents("tr").find(".counter_block_wr .counter_block").hide(),e.closest(".button_block").addClass("wide"),e.parent().find(".in-cart").show(),addBasketCounter(p),$(".wish_item[data-item="+p+"]").removeClass("added"),$(".wish_item[data-item="+p+"]").find(".value").show(),$(".wish_item[data-item="+p+"]").find(".value.added").hide(),$("#basket_line .cart").length?($("#basket_line .cart").is(".empty_cart")&&($("#basket_line .cart").removeClass("empty_cart").find(".cart_wrapp a.basket_link").removeAttr("href").addClass("cart-call"),$("#basket_line .cart").removeClass("ecart"),touchBasket(".cart:not(.empty_cart) .basket_block .link")),reloadTopBasket("add",$("#basket_line"),200,5e3,"Y")):$("#basket_line .basket_fly").length&&basketFly($(window).outerWidth()>768?"open":"refresh")):showBasketError(BX.message(t.MESSAGE)+" <br/>"+t.MESSAGE_EXT)):showBasketError(BX.message("CATALOG_PARTIAL_BASKET_PROPERTIES_ERROR")):(e.hide(),e.closest(".counter_wrapp").find(".counter_block").hide(),e.parents("tr").find(".counter_block_wr .counter_block").hide(),e.closest(".button_block").addClass("wide"),e.parent().find(".in-cart").show(),addBasketCounter(p),$(".wish_item[data-item="+p+"]").removeClass("added"),$(".wish_item[data-item="+p+"]").find(".value").show(),$(".wish_item[data-item="+p+"]").find(".value.added").hide(),$("#basket_line .cart").length?($("#basket_line .cart").is(".empty_cart")&&($("#basket_line .cart").removeClass("empty_cart").find(".cart_wrapp a.basket_link").removeAttr("href").addClass("cart-call"),$("#basket_line .cart").removeClass("ecart"),touchBasket(".cart:not(.empty_cart) .basket_block .link")),reloadTopBasket("add",$("#basket_line"),200,5e3,"Y")):$("#basket_line .basket_fly").length&&$(window).outerWidth()>768&&basketFly("open"))}})}),$(document).on("click",".to-subscribe",function(t){if(t.preventDefault(),$(this).is(".auth"))location.href=arOptimusOptions.SITE_DIR+"auth/?backurl="+location.pathname;else{var e=$(this).attr("data-item"),a=$(this).attr("data-iblockid");$(this).hide(),$(this).parent().find(".in-subscribe").show(),$.get(arOptimusOptions.SITE_DIR+"ajax/item.php?item="+e+"&subscribe_item=Y",$.proxy(function(t){$(".wish_item[data-item="+e+"]").removeClass("added"),getActualBasket(a)}))}}),$(document).on("click",".in-subscribe",function(t){t.preventDefault();var e=$(this).attr("data-item"),a=$(this).attr("data-iblockid");$(this).hide(),$(this).parent().find(".to-subscribe").show(),$.get(arOptimusOptions.SITE_DIR+"ajax/item.php?item="+e+"&subscribe_item=Y",$.proxy(function(t){getActualBasket(a)}))}),$(document).on("click",".wish_item",function(t){t.preventDefault();var e=$(this).attr("data-quantity"),a=$(this).data("offers"),i=$(this).data("iblock"),o=$(this).data("props"),s="",n=$(this).data("item");item2=$(this).attr("data-item"),e||($val=1),"Y"!=a&&(a="N"),o&&(s=o.split(";")),$(this).hasClass("text")?$(this).hasClass("added")?($(".wish_item[data-item="+n+"]").removeClass("added"),$(".wish_item[data-item="+n+"]").find(".value").show(),$(".wish_item[data-item="+n+"]").find(".value.added").hide(),$(".like_icons").each(function(){$(this).find(".wish_item_button").length&&($(this).find(".wish_item_button").find('.wish_item[data-item="'+n+'"]').removeClass("added"),$(this).find(".wish_item_button").find('.wish_item[data-item="'+n+'"]').find(".value").show(),$(this).find(".wish_item_button").find('.wish_item[data-item="'+n+'"]').find(".value.added").hide())})):($(".wish_item[data-item="+n+"]").addClass("added"),$(".wish_item[data-item="+n+"]").find(".value").hide(),$(".wish_item[data-item="+n+"]").find(".value.added").css("display","block"),$(".like_icons").each(function(){$(this).find(".wish_item_button").length&&($(this).find(".wish_item_button").find('.wish_item[data-item="'+n+'"]').addClass("added"),$(this).find(".wish_item_button").find('.wish_item[data-item="'+n+'"]').find(".value").hide(),$(this).find(".wish_item_button").find('.wish_item[data-item="'+n+'"]').find(".value.added").show())})):$(this).hasClass("added")?($(this).hide(),$(this).closest(".wish_item_button").find(".to").show(),$(".like_icons").each(function(){$(this).find('.wish_item.text[data-item="'+n+'"]').length&&($(this).find('.wish_item.text[data-item="'+n+'"]').removeClass("added"),$(this).find('.wish_item.text[data-item="'+n+'"]').find(".value").show(),$(this).find('.wish_item.text[data-item="'+n+'"]').find(".value.added").hide()),$(this).find(".wish_item_button").length&&($(this).find(".wish_item_button").find('.wish_item[data-item="'+n+'"]').removeClass("added"),$(this).find(".wish_item_button").find('.wish_item[data-item="'+n+'"]').find(".value").show(),$(this).find(".wish_item_button").find('.wish_item[data-item="'+n+'"]').find(".value.added").hide())})):($(this).hide(),$(this).closest(".wish_item_button").find(".in").addClass("added").show(),$(".like_icons").each(function(){$(this).find('.wish_item.text[data-item="'+n+'"]').length&&($(this).find('.wish_item.text[data-item="'+n+'"]').addClass("added"),$(this).find('.wish_item.text[data-item="'+n+'"]').find(".value").hide(),$(this).find('.wish_item.text[data-item="'+n+'"]').find(".value.added").css({display:"block"})),$(this).find(".wish_item_button").length&&($(this).find(".wish_item_button").find('.wish_item[data-item="'+n+'"]').addClass("added"),$(this).find(".wish_item_button").find('.wish_item[data-item="'+n+'"]').find(".value").hide(),$(this).find(".wish_item_button").find('.wish_item[data-item="'+n+'"]').find(".value.added").show())})),$(".in-cart[data-item="+n+"]").hide(),$(".to-cart[data-item="+n+"]").parent().removeClass("wide"),$(".to-cart[data-item="+n+"]").show(),$(".counter_block[data-item="+n+"]").show(),$(this).closest(".module-cart").size()||$.ajax({type:"GET",url:arOptimusOptions.SITE_DIR+"ajax/item.php",data:"item="+item2+"&quantity="+e+"&wish_item=Y&offers="+a+"&iblockID="+i+"&props="+JSON.stringify(s),dataType:"json",success:function(t){getActualBasket(i),null!==t?(null===t.MESSAGE_EXT&&(t.MESSAGE_EXT=""),"STATUS"in t&&"OK"===t.STATUS?$("#basket_line .cart").size()?reloadTopBasket("wish",$("#basket_line"),200,5e3,"N"):basketFly("wish"):showBasketError(BX.message(t.MESSAGE)+" <br/>"+t.MESSAGE_EXT,BX.message("ERROR_ADD_DELAY_ITEM"))):$("#basket_line .cart").size()?reloadTopBasket("wish",$("#basket_line"),200,5e3,"N"):basketFly("wish")}})}),$(document).on("click",".compare_item",function(t){t.preventDefault();var e=$(this).attr("data-item"),a=$(this).attr("data-iblock");$(this).hasClass("text")?$(this).hasClass("added")?($(".compare_item[data-item="+e+"]").removeClass("added"),$(".compare_item[data-item="+e+"]").find(".value").show(),$(".compare_item[data-item="+e+"]").find(".value.added").hide(),$(".like_icons").each(function(){$(this).find(".compare_item_button").length&&($(this).find(".compare_item_button").find('.compare_item[data-item="'+e+'"]').removeClass("added"),$(this).find(".compare_item_button").find('.compare_item[data-item="'+e+'"]').find(".value").show(),$(this).find(".compare_item_button").find('.compare_item[data-item="'+e+'"]').find(".value.added").hide())})):($(".compare_item[data-item="+e+"]").addClass("added"),$(".compare_item[data-item="+e+"]").find(".value").hide(),$(".compare_item[data-item="+e+"]").find(".value.added").css("display","block"),$(".like_icons").each(function(){$(this).find(".compare_item_button").length&&($(this).find(".compare_item_button").find('.compare_item[data-item="'+e+'"]').addClass("added"),$(this).find(".compare_item_button").find('.compare_item[data-item="'+e+'"]').find(".value.added").show(),$(this).find(".compare_item_button").find('.compare_item[data-item="'+e+'"]').find(".value").hide())})):$(this).hasClass("added")?($(this).hide(),$(this).closest(".compare_item_button").find(".to").show(),$(".like_icons").each(function(){$(this).find('.compare_item.text[data-item="'+e+'"]').length&&($(this).find('.compare_item.text[data-item="'+e+'"]').removeClass("added"),$(this).find('.compare_item.text[data-item="'+e+'"]').find(".value").show(),$(this).find('.compare_item.text[data-item="'+e+'"]').find(".value.added").hide()),$(this).find(".compare_item_button").length&&($(this).find(".compare_item_button").find('.compare_item[data-item="'+e+'"]').removeClass("added"),$(this).find(".compare_item_button").find('.compare_item[data-item="'+e+'"]').find(".value").show(),$(this).find(".compare_item_button").find('.compare_item[data-item="'+e+'"]').find(".value.added").hide())})):($(this).hide(),$(this).closest(".compare_item_button").find(".in").show(),$(".like_icons").each(function(){$(this).find('.compare_item.text[data-item="'+e+'"]').length&&($(this).find('.compare_item.text[data-item="'+e+'"]').addClass("added"),$(this).find('.compare_item.text[data-item="'+e+'"]').find(".value").hide(),$(this).find('.compare_item.text[data-item="'+e+'"]').find(".value.added").css({display:"block"})),$(this).find(".compare_item_button").length&&($(this).find(".compare_item_button").find('.compare_item[data-item="'+e+'"]').addClass("added"),$(this).find(".compare_item_button").find('.compare_item[data-item="'+e+'"]').find(".value.added").show(),$(this).find(".compare_item_button").find('.compare_item[data-item="'+e+'"]').find(".value").hide())})),$.get(arOptimusOptions.SITE_DIR+"ajax/item.php?item="+e+"&compare_item=Y&iblock_id="+a,$.proxy(function(t){getActualBasket(a),jsAjaxUtil.InsertDataToNode(arOptimusOptions.SITE_DIR+"ajax/show_compare_preview_top.php","compare_line",!1),$("#compare_fly").length&&jsAjaxUtil.InsertDataToNode(arOptimusOptions.SITE_DIR+"ajax/show_compare_preview_fly.php","compare_fly",!1)}))}),$(".fancy").fancybox({openEffect:"fade",closeEffect:"fade",nextEffect:"fade",prevEffect:"fade",tpl:{closeBtn:'<a title="'+BX.message("FANCY_CLOSE")+'" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="'+BX.message("FANCY_NEXT")+'" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="'+BX.message("FANCY_PREV")+'" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'}}),$(".tabs>li").on("click",function(){if(!$(this).hasClass("active")){var t=$(this).index(),e=$(this).closest(".top_blocks").find(".slider_navigation").find(">li:eq("+t+")"),a=$(this).closest(".top_blocks").siblings(".tabs_content").find(">li:eq("+t+")");$(this).addClass("active").addClass("cur").siblings().removeClass("active").removeClass("cur"),a.addClass("cur").siblings().removeClass("cur"),e.addClass("cur").siblings().removeClass("cur"),a.find(".catalog_block .catalog_item_wrapp .catalog_item .item_info:visible .item-title").sliceHeight({item:".catalog_item:visible"}),a.find(".catalog_block .catalog_item_wrapp .catalog_item .item_info:visible").sliceHeight({classNull:".footer_button",item:".catalog_item:visible"}),a.find(".catalog_block .catalog_item_wrapp .catalog_item:visible").sliceHeight({classNull:".footer_button",item:".catalog_item:visible"})}}),$(".search_block .icon").on("click",function(){var t=$(this);$(this).hasClass("open")?($(this).closest(".center_block").find(".search_middle_block").removeClass("active"),$(this).removeClass("open"),$(this).closest(".center_block").find(".search_middle_block").find(".noborder").hide()):(setTimeout(function(){t.closest(".center_block").find(".search_middle_block").find(".noborder").show()},100),$(this).closest(".center_block").find(".search_middle_block").addClass("active"),$(this).addClass("open"))}),$(document).on("mouseenter",".display_list .item_wrap",function(){$(this).prev().addClass("prev")}),$(document).on("mouseleave",".display_list .item_wrap",function(){$(this).prev().removeClass("prev")}),$(document).on("mouseenter",".catalog_block .item_wrap",function(){$(this).addClass("shadow_delay")}),$(document).on("mouseleave",".catalog_block .item_wrap",function(){$(this).removeClass("shadow_delay")}),$(document).on("click",".no_goods .button",function(){$(".bx_filter .smartfilter .bx_filter_search_reset").trigger("click")}),$(document).on("click",".ajax_load_btn",function(){var t=$(this).closest(".right_block").find(".module-pagination .flex-direction-nav .flex-next").attr("href"),e=$(this).find(".more_text_ajax");e.addClass("loading"),$.ajax({url:t,data:{ajax_get:"Y"},success:function(t){$.parseHTML(t);e.removeClass("loading"),$(".display_list").length?$(".display_list").append(t):$(".block_list").length?($(".block_list").append(t),touchItemBlock(".catalog_item a")):$(".module_products_list").length&&$(".module_products_list > tbody").append(t),setStatusButton(),initCountdown(),BX.onCustomEvent("onAjaxSuccess"),$(".bottom_nav").html($(t).find(".bottom_nav").html())}})}),$(document).on("click",".bx_compare .tabs-head li",function(){var t=$(this).find(".sortbutton").data("href");BX.showWait(BX("bx_catalog_compare_block")),$.ajax({url:t,data:{ajax_action:"Y"
},success:function(e){history.pushState(null,null,t),$("#bx_catalog_compare_block").html(e),BX.closeWait()}})});var e;$(document).on({mouseover:function(t){var a=$(this),i=a.closest("tbody").index()+1,o=a.index()+1;e=$(t.delegateTarget).find(".data_table_props").children(":nth-child("+i+")").children(":nth-child("+o+")").addClass("hovered")},mouseleave:function(t){e&&e.removeClass("hovered")}},".bx_compare .data_table_props tbody>tr"),$(document).on("click",".fancy_offer",function(t){t.preventDefault();var e=[];$(".sliders .slides_block li").each(function(){var t={};t={title:$(this).find("img").attr("alt"),href:$(this).data("big")},$(this).hasClass("current")?e.unshift(t):e.push(t)}),console.log(e),$.fancybox(e,{openEffect:"fade",closeEffect:"fade",nextEffect:"fade",prevEffect:"fade",type:"image",tpl:{closeBtn:'<a title="'+BX.message("FANCY_CLOSE")+'" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="'+BX.message("FANCY_NEXT")+'" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="'+BX.message("FANCY_PREV")+'" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'}})}),$(".tabs_section .tabs-head li").live("click",function(){$(this).is(".current")||($(".tabs_section .tabs-head li").removeClass("current"),$(this).addClass("current"),$(".tabs_section ul.tabs_content li").removeClass("current"),"product_reviews_tab"==$(this).attr("id")?($(".shadow.common").hide(),$("#reviews_content").show()):($(".shadow.common").show(),$("#reviews_content").hide(),$(".tabs_section ul.tabs_content > li:eq("+$(this).index()+")").addClass("current")))}),setTimeout(function(){$(".jobs_wrapp .item:first .name tr").trigger("click")},300),$(".buy_block .slide_offer").on("click",function(){scroll_block($(".tabs_section"))}),$(".share_wrapp .text").on("click",function(){$(this).parent().find(".shares").fadeToggle()}),$("html, body").live("mousedown",function(t){t.stopPropagation(),$(".shares").fadeOut(),$(".search_middle_block").removeClass("active_wide")}),$(".share_wrapp").find("*").live("mousedown",function(t){t.stopPropagation()}),$(document).on("click",".reviews-collapse-link",function(){$(".reviews-reply-form").slideToggle()}),initCountdown(),$(".menu.adaptive").on("click",function(){$(this).toggleClass("opened"),$(this).hasClass("opened")?$(".mobile_menu").toggleClass("opened").slideDown():$(".mobile_menu").toggleClass("opened").slideUp()}),$(".mobile_menu .has-child >a").on("click",function(t){var e=$(this).parent();t.preventDefault(),e.toggleClass("opened"),e.find(".dropdown").slideToggle()}),$(".mobile_menu .search-input-div input").live("keyup",function(t){var e=$(this).val();$(".center_block .stitle_form input").val(e),13==t.keyCode&&$(".center_block .stitle_form form").submit()}),$(".center_block .stitle_form input").live("keyup",function(t){var e=$(this).val();$(".mobile_menu .search-input-div input").val(e),13==t.keyCode&&$(".center_block .stitle_form form").submit()}),$(".mobile_menu .search-button-div button").live("click",function(t){t.preventDefault();var e=$(this).parents().find("input").val();$(".center_block .stitle_form input").val(e),$(".center_block .stitle_form form").submit()}),$(".btn.btn-add").on("click",function(){$.ajax({type:"GET",url:arOptimusOptions.SITE_DIR+"ajax/clearBasket.php",success:function(t){}})}),$(".sale-order-detail-payment-options-methods-info-change-link").on("click",function(){$(this).closest(".sale-order-detail-payment-options-methods-info").addClass("opened").siblings().addClass("opened")}),$(document).on("click",".expand_block",function(){togglePropBlock($(this))}),document.addEventListener("touchend",function(t){if($(t.target).closest(".menu_item_l1").length||($(".menu .menu_item_l1 .child").css({display:"none"}),$(".menu_item_l1").removeClass("hover")),$(t.target).closest(".basket_block").length||($(".basket_block .link").removeClass("hover"),$(".basket_block .basket_popup_wrapp").slideUp()),!$(t.target).closest(".catalog_item").length){var e=1*$(".tab:visible").attr("data-unhover");$(".tab:visible").stop().animate({height:e},100),$(".tab:visible").find(".catalog_item").removeClass("hover"),$(".tab:visible").find(".catalog_item .buttons_block").stop().fadeOut(233),$(".catalog_block").length&&$(".catalog_block").find(".catalog_item").removeClass("hover")}},!1),$(document).on("keyup",".coupon .input_coupon input",function(){$(this).val().length?($(this).removeClass("error"),$(this).closest(".input_coupon").find(".error").remove()):($(this).addClass("error"),$("<label class='error'>"+BX.message("INPUT_COUPON")+"</label>").insertBefore($(this)))}),BX.addCustomEvent(window,"onAjaxSuccess",function(){initSelects(document),InitOrderCustom(),$(".catalog_detail").length&&($(".bx_filter").remove(),InitFlexSlider()),arOptimusOptions.PAGES.ORDER_PAGE&&orderActions()}),BX.addCustomEvent(window,"onFrameDataRequestFail",function(t){console.log(t)})}),funcDefined("togglePropBlock")||(togglePropBlock=function(t){var e=t.closest(".bx_filter_parameters_box_container").find(".hidden_values");e.length&&(t.hasClass("inner_text")||t.hasClass("expand_block"))&&(e.is(":visible")?(t.text(BX.message("FILTER_EXPAND_VALUES")),e.hide()):(t.text(BX.message("FILTER_HIDE_VALUES")),e.show()))}),funcDefined("showPhoneMask")||(showPhoneMask=function(t){$(t).inputmask("mask",{mask:arOptimusOptions.THEME.PHONE_MASK,showMaskOnHover:!1})}),funcDefined("parseUrlQuery")||(parseUrlQuery=function(){var t={};if(location.search)for(var e=location.search.substr(1).split("&"),a=0;a<e.length;a++){var i=e[a].split("=");t[i[0]]=i[1]}return t}),funcDefined("getActualBasket")||(getActualBasket=function(t){var e="";"undefined"!=typeof t&&(e={iblockID:t}),$.ajax({type:"GET",url:arOptimusOptions.SITE_DIR+"ajax/actualBasket.php",data:e,success:function(t){$(".js_ajax").length||$("body").append('<div class="js_ajax"></div>'),$(".js_ajax").html(t)}})}),funcDefined("orderActions")||(orderActions=function(){arOptimusOptions.PAGES.ORDER_PAGE&&$(".bx-soa-cart-total").length&&($(".change_basket").length||$(".bx-soa-cart-total").prepend('<div class="change_basket">'+BX.message("BASKET_CHANGE_TITLE")+'<a href="'+arOptimusOptions.SITE_DIR+'basket/" class="change_link">'+BX.message("BASKET_CHANGE_LINK")+"</a></div>"),"object"==typeof BX.Sale.OrderAjaxComponent&&BX.Sale.OrderAjaxComponent.hasOwnProperty("params")&&($(".bx-soa-cart-total .change_link").attr("href",BX.Sale.OrderAjaxComponent.params.PATH_TO_BASKET),arOptimusOptions.PRICES.MIN_PRICE&&arOptimusOptions.PRICES.MIN_PRICE>Number(BX.Sale.OrderAjaxComponent.result.TOTAL.ORDER_PRICE)&&($('<div class="fademask_ext"></div>').appendTo($("body")),location.href=BX.Sale.OrderAjaxComponent.params.PATH_TO_BASKET)),$(".bx-ui-sls-quick-locations.quick-locations").on("click",function(){$(this).siblings().removeClass("active"),$(this).addClass("active")}))}),funcDefined("basketActions")||(basketActions=function(){arOptimusOptions.PAGES.BASKET_PAGE&&(checkMinPrice(),$(".bx_sort_container").append('<div class="top_control basket_sort"><span class="delete_all button grey_br transparent remove_all_basket">'+BX.message("BASKET_CLEAR_ALL_BUTTON")+"</span></div>"),"Y"==arOptimusOptions.THEME.SHOW_BASKET_PRINT&&$(".bx_sort_container .top_control").prepend('<span class="basket_print button grey_br transparent">'+BX.message("BASKET_PRINT_BUTTON")+"</span>"),$(".bx_sort_container .top_control .delete_all").data("type",$(".bx_sort_container a.current").index()),$(".bx_ordercart .bx_ordercart_coupon #coupon").wrap('<div class="input"></div>'),$(".bx_sort_container > a").on("click",function(){$(".bx_sort_container .top_control .delete_all").data("type",$(this).index())}),$(".basket_print").on("click",function(){window.open(location.pathname+"?print=Y","_blank")}),$(".delete_all").on("click",function(){$.post(arOptimusOptions.SITE_DIR+"ajax/action_basket.php","TYPE="+$(this).data("type")+"&CLEAR_ALL=Y",$.proxy(function(t){location.reload()}))}),$(".bx_item_list_section .bx_catalog_item").sliceHeight({row:".bx_item_list_slide",item:".bx_catalog_item"}),BX.addCustomEvent("onAjaxSuccess",function(){checkMinPrice();var t=$.trim($("#warning_message").text());$("#basket_items_list .error_text").detach(),""!=t&&($("#warning_message").hide().text(""),$("#basket_items_list").prepend('<div class="error_text">'+t+"</div>"))}))}),funcDefined("checkMinPrice")||(checkMinPrice=function(){if(arOptimusOptions.PAGES.BASKET_PAGE){var t=$("#allSum_FORMATED").text().replace(/[^0-9\.]/g,""),e=parseFloat(t);$(".catalog_back").length||$(".bx_ordercart_order_pay_center").prepend('<a href="/catalog/" class="catalog_back button transparent big_btn grey_br">'+BX.message("BASKET_CONTINUE_BUTTON")+"</a>"),arOptimusOptions.PRICES.MIN_PRICE?arOptimusOptions.PRICES.MIN_PRICE>e?($(".icon_error_wrapper").length||$(".bx_ordercart_order_pay_center").prepend('<div class="icon_error_wrapper"><div class="icon_error_block">'+BX.message("MIN_ORDER_PRICE_TEXT").replace("#PRICE#",jsPriceFormat(arOptimusOptions.PRICES.MIN_PRICE))+"</div></div>"),$(".oneclickbuy.fast_order").length&&$(".oneclickbuy.fast_order").remove(),$(".bx_ordercart_order_pay .checkout").length&&$(".bx_ordercart_order_pay .checkout").remove()):($(".icon_error_wrapper").length&&$(".icon_error_wrapper").remove(),$(".bx_ordercart_order_pay .checkout").length?$(".bx_ordercart .bx_ordercart_order_pay .checkout").css("opacity","1"):$(".bx_ordercart_order_pay_center").append('<a href="javascript:void(0)" onclick="checkOut();" class="checkout" style="opacity: 1;">'+BX.message("BASKET_ORDER_BUTTON")+"</a>"),$(".oneclickbuy.fast_order").length||"Y"!=arOptimusOptions.THEME.SHOW_ONECLICKBUY_ON_BASKET_PAGE||$(".bx_ordercart_order_pay_center").append('<span class="oneclickbuy button big_btn fast_order" onclick="oneClickBuyBasket()">'+BX.message("BASKET_QUICK_ORDER_BUTTON")+"</span>")):($(".bx_ordercart .bx_ordercart_order_pay .checkout").css("opacity","1"),$(".oneclickbuy.fast_order").length||"Y"!=arOptimusOptions.THEME.SHOW_ONECLICKBUY_ON_BASKET_PAGE||$(".bx_ordercart_order_pay_center").append('<span class="oneclickbuy button big_btn fast_order" onclick="oneClickBuyBasket()">'+BX.message("BASKET_QUICK_ORDER_BUTTON")+"</span>"))}});var isFrameDataReceived=!1;"undefined"!=typeof window.frameCacheVars?BX.addCustomEvent("onFrameDataReceived",function(t){initFull(),isFrameDataReceived=!0}):$(document).ready(initFull),funcDefined("setHeightBlockSlider")||(setHeightBlockSlider=function(){$(document).find(".specials.tab_slider_wrapp").outerWidth();$(document).find(".specials.tab_slider_wrapp .tabs_content > li.cur").css("height",""),$(document).find(".specials.tab_slider_wrapp .tabs_content .tab.cur .tabs_slider .buttons_block").hide(),$(document).find(".specials.tab_slider_wrapp .tabs_content > li.cur").equalize({children:".item-title"}),$(document).find(".specials.tab_slider_wrapp .tabs_content > li.cur").equalize({children:".item_info"}),$(document).find(".specials.tab_slider_wrapp .tabs_content > li.cur").equalize({children:".catalog_item"});var t=$(document).find(".specials.tab_slider_wrapp .tabs_content .tab.cur .tabs_slider li .buttons_block").height(),e=1*$(document).find(".specials.tab_slider_wrapp .tabs_content .tab.cur").height(),a=e+t+50;$(document).find(".specials.tab_slider_wrapp .tabs_content .tab.cur").attr("data-unhover",e),$(document).find(".specials.tab_slider_wrapp .tabs_content .tab.cur").attr("data-hover",a),$(document).find(".specials.tab_slider_wrapp .tabs_content").height(e)}),funcDefined("checkStickyFooter")||(checkStickyFooter=function(){try{ignoreResize.push(!0),$("#content").css("min-height","");var t=$("#content").offset().top,e=t+$("#content").outerHeight(),a=$("footer").offset().top;$("#content").css("min-height",$(window).height()-t-(a-e)-$("footer").outerHeight()+"px"),ignoreResize.pop()}catch(i){console.error(i)}});var timerResize=!1,ignoreResize=[];$(window).resize(function(){$("html.print").length||checkStickyFooter(),ignoreResize.length||(timerResize&&(clearTimeout(timerResize),timerResize=!1),timerResize=setTimeout(function(){BX.onCustomEvent("onWindowResize",!1)},50))});var timerScroll=!1,ignoreScroll=[],documentScrollTopLast=$(document).scrollTop();$(window).scroll(function(){documentScrollTopLast=$(document).scrollTop(),ignoreScroll.length||(timerScroll&&(clearTimeout(timerScroll),timerScroll=!1),timerScroll=setTimeout(function(){BX.onCustomEvent("onWindowScroll",!1)},50))}),BX.addCustomEvent("onWindowResize",function(t){try{if(ignoreResize.push(!0),checkScrollToTop(),checkPopupWidth(),checkCaptchaWidth(),checkFormWidth(),checkFormControlWidth(),touchMenu("ul.menu:not(.opened) > li.menu_item_l1"),touchBasket(".cart:not(.empty_cart) .basket_block .link"),CheckObjectsSizes(),CheckFlexSlider(),InitZoomPict(),initSly(),checkVerticalMobileFilter(),window.matchMedia("(max-width: 768px)").matches&&$(".group_description_block.top").length){var e=$(".adaptive_filter").position().top;$(".bx_filter.bx_filter_vertical").css({top:e+20})}window.matchMedia("(min-width: 767px)").matches&&$(".wrapper_middle_menu.wrap_menu").removeClass("mobile"),window.matchMedia("(max-width: 767px)").matches&&$(".wrapper_middle_menu.wrap_menu").addClass("mobile"),$(window).outerWidth()>600?($("#header ul.menu").removeClass("opened").css("display",""),$(".authorization-cols").length&&($(".authorization-cols").equalize({children:".col .auth-title",reset:!0}),$(".authorization-cols").equalize({children:".col .form-block",reset:!0}))):($(".authorization-cols .auth-title").css("height",""),$(".authorization-cols .form-block").css("height","")),$("#basket_form").length&&$(window).outerWidth()<=600&&$("#basket_form .tabs_content.basket > li.cur td").each(function(){$(this).css("width","")}),$(".front_slider_wrapp").length&&$(".extended_pagination li i").each(function(){$(this).css({borderBottomWidth:$(this).parent("li").outerHeight()/2,borderTopWidth:$(this).parent("li").outerHeight()/2})}),setHeightCompany(),$(".bx_filter_section .bx_filter_select_container").each(function(){var t=$(this).closest(".bx_filter_parameters_box").attr("property_id");$("#smartFilterDropDown"+t).length&&$("#smartFilterDropDown"+t).css("max-width",$(this).width())})}catch(a){}finally{ignoreResize.pop()}}),BX.addCustomEvent("onWindowScroll",function(t){try{ignoreScroll.push(!0)}catch(e){}finally{ignoreScroll.pop()}});100  114842|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/js/main.js|d70690f1var basketTimeoutSlide;
var resizeEventTimer;

var funcDefined = function(func){
	try {
		if (typeof func == 'function') {
			return true;
		} else {
			return typeof window[func] === "function";
		}
	} catch (e) {
		return false;
	}
}

if(!funcDefined('setLocationSKU')){
	function setLocationSKU(ID){
		var objUrl = parseUrlQuery(),
			j = 0,
			prefix = '',
			query_string = '',
			url = '';
		if('oid' in objUrl)
		{
			if(parseInt(objUrl.oid)>0)
			{
				objUrl.oid = ID;
				for(var i in objUrl)
				{
					if(parseInt(j)>0)
						prefix = '&';
					query_string = query_string + prefix + i + '='+ objUrl[i];
					j++;
				}
				if(query_string)
				{
					url = location.pathname+'?'+query_string;			
				}
				try {
					history.pushState(null, null, url);
					return;
				} catch(e) {}
				location.hash = '#' + url.substr(1)
			}
		}
	}
}

if(!funcDefined('trimPrice')){
	var trimPrice = function trimPrice(s){
		s=s.split(" ").join("");
		s=s.split("&nbsp;").join("");
		return s;
	}
}

if(!funcDefined('markProductRemoveBasket')){
	var markProductRemoveBasket = function markProductRemoveBasket(id){
		$('.in-cart[data-item='+id+']').hide();
		$('.to-cart[data-item='+id+']').show();
		$('.to-cart[data-item='+id+']').closest('.button_block').removeClass('wide');
		$('.to-cart[data-item='+id+']').closest('.counter_wrapp').find('.counter_block').show();
		$('.counter_block[data-item='+id+']').show();
		$('.in-subscribe[data-item='+id+']').hide();
		$('.to-subscribe[data-item='+id+']').show();
		$('.wish_item[data-item='+id+']').removeClass("added");
		$('.wish_item[data-item='+id+'] .value:not(.added)').show();
		$('.wish_item[data-item='+id+'] .value.added').hide();
	}
}

if(!funcDefined('markProductAddBasket')){
	var markProductAddBasket = function markProductAddBasket(id){
		$('.to-cart[data-item='+id+']').hide();
		$('.to-cart[data-item='+id+']').closest('.counter_wrapp').find('.counter_block').hide();
		$('.to-cart[data-item='+id+']').closest('.button_block').addClass('wide');
		$('.in-cart[data-item='+id+']').show();
		$('.wish_item[data-item='+id+']').removeClass("added");
		$('.wish_item[data-item='+id+'] .value:not(.added)').show();
		$('.wish_item[data-item='+id+'] .value.added').hide();
	}
}

if(!funcDefined('markProductDelay')){
	var markProductDelay = function markProductDelay(id){
		$('.in-cart[data-item='+id+']').hide();
		$('.to-cart[data-item='+id+']').show();
		$('.to-cart[data-item='+id+']').closest('.counter_wrapp').find('.counter_block').show();
		$('.to-cart[data-item='+id+']').closest('.button_block').removeClass('wide');
		$('.wish_item[data-item='+id+']').addClass("added");
		$('.wish_item[data-item='+id+'] .value:not(.added)').hide();
		// $('.wish_item[data-item='+id+'] .value.added').show();
		$('.wish_item[data-item='+id+'] .value.added').css('display','block');
	}
}

if(!funcDefined('markProductSubscribe')){
	var markProductSubscribe = function markProductSubscribe(id){
		$('.to-subscribe[data-item='+id+']').hide();
		$('.in-subscribe[data-item='+id+']').css('display','block');
	}
}

if(!funcDefined('basketFly')){
	var basketFly = function basketFly(action){
		$.post( arOptimusOptions['SITE_DIR']+"ajax/basket_fly.php", "PARAMS="+$("#basket_form").find("input#fly_basket_params").val(), $.proxy(function( data ){
			var small=$('.opener .basket_count').hasClass('small'),
				basket_count=$(data).find('.basket_count').find('.items div').text();
			$('#basket_line .basket_fly').addClass('loaded').html(data);

			if(action=="refresh"){
				$('li[data-type=AnDelCanBuy]').trigger('click');
			}

			if(window.matchMedia('(min-width: 769px)').matches){
				if (action=='open') {
					if(small){
						if(arOptimusOptions['THEME']['SHOW_BASKET_ONADDTOCART'] !== 'N'){
							$('.opener .basket_count').click();
						}
					}else{
						$('.opener .basket_count').removeClass('small')
						$('.tabs_content.basket li[item-section="AnDelCanBuy"]').addClass('cur');
						$('#basket_line ul.tabs li[item-section="AnDelCanBuy"]').addClass('cur');
					}
				} else if (action=='wish') {
					if(small){
						if(arOptimusOptions['THEME']['SHOW_BASKET_ONADDTOCART'] !== 'N'){
							$('.opener .wish_count').click();
						}
					}else{
						$('.opener .wish_count').removeClass('small')
						$('.tabs_content.basket li[item-section="DelDelCanBuy"]').addClass('cur');
						$('#basket_line ul.tabs li[item-section="DelDelCanBuy"]').addClass('cur');
					}
				} else {
					if(arOptimusOptions['THEME']['SHOW_BASKET_ONADDTOCART'] !== 'N'){
						$('.opener .basket_count').click();
					}
				}
			}
		}));
	}
}

if(!funcDefined("clearViewedProduct")){
	function clearViewedProduct(){
		try{
			var siteID = arOptimusOptions.SITE_ID;
			var localKey = 'OPTIMUS_VIEWED_ITEMS_' + siteID;
			var cookieParams = {path: '/', expires: 30};
			if(typeof BX.localStorage !== 'undefined'){
				// remove local storage
				BX.localStorage.set(localKey, {}, 0);
			}
			// remove cookie
			$.removeCookie(localKey, cookieParams);
		}
		catch(e){
			console.error(e);
		}
	}
}

if(!funcDefined("setViewedProduct")){
	function setViewedProduct(id, arData){
		try{

			// save $.cookie option
			var bCookieJson = $.cookie.json;
			$.cookie.json = true;

			var siteID = arOptimusOptions.SITE_ID;
			var localKey = 'OPTIMUS_VIEWED_ITEMS_' + siteID;
			var cookieParams = {path: '/', expires: 30};

			if((typeof BX.localStorage !== 'undefined') && (typeof id !== 'undefined') && (typeof arData !== 'undefined')){
				var PRODUCT_ID = (typeof arData.PRODUCT_ID !== 'undefined') ? arData.PRODUCT_ID : id;
				var arViewedLocal = BX.localStorage.get(localKey) ? BX.localStorage.get(localKey) : {};
				var arViewedCookie = $.cookie(localKey) ? $.cookie(localKey) : {};
				var count = 0;

				// delete some items (sync cookie & local storage)
				for(var _id in arViewedLocal){
					arViewedLocal[_id].IS_LAST = false;
					if(typeof arViewedCookie[_id] === 'undefined'){
						delete arViewedLocal[_id];
					}
				}
				for(var _id in arViewedCookie){
					if(typeof arViewedLocal[_id] === 'undefined'){
						delete arViewedCookie[_id];
					}
				}

				for(var _id in arViewedCookie){
					count++;
				}

				// delete item if other item (offer) of that PRODUCT_ID is exists
				if(typeof arViewedLocal[PRODUCT_ID] !== 'undefined'){
					if(arViewedLocal[PRODUCT_ID].ID != id){
						delete arViewedLocal[PRODUCT_ID];
						delete arViewedCookie[PRODUCT_ID];
					}
				}

				delete arViewedLocal[2243];
				delete arViewedCookie[2243];

				var time = new Date().getTime();
				arData.ID = id;
				arData.ACTIVE_FROM = time;
				arData.IS_LAST = true;
				arViewedLocal[PRODUCT_ID] = arData;
				arViewedCookie[PRODUCT_ID] = [time.toString(), arData.PICTURE_ID];

				$.cookie(localKey, arViewedCookie, cookieParams);
				BX.localStorage.set(localKey, arViewedLocal, 2592000);  // 30 days
			}
		}
		catch(e){
			console.error(e);
		}
		finally{
			// restore $.cookie option
			$.cookie.json = bCookieJson;
		}
	}
}



if(!funcDefined('initSelects')){
	function initSelects(target){
		var iOS = ( navigator.userAgent.match(/(iPad|iPhone|iPod)/g) ? true : false );
		if ( iOS ) return;
		if($("#bx-soa-order").length)
			return;
		// SELECT STYLING
		$(target).find('.wrapper select:visible').ikSelect({
			syntax: '<div class="ik_select_link"> \
						<span class="ik_select_link_text"></span> \
						<div class="trigger"></div> \
					</div> \
					<div class="ik_select_dropdown"> \
						<div class="ik_select_list"> \
						</div> \
					</div>',
			dynamicWidth: true,
			ddMaxHeight: 112,
			customClass: 'common_select',
			//equalWidths: true,
			onShow: function(inst){
				inst.$dropdown.css('top', (parseFloat(inst.$dropdown.css('top'))-5)+'px');
				if ( inst.$dropdown.outerWidth() < inst.$link.outerWidth() ){
					inst.$dropdown.css('width', inst.$link.outerWidth());
				}
				if ( inst.$dropdown.outerWidth() > inst.$link.outerWidth() ){
					inst.$dropdown.css('width', inst.$link.outerWidth());
				}
				var count=0,
					client_height=0;
				inst.$dropdown.css('left', inst.$link.offset().left);
				$(inst.$listInnerUl).find('li').each(function(){
					if(!$(this).hasClass('ik_select_option_disabled')){
						++count;
						client_height+=$(this).outerHeight();
					}
				})
				if(client_height<112){
					inst.$listInner.css('height', 'auto');
				}else{
					inst.$listInner.css('height', '112px');
				}
				inst.$link.addClass('opened');
				inst.$listInner.addClass('scroller');
			},
			onHide: function(inst){
				inst.$link.removeClass('opened');
			}
		});
		// END OF SELECT STYLING

		var timeout;
		$(window).on('resize', function(){
			clearTimeout(timeout);
			timeout = setTimeout(function(){
				//$('select:visible').ikSelect('redraw');
				var inst='';
				if(inst=$('.common_select-link.opened + select').ikSelect().data('plugin_ikSelect')){
					inst.$dropdown.css('left', inst.$link.offset().left+'px');
				}
			}, 20);
		});
	}
}

if(!funcDefined('CheckTopMenuFullCatalogSubmenu')){
	CheckTopMenuFullCatalogSubmenu = function(){
		var $menu = $('.menu_top_block');
		var $wrapmenu = $menu.parents('.wrap_menu');
		var wrapMenuWidth = $wrapmenu.actual('outerWidth');
		var wrapMenuLeft = $wrapmenu.offset().left;
		var wrapMenuRight = wrapMenuLeft + wrapMenuWidth;
		var bCatalogFirst = $menu.hasClass('catalogfirst');
		var findMenuLi = $('.menu_top_block:visible li.full');
		var parentSubmenuWidth = $menu.actual('outerWidth');

		if($('.catalog_block.menu_top_block').length){
			if($('.catalog_block.menu_top_block').is(':visible'))
				findMenuLi=$('.menu_top_block.catalog_block li.full');
		}

		findMenuLi.each(function(){
			var $this = $(this);
			var $submenu = $this.find('>.dropdown');

			if($submenu.length){
				if(bCatalogFirst){
					$submenu.css({left: parentSubmenuWidth + 'px', width: (wrapMenuWidth - parentSubmenuWidth) + 'px', 'padding-left': '0px', 'padding-right': '0px'});
				}
				else{
					$submenu.css({left: ($this.offset().left * -1) + 'px', width: ($(window).width() - 1) + 'px', 'padding-left': wrapMenuLeft + 'px', 'padding-right': ($(window).width() - wrapMenuRight) + 'px'});
				}
				if(!isOnceInited && bCatalogFirst && arOptimusOptions["THEME"]["MENU_POSITION"]=="top"){
					$this.on('mouseenter', function(){
						$submenu.css('min-height', $this.closest('.dropdown').actual('outerHeight') + 'px');
					});
				}
			}
		});
	}
}

$.fn.getMaxHeights = function( outer, classNull, minHeight ){
	var maxHeight = this.map( function( i, e ){
		var calc_height=0;

		$(e).css('height', '');

		if( outer == true ){
			calc_height=$(e).actual('outerHeight');
		}else{
			calc_height=$(e).actual('height');
		}
		return calc_height;
	}).get();
	for(var i = 0, c = maxHeight.length; i < c; ++i){
		if(maxHeight[i] % 2){
			--maxHeight[i];
		}
	}
	return Math.max.apply( this, maxHeight );
}

$.fn.equalizeHeights = function( outer, classNull, minHeight ){
	var maxHeight = this.map( function( i, e ){
		var minus_height=0,
			calc_height=0;
		if(classNull!==false){
			minus_height=parseInt($(e).find(classNull).actual('outerHeight'));
		}
		if(minus_height)
			minus_height+=12;
		$(e).css('height', '');
		if( outer == true ){
			calc_height=$(e).actual('outerHeight')-minus_height;
		}else{
			calc_height=$(e).actual('height')-minus_height;
		}
		if(minHeight!==false){
			if(calc_height<minHeight){
				calc_height+=(minHeight-calc_height);
			}
			if(window.matchMedia('(max-width: 520px)').matches){
				calc_height=300;
			}
			if(window.matchMedia('(max-width: 400px)').matches){
				calc_height=200;
			}
		}
		return calc_height;
	}).get();

	for(var i = 0, c = maxHeight.length; i < c; ++i){
		if(maxHeight[i] % 2){
			--maxHeight[i];
		}
	}
	return this.height( Math.max.apply( this, maxHeight ) );
}

$.fn.getFloatWidth = function(){
	var width = 0

	if($(this).length){
		var rect = $(this)[0].getBoundingClientRect()
		if(!(width = rect.width)){
			width = rect.right - rect.left
		}
	}

	return width
}

$.fn.sliceHeight = function( options ){
	function _slice(el){

		el.each(function() {
			$(this).css('line-height', '');
			$(this).css('height', '');
		});
		if(typeof(options.autoslicecount) == 'undefined' || options.autoslicecount !== false){
			var row=(typeof(options.row) !== 'undefined' && options.row.length) ?  el.first().parents(options.row).getFloatWidth() : el.first().parents('.items').getFloatWidth(),
				elw=(typeof(options.item) !== 'undefined' && options.item.length) ? $(options.item).first().getFloatWidth() : (el.first().hasClass('item') ? el.first().getFloatWidth() : el.first().parents('.item').getFloatWidth());
			if(!row){
				row = el.first().parents('.row').getFloatWidth();
			}
			if(row && elw){
				options.slice = Math.floor(row / elw);
			}
		}

		if(options.slice){
			for(var i = 0; i < el.length; i += options.slice){
				$(el.slice(i, i + options.slice)).equalizeHeights(options.outer, options.classNull, options.minHeight);
			}
		}
		if(options.lineheight){
			var lineheightAdd = parseInt(options.lineheight);
			if(isNaN(lineheightAdd)){
				lineheightAdd = 0;
			}
			el.each(function() {
				$(this).css('line-height', ($(this).actual('height') + lineheightAdd) + 'px');
			});
		}

	}

	var options = $.extend({
		slice: null,
		outer: false,
		lineheight: false,
		autoslicecount: true,
		classNull: false,
		minHeight: false,
		options: false,
		resize: true,
		row:false,
		item:false
	}, options);

	var el = $(this);
	_slice(el);

	if(options.resize){
		BX.addCustomEvent('onWindowResize', function(eventdata) {
			ignoreResize.push(true);
			_slice(el);
			ignoreResize.pop();
		});
	}
}

$.fn.sliceHeightNoResize = function( options ){
	function _slice(el){

		el.each(function() {
			$(this).css('line-height', '');
			$(this).css('height', '');
		});
		if(typeof(options.autoslicecount) == 'undefined' || options.autoslicecount !== false){
			var elw = (el.first().hasClass('item') ? el.first().getFloatWidth() : el.first().parents('.item').getFloatWidth());
			var elsw = el.first().parents('.items').getFloatWidth();
			if(!elsw){
				elsw = el.first().parents('.row').getFloatWidth();
			}
			if(elsw && elw){
				options.slice = Math.floor(elsw / elw);
			}
		}

		if(options.slice){
			for(var i = 0; i < el.length; i += options.slice){

				$(el.slice(i, i + options.slice)).equalizeHeights(options.outer, options.classNull, options.minHeight);
			}
		}
		if(options.lineheight){
			var lineheightAdd = parseInt(options.lineheight);
			if(isNaN(lineheightAdd)){
				lineheightAdd = 0;
			}
			el.each(function() {
				$(this).css('line-height', ($(this).actual('height') + lineheightAdd) + 'px');
			});
		}
	}

	var options = $.extend({
		slice: null,
		outer: false,
		lineheight: false,
		autoslicecount: true,
		classNull: false,
		minHeight: false,
		options: false,
		resize: true,
	}, options);

	var el = $(this);
	_slice(el);
}

if(!funcDefined('initHoverBlock')){
	function initHoverBlock(target){
		$(target).find('.catalog_item.item_wrap').on('mouseenter', function(){
			$(this).addClass('hover');
		})
		$(target).find('.catalog_item.item_wrap').on('mouseleave', function(){
			$(this).removeClass('hover');
		})
	}
}

if(!funcDefined('setStatusButton')){
	function setStatusButton(){
		$.ajax({
			url: arOptimusOptions["SITE_DIR"]+'ajax/getAjaxBasket.php',
			type: 'POST',
			success: function(data){
				if(data.BASKET){
					for( var i in data.BASKET ){
						$('.to-cart[data-item='+data.BASKET[i]+']').hide();
						$('.counter_block[data-item='+data.BASKET[i]+']').hide();
						$('.in-cart[data-item='+data.BASKET[i]+']').show();
						$('.in-cart[data-item='+data.BASKET[i]+']').closest('.button_block').addClass('wide');
					}
				}
				if(data.DELAY){
					for( var i in data.DELAY ){
						$('.wish_item.to[data-item='+data.DELAY[i]+']').hide();
						$('.wish_item.in[data-item='+data.DELAY[i]+']').show();
						if ($('.wish_item[data-item='+data.DELAY[i]+']').find(".value.added").length) {
							$('.wish_item[data-item='+data.DELAY[i]+']').addClass("added");
							$('.wish_item[data-item='+data.DELAY[i]+']').find(".value").hide();
							$('.wish_item[data-item='+data.DELAY[i]+']').find(".value.added").show();
						}
					}
				}
				if(data.SUBSCRIBE){
					for( var i in data.SUBSCRIBE ){
						$('.to-subscribe[data-item='+data.SUBSCRIBE[i]+']').hide();
						$('.in-subscribe[data-item='+data.SUBSCRIBE[i]+']').show();
					}
				}
				if(data.COMPARE){
					for( var i in data.COMPARE ){
						$('.compare_item.to[data-item='+data.COMPARE[i]+']').hide();
						$('.compare_item.in[data-item='+data.COMPARE[i]+']').show();
						if ($('.compare_item[data-item='+data.COMPARE[i]+']').find(".value.added").length){
							$('.compare_item[data-item='+data.COMPARE[i]+']').find(".value").hide();
							$('.compare_item[data-item='+data.COMPARE[i]+']').find(".value.added").show();
						}
					}
				}
			}
		});
	}
}


if(!funcDefined('onLoadjqm')){
	var onLoadjqm = function(name, hash, requestData, selector, requestTitle, isButton, thButton){
		hash.w.addClass('show').css({
			'margin-left': ($(window).width() > hash.w.outerWidth() ? '-' + hash.w.outerWidth() / 2 + 'px' : '-' + $(window).width() / 2 + 'px'),
			'top': $(document).scrollTop() + (($(window).height() > hash.w.outerHeight() ? ($(window).height() - hash.w.outerHeight()) / 2 : 10))   + 'px',
			'opacity': 1
		});
		if(typeof(requestData) == 'undefined'){
			requestData = '';
		}
		if(typeof(selector) == 'undefined'){
			selector = false;
		}
		var width = $('.'+name+'_frame').width();
		$('.'+name+'_frame').css('margin-left', '-'+width/2+'px');

		if(name=='order-popup-call') {
		}
		else if(name=='order-button') {
			$(".order-button_frame").find("div[product_name]").find("input").val(hash.t.title).attr("readonly", "readonly").css({"overflow": "hidden", "text-overflow": "ellipsis"});
		}
		else if(name == "to-order" && selector){
			$(".to-order_frame").find('[data-sid="PRODUCT_NAME"]').val($(selector).data('name')).attr("readonly", "readonly").css({"overflow": "hidden", "text-overflow": "ellipsis"});
			$(".to-order_frame").find('[data-sid="PRODUCT_ID"]').val($(selector).attr('data-item'));
		}
		else if(name == "services" && selector) {
			$(".services_frame").find('[data-sid="SERVICE"]').val($(selector).attr('data-title'));
		}
		else if(name == "resume" && selector) {
			if($(selector).attr('data-jobs')){
				$(".resume_frame").find('[data-sid="POST"]').attr("readonly", "readonly").val($(selector).attr('data-jobs'));
			}
		}
		else if(name=='basket_error')
		{
			$(".basket_error_frame .pop-up-title").text(requestTitle);
			$(".basket_error_frame .ajax_text").html(requestData);
			// $('.basket_error_frame .ajax_text select').ikSelect('redraw');
			initSelects(document);
			if(isButton=="Y" && thButton){
				$("<div class='popup_button_basket_wr'><span class='popup_button_basket big_btn button' data-item="+thButton.data("item")+"><span>"+BX.message("ERROR_BASKET_BUTTON")+"</span></span></div>").insertAfter($(".basket_error_frame .ajax_text"));
			}
		}
		else if( name == 'one_click_buy') {
			$('#one_click_buy_form_button').on("click", function() {
				if(!$(this).hasClass("clicked")){
					if($('#one_click_buy_form').valid()){
						$(this).addClass("clicked");
						$("#one_click_buy_form").submit(); //otherwise don't works
					}
				}
			});

			$('#one_click_buy_form').submit( function() {
				if($('.'+name+'_frame form input.error').length || $('.'+name+'_frame form textarea.error').length) {
					return false
				}
				else{
					$.ajax({
						url: $(this).attr('action'),
						data: $(this).serialize(),
						type: 'POST',
						dataType: 'json',
						error: function(data) {
							alert('Error connecting server');
						},
						success: function(data) {
							if(data.result == 'Y'){
								$('.one_click_buy_result').show();
								$('.one_click_buy_result_success').show();
								purchaseCounter(data.message, arOptimusOptions["COUNTERS"]["TYPE"]["ONE_CLICK"]);
							}
							else{
								$('.one_click_buy_result').show();
								$('.one_click_buy_result_fail').show();
								if(('err' in data) && data.err)
									data.message=data.message+' \n'+data.err;
								$('.one_click_buy_result_text').html(data.message);
							}
							$('.one_click_buy_modules_button', self).removeClass('disabled');
							$('#one_click_buy_form').hide();
							$('#one_click_buy_form_result').show();
						}
					});
				}
				return false;
			});
		}
		else if( name == 'one_click_buy_basket') {
			$('#one_click_buy_form_button').on("click", function() {
				if(!$(this).hasClass("clicked")){
					if($('#one_click_buy_form').valid()){
						$(this).addClass("clicked");
						$("#one_click_buy_form").submit(); //otherwise don't works
					}
				}
			});

			$('#one_click_buy_form').on("submit", function(){
				if($('.'+name+'_frame form input.error').length || $('.'+name+'_frame form textarea.error').length) {
					return false
				}
				else{
					$.ajax({
						url: $(this).attr('action'),
						data: $(this).serialize(),
						type: 'POST',
						dataType: 'json',
						error: function(data) {
							window.console&&console.log(data);
						},
						success: function(data) {
							if(data.result == 'Y') {
								$('.one_click_buy_result').show();
								$('.one_click_buy_result_success').show();
								purchaseCounter(data.message, arOptimusOptions["COUNTERS"]["TYPE"]["QUICK_ORDER"]);
							}
							else{
								$('.one_click_buy_result').show();
								$('.one_click_buy_result_fail').show();
								if(('err' in data) && data.err)
									data.message=data.message+' \n'+data.err;
								$('.one_click_buy_result_text').text(data.message);
							}
							$('.one_click_buy_modules_button', self).removeClass('disabled');
							$('#one_click_buy_form').hide();
							$('#one_click_buy_form_result').show();
						}
					});
				}
				return false;
			});
		}

		$('.'+name+'_frame').show();
	}
}

if(!funcDefined('onHidejqm')){
	var onHidejqm = function(name, hash){
		if (hash.w.find('.one_click_buy_result_success').is(':visible') && name=="one_click_buy_basket") {
			window.location.href = window.location.href;
		}
		hash.w.css('opacity', 0).hide();
		hash.w.empty();
		hash.o.remove();
		hash.w.removeClass('show');
	}
}

if(!funcDefined("oneClickBuy")) {
	var oneClickBuy = function (elementID, iblockID, that) {
		var name = 'one_click_buy';
		var elementQuantity = 1;
		var offerProps = false;
		var buy_btn=$(that).closest('.buy_block').find('.to-cart');
		var buy_btn2=$(that).closest('tr').find('.to-cart');

		if(typeof(that) !== 'undefined'){
			elementQuantity = $(that).attr('data-quantity');
			offerProps = $(that).attr('data-props');
		}

		if(elementQuantity < 0){
			elementQuantity = 1;
		}

		var tmp_props=buy_btn.data("props"),
			tmp_props2=buy_btn2.data("props"),
			props='',
			part_props='',
			add_props='N',
			fill_prop={},
			iblockid = buy_btn.data('iblockid'),
			item = buy_btn.attr('data-item');

		if(tmp_props){
			props=tmp_props.split(";");
		}else if(tmp_props2){
			props=tmp_props2.split(";");
		}
		if(buy_btn.data("part_props")){
			part_props=buy_btn.data("part_props");
		}
		if(buy_btn.data("add_props")){
			add_props=buy_btn.data("add_props");
		}

		fill_prop=fillBasketPropsExt(buy_btn, 'prop', buy_btn.data('bakset_div'));
		fill_prop.iblockID=iblockid;
		fill_prop.part_props=part_props;
		fill_prop.add_props=add_props;
		fill_prop.props=JSON.stringify(props);
		fill_prop.item=item;
		fill_prop.ocb_item="Y";

		$('body').find('.'+name+'_frame').remove();
		$('body').append('<div class="'+name+'_frame popup"></div>');
		$('.'+name+'_frame').jqm({trigger: '.'+name+'_frame.popup', onHide: function(hash) { onHidejqm(name,hash); }, toTop: false, onLoad: function( hash ){ onLoadjqm(name, hash ); }, ajax: arOptimusOptions["SITE_DIR"]+'ajax/one_click_buy.php?ELEMENT_ID='+elementID+'&IBLOCK_ID='+iblockID+'&ELEMENT_QUANTITY='+elementQuantity+'&OFFER_PROPS='+fill_prop.props});
		$('.'+name+'_frame.popup').click();
	}
}

if(!funcDefined("oneClickBuyBasket")) {
	var oneClickBuyBasket = function () {
		name = 'one_click_buy_basket'
		$('body').find('.'+name+'_frame').remove();
		$('body').append('<div class="'+name+'_frame popup"></div>');
		$('.'+name+'_frame').jqm({trigger: '.'+name+'_frame.popup', onHide: function(hash) { onHidejqm(name,hash) }, onLoad: function( hash ){ onLoadjqm( name, hash ); }, ajax: arOptimusOptions["SITE_DIR"]+'ajax/one_click_buy_basket.php'});
		$('.'+name+'_frame.popup').click();
	}
}

if(!funcDefined("scroll_block")) {
	function scroll_block(block){
		var topPos = block.offset().top,
			headerH = $('header').outerHeight(true,true);
		if($(".stores_tab").length){
			$(".stores_tab").addClass("current").siblings().removeClass("current");
		}else{
			$(".prices_tab").addClass("current").siblings().removeClass("current");
			if($(".prices_tab .opener").length && !$(".prices_tab .opener .opened").length){
				var item = $(".prices_tab .opener").first();
				item.find(".opener_icon").addClass("opened");
				item.parents("tr").addClass("nb")
				item.parents("tr").next(".offer_stores").find(".stores_block_wrap").slideDown(200);
			}
		}
		$('html,body').animate({'scrollTop':topPos-30},150);
	}
}

if(!funcDefined("jqmEd")) {
	var jqmEd = function (name, form_id, open_trigger, requestData, selector, requestTitle, isButton, thButton){
		if(typeof(requestData) == "undefined"){
			requestData = '';
		}
		if(typeof(selector) == "undefined"){
			selector = false;
		}
		$('body').find('.'+name+'_frame').remove();
		$('body').append('<div class="'+name+'_frame popup"></div>');
		if(typeof open_trigger == "undefined" ){
			$('.'+name+'_frame').jqm({trigger: '.'+name+'_frame.popup',onHide: function(hash) { onHidejqm(name,hash); }, onLoad: function( hash ){ onLoadjqm( name , hash , requestData, selector); }, ajax: arOptimusOptions["SITE_DIR"]+'ajax/form.php?form_id='+form_id+(requestData.length ? '&' + requestData : '')});
		}else{
			if(name == 'enter'){
				$('.'+name+'_frame').jqm({trigger: open_trigger,onHide: function(hash) { onHidejqm(name,hash); },  onLoad: function( hash ){ onLoadjqm( name , hash , requestData, selector); }, ajax: arOptimusOptions["SITE_DIR"]+'ajax/auth.php'});
			}else if(name=='basket_error'){
				$('.'+name+'_frame').jqm({trigger: open_trigger, onHide: function(hash) { onHidejqm(name,hash); }, onLoad: function( hash ){ onLoadjqm( name , hash , requestData, selector, requestTitle, isButton, thButton); }, ajax: arOptimusOptions["SITE_DIR"]+'ajax/basket_error.php'});
			}else{
				$('.'+name+'_frame').jqm({trigger: open_trigger, onHide: function(hash) { onHidejqm(name,hash); }, onLoad: function( hash ){ onLoadjqm( name , hash , requestData, selector); }, ajax: arOptimusOptions["SITE_DIR"]+'ajax/form.php?form_id='+form_id+(requestData.length ? '&' + requestData : '')});
			}
			$(open_trigger).dblclick(function(){return false;})
		}
		return true;
	}
}

if (!funcDefined("replaceBasketPopup")){
	function replaceBasketPopup (hash){
		if(typeof hash != "undefined"){
			hash.w.hide();
			hash.o.hide();
		}
	}
}

if(!funcDefined("waitLayer")){
	function waitLayer(delay, callback){
		if((typeof dataLayer !== 'undefined') && (typeof callback === 'function')){
			callback();
		}
		else{
			setTimeout(function() {
				waitLayer(delay, callback);
			}, delay);
		}
	}
}

if(!funcDefined("InitTopestMenuGummi")){
	InitTopestMenuGummi = function(){
		if(!isOnceInited){
			function _init(){
				var arItems = $menuTopest.find('>li:not(.more)');
				var cntItems = arItems.length;
				if(cntItems){
					var itemsWidth = 0;
					for(var i = 0; i < cntItems; ++i){
						var item = arItems.eq(i);
						var itemWidth = item.actual('outerWidth',{includeMargin: true});
						arItemsHideWidth[i] = (itemsWidth += itemWidth) + (i !== (cntItems - 1) ? moreWidth : 0);
					}
				}
			}

			function _gummi(){
				var rowWidth = $menuTopest.actual('innerWidth');
				var arItems = $menuTopest.find('>li:not(.more),li.more>.dropdown>li');
				var cntItems = arItems.length;
				if(cntItems){
					var bMore = false;
					for(var i = cntItems - 1; i >= 0; --i){
						var item = arItems.eq(i);
						var bInMore = item.parents('.more').length > 0;
						if(!bInMore){
							if(arItemsHideWidth[i] > rowWidth){
								if(!bMore){
									bMore = true;
									more.removeClass('hidden');
								}
								var clone = item.clone();
								clone.find('>a').addClass('dark_font');
								clone.prependTo(moreDropdown);
								item.addClass('cloned');
							}
						}
					}
					for(var i = 0; i < cntItems; ++i){
						var item = arItems.eq(i);
						var bInMore = item.parents('.more').length > 0;
						if(bInMore){
							if(arItemsHideWidth[i] <= rowWidth){
								if(i === (cntItems - 1)){
									bMore = false;
									more.addClass('hidden');
								}
								var clone = item.clone();
								clone.find('>a').removeClass('dark_font');
								clone.insertBefore(more);
								item.addClass('cloned');
							}
						}
					}
					$menuTopest.find('li.cloned').remove();
				}
			}

			var $menuTopest = $('.menu.topest');
			var more = $menuTopest.find('>.more');
			var moreDropdown = more.find('>.dropdown');
			var moreWidth = more.actual('outerWidth',{includeMargin: true});
			var arItemsHideWidth = [];
			ignoreResize.push(true);
			_init();
			_gummi();
			ignoreResize.pop();

			$(window).resize(function(){
				ignoreResize.push(true);
				_gummi();
				ignoreResize.pop();
			});
		}
	}
}

if(!funcDefined("InitTopMenuGummi")){
	InitTopMenuGummi = function(){
		function _init(){
			var arItems = $topMenu.closest('.wrap_menu').find('.inc_menu .menu_top_block >li:not(.more)');
			var cntItems = arItems.length;
			if(cntItems){
				var itemsWidth = 0;
				for(var i = 0; i < cntItems; ++i){
					var item = arItems.eq(i);
						var itemWidth = item.actual('outerWidth');
						arItemsHideWidth[i] = (itemsWidth += itemWidth) + (i !== (cntItems - 1) ? moreWidth : 0);
				}
			}

		}

		function _gummi(){
			var rowWidth = $wrapMenu.actual('innerWidth') - $wrapMenuLeft.actual('innerWidth');
			var arItems = $topMenu.find('>li:not(.more):not(.catalog),li.more>.dropdown>li');
			var cntItems = arItems.length;

			if(cntItems){
				var bMore = false;
				for(var i = cntItems - 1; i >= 0; --i){
					var item = arItems.eq(i);
					var bInMore = item.parents('.more').length > 0;
					if(!bInMore){
						if(arItemsHideWidth[i] > rowWidth){
							if(!bMore){
								bMore = true;
								more.removeClass('hidden');
							}
							var clone = item.clone();
							clone.find('>.dropdown').removeAttr('style').removeClass('toleft');
							clone.find('>a').addClass('dark_font').removeAttr('style');
							clone.prependTo(moreDropdown);
							item.addClass('cloned');
						}
					}
				}
				for(var i = 0; i < cntItems; ++i){
					var item = arItems.eq(i);
					var bInMore = item.parents('.more').length > 0;
					if(bInMore){
						if(arItemsHideWidth[i] <= rowWidth){
							if(i === (cntItems - 1)){
								bMore = false;
								more.addClass('hidden');
							}
							var clone = item.clone();
							clone.find('>a').removeClass('dark_font');
							clone.insertBefore(more);
							item.addClass('cloned');
						}
					}
				}
				$topMenu.find('li.cloned').remove();

				var cntItemsVisible = $topMenu.find('>li:not(.more):not(.catalog)').length;
				var o = rowWidth - arItemsHideWidth[cntItemsVisible - 1];
				var itemsPaddingAdd = Math.floor(o / (cntItemsVisible + (more.hasClass('hidden') ? 0 : 1)));
				var itemsPadding_new = itemsPadding_min + itemsPaddingAdd;
				var itemsPadding_new_l = Math.floor(itemsPadding_new / 2);
				var itemsPadding_new_r = itemsPadding_new - itemsPadding_new_l;

				$topMenu.find('>li:not(.catalog):visible>a').each(function(){
					$(this).css({'padding-left': itemsPadding_new_l + 'px'});
					$(this).css({'padding-right': itemsPadding_new_r + 'px'});
				});

				var lastItemPadding_new = itemsPadding_new + o - (cntItemsVisible + (more.is(':visible') ? 1 : 0)) * itemsPaddingAdd;
				var lastItemPadding_new_l = Math.floor(lastItemPadding_new / 2);
				var lastItemPadding_new_r = lastItemPadding_new - lastItemPadding_new_l;
				$topMenu.find('>li:visible').last().find('>a').css({'padding-left': lastItemPadding_new_l + 'px'});
				$topMenu.find('>li:visible').last().find('>a').css({'padding-right': lastItemPadding_new_r + 'px'});
				CheckTopMenuFullCatalogSubmenu();
			}
		}

		var $topMenu = $('.menu_top_block');
		var $wrapMenu = $topMenu.parents('.wrap_menu');
		var $wrapMenuLeft = $wrapMenu.find('.catalog_menu_ext');
		var more = $topMenu.find('>.more');
		var moreWidth = more.actual('outerWidth',{includeMargin: true});
		more.addClass('hidden');
		var arItemsHideWidth = [];
		var moreDropdown = more.find('>.dropdown');
		var itemsPadding = parseInt(more.find('>a').css('padding-left')) * 2;
		var itemsPadding_min = itemsPadding;

		// setTimeout(function(){
			ignoreResize.push(true);
			_init();
			_gummi();
			ignoreResize.pop();
		// }, 100)

		$(window).resize(function(){
			ignoreResize.push(true);
			_gummi();
			ignoreResize.pop();
		});

		/*BX.addCustomEvent('onTopPanelFixUnfix', function(eventdata) {
			ignoreResize.push(true);
			_gummi();
			ignoreResize.pop();
		});*/
	}
}

if(!funcDefined("checkCounters")){
	function checkCounters(name){
		if(typeof name !== "undefined"){
			if(name == "google" && (arOptimusOptions["COUNTERS"]["GOOGLE_ECOMERCE"] == "Y" && arOptimusOptions["COUNTERS"]["GOOGLE_COUNTER"] > 0)){
				return true;
			}
			else if(name == "yandex" && (arOptimusOptions["COUNTERS"]["YANDEX_ECOMERCE"] == "Y" && arOptimusOptions["COUNTERS"]["YANDEX_COUNTER"] > 0)){
				return true;
			}
			else{
				return false;
			}
		}
		else if((arOptimusOptions["COUNTERS"]["YANDEX_ECOMERCE"] == "Y" && arOptimusOptions["COUNTERS"]["YANDEX_COUNTER"] > 0) || (arOptimusOptions["COUNTERS"]["GOOGLE_ECOMERCE"] == "Y" && arOptimusOptions["COUNTERS"]["GOOGLE_COUNTER"] > 0)) {
			return true;
		}
		else{
			return false;
		}
	}
}

if(!funcDefined("addBasketCounter")){
	function addBasketCounter(id){
		if(checkCounters()){
			$.ajax({
				url:arOptimusOptions['SITE_DIR'] + "ajax/goals.php",
				dataType: "json",
				type: "POST",
				data: {"ID": id},
				success: function(item){
					if(!!item && !!item.ID){
						waitLayer(100, function() {
							dataLayer.push({
								"event": arOptimusOptions["COUNTERS"]['GOOGLE_EVENTS']['ADD2BASKET'],
							    "ecommerce": {
							    	"currencyCode": item.CURRENCY,
							        "add": {
							            "products": [{
						                    "id": item.ID,
						                    "name": item.NAME,
						                    "price": item.PRICE,
						                    "brand": item.BRAND,
						                    "category": item.CATEGORY,
						                    "quantity": item.QUANTITY
						                }]
							        }
							    }
							});
						});
					}
				}
			});
		}
	}
}

if(!funcDefined("purchaseCounter")){
	function purchaseCounter(order_id, type){
		if(checkCounters()){
			$.ajax({
				url:arOptimusOptions['SITE_DIR'] + "ajax/goals.php",
				dataType: "json",
				type: "POST",
				data: {"ORDER_ID": order_id, "TYPE": type},
				success: function(order){
					var products = [];
					if(order.ITEMS){
						for(var i in order.ITEMS){
							products.push({
								"id": order.ITEMS[i].ID,
								"sku": order.ITEMS[i].ID,
			                    "name": order.ITEMS[i].NAME,
			                    "price": order.ITEMS[i].PRICE,
			                    "brand": order.ITEMS[i].BRAND,
			                    "category": order.ITEMS[i].CATEGORY,
			                    "quantity": order.ITEMS[i].QUANTITY
							});
						}
					}
					if(order.ID){
						waitLayer(100, function() {
							dataLayer.push({
							    "ecommerce": {
							    	"purchase": {
								    	"actionField":{
								    		"id": order.ACCOUNT_NUMBER,
								    		"shipping": order.PRICE_DELIVERY,
								    		"tax": order.TAX_VALUE,
								    		"list": type,
								    		"revenue": order.PRICE
								    	},
							            "products": products
							        }
							    }
							});
						});
					}
				}
			});
		}
	}
}

if(!funcDefined("viewItemCounter")){
	function viewItemCounter(id, price_id){
		if(checkCounters()){
			$.ajax({
				url:arOptimusOptions['SITE_DIR'] + "ajax/goals.php",
				dataType: "json",
				type: "POST",
				data: {"PRODUCT_ID": id, "PRICE_ID": price_id},
				success: function(item){
					if(item.ID){
						waitLayer(100, function() {
							dataLayer.push({
								//"event": "",
								"ecommerce": {
									"detail": {
										"products": [{
											"id": item.ID,
											"name": item.NAME,
											"price": item.PRICE,
											"brand": item.BRAND,
											"category": item.CATEGORY
										}]
									}
								}
							});
						});
					}
				}
			});
		}
	}
}

if(!funcDefined("checkoutCounter")){
	function checkoutCounter(step, option, callback){
		if(checkCounters('google')){
			$.ajax({
				url:arOptimusOptions['SITE_DIR'] + "ajax/goals.php",
				dataType: "json",
				type: "POST",
				data: {"BASKET": "Y"},
				success: function(basket){
					var products = [];
					if(basket.ITEMS){
						for(var i in basket.ITEMS){
							products.push({
								"id": basket.ITEMS[i].ID,
			                    "name": basket.ITEMS[i].NAME,
			                    "price": basket.ITEMS[i].PRICE,
			                    "brand": basket.ITEMS[i].BRAND,
			                    "category": basket.ITEMS[i].CATEGORY,
			                    "quantity": basket.ITEMS[i].QUANTITY
							});
						}
					}
					if(products){
						waitLayer(100, function() {
							dataLayer.push({
								"event": arOptimusOptions["COUNTERS"]['GOOGLE_EVENTS']['CHECKOUT_ORDER'],
							    "ecommerce": {
							    	"actionField":{
							    		"step": step,
							    		"option": option
							    	},
							        "products": products
							    },
							    /*"eventCallback": function() {
							    	if((typeof callback !== 'undefined') && (typeof callback === 'function')){
							    		callback();
							    	}
							   }*/
							});
						});
					}
				}
			});
		}
	}
}

if(!funcDefined("delFromBasketCounter")){
	function delFromBasketCounter(id, callback){
		if(checkCounters()){
			$.ajax({
				url:arOptimusOptions['SITE_DIR'] + "ajax/goals.php",
				dataType: "json",
				type: "POST",
				data: {"ID": id},
				success: function(item){
					if(item.ID){
						waitLayer(100, function() {
							dataLayer.push({
								"event": arOptimusOptions["COUNTERS"]['GOOGLE_EVENTS']['REMOVE_BASKET'],
							    "ecommerce": {
							        "remove": {
							            "products": [{
						                    "id": item.ID,
						                    "name": item.NAME,
						                    "category": item.CATEGORY
						                }]
							        }
							    }
							});
							if(typeof callback == 'function'){
								callback();
							}
						});
					}
				}
			});
		}
	}
}

if(!funcDefined("setHeightCompany")){
	function setHeightCompany(){
		$('.md-50.img').height($('.md-50.big').outerHeight()-35);
	}
}

if(!funcDefined("initSly")){
	function initSly(){
		var $frame  = $(document).find('.frame');
		var $slidee = $frame.children('ul').eq(0);
		var $wrap   = $frame.parent();

		if(arOptimusOptions["PAGES"]["CATALOG_PAGE"]){
			$frame.sly({
				horizontal: 1,
				itemNav: 'basic',
				smart: 1,
				mouseDragging: 0,
				touchDragging: 0,
				releaseSwing: 0,
				startAt: 0,
				scrollBar: $wrap.find('.scrollbar'),
				scrollBy: 1,
				speed: 300,
				elasticBounds: 0,
				easing: 'swing',
				dragHandle: 1,
				dynamicHandle: 1,
				clickBar: 1,

				// Buttons
				forward: $wrap.find('.forward'),
				backward: $wrap.find('.backward'),
			});
			$frame.sly('reload');
		}
	}
}

if(!funcDefined("createTableCompare")){
	function createTableCompare(originalTable, appendDiv, cloneTable){

		try{
			var clone = originalTable.clone().removeAttr('id').addClass('clone');
			if(cloneTable.length){
				cloneTable.remove();
				appendDiv.html('');
				appendDiv.html(clone);
			}else{
				appendDiv.append(clone);
			}
		}
		catch(e){}
		finally{

		}
	}
}

if(!funcDefined('fillBasketPropsExt')){
	fillBasketPropsExt = function(that, prop_code, basket_prop_div){
		var
			i = 0,
			propCollection = null,
			foundValues = false,
			basketParams = {},
			obBasketProps = null;

		// obBasketProps = that.closest('.catalog_detail').find('.basket_props_block');
		obBasketProps = BX(basket_prop_div);

		if (!!obBasketProps)
		{
			propCollection = obBasketProps.getElementsByTagName('select');
			if (!!propCollection && !!propCollection.length)
			{
				for (i = 0; i < propCollection.length; i++)
				{
					if (!propCollection[i].disabled)
					{
						switch(propCollection[i].type.toLowerCase())
						{
							case 'select-one':
								basketParams[propCollection[i].name] = propCollection[i].value;
								foundValues = true;
								break;
							default:
								break;
						}
					}
				}
			}
			propCollection = obBasketProps.getElementsByTagName('input');
			if (!!propCollection && !!propCollection.length)
			{
				for (i = 0; i < propCollection.length; i++)
				{
					if (!propCollection[i].disabled)
					{
						switch(propCollection[i].type.toLowerCase())
						{
							case 'hidden':
								basketParams[propCollection[i].name] = propCollection[i].value;
								foundValues = true;
								break;
							case 'radio':
								if (propCollection[i].checked)
								{
									basketParams[propCollection[i].name] = propCollection[i].value;
									foundValues = true;
								}
								break;
							default:
								break;
						}
					}
				}
			}
		}
		if (!foundValues)
		{
			basketParams[prop_code] = [];
			basketParams[prop_code][0] = 0;
		}
		return basketParams;
	}
}
if(!funcDefined('showBasketError')){
	showBasketError = function(mess, title, addButton, th){
		var title_set=(title ? title : BX.message("ERROR_BASKET_TITLE")),
			isButton="N",
			thButton="";
		if(typeof addButton!==undefined){
			isButton="Y";
		}
		if(typeof th!==undefined){
			thButton=th;
		}
		$("body").append("<span class='add-error-bakset' style='display:none;'></span>");
		jqmEd('basket_error', 'error-bakset', '.add-error-bakset', mess, this, title_set, isButton, thButton);
		$("body .add-error-bakset").click();
		$("body .add-error-bakset").remove();
	}
}

if(!funcDefined("isRealValue")){
	function isRealValue(obj){
		return obj && obj !== "null" && obj!== "undefined";
	}
}

if(!funcDefined("rightScroll")){
	function rightScroll(prop, id){
		var el = BX('prop_' + prop + '_' + id);
		if (el) {
			var curVal = parseInt(el.style.marginLeft);
			if (curVal >= 0) el.style.marginLeft = curVal - 20 + '%';
		}
	}
}

if(!funcDefined("leftScroll")){
	function leftScroll(prop, id){
		var el = BX('prop_' + prop + '_' + id);
		if (el) {
			var curVal = parseInt(el.style.marginLeft);
			if (curVal < 0) el.style.marginLeft = curVal + 20 + '%';
		}
	}
}

if(!funcDefined("InitOrderCustom")){
	InitOrderCustom = function () {
		$('.ps_logo img').wrap('<div class="image"></div>');

		$('#bx-soa-order .radio-inline').each(function() {
			if ($(this).find('input').attr('checked') == 'checked') {
				$(this).addClass('checked');
			}
		});

		$('#bx-soa-order .checkbox input[type=checkbox]').each(function() {
			if ($(this).attr('checked') == 'checked')
				$(this).parent().addClass('checked');
		});

		$('#bx-soa-order .bx-authform-starrequired').each(function() {
			var html = $(this).html();
			$(this).closest('label').append('<span class="bx-authform-starrequired"> '+ html + '</span>');
			$(this).detach();
		});
		$('.bx_ordercart_coupon').each(function() {
			if ($(this).find('.bad').length)
				$(this).addClass('bad');
			else if ($(this).find('.good').length)
				$(this).addClass('good');
		});
		/*if (typeof(propsMap) !== 'undefined') {
			$(propsMap).on('click', function () {
				var value = $('#orderDescription').val();
				if ($('#orderDescription')) {
					if (value != '') {
						$('#orderDescription').closest('.form-group').addClass('value_y');
					}
				}
			});
		}*/
	}
}

if(!funcDefined("InitLabelAnimation")){
	InitLabelAnimation = function(className) {
		// Fix order labels
		if (!$(className).length) {
			return;
		}
		$(className).find('.form-group').each(function() {
			if ($(this).find('input[type=text], textarea').length && !$(this).find('.dropdown-block').length && $(this).find('input[type=text], textarea').val() != '') {
				$(this).addClass('value_y');
			}
		});

		$(document).on('click', className+' .form-group:not(.bx-soa-pp-field) label', function() {
			$(this).parent().find('input, textarea').focus();
		});

		$(document).on('focusout', className+' .form-group:not(.bx-soa-pp-field) input, '+className+' .form-group:not(.bx-soa-pp-field) textarea', function() {
			var value = $(this).val();
			if (value != '' && !$(this).closest('.form-group').find('.dropdown-block').length && !$(this).closest('.form-group').find('#profile_change').length) {
				$(this).closest('.form-group').addClass('value_y');
			}else{
				$(this).closest('.form-group').removeClass('value_y');
			}
		});

		$(document).on('focus', className+' .form-group:not(.bx-soa-pp-field) input, '+className+' .form-group:not(.bx-soa-pp-field) textarea', function() {
			if (!$(this).closest('.form-group').find('.dropdown-block').length && !$(this).closest('.form-group').find('#profile_change').length && !$(this).closest('.form-group').find('[name=PERSON_TYPE_OLD]').length ) {
				$(this).closest('.form-group').addClass('value_y');
			}
		});
	};
}

checkPopupWidth = function(){
	$('.popup.show').each(function() {
		var width_form = $(this).actual('width');
		$(this).css({
			'margin-left': ($(window).width() > width_form ? '-' + width_form / 2 + 'px' : '-' + $(window).width() / 2 + 'px'),
		});
	});
}

checkCaptchaWidth = function(){
	$('.captcha-row').each(function() {
		var width = $(this).actual('width');
		if($(this).hasClass('b')){
			if(width > 320){
				$(this).removeClass('b');
			}
		}
		else{
			if(width <= 320){
				$(this).addClass('b');
			}
		}
	});
}

checkFormWidth = function(){
	$('.form .form_left').each(function() {
		var form = $(this).parents('.form');
		var width = form.actual('width');
		if(form.hasClass('b')){
			if(width > 417){
				form.removeClass('b');
			}
		}
		else{
			if(width <= 417){
				form.addClass('b');
			}
		}
	});
}

checkFormControlWidth = function(){
	$('.form-control').each(function() {
		var width = $(this).actual('width');
		var labelWidth = $(this).find('label:not(.error) > span').actual('width');
		var errorWidth = $(this).find('label.error').actual('width');
		if(errorWidth > 0){
			if($(this).hasClass('h')){
				if(width > (labelWidth + errorWidth + 5)){
					$(this).removeClass('h');
				}
			}
			else{
				if(width <= (labelWidth + errorWidth + 5)){
					$(this).addClass('h');
				}
			}
		}
		else{
			$(this).removeClass('h');
		}
	});
}

scrollToTop = function(){
	if(arOptimusOptions['THEME']['SCROLLTOTOP_TYPE'] !== 'NONE'){
		var _isScrolling = false;
		// Append Button
		$('body').append($('<a />').addClass('scroll-to-top ' + arOptimusOptions['THEME']['SCROLLTOTOP_TYPE'] + ' ' + arOptimusOptions['THEME']['SCROLLTOTOP_POSITION']).attr({'href': '#', 'id': 'scrollToTop'}));
		$('#scrollToTop').click(function(e){
			e.preventDefault();
			$('body, html').animate({scrollTop : 0}, 500);
			return false;
		});
		// Show/Hide Button on Window Scroll event.
		$(window).scroll(function(){
			if(!_isScrolling) {
				_isScrolling = true;
				if($(window).scrollTop() > 150){
					$('#scrollToTop').stop(true, true).addClass('visible');
					_isScrolling = false;
				}
				else{
					$('#scrollToTop').stop(true, true).removeClass('visible');
					_isScrolling = false;
				}
				checkScrollToTop();
			}
		});
	}
}

checkScrollToTop = function(){
	var bottom = 55,
		scrollVal = $(window).scrollTop(),
		windowHeight = $(window).height(),
		footerOffset = $('footer').offset().top +70;

	if(arOptimusOptions['THEME']['SCROLLTOTOP_POSITION'] == 'CONTENT'){
		warpperWidth = $('body > .wrapper > .wrapper_inner').width();
		$('#scrollToTop').css('margin-left', Math.ceil(warpperWidth / 2) + 23);
	}

	if(scrollVal + windowHeight > footerOffset){
		$('#scrollToTop').css('bottom', bottom  + scrollVal + windowHeight - footerOffset - 0);
	}
	else if(parseInt($('#scrollToTop').css('bottom')) > bottom){
		$('#scrollToTop').css('bottom', bottom);
	}
}

CheckObjectsSizes = function() {
	$('.container iframe,.container object,.container video').each(function() {
		var height_attr = $(this).attr('height');
		var width_attr = $(this).attr('width');
		if (height_attr && width_attr) {
			$(this).css('height', $(this).outerWidth() * height_attr / width_attr);
		}
	});
}

if(!funcDefined('reloadTopBasket')){
	var reloadTopBasket = function reloadTopBasket(action, basketWindow, speed, delay, slideDown, item){
		var obj={
				"PARAMS": $('#top_basket_params').val(),
				"ACTION": action
			};
		if(typeof item !== "undefined" ){
			obj.delete_top_item='Y';
			obj.delete_top_item_id=item.data('id');
		}
		$.post( arOptimusOptions['SITE_DIR']+"ajax/show_basket_popup.php", obj, $.proxy(function( data ){
			$(basketWindow).html(data);

			getActualBasket();

			if(arOptimusOptions['THEME']['SHOW_BASKET_ONADDTOCART'] !== 'N'){
				if($(window).outerWidth() > 520){
					if(slideDown=="Y")
						$(basketWindow).find('.basket_popup_wrapp').stop(true,true).slideDown(speed);
					clearTimeout(basketTimeoutSlide);
					basketTimeoutSlide = setTimeout(function() {
						var _this = $('#basket_line').find('.basket_popup_wrapp');
						if (_this.is(':hover')) {
							_this.show();
						}else{
							$('#basket_line').find('.basket_popup_wrapp').slideUp(speed);
						}
					},delay);
				}
			}
		}))
	}
}

/*countdown start*/
if(!funcDefined('initCountdown')){
	var initCountdown = function initCountdown(){
		if( $('.view_sale_block').size() ){
			$('.view_sale_block').each(function(){
				var activeTo=$(this).find('.active_to').text(),
					dateTo= new Date(activeTo.replace(/(\d+)\.(\d+)\.(\d+)/, '$3/$2/$1'));
				$(this).find('.countdown').countdown({until: dateTo, format: 'dHMS', padZeroes: true, layout: '{d<}<span class="days item">{dnn}<div class="text">{dl}</div></span>{d>} <span class="hours item">{hnn}<div class="text">{hl}</div></span> <span class="minutes item">{mnn}<div class="text">{ml}</div></span> <span class="sec item">{snn}<div class="text">{sl}</div></span>'}, $.countdown.regionalOptions['ru']);
			})
		}
	}
}
/*countdown end*/

var isOnceInited = insertFilter = false;
var animationTime = 200;
var delayTime = 200;
var topMenuEnterTimer = false;
var isMobile = jQuery.browser.mobile;

if(isMobile){
	document.documentElement.className += ' mobile';
}

/*filter start*/
if(!funcDefined('checkVerticalMobileFilter')){
	var checkVerticalMobileFilter = function checkVerticalMobileFilter(){
		if($('.right_block1.catalog.vertical').length){
			if(window.matchMedia('(max-width: 950px)').matches){
				if(!insertFilter){
					$('.js_filter .bx_filter.bx_filter_vertical').html($('.left_block .bx_filter.bx_filter_vertical').html());
					$('.left_block .bx_filter.bx_filter_vertical .bx_filter_section').remove();
					insertFilter=true;
				}
			}else{
				if(insertFilter){
					$('.left_block .bx_filter.bx_filter_vertical').html($('.js_filter .bx_filter.bx_filter_vertical').html());
					$('.js_filter .bx_filter.bx_filter_vertical .bx_filter_section').remove();
					insertFilter=false;
				}
			}
		}
	}
}
/*filter end*/

// TOP MENU ANIMATION
$(document).on('click', '.menu_top_block>li .more a', function(){
	$this = $(this);
	$this.parents('.dropdown').first().find('>.hidden').removeClass('hidden');
	$this.parent().addClass('hidden');
	setTimeout(function(){
		$this.parent().remove();
	}, 500);
});

$(document).on('mouseenter', '.menu_top_block.catalogfirst>li>.dropdown>li.full', function(){
	var $submenu = $(this).find('>.dropdown');

	if($submenu.length){
		if(topMenuEnterTimer){
			clearTimeout(topMenuEnterTimer);
			topMenuEnterTimer = false;
		}
	}
});

$(document).on('mouseenter', '.menu_top_block>li:not(.full)', function(){
	var $submenu = $(this).find('>.dropdown');

	if($submenu.length && !$submenu.hasClass('visible')){
		var $menu = $(this).parents('.menu');
		var $wrapmenu = $menu.parents('.wrap_menu');
		var wrapMenuWidth = $wrapmenu.actual('outerWidth');
		var wrapMenuLeft = $wrapmenu.offset().left;
		var wrapMenuRight = wrapMenuLeft + wrapMenuWidth;
		var left = wrapMenuRight - ($(this).offset().left + $submenu.actual('outerWidth'));
		if(window.matchMedia('(min-width: 951px)').matches && $(this).hasClass('catalog') && ( $('.banner_auto').hasClass('catalog_page') || $('.banner_auto').hasClass('front_page'))){
			return;
		}
		if(left < 0){
			$submenu.css({left: left + 'px'});
		}
		$submenu.stop().slideDown(animationTime, function(){
			$submenu.css({height: '', 'overflow':'visible'});
		});


		$(this).on('mouseleave', function(){
			var leaveTimer = setTimeout(function(){
				$submenu.stop().slideUp(animationTime, function(){
					$submenu.css({left: ''});
				});
			}, delayTime);

			$(this).on('mouseenter', function(){
				if(leaveTimer){
					clearTimeout(leaveTimer);
					leaveTimer = false;
				}
			});
		});
	}

});

$(document).on('mouseenter', '.menu_top_block>li .dropdown>li', function(){
	var $this = $(this);
	var $submenu = $this.find('>.dropdown');

	if($submenu.length && ((!$this.parents('.full').length && !$this.hasClass('full')) || $this.parents('.more').length)){
		var $menu = $this.parents('.menu');
		var $wrapmenu = $menu.parents('.wrap_menu');
		var arParentSubmenuForOpacity = [];
		topMenuEnterTimer = setTimeout(function(){

			var wrapMenuWidth = $wrapmenu.actual('outerWidth');
			var wrapMenuLeft = $wrapmenu.offset().left;
			var wrapMenuRight = wrapMenuLeft + wrapMenuWidth;
			var $parentSubmenu = $this.parent();
			var bToLeft = $parentSubmenu.hasClass('toleft') ? true : false;
			if(!bToLeft){
				bToLeft = $this.offset().left + $this.actual('outerWidth') + $submenu.actual('outerWidth') > wrapMenuRight;
			}
			else{
				bToLeft = $this.offset().left + $this.actual('outerWidth') - $submenu.actual('outerWidth') < wrapMenuLeft;
			}

			if(bToLeft){
				$this.find('>.dropdown').addClass('toleft').show();
			}
			else{
				$this.find('>.dropdown').removeClass('toleft').show();
			}
			var submenuLeft = $submenu.offset().left;
			var submenuRight = submenuLeft + $submenu.actual('outerWidth');

			$this.parents('.dropdown').each(function(){
				var $this = $(this);
				var leftOffset = $this.offset().left;
				var rightOffset = leftOffset + $this.actual('outerWidth');
				if(leftOffset >= submenuLeft  && leftOffset < (submenuRight - 1) || (rightOffset > (submenuLeft + 1) && rightOffset <= submenuRight)){
					arParentSubmenuForOpacity.push($this);
					$this.find('>li>a').css({opacity: '0.1'});
				}
			});
		}, delayTime);

		$this.unbind('mouseleave');
		$this.on('mouseleave', function(){
			var leaveTimer = setTimeout(function(){
				$this.find('.dropdown').removeClass('toleft').hide();
				if(arParentSubmenuForOpacity.length){
					for(i in arParentSubmenuForOpacity){
						arParentSubmenuForOpacity[i].find('>li>a').css({opacity: ''});
					}
				}
			}, delayTime);

			$this.unbind('mouseenter');
			$this.on('mouseenter', function(){
				if(leaveTimer){
					clearTimeout(leaveTimer);
					leaveTimer = false;
				}
			});
		});
	}
});

getGridSize = function(counts) {
	var counts_item=1;
		//wide
		if(window.matchMedia('(min-width: 1200px)').matches){
			counts_item=counts[0];
		}

		//large
		if(window.matchMedia('(max-width: 1200px)').matches){
			counts_item=counts[1];
		}

		//middle
		if(window.matchMedia('(max-width: 992px)').matches){
			counts_item=counts[2];
		}

		//small
		if(counts[3]){
			if(window.matchMedia('(max-width: 600px)').matches){
				counts_item=counts[3];
			}
		}

		//exsmall
		if(counts[4]){
			if(window.matchMedia('(max-width: 400px)').matches){
				counts_item=counts[4];
			}
		}
	return counts_item;
}

CheckFlexSlider = function(){
	$('.flexslider:not(.thmb)').each(function(){
		var slider = $(this);
		slider.resize();
		var counts = slider.data('flexslider').vars.counts;
		if(typeof(counts) != 'undefined'){
			var cnt = getGridSize(counts);
			var to0 = (cnt != slider.data('flexslider').vars.minItems || cnt != slider.data('flexslider').vars.maxItems || cnt != slider.data('flexslider').vars.move);
			if(to0){
				slider.data('flexslider').vars.minItems = cnt;
				slider.data('flexslider').vars.maxItems = cnt;
				slider.data('flexslider').vars.move = cnt;
				slider.flexslider(0);
				slider.resize();
				slider.resize(); // twise!
			}
		}
	});
}

InitFlexSlider = function() {
	$('.flexslider:not(.thmb):not(.flexslider-init)').each(function(){
		var slider = $(this);
		var options;
		var defaults = {
			animationLoop: false,
			controlNav: false,
			directionNav: true,
			animation: "slide"
		}
		var config = $.extend({}, defaults, options, slider.data('plugin-options'));
		if(!slider.parent().hasClass('top_slider_wrapp')){
			if(typeof(config.counts) != 'undefined' && config.direction !== 'vertical'){
				config.maxItems =  getGridSize(config.counts);
				config.minItems = getGridSize(config.counts);
				config.move = getGridSize(config.counts);
				config.itemWidth = 200;
			}

			config.after = config.start = function(slider){
				var eventdata = {slider: slider};
				BX.onCustomEvent('onSlide', [eventdata]);
			}

			config.end = function(slider){
				var eventdata = {slider: slider};
				BX.onCustomEvent('onSlideEnd', [eventdata]);
			}

			slider.flexslider(config).addClass('flexslider-init');
			if(config.controlNav)
				slider.addClass('flexslider-control-nav');
			if(config.directionNav)
				slider.addClass('flexslider-direction-nav');
		}
	});
}

InitZoomPict = function() {
	if($('.zoom_picture').length){
		// $('.zoom_picture').each(function(){
		var slide=$('.zoom_picture').closest('.slides');
		var zoomer = $('.zoom_picture'),
			options,
			defaults = {
				zoomrange: [1, 12],
				zoomstart: 4,
				magnifierborder: "1px solid #cccccd",
				magnifiersize:[slide.width(),slide.height()],
				rightoffset:30
			};
		var config = $.extend({}, defaults, options, zoomer.data('plugin-options'));
			zoomer.imagezoomsl(config).addClass('zoom-init');
		// });
	}
}

var arBasketAsproCounters = {}
SetActualBasketFlyCounters = function(){
	if(arBasketAsproCounters.DEFAULT == true){
		$.ajax({
			url: arOptimusOptions['SITE_DIR'] + 'ajax/basket_fly.php',
			type: 'post',
			success: function(html){
				$('#basket_line .basket_fly').addClass('loaded').html(html);
			}
		});
	}
	else{
		$('#header .basket_fly .opener .basket_count .count').attr('class', 'count' + (arBasketAsproCounters.READY.COUNT > 0 ? '' : ' empty_items')).find('.items span').text(arBasketAsproCounters.READY.COUNT)
		$('#header .basket_fly .opener .basket_count + a').attr('href', arBasketAsproCounters['READY']['HREF'])
		$('#header .basket_fly .opener .basket_count').attr('title', arBasketAsproCounters.READY.TITLE).attr('class', 'basket_count small clicked' + (arBasketAsproCounters.READY.COUNT > 0 ? '' : ' empty'))

		$('#header .basket_fly .opener .wish_count .count').attr('class', 'count' + (arBasketAsproCounters.DELAY.COUNT > 0 ? '' : ' empty_items')).find('.items span').text(arBasketAsproCounters.DELAY.COUNT)
		$('#header .basket_fly .opener .wish_count + a').attr('href', arBasketAsproCounters.DELAY.HREF)
		$('#header .basket_fly .opener .wish_count').attr('title', arBasketAsproCounters.DELAY.TITLE).attr('class', 'wish_count small clicked' + (arBasketAsproCounters.DELAY.COUNT > 0 ? '' : ' empty'))

		$('#header .basket_fly .opener .compare_count .count').attr('class', 'count' + (arBasketAsproCounters.COMPARE.COUNT > 0 ? '' : ' empty_items')).find('.items span').text(arBasketAsproCounters.COMPARE.COUNT)
		$('#header .basket_fly .opener .compare_count + a').attr('href', arBasketAsproCounters.COMPARE.HREF)

		$('#header .basket_fly .opener .user_block').attr('title', arBasketAsproCounters.PERSONAL.TITLE).find('+ a').attr('href', arBasketAsproCounters.PERSONAL.HREF)
		$('#header .basket_fly .opener .user_block .wraps_icon_block').attr('class', 'wraps_icon_block' + (arBasketAsproCounters.PERSONAL.ID > 0 ? ' user_auth' : ' user_reg') + (arBasketAsproCounters.PERSONAL.SRC ? ' w_img' : ' no_img')).attr('style', (arBasketAsproCounters.PERSONAL.SRC ? 'background:url("' + arBasketAsproCounters.PERSONAL.SRC + '") center center no-repeat;' : ''))
	}
}

$(document).ready(function(){
	//ecommerce order
	if(arOptimusOptions["PAGES"]["ORDER_PAGE"]){
		var arUrl = parseUrlQuery();
		if("ORDER_ID" in arUrl){
			$.ajax({
				url:arOptimusOptions['SITE_DIR']+"ajax/check_order.php",
				dataType: "json",
				type: "POST",
				data: { "ID": arUrl["ORDER_ID"] },
				success: function(id){
					if(parseInt(id)){
						purchaseCounter(parseInt(id), BX.message("FULL_ORDER"));
					}
				}
			})
		}
	}

	scrollToTop();
	checkVerticalMobileFilter();

	setTimeout(function(){
		InitTopestMenuGummi();
		InitTopMenuGummi();
		isOnceInited = true;

		InitFlexSlider();

		try{
			// SHOW TOP MENU ON READY AFTER GUMMI
			$('header .wrap_menu').css({overflow: 'visible'});
			$('.visible_on_ready').removeClass('visible_on_ready');
		}
		catch(e){console.error(e);}
	},100);



	InitZoomPict();

	$('body').on( 'click', '.captcha_reload', function(e){
		var captcha = $(this).parents('.captcha-row');
		e.preventDefault();
		$.ajax({
			url: arOptimusOptions['SITE_DIR'] + 'ajax/captcha.php'
		}).done(function(text){
			captcha.find('input[name=captcha_sid]').val(text);
			captcha.find('img').attr('src', '/bitrix/tools/captcha.php?captcha_sid=' + text);
			captcha.find('input[name=captcha_word]').val('').removeClass('error');
			captcha.find('.captcha_input').removeClass('error').find('.error').remove();
		});
	});

	setTimeout(function(){
		$('.bg_image_site').css({
			'opacity':1
		})
	},200);

	if(window.matchMedia('(min-width: 768px)').matches){
		$('.wrapper_middle_menu.wrap_menu').removeClass('mobile');
	}

	if(window.matchMedia('(max-width: 767px)').matches){
		$('.wrapper_middle_menu.wrap_menu').addClass('mobile');
	}

	setTimeout(function() {
		$(window).scroll();
	}, 400);

	$(".show_props").live('click', function(){
		$(this).prev(".props_list_wrapp").stop().slideToggle(333);
		$(this).find(".char_title").toggleClass("opened");
	});

	$('.see_more').live('click', function(e) {
		e.preventDefault();
		var see_more = ($(this).is('.see_more') ? $(this) : $(this).parents('.see_more').first());
		var see_moreText = (see_more.find('> a').length ? see_more.find('> a') : see_more);
		var see_moreHiden = see_more.parent().find('> .d');
		if(see_more.hasClass('open')){
			see_moreText.text(BX.message('CATALOG_VIEW_MORE'));
			see_more.removeClass('open');
			see_moreHiden.hide();
		}
		else{
			see_moreText.text(BX.message('CATALOG_VIEW_LESS'));
			see_more.addClass('open');
			see_moreHiden.show();
		}
		return false;
	});

	$('.button.faq_button').click(function(e){
		e.preventDefault();
		$(this).toggleClass('opened');
		$('.faq_ask .form').slideToggle();
	});

	$('.staff.list .staff_section .staff_section_title a').click(function(e) {
		e.preventDefault();
		$(this).parents('.staff_section').toggleClass('opened');
		$(this).parents('.staff_section').find('.staff_section_items').stop().slideToggle(600);
		$(this).parents('.staff_section_title').find('.opener_icon').toggleClass('opened');
	});

	$('.jobs_wrapp .item .name').click(function(e) {
		$(this).closest('.item').toggleClass('opened');
		$(this).closest('.item').find('.description_wrapp').stop().slideToggle(600);
		$(this).closest('.item').find('.opener_icon').toggleClass('opened');
	});

	$('.faq.list .item .q a').live('click', function(e){
		e.preventDefault();
		$(this).parents('.item').toggleClass('opened');
		$(this).parents('.item').find('.a').stop().slideToggle();
		$(this).parents('.item').find('.q .opener_icon').toggleClass('opened');
	});

	$('.opener_icon').click(function(e) {
		e.preventDefault();
		$(this).parent().find('a').trigger('click');
	});

	$('.to-order').live('click', function(e){
		e.preventDefault();
		$("body").append("<span class='evb-toorder' style='display:none;'></span>");
		jqmEd('to-order', arOptimusOptions['FORM']['TOORDER_FORM_ID'], '.evb-toorder', '', this);
		$("body .evb-toorder").click();
		$("body .evb-toorder").remove();
	});

	$('.dotdot').dotdotdot();

	$('.more_block span').live('click', function() {
		var content_offset=$('.catalog_detail .tabs_section').offset();
		$('html, body').animate({scrollTop: content_offset.top-23}, 400);
	});

	$(".counter_block:not(.basket) .plus").live("click", function(){
		if(!$(this).parents('.basket_wrapp').length){
			if($(this).parent().data("offers")!="Y"){
				var isDetailSKU2 = $(this).parents('.counter_block_wr').length;
					input = $(this).parents(".counter_block").find("input[type=text]")
					tmp_ratio = !isDetailSKU2 ? $(this).parents(".counter_wrapp").find(".to-cart").data('ratio') : $(this).parents('tr').first().find("td.buy .to-cart").data('ratio'),
					isDblQuantity = !isDetailSKU2 ? $(this).parents(".counter_wrapp").find(".to-cart").data('float_ratio') : $(this).parents('tr').first().find("td.buy .to-cart").data('float_ratio'),
					ratio=( isDblQuantity ? parseFloat(tmp_ratio) : parseInt(tmp_ratio, 10)),
					max_value='';
					currentValue = input.val();


				if(isDblQuantity)
					ratio = Math.round(ratio*arOptimusOptions.JS_ITEM_CLICK.precisionFactor)/arOptimusOptions.JS_ITEM_CLICK.precisionFactor;

				curValue = (isDblQuantity ? parseFloat(currentValue) : parseInt(currentValue, 10));

				curValue += ratio;
				if (isDblQuantity){
					curValue = Math.round(curValue*arOptimusOptions.JS_ITEM_CLICK.precisionFactor)/arOptimusOptions.JS_ITEM_CLICK.precisionFactor;
				}
				if(parseFloat($(this).data('max'))>0){
					if(input.val() < $(this).data('max')){
						if(curValue>$(this).data('max')){
							input.val($(this).data('max'));
						}else{
							input.val(curValue);
						}
						input.change();
					}
				}else{
					input.val(curValue);
					input.change();
				}
			}
		}
	});

	$(".counter_block:not(.basket) .minus").live("click", function(){
		if(!$(this).parents('.basket_wrapp').length){
			if($(this).parent().data("offers")!="Y"){
				var isDetailSKU2 = $(this).parents('.counter_block_wr').length;
					input = $(this).parents(".counter_block").find("input[type=text]")
					tmp_ratio = !isDetailSKU2 ? $(this).parents(".counter_wrapp").find(".to-cart").data('ratio') : $(this).parents('tr').first().find("td.buy .to-cart").data('ratio'),
					isDblQuantity = !isDetailSKU2 ? $(this).parents(".counter_wrapp").find(".to-cart").data('float_ratio') : $(this).parents('tr').first().find("td.buy .to-cart").data('float_ratio'),
					ratio=( isDblQuantity ? parseFloat(tmp_ratio) : parseInt(tmp_ratio, 10)),
					max_value='';
					currentValue = input.val();

				if(isDblQuantity)
					ratio = Math.round(ratio*arOptimusOptions.JS_ITEM_CLICK.precisionFactor)/arOptimusOptions.JS_ITEM_CLICK.precisionFactor;

				curValue = (isDblQuantity ? parseFloat(currentValue) : parseInt(currentValue, 10));

				curValue -= ratio;
				if (isDblQuantity){
					curValue = Math.round(curValue*arOptimusOptions.JS_ITEM_CLICK.precisionFactor)/arOptimusOptions.JS_ITEM_CLICK.precisionFactor;
				}

				if(parseFloat($(this).parents(".counter_block").find(".plus").data('max'))>0){
					if(currentValue > ratio){
						if(curValue<ratio){
							input.val(ratio);
						}else{
							input.val(curValue);
						}
						input.change();
					}
				}else{
					if(curValue > ratio){
						input.val(curValue);
					}else{
						if(ratio){
							input.val(ratio);
						}else if(currentValue > 1){
							input.val(curValue);
						}
					}
					input.change();
				}
			}
		}
	});

	$('.counter_block input[type=text]').numeric({allow:"."});
	$('.counter_block input[type=text]').live('focus', function(){
		$(this).addClass('focus');
	})
	$('.counter_block input[type=text]').live('blur', function(){
		$(this).removeClass('focus');
	})
	$('.counter_block input[type=text]').live('change', function(e){
		if(!$(this).parents('.basket_wrapp').length){
			var val = $(this).val(),
				tmp_ratio = $(this).parents(".counter_wrapp").find(".to-cart").data('ratio') ? $(this).parents(".counter_wrapp").find(".to-cart").data('ratio') : $(this).parents('tr').first().find("td.buy .to-cart").data('ratio'),
				isDblQuantity = $(this).parents(".counter_wrapp").find(".to-cart").data('float_ratio') ? $(this).parents(".counter_wrapp").find(".to-cart").data('float_ratio') : $(this).parents('tr').first().find("td.buy .to-cart").data('float_ratio'),
				ratio=( isDblQuantity ? parseFloat(tmp_ratio) : parseInt(tmp_ratio, 10));

			if(isDblQuantity)
				ratio = Math.round(ratio*arOptimusOptions.JS_ITEM_CLICK.precisionFactor)/arOptimusOptions.JS_ITEM_CLICK.precisionFactor;

			if($(this).hasClass('focus'))
				val -= (val % ratio);

			if(parseFloat($(this).parents(".counter_block").find(".plus").data('max'))>0){
				if(val>parseFloat($(this).parents(".counter_block").find(".plus").data('max'))){
					val=parseFloat($(this).parents(".counter_block").find(".plus").data('max'));
					val -= (val % ratio);
				}
			}
			if(val<ratio){
				val=ratio;
			}else if(!parseFloat(val)){
				val=1;
			}

			$(this).parents('.counter_block').parent().parent().find('.to-cart').attr('data-quantity', val);
			$(this).parents('.counter_block').parent().parent().find('.one_click').attr('data-quantity', val);
			$(this).val(val);
		}
	});

	/*slide cart*/
	$(document).on('mouseenter', '#basket_line .basket_normal:not(.empty_cart):not(.bcart) .basket_block ', function() {
		$(this).closest('.basket_normal').find('.popup').addClass('block');
		$(this).closest('.basket_normal').find('.basket_popup_wrapp').stop(true,true).slideDown(150);
	});
	$(document).on('mouseleave', '#basket_line .basket_normal .basket_block ', function() {
		var th=$(this);
		$(this).closest('.basket_normal').find('.basket_popup_wrapp').stop(true,true).slideUp(150, function(){
			th.closest('.basket_normal').find('.popup').removeClass('block');
		});
	});

	$(document).on('click', '.popup_button_basket', function(){
		var th=$(".to-cart[data-item="+$(this).data("item")+"]");

		var val = th.attr('data-quantity');

		if(!val) $val = 1;

		var tmp_props=th.data("props"),
			props='',
			part_props='',
			add_props='N',
			fill_prop={},
			iblockid = th.data('iblockid'),
			offer = th.data('offers'),
			rid='',
			basket_props='',
			item = th.attr('data-item');

		if(offer!="Y"){
			offer = "N";
		}else{
			basket_props=th.closest('.prices_tab').find('.bx_sku_props input').val();
		}
		if(tmp_props){
			props=tmp_props.split(";");
		}
		if(th.data("part_props")){
			part_props=th.data("part_props");
		}
		if(th.data("add_props")){
			add_props=th.data("add_props");
		}
		if($('.rid_item').length){
			rid=$('.rid_item').data('rid');
		}else if(th.data('rid')){
			rid=th.data('rid');
		}

		fill_prop=fillBasketPropsExt(th, 'prop', 'bx_ajax_text');

		fill_prop.quantity=val;
		fill_prop.add_item='Y';
		fill_prop.rid=rid;
		fill_prop.offers=offer;
		fill_prop.iblockID=iblockid;
		fill_prop.part_props=part_props;
		fill_prop.add_props=add_props;
		fill_prop.props=JSON.stringify(props);
		fill_prop.item=item;
		fill_prop.basket_props=basket_props;

		$.ajax({
			type:"POST",
			url:arOptimusOptions['SITE_DIR']+"ajax/item.php",
			data:fill_prop,
			dataType:"json",
			success:function(data){
				$('.basket_error_frame').jqmHide();
				if("STATUS" in data){
					getActualBasket(fill_prop.iblockID);
					if(data.STATUS === 'OK'){
						th.hide();
						th.closest('.counter_wrapp').find('.counter_block').hide();
						th.parents('tr').find('.counter_block_wr .counter_block').hide();
						th.closest('.button_block').addClass('wide');
						th.parent().find('.in-cart').show();

						addBasketCounter(item);
						$('.wish_item[data-item='+item+']').removeClass("added");
						$('.wish_item[data-item='+item+']').find(".value").show();
						$('.wish_item[data-item='+item+']').find(".value.added").hide();
						if($("#basket_line .cart").length)
						{
							if($("#basket_line .cart").is(".empty_cart"))
							{
								$("#basket_line .cart").removeClass("empty_cart").find(".cart_wrapp a.basket_link").removeAttr("href").addClass("cart-call");
								$("#basket_line .cart").removeClass("ecart");
								touchBasket('.cart:not(.empty_cart) .basket_block .link');
							}

							reloadTopBasket('add', $('#basket_line'), 200, 5000, 'Y');

						}else if($("#basket_line .basket_fly").length){
							if($(window).outerWidth()>768){
								basketFly('open');
							}else{
								basketFly('refresh');
							}
						}
					}else{
						showBasketError(BX.message(data.MESSAGE));
					}
				}else{
					showBasketError(BX.message("CATALOG_PARTIAL_BASKET_PROPERTIES_ERROR"));
				}
			}
		});
	})

	$(document).on( 'click', '.to-cart:not(.read_more)', function(e){
		e.preventDefault();
		var th=$(this);

		var val = $(this).attr('data-quantity');

		if(!val) $val = 1;

		var tmp_props=$(this).data("props"),
			props='',
			part_props='',
			add_props='N',
			fill_prop={},
			iblockid = $(this).data('iblockid'),
			offer = $(this).data('offers'),
			rid='',
			basket_props='',
			item = $(this).attr('data-item');

		if(offer!="Y"){
			offer = "N";
		}else{
			basket_props=$(this).closest('.prices_tab').find('.bx_sku_props input').val();
		}
		if(tmp_props){
			props=tmp_props.split(";");
		}
		if($(this).data("part_props")){
			part_props=$(this).data("part_props");
		}
		if($(this).data("add_props")){
			add_props=$(this).data("add_props");
		}
		if($('.rid_item').length){
			rid=$('.rid_item').data('rid');
		}else if($(this).data('rid')){
			rid=$(this).data('rid');
		}

		fill_prop=fillBasketPropsExt(th, 'prop', th.data('bakset_div'));

		fill_prop.quantity=val;
		fill_prop.add_item='Y';
		fill_prop.rid=rid;
		fill_prop.offers=offer;
		fill_prop.iblockID=iblockid;
		fill_prop.part_props=part_props;
		fill_prop.add_props=add_props;
		fill_prop.props=JSON.stringify(props);
		fill_prop.item=item;
		fill_prop.basket_props=basket_props;

		if(th.data("empty_props")=="N"){
			showBasketError($("#"+th.data("bakset_div")).html(), BX.message("ERROR_BASKET_PROP_TITLE"), "Y", th);
		}else{
			$.ajax({
				type:"POST",
				url:arOptimusOptions['SITE_DIR']+"ajax/item.php",
				data:fill_prop,
				dataType:"json",
				success:function(data){
					getActualBasket(fill_prop.iblockID);
					if(data !==null){
						if("STATUS" in data){
							if(data.MESSAGE_EXT===null)
								data.MESSAGE_EXT='';
							if(data.STATUS === 'OK'){
								th.hide();
								th.closest('.counter_wrapp').find('.counter_block').hide();
								th.parents('tr').find('.counter_block_wr .counter_block').hide();
								th.closest('.button_block').addClass('wide');
								th.parent().find('.in-cart').show();

								addBasketCounter(item);
								$('.wish_item[data-item='+item+']').removeClass("added");
								$('.wish_item[data-item='+item+']').find(".value").show();
								$('.wish_item[data-item='+item+']').find(".value.added").hide();
								if($("#basket_line .cart").length)
								{
									if($("#basket_line .cart").is(".empty_cart"))
									{
										$("#basket_line .cart").removeClass("empty_cart").find(".cart_wrapp a.basket_link").removeAttr("href").addClass("cart-call");
										$("#basket_line .cart").removeClass("ecart");
										touchBasket('.cart:not(.empty_cart) .basket_block .link');
									}

									reloadTopBasket('add', $('#basket_line'), 200, 5000, 'Y');

								}else if($("#basket_line .basket_fly").length){
									if($(window).outerWidth()>768){
										basketFly('open');
									}else{
										basketFly('refresh');
									}
								}
							}else{
								showBasketError(BX.message(data.MESSAGE)+' <br/>'+data.MESSAGE_EXT);
							}
						}else{
							showBasketError(BX.message("CATALOG_PARTIAL_BASKET_PROPERTIES_ERROR"));
						}
					}else{
						th.hide();
						th.closest('.counter_wrapp').find('.counter_block').hide();
						th.parents('tr').find('.counter_block_wr .counter_block').hide();
						th.closest('.button_block').addClass('wide');
						th.parent().find('.in-cart').show();

						addBasketCounter(item);
						$('.wish_item[data-item='+item+']').removeClass("added");
						$('.wish_item[data-item='+item+']').find(".value").show();
						$('.wish_item[data-item='+item+']').find(".value.added").hide();
						if($("#basket_line .cart").length)
						{
							if($("#basket_line .cart").is(".empty_cart"))
							{
								$("#basket_line .cart").removeClass("empty_cart").find(".cart_wrapp a.basket_link").removeAttr("href").addClass("cart-call");
								$("#basket_line .cart").removeClass("ecart");
								touchBasket('.cart:not(.empty_cart) .basket_block .link');
							}

							reloadTopBasket('add', $('#basket_line'), 200, 5000, 'Y');
						}else if($("#basket_line .basket_fly").length && $(window).outerWidth()>768){
							basketFly('open');
						}
					}
				}
			});
		}
	})

	$(document).on('click', '.to-subscribe', function(e){
		e.preventDefault();
		if($(this).is('.auth')){
			location.href=arOptimusOptions['SITE_DIR']+'auth/?backurl='+location.pathname;
		}
		else{
			var item = $(this).attr('data-item'),
				iblockid = $(this).attr('data-iblockid');
			$(this).hide();
			$(this).parent().find('.in-subscribe').show();
			$.get(arOptimusOptions['SITE_DIR'] + 'ajax/item.php?item=' + item + '&subscribe_item=Y',
				$.proxy(function(data){
					$('.wish_item[data-item=' + item + ']').removeClass('added');
					getActualBasket(iblockid);
				})
			);
		}
	})

	$(document).on('click', '.in-subscribe', function(e){
		e.preventDefault();
		var item = $(this).attr('data-item'),
			iblockid = $(this).attr('data-iblockid');;
		$(this).hide();
		$(this).parent().find('.to-subscribe').show();
		$.get(arOptimusOptions['SITE_DIR'] + 'ajax/item.php?item=' + item + '&subscribe_item=Y',
			$.proxy(function(data){
				getActualBasket(iblockid);
			})
		);
	})

	$(document).on('click', '.wish_item', function(e){
		e.preventDefault();
		var val = $(this).attr('data-quantity'),
			offer = $(this).data('offers'),
			iblockid = $(this).data('iblock'),
			tmp_props=$(this).data("props"),
			props='',
			item = $(this).data('item');
			item2 = $(this).attr('data-item');
		if(!val) $val = 1;
		if(offer!="Y") offer = "N";
		if(tmp_props){
			props=tmp_props.split(";");
		}
		if(!$(this).hasClass('text')){
			if($(this).hasClass('added')){
				$(this).hide();
				$(this).closest('.wish_item_button').find('.to').show();

				$('.like_icons').each(function(){
					if($(this).find('.wish_item.text[data-item="'+item+'"]').length){
						$(this).find('.wish_item.text[data-item="'+item+'"]').removeClass('added');
						$(this).find('.wish_item.text[data-item="'+item+'"]').find('.value').show();
						$(this).find('.wish_item.text[data-item="'+item+'"]').find('.value.added').hide();
					}
					if($(this).find('.wish_item_button').length){
						$(this).find('.wish_item_button').find('.wish_item[data-item="'+item+'"]').removeClass('added');
						$(this).find('.wish_item_button').find('.wish_item[data-item="'+item+'"]').find('.value').show();
						$(this).find('.wish_item_button').find('.wish_item[data-item="'+item+'"]').find('.value.added').hide();
					}
				})
			}
			else{
				$(this).hide();
				$(this).closest('.wish_item_button').find('.in').addClass('added').show();

				$('.like_icons').each(function(){
					if($(this).find('.wish_item.text[data-item="'+item+'"]').length){
						$(this).find('.wish_item.text[data-item="'+item+'"]').addClass('added');
						$(this).find('.wish_item.text[data-item="'+item+'"]').find('.value').hide();
						$(this).find('.wish_item.text[data-item="'+item+'"]').find('.value.added').css({"display":"block"})
					}
					if($(this).find('.wish_item_button').length){
						$(this).find('.wish_item_button').find('.wish_item[data-item="'+item+'"]').addClass('added');
						$(this).find('.wish_item_button').find('.wish_item[data-item="'+item+'"]').find('.value').hide();
						$(this).find('.wish_item_button').find('.wish_item[data-item="'+item+'"]').find('.value.added').show();
					}
				})
			}
		}else{
			if(!$(this).hasClass('added')){
				$('.wish_item[data-item=' + item + ']').addClass('added');
				$('.wish_item[data-item=' + item + ']').find('.value').hide();
				$('.wish_item[data-item=' + item + ']').find('.value.added').css('display','block');

				$('.like_icons').each(function(){
					if($(this).find('.wish_item_button').length){
						$(this).find('.wish_item_button').find('.wish_item[data-item="'+item+'"]').addClass('added');
						$(this).find('.wish_item_button').find('.wish_item[data-item="'+item+'"]').find('.value').hide();
						$(this).find('.wish_item_button').find('.wish_item[data-item="'+item+'"]').find('.value.added').show();
					}
				})
			}else{
				$('.wish_item[data-item=' + item + ']').removeClass('added');
				$('.wish_item[data-item=' + item + ']').find('.value').show();
				$('.wish_item[data-item=' + item + ']').find('.value.added').hide();

				$('.like_icons').each(function(){
					if($(this).find('.wish_item_button').length){
						$(this).find('.wish_item_button').find('.wish_item[data-item="'+item+'"]').removeClass('added');
						$(this).find('.wish_item_button').find('.wish_item[data-item="'+item+'"]').find('.value').show();
						$(this).find('.wish_item_button').find('.wish_item[data-item="'+item+'"]').find('.value.added').hide();
					}
				})
			}
		}

		$('.in-cart[data-item=' + item + ']').hide();
		$('.to-cart[data-item=' + item + ']').parent().removeClass('wide');
		$('.to-cart[data-item=' + item + ']').show();
		$('.counter_block[data-item=' + item + ']').show();
		if(!$(this).closest('.module-cart').size()){
			$.ajax({
				type:"GET",
				url:arOptimusOptions['SITE_DIR']+"ajax/item.php",
				data:"item="+item2+"&quantity="+val+"&wish_item=Y"+"&offers="+offer+"&iblockID="+iblockid+"&props="+JSON.stringify(props),
				dataType:"json",
				success: function(data){
					getActualBasket(iblockid);
					if(data !==null){
						if(data.MESSAGE_EXT===null)
							data.MESSAGE_EXT='';
						if("STATUS" in data){
							if(data.STATUS === 'OK'){
								if($("#basket_line .cart").size()){
									reloadTopBasket('wish', $('#basket_line'), 200, 5000, 'N');
								}else{
									basketFly('wish');
								}
							}else{
								showBasketError(BX.message(data.MESSAGE)+' <br/>'+data.MESSAGE_EXT, BX.message("ERROR_ADD_DELAY_ITEM"));
							}
						}else{
							showBasketError(BX.message(data.MESSAGE)+' <br/>'+data.MESSAGE_EXT, BX.message("ERROR_ADD_DELAY_ITEM"));
						}
					}else{
						if($("#basket_line .cart").size()){
							reloadTopBasket('wish', $('#basket_line'), 200, 5000, 'N');
						}else{
							basketFly('wish');
						}
					}
				}
			});
		}
	})

	// $('.compare_item').live('click', function(e){
	$(document).on('click', '.compare_item', function(e){
		e.preventDefault();
		var item = $(this).attr('data-item');
		var iblockID = $(this).attr('data-iblock');
		if(!$(this).hasClass('text')){
			if($(this).hasClass('added')){
				$(this).hide();
				$(this).closest('.compare_item_button').find('.to').show();

				/*sync other button*/
				$('.like_icons').each(function(){
					if($(this).find('.compare_item.text[data-item="'+item+'"]').length){
						$(this).find('.compare_item.text[data-item="'+item+'"]').removeClass('added');
						$(this).find('.compare_item.text[data-item="'+item+'"]').find('.value').show();
						$(this).find('.compare_item.text[data-item="'+item+'"]').find('.value.added').hide();
					}
					if($(this).find('.compare_item_button').length){
						$(this).find('.compare_item_button').find('.compare_item[data-item="'+item+'"]').removeClass('added');
						$(this).find('.compare_item_button').find('.compare_item[data-item="'+item+'"]').find('.value').show();
						$(this).find('.compare_item_button').find('.compare_item[data-item="'+item+'"]').find('.value.added').hide();
					}
				})
			}
			else{
				$(this).hide();
				$(this).closest('.compare_item_button').find('.in').show();

				/*sync other button*/
				$('.like_icons').each(function(){
					if($(this).find('.compare_item.text[data-item="'+item+'"]').length){
						$(this).find('.compare_item.text[data-item="'+item+'"]').addClass('added');;
						$(this).find('.compare_item.text[data-item="'+item+'"]').find('.value').hide();
						$(this).find('.compare_item.text[data-item="'+item+'"]').find('.value.added').css({"display":"block"});
					}
					if($(this).find('.compare_item_button').length){
						$(this).find('.compare_item_button').find('.compare_item[data-item="'+item+'"]').addClass('added');
						$(this).find('.compare_item_button').find('.compare_item[data-item="'+item+'"]').find('.value.added').show();
						$(this).find('.compare_item_button').find('.compare_item[data-item="'+item+'"]').find('.value').hide();
					}
				})
			}
		}else{
			if(!$(this).hasClass('added')){
				$('.compare_item[data-item=' + item + ']').addClass('added');
				$('.compare_item[data-item=' + item + ']').find('.value').hide();
				$('.compare_item[data-item=' + item + ']').find('.value.added').css('display','block');

				/*sync other button*/
				$('.like_icons').each(function(){
					if($(this).find('.compare_item_button').length){
						$(this).find('.compare_item_button').find('.compare_item[data-item="'+item+'"]').addClass('added');
						$(this).find('.compare_item_button').find('.compare_item[data-item="'+item+'"]').find('.value.added').show();
						$(this).find('.compare_item_button').find('.compare_item[data-item="'+item+'"]').find('.value').hide();
					}
				})
			}else{
				$('.compare_item[data-item=' + item + ']').removeClass('added');
				$('.compare_item[data-item=' + item + ']').find('.value').show();
				$('.compare_item[data-item=' + item + ']').find('.value.added').hide();

				/*sync other button*/
				$('.like_icons').each(function(){
					if($(this).find('.compare_item_button').length){
						$(this).find('.compare_item_button').find('.compare_item[data-item="'+item+'"]').removeClass('added');
						$(this).find('.compare_item_button').find('.compare_item[data-item="'+item+'"]').find('.value').show();
						$(this).find('.compare_item_button').find('.compare_item[data-item="'+item+'"]').find('.value.added').hide();
					}
				})
			}
		}

		$.get(arOptimusOptions['SITE_DIR'] + 'ajax/item.php?item=' + item + '&compare_item=Y&iblock_id=' + iblockID,
			$.proxy(function(data){
				getActualBasket(iblockID);
				jsAjaxUtil.InsertDataToNode(arOptimusOptions['SITE_DIR'] + 'ajax/show_compare_preview_top.php', 'compare_line', false);
				if($('#compare_fly').length){
					jsAjaxUtil.InsertDataToNode(arOptimusOptions['SITE_DIR'] + 'ajax/show_compare_preview_fly.php', 'compare_fly', false);
				}
			})
		);
	});

	$('.fancy').fancybox({
		openEffect  : 'fade',
		closeEffect : 'fade',
		nextEffect : 'fade',
		prevEffect : 'fade',
		tpl:{
			closeBtn : '<a title="'+BX.message('FANCY_CLOSE')+'" class="fancybox-item fancybox-close" href="javascript:;"></a>',
			next     : '<a title="'+BX.message('FANCY_NEXT')+'" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',
			prev     : '<a title="'+BX.message('FANCY_PREV')+'" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'
		},
	});

	$('.tabs>li').on('click', function(){
		if(!$(this).hasClass('active')){
			var sliderIndex = $(this).index(),
				curLiNav=$(this).closest('.top_blocks').find('.slider_navigation').find('>li:eq(' + sliderIndex + ')'),
				curLi=$(this).closest('.top_blocks').siblings('.tabs_content').find('>li:eq(' + sliderIndex + ')');
			$(this).addClass('active').addClass('cur').siblings().removeClass('active').removeClass('cur');
			curLi.addClass('cur').siblings().removeClass('cur');
			curLiNav.addClass('cur').siblings().removeClass('cur');

			/*equal height*/
			curLi.find('.catalog_block .catalog_item_wrapp .catalog_item .item_info:visible .item-title').sliceHeight({item:'.catalog_item:visible'});
			curLi.find('.catalog_block .catalog_item_wrapp .catalog_item .item_info:visible').sliceHeight({classNull: '.footer_button', item:'.catalog_item:visible'});
			curLi.find('.catalog_block .catalog_item_wrapp .catalog_item:visible').sliceHeight({classNull: '.footer_button', item:'.catalog_item:visible'});
		}
	})

	/*search click*/
	$('.search_block .icon').on('click', function(){
		var th=$(this);
		if($(this).hasClass('open')){
			$(this).closest('.center_block').find('.search_middle_block').removeClass('active');
			$(this).removeClass('open');
			$(this).closest('.center_block').find('.search_middle_block').find('.noborder').hide();
		}else{
			setTimeout(function(){
				th.closest('.center_block').find('.search_middle_block').find('.noborder').show();
			},100);
			$(this).closest('.center_block').find('.search_middle_block').addClass('active');
			$(this).addClass('open');
		}
	})
	$(document).on('mouseenter', '.display_list .item_wrap', function(){
		$(this).prev().addClass('prev');
	});
	$(document).on('mouseleave', '.display_list .item_wrap', function(){
		$(this).prev().removeClass('prev');
	});
	$(document).on('mouseenter', '.catalog_block .item_wrap', function(){
		$(this).addClass('shadow_delay');
	});
	$(document).on('mouseleave', '.catalog_block .item_wrap', function(){
		$(this).removeClass('shadow_delay');
	});
	$(document).on('click', '.no_goods .button', function(){
		$('.bx_filter .smartfilter .bx_filter_search_reset').trigger('click');
	});

	$(document).on('click', '.ajax_load_btn', function(){
		var url=$(this).closest('.right_block').find('.module-pagination .flex-direction-nav .flex-next').attr('href'),
			th=$(this).find('.more_text_ajax');
		th.addClass('loading');

		$.ajax({
			url: url,
			data: {"ajax_get": "Y"},
			success: function(html){
				var new_html=$.parseHTML(html);
				th.removeClass('loading');
				if($('.display_list').length){
					$('.display_list').append(html);
				}else if($('.block_list').length){
					$('.block_list').append(html);
					touchItemBlock('.catalog_item a');
				}else if($('.module_products_list').length){
					$('.module_products_list > tbody').append(html);
				}
				setStatusButton();
				initCountdown();
				BX.onCustomEvent('onAjaxSuccess');
				$('.bottom_nav').html($(html).find('.bottom_nav').html());
			}
		})
	})

	$(document).on('click', '.bx_compare .tabs-head li', function(){
		var url=$(this).find('.sortbutton').data('href');
		BX.showWait(BX("bx_catalog_compare_block"));
		$.ajax({
			url: url,
			data: {'ajax_action': 'Y'},
			success: function(html){
				history.pushState(null, null, url);
				$('#bx_catalog_compare_block').html(html);
				BX.closeWait();
			}
		})
	})
	var hoveredTrs;
	$(document).on({
		mouseover: function(e){
			var _ = $(this);
			var tbodyIndex = _.closest('tbody').index()+1; //+1 for nth-child
			var trIndex = _.index()+1; // +1 for nth-child
			hoveredTrs = $(e.delegateTarget).find('.data_table_props')
				.children(':nth-child('+tbodyIndex+')')
				.children(':nth-child('+trIndex+')').addClass('hovered');
		},
		mouseleave: function(e){
			if(hoveredTrs)
				hoveredTrs.removeClass('hovered');
		}
	}, '.bx_compare .data_table_props tbody>tr');
	$(document).on('click', '.fancy_offer', function(e){
		e.preventDefault();
		var arPict=[];
		$('.sliders .slides_block li').each(function(){
			var obImg = {};
			obImg = {
				'title': $(this).find('img').attr('alt'),
				'href': $(this).data('big')
			}
			if($(this).hasClass('current')){
				arPict.unshift(obImg);
			}else{
				arPict.push(obImg);
			}
		})
		console.log(arPict);
		$.fancybox(arPict, {
			openEffect  : 'fade',
			closeEffect : 'fade',
			nextEffect : 'fade',
			prevEffect : 'fade',
			type : 'image',
			tpl:{
				closeBtn : '<a title="'+BX.message('FANCY_CLOSE')+'" class="fancybox-item fancybox-close" href="javascript:;"></a>',
				next     : '<a title="'+BX.message('FANCY_NEXT')+'" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',
				prev     : '<a title="'+BX.message('FANCY_PREV')+'" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'
			},
		});
	})

	/*tabs*/
	$(".tabs_section .tabs-head li").live("click", function(){
		if(!$(this).is(".current")){
			$(".tabs_section .tabs-head li").removeClass("current");
			$(this).addClass("current");
			$(".tabs_section ul.tabs_content li").removeClass("current");
			if($(this).attr("id") == "product_reviews_tab"){
				$(".shadow.common").hide(); $("#reviews_content").show();
			}
			else{
				$(".shadow.common").show();
				$("#reviews_content").hide();
				$(".tabs_section ul.tabs_content > li:eq("+$(this).index()+")").addClass("current");
			}
		}
	});
	/*open first section slide*/
	setTimeout(function() {
		$('.jobs_wrapp .item:first .name tr').trigger('click');
	}, 300);

	$('.buy_block .slide_offer').on('click', function(){
		scroll_block($('.tabs_section'));
	});
	$('.share_wrapp .text').on('click', function(){
		$(this).parent().find('.shares').fadeToggle();
	})
	$('html, body').live('mousedown', function(e) {
		e.stopPropagation();
		$('.shares').fadeOut();
		$('.search_middle_block').removeClass('active_wide');
	})
	$('.share_wrapp').find('*').live('mousedown', function(e) {
		e.stopPropagation();
	});
	$(document).on('click', '.reviews-collapse-link', function(){
		$('.reviews-reply-form').slideToggle();
	})

	initCountdown();

	/*adaptive menu start*/
	$('.menu.adaptive').on('click', function(){
		$(this).toggleClass('opened');
		if($(this).hasClass('opened')){
			$('.mobile_menu').toggleClass('opened').slideDown();
		}else{
			$('.mobile_menu').toggleClass('opened').slideUp();
		}
	});
	$('.mobile_menu .has-child >a').on('click', function(e){
		var parentLi=$(this).parent();
		e.preventDefault();
		parentLi.toggleClass('opened');
		parentLi.find('.dropdown').slideToggle();
	})

	$('.mobile_menu .search-input-div input').live('keyup', function(e) {
		var inputValue = $(this).val();
		$('.center_block .stitle_form input').val(inputValue);
		if(e.keyCode == 13){
			$('.center_block .stitle_form form').submit();
		}
	});

	$('.center_block .stitle_form input').live('keyup', function(e) {
		var inputValue = $(this).val();
		$('.mobile_menu .search-input-div input').val(inputValue);
		if(e.keyCode == 13){
			$('.center_block .stitle_form form').submit();
		}
	});

	$('.mobile_menu .search-button-div button').live('click', function(e) {
		e.preventDefault();
		var inputValue = $(this).parents().find('input').val();
		$('.center_block .stitle_form input').val(inputValue);
		$('.center_block .stitle_form form').submit();
	});
	/*adaptive menu end*/

	$('.btn.btn-add').on('click', function(){
		$.ajax({
			type:"GET",
			url:arOptimusOptions['SITE_DIR']+"ajax/clearBasket.php",
			success: function(data){
			}
		});
	})

	/*detail order show payments*/
	$('.sale-order-detail-payment-options-methods-info-change-link').on('click', function(){
		$(this).closest('.sale-order-detail-payment-options-methods-info').addClass('opened').siblings().addClass('opened');
	})

	/*expand/hide filter values*/
	$(document).on('click', '.expand_block', function(){
		togglePropBlock($(this));
	})

	/*touch event*/
	document.addEventListener('touchend', function(event) {
		if(!$(event.target).closest('.menu_item_l1').length){
			$('.menu .menu_item_l1 .child').css({'display':'none'});
			$('.menu_item_l1').removeClass('hover');
		}
		if(!$(event.target).closest('.basket_block').length){
			$('.basket_block .link').removeClass('hover');
			$('.basket_block .basket_popup_wrapp').slideUp();
		}
		if(!$(event.target).closest('.catalog_item').length){
			var tabsContentUnhoverHover = $('.tab:visible').attr('data-unhover') * 1;
			$('.tab:visible').stop().animate({'height': tabsContentUnhoverHover}, 100);
			$('.tab:visible').find('.catalog_item').removeClass('hover');
			$('.tab:visible').find('.catalog_item .buttons_block').stop().fadeOut(233);
			if($('.catalog_block').length){
				$('.catalog_block').find('.catalog_item').removeClass('hover');
				//$('.catalog_block').find('.catalog_item').blur();
			}
		}
		//togglePropBlock($(event.target));

	}, false);

	//touchItemBlock('.catalog_item a');

	$(document).on('keyup', '.coupon .input_coupon input', function(){
		if($(this).val().length){
			$(this).removeClass('error');
			$(this).closest('.input_coupon').find('.error').remove();
		}else{
			$(this).addClass('error');
			$("<label class='error'>"+BX.message("INPUT_COUPON")+"</label>").insertBefore($(this));
		}
	})
	// showPhoneMask('input[autocomplete=tel]');
	BX.addCustomEvent(window, "onAjaxSuccess", function(){
		initSelects(document);
		// InitLabelAnimation('#bx-soa-order-form');
		InitOrderCustom();
		// showPhoneMask('input[autocomplete=tel]');
		if($('.catalog_detail').length){
			$('.bx_filter').remove();
			InitFlexSlider();
		}

		if(arOptimusOptions["PAGES"]["ORDER_PAGE"]){
			orderActions();
		}
	});
	BX.addCustomEvent(window, "onFrameDataRequestFail", function(response){
		console.log(response);
	});
});

if(!funcDefined('togglePropBlock')){
	togglePropBlock=function(className){
		var all_props_block = className.closest('.bx_filter_parameters_box_container').find('.hidden_values');
		if(all_props_block.length && (className.hasClass('inner_text') || className.hasClass('expand_block')))
		{
			if(all_props_block.is(':visible'))
			{
				className.text(BX.message('FILTER_EXPAND_VALUES'));
				all_props_block.hide();
			}
			else
			{
				className.text(BX.message('FILTER_HIDE_VALUES'));
				all_props_block.show();
			}
		}
	}
}

if(!funcDefined('showPhoneMask')){
	showPhoneMask=function(className){
		$(className).inputmask('mask', {'mask': arOptimusOptions['THEME']['PHONE_MASK'], 'showMaskOnHover':false });
	}
}

if(!funcDefined('parseUrlQuery')){
	parseUrlQuery=function() {
	    var data = {};
	    if(location.search) {
	        var pair = (location.search.substr(1)).split('&');
	        for(var i = 0; i < pair.length; i ++) {
	            var param = pair[i].split('=');
	            data[param[0]] = param[1];
	        }
	    }
	    return data;
	}
}

if(!funcDefined('getActualBasket')){
	getActualBasket=function(iblockID){
		var data='';
		if(typeof iblockID !=="undefined"){
			data={"iblockID":iblockID}
		}
		$.ajax({
			type:"GET",
			url:arOptimusOptions['SITE_DIR']+"ajax/actualBasket.php",
			data:data,
			success: function(data){
				if(!$('.js_ajax').length)
					$('body').append('<div class="js_ajax"></div>');
				$('.js_ajax').html(data);
			}
		});
	}
}

function touchMenu(selector){
	if($(window).outerWidth()>600){
		$(selector).each(function(){
			var th=$(this);
			th.on('touchend', function(e) {
				if (th.find('.child').length && !th.hasClass('hover')) {
					e.preventDefault();
					e.stopPropagation();
					th.siblings().removeClass('hover');
					th.addClass('hover');
					$('.menu .child').css({'display':'none'});
					th.find('.child').css({'display':'block'});
				}
			})
		})
	}else{
		$(selector).off();
	}
}
function touchItemBlock(selector){
	$(selector).each(function(){
		var th=$(this),
			item=th.closest('.catalog_item');
		th.on('touchend', function(e) {
			if (!item.hasClass('hover')) {
				e.preventDefault();
				e.stopPropagation();
				item.siblings().removeClass('hover');
				item.siblings().blur();
				item.closest('.catalog_block').find('.catalog_item').removeClass('hover');
				item.addClass('hover');
				item.addClass('touch');

				var tabsContentHover = th.closest('.tab').attr('data-hover') * 1,
					tabsContentUnhoverHover = th.closest('.tab').attr('data-unhover') * 1;

				th.closest('.tab').stop().animate({'height': tabsContentUnhoverHover}, 100);
				th.closest('.catalog_item').siblings().find('.buttons_block').stop().fadeOut(233)

				th.closest('.tab').fadeTo(100, 1);
				th.closest('.tab').stop().css({'height': tabsContentHover});
				th.closest('.catalog_item').find('.buttons_block').fadeIn(450, 'easeOutCirc');
			}
		})
	})
}
function touchBasket(selector){
	if(arOptimusOptions['THEME']['SHOW_BASKET_ONADDTOCART'] !== 'N'){
		if($(window).outerWidth()>600){
			$(document).find(selector).on('touchend', function(e) {
				if ($(this).parent().find('.basket_popup_wrapp').length && !$(this).hasClass('hover')) {
					e.preventDefault();
					e.stopPropagation();
					$(this).addClass('hover');
					$(this).parent().find('.basket_popup_wrapp').slideDown();
				}
			})
		}else{
			$(selector).off();
		}
	}
}
function initFull(){
	initSelects(document);
	initHoverBlock(document);
	touchItemBlock('.catalog_item a');
	// InitLabelAnimation('#bx-soa-order-form');
	InitOrderCustom();
	if(!$('html.print').length)
		checkStickyFooter();
	else
		window.print();

	basketActions();
	orderActions();
}
if(!funcDefined('orderActions')){
	orderActions = function(){
		if(arOptimusOptions["PAGES"]["ORDER_PAGE"]){
			if($('.bx-soa-cart-total').length){
				if(!$('.change_basket').length)
					$('.bx-soa-cart-total').prepend('<div class="change_basket">'+BX.message("BASKET_CHANGE_TITLE")+'<a href="'+arOptimusOptions["SITE_DIR"]+'basket/" class="change_link">'+BX.message("BASKET_CHANGE_LINK")+'</a></div>');
				if(typeof (BX.Sale.OrderAjaxComponent) == "object"){
					if(BX.Sale.OrderAjaxComponent.hasOwnProperty("params")){
						$('.bx-soa-cart-total .change_link').attr('href', BX.Sale.OrderAjaxComponent.params.PATH_TO_BASKET);
						if(arOptimusOptions["PRICES"]["MIN_PRICE"]){
							if(arOptimusOptions["PRICES"]["MIN_PRICE"]>Number(BX.Sale.OrderAjaxComponent.result.TOTAL.ORDER_PRICE)){
								$('<div class="fademask_ext"></div>').appendTo($('body'));
								location.href=BX.Sale.OrderAjaxComponent.params.PATH_TO_BASKET;
							}
						}
					}
				}
				$('.bx-ui-sls-quick-locations.quick-locations').on('click', function(){
					$(this).siblings().removeClass('active');
					$(this).addClass('active');
				})
			}
		}
	}
}

if(!funcDefined('basketActions')){
	basketActions = function(){
		if(arOptimusOptions["PAGES"]["BASKET_PAGE"]){
			checkMinPrice();

			$('.bx_sort_container').append('<div class="top_control basket_sort"><span class="delete_all button grey_br transparent remove_all_basket">'+BX.message("BASKET_CLEAR_ALL_BUTTON")+'</span></div>');
			if(arOptimusOptions["THEME"]["SHOW_BASKET_PRINT"]=="Y"){
				$('.bx_sort_container .top_control').prepend('<span class="basket_print button grey_br transparent">'+BX.message("BASKET_PRINT_BUTTON")+'</span>');
			}
			$('.bx_sort_container .top_control .delete_all').data("type",$('.bx_sort_container a.current').index());
			$('.bx_ordercart .bx_ordercart_coupon #coupon').wrap('<div class="input"></div>');

			$('.bx_sort_container > a').on('click', function() {
				$('.bx_sort_container .top_control .delete_all').data("type", $(this).index());
			});

			$('.basket_print').on('click', function() {
				 window.open(location.pathname+"?print=Y",'_blank');
			});

			$('.delete_all').on('click', function() {
				$.post( arOptimusOptions['SITE_DIR']+"ajax/action_basket.php", "TYPE="+$(this).data('type')+"&CLEAR_ALL=Y", $.proxy(function( data ) {
					location.reload();
				}));
			});

			$('.bx_item_list_section .bx_catalog_item').sliceHeight({row:'.bx_item_list_slide', item:'.bx_catalog_item'});

			BX.addCustomEvent('onAjaxSuccess', function() {
				checkMinPrice();

				var errorText = $.trim($('#warning_message').text());
				$('#basket_items_list .error_text').detach();
				if (errorText != '') {
					$('#warning_message').hide().text('');
					$('#basket_items_list').prepend('<div class="error_text">' +errorText+ '</div>');
				}
			});
		}
	}
}

if(!funcDefined('checkMinPrice')){
	checkMinPrice = function(){
		if(arOptimusOptions["PAGES"]["BASKET_PAGE"]){
			var summ_raw=$('#allSum_FORMATED').text().replace(/[^0-9\.]/g,''),
				summ=parseFloat(summ_raw);
			if(!$('.catalog_back').length)
				$('.bx_ordercart_order_pay_center').prepend('<a href="/catalog/" class="catalog_back button transparent big_btn grey_br">'+BX.message("BASKET_CONTINUE_BUTTON")+'</a>');

			if(arOptimusOptions["PRICES"]["MIN_PRICE"]){
				if(arOptimusOptions["PRICES"]["MIN_PRICE"]>summ){
					if(!$('.icon_error_wrapper').length){
						$('.bx_ordercart_order_pay_center').prepend('<div class="icon_error_wrapper"><div class="icon_error_block">'+BX.message("MIN_ORDER_PRICE_TEXT").replace("#PRICE#", jsPriceFormat(arOptimusOptions["PRICES"]["MIN_PRICE"]))+'</div></div>');
					}

					if($('.oneclickbuy.fast_order').length)
						$('.oneclickbuy.fast_order').remove();

					if($('.bx_ordercart_order_pay .checkout').length)
						$('.bx_ordercart_order_pay .checkout').remove();
				}else{
					if($('.icon_error_wrapper').length)
						$('.icon_error_wrapper').remove();

					if($('.bx_ordercart_order_pay .checkout').length)
						$('.bx_ordercart .bx_ordercart_order_pay .checkout').css('opacity','1');
					else
						$('.bx_ordercart_order_pay_center').append('<a href="javascript:void(0)" onclick="checkOut();" class="checkout" style="opacity: 1;">'+BX.message("BASKET_ORDER_BUTTON")+'</a>');
					if(!$('.oneclickbuy.fast_order').length && arOptimusOptions["THEME"]["SHOW_ONECLICKBUY_ON_BASKET_PAGE"] == "Y")
						$('.bx_ordercart_order_pay_center').append('<span class="oneclickbuy button big_btn fast_order" onclick="oneClickBuyBasket()">'+BX.message("BASKET_QUICK_ORDER_BUTTON")+'</span>');


				}
			}else{
				$('.bx_ordercart .bx_ordercart_order_pay .checkout').css('opacity','1');
				if(!$('.oneclickbuy.fast_order').length && arOptimusOptions["THEME"]["SHOW_ONECLICKBUY_ON_BASKET_PAGE"] == "Y")
					$('.bx_ordercart_order_pay_center').append('<span class="oneclickbuy button big_btn fast_order" onclick="oneClickBuyBasket()">'+BX.message("BASKET_QUICK_ORDER_BUTTON")+'</span>');
			}
		}
	}
}

var isFrameDataReceived = false;
if (typeof window.frameCacheVars !== "undefined"){
	BX.addCustomEvent("onFrameDataReceived", function (json){
		initFull();
		isFrameDataReceived = true;
	});
}else{
	$( document ).ready(initFull);
}

if(!funcDefined('setHeightBlockSlider')){
	setHeightBlockSlider = function(){
		var sliderWidth = $(document).find('.specials.tab_slider_wrapp').outerWidth();

		$(document).find('.specials.tab_slider_wrapp .tabs_content > li.cur').css('height', '');
		$(document).find('.specials.tab_slider_wrapp .tabs_content .tab.cur .tabs_slider .buttons_block').hide();
		$(document).find('.specials.tab_slider_wrapp .tabs_content > li.cur').equalize({children: '.item-title'});
		$(document).find('.specials.tab_slider_wrapp .tabs_content > li.cur').equalize({children: '.item_info'});
		$(document).find('.specials.tab_slider_wrapp .tabs_content > li.cur').equalize({children: '.catalog_item'});
		var itemsButtonsHeight = $(document).find('.specials.tab_slider_wrapp .tabs_content .tab.cur .tabs_slider li .buttons_block').height();
		var tabsContentUnhover = $(document).find('.specials.tab_slider_wrapp .tabs_content .tab.cur').height() * 1;
		var tabsContentHover = tabsContentUnhover + itemsButtonsHeight+50;
		$(document).find('.specials.tab_slider_wrapp .tabs_content .tab.cur').attr('data-unhover', tabsContentUnhover);
		$(document).find('.specials.tab_slider_wrapp .tabs_content .tab.cur').attr('data-hover', tabsContentHover);
		$(document).find('.specials.tab_slider_wrapp .tabs_content').height(tabsContentUnhover);
	}
}

if(!funcDefined('checkStickyFooter')){
	checkStickyFooter = function() {
		try{
			ignoreResize.push(true);
			$('#content').css('min-height', '');
			var contentTop = $('#content').offset().top;
			var contentBottom = contentTop + $('#content').outerHeight();
			var footerTop = $('footer').offset().top;
			$('#content').css('min-height', $(window).height() - contentTop - (footerTop - contentBottom) - $('footer').outerHeight() + 'px');
			ignoreResize.pop();
		}
		catch(e){console.error(e);}
	}
}

/* EVENTS */
var timerResize = false, ignoreResize = [];
$(window).resize(function(){
	if(!$('html.print').length)
		checkStickyFooter();

	// here immediate functions
	if(!ignoreResize.length){
		if(timerResize){
			clearTimeout(timerResize);
			timerResize = false;
		}
		timerResize = setTimeout(function(){
			// here delayed functions in event
			BX.onCustomEvent('onWindowResize', false);
		}, 50);
	}
});

var timerScroll = false, ignoreScroll = [], documentScrollTopLast = $(document).scrollTop();
$(window).scroll(function(){
	// here immediate functions
	documentScrollTopLast = $(document).scrollTop();
	if(!ignoreScroll.length){
		if(timerScroll){
			clearTimeout(timerScroll);
			timerScroll = false;
		}
		timerScroll = setTimeout(function(){
			// here delayed functions in event
			BX.onCustomEvent('onWindowScroll', false);
		}, 50);
	}
});

BX.addCustomEvent('onWindowResize', function(eventdata){
	try{
		ignoreResize.push(true);

		// CheckTopMenuFullCatalogSubmenu();

		checkScrollToTop();
		checkPopupWidth();
		checkCaptchaWidth();
		checkFormWidth();
		checkFormControlWidth();
		touchMenu('ul.menu:not(.opened) > li.menu_item_l1');
		touchBasket('.cart:not(.empty_cart) .basket_block .link');
		CheckObjectsSizes();

		CheckFlexSlider();
		InitZoomPict();
		initSly();

		checkVerticalMobileFilter();

		if(window.matchMedia('(max-width: 768px)').matches){
			if($('.group_description_block.top').length){
				var top_pos=$('.adaptive_filter').position().top;
				$('.bx_filter.bx_filter_vertical').css({'top':top_pos+20});
			}

		}

		if(window.matchMedia('(min-width: 767px)').matches){
			$('.wrapper_middle_menu.wrap_menu').removeClass('mobile');
		}
		if(window.matchMedia('(max-width: 767px)').matches){
			$('.wrapper_middle_menu.wrap_menu').addClass('mobile');
		}

		if($(window).outerWidth()>600){
			$("#header ul.menu").removeClass("opened").css("display", "");

			if($(".authorization-cols").length){
				$('.authorization-cols').equalize({children: '.col .auth-title', reset: true});
				$('.authorization-cols').equalize({children: '.col .form-block', reset: true});
			}
		} else {
			$('.authorization-cols .auth-title').css("height", "");
			$('.authorization-cols .form-block').css("height", "");
		}


		if($("#basket_form").length && $(window).outerWidth()<=600){
			$("#basket_form .tabs_content.basket > li.cur td").each(function() { $(this).css("width","");});
		}

		if($(".front_slider_wrapp").length){
			$(".extended_pagination li i").each(function(){
				$(this).css({"borderBottomWidth": ($(this).parent("li").outerHeight()/2), "borderTopWidth": ($(this).parent("li").outerHeight()/2)});
			});
		}

		setHeightCompany();
		$(".bx_filter_section .bx_filter_select_container").each(function(){
			var prop_id=$(this).closest('.bx_filter_parameters_box').attr('property_id');
			if($('#smartFilterDropDown'+prop_id).length){
				$('#smartFilterDropDown'+prop_id).css("max-width", $(this).width());
			}
		})
	}
	catch(e){}
	finally{
		ignoreResize.pop();
	}
});

BX.addCustomEvent('onWindowScroll', function(eventdata){
	try{
		ignoreScroll.push(true);
	}
	catch(e){}
	finally{
		ignoreScroll.pop();
	}
});110  32030|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_optimus/js/jquery.ikSelect.js|157af383/*! ikSelect 1.0.3
	Copyright (c) 2013 Igor Kozlov
	http://igorkozlov.me */

;(function ($, window, document, undefined) {
	var $window = $(window);
	var defaults = {
		syntax: '<div class="ik_select_link"><div class="ik_select_link_text"></div></div><div class="ik_select_dropdown"><div class="ik_select_list"></div></div>',
		autoWidth: true, // set select width according to the longest option
		ddFullWidth: true, // set dropdown width according to the longest option
		equalWidths: true, // include scrollbar width in fake select calculations
		dynamicWidth: false, // change fake select's width according to it's contents
		extractLink: false,
		customClass: '',
		linkCustomClass: '',
		ddCustomClass: '',
		ddMaxHeight: 200,
		filter: false,
		nothingFoundText: 'Nothing found',
		isDisabled: false,
		onInit: function() {},
		onShow: function () {},
		onHide: function () {},
		onKeyUp: function () {},
		onKeyDown: function () {},
		onHoverMove: function () {}
	};

	var instOpened; // instance of the currently opened select

	// browser detection part was taken from jQuery migrate
	// https://github.com/jquery/jquery-migrate/blob/e6bda6a84c294eb1319fceb48c09f51042c80892/src/core.js
	var uaMatch = function (ua) {
		ua = ua.toLowerCase();

		var match = /(chrome)[ \/]([\w.]+)/.exec(ua) ||
			/(webkit)[ \/]([\w.]+)/.exec(ua) ||
			/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua) ||
			/(msie) ([\w.]+)/.exec(ua) ||
			ua.indexOf('compatible') < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua) ||
			[];

		return {
			browser: match[1] || '',
			version: match[2] || '0'
		};
	};

	if (! $.browser) {
		var matched = uaMatch(navigator.userAgent);
		var browser = {};

		if (matched.browser) {
			browser[matched.browser] = true;
			browser.version = matched.version;
		}

		if (browser.chrome) {
			browser.webkit = true;
		} else if (browser.webkit) {
			browser.safari = true;
		}

		$.browser = browser;
	}

	$.browser.mobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile/i.test(navigator.userAgent);
	$.browser.operamini = Object.prototype.toString.call(window.operamini) === "[object OperaMini]";

	function IkSelect(element, options) {
		var dataOptions = {}; // parsed data- attributes

		this.el = element;
		this.$el = $(element); // original select

		for (var key in defaults) {
			dataOptions[key] = this.$el.data(key.toLowerCase());
		}

		this.options = $.extend({}, defaults, options, dataOptions);

		if ($.browser.mobile) {
			this.options.filter = false;
		}

		this.init();
	}

	$.extend(IkSelect.prototype, {
		init: function () {
			this.$wrapper = $('<div class="ik_select">' + this.options.syntax + '</div>'); // wrapper for the fake select and the fake dropdown
			this.$link = $('.ik_select_link', this.$wrapper); // fake select
			this.$linkText = $('.ik_select_link_text', this.$wrapper); // fake select's text
			this.$dropdown = $('.ik_select_dropdown', this.$wrapper); // fake dropdown
			this.$list = $('.ik_select_list', this.$wrapper); // options list inside the fake dropdown
			this.$listInner = $('<div class="ik_select_list_inner"/>'); // support dropdown for scrolling
			this.$active = $([]); // active fake option
			this.$hover = $([]); // hovered fake option
			this.hoverIndex = 0; // hovered fake option's index

			this.$optionSet = $([]);
			this.$optgroupSet = $([]);

			this.$list.append(this.$listInner);

			if (this.options.filter) {
				this.$filter = $([]); // filter text input
				this.$optionSetOriginal = $([]); // contains original list items when filtering
				this.$nothingFoundText = $('<div class="ik_select_nothing_found"/>').html(this.options.nothingFoundText);
				this.$filterWrap = $('.ik_select_filter_wrap', this.$wrapper);

				if (! this.$filterWrap.length) {
					this.$filterWrap = $('<div class="ik_select_filter_wrap"/>');
				}

				this.$filter = $('<input type="text" class="ik_select_filter">');

				this.$filterWrap.append(this.$filter);
				this.$list.prepend(this.$filterWrap);

				this.$filter.on({
					// keyboard controls should work even if the filter is in focus
					'keydown.ikSelect keyup.ikSelect': $.proxy(this, '_elKeyUpDown'),
					// actual filtering happens on keyup
					'keyup.ikSelect': $.proxy(this, '_filterKeyup')
				});
			}

			this.$wrapper.addClass(this.options.customClass);
			this.$link.addClass(this.options.linkCustomClass || (this.options.customClass && this.options.customClass + '-link'));
			this.$dropdown.addClass(this.options.ddCustomClass || (this.options.customClass && this.options.customClass + '-dd'));

			// creating fake option list
			this.reset();

			// disable select if an option or attribute are truthy
			this.toggle(!(this.options.isDisabled || this.$el.prop('disabled') || this.$el.hasClass('hidden')));

			// click event for fake select
			this.$link.on('click.ikSelect', $.proxy(this, '_linkClick'));

			this.$el.on({
				// when focus is on the original select add a focus class to the fake one
				'focus.ikSelect': $.proxy(this, '_elFocus'),
				// when focus lost remove the focus class from the fake one
				'blur.ikSelect': $.proxy(this, '_elBlur'),
				// make sure that the fake select shows correct data
				'change.ikSelect': $.proxy(this, '_syncOriginalOption'),
				// keyboard controls for the fake select
				'keydown.ikSelect keyup.ikSelect': $.proxy(this, '_elKeyUpDown')
			});

			this.$list.on({
				'click.ikSelect': $.proxy(this, '_optionClick'),
				'mouseover.ikSelect': $.proxy(this, '_optionMouseover')
			}, '.ik_select_option');

			// stop propagation of click events on the wrapper
			this.$wrapper.on('click', function () {
				return false;
			});

			// appending the fake select right after the original one
			this.$el.after(this.$wrapper);

			// set correct dimensions
			this.redraw();

			// move original select inside the wrapper
			this.$el.appendTo(this.$wrapper);

			this.options.onInit(this);
			this.$el.trigger('ikinit', this);
		},

		// click listener for fake select
		_linkClick: function () {
			if (this.isDisabled) {
				return;
			}
			if (this === instOpened) {
				this.hideDropdown();
			} else {
				this.showDropdown();
			}

		},

		// click listener for the fake options
		_optionClick: function () {
			this._makeOptionActive(this.searchIndexes ? this.$optionSetOriginal.index(this.$hover) : this.hoverIndex, true);
			this.hideDropdown();
			this.$el.change().focus();
		},

		// hover listener for the fake options
		_optionMouseover: function (event) {
			var $option = $(event.currentTarget);
			if ($option.hasClass('ik_select_option_disabled')) {
				return;
			}
			this.$hover.removeClass('ik_select_hover');
			this.$hover = $option.addClass('ik_select_hover');
			this.hoverIndex = this.$optionSet.index(this.$hover);
		},

		// makes fake option active without syncing the original select
		_makeOptionActive: function (index, shouldSync) {
			var $option = $(this.el.options[index]),
				text='';
			if($option.data('img_src')){
				text+='<span class="icon_color" style="background: url('+$option.data('img_src')+')"></span>';
				this.$link.addClass('img');
			}
			if($option.attr('title')){
				this.$link.attr('title', $option.attr('title'));
			}
			text+=$option.text();
			this.$linkText.html(text);

			this.$link.toggleClass('ik_select_link_novalue', !$option.attr('value'));

			this.$hover.removeClass('ik_select_hover');
			this.$active.removeClass('ik_select_active');
			this.$hover = this.$active = this.$optionSet.eq(index).addClass('ik_select_hover ik_select_active');
			this.hoverIndex = index;

			if (shouldSync) {
				this._syncFakeOption();
			}
		},

		// keyboard controls for the fake select
		_elKeyUpDown: function (event) {
			var $handle = $(event.currentTarget);
			var type = event.type;
			var keycode = event.which;
			var newTop;

			switch (keycode) {
			case 38: // up
				if (type === 'keydown') {
					event.preventDefault();
					this._moveToPrevActive();
				}
				break;
			case 40: // down
				if (type === 'keydown') {
					event.preventDefault();
					this._moveToNextActive();
				}
				break;
			case 33: // page up
				if (type === 'keydown') {
					event.preventDefault();
					newTop = this.$hover.position().top - this.$listInner.height();
					this._moveToPrevActive(function (optionTop) {
						return optionTop <= newTop;
					});
				}
				break;
			case 34: // page down
				if (type === 'keydown') {
					event.preventDefault();
					newTop = this.$hover.position().top + this.$listInner.height();
					this._moveToNextActive(function (optionTop) {
						return optionTop >= newTop;
					});
				}
				break;
			case 36: // home
				if (type === 'keydown' && $handle.is(this.$el)) {
					event.preventDefault();
					this._moveToFirstActive();
				}
				break;
			case 35: // end
				if (type === 'keydown' && $handle.is(this.$el)) {
					event.preventDefault();
					this._moveToLastActive();
				}
				break;
			case 32: // space
				if (type === 'keydown' && $handle.is(this.$el)) {
					event.preventDefault();
					if (! this.$dropdown.is(':visible')) {
						this._linkClick();
					} else {
						this.$hover.click();
					}
				}
				break;
			case 13: // enter
				if (type === 'keydown' && this.$dropdown.is(':visible')) {
					event.preventDefault();
					this.$hover.click();
				}
				break;
			case 27: // esc
				if (type === 'keydown' && this.$dropdown.is(':visible')) {
					event.preventDefault();
					this.hideDropdown();
				}
				break;
			case 9: // tab
				if (type === 'keydown') {
					if ($.browser.webkit && this.$dropdown.is(':visible')) {
						event.preventDefault();
					} else {
						this.hideDropdown();
					}
				}
				break;
			default:
				if (type === 'keyup' && $handle.is(this.$el)) {
					this._syncOriginalOption();
				}
				break;
			}

			// mozilla ignores preventDefault for select navigation
			// this ensures that original select is in sync
			if (type === 'keyup' && $.browser.mozilla) {
				this._syncFakeOption();
			}

			if (type === 'keydown') {
				this.options.onKeyDown(this, keycode);
				this.$el.trigger('ikkeydown', [this, keycode]);
			}
			if (type === 'keyup') {
				this.options.onKeyUp(this, keycode);
				this.$el.trigger('ikkeyup', [this, keycode]);
			}
		},

		// controls hover/active states for options and makes selected with keyboard options fully visible
		_moveTo: function (index) {
			var optionTopLine, optionBottomLine;
			var $optgroup;

			if (!this.$dropdown.is(':visible') && $.browser.webkit) {
				this.showDropdown();
				return this;
			}

			if (!this.$dropdown.is(':visible') || $.browser.mozilla) {
				this._makeOptionActive(index, true);
			} else {
				this.$hover.removeClass('ik_select_hover');
				this.$hover = this.$optionSet.eq(index).addClass('ik_select_hover');
				this.hoverIndex = index;
			}

			// make option fully visible
			optionTopLine = this.$hover.position().top;
			optionBottomLine = optionTopLine + this.$active.outerHeight();
			// make optgroup label visible if first option witin this optgroup is hovered
			if (!this.$hover.index()) {
				$optgroup = this.$hover.closest('.ik_select_optgroup');
				if ($optgroup.length) {
					optionTopLine = $optgroup.position().top;
				}
			}
			if (optionBottomLine > this.$listInner.height()) {
				this.$listInner.scrollTop(this.$listInner.scrollTop() + optionBottomLine - this.$listInner.height());
			} else if (optionTopLine < 0) {
				this.$listInner.scrollTop(this.$listInner.scrollTop() + optionTopLine);
			}

			this.options.onHoverMove(this);
			this.$el.trigger('ikhovermove', this);
		},

		_moveToFirstActive: function () {
			for (var i = 0; i < this.$optionSet.length; i++) {
				if (!this.$optionSet.eq(i).hasClass('ik_select_option_disabled')) {
					this._moveTo(i);
					break;
				}
			}
		},

		_moveToLastActive: function () {
			for (var i = this.$optionSet.length - 1; i >= 0; i++) {
				if (!this.$optionSet.eq(i).hasClass('ik_select_option_disabled')) {
					this._moveTo(i);
					break;
				}
			}
		},

		_moveToPrevActive: function (condition) {
			var $option;
			for (var i = this.hoverIndex - 1; i >= 0; i--) {
				$option = this.$optionSet.eq(i);
				if (!$option.hasClass('ik_select_option_disabled') && (typeof condition === 'undefined' || condition($option.position().top))) {
					this._moveTo(i);
					break;
				}
			}
		},

		_moveToNextActive: function (condition) {
			var $option;
			for (var i = this.hoverIndex + 1; i < this.$optionSet.length; i++) {
				$option = this.$optionSet.eq(i);
				if (!$option.hasClass('ik_select_option_disabled') && (typeof condition === 'undefined' || condition($option.position().top))) {
					this._moveTo(i);
					break;
				}
			}
		},

		// when focus is on the original select add a focus class to the fake one
		_elFocus:  function () {
			var wrapperOffsetTop, wrapperHeight, windowScrollTop, windowHeight;
			if (this.isDisabled) {
				return this;
			}
			this.$link.addClass('ik_select_link_focus');

			// scroll the window so that focused select is visible
			wrapperOffsetTop = this.$wrapper.offset().top;
			wrapperHeight = this.$wrapper.height();
			windowScrollTop = $window.scrollTop();
			windowHeight = $window.height();
			if ((wrapperOffsetTop + wrapperHeight > windowScrollTop + windowHeight) ||
				(wrapperOffsetTop < windowScrollTop)) {
				$window.scrollTop(wrapperOffsetTop - windowHeight / 2);
			}
		},

		// when focus lost remove the focus class from the fake one
		_elBlur: function () {
			this.$link.removeClass('ik_select_link_focus');
		},

		// filtering on key up
		_filterKeyup: function () {
			var filterVal = $.trim(this.$filter.val());
			var filterValOld;
			this.$listInner.show();

			if (typeof this.searchIndexes === 'undefined') {
				this.$optionSetOriginal = this.$optionSet;
				this.searchIndexes = $.makeArray(this.$optionSet.map(function (optionIndex, option) {
					return $(option).text().toLowerCase();
				}));
			}

			if (filterVal !== filterValOld) {
				if (filterVal === '') {
					this.$optionSet = this.$optionSetOriginal.show();
					this.$optgroupSet.show();
					this.$nothingFoundText.remove();
				} else {
					this.$optionSet = $([]);
					this.$optgroupSet.show();
					this.$optionSetOriginal.each($.proxy(function (optionIndex, option) {
						var $option = $(option);
						if (this.searchIndexes[optionIndex].indexOf(filterVal.toLowerCase()) >= 0) {
							this.$optionSet = this.$optionSet.add($option);
							$option.show();
						} else {
							$option.hide();
						}
					}, this));

					if (this.$optionSet.length) {
						this.$nothingFoundText.remove();
						this.$optgroupSet.each(function (optgroupIndex, optgroup) {
							var $optgroup = $(optgroup);
							if (!$('.ik_select_option:visible', $optgroup).length) {
								$optgroup.hide();
							}
						});

						if (!this.$hover.is(':visible')) {
							this._moveToFirstActive();
						}
					} else {
						this.$listInner.hide();
						this.$list.append(this.$nothingFoundText);
					}
				}

				filterValOld = filterVal;
			}
		},

		// sync selected option in the fake select with the original one
		_syncFakeOption: function () {
			this.el.selectedIndex = this.hoverIndex;
		},

		// sync selected option in the original select with the fake one
		_syncOriginalOption: function () {
			this._makeOptionActive(this.el.selectedIndex);
		},

		// sets fixed height to dropdown if it's bigger than ddMaxHeight
		_fixHeight: function () {
			this.$dropdown.show();
			this.$listInner.css('height', 'auto');
			if (this.$listInner.height() > this.options.ddMaxHeight) {
				this.$listInner.css({
					overflow: 'auto',
					height: this.options.ddMaxHeight,
					position: 'relative'
				});
			}
			this.$dropdown.hide();
		},

		// calculates the needed data for showing the dropdown
		redraw: function () {
			var maxWidthOuter, scrollbarWidth, wrapperParentWidth;

			if (this.options.filter) {
				this.$filter.hide();
			}

			this.$wrapper.css({
				position: 'relative'
			});
			this.$dropdown.css({
				position: 'absolute',
				zIndex: 9998,
				width: '100%'
			});
			this.$list.css({
				position: 'relative'
			});

			this._fixHeight();

			// width calculations for the fake select when "autoWidth" is "true"
			if (this.options.dynamicWidth || this.options.autoWidth || this.options.ddFullWidth) {
				this.$wrapper.width('');

				this.$dropdown.show().width(9999);
				this.$listInner.css('float', 'left');
				this.$list.css('float', 'left');
				maxWidthOuter = this.$list.outerWidth(true);
				scrollbarWidth = this.$listInner.width() - this.$listInnerUl.width();
				this.$list.css('float', '');
				this.$listInner.css('float', '');
				this.$dropdown.css('width', '100%');

				if (this.options.ddFullWidth) {
					this.$dropdown.width(maxWidthOuter + scrollbarWidth);
				}

				if (this.options.dynamicWidth) {
					this.$wrapper.css({
						display: 'inline-block',
						width: 'auto',
						verticalAlign: 'top'
					});
				} else if (this.options.autoWidth) {
					this.$wrapper.width(maxWidthOuter + (this.options.equalWidths ? scrollbarWidth : 0)).addClass('ik_select_autowidth');
				}

				wrapperParentWidth = this.$wrapper.parent().width();
				if (this.$wrapper.width() > wrapperParentWidth) {
					this.$wrapper.width(wrapperParentWidth);
				}
			}

			if (this.options.filter) {
				this.$filter.show().outerWidth(this.$filterWrap.width());
			}

			this.$dropdown.hide();

			// hide the original select
			this.$el.css({
				position: 'absolute',
				margin: 0,
				padding: 0,
				top: 0,
				left: -9999
			});

			// show the original select in mobile browsers
			if ($.browser.mobile) {
				this.$el.css({
					opacity: 0,
					left: 0,
					height: this.$wrapper.height(),
					width: this.$wrapper.width()
				});
			}
		},

		// creates or recreates dropdown and sets selected options's text into fake select
		reset: function () {
			var html = '';

			// init fake select's text
			this.$linkText.html(this.$el.val());

			this.$listInner.empty();

			// creating an ul>li list identical to the original dropdown
			html = '<ul>';
			this.$el.children().each($.proxy(function (childIndex, child) {
				var $child = $(child);
				var tagName = child.tagName.toLowerCase();
				var options;
				if (tagName === 'optgroup') {
					options = $child.children().map($.proxy(function (optionIndex, option) {
						return this._generateOptionObject($(option));
					}, this));
					options = $.makeArray(options);
					html += this._renderListOptgroup({
						label: $child.attr('label') || '&nbsp;',
						isDisabled: $child.is(':disabled'),
						options: options
					});
				} else if (tagName === 'option') {
					html += this._renderListOption(this._generateOptionObject($child));
				}
			}, this));
			html += '</ul>';
			this.$listInner.append(html);
			this._syncOriginalOption();

			this.$listInnerUl = $('> ul', this.$listInner);
			this.$optgroupSet = $('.ik_select_optgroup', this.$listInner);
			this.$optionSet = $('.ik_select_option', this.$listInner);
		},

		// hides dropdown
		hideDropdown: function () {
			if (this.options.filter) {
				this.$filter.val('');
				this._filterKeyup();
			}

			this.$dropdown.hide().appendTo(this.$wrapper).css({
				'left': '',
				'top': ''
			});
			if (this.options.extractLink) {
				this.$wrapper.outerWidth(this.$wrapper.data('outerWidth'));
				this.$wrapper.height('');
				this.$link.removeClass('ik_select_link_extracted').css({
					position: '',
					top: '',
					left: '',
					zIndex: ''
				}).prependTo(this.$wrapper);
			}
			instOpened = null;
			this.$el.focus();

			this.options.onHide(this);
			this.$el.trigger('ikhide', this);
		},

		// shows dropdown
		showDropdown: function () {
			var dropdownOffset, dropdownOuterWidth, dropdownOuterHeight;
			var wrapperOffset, wrapperOuterWidth;
			var windowWidth, windowHeight, windowScroll;
			var linkOffset;

			if (instOpened === this || !this.$optionSet.length) {
				return;
			} else if (instOpened) {
				instOpened.hideDropdown();
			}

			this._syncOriginalOption();
			if($('.show_un_props').length)
				this.$dropdown.addClass('show_un_props');
			else if($('.unshow_un_props').length)
				this.$dropdown.addClass('unshow_un_props');
			this.$dropdown.show();

			dropdownOffset = this.$dropdown.offset();
			dropdownOuterWidth = this.$dropdown.outerWidth(true);
			dropdownOuterHeight = this.$dropdown.outerHeight(true);
			wrapperOffset = this.$wrapper.offset();
			windowWidth = $window.width();
			windowHeight = $window.height();
			windowScroll = $window.scrollTop();

			// if the dropdown's right border is beyond window's edge then move the dropdown to the left so that it fits
			if (this.options.ddFullWidth && wrapperOffset.left + dropdownOuterWidth > windowWidth) {
				dropdownOffset.left = windowWidth - dropdownOuterWidth;
			}

			// if the dropdown's bottom border is beyond window's edge then move the dropdown to the top so that it fits
			if (dropdownOffset.top + dropdownOuterHeight > windowScroll + windowHeight) {
				dropdownOffset.top = windowScroll + windowHeight - dropdownOuterHeight;
			}

			this.$dropdown.css({
				left: dropdownOffset.left,
				top: dropdownOffset.top,
				width: this.$dropdown.width()
			}).appendTo('body');

			if (this.options.extractLink) {
				linkOffset = this.$link.offset();
				wrapperOuterWidth = this.$wrapper.outerWidth();
				this.$wrapper.data('outerWidth', wrapperOuterWidth);
				this.$wrapper.outerWidth(wrapperOuterWidth);
				this.$wrapper.outerHeight(this.$wrapper.outerHeight());
				this.$link.outerWidth(this.$link.outerWidth());
				this.$link.addClass('ik_select_link_extracted').css({
					position: 'absolute',
					top: linkOffset.top,
					left: linkOffset.left,
					zIndex: 9999
				}).appendTo('body');
			}

			this.$listInner.scrollTop(this.$active.position().top - this.$list.height() / 2);

			if (this.options.filter) {
				this.$filter.focus();
			} else {
				this.$el.focus();
			}

			instOpened = this;

			this.options.onShow(this);
			this.$el.trigger('ikshow', this);
		},

		_generateOptionObject: function ($option) {
			
			return {
				value: $option.val(),
				label: $option.html() || '&nbsp;',
				isDisabled: $option.is(':disabled'),
				dataParam: $option.data(),
				className: $option.attr('class'),
				title: $option.attr('title')
			};
		},

		// generates option code for the fake dropdown
		_renderListOption: function (option) {
			var html;
			var disabledClass = option.isDisabled ? ' ik_select_option_disabled' : '';
			var imgClass = option.dataParam.img_src ? ' img' : '';
			var missingClass = option.className=='hidden' ? ' missing' : '';
			var title = option.title;
			html = '<li class="ik_select_option' + disabledClass + imgClass + missingClass + '" title="'+title+'" data-value="' + option.value + '">';
			html += '<span class="ik_select_option_label" title="'+title+'">';
			if(option.dataParam.img_src){
				html += '<span class="icon_color" style="background: url('+option.dataParam.img_src+')"></span>';
			}
			html += option.label;
			html += '</span>';
			html += '</li>';
			return html;
		},

		// generates optgroup code for the fake dropdown
		_renderListOptgroup: function (optgroup) {
			var html;
			var disabledClass = optgroup.isDisabled ? ' ik_select_optgroup_disabled' : '';
			html = '<li class="ik_select_optgroup' + disabledClass + '">';
			html += '<div class="ik_select_optgroup_label">' + optgroup.label + '</div>';
			html += '<ul>';
			if ($.isArray(optgroup.options)) {
				$.each(optgroup.options, $.proxy(function (optionIndex, option) {
					html += this._renderListOption({
						value: option.value,
						label: option.label || '&nbsp;',
						isDisabled: option.isDisabled
					});
				}, this));
			}
			html += '</ul>';
			html += '</li>';
			return html;
		},

		// generates option code for the select
		_renderOption: function (option) {
			return '<option value="' + option.value + '">' + option.label + '</option>';
		},

		// generates optgroup code for the select
		_renderOptgroup: function (optgroup) {
			var html;
			html = '<optgroup label="' + optgroup.label + '">';
			if ($.isArray(optgroup.options)) {
				$.each(optgroup.options, $.proxy(function (optionIndex, option) {
					html += this._renderOption(option);
				}, this));
			}
			html += '</option>';
			return html;
		},

		addOptions: function (options, optionIndex, optgroupIndex) {
			var listHtml = '', selectHtml = '';
			var $destinationUl = this.$listInnerUl;
			var $destinationOptgroup = this.$el;
			var $ulOptions, $optgroupOptions;

			options = $.isArray(options) ? options : [options];

			$.each(options, $.proxy(function (index, option) {
				listHtml += this._renderListOption(option);
				selectHtml += this._renderOption(option);
			}, this));

			if ($.isNumeric(optgroupIndex) && optgroupIndex < this.$optgroupSet.length) {
				$destinationUl = this.$optgroupSet.eq(optgroupIndex);
				$destinationOptgroup = $('optgroup', this.$el).eq(optgroupIndex);
			}
			if ($.isNumeric(optionIndex)) {
				$ulOptions = $('.ik_select_option', $destinationUl);
				if (optionIndex < $ulOptions.length) {
					$ulOptions.eq(optionIndex).before(listHtml);
					$optgroupOptions = $('option', $destinationOptgroup);
					$optgroupOptions.eq(optionIndex).before(selectHtml);
				}
			}
			if (!$optgroupOptions) {
				$destinationUl.append(listHtml);
				$destinationOptgroup.append(selectHtml);
			}

			this.$optionSet = $('.ik_select_option', this.$listInner);
			this._fixHeight();
		},

		addOptgroups: function (optgroups, optgroupIndex) {
			var listHtml = '', selectHtml = '';
			if (!optgroups) {
				return;
			}
			optgroups = $.isArray(optgroups) ? optgroups : [optgroups];

			$.each(optgroups, $.proxy(function (optgroupIndex, optgroup) {
				listHtml += this._renderListOptgroup(optgroup);
				selectHtml += this._renderOptgroup(optgroup);
			}, this));

			if ($.isNumeric(optgroupIndex) && optgroupIndex < this.$optgroupSet.length) {
				this.$optgroupSet.eq(optgroupIndex).before(listHtml);
				$('optgroup', this.$el).eq(optgroupIndex).before(selectHtml);
			} else {
				this.$listInnerUl.append(listHtml);
				this.$el.append(selectHtml);
			}

			this.$optgroupSet = $('.ik_select_optgroup', this.$listInner);
			this.$optionSet = $('.ik_select_option', this.$listInner);
			this._fixHeight();
		},

		removeOptions: function (optionIndexes, optgroupIndex) {
			var $removeList = $([]);
			var $listContext;
			var $selectContext;

			if ($.isNumeric(optgroupIndex)) {
				if (optgroupIndex < 0) {
					$listContext = $('> .ik_select_option', this.$listInnerUl);
					$selectContext = $('> option', this.$el);
				} else if (optgroupIndex < this.$optgroupSet.length) {
					$listContext = $('.ik_select_option', this.$optgroupSet.eq(optgroupIndex));
					$selectContext = $('optgroup', this.$el).eq(optgroupIndex).find('option');
				}
			}
			if (!$listContext) {
				$listContext = this.$optionSet;
				$selectContext = $(this.el.options);
			}

			if (!$.isArray(optionIndexes)) {
				optionIndexes = [optionIndexes];
			}

			$.each(optionIndexes, $.proxy(function (index, optionIndex) {
				if (optionIndex < $listContext.length) {
					$removeList = $removeList.add($listContext.eq(optionIndex)).add($selectContext.eq(optionIndex));
				}
			}, this));

			$removeList.remove();
			this.$optionSet = $('.ik_select_option', this.$listInner);
			this._syncOriginalOption();
			this._fixHeight();
		},

		removeOptgroups: function (optgroupIndexes) {
			var $removeList = $([]);
			var $selectOptgroupSet = $('optgroup', this.el);

			if (!$.isArray(optgroupIndexes)) {
				optgroupIndexes = [optgroupIndexes];
			}

			$.each(optgroupIndexes, $.proxy(function (index, optgroupIndex) {
				if (optgroupIndex < this.$optgroupSet.length) {
					$removeList = $removeList.add(this.$optgroupSet.eq(optgroupIndex)).add($selectOptgroupSet.eq(optgroupIndex));
				}
			}, this));

			$removeList.remove();
			this.$optionSet = $('.ik_select_option', this.$listInner);
			this.$optgroupSet = $('.ik_select_optgroup', this.$listInner);
			this._syncOriginalOption();
			this._fixHeight();
		},

		// disable select
		disable: function () {
			this.toggle(false);
		},

		// enable select
		enable: function () {
			this.toggle(true);
		},

		// toggle select
		toggle: function (bool) {
			this.isDisabled = typeof bool !== 'undefined' ? !bool : !this.isDisabled;
			this.$el.prop('disabled', this.isDisabled);
			this.$link.toggleClass('ik_select_link_disabled', this.isDisabled);
		},

		// make option selected by value
		select: function (value, isIndex) {
			if (!isIndex) {
				this.$el.val(value);
			} else {
				this.el.selectedIndex = value;
			}
			this._syncOriginalOption();
		},

		disableOptgroups: function (optgroupIndexes) {
			this.toggleOptgroups(optgroupIndexes, false);
		},

		enableOptgroups: function (optgroupIndexes) {
			this.toggleOptgroups(optgroupIndexes, true);
		},

		toggleOptgroups: function (optgroupIndexes, bool) {
			if (!$.isArray(optgroupIndexes)) {
				optgroupIndexes = [optgroupIndexes];
			}

			$.each(optgroupIndexes, $.proxy(function (index, optgroupIndex) {
				var isDisabled;
				var $optionSet, indexes = [], indexFirst;
				var $optgroup = $('optgroup', this.$el).eq(optgroupIndex);
				isDisabled = typeof bool !== 'undefined' ? bool : $optgroup.prop('disabled');
				$optgroup.prop('disabled', !isDisabled);
				this.$optgroupSet.eq(optgroupIndex).toggleClass('ik_select_optgroup_disabled', !isDisabled);

				$optionSet = $('option', $optgroup);
				indexFirst = $(this.el.options).index($optionSet.eq(0));
				for (var i = indexFirst; i < indexFirst + $optionSet.length; i++) {
					indexes.push(i);
				}
				this.toggleOptions(indexes, true, isDisabled);
			}, this));

			this._syncOriginalOption();
		},

		disableOptions: function (lookupValues, isIndex) {
			this.toggleOptions(lookupValues, isIndex, false);
		},

		enableOptions: function (lookupValues, isIndex) {
			this.toggleOptions(lookupValues, isIndex, true);
		},

		toggleOptions: function (lookupValues, isIndex, bool) {
			var $selectOptionSet = $('option', this.el);
			if (!$.isArray(lookupValues)) {
				lookupValues = [lookupValues];
			}

			var toggleOption = $.proxy(function ($option, optionIndex) {
				var isDisabled = typeof bool !== 'undefined' ? bool : $option.prop('disabled');
				$option.prop('disabled', !isDisabled);
				this.$optionSet.eq(optionIndex).toggleClass('ik_select_option_disabled', !isDisabled);
			}, this);

			$.each(lookupValues, function (index, lookupValue) {
				if (!isIndex) {
					$selectOptionSet.each(function (optionIndex, option) {
						var $option = $(option);
						if ($option.val() === lookupValue) {
							toggleOption($option, optionIndex);
							return this;
						}
					});
				} else {
					toggleOption($selectOptionSet.eq(lookupValue), lookupValue);
				}
			});

			this._syncOriginalOption();
		},

		// detach plugin from the orignal select
		detach: function () {
			this.$el.off('.ikSelect').css({
				width: '',
				height: '',
				left: '',
				top: '',
				position: '',
				margin: '',
				padding: ''
			});

			this.$wrapper.before(this.$el);
			this.$wrapper.remove();
			this.$el.removeData('plugin_ikSelect');
		}
	});

	$.fn.ikSelect = function (options) {
		var args;
		//do nothing if opera mini
		if ($.browser.operamini) {
			return this;
		}

		args = Array.prototype.slice.call(arguments, 1);

		return this.each(function () {
			var plugin;
			if (!$.data(this, 'plugin_ikSelect')) {
				$.data(this, 'plugin_ikSelect', new IkSelect(this, options));
			} else if (typeof options === 'string') {
				plugin = $.data(this, 'plugin_ikSelect');
				if (typeof plugin[options] === 'function') {
					plugin[options].apply(plugin, args);
				}
			}
		});
	};

	$.ikSelect = {
		extendDefaults: function (options) {
			$.extend(defaults, options);
		}
	};

	$(document).bind('click.ikSelect', function () {
		if (instOpened) {
			instOpened.hideDropdown();
		}
	});
})(jQuery, window, document);
168  3004|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.personal.order.detail.mail/aspro_full_info/result_modifier.php|68a63039<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();

$cp = $this->__component;
if (is_object($cp))
{
	CModule::IncludeModule('iblock');

	if(empty($arResult['ERRORS']['FATAL']))
	{

		$hasDiscount = false;
		$hasProps = false;
		$productSum = 0;
		$basketRefs = array();

		$noPict = array(
			'SRC' => $this->GetFolder().'/images/no_photo.png'
		);

		if(is_readable($nPictFile = $_SERVER['DOCUMENT_ROOT'].$noPict['SRC']))
		{
			$noPictSize = getimagesize($nPictFile);
			$noPict['WIDTH'] = $noPictSize[0];
			$noPict['HEIGHT'] = $noPictSize[1];
		}

		foreach($arResult["BASKET"] as $k => &$prod)
		{
			if(floatval($prod['DISCOUNT_PRICE']))
				$hasDiscount = true;

			// move iblock props (if any) to basket props to have some kind of consistency
			if(isset($prod['IBLOCK_ID']))
			{
				$iblock = $prod['IBLOCK_ID'];
				if(isset($prod['PARENT']))
					$parentIblock = $prod['PARENT']['IBLOCK_ID'];

				foreach($arParams['CUSTOM_SELECT_PROPS'] as $prop)
				{
					$key = $prop.'_VALUE';
					if(isset($prod[$key]))
					{
						// in the different iblocks we can have different properties under the same code
						if(isset($arResult['PROPERTY_DESCRIPTION'][$iblock][$prop]))
							$realProp = $arResult['PROPERTY_DESCRIPTION'][$iblock][$prop];
						elseif(isset($arResult['PROPERTY_DESCRIPTION'][$parentIblock][$prop]))
							$realProp = $arResult['PROPERTY_DESCRIPTION'][$parentIblock][$prop];
						
						if(!empty($realProp))
							$prod['PROPS'][] = array(
								'NAME' => $realProp['NAME'], 
								'VALUE' => htmlspecialcharsEx($prod[$key])
							);
					}
				}
			}

			// if we have props, show "properties" column
			if(!empty($prod['PROPS']))
				$hasProps = true;

			$productSum += $prod['PRICE'] * $prod['QUANTITY'];

			$basketRefs[$prod['PRODUCT_ID']][] =& $arResult["BASKET"][$k];

			if(!isset($prod['PICTURE']))
				$prod['PICTURE'] = $noPict;
		}

		$arResult['HAS_DISCOUNT'] = $hasDiscount;
		$arResult['HAS_PROPS'] = $hasProps;

		$arResult['PRODUCT_SUM_FORMATTED'] = SaleFormatCurrency($productSum, $arResult['CURRENCY']);

		if($img = intval($arResult["DELIVERY"]["STORE_LIST"][$arResult['STORE_ID']]['IMAGE_ID']))
		{

			$pict = CFile::ResizeImageGet($img, array(
				'width' => 150,
				'height' => 90
			), BX_RESIZE_IMAGE_PROPORTIONAL_ALT, true);

			if(strlen($pict['src']))
				$pict = array_change_key_case($pict, CASE_UPPER);

			$arResult["DELIVERY"]["STORE_LIST"][$arResult['STORE_ID']]['IMAGE'] = $pict;
		}
		if($arResult['PROPERTY_DESCRIPTION'])
		{
			\Bitrix\Main\Loader::includeModule('iblock');
			foreach($arResult['PROPERTY_DESCRIPTION'] as $key => $arItems)
			{
				foreach($arItems as $key2 => $arProp)
				{
					$arPropNew = CIBlockProperty::GetList(Array("sort"=>"asc", "name"=>"asc"), Array("ACTIVE"=>"Y", "CODE"=> str_replace("PROPERTY_", "", $key2), "IBLOCK_ID" => 13))->Fetch();
					if($arPropNew["NAME"])
						$arResult['PROPERTY_DESCRIPTION'][$key][$key2]["NAME"] = $arPropNew["NAME"];
				}
			}
		}
	}
}
?>162  16789|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.personal.order.detail.mail/aspro_full_info/template.php|b35e04b8<?if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();?>
<?use \Bitrix\Main\Localization\Loc;?>
<?if($arParams["SHOW_ORDER_BASE"]=='Y' && (strlen($arResult["ERROR_MESSAGE"]) || $arResult["ACCOUNT_NUMBER"])):?>
	<div class="wrapper_block" style="color:#888888;font-size:12px;padding:0px;margin-top:10px;margin-bottom:10px;">
		<?if(strlen($arResult["ERROR_MESSAGE"])):?>
			<div style="font-size:14px;color:#c00;"><?=ShowError($arResult["ERROR_MESSAGE"]);?></div>
		<?else:?>	
			<?$allCurrency = CSaleLang::GetLangCurrency($arParams["SITE_ID"]);?>
			<h3 style="font-weight:400;color: #1d2029;"><?=Loc::getMessage("SPOD_ORDER_TITLE", array("#ORDER_NUMBER#" => $arResult["ACCOUNT_NUMBER"], "#ORDER_DATE#" => $arResult["DATE_INSERT_FORMATED"]));?></h3>
			<div style="border:1px solid #dedede;margin-top:21px;">
				<?if($arParams["SHOW_ORDER_BASE"]=='Y'):?>
					<div style="background:#f7f7f7;border-bottom:1px solid #dedede;padding:22px 21px;font-size:0px;">
						<div style="display:inline-block;vertical-align:top;font-size:14px;width:33.33%;">
							<div><?=Loc::getMessage('SPOD_ORDER_STATUS');?></div>
							<div style="font-size:18px;color:#1d2029;font-weight:600;padding-top:5px;"><?=Loc::getMessage('SPOD_ORDER_DATE_FROM', array("#ORDER_DATE#" => $arResult["DATE_INSERT_FORMATED"]));?></div>
						</div>
						<div style="display:inline-block;vertical-align:top;font-size:14px;width:33.33%;">
							<div><?=Loc::getMessage('SPOD_ORDER_SUMM');?></div>
							<div style="font-size:18px;color:#1d2029;font-weight:600;padding-top:5px;"><?=CAllCurrencyLang::CurrencyFormat($arResult["PRICE"], $allCurrency);?></div>
						</div>
						<?if($arResult["CANCELED"] == "Y" || $arResult["CAN_CANCEL"] == "Y"):?>	
							<div style="display:inline-block;vertical-align:top;font-size:14px;width:33.33%;">
								<?if($arResult["CANCELED"] == "Y"):?>
									<div><?=Loc::getMessage('SPOD_ORDER_CANCELED');?></div>
									<div style="font-size:18px;color:#1d2029;font-weight:600;padding-top:5px;">
										<?=GetMessage('SPOD_YES')?><?if(strlen($arResult["DATE_CANCELED_FORMATED"])):?><?=Loc::getMessage('SPOD_ORDER_DATE_FROM', array("#ORDER_DATE#" => $arResult["DATE_CANCELED_FORMATED"]));?><?endif?>
									</div>
								<?elseif($arResult["CAN_CANCEL"] == "Y"):?>
									<div style="font-size:18px;color:#1d2029;text-align:right;">
										<a href="<?=str_replace("ORDER_ID", $arResult["ACCOUNT_NUMBER"], $arResult["URL_TO_CANCEL"]);?>" style="display:inline-block;font-size:14px;border-radius:3px;padding: 11px 19px;color:<?=$arParams["THEME_COLOR"]?>;background:#f7f7f7;border:1px solid <?=$arParams["THEME_COLOR"]?>;"><?=Loc::getMessage("SPOD_ORDER_CANCEL")?></a>
									</div>
								<?endif;?>
							</div>
						<?endif;?>
					</div>
				<?endif;?>

				<?if($arParams["SHOW_ORDER_USER"]=='Y'):?>
					<?if(intval($arResult["USER_ID"])):?>
						<div style="border-bottom:1px solid #dedede;padding:22px 21px;font-size:0px;">
							<div style="font-size:15px;color:#1d2029;font-weight:600;"><?=Loc::getMessage('SPOD_ACCOUNT_DATA');?></div>
							<?if(strlen($arResult["USER_NAME"])):?>
								<div style="display:inline-block;vertical-align:top;font-size:14px;width:33.33%;padding-top:18px;">
									<div><?=Loc::getMessage('SPOD_ACCOUNT');?></div>
									<div style="font-size:14px;color:#1d2029;padding-top:5px;"><?=$arResult["USER_NAME"]?></div>
								</div>
							<?endif;?>
							<div style="display:inline-block;vertical-align:top;font-size:14px;width:33.33%;padding-top:18px;">
								<div><?=Loc::getMessage('SPOD_LOGIN');?></div>
								<div style="font-size:14px;color:#1d2029;padding-top:5px;"><?=$arResult["USER"]["LOGIN"]?></div>
							</div>
							<div style="display:inline-block;vertical-align:top;font-size:14px;width:33.33%;padding-top:18px;">
								<div><?=Loc::getMessage('SPOD_EMAIL');?></div>
								<div style="font-size:14px;color:#1d2029;padding-top:5px;"><a style="color:<?=$arParams["THEME_COLOR"]?>;" href="mailto:<?=$arResult["USER"]["EMAIL"]?>"><?=$arResult["USER"]["EMAIL"]?></a></div>
							</div>
						</div>
					<?endif?>
				<?endif?>

				<?if($arParams["SHOW_ORDER_PARAMS"]=='Y'):?>
					<div style="border-bottom:1px solid #dedede;padding:22px 21px;font-size:0px;">
						<div style="font-size:15px;color:#1d2029;font-weight:600;"><?=Loc::getMessage('SPOD_ORDER_PROPERTIES');?></div>
						<div style="display:inline-block;vertical-align:top;font-size:14px;width:33.33%;padding-top:18px;">
							<div><?=Loc::getMessage('SPOD_ORDER_PERS_TYPE');?></div>
							<div style="font-size:14px;color:#1d2029;padding-top:5px;"><?=$arResult["PERSON_TYPE"]["NAME"]?></div>
						</div>
					</div>
				<?endif?>

				<?if($arParams["SHOW_ORDER_BUYER"]=='Y'):?>
					<div style="border-bottom:1px solid #dedede;padding:22px 21px;font-size:0px;">
						<div style="font-size:15px;color:#1d2029;font-weight:600;"><?=Loc::getMessage('SPOD_ORDER_UPROPERTIES');?></div>
						<?foreach($arResult["ORDER_PROPS"] as $prop):?>
							<?if($prop["TYPE"] != "CHECKBOX" && !$prop["VALUE"])
								continue;?>
							<div style="display:inline-block;vertical-align:top;font-size:14px;width:33.33%;padding-top:18px;">
								<div><?=$prop['NAME']?>:</div>
								<div style="font-size:14px;color:#1d2029;padding-top:5px;">
									<?if($prop["TYPE"] == "CHECKBOX"):?>
										<?=Loc::getMessage('SPOD_'.($prop["VALUE"] == "Y" ? 'YES' : 'NO'))?>
									<?else:?>
										<?=$prop["VALUE"]?>
									<?endif?>
								</div>
							</div>
						<?endforeach;?>
						<?if(!empty($arResult["USER_DESCRIPTION"])):?>
							<div style="display:inline-block;vertical-align:top;font-size:14px;width:100%;padding-top:18px;">
								<div><?=Loc::getMessage('SPOD_ORDER_USER_COMMENT')?></div>
								<div style="font-size:14px;color:#1d2029;padding-top:5px;"><?=$arResult["USER_DESCRIPTION"]?></div>
							</div>
						<?endif?>
					</div>
				<?endif?>

				<?if($arParams["SHOW_ORDER_PAYMENT"]=='Y'):?>
					<div style="padding:22px 21px;font-size:0px;">
						<div style="font-size:15px;color:#1d2029;font-weight:600;"><?=Loc::getMessage('SPOD_ORDER_PAYMENT');?></div>
						<div style="display:inline-block;vertical-align:top;font-size:14px;width:33.33%;padding-top:18px;">
							<div><?=Loc::getMessage('SPOD_PAY_SYSTEM');?></div>
							<div style="font-size:14px;color:#1d2029;padding-top:5px;">
								<?if(intval($arResult["PAY_SYSTEM_ID"])):?>
									<?=$arResult["PAY_SYSTEM"]["NAME"]?>
								<?else:?>
									<?=Loc::getMessage("SPOD_NONE")?>
								<?endif?>
							</div>
						</div>
						<div style="display:inline-block;vertical-align:top;font-size:14px;width:33.33%;padding-top:18px;">
							<div><?=Loc::getMessage('SPOD_ORDER_PAYED');?></div>
							<div style="font-size:14px;color:#1d2029;padding-top:5px;">
								<?if($arResult["PAYED"] == "Y"):?>
									<?=Loc::getMessage("SPOD_YES")?><?if(strlen($arResult["DATE_PAYED_FORMATED"])):?><?=Loc::getMessage('SPOD_ORDER_DATE_FROM', array("#ORDER_DATE#" => $arResult["DATE_PAYED_FORMATED"]));?><?endif?>
								<?else:?>
									<?=Loc::getMessage("SPOD_NO")?>
								<?endif?>
							</div>
						</div>
						<div style="display:inline-block;vertical-align:top;font-size:14px;width:33.33%;padding-top:18px;">
							<div><?=Loc::getMessage('SPOD_ORDER_DELIVERY');?></div>
							<div style="font-size:14px;color:#1d2029;padding-top:5px;">
								<?if(strpos($arResult["DELIVERY_ID"], ":") !== false || intval($arResult["DELIVERY_ID"])):?>
									<?=$arResult["DELIVERY"]["NAME"]?>
								<?else:?>
									<?=Loc::getMessage("SPOD_NONE")?>
								<?endif?>
							</div>
						</div>
						<?if($arResult["TRACKING_NUMBER"]):?>
							<div style="display:inline-block;vertical-align:top;font-size:14px;width:33.33%;padding-top:18px;">
								<div><?=Loc::getMessage('SPOD_ORDER_TRACKING_NUMBER');?></div>
								<div style="font-size:14px;color:#1d2029;padding-top:5px;"><?=$arResult["TRACKING_NUMBER"]?></div>
							</div>
						<?endif;?>
					</div>
				<?endif?>
			</div>
			<?if($arParams["SHOW_ORDER_BASKET"]=='Y' && $arResult["BASKET"]):?>
				<?$arHeaders = array("NAME", "DISCOUNT", "QUANTITY", "SUMM");
				$allCurrency = CSaleLang::GetLangCurrency($arParams["SITE_ID"]);
				$summ = 0;
				if($arParams['CUSTOM_SELECT_PROPS'])
				{
					foreach($arParams['CUSTOM_SELECT_PROPS'] as $key => $headerId)
					{
						if(in_array($headerId, $arHeaders) || $headerId == 'PICTURE')
							unset($arParams['CUSTOM_SELECT_PROPS'][$key]);
					}
				}?>
				<div style="color:#1d2029;font-size:18px;padding: 22px 0px 18px;font-weight:600;"><?=Loc::getMessage('SPOD_ORDER_BASKET')?></div>
				<div style="border: 1px solid #e7e7e7;border-bottom-width:0px;">
					<table class="sale_basket_small" style="margin: 0;padding: 0;min-width: 100%;border-collapse: collapse;">
						<thead>
							<tr style="background:#f7f7f7;">
								<?foreach($arHeaders as $name):?>
									<td style="white-space:nowrap;border-bottom: 1px solid #e7e7e7;padding: 7px 9px 8px 21px;font-size: 12px;line-height: 20px;background: none;color: #888;<?=($name == "NAME" ? 'width:45%' : '');?>">
										<?=Loc::getMessage("SPOD_HEADER_".$name);?>										
									</td>
								<?endforeach;?>
							</tr>
						</thead>
						<tbody>
							<?foreach($arResult["BASKET"] as $arItem):
								$arItem["PRICE"] = str_replace("-", "", $arItem["PRICE"]);?>
								<tr>
									<?foreach($arHeaders as $name):?>
										<td style="padding:18px 20px;border-bottom: 1px solid #e7e7e7;color:#666;font-size:13px;vertical-align:top;">
											<?if($name == "NAME"):?>
												<?if($arItem["PREVIEW_PICTURE"])
												{
													$img = CFile::ResizeImageGet($arItem["PREVIEW_PICTURE"], array("width" => 75, "height" => 75), BX_RESIZE_PROPORTIONAL_ALT);
													// $src= str_replace(array("//", ":/"), array("/", "://"), $arParams["SITE_ADDRESS"].$img["src"]);
												}?>
												<div class="item" <?=($arItem["PREVIEW_PICTURE"] ? 'style="position:relative; min-height:75px;font-size:0px;"' : '');?>>
													<?if($arItem["PREVIEW_PICTURE"]):?>
															<div class="img" style="display:inline-block;width:75px;text-align:center;height:75px;vertical-align:top;">
																<img src="<?=$img["src"];?>" alt="<?=$arItem[$name];?>" title="<?=$arItem[$name];?>" style="display: inline-block;vertical-align:middle;max-width:100%;max-height:100%;" />
															</div>
															<div style="padding-left:20px;display: inline-block;width: 107px;font-size:13px;vertical-align:top;">
													<?endif;?>
													<a style="color:<?=$arParams["THEME_COLOR"];?>;" href="<?=(str_replace(array("//", ":/"), array("/", "://"), $arParams["SITE_ADDRESS"].$arItem["DETAIL_PAGE_URL"]));?>"><?=$arItem[$name];?></a>

													<?if($arParams['CUSTOM_SELECT_PROPS']):
														$actuallyHasProps = is_array($arItem["PROPS"]) && !empty($arItem["PROPS"]);?>
														<div style="color:#888;font-size:12px;padding-top:10px;padding-bottom:10px;">
															<?foreach ($arParams['CUSTOM_SELECT_PROPS'] as $id => $headerId)
															{
																$headerName = Loc::getMessage('SPOD_'.$headerId);
																
																if(strlen($headerName)<=0)
																{
																	foreach(array_values($arResult['PROPERTY_DESCRIPTION']) as $prop_head_desc):
																		if(array_key_exists($headerId, $prop_head_desc))
																			$headerName = $prop_head_desc[$headerId]['NAME'];
																	endforeach;
																}
																if($headerId == "PROPS" && $arResult['HAS_PROPS'] && $actuallyHasProps):?>
																	<?foreach($arItem["PROPS"] as $prop):?>
																		<div><?=$prop["NAME"]?>:&nbsp;<?=$prop["VALUE"]?></div>
																	<?endforeach?>
																<?else:
																	$value = (strpos($headerId, 'PROPERTY_')===0 ? $headerId."_VALUE" : $headerId);
																	if($arItem[$value]):?>
																		<div><?=$headerName;?>:&nbsp;<?=$arItem[$value]?></div>
																	<?endif;?>
																<?endif;?>
															<?}?>
														</div>
													<?endif;?>

													<?if($arItem["PREVIEW_PICTURE"]):?>
														</div>
													<?endif;?>
												</div>
											<?elseif($name == "DISCOUNT"):?>
												<?=CAllCurrencyLang::CurrencyFormat($arItem["PRICE"], $allCurrency);?>
											<?elseif($name == "SUMM"):?>
												<div style="font-weight:600;font-size:14px;color:#333333;"><?=CAllCurrencyLang::CurrencyFormat($arItem["PRICE"]*$arItem["QUANTITY"], $allCurrency);?></div>
											<?else:?>
												<?=$arItem[$name];?>
											<?endif;?>
										</td>
									<?endforeach;?>
								</tr>
							<?endforeach;?>

						</tbody>
					</table>
					<?if($arParams["SHOW_ORDER_SUM"]=='Y'):?>
						<div style="padding:22px 21px;text-align:right;border-bottom:1px solid #e7e7e7;background:#f7f7f7;color:#333333;">
							<div style="display:inline-block;font-size:0px;">
								<? ///// WEIGHT ?>
								<?if(floatval($arResult["ORDER_WEIGHT"])):?>
									<div>
										<div style="display:inline-block;vertical-align:top;font-size:15px;width:170px;text-align:left;"><?=Loc::getMessage('SPOD_TOTAL_WEIGHT')?></div>
										<div style="display:inline-block;vertical-align:top;font-size:16px;width:120px;text-align:right;font-weight:600;"><?=$arResult['ORDER_WEIGHT_FORMATED']?></div>
									</div>
								<?endif;?>

								<? ///// PRICE SUM ?>
								<div>
									<div style="display:inline-block;vertical-align:top;font-size:15px;width:170px;text-align:left;"><?=Loc::getMessage('SPOD_PRODUCT_SUM')?></div>
									<div style="display:inline-block;vertical-align:top;font-size:16px;width:120px;text-align:right;font-weight:600;"><?=$arResult['PRODUCT_SUM_FORMATTED']?></div>
								</div>

								<? ///// DELIVERY PRICE: print even equals 2 zero ?>
								<?if(strlen($arResult["PRICE_DELIVERY_FORMATED"])):?>
									<div>
										<div style="display:inline-block;vertical-align:top;font-size:15px;width:170px;text-align:left;"><?=Loc::getMessage('SPOD_DELIVERY')?></div>
										<div style="display:inline-block;vertical-align:top;font-size:16px;width:120px;text-align:right;font-weight:600;"><?=CAllCurrencyLang::CurrencyFormat($arResult['PRICE_DELIVERY'], $allCurrency)?></div>
									</div>
								<?endif;?>

								<? ///// TAXES DETAIL ?>
								<?foreach($arResult["TAX_LIST"] as $tax):?>
									<div>
										<div style="display:inline-block;vertical-align:top;font-size:15px;width:170px;text-align:left;"><?=$tax["TAX_NAME"]?></div>
										<div style="display:inline-block;vertical-align:top;font-size:16px;width:120px;text-align:right;font-weight:600;"><?=$tax["VALUE_MONEY_FORMATED"]?></div>
									</div>
								<?endforeach;?>

								<? ///// TAX SUM ?>
								<?if(floatval($arResult["TAX_VALUE"])):?>
									<div>
										<div style="display:inline-block;vertical-align:top;font-size:15px;width:170px;text-align:left;"><?=Loc::getMessage('SPOD_TAX')?></div>
										<div style="display:inline-block;vertical-align:top;font-size:16px;width:120px;text-align:right;font-weight:600;"><?=$arResult['TAX_VALUE_FORMATED']?></div>
									</div>
								<?endif;?>

								<? ///// DISCOUNT ?>
								<?if(floatval($arResult["DISCOUNT_VALUE"])):?>
									<div>
										<div style="display:inline-block;vertical-align:top;font-size:15px;width:170px;text-align:left;"><?=Loc::getMessage('SPOD_DISCOUNT')?></div>
										<div style="display:inline-block;vertical-align:top;font-size:16px;width:120px;text-align:right;font-weight:600;"><?=CAllCurrencyLang::CurrencyFormat($arResult['DISCOUNT_VALUE'], $allCurrency)?></div>
									</div>
								<?endif;?>

								<div>
									<div style="display:inline-block;vertical-align:top;font-size:15px;width:170px;text-align:left;"><?=Loc::getMessage('SPOD_SUMMARY')?></div>
									<div style="display:inline-block;vertical-align:top;font-size:16px;width:120px;text-align:right;font-weight:600;"><?=CAllCurrencyLang::CurrencyFormat($arResult['PRICE'], $allCurrency)?></div>
								</div>
							</div>
						</div>
					<?endif;?>
				</div>
			<?endif;?>
			<div style="text-align:center;">
				<div style="color:#555555;font-size:14px;padding: 27px 0px 17px;"><?= GetMessage("SALE_TOTAL") ?> <?=Loc::getMessage("PERSONAL_PAGE_TEXT");?></div>
				<?if($arParams["SHOW_PERSONAL"] == "Y" && $arParams["PERSONAL_PAGE"]):?>
					<a href="<?=$arParams["PERSONAL_PAGE"]?>" style="color:#fff;background:<?=$arParams["THEME_COLOR"];?>;padding:11px 19px;border-radius:3px;display: inline-block;font-size:14px;"><?=Loc::getMessage("PERSONAL_PAGE") ?></a>
				<?endif;?>
			</div>
		<?endif;?>
	</div>
<?endif;?>
163  692|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.personal.order.detail.mail/aspro_full_info/.parameters.php|f33b3400<?
if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED!==true) die();

$arTemplateParameters['SITE_ID'] = array(
	'NAME' => GetMessage('SITE_ID_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => "s1",
);
$arTemplateParameters['THEME_COLOR'] = array(
	'NAME' => GetMessage('THEME_COLOR_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => "",
);
$arTemplateParameters['PERSONAL_PAGE'] = array(
	'NAME' => GetMessage('PERSONAL_PAGE_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => "/personal/",
);
$arTemplateParameters['SHOW_PERSONAL'] = array(
	'NAME' => GetMessage('SHOW_PERSONAL_TITLE'),
	'TYPE' => 'CHECKBOX',
	'REFRESH' => 'N',
	'DEFAULT' => "Y",
);167  3999|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.personal.order.detail.mail/aspro_full_info/images/bt_cart.png|7602ebaePNG

   IHDR         _   	pHYs       
OiCCPPhotoshop ICC profile  xSgTS=BKKoR RB&*!	J!QEEQ,
!{k>H3Q5B.@
$p d!s# ~<<+" x M0B\t8K @zB @F&S  `cb P- `' { [!  eD h; VE X0 fK9 - 0IWfH    0Q) { `##x  FW<+*  x<$9E[-qWW.(I+6aa@.y24  x6_-"bbp@  t~,/;m%h^uf@ Wp~<<EJB[aW}g_Wl~<$2]GL	bG"IbX*QqD2"B)%d,>5 j>{-]cK'Xt  o(hw?G% fIq  ^D$.T?  D*A,`6B$BB
dr`)B(*`/@4Qhp.U=pa(	Aa!bX#!H$ Q"K5H1RT UH=r9\F; 2G1Q=C7Fdt1r=6h>C03l0.B8,	c"VcwE	6wB aAHXLXNH $4	7	Q'"K&b21XH,#/{C7$C2'ITFnR#,4H#dk9, +3![
b@qS(RjJ4e2AURT5ZBRQ4u9IKhhitNWGwg(gwLT071oUX**|
J&*/TUUT^S}FU3S	UPSSg;goT?~YYLOCQ_ cx,!ku5&|v*=9C3J3WRf?qtN	(~))4L1e\kXHQG6EYAJ'\'GgSS
M=:.kDwn^Loy}/TmGX$<5qo</QC]@Caa<FFi\$mm&&!&KMMRM);L;L5=12`ZxZ,eIZYnZ9YXUZ]F%NNgm}agbg}}=Z~sr:V:?}/gX3)iSGggsK.>.Jtq]z6i4)Y3sCQ?0k~OCOg#/c/Wwa>>r><72Y_7Oo_C#dz %gA[z|!?:eAAA!h!iP~aa~'W?pX15wCsDDDg1O9-J5*>.j<74?.fYXXIlK9.*6nl{/]py.,:@LN8A*%w%
yg"/6C\*NH*Mz5y$3,'LL:v m2=:1qB!Mggfven/kY-
BTZ(*geWf9+7KW-Xj9<qy
+V<*mOW~&zMk^kU
}]OX/Ya>(xodff-[nVE/(C<e;?TTTT6an{4[>UUMfeI?m]Nmq#=TR+Gw-6U#pDy	:v{vg/jBFS[b[O>zG4<YyJTig}~.`{cjotE;;\tWW:_mt<O\kz{f7y9=zo~r'w'O_@AC?[jwGC8>99?rCd&/~m|x31^VwwO| (hSc3-    cHRM  z%        u0  `  :  o_F  IDATx{lSu?]vcllMxJCY0GA!1F0"(xh"A@9	^
el{dV{O~s@z)tD/xY o"@8ZA0pEx}:0f}v UQqP$&`tc]eE	DeT~	 N xxavd $ 	SdqN3^2J:;=Y{5e}y V*[{peO;vr@Y9TgXL=SP~5iJUM@D3o|f[gh6gXLF_a!)&gnqKu-W @a5 xhDyt(uGr@TV4:QNF#QYe(}~|~^#Mf?KNogAxbU 7|V XVMc8=u;W/(s!M ~|(	O m@GRKJ|@
6d1@;p(?n@TJuC{SgCAV7uA
k:iF	I'fd2M<NW x@YS=Q[ILp-[g$ZeXLEr75"Rp(LEe9=}pu]xlq@yHzg-c7\^o{[%PPSP%Iy0Nb0pG0R2@\[u[R8=;aTVpqO5YGo)M
/-Kk
z/.(j5 EQUg-P4q2&E`A*5IcG<<  .lxLXbr_wVx|`TY7TYt ZQjt*3b6v\e{O}tq.NMJ|[!J#	i?#( r;`Sj ^ATnR #;l    IENDB`168  1157|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.personal.order.detail.mail/aspro_full_info/images/no_photo.png|8208875dPNG

   IHDR   d   d   pT   sRGB    bKGD      	pHYs        tIME% >
  IDATxMhTWDIhcOhmS7q!U-"vBP(
Q7nJ`LP:Pe7R-c"_b"u=sqdf3;=?sB!B!B!B!B2YRg}px4}V$|;r;z@O0lf3	&A@orkK:rGo}i_$$\!wex6h)3GI2\U>dxw	l-9o6dr DH	"RY>+_+DO@J^	26fv+ow_||/-=d=Fi8"0[f6|,U1iSw[Rw`GQ1%Hf=fGC=!q2 JmNIUfc4gs8TKEw_| f,m`CO V`Ml]s<9YO;G.'3j'p!|*sIj\5H[9b	d
*A%Wu"f"R>+C"RK,;b]%H5sbsb,;GT)/{`ds[`m$H5;#;:m%AyJ=v$4oje8p!OKMB)-3s?o373!1~7b0q*-zS|c?>r10Nrt)rumc0E,HPi(!f%x%1\ ;w_[@>%^l+a rwC>Lrk6v}a;.E[`C6dD	"AD*L,^[jY!B!B!B!5aaV    IENDB`170  1342|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.personal.order.detail.mail/aspro_full_info/images/table_head.gif|e934ed60GIF89a H                                                                                                                                                                                                                                                                                                                                                                                                                                                      !     ,     H   <00PATx#Jp@d1
9b *&SDd0cI&8s gOJ;=NB*TjP
`zKh]p= n/7%0#Vc S,9/C,yASM:S^ZuaM[lg;K}N+_,?C7u>|x4h/w?a`z&	2j0aJXZan\!nF()0(/Q7c;h?)BQCF*G.P*V^Wjie[:%XAhff\enmg}(I(nZ}*FJ( mP
JZZ*j*j+ ;169  2591|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.personal.order.detail.mail/aspro_full_info/lang/ru/template.php|68c5933d<?
$MESS["SPOD_ORDER_TITLE"] = " #ORDER_NUMBER#  #ORDER_DATE#";
$MESS["SPOD_ORDER_NUMBER"] = " ";
$MESS["SPOD_ORDER_DATA"] = " ";
$MESS["SPOD_ORDER_SUMM"] = " ";
$MESS["SPOD_ORDER_STATUS"] = " :";
$MESS["SPOD_ORDER_CANCELED"] = ":";
$MESS["SPOD_ORDER_DATE_FROM"] = "( #ORDER_DATE#)";
$MESS["SPOD_ORDER_CANCEL"] = "";

$MESS["SPOD_YES"] = "";
$MESS["SPOD_NO"] = "";
$MESS["SPOD_NONE"] = " ";

$MESS["SPOD_ACCOUNT_DATA"] = "   ";
$MESS["SPOD_ACCOUNT"] = " :";
$MESS["SPOD_LOGIN"] = ":";
$MESS["SPOD_EMAIL"] = "E-mail :";

$MESS["SPOD_ORDER_PROPERTIES"] = " ";
$MESS["SPOD_ORDER_PERS_TYPE"] = " :";

$MESS["SPOD_ORDER_UPROPERTIES"] = " ";
$MESS["SPOD_ORDER_USER_COMMENT"] = " :";

$MESS["SPOD_ORDER_PAYMENT"] = "   ";
$MESS["SPOD_PAY_SYSTEM"] = " :";
$MESS["SPOD_ORDER_PAYED"] = ":";
$MESS["SPOD_ORDER_DELIVERY"] = " :";
$MESS["SPOD_ORDER_TRACKING_NUMBER"] = " :";

$MESS["SPOD_ORDER_BASKET"] = " ";
$MESS["SPOD_HEADER_NAME"] = "";
$MESS["SPOD_HEADER_DISCOUNT"] = "";
$MESS["SPOD_HEADER_QUANTITY"] = "-";
$MESS["SPOD_HEADER_SUMM"] = "";

$MESS["SPOD_PRICE"] = ":";
$MESS["SPOD_PRICE_FORMATED"] = "";
$MESS["SPOD_WEIGHT_FORMATED"] = "";
$MESS["SPOD_TYPE"] = "";
$MESS["SPOD_PRICETYPE"] = " ";
$MESS["SPOD_QUANTITY"] = "";
$MESS["SPOD_DISCOUNT"] = "";
$MESS["SPOD_DISCOUNT_PRICE_PERCENT_FORMATED"] = "";
$MESS["SPOD_TAX"] = " ";
$MESS["SPOD_DELIVERY"] = " :";
$MESS["SPOD_SUMMARY"] = ":";
$MESS["SPOD_GO_BACK"] = " ";
$MESS["SPOD_PRODUCT_SUM"] = " :";
$MESS["SPOD_TOTAL_WEIGHT"] = " :";
$MESS["SPOD_DEFAULT_MEASURE"] = "";

$MESS["PERSONAL_PAGE_TEXT"] = "       <br>   .";
$MESS["PERSONAL_PAGE"] = " ";
?>171  509|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.personal.order.detail.mail/aspro_full_info/lang/ru/.parameters.php|b2089f17<?if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED!==true) die();
$MESS["SITE_ID_TITLE"] = "ID ";
$MESS["SITE_ID_TIP"] = "  ID     ";
$MESS["THEME_COLOR_TITLE"] = "  ";
$MESS["SHOW_PERSONAL_TITLE"] = "    ";
$MESS["PERSONAL_PAGE_TITLE"] = "   ";168  167|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.personal.order.detail.mail/aspro_full_info/lang/en/template.php|81e18f17<?
$MESS["SPOD_ORDER_NUMBER"] = " ";
$MESS["SPOD_ORDER_DATA"] = " ";
$MESS["SPOD_ORDER_SUMM"] = " ";
?>171  509|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.personal.order.detail.mail/aspro_full_info/lang/en/.parameters.php|b2089f17<?if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED!==true) die();
$MESS["SITE_ID_TITLE"] = "ID ";
$MESS["SITE_ID_TIP"] = "  ID     ";
$MESS["THEME_COLOR_TITLE"] = "  ";
$MESS["SHOW_PERSONAL_TITLE"] = "    ";
$MESS["PERSONAL_PAGE_TITLE"] = "   ";161  1492|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.personal.order.detail.mail/aspro_main_info/template.php|6eacc4fc<?if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();?>
<?use \Bitrix\Main\Localization\Loc;?>

<?if($arParams["SHOW_ORDER_BASE"]=='Y' && (strlen($arResult["ERROR_MESSAGE"]) || $arResult["ACCOUNT_NUMBER"])):?>
	<div class="border_wrapper" style="color:#888888;font-size:0px;border:1px solid #e7e7e7;padding: 19px 28px 17px;margin-top:10px;margin-bottom:10px;">
		<?if(strlen($arResult["ERROR_MESSAGE"])):?>
			<div style="font-size:14px;color:#c00;"><?=ShowError($arResult["ERROR_MESSAGE"]);?></div>
		<?else:?>	
			<?$allCurrency = CSaleLang::GetLangCurrency($arParams["SITE_ID"]);?>
			<div style="display:inline-block;vertical-align:top;font-size:14px;width:33.33%;">
				<div><?=Loc::getMessage('SPOD_ORDER_NUMBER');?></div>
				<div style="font-size:18px;color:#1d2029;font-weight:600;padding-top:5px;"><?=$arResult["ACCOUNT_NUMBER"]?></div>
			</div>
			<div style="display:inline-block;vertical-align:top;font-size:14px;width:33.33%;">
				<div><?=Loc::getMessage('SPOD_ORDER_DATA');?></div>
				<div style="font-size:18px;color:#1d2029;font-weight:600;padding-top:5px;"><?=$arResult["DATE_INSERT_FORMATED"]?></div>
			</div>
			<div style="display:inline-block;vertical-align:top;font-size:14px;width:33.33%;">
				<div><?=Loc::getMessage('SPOD_ORDER_SUMM');?></div>
				<div style="font-size:18px;color:#1d2029;font-weight:600;padding-top:5px;"><?=CAllCurrencyLang::CurrencyFormat($arResult["PRICE"], $allCurrency);?></div>
			</div>
		<?endif;?>
	</div>
<?endif;?>163  218|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.personal.order.detail.mail/aspro_main_info/.parameters.php|50add671<?
if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED!==true) die();

$arTemplateParameters['SITE_ID'] = array(
	'NAME' => GetMessage('SITE_ID_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => "s1",
);168  167|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.personal.order.detail.mail/aspro_main_info/lang/ru/template.php|81e18f17<?
$MESS["SPOD_ORDER_NUMBER"] = " ";
$MESS["SPOD_ORDER_DATA"] = " ";
$MESS["SPOD_ORDER_SUMM"] = " ";
?>171  247|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.personal.order.detail.mail/aspro_main_info/lang/ru/.parameters.php|2df39772<?if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED!==true) die();
$MESS["SITE_ID_TITLE"] = "ID ";
$MESS["SITE_ID_TIP"] = "  ID     ";168  167|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.personal.order.detail.mail/aspro_main_info/lang/en/template.php|81e18f17<?
$MESS["SPOD_ORDER_NUMBER"] = " ";
$MESS["SPOD_ORDER_DATA"] = " ";
$MESS["SPOD_ORDER_SUMM"] = " ";
?>171  247|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.personal.order.detail.mail/aspro_main_info/lang/en/.parameters.php|2df39772<?if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED!==true) die();
$MESS["SITE_ID_TITLE"] = "ID ";
$MESS["SITE_ID_TIP"] = "  ID     ";138  894|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/news.list.mail/aspro_sale/template.php|307ef55c<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();
/** @var array $arParams */
/** @var array $arResult */
/** @global CMain $APPLICATION */
/** @global CUser $USER */
/** @global CDatabase $DB */
/** @var CBitrixComponentTemplate $this */
/** @var string $templateName */
/** @var string $templateFile */
/** @var string $templateFolder */
/** @var string $componentPath */
/** @var CBitrixComponent $component */
//$this->setFrameMode(true);

$itemIdList = array();
foreach($arResult["ITEMS"] as $item)
{
	$itemIdList[] = $item['ID'];
}
\Bitrix\Main\Mail\EventMessageThemeCompiler::includeComponent(
	"bitrix:catalog.show.products.mail",
	"aspro_sale",
	Array(
		"LIST_ITEM_ID" => $itemIdList,
		"SITE_ADDRESS" => $arParams["SITE_ADDRESS"],
		"THEME_COLOR" => $arParams["THEME_COLOR"],
		"SALE_PAGE" => $arParams["SALE_PAGE"],
		"SHOW_SALE" => $arParams["SHOW_SALE"],
	)
);141  530|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/news.list.mail/aspro_sale/.parameters.php|79fe1bfe<?
if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED!==true) die();

$arTemplateParameters['THEME_COLOR'] = array(
	'NAME' => GetMessage('THEME_COLOR_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => "",
);
$arTemplateParameters['SALE_PAGE'] = array(
	'NAME' => GetMessage('SALE_PAGE_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => "/catalog/",
);
$arTemplateParameters['SHOW_SALE'] = array(
	'NAME' => GetMessage('SHOW_SALE_TITLE'),
	'TYPE' => 'CHECKBOX',
	'REFRESH' => 'N',
	'DEFAULT' => "Y",
);149  271|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/news.list.mail/aspro_sale/lang/ru/.parameters.php|85801681<?if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED!==true) die();
$MESS["THEME_COLOR_TITLE"] = "  ";
$MESS["SHOW_SALE_TITLE"] = "   ";
$MESS["SALE_PAGE_TITLE"] = "  ";149  271|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/news.list.mail/aspro_sale/lang/en/.parameters.php|85801681<?if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED!==true) die();
$MESS["THEME_COLOR_TITLE"] = "  ";
$MESS["SHOW_SALE_TITLE"] = "   ";
$MESS["SALE_PAGE_TITLE"] = "  ";140  818|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/news.list.mail/aspro_tizers/template.php|cac2eb3e<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();
/** @var array $arParams */
/** @var array $arResult */
/** @global CMain $APPLICATION */
/** @global CUser $USER */
/** @global CDatabase $DB */
/** @var CBitrixComponentTemplate $this */
/** @var string $templateName */
/** @var string $templateFile */
/** @var string $templateFolder */
/** @var string $componentPath */
/** @var CBitrixComponent $component */
//$this->setFrameMode(true);

$itemIdList = array();
foreach($arResult["ITEMS"] as $item)
{
	$itemIdList[] = $item['ID'];
}
\Bitrix\Main\Mail\EventMessageThemeCompiler::includeComponent(
	"bitrix:catalog.show.products.mail",
	"aspro_tizers",
	Array(
		"LIST_ITEM_ID" => $itemIdList,
		"SITE_ADDRESS" => $arParams["SITE_ADDRESS"],
		"FROM_TEMPLATE" => $arParams["FROM_TEMPLATE"],
	)
);149  554|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.discount.coupon.mail/aspro_mail/template.php|809f3a53<?if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED !== true) die();
/** @var CBitrixComponentTemplate $this */
/** @var array $arParams */
/** @var array $arResult */
/** @global CDatabase $DB */
?>
<div class="border_wrapper" style="text-align:center;color:#666666;font-size:16px;border:1px solid #e7e7e7;padding: 19px 10px 17px;margin-top:10px;margin-bottom:10px;">
	<?=\Bitrix\Main\Localization\Loc::getMessage("COUPON_TEXT");?><span style="font-weight:600;font-size:18px;color:#1d2029;padding-left:10px;"><?=$arResult['COUPON'];?></span>
</div>157  126|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.discount.coupon.mail/aspro_mail/lang/ru/template.php|f46348b3<?
if(!defined("B_PROLOG_INCLUDED") && B_PROLOG_INCLUDED !== true) die();
$MESS["COUPON_TEXT"] = " :";
?>157  126|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.discount.coupon.mail/aspro_mail/lang/en/template.php|f46348b3<?
if(!defined("B_PROLOG_INCLUDED") && B_PROLOG_INCLUDED !== true) die();
$MESS["COUPON_TEXT"] = " :";
?>153  573|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.bigdata.personal.mail/aspro_bigdata/template.php|e6f11243<?if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED !== true) die();

/** @var CBitrixComponentTemplate $this */
/** @var array $arResult */

\Bitrix\Main\Mail\EventMessageThemeCompiler::includeComponent(
	"bitrix:catalog.show.products.mail",
	"aspro_goods",
	array(
		"LIST_ITEM_ID" => $arResult['ITEMS'],
		"SITE_ID" => $arParams['SITE_ID'],
		"SITE_ADDRESS" => $arParams['SITE_ADDRESS'],
		"THEME_COLOR" => $arParams['THEME_COLOR'],
		"TITLE" => $arParams['TITLE'],
		"CATALOG_PAGE" => $arParams['CATALOG_PAGE'],
		"SHOW_CATALOG" => $arParams['SHOW_CATALOG'],
	)
);157  1013|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.bigdata.personal.mail/aspro_bigdata/.parameters.php|4197801c<?
if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED!==true) die();

$arTemplateParameters['TITLE'] = array(
	'NAME' => GetMessage('SALE_BASKET_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => GetMessage('SALE_BASKET_TEXT'),
);
$arTemplateParameters['SITE_ID'] = array(
	'NAME' => GetMessage('SITE_ID_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => "s1",
);
$arTemplateParameters['SITE_ADDRESS'] = array(
	'NAME' => GetMessage('SITE_ADDRESS_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => "",
);
$arTemplateParameters['THEME_COLOR'] = array(
	'NAME' => GetMessage('THEME_COLOR_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => "",
);
$arTemplateParameters['CATALOG_PAGE'] = array(
	'NAME' => GetMessage('CATALOG_PAGE_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => "/catalog/",
);
$arTemplateParameters['SHOW_CATALOG'] = array(
	'NAME' => GetMessage('SHOW_CATALOG_TITLE'),
	'TYPE' => 'CHECKBOX',
	'REFRESH' => 'N',
	'DEFAULT' => "Y",
);164  810|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.bigdata.personal.mail/aspro_bigdata/lang/ru/.parameters.php|7a4eba99<?if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED!==true) die();
$MESS["SALE_BASKET_TITLE"] = " ";
$MESS["SALE_BASKET_TEXT"] = " ";
$MESS["SITE_ID_TITLE"] = "ID ";
$MESS["SITE_ID_TIP"] = "  ID     ";
$MESS["SITE_ADDRESS_TITLE"] = " ";
$MESS["SITE_ADDRESS_TIP"] = "         ";
$MESS["THEME_COLOR_TITLE"] = "  ";
$MESS["SHOW_CATALOG_TITLE"] = "   ";
$MESS["CATALOG_PAGE_TITLE"] = "  ";164  810|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.bigdata.personal.mail/aspro_bigdata/lang/en/.parameters.php|7a4eba99<?if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED!==true) die();
$MESS["SALE_BASKET_TITLE"] = " ";
$MESS["SALE_BASKET_TEXT"] = " ";
$MESS["SITE_ID_TITLE"] = "ID ";
$MESS["SITE_ID_TIP"] = "  ID     ";
$MESS["SITE_ADDRESS_TITLE"] = " ";
$MESS["SITE_ADDRESS_TIP"] = "         ";
$MESS["THEME_COLOR_TITLE"] = "  ";
$MESS["SHOW_CATALOG_TITLE"] = "   ";
$MESS["CATALOG_PAGE_TITLE"] = "  ";159  4770|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/catalog.show.products.mail/aspro_goods/result_modifier.php|5b6f4441<?
if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED !== true) die();
/** @var CBitrixComponentTemplate $this */
/** @var array $arParams */
/** @var array $arResult */
/** @global CDatabase $DB */

$skuPropList = array();
$catalogs = array();
foreach($arParams['LIST_ITEM_ID'] as $itemId)
{
	foreach($arResult['CATALOGS'] as $catalog)
	{
		$offersCatalogId = (int)$catalog['OFFERS_IBLOCK_ID'];
		$offersPropId = (int)$catalog['OFFERS_PROPERTY_ID'];
		$catalogId = (int)$catalog['IBLOCK_ID'];
		$sku = false;
		if($offersCatalogId > 0 && $offersPropId > 0)
			$sku = array("IBLOCK_ID" => $offersCatalogId, "SKU_PROPERTY_ID" => $offersPropId, "PRODUCT_IBLOCK_ID" => $catalogId);

		if (!empty($sku) && is_array($sku))
		{
			$skuPropList[$itemId] = array();
			$skuPropList[$itemId] = CIBlockPriceTools::getTreeProperties(
				$sku,
				$arParams['OFFER_TREE_PROPS'][$itemId],
				array(
					'PICT' => $emptyPreview,
					'NAME' => '-'
				)
			);

			$needValues = array();
			CIBlockPriceTools::getTreePropertyValues($skuPropList[$itemId], $needValues);

			foreach($skuPropList[$itemId] as $propertyCode => &$propertyValue)
			{
				if($propertyValue['SHOW_MODE'] == 'PICT')
				{
					$count = 0;
					foreach($propertyValue['VALUES'] as $key => &$value)
					{
						if(!in_array($value['XML_ID'], $arParams['PROPERTY_VALUE'][$itemId][$propertyCode]))
							unset($propertyValue['VALUES'][$key]);
						if(!empty($arParams['PROPERTY_ITERATION_VALUE'][$itemId][$propertyCode]))
						{
							foreach($arParams['PROPERTY_ITERATION_VALUE'][$itemId][$propertyCode] as $propValue)
							{
								if($propValue == $value['XML_ID'])
								{
									$value['ALLOCATION'] = true;
								}
							}
						}
						else
						{
							if(!$count)
								$value['ALLOCATION'] = true;
						}
					}
				}
				else
				{
					$count = 0;
					foreach($propertyValue['VALUES'] as $key => &$value)
					{
						if(isset($arParams['OFFER'][$itemId]))
						{
							if(in_array($value['NAME'], $arParams['PROPERTY_VALUE'][$itemId][$propertyCode]))
								$value['ALLOCATION'] = true;
							if(isset($value['NA']))
								unset($propertyValue['VALUES'][$key]);
						}
						else
						{
							if(!empty($arParams['PROPERTY_ITERATION_VALUE'][$itemId][$propertyCode]))
							{
								foreach($arParams['PROPERTY_ITERATION_VALUE'][$itemId][$propertyCode] as $propValue)
								{
									if($propValue == $value['NAME'])
									{
										$value['ALLOCATION'] = true;
									}
								}
							}
							else
							{
								if(!$count)
									$value['ALLOCATION'] = true;
							}
							if(!in_array($value['NAME'], $arParams['PROPERTY_VALUE'][$itemId][$propertyCode]))
								unset($propertyValue['VALUES'][$key]);
						}
						$count++;
					}
				}
			}
		}
	}
}


if (!empty($arResult['ITEMS']))
{
	$emptyPreview = false;
	$pathEmptyPreview = $this->GetFolder() . '/images/no_photo.png';
	if (file_exists($_SERVER['DOCUMENT_ROOT'] . $pathEmptyPreview))
	{
		$sizes = getimagesize($_SERVER['DOCUMENT_ROOT'] . $pathEmptyPreview);
		if (!empty($sizes))
		{
			$emptyPreview = array(
				'src' => $pathEmptyPreview,
				'width' => intval($sizes[0]),
				'height' => intval($sizes[1])
			);
		}
	}

	$newItemsList = array();
	foreach ($arResult['ITEMS'] as $key => $item)
	{
		$imageFile = CFile::GetFileArray($item["~DETAIL_PICTURE"]);
		if($imageFile !== false)
		{
			$item['PREVIEW_PICTURE'] = CFile::ResizeImageGet(
				$imageFile,
				array("width" => 168, "height" => 168),
				BX_RESIZE_IMAGE_PROPORTIONAL,
				true
			);
		}
		if (isset($item['OFFERS']) && !empty($item['OFFERS']))
		{
			foreach($item['OFFERS']  as $ind => $offer)
				if($offer['SELECTED'])
				{
					$item['OFFERS_SELECTED'] = $ind;
					break;
				}

			$item['MIN_PRICE'] = false;
			foreach ($item['OFFERS'] as $keyOffer => $arOffer)
			{
				if (empty($item['MIN_PRICE']) && $arOffer['CAN_BUY'])
				{
					$item['MIN_PRICE'] = (isset($arOffer['RATIO_PRICE']) ? $arOffer['RATIO_PRICE'] : $arOffer['MIN_PRICE']);
				}
			}
		}

		if($arParams['SIMPLE_PRODUCT'][$item['ID']])
		{
			foreach($arParams['PRICE_CODE'] as $priceCode)
			{
				if(array_key_exists($priceCode, $item['PRICES']))
				{
					$item['MIN_PRICE']['VALUE'] = $item['PRICES'][$priceCode]['VALUE'];
					$item['MIN_PRICE']['PRINT_VALUE'] = $item['PRICES'][$priceCode]['PRINT_VALUE'];
					$item['MIN_PRICE']['DISCOUNT_VALUE'] = $item['PRICES'][$priceCode]['DISCOUNT_VALUE'];
					$item['MIN_PRICE']['PRINT_DISCOUNT_VALUE'] = $item['PRICES'][$priceCode]['PRINT_DISCOUNT_VALUE'];
				}
			}
		}

		if(empty($item['PREVIEW_PICTURE']))
		{
			$item['PREVIEW_PICTURE'] = $emptyPreview;
		}

		$newItemsList[$key] = $item;
	}

	$arResult['ITEMS'] = $newItemsList;
	$arResult['SKU_PROPS'] = $skuPropList;
}
?>152  3294|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/catalog.show.products.mail/aspro_goods/template.php|1fdd7785<?if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED !== true) die();
/** @var CBitrixComponentTemplate $this */
/** @var array $arParams */
/** @var array $arResult */

use Bitrix\Main\Localization\Loc;

$skuTemplate = array();
?>
<? if(!empty($arResult['ITEMS'])):?>
	<div class="products_block" style="font-size:0px;margin:20px 0px 0px;text-align:left;border-top:1px solid #dedede;padding-top:8px;">
		<div style="color:#1d2029;font-size:18px;padding: 22px 0px 18px;font-weight:600;"><?=($arParams["TITLE"] ? $arParams["TITLE"] : GetMessage("PRODUCTS_TITLE") );?></div>
		<?$i = 1;?>
		<?foreach($arResult['ITEMS'] as $arItem):?>
			<div class="item" style="display: inline-block;vertical-align: top;font-size: 0px;width: 33.33%;color: #000;box-sizing: border-box;padding: 0px 15px 0px 0px;margin: 0px 0px 59px;margin: 15px 0px 15px;white-space: nowrap;<?=($i%3==0 ? "padding-right:0px;" : "");?>">
				<div style="border:1px solid #e7e7e7;padding:20px 16px;font-size:12px;text-align: center;">
					<?if($arItem["PROPERTIES"]["HIT"]){?>
						<div class="stickers" style="position:absolute;">
							<?foreach($arItem["PROPERTIES"]["HIT"]["VALUE_XML_ID"] as $key=>$class){?>
								<div class="sticker_<?=strtolower($class);?>" title="<?=$arItem["PROPERTIES"]["HIT"]["VALUE"][$key]?>"></div>
							<?}?>
						</div>
					<?}?>
					<?if($arItem["~PREVIEW_PICTURE"]){
						$img = CFile::ResizeImageGet($arItem["~PREVIEW_PICTURE"], array("width" => 130, "height" => 130), BX_RESIZE_PROPORTIONAL_ALT);
						$src= str_replace(array("//", ":/"), array("/", "://"), $arParams["SITE_ADDRESS"].$img["src"]);?>
						<a class="name" href="<?=$arItem["DETAIL_PAGE_URL"];?>">
							<div class="img" style="overflow:hidden;height:130px;line-height:127px;text-align:center;margin: 0px 0px 10px 0px;white-space:normal;font-size: 12px;">
								<img src="<?=$src;?>" alt="<?=$arItem["NAME"];?>" title="<?=$arItem["NAME"];?>" style="display: inline-block;max-height: 100%;max-width: 100%;vertical-align:middle;"/>
							</div>
						</a>
					<?}?>
					<div class="title" style="white-space: normal;font-size: 13px;height:37px;overflow:hidden;">
						<a class="name" href="<?=$arItem["DETAIL_PAGE_URL"];?>" style="color:<?=$arParams["THEME_COLOR"]?>"><?=$arItem["NAME"];?></a>
					</div>
					<?if($arItem["MIN_PRICE"]["VALUE"]):?>
						<div class="prices">
							<div style="color:#1d2029;font-size:15px;font-weight:600;padding: 9px 0px 9px;"><?=$arItem["MIN_PRICE"]["PRINT_VALUE"];?></div>
							<?if($arItem["MIN_PRICE"]["DISCOUNT_VALUE"] && ($arItem["MIN_PRICE"]["DISCOUNT_VALUE"] != $arItem["MIN_PRICE"]["VALUE"])):?>
								<div style="font-size:13px;color:#555555;text-decoration:line-through;"><?=$arItem["MIN_PRICE"]["PRINT_DISCOUNT_VALUE"];?></div>
							<?endif;?>
						</div>
					<?endif;?>
				</div>
			</div>
			<?$i++;?>
		<?endforeach;?>
		<?if($arParams["SHOW_CATALOG"] == "Y" && $arParams["CATALOG_PAGE"]):?>
			<div style="text-align:center;"><a href="<?=$arParams["CATALOG_PAGE"];?>" style="display:inline-block;font-size:14px;border-radius:3px;margin: 10px 0px 5px;padding: 11px 19px;color:<?=$arParams["THEME_COLOR"]?>;background:#fff;border:1px solid <?=$arParams["THEME_COLOR"]?>;"><?=GetMessage("CATALOG_TITLE");?></a></div>
		<?endif;?>
	</div>	
<? endif ?>155  1013|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/catalog.show.products.mail/aspro_goods/.parameters.php|4197801c<?
if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED!==true) die();

$arTemplateParameters['TITLE'] = array(
	'NAME' => GetMessage('SALE_BASKET_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => GetMessage('SALE_BASKET_TEXT'),
);
$arTemplateParameters['SITE_ID'] = array(
	'NAME' => GetMessage('SITE_ID_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => "s1",
);
$arTemplateParameters['SITE_ADDRESS'] = array(
	'NAME' => GetMessage('SITE_ADDRESS_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => "",
);
$arTemplateParameters['THEME_COLOR'] = array(
	'NAME' => GetMessage('THEME_COLOR_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => "",
);
$arTemplateParameters['CATALOG_PAGE'] = array(
	'NAME' => GetMessage('CATALOG_PAGE_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => "/catalog/",
);
$arTemplateParameters['SHOW_CATALOG'] = array(
	'NAME' => GetMessage('SHOW_CATALOG_TITLE'),
	'TYPE' => 'CHECKBOX',
	'REFRESH' => 'N',
	'DEFAULT' => "Y",
);159  2059|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/catalog.show.products.mail/aspro_goods/images/no_photo.png|cc71ebd9PNG

   IHDR         <q   tEXtSoftware Adobe ImageReadyqe<  $iTXtXML:com.adobe.xmp     <?xpacket begin="" id="W5M0MpCehiHzreSzNTczkc9d"?> <x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.3-c011 66.145661, 2012/02/06-14:56:27        "> <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"> <rdf:Description rdf:about="" xmlns:xmp="http://ns.adobe.com/xap/1.0/" xmlns:xmpMM="http://ns.adobe.com/xap/1.0/mm/" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmp:CreatorTool="Adobe Photoshop CS6 (Macintosh)" xmpMM:InstanceID="xmp.iid:3C529E4E363611E39A16AFDE7242C2E3" xmpMM:DocumentID="xmp.did:3C529E4F363611E39A16AFDE7242C2E3"> <xmpMM:DerivedFrom stRef:instanceID="xmp.iid:3C529E4C363611E39A16AFDE7242C2E3" stRef:documentID="xmp.did:3C529E4D363611E39A16AFDE7242C2E3"/> </rdf:Description> </rdf:RDF> </x:xmpmeta> <?xpacket end="r"?>@c  }IDATxMHQG%T\PTH?Hj&Z-[(JB40wy~mWgyx!<|g3[N" b/ bbb    bbb    bbb    bbb    bbb    bbb    bbb    bb,P^^mutKvn%%?}>Prr.a'z&Uqom@,/[Z#|X|VRbZwZ]_|+*7V/w#ImCkO(K%E.fFi7};&PKl~     bAJ>H$#IH${$I\}&JRrNr)~|XWT2cv	xBG,c9X~(9&B1XS5KF8@,x.yu.%I[}%afXVb6dgKY.9=Znn9?zj/y+My_s&]>J&,}JNQ\g3s#u!rKYIAutl+LZmv%2Dm%rKj!FSbiml1bK}0Ds#Vgi!YM^rK3].f=@2}>5Xs;XyKi1at
_9L>]zg:'b9NWB'|:7|i+ V0g~ ,UO$R<J&YNE5/Wu*N_/EM>7pKc\XUrQ3d_cd>e!V:"B@,@, #^x6 AfL#VZ40                           I0 ?S    IENDB`159  185|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/catalog.show.products.mail/aspro_goods/lang/ru/template.php|c5b3847c<?
$MESS["PRODUCTS_TITLE"] = " ";
$MESS["CATALOG_TITLE"] = "  ";
$MESS["CATALOG_VIEWED_PRODUCTS_MAIL_YET"] = "";
?>162  810|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/catalog.show.products.mail/aspro_goods/lang/ru/.parameters.php|7a4eba99<?if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED!==true) die();
$MESS["SALE_BASKET_TITLE"] = " ";
$MESS["SALE_BASKET_TEXT"] = " ";
$MESS["SITE_ID_TITLE"] = "ID ";
$MESS["SITE_ID_TIP"] = "  ID     ";
$MESS["SITE_ADDRESS_TITLE"] = " ";
$MESS["SITE_ADDRESS_TIP"] = "         ";
$MESS["THEME_COLOR_TITLE"] = "  ";
$MESS["SHOW_CATALOG_TITLE"] = "   ";
$MESS["CATALOG_PAGE_TITLE"] = "  ";159  185|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/catalog.show.products.mail/aspro_goods/lang/en/template.php|c5b3847c<?
$MESS["PRODUCTS_TITLE"] = " ";
$MESS["CATALOG_TITLE"] = "  ";
$MESS["CATALOG_VIEWED_PRODUCTS_MAIL_YET"] = "";
?>162  810|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/catalog.show.products.mail/aspro_goods/lang/en/.parameters.php|7a4eba99<?if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED!==true) die();
$MESS["SALE_BASKET_TITLE"] = " ";
$MESS["SALE_BASKET_TEXT"] = " ";
$MESS["SITE_ID_TITLE"] = "ID ";
$MESS["SITE_ID_TIP"] = "  ID     ";
$MESS["SITE_ADDRESS_TITLE"] = " ";
$MESS["SITE_ADDRESS_TIP"] = "         ";
$MESS["THEME_COLOR_TITLE"] = "  ";
$MESS["SHOW_CATALOG_TITLE"] = "   ";
$MESS["CATALOG_PAGE_TITLE"] = "  ";157  620|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/catalog.show.products.mail/aspro_sale/result_modifier.php|70ef3ef0<?
if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED !== true) die();
/** @var CBitrixComponentTemplate $this */
/** @var array $arParams */
/** @var array $arResult */
/** @global CDatabase $DB */

if (!empty($arResult['ITEMS']))
{
	$arFilter = array(
		"ACTIVE" => "Y",
		"ID" => $arParams['LIST_ITEM_ID']
	);
	$arSelect = array('ID', 'PREVIEW_TEXT', 'PREVIEW_TEXT_TYPE');
	$rsItems = CIBlockElement::GetList(array(), $arFilter, false, false, $arSelect);
	while($arItem = $rsItems->Fetch())
	{
		if($arItem['PREVIEW_TEXT'])
			$arResult['ITEMS'][$arItem['ID']]['PREVIEW_TEXT'] = $arItem['PREVIEW_TEXT'];
	}
	
}
?>151  2475|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/catalog.show.products.mail/aspro_sale/template.php|71daa9ec<?if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED !== true) die();
/** @var CBitrixComponentTemplate $this */
/** @var array $arParams */
/** @var array $arResult */

use Bitrix\Main\Localization\Loc;

$skuTemplate = array();
?>
<? if(!empty($arResult['ITEMS'])):?>
	<div class="products_block" style="margin:20px 0px 0px;text-align:center;padding-top:8px;">
		<?$count = count($arResult['ITEMS']);
		$i = 1;?>
		<?foreach($arResult['ITEMS'] as $arItem):?>
			<div class="item" style="font-size:0px;color: #000;box-sizing: border-box;text-align:left;padding:0px 0px 25px;margin-bottom:25px;<?=($i == $count ? 'margin-bottom:0px;' : 'border-bottom:1px solid #dedede;')?><?=($i == 1 ? 'margin-top:0px;' : 'margin-top:25px;')?>">
				<?if($arItem["PREVIEW_PICTURE"]["SRC"]):
					$img = CFile::ResizeImageGet($arItem["~PREVIEW_PICTURE"], array("width" => 130, "height" => 130), BX_RESIZE_PROPORTIONAL_ALT);?>
					<div class="img" style="max-width: 130px;margin:0px;font-size: 12px;width: 22%;display: inline-block;vertical-align: top;"><img src="<?=$img["src"]?>" alt="<?=$arItem["NAME"];?>" title="<?=$arItem["NAME"];?>"/></div>
					<div class="right-data" style="padding: 0 30px 2px;margin-left: 0;display: inline-block;vertical-align: top;width: 78%;box-sizing: border-box;">
				<?endif;?>
					<div style="font-size:12px;">
						<?if( $arItem["PROPERTIES"]["PERIOD"]["VALUE"] ){?>
							<div class="date_small" style="color:#888888;"><?=$arItem["PROPERTIES"]["PERIOD"]["VALUE"]?></div>
						<?}elseif($arItem["DISPLAY_ACTIVE_FROM"]){?>
							<div class="date_small" style="color:#888888;"><?=$arItem["DISPLAY_ACTIVE_FROM"]?></div>
						<?}?>
						<div class="item-title" style="font-size:15px;font-weight:600;padding:7px 0px 7px;"><a href="<?=$arItem["DETAIL_PAGE_URL"]?>" style="color:<?=$arParams["THEME_COLOR"];?>"><span><?=$arItem["NAME"]?></span></a></div>
						<div class="preview-text" style="color:#666666;font-size:14px;"><?=$arItem["PREVIEW_TEXT"]?></div>
					</div>
				<?if($arItem["PREVIEW_PICTURE"]["SRC"]):?>
					</div>
				<?endif;?>
				<?$i++;?>
			</div>
		<?endforeach;?>
		<?if($arParams["SALE_PAGE"] && $arParams["SHOW_SALE"] == "Y"):?>
			<div style="text-align:center;padding-bottom:10px;">
				<a href="<?=$arParams["SALE_PAGE"]?>" style="color:#fff;background:<?=$arParams["THEME_COLOR"];?>;padding:11px 19px;border-radius:3px;display: inline-block;"><?= GetMessage("SALE_PAGE") ?></a>
			</div>
		<?endif;?>
	</div>	
<? endif ?>146  736|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/catalog.show.products.mail/aspro_sale/style.css|e6bcfea.tizers_block{font-size: 0px;margin: 25px 0px 0px;text-align: center;}
.tizers_block .item{display: inline-block;vertical-align: middle;font-size: 0px;width: 20%;color: #000;box-sizing: border-box;padding: 0px 5px 0px 0px;-moz-transition: all 0.1s ease;-o-transition: all 0.1s ease;-ms-transition: all 0.1s ease;transition: all 0.1s ease;margin: 0px 0px 59px;margin: 25px 0px 38px;white-space: nowrap;}
.tizers_block * {line-height: 18px;}
.tizers_block .item a{font-size: 12px;text-decoration: none;color: #000;line-height: 16px;display: block;}
.tizers_block .item .img{max-width: 60px;margin: 0px 20px 0px 0px;}
.tizers_block .item .img, .tizers_block .item .title {font-size: 12px;display: inline-block;vertical-align: middle;}158  2059|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/catalog.show.products.mail/aspro_sale/images/no_photo.png|cc71ebd9PNG

   IHDR         <q   tEXtSoftware Adobe ImageReadyqe<  $iTXtXML:com.adobe.xmp     <?xpacket begin="" id="W5M0MpCehiHzreSzNTczkc9d"?> <x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.3-c011 66.145661, 2012/02/06-14:56:27        "> <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"> <rdf:Description rdf:about="" xmlns:xmp="http://ns.adobe.com/xap/1.0/" xmlns:xmpMM="http://ns.adobe.com/xap/1.0/mm/" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmp:CreatorTool="Adobe Photoshop CS6 (Macintosh)" xmpMM:InstanceID="xmp.iid:3C529E4E363611E39A16AFDE7242C2E3" xmpMM:DocumentID="xmp.did:3C529E4F363611E39A16AFDE7242C2E3"> <xmpMM:DerivedFrom stRef:instanceID="xmp.iid:3C529E4C363611E39A16AFDE7242C2E3" stRef:documentID="xmp.did:3C529E4D363611E39A16AFDE7242C2E3"/> </rdf:Description> </rdf:RDF> </x:xmpmeta> <?xpacket end="r"?>@c  }IDATxMHQG%T\PTH?Hj&Z-[(JB40wy~mWgyx!<|g3[N" b/ bbb    bbb    bbb    bbb    bbb    bbb    bbb    bb,P^^mutKvn%%?}>Prr.a'z&Uqom@,/[Z#|X|VRbZwZ]_|+*7V/w#ImCkO(K%E.fFi7};&PKl~     bAJ>H$#IH${$I\}&JRrNr)~|XWT2cv	xBG,c9X~(9&B1XS5KF8@,x.yu.%I[}%afXVb6dgKY.9=Znn9?zj/y+My_s&]>J&,}JNQ\g3s#u!rKYIAutl+LZmv%2Dm%rKj!FSbiml1bK}0Ds#Vgi!YM^rK3].f=@2}>5Xs;XyKi1at
_9L>]zg:'b9NWB'|:7|i+ V0g~ ,UO$R<J&YNE5/Wu*N_/EM>7pKc\XUrQ3d_cd>e!V:"B@,@, #^x6 AfL#VZ40                           I0 ?S    IENDB`158  137|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/catalog.show.products.mail/aspro_sale/lang/ru/template.php|bfb51e0e<?
$MESS["SALE_PAGE"] = "   ";
$MESS["CATALOG_VIEWED_PRODUCTS_MAIL_YET"] = "";
?>158  137|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/catalog.show.products.mail/aspro_sale/lang/en/template.php|bfb51e0e<?
$MESS["SALE_PAGE"] = "   ";
$MESS["CATALOG_VIEWED_PRODUCTS_MAIL_YET"] = "";
?>153  2155|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/catalog.show.products.mail/aspro_tizers/template.php|ef04d92d<?if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED !== true) die();
/** @var CBitrixComponentTemplate $this */
/** @var array $arParams */
/** @var array $arResult */

use Bitrix\Main\Localization\Loc;

$skuTemplate = array();
?>
<? if(!empty($arResult['ITEMS'])):?>
	<div class="tizers_block" style="font-size:0px;margin:20px 0px 0px;text-align:center;border-top:1px solid #dedede;padding-top:8px;<?=($arParams["FROM_TEMPLATE"] == "Y" ? 'padding-left:30px;padding-right:30px;' : '')?>">
		<?foreach($arResult['ITEMS'] as $arItem):?>
			<?$name = strip_tags($arItem["~NAME"], "<br><br/>");?>
			<?$name_img = strip_tags($arItem["~NAME"]);?>
			<div class="item" style="display: inline-block;vertical-align: middle;font-size: 0px;width: 33.33%;color: #000;box-sizing: border-box;padding: 0px 5px 0px 0px;-moz-transition: all 0.1s ease;-o-transition: all 0.1s ease;-ms-transition: all 0.1s ease;transition: all 0.1s ease;margin: 0px 0px 59px;margin: 15px 0px 15px;white-space: nowrap;">
				<?if($arItem["PROPERTIES"]["LINK"]["VALUE"]){?>
					<?
					$url = $arItem["PROPERTIES"]["LINK"]["VALUE"];
					if(strpos($arItem["PROPERTIES"]["LINK"]["VALUE"], "http") === false &&  strpos($arItem["PROPERTIES"]["LINK"]["VALUE"], "https") === false)
						$url = $arParams["SITE_ADDRESS"]."/".$arItem["PROPERTIES"]["LINK"]["VALUE"];
					?>
					<a class="name" href="<?=str_replace(array("//", ":/"), array("/", "://"), $url);?>" style="font-size: 12px;text-decoration: none;color: #000;line-height: 16px;display: block;">
				<?}?>
				<?if($arItem["PREVIEW_PICTURE"]["SRC"]){?>
					<div class="img" style="max-width: 60px;margin: 0px 20px 0px 0px;white-space:normal;font-size: 12px;display: inline-block;vertical-align: middle;"><img src="<?=$arItem["PREVIEW_PICTURE"]["SRC"]?>" alt="<?=$name_img;?>" title="<?=$name_img;?>"/></div>
				<?}?>
				<div class="title" style="width: 54%;text-align: left;margin: -6px 0px 0px;white-space: normal;font-size: 12px;display: inline-block;vertical-align: middle;">
					<?=$name;?>
				</div>
				<?if($arItem["PROPERTIES"]["LINK"]["VALUE"]){?>
					</a>
				<?}?>
			</div>
		<?endforeach;?>
	</div>	
<? endif ?>148  736|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/catalog.show.products.mail/aspro_tizers/style.css|e6bcfea.tizers_block{font-size: 0px;margin: 25px 0px 0px;text-align: center;}
.tizers_block .item{display: inline-block;vertical-align: middle;font-size: 0px;width: 20%;color: #000;box-sizing: border-box;padding: 0px 5px 0px 0px;-moz-transition: all 0.1s ease;-o-transition: all 0.1s ease;-ms-transition: all 0.1s ease;transition: all 0.1s ease;margin: 0px 0px 59px;margin: 25px 0px 38px;white-space: nowrap;}
.tizers_block * {line-height: 18px;}
.tizers_block .item a{font-size: 12px;text-decoration: none;color: #000;line-height: 16px;display: block;}
.tizers_block .item .img{max-width: 60px;margin: 0px 20px 0px 0px;}
.tizers_block .item .img, .tizers_block .item .title {font-size: 12px;display: inline-block;vertical-align: middle;}160  2059|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/catalog.show.products.mail/aspro_tizers/images/no_photo.png|cc71ebd9PNG

   IHDR         <q   tEXtSoftware Adobe ImageReadyqe<  $iTXtXML:com.adobe.xmp     <?xpacket begin="" id="W5M0MpCehiHzreSzNTczkc9d"?> <x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.3-c011 66.145661, 2012/02/06-14:56:27        "> <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"> <rdf:Description rdf:about="" xmlns:xmp="http://ns.adobe.com/xap/1.0/" xmlns:xmpMM="http://ns.adobe.com/xap/1.0/mm/" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmp:CreatorTool="Adobe Photoshop CS6 (Macintosh)" xmpMM:InstanceID="xmp.iid:3C529E4E363611E39A16AFDE7242C2E3" xmpMM:DocumentID="xmp.did:3C529E4F363611E39A16AFDE7242C2E3"> <xmpMM:DerivedFrom stRef:instanceID="xmp.iid:3C529E4C363611E39A16AFDE7242C2E3" stRef:documentID="xmp.did:3C529E4D363611E39A16AFDE7242C2E3"/> </rdf:Description> </rdf:RDF> </x:xmpmeta> <?xpacket end="r"?>@c  }IDATxMHQG%T\PTH?Hj&Z-[(JB40wy~mWgyx!<|g3[N" b/ bbb    bbb    bbb    bbb    bbb    bbb    bbb    bb,P^^mutKvn%%?}>Prr.a'z&Uqom@,/[Z#|X|VRbZwZ]_|+*7V/w#ImCkO(K%E.fFi7};&PKl~     bAJ>H$#IH${$I\}&JRrNr)~|XWT2cv	xBG,c9X~(9&B1XS5KF8@,x.yu.%I[}%afXVb6dgKY.9=Znn9?zj/y+My_s&]>J&,}JNQ\g3s#u!rKYIAutl+LZmv%2Dm%rKj!FSbiml1bK}0Ds#Vgi!YM^rK3].f=@2}>5Xs;XyKi1at
_9L>]zg:'b9NWB'|:7|i+ V0g~ ,UO$R<J&YNE5/Wu*N_/EM>7pKc\XUrQ3d_cd>e!V:"B@,@, #^x6 AfL#VZ40                           I0 ?S    IENDB`160  144|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/catalog.show.products.mail/aspro_tizers/lang/ru/template.php|54389712<?
$MESS["CATALOG_VIEWED_PRODUCTS_MAIL_TITLE"] = " ";
$MESS["CATALOG_VIEWED_PRODUCTS_MAIL_YET"] = "";
?>158  6|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/catalog.show.products.mail/aspro_tizers/lang/en/template.php|1a9e1b07<?

?>151  581|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.bigdata.followup.mail/aspro_goods/template.php|8f8c352b<?if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED !== true) die();

/** @var CBitrixComponentTemplate $this */
/** @var array $arResult */

\Bitrix\Main\Mail\EventMessageThemeCompiler::includeComponent(
	"bitrix:catalog.show.products.mail",
	"aspro_goods",
	array(
		"LIST_ITEM_ID" => $arResult['ITEMS'],
		"SITE_ID" => $arParams['SITE_ID'],
		"SITE_ADDRESS" => $arParams['SITE_ADDRESS'],
		"THEME_COLOR" => $arParams['THEME_COLOR'],
		"TITLE" => $arParams['TITLE'],
		"CATALOG_PAGE" => $arParams['CATALOG_PAGE'],
		"SHOW_CATALOG" => $arParams['SHOW_CATALOG'],
	),
	false
);155  1013|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.bigdata.followup.mail/aspro_goods/.parameters.php|4197801c<?
if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED!==true) die();

$arTemplateParameters['TITLE'] = array(
	'NAME' => GetMessage('SALE_BASKET_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => GetMessage('SALE_BASKET_TEXT'),
);
$arTemplateParameters['SITE_ID'] = array(
	'NAME' => GetMessage('SITE_ID_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => "s1",
);
$arTemplateParameters['SITE_ADDRESS'] = array(
	'NAME' => GetMessage('SITE_ADDRESS_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => "",
);
$arTemplateParameters['THEME_COLOR'] = array(
	'NAME' => GetMessage('THEME_COLOR_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => "",
);
$arTemplateParameters['CATALOG_PAGE'] = array(
	'NAME' => GetMessage('CATALOG_PAGE_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => "/catalog/",
);
$arTemplateParameters['SHOW_CATALOG'] = array(
	'NAME' => GetMessage('SHOW_CATALOG_TITLE'),
	'TYPE' => 'CHECKBOX',
	'REFRESH' => 'N',
	'DEFAULT' => "Y",
);162  831|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.bigdata.followup.mail/aspro_goods/lang/ru/.parameters.php|97ffc378<?if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED!==true) die();
$MESS["SALE_BASKET_TITLE"] = " ";
$MESS["SALE_BASKET_TEXT"] = "  ";
$MESS["SITE_ID_TITLE"] = "ID ";
$MESS["SITE_ID_TIP"] = "  ID     ";
$MESS["SITE_ADDRESS_TITLE"] = " ";
$MESS["SITE_ADDRESS_TIP"] = "         ";
$MESS["THEME_COLOR_TITLE"] = "  ";
$MESS["SHOW_CATALOG_TITLE"] = "   ";
$MESS["CATALOG_PAGE_TITLE"] = "  ";162  831|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.bigdata.followup.mail/aspro_goods/lang/en/.parameters.php|97ffc378<?if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED!==true) die();
$MESS["SALE_BASKET_TITLE"] = " ";
$MESS["SALE_BASKET_TEXT"] = "  ";
$MESS["SITE_ID_TITLE"] = "ID ";
$MESS["SITE_ID_TIP"] = "  ID     ";
$MESS["SITE_ADDRESS_TITLE"] = " ";
$MESS["SITE_ADDRESS_TIP"] = "         ";
$MESS["THEME_COLOR_TITLE"] = "  ";
$MESS["SHOW_CATALOG_TITLE"] = "   ";
$MESS["CATALOG_PAGE_TITLE"] = "  ";163  2630|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.basket.basket.small.mail/aspro_basket/result_modifier.php|894b0b18<?
if(!defined("B_PROLOG_INCLUDED") && B_PROLOG_INCLUDED !== true) die();
if(!function_exists("showItems"))
{
	function showItems($arItems, $arHeaders, $allCurrency, $arParams)
	{
		foreach($arItems as $arItem):
			$arItem["PRICE"] = str_replace("-", "", $arItem["PRICE"]);?>
			<tr>
				<?foreach($arHeaders as $name):?>
					<td style="padding:18px 20px;border-bottom: 1px solid #e7e7e7;color:#666;font-size:13px;vertical-align:top;">
						<?if($name == "NAME"):?>
							<?if($arItem["PREVIEW_PICTURE"])
							{
								$img = CFile::ResizeImageGet($arItem["PREVIEW_PICTURE"], array("width" => 75, "height" => 75), BX_RESIZE_PROPORTIONAL_ALT);
								// $src= str_replace(array("//", ":/"), array("/", "://"), $arParams["SITE_ADDRESS"].$img["src"]);
							}?>
							<div class="item" <?=($arItem["PREVIEW_PICTURE"] ? 'style="position:relative; min-height:75px;font-size:0px;"' : '');?>>
								<?if($arItem["PREVIEW_PICTURE"]):?>
										<div class="img" style="display:inline-block;width:75px;text-align:center;height:75px;vertical-align:top;">
											<img src="<?=$img["src"];?>" alt="<?=$arItem[$name];?>" title="<?=$arItem[$name];?>" style="display: inline-block;vertical-align:middle;max-width:100%;max-height:100%;" />
										</div>
										<div style="padding-left:20px;display: inline-block;width: 107px;font-size:13px;vertical-align:top;">
								<?endif;?>
								<a style="color:<?=$arParams["THEME_COLOR"];?>;" href="<?=(str_replace(array("//", ":/"), array("/", "://"), $arParams["SITE_ADDRESS"].$arItem["DETAIL_PAGE_URL"]));?>"><?=$arItem[$name];?></a>

								<?if($arResult["GRID"]["HEADERS"]):?>
									<div style="color:#888;font-size:12px;padding-top:10px;padding-bottom:10px;">
										<?foreach ($arResult["GRID"]["HEADERS"] as $id => $arHeader)
										{
											if(isset($arItem[$arHeader['id']]) && !empty($arItem[$arHeader['id']])):?>
												<div><?=$arHeader['name']?>:&nbsp;<?=$arItem[$arHeader['id']]?></div>
											<?endif;
										}?>
									</div>
								<?endif;?>

								<?if($arItem["PREVIEW_PICTURE"]):?>
									</div>
								<?endif;?>
							</div>
						<?elseif($name == "DISCOUNT"):?>
							<?=CAllCurrencyLang::CurrencyFormat($arItem["PRICE"], $allCurrency);?>
						<?elseif($name == "SUMM"):?>
							<div style="font-weight:600;font-size:14px;color:#333333;"><?=CAllCurrencyLang::CurrencyFormat($arItem["PRICE"]*$arItem["QUANTITY"], $allCurrency);?></div>
						<?else:?>
							<?=$arItem[$name];?>
						<?endif;?>
					</td>
				<?endforeach;?>
			</tr>
		<?endforeach;
	}
}
?>156  4013|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.basket.basket.small.mail/aspro_basket/template.php|2f0006c4<?if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();
if ($arResult["ShowReady"]=="Y" || $arResult["ShowDelay"]=="Y" || $arResult["ShowSubscribe"]=="Y" || $arResult["ShowNotAvail"]=="Y"):
	$arHeaders = array("NAME", "DISCOUNT", "QUANTITY", "SUMM");
	foreach ($arResult["GRID"]["HEADERS"] as $id => $arHeader):
		$arHeader["name"] = (isset($arHeader["name"]) ? (string)$arHeader["name"] : '');
		if ($arHeader["name"] == '')
		{
			$arResult["GRID"]["HEADERS"][$id]["name"] = GetMessage("SALE_".$arHeader["id"]);
			if(strlen($arResult["GRID"]["HEADERS"][$id]["name"])==0)
				$arResult["GRID"]["HEADERS"][$id]["name"] = GetMessage("SALE_".str_replace("_FORMATED", "", $arHeader["id"]));
		}
		if(in_array(str_replace("_FORMATED", "", $arHeader["id"]), $arHeaders))
			unset($arResult["GRID"]["HEADERS"][$id]);
	endforeach;
// echo "<pre>"; print_R($arResult); echo "</pre>";
	$title = ($arParams["TITLE"] ? $arParams["TITLE"] : GetMessage("FORGOT_BASKET") );
	$allCurrency = CSaleLang::GetLangCurrency($arParams["SITE_ID"]);
	$summ = 0;
	if($arResult["ITEMS"]["AnDelCanBuy"] || $arResult["ITEMS"]["DelDelCanBuy"] || $arResult["ITEMS"]["nAnCanBuy"] || $arResult["ITEMS"]["ProdSubscribe"]):?>
		<div class="wrapper_block" style="padding:0px;">
			<div style="color:#1d2029;font-size:18px;padding: 22px 0px 18px;font-weight:600;"><?=$title;?></div>
			<div style="border: 1px solid #e7e7e7;border-bottom-width:0px;">
				<table class="sale_basket_small" style="margin: 0;padding: 0;min-width: 100%;border-collapse: collapse;">
					<thead>
						<tr style="background:#f7f7f7;">
							<?foreach($arHeaders as $name):?>
								<td style="white-space:nowrap;border-bottom: 1px solid #e7e7e7;padding: 7px 9px 8px 21px;font-size: 12px;line-height: 20px;background: none;color: #888;<?=($name == "NAME" ? 'width:45%' : '');?>"><?=GetMessage("SALE_HEADER_".$name);?></td>
							<?endforeach;?>
						</tr>
					</thead>
					<tbody>
						<?if($arResult["ShowReady"]=="Y" && $arResult["ITEMS"]["AnDelCanBuy"]):?>
							<?=showItems($arResult["ITEMS"]["AnDelCanBuy"], $arHeaders, $allCurrency, $arParams);?>
						<?endif;?>
						<?if ($arResult["ShowDelay"]=="Y" && $arResult["ITEMS"]["DelDelCanBuy"]):?>
							<tr><td colspan="4" style="padding:13px 20px 0px;font-size: 14px;font-weight:600;"><?= GetMessage("TSBS_DELAY") ?></td></tr>
							<?=showItems($arResult["ITEMS"]["DelDelCanBuy"], $arHeaders, $allCurrency, $arParams);?>
						<?endif;?>
						<?if ($arResult["ShowSubscribe"]=="Y" && $arResult["ITEMS"]["ProdSubscribe"]):?>
							<tr><td colspan="4" style="padding:13px 20px 0px;font-size: 14px;font-weight:600;"><?= GetMessage("TSBS_SUBSCRIBE") ?></td></tr>
							<?=showItems($arResult["ITEMS"]["ProdSubscribe"], $arHeaders, $allCurrency, $arParams);?>
						<?endif;?>
						<?if ($arResult["ShowNotAvail"]=="Y" && $arResult["ITEMS"]["nAnCanBuy"]):?>
							<tr><td colspan="4" style="padding:13px 20px 0px;font-size: 14px;font-weight:600;"><?= GetMessage("TSBS_UNAVAIL") ?></td></tr>
							<?=showItems($arResult["ITEMS"]["nAnCanBuy"], $arHeaders, $allCurrency, $arParams);?>
						<?endif;?>
					</tbody>
				</table>
			</div>
			<?foreach($arResult["ITEMS"] as $key => $arItemsGroup)
			{
				foreach($arItemsGroup as $key => $arItem)
				{
					$arItem["PRICE"] = str_replace("-", "", $arItem["PRICE"]);
					if($arItem["PRICE"])
						$summ += $arItem["PRICE"];
				}
			}?>
			<div style="text-align:center;">
				<div style="font-weight:600;color:#333333;font-size:16px;padding: 27px 0px 17px;"><?= GetMessage("SALE_TOTAL") ?> <?=CAllCurrencyLang::CurrencyFormat($summ, $allCurrency);?></div>
				<?if('' != $arParams["PATH_TO_BASKET"]):?>
					<a href="<?=$arParams["PATH_TO_BASKET"]?>" style="color:#fff;background:<?=$arParams["THEME_COLOR"];?>;padding:11px 19px;border-radius:3px;display: inline-block;">
						<?=($arParams["BASKET_PAGE"] ? $arParams["BASKET_PAGE"] : GetMessage("TSBS_2BASKET"));?>						
					</a>
				<?endif;?>
			</div>
		</div>
	<?endif;
endif;?>158  874|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.basket.basket.small.mail/aspro_basket/.parameters.php|4c8b5b8d<?
if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED!==true) die();

$arTemplateParameters['TITLE'] = array(
	'NAME' => GetMessage('SALE_BASKET_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => GetMessage('SALE_BASKET_TEXT'),
);
$arTemplateParameters['BASKET_PAGE'] = array(
	'NAME' => GetMessage('BASKET_PAGE_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => GetMessage('BASKET_PAGE_TEXT'),
);
$arTemplateParameters['SITE_ID'] = array(
	'NAME' => GetMessage('SITE_ID_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => "s1",
);
$arTemplateParameters['SITE_ADDRESS'] = array(
	'NAME' => GetMessage('SITE_ADDRESS_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => "",
);
$arTemplateParameters['THEME_COLOR'] = array(
	'NAME' => GetMessage('THEME_COLOR_TITLE'),
	'TYPE' => 'STRING',
	'REFRESH' => 'N',
	'DEFAULT' => "",
);164  1848|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.basket.basket.small.mail/aspro_basket/lang/ru/template.php|60546e5b<?
$MESS['FORGOT_BASKET'] = "   ";
$MESS['TSBS_READY'] = "   :";
$MESS['TSBS_PRICE'] = ":";
$MESS['TSBS_QUANTITY'] = ":";

$MESS['TSBS_2BASKET'] = "  ";
$MESS['TSBS_2ORDER'] = " ";
$MESS['TSBS_DELAY'] = " ";
$MESS['TSBS_UNAVAIL'] = "  ";
$MESS['TSBS_SUBSCRIBE'] = "";
$MESS["SALE_NAME"] = "";
$MESS["SALE_HEADER_NAME"] = "";
$MESS["SALE_PROPS"] = "";
$MESS["SALE_HEADER_DISCOUNT"] = "";
$MESS["SALE_HEADER_SUMM"] = "";
$MESS["SALE_PRICE"] = "";
$MESS["SALE_TYPE"] = " ";
$MESS["SALE_QUANTITY"] = "";
$MESS["SALE_HEADER_QUANTITY"] = "-";
$MESS["SALE_SUM"] = "";
$MESS["SALE_DELETE"] = "";
$MESS["SALE_DELAY"] = "";
$MESS["SALE_ADD_TO_BASKET"] = "  ";
$MESS["SALE_WEIGHT"] = "";
$MESS["SALE_TOTAL_WEIGHT"] = " :";
$MESS["SALE_WEIGHT_G"] = "";
$MESS["SALE_DELAYED_TITLE"] = "";
$MESS["SALE_UNAVAIL_TITLE"] = "  ";
$MESS["STB_ORDER_PROMT"] = "     ,   \" \".";
$MESS["STB_COUPON_PROMT"] = "    :";
$MESS["SALE_VAT"] = ":";
$MESS["SALE_VAT_EXCLUDED"] = " :";
$MESS["SALE_VAT_INCLUDED"] = "   :";
$MESS["SALE_TOTAL"] = ":";
$MESS["SALE_CONTENT_DISCOUNT"] = "";
$MESS["SALE_DISCOUNT"] = "";
?>166  817|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.basket.basket.small.mail/aspro_basket/lang/ru/.parameters.php|a7cd3564<?if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED!==true) die();
$MESS["SALE_BASKET_TITLE"] = " ";
$MESS["SALE_BASKET_TEXT"] = "   ";
$MESS["BASKET_PAGE_TITLE"] = "    ";
$MESS["BASKET_PAGE_TEXT"] = " ";
$MESS["SITE_ID_TITLE"] = "ID ";
$MESS["SITE_ID_TIP"] = "  ID     ";
$MESS["SITE_ADDRESS_TITLE"] = " ";
$MESS["SITE_ADDRESS_TIP"] = "         ";
$MESS["THEME_COLOR_TITLE"] = "  ";164  1848|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.basket.basket.small.mail/aspro_basket/lang/en/template.php|60546e5b<?
$MESS['FORGOT_BASKET'] = "   ";
$MESS['TSBS_READY'] = "   :";
$MESS['TSBS_PRICE'] = ":";
$MESS['TSBS_QUANTITY'] = ":";

$MESS['TSBS_2BASKET'] = "  ";
$MESS['TSBS_2ORDER'] = " ";
$MESS['TSBS_DELAY'] = " ";
$MESS['TSBS_UNAVAIL'] = "  ";
$MESS['TSBS_SUBSCRIBE'] = "";
$MESS["SALE_NAME"] = "";
$MESS["SALE_HEADER_NAME"] = "";
$MESS["SALE_PROPS"] = "";
$MESS["SALE_HEADER_DISCOUNT"] = "";
$MESS["SALE_HEADER_SUMM"] = "";
$MESS["SALE_PRICE"] = "";
$MESS["SALE_TYPE"] = " ";
$MESS["SALE_QUANTITY"] = "";
$MESS["SALE_HEADER_QUANTITY"] = "-";
$MESS["SALE_SUM"] = "";
$MESS["SALE_DELETE"] = "";
$MESS["SALE_DELAY"] = "";
$MESS["SALE_ADD_TO_BASKET"] = "  ";
$MESS["SALE_WEIGHT"] = "";
$MESS["SALE_TOTAL_WEIGHT"] = " :";
$MESS["SALE_WEIGHT_G"] = "";
$MESS["SALE_DELAYED_TITLE"] = "";
$MESS["SALE_UNAVAIL_TITLE"] = "  ";
$MESS["STB_ORDER_PROMT"] = "     ,   \" \".";
$MESS["STB_COUPON_PROMT"] = "    :";
$MESS["SALE_VAT"] = ":";
$MESS["SALE_VAT_EXCLUDED"] = " :";
$MESS["SALE_VAT_INCLUDED"] = "   :";
$MESS["SALE_TOTAL"] = ":";
$MESS["SALE_CONTENT_DISCOUNT"] = "";
$MESS["SALE_DISCOUNT"] = "";
?>166  817|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.basket.basket.small.mail/aspro_basket/lang/en/.parameters.php|a7cd3564<?if (!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED!==true) die();
$MESS["SALE_BASKET_TITLE"] = " ";
$MESS["SALE_BASKET_TEXT"] = "   ";
$MESS["BASKET_PAGE_TITLE"] = "    ";
$MESS["BASKET_PAGE_TEXT"] = " ";
$MESS["SITE_ID_TITLE"] = "ID ";
$MESS["SITE_ID_TIP"] = "  ID     ";
$MESS["SITE_ADDRESS_TITLE"] = " ";
$MESS["SITE_ADDRESS_TIP"] = "         ";
$MESS["THEME_COLOR_TITLE"] = "  ";152  72|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.basket.basket.small.mail/aspro_init/template.php|74fccf67<?if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();?>148  971|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.business.value.mail/aspro_mail/template.php|48242137<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();
/** @var array $arParams */
/** @var array $arResult */
/** @global CMain $APPLICATION */
/** @global CUser $USER */
/** @global CDatabase $DB */
/** @var CBitrixComponentTemplate $this */
/** @var string $templateName */
/** @var string $templateFile */
/** @var string $templateFolder */
/** @var string $componentPath */
/** @var CBitrixComponent $component */
//$this->setFrameMode(true);
?>
<div class="border_wrapper" style="color:#888888;font-size:14px;border:1px solid #e7e7e7;padding: 19px 20px 17px;margin-top:10px;margin-bottom:10px;">
	<?foreach($arResult["ITEMS"] as $item):
		if($arParams["DISPLAY_EMPTY"] != "Y" && !$item['VALUE']) continue;
	?>
		<div style="padding-bottom:5px;">
			<?if($arParams["DISPLAY_NAME"]!="N"):?><?=htmlspecialcharsbx($item['NAME'])?>: <?endif;?>
			<span style="color:#333333;"><?=htmlspecialcharsbx($item['VALUE'])?></span>
		</div>
	<?endforeach;?>
</div>151  371|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.business.value.mail/aspro_mail/.parameters.php|8260b0c8<?
if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true) die();

$arTemplateParameters = array(
	"DISPLAY_NAME" => Array(
		"NAME" => GetMessage('SALE_BVAL_MAIL_DISPLAY_NAME'),
		"TYPE" => "CHECKBOX",
		"DEFAULT" => "Y",
	),
	"DISPLAY_EMPTY" => Array(
		"NAME" => GetMessage('SALE_BVAL_MAIL_DISPLAY_EMPTY'),
		"TYPE" => "CHECKBOX",
		"DEFAULT" => "N",
	),
);
?>
159  172|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.business.value.mail/aspro_mail/lang/ru/.parameters.php|e40b6313<?
$MESS['SALE_BVAL_MAIL_DISPLAY_NAME'] = "  ";
$MESS['SALE_BVAL_MAIL_DISPLAY_EMPTY'] = "  ";
?>158  132|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.business.value.mail/aspro_mail/lang/en/.parameters.php|1471556<?
$MESS["SALE_BVAL_MAIL_DISPLAY_NAME"] = "Display field name";
$MESS["SALE_BVAL_MAIL_DISPLAY_EMPTY"] = "Also show empty fields";
?>159  142|/aspro.optimus/install/wizards/aspro/optimus/site/templates/.default/components/bitrix/sale.business.value.mail/aspro_mail/lang/de/.parameters.php|efd24887<?
$MESS["SALE_BVAL_MAIL_DISPLAY_NAME"] = "Name des Feldes anzeigen";
$MESS["SALE_BVAL_MAIL_DISPLAY_EMPTY"] = "Leere Felder auch anzeigen";
?>85   0|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_mail/styles.css|095   5478|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_mail/header.php|ac6c372c<?require_once($_SERVER['DOCUMENT_ROOT']."/bitrix/modules/aspro.optimus/classes/general/mailing_functions.php");?>
<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=<?=$arSite['CHARSET'];?>" />
		<style type="text/css">
			.wrapper_block{margin:0;padding:0;background:#f2f2f2;font-family:Arial, sans-serif;font-size:13px;color:#525c70;line-height:20px;}
			#bxStylistHeader, .bxBlockContentButton{background:<?=$bg_color;?>;}
		</style>
	</head>
	<body style="height:100% !important;margin:0;padding:0;font-family: Arial, Helvetica, sans-serif;width:100% !important;background: #f9f9f9;min-width:600px !important;">
		<!-- mail-wrap -->
		<div class="mail-wrap <?=$type_color;?>" style="width:100%;max-width: 600px;margin: 20px auto;overflow:hidden;border-radius: 3px;border:1px solid #dedede;background: #FFFFFF;">
			<center>
				<!-- top content -->
					<table class="mail-grid"   width="100%" border="0" cellpadding="0" cellspacing="0" align="center">
						<tr>
							<td id="bxStylistHeader" style="border-bottom:1px solid #dedede;margin-bottom:20px;padding-top: 26px;padding-right: 30px;padding-bottom: 26px;padding-left: 30px;background:#fff">
								<!-- 2 cell -->
								<table class="mail-grid"   width="100%" border="0" cellpadding="0" cellspacing="0" align="center">
									<tr>
										<td class="wrap_header" style="border-radius:2px 2px 0px 0px;font-size:0px;">
											<div class="inner_blocks" style="display:inline-block;vertical-align:middle;font-size:12px;width: auto !important;">
												<table class="mail-grid-cell" border="0" cellspacing="0" cellpadding="0" width="270px">
													<tr>
														<td data-bx-block-editor-place="leftColumnHeader">
															<!-- content -->
															<div data-bx-block-editor-block-type="image">
																<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockImage">
																	<tbody class="bxBlockOut">
																	<tr>
																		<td valign="top" class="bxBlockInn bxBlockInnImage">
																			<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
																				<tbody>
																				<tr>
																					<td valign="top" class="bxBlockPadding bxBlockContentImage" style="text-align: left">
																						<a href="/" class="link_img_logo" style="display: inline-block;zoom: 1;vertical-align: middle;margin: 0;background:<?=$bg_color_logo;?>">
																							<img style="display:block;" data-bx-editor-def-image="0" src="<?=$logo_src;?>" class="bxImage">
																						</a>
																					</td>
																				</tr>
																				</tbody>
																			</table>
																		</td>
																	</tr>
																	</tbody>
																</table>
															</div>
															<!-- /content -->
														</td>
													</tr>
												</table>
											</div>
											<div class="inner_blocks"  style="display:inline-block;vertical-align:middle;font-size:12px;width: auto !important;">
												<table class="mail-grid-cell" border="0" cellspacing="0" cellpadding="0" width="270px">
													<tr>
														<td data-bx-block-editor-place="rightColumnHeader" class="phone">
															<!-- content -->
															<div data-bx-block-editor-block-type="text">
																<table border="0" cellpadding="0" cellspacing="0" width="100%" class="bxBlockText">
																	<tbody class="bxBlockOut">
																	<tr>
																		<td valign="top" class="bxBlockInn bxBlockInnText">
																			<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
																				<tbody>
																				<tr>
																					<td valign="top" class="bxBlockPadding bxBlockContentText" style="font-size: 20px;text-align: right;vertical-align: middle;">
																						<div class="phone_block" style="position: relative;text-align: right !important;padding-top: 0px !important;">
																							<div class="phone_outer" style="border-radius: 100%;color: #000;background-color: <?=$theme_color;?>;font-size: 16px;margin: 2px 5px 0;width: 35px;height: auto;text-align: center;line-height: 26px;padding-top: 9px;padding-bottom: 0px;display: inline-block;vertical-align: top;">
																								<div class="phone" style="background:url(<?=$bg_image;?>) <?=$bg_phone_position;?> no-repeat;margin-right:0px;display: inline-block;width: 13px;height:20px;vertical-align: top;"></div>
																							</div>
																							<div class="phone_text" style="display: inline-block;vertical-align: top;">
																								<?=str_replace("<a", "<a style='text-decoration:none;color:#1d2029;font-size:18px;display: block;word-wrap: break-word;'", $phone);?>
																							</div>
																						</div>
																					</td>
																				</tr>
																				</tbody>
																			</table>
																		</td>
																	</tr>
																	</tbody>
																</table>
															</div>
															<!-- /content -->
														</td>
													</tr>
												</table>
											</div>
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				<!-- /top content -->
				
				<!-- main content -->
					<div class="main_content" style="padding-top:20px;padding-bottom:20px;">95   2774|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_mail/footer.php|ae6e40d6				</div>
				<!-- /main content -->
				
				<!-- bottom content -->
					<div>
						<?global $arIblocks;
						$tizer_iblock_id = ($arIblocks["aspro_optimus_content"]["aspro_optimus_tizers"][0] ? $arIblocks["aspro_optimus_content"]["aspro_optimus_tizers"][0] : 0);
						?>
						<div data-bx-block-editor-block-type="component">
							<?EventMessageThemeCompiler::includeComponent(
								"bitrix:news.list.mail",
								"aspro_tizers",
								Array(
									"ACTIVE_DATE_FORMAT" => "d.m.Y",
									"CACHE_FILTER" => "N",
									"CACHE_GROUPS" => "N",
									"CACHE_TIME" => "3600",
									"CACHE_TYPE" => "A",
									"CHECK_DATES" => "Y",
									"COMPOSITE_FRAME_MODE" => "A",
									"COMPOSITE_FRAME_TYPE" => "AUTO",
									"DETAIL_URL" => "",
									"DISPLAY_DATE" => "Y",
									"DISPLAY_NAME" => "Y",
									"DISPLAY_PICTURE" => "Y",
									"DISPLAY_PREVIEW_TEXT" => "Y",
									"FIELD_CODE" => array("", ""),
									"FILTER_NAME" => "",
									"HIDE_LINK_WHEN_NO_DETAIL" => "N",
									"FROM_TEMPLATE" => "Y",
									//"SITE_ADDRESS" => "%SITE_ADDRESS%",
									"IBLOCK_ID" => $tizer_iblock_id,
									"IBLOCK_TYPE" => "aspro_optimus_content",
									"INCLUDE_SUBSECTIONS" => "Y",
									"NEWS_COUNT" => "5",
									"PARENT_SECTION" => "",
									"PARENT_SECTION_CODE" => "",
									"PREVENT_SEND_IF_NO_NEWS" => "Y",
									"PREVIEW_TRUNCATE_LEN" => "",
									"PROPERTY_CODE" => array("", ""),
									"SENDER_CHAIN_ID" => "{#SENDER_CHAIN_ID#}",
									"SORT_BY1" => "ACTIVE_FROM",
									"SORT_BY2" => "SORT",
									"SORT_ORDER1" => "DESC",
									"SORT_ORDER2" => "ASC"
								),
								false
							);?>
						</div>
					</div>
				<!-- /bottom content -->
			</center>
		</div>
		<!-- /mail-wrap -->
		
		<!-- footer -->
			<div style="max-width: 600px;min-width:600px !important;width:100% !important;text-align:center;margin:0px auto;">
				<?global $copyright, $vk_social, $fb_social, $odn_social, $tw_social, $mail_social, $inst_social, $g_social, $y_social;?>
				<div style="color:#666666;font-size:13px;padding:10px 20px 0px 20px;"><?=date("Y")." ".$copyright;?></div>
				<div style="padding-bottom:30px;">
					<?EventMessageThemeCompiler::includeComponent(
						"aspro:social.info.optimus", 
						"mail", 
						array(
							"CACHE_TYPE" => "A",
							"CACHE_TIME" => "86400",
							"CACHE_GROUPS" => "N",
							"COMPONENT_TEMPLATE" => "mail",
							"VK" => $vk_social,
							"ODN" => $odn_social,
							"FACE" => $fb_social,
							"TWIT" => $tw_social,
							"MAIL" => $mail_social,
							"INST" => $inst_social,
							"GOOGLEPLUS" => $g_social,
							"YOUTUBE" => $y_social,
						),
						false
					);?>
				</div>
			</div>
		<!-- /footer -->
	</body>
</html>94   19|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_mail/.styles.php|50100078<?
return false;
?>99   169|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_mail/description.php|4a3d2750<?
$arTemplate = array (
  'NAME' => GetMessage('ASPRO_TEMPLATE'),
  'DESCRIPTION' => GetMessage('ASPRO_TEMPLATE_DESCRIPTION'),
  'SORT' => '',
  'TYPE' => 'mail',
);
?>94   0|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_mail/template_styles.css|0107  260|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_mail/lang/ru/description.php|7cf87a2a<?if(!defined("B_PROLOG_INCLUDED") && B_PROLOG_INCLUDED !== true) die();?>
<?$MESS["ASPRO_TEMPLATE"] = ":  ";
$MESS["ASPRO_TEMPLATE_DESCRIPTION"] = ":    ";107  260|/aspro.optimus/install/wizards/aspro/optimus/site/templates/aspro_mail/lang/en/description.php|7cf87a2a<?if(!defined("B_PROLOG_INCLUDED") && B_PROLOG_INCLUDED !== true) die();?>
<?$MESS["ASPRO_TEMPLATE"] = ":  ";
$MESS["ASPRO_TEMPLATE_DESCRIPTION"] = ":    ";92   12088|/aspro.optimus/install/wizards/aspro/optimus/site/services/sale/locations.php|53b31110<?
if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)
	die();

if(!CModule::IncludeModule('sale'))
	return;

$dbSite = CSite::GetByID(WIZARD_SITE_ID);
if($arSite = $dbSite -> Fetch())
	$lang = $arSite["LANGUAGE_ID"];
if(strlen($lang) <= 0)
	$lang = "ru";
$bRus = false;
if($lang == "ru")
	$bRus = true;

if($bRus || COption::GetOptionString("optimus", "wizard_installed", "N", WIZARD_SITE_ID) != "Y" || WIZARD_INSTALL_DEMO_DATA)
{
	$loc_file = $wizard->GetVar("locations_csv");


	$typeTableFreshEnough = false; 
	if($GLOBALS['DB']->Query("select DISPLAY_SORT from b_sale_loc_type WHERE 1=0", true))
		$typeTableFreshEnough = true;

	if(strlen($loc_file) > 0)
	{
		define('LOC_STEP_LENGTH', 20);

		if(\Bitrix\Main\Config\Option::get('sale', 'sale_locationpro_migrated', '') == 'Y') // CSaleLocation::isLocationProMigrated()
		{
			require($_SERVER['DOCUMENT_ROOT'].WIZARD_SERVICE_RELATIVE_PATH."/locations/pro/file_map.php");

			$file_url = 		$_SERVER['DOCUMENT_ROOT'].WIZARD_SERVICE_RELATIVE_PATH."/locations/pro/bundles/".$LOCATION_FILE_MAP[$loc_file];
			$type_file_url = 	$_SERVER['DOCUMENT_ROOT'].WIZARD_SERVICE_RELATIVE_PATH."/locations/pro/type".($typeTableFreshEnough ? '.v2' : '').".csv";
			$service_file_url = $_SERVER['DOCUMENT_ROOT'].WIZARD_SERVICE_RELATIVE_PATH."/locations/pro/externalservice.csv";

			if (isset($LOCATION_FILE_MAP[$loc_file]) && file_exists($file_url))
			{
				if(!isset($_SESSION["LOC_IMPORT_DESC"]) || ($file_url != $_SESSION["LOC_IMPORT_DESC"]['FILE']))
				{
					$_SESSION["LOC_IMPORT_DESC"] = array(
						'POS' => 0,
						'FILE' => $file_url,
						'TYPE_FILE' => $type_file_url,
						'SERVICE_FILE' => $service_file_url,
						'TIME_LIMIT' => LOC_STEP_LENGTH,
						'STEP' => 'import'
					);
				}

				$done = \Bitrix\Sale\Location\Import\ImportProcess::importFile($_SESSION["LOC_IMPORT_DESC"]);
				
				if($done)
				{
					unset($_SESSION["LOC_IMPORT_DESC"]);
					// go farther to other steps
				}
				else
				{
					$this->repeatCurrentService = true; // go to the next iteration of the same step
				}
			}
		}
		else
		{
			// DEPRECATED old location branch

			$time_limit = ini_get('max_execution_time');
			if ($time_limit < LOC_STEP_LENGTH) set_time_limit(LOC_STEP_LENGTH + 5);

			$start_time = time();
			$finish_time = $start_time + LOC_STEP_LENGTH;

			if(in_array($loc_file, array("loc_ussr.csv", "loc_ua.csv", "loc_kz.csv")))
				$file_url = $_SERVER['DOCUMENT_ROOT'].WIZARD_SERVICE_RELATIVE_PATH."/locations/ru/".$loc_file;
			else
				$file_url = $_SERVER['DOCUMENT_ROOT'].WIZARD_SERVICE_RELATIVE_PATH."/locations/".$loc_file;

			if (file_exists($file_url))
			{
				$bFinish = true;

				$arSysLangs = Array();
				$db_lang = CLangAdmin::GetList(($b="sort"), ($o="asc"), array("ACTIVE" => "Y"));
				while ($arLang = $db_lang->Fetch())
				{
					$arSysLangs[$arLang["LID"]] = $arLang["LID"];
				}

				$arLocations = array();
				$bSync = true;

				$dbLocations = CSaleLocation::GetList(array(), array(), false, false, array("ID", "COUNTRY_ID", "REGION_ID", "CITY_ID"));
				while ($arLoc = $dbLocations->Fetch())
				{
					$arLocations[$arLoc["ID"]] = $arLoc;
				}

				if (count($arLocations) <= 0)
					$bSync = false;

				include_once($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/main/classes/general/csv_data.php");

				$csvFile = new CCSVData();
				$csvFile->LoadFile($file_url);
				$csvFile->SetFieldsType("R");
				$csvFile->SetFirstHeader(false);
				$csvFile->SetDelimiter(",");

				$arRes = $csvFile->Fetch();
				if (is_array($arRes) && count($arRes) > 0 && strlen($arRes[0]) == 2)
				{
					$DefLang = $arRes[0];
					if (in_array($DefLang, $arSysLangs))
					{

						if (is_set($_SESSION["LOC_POS"]))
						{
							$csvFile->SetPos($_SESSION["LOC_POS"]);

							$CurCountryID = $_SESSION["CUR_COUNTRY_ID"];
							$CurRegionID = $_SESSION["CUR_REGION_ID"];
							$numCountries = $_SESSION["NUM_COUNTRIES"];
							$numRegiones = $_SESSION["NUM_REGIONES"];
							$numCities = $_SESSION["NUM_CITIES"];
							$numLocations = $_SESSION["NUM_LOCATIONS"];
						}
						else
						{
							$CurCountryID = 0;
							$CurRegionID = 0;
							$numCountries = 0;
							$numRegiones = 0;
							$numCities = 0;
							$numLocations = 0;
						}

						$tt = 0;
						while ($arRes = $csvFile->Fetch())
						{
							$type = strtoupper($arRes[0]);
							$tt++;
							$arArrayTmp = array();
							foreach($arRes as $ind => $value)
							{
								if ($ind%2 && isset($arSysLangs[$value]))
								{
									$arArrayTmp[$value] = array(
											"LID" => $value,
											"NAME" => $arRes[$ind + 1]
										);

									if ($value == $DefLang)
									{
										$arArrayTmp["NAME"] = $arRes[$ind + 1];
									}
								}
							}

							//country
							if (is_array($arArrayTmp) && strlen($arArrayTmp["NAME"])>0)
							{
								if ($type == "S")
								{
									$CurRegionID = null;
									$arRegionList = Array();
									$CurCountryID = null;
									$arContList = array();
									$LLL = 0;
									if ($bSync)
									{
										$db_contList = CSaleLocation::GetList(
											Array(),
											Array(
												"COUNTRY_NAME" => $arArrayTmp["NAME"],
												"LID" => $DefLang
											)
										);
										if ($arContList = $db_contList->Fetch())
										{
											$LLL = IntVal($arContList["ID"]);
											$CurCountryID = IntVal($arContList["COUNTRY_ID"]);
										}
									}

									if (IntVal($CurCountryID) <= 0)
									{
										$CurCountryID = CSaleLocation::AddCountry($arArrayTmp);
										$CurCountryID = IntVal($CurCountryID);
										if ($CurCountryID>0)
										{
											$numCountries++;
											if(IntVal($LLL) <= 0)
											{
												$LLL = CSaleLocation::AddLocation(array("COUNTRY_ID" => $CurCountryID));
												if (IntVal($LLL)>0) $numLocations++;
											}
										}
									}
								}
								elseif ($type == "R") //region
								{
									$CurRegionID = null;
									$arRegionList = Array();
									$LLL = 0;
									if ($bSync)
									{
										$db_rengList = CSaleLocation::GetList(
											Array(),
											Array(
												"COUNTRY_ID" => $CurCountryID,
												"REGION_NAME"=>$arArrayTmp["NAME"],
												"LID" => $DefLang
											)
										);
										if ($arRegionList = $db_rengList->Fetch())
										{
											$LLL = $arRegionList["ID"];
											$CurRegionID = IntVal($arRegionList["REGION_ID"]);
										}
									}

									if (IntVal($CurRegionID) <= 0)
									{
										$CurRegionID = CSaleLocation::AddRegion($arArrayTmp);
										$CurRegionID = IntVal($CurRegionID);
										if ($CurRegionID > 0)
										{
											$numRegiones++;
											if (IntVal($LLL) <= 0)
											{
												$LLL = CSaleLocation::AddLocation(array("COUNTRY_ID" => $CurCountryID, "REGION_ID" => $CurRegionID));
												if (IntVal($LLL)>0) $numLocations++;
											}
										}
									}
								}
								elseif ($type == "T" && IntVal($CurCountryID)>0) //city
								{
									$city_id = 0;
									$LLL = 0;
									$arCityList = Array();

									if ($bSync)
									{
										$arFilter = Array(
												"COUNTRY_ID" => $CurCountryID,
												"CITY_NAME" => $arArrayTmp["NAME"],
												"LID" => $DefLang
											);
										if(IntVal($CurRegionID) > 0)
											$arFilter["REGION_ID"] = $CurRegionID;

										$db_cityList = CSaleLocation::GetList(
											Array(),
											$arFilter
										);
										if ($arCityList = $db_cityList->Fetch())
										{
											$LLL = $arCityList["ID"];
											$city_id = IntVal($arCityList["CITY_ID"]);
										}
									}

									if ($city_id <= 0)
									{
										$city_id = CSaleLocation::AddCity($arArrayTmp);
										$city_id = IntVal($city_id);
										if ($city_id > 0)
											$numCities++;
									}

									if ($city_id > 0)
									{
										if (IntVal($LLL) <= 0)
										{
											$LLL = CSaleLocation::AddLocation(
												array(
													"COUNTRY_ID" => $CurCountryID,
													"REGION_ID" => $CurRegionID,
													"CITY_ID" => $city_id
												));

											if (intval($LLL) > 0) $numLocations++;
										}
									}
								}
							}

							if($tt == 10)
							{
								$tt = 0;
								$cur_time = time();

								if ($cur_time >= $finish_time)
								{
									$cur_step = $csvFile->GetPos();
									$amount = $csvFile->iFileLength;

									$_SESSION["LOC_POS"] = $cur_step;
									$_SESSION["CUR_COUNTRY_ID"] = $CurCountryID;
									$_SESSION["CUR_REGION_ID"] = $CurRegionID;
									$_SESSION["NUM_COUNTRIES"] = $numCountries;
									$_SESSION["NUM_REGIONES"] = $numRegiones;
									$_SESSION["NUM_CITIES"] = $numCities;
									$_SESSION["NUM_LOCATIONS"] = $numLocations;

									$this->repeatCurrentService = true;

									$bFinish = false;
								}
							}
						}
					}
				}

				if ($bFinish)
					unset($_SESSION["LOC_POS"]);
				else
					return true;

				$time_limit = ini_get('max_execution_time');
				if ($time_limit < LOC_STEP_LENGTH) set_time_limit(LOC_STEP_LENGTH + 5);

				$start_time = time();
				$finish_time = $start_time + LOC_STEP_LENGTH;

				if ($loc_file == "loc_ussr.csv" && file_exists($_SERVER['DOCUMENT_ROOT'].WIZARD_SERVICE_RELATIVE_PATH."/locations/ru/zip_ussr.csv"))
				{
					$rsLocations = CSaleLocation::GetList(array(), array("LID" => 'ru'), false, false, array("ID", "CITY_NAME_LANG", "REGION_NAME_LANG"));
					$arLocationMap = array();
					while ($arLocation = $rsLocations->Fetch())
					{
						if(strlen($arLocation["CITY_NAME_LANG"]) > 0)
						{
							if(strlen($arLocation["REGION_NAME_LANG"]) > 0)
								$arLocationMap[$arLocation["CITY_NAME_LANG"]][$arLocation["REGION_NAME_LANG"]] = $arLocation["ID"];
							else
								$arLocationMap[$arLocation["CITY_NAME_LANG"]] = $arLocation["ID"];
						}
					}

					$DB->StartTransaction();

					include_once($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/main/classes/general/csv_data.php");

					$csvFile = new CCSVData();
					$csvFile->LoadFile($_SERVER['DOCUMENT_ROOT'].WIZARD_SERVICE_RELATIVE_PATH."/locations/ru/zip_ussr.csv");
					$csvFile->SetFieldsType("R");
					$csvFile->SetFirstHeader(false);
					$csvFile->SetDelimiter(";");

					if (is_set($_SESSION, 'ZIP_POS'))
					{
						$numZIP = $_SESSION["NUM_ZIP"];
						$csvFile->SetPos($_SESSION["ZIP_POS"]);
					}
					else
					{
						CSaleLocation::ClearAllLocationZIP();

						unset($_SESSION["NUM_ZIP"]);
						$numZIP = 0;
					}

					$bFinish = true;
					$arLocationsZIP = array();
					$tt = 0;
					$REGION = "";
					while ($arRes = $csvFile->Fetch())
					{
						$tt++;
						$CITY = $arRes[1];
						if(strlen($arRes[3]) > 0)
							$REGION = $arRes[3];

						if (array_key_exists($CITY, $arLocationMap))
						{
							if(strlen($REGION) > 0)
								$ID = $arLocationMap[$CITY][$REGION];
							else
								$ID = $arLocationMap[$CITY];
						}
						else
						{
							$ID = 0;
						}

						if ($ID)
						{
							CSaleLocation::AddLocationZIP($ID, $arRes[2]);

							$numZIP++;
						}

						if($tt == 10)
						{
							$tt = 0;

							$cur_time = time();
							if ($cur_time >= $finish_time)
							{
								$cur_step = $csvFile->GetPos();
								$amount = $csvFile->iFileLength;

								$_SESSION["ZIP_POS"] = $cur_step;
								$_SESSION["NUM_ZIP"] = $numZIP;

								$bFinish = false;

								$this->repeatCurrentService = true;

							}
						}
					}

					$DB->Commit();

					if ($bFinish)
						unset($_SESSION["ZIP_POS"]);
					else
						return true;
				}
			}

		}
	}
}
?>88   96568|/aspro.optimus/install/wizards/aspro/optimus/site/services/sale/step1.php|cf7eec74<?
if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)
	die();

if(!CModule::IncludeModule('sale'))
	return;

use	Bitrix\Sale\BusinessValue,
	Bitrix\Sale\OrderStatus,
	Bitrix\Sale\DeliveryStatus,
	Bitrix\Main\Localization\Loc;

include_once $_SERVER['DOCUMENT_ROOT'].'/bitrix/modules/sale/install/index.php';
$saleObject = new sale;
$saleVersion = $saleObject->MODULE_VERSION;
if (version_compare($saleVersion, '15.0.0', '>='))
{
	$BIZVAL_INDIVIDUAL_DOMAIN = BusinessValue::INDIVIDUAL_DOMAIN;
	$BIZVAL_ENTITY_DOMAIN = BusinessValue::ENTITY_DOMAIN;
}
else
{
	$BIZVAL_INDIVIDUAL_DOMAIN = null;
	$BIZVAL_ENTITY_DOMAIN = null;
}

if (COption::GetOptionString("catalog", "1C_GROUP_PERMISSIONS") == "")
	COption::SetOptionString("catalog", "1C_GROUP_PERMISSIONS", "1", GetMessage('SALE_1C_GROUP_PERMISSIONS'));

$arGeneralInfo = Array();

$dbSite = CSite::GetByID(WIZARD_SITE_ID);
if($arSite = $dbSite -> Fetch())
	$lang = $arSite["LANGUAGE_ID"];
if(strlen($lang) <= 0)
	$lang = "ru";
$bRus = false;
if($lang == "ru")
	$bRus = true;

$shopLocalization = $wizard->GetVar("shopLocalization");

COption::SetOptionString("optimus", "shopLocalization", $shopLocalization, "ru", WIZARD_SITE_ID);
if ($shopLocalization == "kz" || $shopLocalization == "bl")
	$shopLocalization = "ru";

$defCurrency = "EUR";
if($lang == "ru")
{
	if ($shopLocalization == "ua")
		$defCurrency = "UAH";
	elseif($shopLocalization == "bl")
		$defCurrency = "BYR";
	else
		$defCurrency = "RUB";
}
elseif($lang == "en")
{
	$defCurrency = "USD";
}

$arLanguages = Array();
$rsLanguage = CLanguage::GetList($by, $order, array());
while($arLanguage = $rsLanguage->Fetch())
	$arLanguages[] = $arLanguage["LID"];

WizardServices::IncludeServiceLang("step1.php", $lang);

if($bRus || COption::GetOptionString("optimus", "wizard_installed", "N", WIZARD_SITE_ID) != "Y" || WIZARD_INSTALL_DEMO_DATA)
{
	$personType = $wizard->GetVar("personType");
	$paysystem = $wizard->GetVar("paysystem");

	if ($shopLocalization == "ru")
	{
		if (CSaleLang::GetByID(WIZARD_SITE_ID))
			CSaleLang::Update(WIZARD_SITE_ID, array("LID" => WIZARD_SITE_ID, "CURRENCY" => "RUB"));
		else
			CSaleLang::Add(array("LID" => WIZARD_SITE_ID, "CURRENCY" => "RUB"));

		$shopLocation = $wizard->GetVar("shopLocation");
		COption::SetOptionString("optimus", "shopLocation", $shopLocation, false, WIZARD_SITE_ID);
		$shopOfName = $wizard->GetVar("shopOfName");
		COption::SetOptionString("optimus", "shopOfName", $shopOfName, false, WIZARD_SITE_ID);
		$shopAdr = $wizard->GetVar("shopAdr");
		COption::SetOptionString("optimus", "shopAdr", $shopAdr, false, WIZARD_SITE_ID);

		$shopINN = $wizard->GetVar("shopINN");
		COption::SetOptionString("optimus", "shopINN", $shopINN, false, WIZARD_SITE_ID);
		$shopKPP = $wizard->GetVar("shopKPP");
		COption::SetOptionString("optimus", "shopKPP", $shopKPP, false, WIZARD_SITE_ID);
		$shopNS = $wizard->GetVar("shopNS");
		COption::SetOptionString("optimus", "shopNS", $shopNS, false, WIZARD_SITE_ID);
		$shopBANK = $wizard->GetVar("shopBANK");
		COption::SetOptionString("optimus", "shopBANK", $shopBANK, false, WIZARD_SITE_ID);
		$shopBANKREKV = $wizard->GetVar("shopBANKREKV");
		COption::SetOptionString("optimus", "shopBANKREKV", $shopBANKREKV, false, WIZARD_SITE_ID);
		$shopKS = $wizard->GetVar("shopKS");
		COption::SetOptionString("optimus", "shopKS", $shopKS, false, WIZARD_SITE_ID);
		$siteStamp = $wizard->GetVar("siteStamp");
		if ($siteStamp == "" )
			$siteStamp = COption::GetOptionString("optimus", "siteStamp", "", WIZARD_SITE_ID);
	}
	elseif ($shopLocalization == "ua")
	{
		if (CSaleLang::GetByID(WIZARD_SITE_ID))
			CSaleLang::Update(WIZARD_SITE_ID, array("LID" => WIZARD_SITE_ID, "CURRENCY" => "UAH"));
		else
			CSaleLang::Add(array("LID" => WIZARD_SITE_ID, "CURRENCY" => "UAH"));

		$shopLocation = $wizard->GetVar("shopLocation_ua");
		COption::SetOptionString("optimus", "shopLocation_ua", $shopLocation, false, WIZARD_SITE_ID);
		$shopOfName = $wizard->GetVar("shopOfName_ua");
		COption::SetOptionString("optimus", "shopOfName_ua", $shopOfName, false, WIZARD_SITE_ID);
		$shopAdr = $wizard->GetVar("shopAdr_ua");
		COption::SetOptionString("optimus", "shopAdr_ua", $shopAdr, false, WIZARD_SITE_ID);

		$shopEGRPU_ua = $wizard->GetVar("shopEGRPU_ua");
		COption::SetOptionString("optimus", "shopEGRPU_ua", $shopEGRPU_ua, false, WIZARD_SITE_ID);
		$shopINN_ua = $wizard->GetVar("shopINN_ua");
		COption::SetOptionString("optimus", "shopINN_ua", $shopINN_ua, false, WIZARD_SITE_ID);
		$shopNDS_ua = $wizard->GetVar("shopNDS_ua");
		COption::SetOptionString("optimus", "shopNDS_ua", $shopNDS_ua, false, WIZARD_SITE_ID);
		$shopNS_ua = $wizard->GetVar("shopNS_ua");
		COption::SetOptionString("optimus", "shopNS_ua", $shopNS_ua, false, WIZARD_SITE_ID);
		$shopBank_ua = $wizard->GetVar("shopBank_ua");
		COption::SetOptionString("optimus", "shopBank_ua", $shopBank_ua, false, WIZARD_SITE_ID);
		$shopMFO_ua = $wizard->GetVar("shopMFO_ua");
		COption::SetOptionString("optimus", "shopMFO_ua", $shopMFO_ua, false, WIZARD_SITE_ID);
		$shopPlace_ua = $wizard->GetVar("shopPlace_ua");
		COption::SetOptionString("optimus", "shopPlace_ua", $shopPlace_ua, false, WIZARD_SITE_ID);
		$shopFIO_ua = $wizard->GetVar("shopFIO_ua");
		COption::SetOptionString("optimus", "shopFIO_ua", $shopFIO_ua, false, WIZARD_SITE_ID);
		$shopTax_ua = $wizard->GetVar("shopTax_ua");
		COption::SetOptionString("optimus", "shopTax_ua", $shopTax_ua, false, WIZARD_SITE_ID);
	}

	$siteTelephone = $wizard->GetVar("siteTelephone");
	COption::SetOptionString("optimus", "siteTelephone", $siteTelephone, false, WIZARD_SITE_ID);
	$shopEmail = $wizard->GetVar("shopEmail");
	COption::SetOptionString("optimus", "shopEmail", $shopEmail, false, WIZARD_SITE_ID);
	$siteName = $wizard->GetVar("siteName");
	COption::SetOptionString("optimus", "siteName", $siteName, false, WIZARD_SITE_ID);

	$obSite = new CSite;
	$obSite->Update(WIZARD_SITE_ID, Array(
			"EMAIL" => $shopEmail,
			"SITE_NAME" => $siteName,
			"SERVER_NAME" => $_SERVER["SERVER_NAME"],
		));

	if(strlen($siteStamp)>0)
	{
		if(IntVal($siteStamp) > 0)
		{
			$ff = CFile::GetByID($siteStamp);
			if($zr = $ff->Fetch())
			{
				$strOldFile = str_replace("//", "/", WIZARD_SITE_ROOT_PATH."/".(COption::GetOptionString("main", "upload_dir", "upload"))."/".$zr["SUBDIR"]."/".$zr["FILE_NAME"]);
				@copy($strOldFile, WIZARD_SITE_PATH."include/stamp.gif");
				CFile::Delete($zr["ID"]);
				$siteStamp = WIZARD_SITE_DIR."include/stamp.gif";
				COption::SetOptionString("optimus", "siteStamp", $siteStamp, false, WIZARD_SITE_ID);
			}
		}
	}
	else
	{
		$siteStamp = "/bitrix/templates/".WIZARD_TEMPLATE_ID."_".WIZARD_THEME_ID."/images/pechat.gif";
	}

	$arPersonTypeNames = array();
	$dbPerson = CSalePersonType::GetList(array(), array("LID" => WIZARD_SITE_ID));
	//if(!$dbPerson->Fetch())//if there are no data in module
	//{
	while ($arPerson = $dbPerson->Fetch())
	{
		$arPersonTypeNames[$arPerson["ID"]] = $arPerson["NAME"];
	}
	//Person Types
	if(!$bRus)
	{
		$personType["fiz"] = "Y";
		$personType["ur"] = "N";
	}

	$fizExist = in_array(GetMessage("SALE_WIZARD_PERSON_1"), $arPersonTypeNames);
	$urExist = in_array(GetMessage("SALE_WIZARD_PERSON_2"), $arPersonTypeNames);
	$fizUaExist = in_array(GetMessage("SALE_WIZARD_PERSON_3"), $arPersonTypeNames);

	$personTypeFiz = (isset($personType["fiz"]) && $personType["fiz"] == "Y" ? "Y" : "N");
	COption::SetOptionString("optimus", "personTypeFiz", $personTypeFiz, false, WIZARD_SITE_ID);
	$personTypeUr = (isset($personType["ur"]) && $personType["ur"] == "Y" ? "Y" : "N");
	COption::SetOptionString("optimus", "personTypeUr", $personTypeUr, false, WIZARD_SITE_ID);

	if (in_array(GetMessage("SALE_WIZARD_PERSON_1"), $arPersonTypeNames))
	{
		$arGeneralInfo["personType"]["fiz"] = array_search(GetMessage("SALE_WIZARD_PERSON_1"), $arPersonTypeNames);
		CSalePersonType::Update(array_search(GetMessage("SALE_WIZARD_PERSON_1"), $arPersonTypeNames), Array(
				"ACTIVE" => $personTypeFiz,
			)
		);
	}
	elseif($personTypeFiz == "Y")
	{
		$arGeneralInfo["personType"]["fiz"] = CSalePersonType::Add(Array(
					"LID" => WIZARD_SITE_ID,
					"NAME" => GetMessage("SALE_WIZARD_PERSON_1"),
					"SORT" => "100"
					)
				);
	}

	if (in_array(GetMessage("SALE_WIZARD_PERSON_2"), $arPersonTypeNames))
	{
		$arGeneralInfo["personType"]["ur"] = array_search(GetMessage("SALE_WIZARD_PERSON_2"), $arPersonTypeNames);
		CSalePersonType::Update(array_search(GetMessage("SALE_WIZARD_PERSON_2"), $arPersonTypeNames), Array(
				"ACTIVE" => $personTypeUr,
			)
		);
	}
	elseif($personTypeUr == "Y")
	{
		$arGeneralInfo["personType"]["ur"] = CSalePersonType::Add(Array(
					"LID" => WIZARD_SITE_ID,
					"NAME" => GetMessage("SALE_WIZARD_PERSON_2"),
					"SORT" => "150"
					)
				);
	}

	if ($shopLocalization == "ua")
	{
		$personTypeFizUa = (isset($personType["fiz_ua"]) && $personType["fiz_ua"] == "Y" ? "Y" : "N");
		COption::SetOptionString("optimus", "personTypeFizUa", $personTypeFizUa, false, WIZARD_SITE_ID);

		if (in_array(GetMessage("SALE_WIZARD_PERSON_3"), $arPersonTypeNames))
		{
			$arGeneralInfo["personType"]["fiz_ua"] = array_search(GetMessage("SALE_WIZARD_PERSON_3"), $arPersonTypeNames);
			CSalePersonType::Update(array_search(GetMessage("SALE_WIZARD_PERSON_3"), $arPersonTypeNames), Array(
					"ACTIVE" => $personTypeFizUa,
				)
			);
		}
		elseif($personTypeFizUa == "Y")
		{
			$arGeneralInfo["personType"]["fiz_ua"] = CSalePersonType::Add(Array(
					"LID" => WIZARD_SITE_ID,
					"NAME" => GetMessage("SALE_WIZARD_PERSON_3"),
					"SORT" => "100"
				)
			);
		}
	}

	if (COption::GetOptionString("optimus", "wizard_installed", "N", WIZARD_SITE_ID) != "Y" || WIZARD_INSTALL_DEMO_DATA)
	{
			//Set options
			COption::SetOptionString('sale','default_currency',$defCurrency);
			COption::SetOptionString('sale','delete_after','30');
			COption::SetOptionString('sale','order_list_date','30');
			COption::SetOptionString('sale','MAX_LOCK_TIME','30');
			COption::SetOptionString('sale','GRAPH_WEIGHT','600');
			COption::SetOptionString('sale','GRAPH_HEIGHT','600');
			COption::SetOptionString('sale','path2user_ps_files','/bitrix/php_interface/include/sale_payment/');
			COption::SetOptionString('sale','lock_catalog','Y');
			COption::SetOptionString('sale','order_list_fields','ID,USER,PAY_SYSTEM,PRICE,STATUS,PAYED,PS_STATUS,CANCELED,BASKET');
			COption::SetOptionString('sale','GROUP_DEFAULT_RIGHT','D');
			COption::SetOptionString('sale','affiliate_param_name','partner');
			COption::SetOptionString('sale','show_order_sum','N');
			COption::SetOptionString('sale','show_order_product_xml_id','N');
			COption::SetOptionString('sale','show_paysystem_action_id','N');
			COption::SetOptionString('sale','affiliate_plan_type','N');
			if($bRus)
			{
				COption::SetOptionString('sale','1C_SALE_SITE_LIST',WIZARD_SITE_ID);
				COption::SetOptionString('sale','1C_EXPORT_PAYED_ORDERS','N');
				COption::SetOptionString('sale','1C_EXPORT_ALLOW_DELIVERY_ORDERS','N');
				COption::SetOptionString('sale','1C_EXPORT_FINAL_ORDERS','');
				COption::SetOptionString('sale','1C_FINAL_STATUS_ON_DELIVERY','F');
				COption::SetOptionString('sale','1C_REPLACE_CURRENCY',GetMessage("SALE_WIZARD_PS_BILL_RUB"));
				COption::SetOptionString('sale','1C_SALE_USE_ZIP','Y');
			}
			COption::SetOptionString('sale','weight_unit', GetMessage("SALE_WIZARD_WEIGHT_UNIT"), false, WIZARD_SITE_ID);
			COption::SetOptionString('sale','WEIGHT_different_set','N', false, WIZARD_SITE_ID);
			COption::SetOptionString('sale','ADDRESS_different_set','N');
			COption::SetOptionString('sale','measurement_path','/bitrix/modules/sale/measurements.php');
			COption::SetOptionString('sale','delivery_handles_custom_path','/bitrix/php_interface/include/sale_delivery/');
			if($bRus)
				COption::SetOptionString('sale','location_zip','101000');
			COption::SetOptionString('sale','weight_koef','1000', false, WIZARD_SITE_ID);

			COption::SetOptionString('sale','recalc_product_list','Y');
			COption::SetOptionString('sale','recalc_product_list_period','4');
			COption::SetOptionString('sale', 'order_email', $shopEmail);
			COption::SetOptionString('sale', 'encode_fuser_id', 'Y');

			if(!$bRus)
				$shopLocation = GetMessage("WIZ_CITY");

			if(\Bitrix\Main\Config\Option::get('sale', 'sale_locationpro_migrated', '') == 'Y')
			{
				$location = '';

				if(strlen($shopLocation))
				{
					// get city with name equal to $shopLocation
					$item = \Bitrix\Sale\Location\LocationTable::getList(array(
						'filter' => array(
							'=NAME.LANGUAGE_ID' => $lang,
							'=NAME.NAME' => $shopLocation,
							'=TYPE.CODE' => 'CITY'
						),
						'select' => array(
							'CODE'
						)
					))->fetch();

					if($item)
						$location = $item['CODE']; // city found, simply take it`s code an proceed with it
					else
					{
						// city were not found, create it

						require($_SERVER['DOCUMENT_ROOT'].WIZARD_SERVICE_RELATIVE_PATH."/locations/pro/country_codes.php");

						// due to some reasons, $shopLocalization is being changed at the beginning of the step,
						// but here we want to have real country selected, so introduce a new variable
						$shopCountry = $wizard->GetVar("shopLocalization");

						$countryCode = $LOCALIZATION_COUNTRY_CODE_MAP[$shopCountry];
						$countryId = false;

						if(strlen($countryCode))
						{
							// get country which matches the current localization
							$countryId = 0;
							$item = \Bitrix\Sale\Location\LocationTable::getList(array(
								'filter' => array(
									'=CODE' => $countryCode,
									'=TYPE.CODE' => 'COUNTRY'
								),
								'select' => array(
									'ID'
								)
							))->fetch();

							// country found
							if($item)
								$countryId = $item['ID'];
						}

						// at this point types must exist
						$types = array();
						$res = \Bitrix\Sale\Location\TypeTable::getList();
						while($item = $res->fetch())
							$types[$item['CODE']] = $item['ID'];

						if(isset($types['COUNTRY']) && isset($types['CITY']))
						{
							if(!$countryId)
							{
								// such country were not found, create it

								$data = array(
									'CODE' => 'demo_country_'.WIZARD_SITE_ID,
									'TYPE_ID' => $types['COUNTRY'],
									'NAME' => array()
								);
								foreach($arLanguages as $langID)
								{
									$data["NAME"][$langID] = array(
										'NAME' => GetMessage("WIZ_COUNTRY_".ToUpper($shopCountry))
									);
								}

								$res = \Bitrix\Sale\Location\LocationTable::add($data);
								if($res->isSuccess())
									$countryId = $res->getId();
							}

							if($countryId)
							{
								// ok, so country were created, now create demo-city

								$data = array(
									'CODE' => 'demo_city_'.WIZARD_SITE_ID,
									'TYPE_ID' => $types['CITY'],
									'NAME' => array(),
									'PARENT_ID' => $countryId
								);
								foreach($arLanguages as $langID)
								{
									$data["NAME"][$langID] = array(
										'NAME' => $shopLocation
									);
								}

								$res = \Bitrix\Sale\Location\LocationTable::add($data);
								if($res->isSuccess())
									$location = 'demo_city_'.WIZARD_SITE_ID;
							}

						}
					}
				}
			}
			else
			{
				$location = 0;
				$dbLocation = CSaleLocation::GetList(Array("ID" => "ASC"), Array("LID" => $lang, "CITY_NAME" => $shopLocation));
				if($arLocation = $dbLocation->Fetch())//if there are no data in module
				{
					$location = $arLocation["ID"];
				}
				if(IntVal($location) <= 0)
				{
					$CurCountryID = 0;
					$db_contList = CSaleLocation::GetList(
						Array(),
						Array(
							"COUNTRY_NAME" => GetMessage("WIZ_COUNTRY_".ToUpper($shopLocalization)),
							"LID" => $lang
						)
					);
					if ($arContList = $db_contList->Fetch())
					{
						$LLL = IntVal($arContList["ID"]);
						$CurCountryID = IntVal($arContList["COUNTRY_ID"]);
					}

					if(IntVal($CurCountryID) <= 0)
					{
						$arArrayTmp = Array();
						$arArrayTmp["NAME"] = GetMessage("WIZ_COUNTRY_".ToUpper($shopLocalization));
						foreach($arLanguages as $langID)
						{
							WizardServices::IncludeServiceLang("step1.php", $langID);
							$arArrayTmp[$langID] = array(
									"LID" => $langID,
									"NAME" => GetMessage("WIZ_COUNTRY_".ToUpper($shopLocalization))
								);
						}
						$CurCountryID = CSaleLocation::AddCountry($arArrayTmp);
					}

					$arArrayTmp = Array();
					$arArrayTmp["NAME"] = $shopLocation;
					foreach($arLanguages as $langID)
					{
						$arArrayTmp[$langID] = array(
								"LID" => $langID,
								"NAME" => $shopLocation
							);
					}
					$city_id = CSaleLocation::AddCity($arArrayTmp);

					$location = CSaleLocation::AddLocation(
						array(
							"COUNTRY_ID" => $CurCountryID,
							"CITY_ID" => $city_id
						));
					if($bRus)
						CSaleLocation::AddLocationZIP($location, "101000");

					WizardServices::IncludeServiceLang("step1.php", $lang);
				}

			}

			COption::SetOptionString('sale', 'location', $location);
	}
	//Order Prop Group
	if ($fizExist)
	{
		$dbSaleOrderPropsGroup = CSaleOrderPropsGroup::GetList(Array(), Array("PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"], "NAME" => GetMessage("SALE_WIZARD_PROP_GROUP_FIZ1")), false, false, array("ID"));
		if ($arSaleOrderPropsGroup = $dbSaleOrderPropsGroup->GetNext())
			$arGeneralInfo["propGroup"]["user_fiz"] = $arSaleOrderPropsGroup["ID"];

		$dbSaleOrderPropsGroup = CSaleOrderPropsGroup::GetList(Array(),Array("PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"], "NAME" => GetMessage("SALE_WIZARD_PROP_GROUP_FIZ2")), false, false, array("ID"));
		if ($arSaleOrderPropsGroup = $dbSaleOrderPropsGroup->GetNext())
			$arGeneralInfo["propGroup"]["adres_fiz"] = $arSaleOrderPropsGroup["ID"];

	}
	elseif($personType["fiz"] == "Y" )
	{
		$arGeneralInfo["propGroup"]["user_fiz"] = CSaleOrderPropsGroup::Add(Array("PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"], "NAME" => GetMessage("SALE_WIZARD_PROP_GROUP_FIZ1"), "SORT" => 100));
		$arGeneralInfo["propGroup"]["adres_fiz"] = CSaleOrderPropsGroup::Add(Array("PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"], "NAME" => GetMessage("SALE_WIZARD_PROP_GROUP_FIZ2"), "SORT" => 200));
	}

	if ($urExist)
	{
		$dbSaleOrderPropsGroup = CSaleOrderPropsGroup::GetList(Array(), Array("PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"], "NAME" => GetMessage("SALE_WIZARD_PROP_GROUP_UR1")), false, false, array("ID"));
		if ($arSaleOrderPropsGroup = $dbSaleOrderPropsGroup->GetNext())
			$arGeneralInfo["propGroup"]["user_ur"] = $arSaleOrderPropsGroup["ID"];

		$dbSaleOrderPropsGroup = CSaleOrderPropsGroup::GetList(Array(),Array("PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"], "NAME" => GetMessage("SALE_WIZARD_PROP_GROUP_UR2")), false, false, array("ID"));
		if ($arSaleOrderPropsGroup = $dbSaleOrderPropsGroup->GetNext())
			$arGeneralInfo["propGroup"]["adres_ur"] = $arSaleOrderPropsGroup["ID"];
	}
	elseif($personType["ur"] == "Y")
	{
		$arGeneralInfo["propGroup"]["user_ur"] = CSaleOrderPropsGroup::Add(Array("PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"], "NAME" => GetMessage("SALE_WIZARD_PROP_GROUP_UR1"), "SORT" => 300));
		$arGeneralInfo["propGroup"]["adres_ur"] = CSaleOrderPropsGroup::Add(Array("PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"], "NAME" => GetMessage("SALE_WIZARD_PROP_GROUP_UR2"), "SORT" => 400));
	}

	if($shopLocalization == "ua")
	{
		if ($fizUaExist)
		{
			$dbSaleOrderPropsGroup = CSaleOrderPropsGroup::GetList(Array(), Array("PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz_ua"], "NAME" => GetMessage("SALE_WIZARD_PROP_GROUP_FIZ1")), false, false, array("ID"));
			if ($arSaleOrderPropsGroup = $dbSaleOrderPropsGroup->GetNext())
				$arGeneralInfo["propGroup"]["user_fiz_ua"] = $arSaleOrderPropsGroup["ID"];

			$dbSaleOrderPropsGroup = CSaleOrderPropsGroup::GetList(Array(),Array("PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz_ua"], "NAME" => GetMessage("SALE_WIZARD_PROP_GROUP_FIZ2")), false, false, array("ID"));
			if ($arSaleOrderPropsGroup = $dbSaleOrderPropsGroup->GetNext())
				$arGeneralInfo["propGroup"]["adres_fiz_ua"] = $arSaleOrderPropsGroup["ID"];
		}
		elseif ($personType["fiz_ua"] == "Y")
		{
			$arGeneralInfo["propGroup"]["user_fiz_ua"] = CSaleOrderPropsGroup::Add(Array("PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz_ua"], "NAME" => GetMessage("SALE_WIZARD_PROP_GROUP_FIZ1"), "SORT" => 100));
			$arGeneralInfo["propGroup"]["adres_fiz_ua"] = CSaleOrderPropsGroup::Add(Array("PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz_ua"], "NAME" => GetMessage("SALE_WIZARD_PROP_GROUP_FIZ2"), "SORT" => 200));
		}
	}

	$businessValuePersonDomain = array();

	$businessValueGroups = array(
		'COMPANY'        => array('SORT' => 100),
		'CLIENT'         => array('SORT' => 200),
		'CLIENT_COMPANY' => array('SORT' => 300),
	);

	$businessValueCodes = array();

	$arProps = Array();

	if($personType["fiz"] == "Y")
	{
		$businessValuePersonDomain[$arGeneralInfo["personType"]["fiz"]] = $BIZVAL_INDIVIDUAL_DOMAIN;

		$businessValueCodes['CLIENT_NAME'] = array('GROUP' => 'CLIENT', 'SORT' =>  100, 'DOMAIN' => $BIZVAL_INDIVIDUAL_DOMAIN);
		$arProps[] = Array(
				"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"],
				"NAME" => GetMessage("SALE_WIZARD_PROP_6"),
				"TYPE" => "TEXT",
				"REQUIED" => "Y",
				"DEFAULT_VALUE" => "",
				"SORT" => 100,
				"USER_PROPS" => "Y",
				"IS_LOCATION" => "N",
				"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["user_fiz"],
				"SIZE1" => 40,
				"SIZE2" => 0,
				"DESCRIPTION" => "",
				"IS_EMAIL" => "N",
				"IS_PROFILE_NAME" => "Y",
				"IS_PAYER" => "Y",
				"IS_LOCATION4TAX" => "N",
				"CODE" => "FIO",
				"IS_FILTERED" => "Y",
			);

		$businessValueCodes['CLIENT_EMAIL'] = array('GROUP' => 'CLIENT', 'SORT' =>  110, 'DOMAIN' => $BIZVAL_INDIVIDUAL_DOMAIN);
		$arProps[] = Array(
				"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"],
				"NAME" => "E-Mail",
				"TYPE" => "TEXT",
				"REQUIED" => "Y",
				"DEFAULT_VALUE" => "",
				"SORT" => 110,
				"USER_PROPS" => "Y",
				"IS_LOCATION" => "N",
				"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["user_fiz"],
				"SIZE1" => 40,
				"SIZE2" => 0,
				"DESCRIPTION" => "",
				"IS_EMAIL" => "Y",
				"IS_PROFILE_NAME" => "N",
				"IS_PAYER" => "N",
				"IS_LOCATION4TAX" => "N",
				"CODE" => "EMAIL",
				"IS_FILTERED" => "Y",
			);

		$businessValueCodes['CLIENT_PHONE'] = array('GROUP' => 'CLIENT', 'SORT' =>  120, 'DOMAIN' => $BIZVAL_INDIVIDUAL_DOMAIN);
		$arProps[] = Array(
				"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"],
				"NAME" => GetMessage("SALE_WIZARD_PROP_9"),
				"TYPE" => "TEXT",
				"REQUIED" => "Y",
				"DEFAULT_VALUE" => "",
				"SORT" => 120,
				"USER_PROPS" => "Y",
				"IS_LOCATION" => "N",
				"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["user_fiz"],
				"SIZE1" => 0,
				"SIZE2" => 0,
				"DESCRIPTION" => "",
				"IS_EMAIL" => "N",
				"IS_PROFILE_NAME" => "N",
				"IS_PAYER" => "N",
				"IS_LOCATION4TAX" => "N",
				"CODE" => "PHONE",
				"IS_PHONE" => "Y",
				"IS_FILTERED" => "N",
			);

		$businessValueCodes['CLIENT_ZIP'] = array('GROUP' => 'CLIENT', 'SORT' =>  130, 'DOMAIN' => $BIZVAL_INDIVIDUAL_DOMAIN);
		$arProps[] = Array(
			"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"],
			"NAME" => GetMessage("SALE_WIZARD_PROP_4"),
			"TYPE" => "TEXT",
			"REQUIED" => "N",
			"DEFAULT_VALUE" => "101000",
			"SORT" => 130,
			"USER_PROPS" => "Y",
			"IS_LOCATION" => "N",
			"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_fiz"],
			"SIZE1" => 8,
			"SIZE2" => 0,
			"DESCRIPTION" => "",
			"IS_EMAIL" => "N",
			"IS_PROFILE_NAME" => "N",
			"IS_PAYER" => "N",
			"IS_LOCATION4TAX" => "N",
			"CODE" => "ZIP",
			"IS_FILTERED" => "N",
			"IS_ZIP" => "Y",
		);

		$businessValueCodes['CLIENT_CITY'] = array('GROUP' => 'CLIENT', 'SORT' =>  145, 'DOMAIN' => $BIZVAL_INDIVIDUAL_DOMAIN);
		$arProps[] = Array(
			"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"],
			"NAME" => GetMessage("SALE_WIZARD_PROP_21"),
			"TYPE" => "TEXT",
			"REQUIED" => "N",
			"DEFAULT_VALUE" => $shopLocation,
			"SORT" => 145,
			"USER_PROPS" => "Y",
			"IS_LOCATION" => "N",
			"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_fiz"],
			"SIZE1" => 40,
			"SIZE2" => 0,
			"DESCRIPTION" => "",
			"IS_EMAIL" => "N",
			"IS_PROFILE_NAME" => "N",
			"IS_PAYER" => "N",
			"IS_LOCATION4TAX" => "N",
			"CODE" => "CITY",
			"IS_FILTERED" => "Y",
		);

		$businessValueCodes['CLIENT_LOCATION'] = array('GROUP' => 'CLIENT', 'SORT' =>  140, 'DOMAIN' => $BIZVAL_INDIVIDUAL_DOMAIN);
		$arProps[] = Array(
			"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"],
			"NAME" => GetMessage("SALE_WIZARD_PROP_2"),
			"TYPE" => "LOCATION",
			"REQUIED" => "Y",
			"DEFAULT_VALUE" => $location,
			"SORT" => 140,
			"USER_PROPS" => "Y",
			"IS_LOCATION" => "Y",
			"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_fiz"],
			"SIZE1" => 40,
			"SIZE2" => 0,
			"DESCRIPTION" => "",
			"IS_EMAIL" => "N",
			"IS_PROFILE_NAME" => "N",
			"IS_PAYER" => "N",
			"IS_LOCATION4TAX" => "N",
			"CODE" => "LOCATION",
			"IS_FILTERED" => "N",
			"INPUT_FIELD_LOCATION" => ""
		);

		$businessValueCodes['CLIENT_ADDRESS'] = array('GROUP' => 'CLIENT', 'SORT' =>  150, 'DOMAIN' => $BIZVAL_INDIVIDUAL_DOMAIN);
		$arProps[] = Array(
				"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"],
				"NAME" => GetMessage("SALE_WIZARD_PROP_5"),
				"TYPE" => "TEXTAREA",
				"REQUIED" => "Y",
				"DEFAULT_VALUE" => "",
				"SORT" => 150,
				"USER_PROPS" => "Y",
				"IS_LOCATION" => "N",
				"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_fiz"],
				"SIZE1" => 30,
				"SIZE2" => 3,
				"DESCRIPTION" => "",
				"IS_EMAIL" => "N",
				"IS_PROFILE_NAME" => "N",
				"IS_PAYER" => "N",
				"IS_LOCATION4TAX" => "N",
				"CODE" => "ADDRESS",
				"IS_FILTERED" => "N",
			);
	}

	if($personType["ur"] == "Y")
	{
		$businessValuePersonDomain[$arGeneralInfo["personType"]["ur"]] = $BIZVAL_ENTITY_DOMAIN;

		if ($shopLocalization != "ua")
		{
			$businessValueCodes['COMPANY_NAME'] = array('GROUP' => 'COMPANY', 'SORT' =>  200, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
					"NAME" => GetMessage("SALE_WIZARD_PROP_8"),
					"TYPE" => "TEXT",
					"REQUIED" => "Y",
					"DEFAULT_VALUE" => "",
					"SORT" => 200,
					"USER_PROPS" => "Y",
					"IS_LOCATION" => "N",
					"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["user_ur"],
					"SIZE1" => 40,
					"SIZE2" => 0,
					"DESCRIPTION" => "",
					"IS_EMAIL" => "N",
					"IS_PROFILE_NAME" => "Y",
					"IS_PAYER" => "N",
					"IS_LOCATION4TAX" => "N",
					"CODE" => "COMPANY",
					"IS_FILTERED" => "Y",
				);

			$businessValueCodes['COMPANY_ADDRESS'] = array('GROUP' => 'COMPANY', 'SORT' =>  210, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
					"NAME" => GetMessage("SALE_WIZARD_PROP_7"),
					"TYPE" => "TEXTAREA",
					"REQUIED" => "N",
					"DEFAULT_VALUE" => "",
					"SORT" => 210,
					"USER_PROPS" => "Y",
					"IS_LOCATION" => "N",
					"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["user_ur"],
					"SIZE1" => 40,
					"SIZE2" => 0,
					"DESCRIPTION" => "",
					"IS_EMAIL" => "N",
					"IS_PROFILE_NAME" => "N",
					"IS_PAYER" => "N",
					"IS_LOCATION4TAX" => "N",
					"CODE" => "COMPANY_ADR",
					"IS_FILTERED" => "N",
				);

			$businessValueCodes['COMPANY_INN'] = array('GROUP' => 'COMPANY', 'SORT' =>  220, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
					"NAME" => GetMessage("SALE_WIZARD_PROP_13"),
					"TYPE" => "TEXT",
					"REQUIED" => "N",
					"DEFAULT_VALUE" => "",
					"SORT" => 220,
					"USER_PROPS" => "Y",
					"IS_LOCATION" => "N",
					"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["user_ur"],
					"SIZE1" => 0,
					"SIZE2" => 0,
					"DESCRIPTION" => "",
					"IS_EMAIL" => "N",
					"IS_PROFILE_NAME" => "N",
					"IS_PAYER" => "N",
					"IS_LOCATION4TAX" => "N",
					"CODE" => "INN",
					"IS_FILTERED" => "N",
				);

			$businessValueCodes['COMPANY_KPP'] = array('GROUP' => 'COMPANY', 'SORT' =>  230, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
					"NAME" => GetMessage("SALE_WIZARD_PROP_14"),
					"TYPE" => "TEXT",
					"REQUIED" => "N",
					"DEFAULT_VALUE" => "",
					"SORT" => 230,
					"USER_PROPS" => "Y",
					"IS_LOCATION" => "N",
					"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["user_ur"],
					"SIZE1" => 0,
					"SIZE2" => 0,
					"DESCRIPTION" => "",
					"IS_EMAIL" => "N",
					"IS_PROFILE_NAME" => "N",
					"IS_PAYER" => "N",
					"IS_LOCATION4TAX" => "N",
					"CODE" => "KPP",
					"IS_FILTERED" => "N",
				);

			$businessValueCodes['COMPANY_CONTACT_NAME'] = array('GROUP' => 'COMPANY', 'SORT' =>  240, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
					"NAME" => GetMessage("SALE_WIZARD_PROP_10"),
					"TYPE" => "TEXT",
					"REQUIED" => "Y",
					"DEFAULT_VALUE" => "",
					"SORT" => 240,
					"USER_PROPS" => "Y",
					"IS_LOCATION" => "N",
					"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_ur"],
					"SIZE1" => 0,
					"SIZE2" => 0,
					"DESCRIPTION" => "",
					"IS_EMAIL" => "N",
					"IS_PROFILE_NAME" => "N",
					"IS_PAYER" => "Y",
					"IS_LOCATION4TAX" => "N",
					"CODE" => "CONTACT_PERSON",
					"IS_FILTERED" => "N",
				);

			$businessValueCodes['COMPANY_EMAIL'] = array('GROUP' => 'COMPANY', 'SORT' =>  250, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
					"NAME" => "E-Mail",
					"TYPE" => "TEXT",
					"REQUIED" => "Y",
					"DEFAULT_VALUE" => "",
					"SORT" => 250,
					"USER_PROPS" => "Y",
					"IS_LOCATION" => "N",
					"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_ur"],
					"SIZE1" => 40,
					"SIZE2" => 0,
					"DESCRIPTION" => "",
					"IS_EMAIL" => "Y",
					"IS_PROFILE_NAME" => "N",
					"IS_PAYER" => "N",
					"IS_LOCATION4TAX" => "N",
					"CODE" => "EMAIL",
					"IS_FILTERED" => "N",
				);

			$businessValueCodes['COMPANY_PHONE'] = array('GROUP' => 'COMPANY', 'SORT' =>  260, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
					"NAME" => GetMessage("SALE_WIZARD_PROP_9"),
					"TYPE" => "TEXT",
					"REQUIED" => "N",
					"DEFAULT_VALUE" => "",
					"SORT" =>260,
					"USER_PROPS" => "Y",
					"IS_LOCATION" => "N",
					"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_ur"],
					"SIZE1" => 0,
					"SIZE2" => 0,
					"DESCRIPTION" => "",
					"IS_EMAIL" => "N",
					"IS_PROFILE_NAME" => "N",
					"IS_PAYER" => "N",
					"IS_LOCATION4TAX" => "N",
					"IS_PHONE" => "Y",
					"CODE" => "PHONE",
					"IS_FILTERED" => "N",
				);

			$businessValueCodes['COMPANY_FAX'] = array('GROUP' => 'COMPANY', 'SORT' =>  270, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
					"NAME" => GetMessage("SALE_WIZARD_PROP_11"),
					"TYPE" => "TEXT",
					"REQUIED" => "N",
					"DEFAULT_VALUE" => "",
					"SORT" => 270,
					"USER_PROPS" => "Y",
					"IS_LOCATION" => "N",
					"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_ur"],
					"SIZE1" => 0,
					"SIZE2" => 0,
					"DESCRIPTION" => "",
					"IS_EMAIL" => "N",
					"IS_PROFILE_NAME" => "N",
					"IS_PAYER" => "N",
					"IS_LOCATION4TAX" => "N",
					"CODE" => "FAX",
					"IS_FILTERED" => "N",
				);

			$businessValueCodes['COMPANY_ZIP'] = array('GROUP' => 'COMPANY', 'SORT' =>  280, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
					"NAME" => GetMessage("SALE_WIZARD_PROP_4"),
					"TYPE" => "TEXT",
					"REQUIED" => "N",
					"DEFAULT_VALUE" => "101000",
					"SORT" => 280,
					"USER_PROPS" => "Y",
					"IS_LOCATION" => "N",
					"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_ur"],
					"SIZE1" => 8,
					"SIZE2" => 0,
					"DESCRIPTION" => "",
					"IS_EMAIL" => "N",
					"IS_PROFILE_NAME" => "N",
					"IS_PAYER" => "N",
					"IS_LOCATION4TAX" => "N",
					"CODE" => "ZIP",
					"IS_FILTERED" => "N",
					"IS_ZIP" => "Y",
				);

			$businessValueCodes['COMPANY_CITY'] = array('GROUP' => 'COMPANY', 'SORT' =>  285, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
				"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
				"NAME" => GetMessage("SALE_WIZARD_PROP_21"),
				"TYPE" => "TEXT",
				"REQUIED" => "N",
				"DEFAULT_VALUE" => $shopLocation,
				"SORT" => 285,
				"USER_PROPS" => "Y",
				"IS_LOCATION" => "N",
				"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_ur"],
				"SIZE1" => 40,
				"SIZE2" => 0,
				"DESCRIPTION" => "",
				"IS_EMAIL" => "N",
				"IS_PROFILE_NAME" => "N",
				"IS_PAYER" => "N",
				"IS_LOCATION4TAX" => "N",
				"CODE" => "CITY",
				"IS_FILTERED" => "Y",
			);

			$businessValueCodes['COMPANY_LOCATION'] = array('GROUP' => 'COMPANY', 'SORT' =>  290, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
					"NAME" => GetMessage("SALE_WIZARD_PROP_2"),
					"TYPE" => "LOCATION",
					"REQUIED" => "Y",
					"DEFAULT_VALUE" => "",
					"SORT" => 290,
					"USER_PROPS" => "Y",
					"IS_LOCATION" => "Y",
					"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_ur"],
					"SIZE1" => 40,
					"SIZE2" => 0,
					"DESCRIPTION" => "",
					"IS_EMAIL" => "N",
					"IS_PROFILE_NAME" => "N",
					"IS_PAYER" => "N",
					"IS_LOCATION4TAX" => "Y",
					"CODE" => "LOCATION",
					"IS_FILTERED" => "N",
				);

			$businessValueCodes['COMPANY_OPERATION_ADDRESS'] = array('GROUP' => 'COMPANY', 'SORT' =>  300, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
					"NAME" => GetMessage("SALE_WIZARD_PROP_12"),
					"TYPE" => "TEXTAREA",
					"REQUIED" => "Y",
					"DEFAULT_VALUE" => "",
					"SORT" => 300,
					"USER_PROPS" => "Y",
					"IS_LOCATION" => "N",
					"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_ur"],
					"SIZE1" => 30,
					"SIZE2" => 10,
					"DESCRIPTION" => "",
					"IS_EMAIL" => "N",
					"IS_PROFILE_NAME" => "N",
					"IS_PAYER" => "N",
					"IS_LOCATION4TAX" => "N",
					"CODE" => "ADDRESS",
					"IS_FILTERED" => "N",
				);
		}
		else
		{
			/*
			$businessValueCodes['COMPANY_CONTACT_NAME'] = array('GROUP' => 'COMPANY', 'SORT' =>  100, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
				"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
				"NAME" => GetMessage("SALE_WIZARD_PROP_41"),
				"TYPE" => "TEXT",
				"REQUIED" => "Y",
				"DEFAULT_VALUE" => "",
				"SORT" => 100,
				"USER_PROPS" => "Y",
				"IS_LOCATION" => "N",
				"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["user_ur"],
				"SIZE1" => 40,
				"SIZE2" => 0,
				"DESCRIPTION" => "",
				"IS_EMAIL" => "N",
				"IS_PROFILE_NAME" => "Y",
				"IS_PAYER" => "Y",
				"IS_LOCATION4TAX" => "N",
				"CODE" => "CONTACT_NAME",
				"IS_FILTERED" => "Y",
			);*/

			$businessValueCodes['COMPANY_EMAIL'] = array('GROUP' => 'COMPANY', 'SORT' =>  110, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
				"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
				"NAME" => "E-Mail",
				"TYPE" => "TEXT",
				"REQUIED" => "Y",
				"DEFAULT_VALUE" => "",
				"SORT" => 110,
				"USER_PROPS" => "Y",
				"IS_LOCATION" => "N",
				"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_ur"],
				"SIZE1" => 40,
				"SIZE2" => 0,
				"DESCRIPTION" => "",
				"IS_EMAIL" => "Y",
				"IS_PROFILE_NAME" => "N",
				"IS_PAYER" => "N",
				"IS_LOCATION4TAX" => "N",
				"CODE" => "EMAIL",
				"IS_FILTERED" => "Y",
			);

			$businessValueCodes['COMPANY_NAME'] = array('GROUP' => 'COMPANY', 'SORT' =>  130, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
				"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
				"NAME" => GetMessage("SALE_WIZARD_PROP_40"),
				"TYPE" => "TEXT",
				"REQUIED" => "Y",
				"DEFAULT_VALUE" => "",
				"SORT" => 130,
				"USER_PROPS" => "Y",
				"IS_LOCATION" => "N",
				"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["user_ur"],
				"SIZE1" => 40,
				"SIZE2" => 0,
				"DESCRIPTION" => "",
				"IS_EMAIL" => "N",
				"IS_PROFILE_NAME" => "Y",
				"IS_PAYER" => "N",
				"IS_LOCATION4TAX" => "N",
				"CODE" => "COMPANY_NAME",
				"IS_FILTERED" => "Y",
			);

			$businessValueCodes['COMPANY_ADDRESS'] = array('GROUP' => 'COMPANY', 'SORT' =>  140, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
				"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
				"NAME" => GetMessage("SALE_WIZARD_PROP_47"),
				"TYPE" => "TEXTAREA",
				"REQUIED" => "Y",
				"DEFAULT_VALUE" => "",
				"SORT" => 140,
				"USER_PROPS" => "Y",
				"IS_LOCATION" => "N",
				"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_ur"],
				"SIZE1" => 40,
				"SIZE2" => 0,
				"DESCRIPTION" => "",
				"IS_EMAIL" => "N",
				"IS_PROFILE_NAME" => "N",
				"IS_PAYER" => "N",
				"IS_LOCATION4TAX" => "N",
				"CODE" => "COMPANY_ADR",
				"IS_FILTERED" => "N",
			);

			$businessValueCodes['COMPANY_EGRPU'] = array('GROUP' => 'COMPANY', 'SORT' =>  150, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
				"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
				"NAME" => GetMessage("SALE_WIZARD_PROP_48"),
				"TYPE" => "TEXT",
				"REQUIED" => "Y",
				"DEFAULT_VALUE" => "",
				"SORT" => 150,
				"USER_PROPS" => "Y",
				"IS_LOCATION" => "N",
				"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_ur"],
				"SIZE1" => 30,
				"SIZE2" => 0,
				"DESCRIPTION" => "",
				"IS_EMAIL" => "N",
				"IS_PROFILE_NAME" => "N",
				"IS_PAYER" => "N",
				"IS_LOCATION4TAX" => "N",
				"CODE" => "EGRPU",
				"IS_FILTERED" => "N",
			);

			$businessValueCodes['COMPANY_INN'] = array('GROUP' => 'COMPANY', 'SORT' =>  160, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
				"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
				"NAME" => GetMessage("SALE_WIZARD_PROP_49"),
				"TYPE" => "TEXT",
				"REQUIED" => "N",
				"DEFAULT_VALUE" => "",
				"SORT" => 160,
				"USER_PROPS" => "Y",
				"IS_LOCATION" => "N",
				"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_ur"],
				"SIZE1" => 30,
				"SIZE2" => 0,
				"DESCRIPTION" => "",
				"IS_EMAIL" => "N",
				"IS_PROFILE_NAME" => "N",
				"IS_PAYER" => "N",
				"IS_LOCATION4TAX" => "N",
				"CODE" => "INN",
				"IS_FILTERED" => "N",
			);

			$businessValueCodes['COMPANY_NDS'] = array('GROUP' => 'COMPANY', 'SORT' =>  170, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
				"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
				"NAME" => GetMessage("SALE_WIZARD_PROP_46"),
				"TYPE" => "TEXT",
				"REQUIED" => "N",
				"DEFAULT_VALUE" => "",
				"SORT" => 170,
				"USER_PROPS" => "Y",
				"IS_LOCATION" => "N",
				"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_ur"],
				"SIZE1" => 30,
				"SIZE2" => 0,
				"DESCRIPTION" => "",
				"IS_EMAIL" => "N",
				"IS_PROFILE_NAME" => "N",
				"IS_PAYER" => "N",
				"IS_LOCATION4TAX" => "N",
				"CODE" => "NDS",
				"IS_FILTERED" => "N",
			);

			$businessValueCodes['COMPANY_ZIP'] = array('GROUP' => 'COMPANY', 'SORT' =>  180, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
				"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
				"NAME" => GetMessage("SALE_WIZARD_PROP_44"),
				"TYPE" => "TEXT",
				"REQUIED" => "N",
				"DEFAULT_VALUE" => "",
				"SORT" => 180,
				"USER_PROPS" => "Y",
				"IS_LOCATION" => "N",
				"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_ur"],
				"SIZE1" => 8,
				"SIZE2" => 0,
				"DESCRIPTION" => "",
				"IS_EMAIL" => "N",
				"IS_PROFILE_NAME" => "N",
				"IS_PAYER" => "N",
				"IS_LOCATION4TAX" => "N",
				"CODE" => "ZIP",
				"IS_FILTERED" => "N",
				"IS_ZIP" => "Y",
			);

			$businessValueCodes['COMPANY_CITY'] = array('GROUP' => 'COMPANY', 'SORT' =>  190, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
				"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
				"NAME" => GetMessage("SALE_WIZARD_PROP_43"),
				"TYPE" => "TEXT",
				"REQUIED" => "Y",
				"DEFAULT_VALUE" => $shopLocation,
				"SORT" => 190,
				"USER_PROPS" => "Y",
				"IS_LOCATION" => "N",
				"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_ur"],
				"SIZE1" => 30,
				"SIZE2" => 0,
				"DESCRIPTION" => "",
				"IS_EMAIL" => "N",
				"IS_PROFILE_NAME" => "N",
				"IS_PAYER" => "N",
				"IS_LOCATION4TAX" => "N",
				"CODE" => "CITY",
				"IS_FILTERED" => "Y",
			);

			$businessValueCodes['COMPANY_OPERATION_ADDRESS'] = array('GROUP' => 'COMPANY', 'SORT' =>  200, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
				"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
				"NAME" => GetMessage("SALE_WIZARD_PROP_42"),
				"TYPE" => "TEXTAREA",
				"REQUIED" => "Y",
				"DEFAULT_VALUE" => "",
				"SORT" => 200,
				"USER_PROPS" => "Y",
				"IS_LOCATION" => "N",
				"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_ur"],
				"SIZE1" => 30,
				"SIZE2" => 3,
				"DESCRIPTION" => "",
				"IS_EMAIL" => "N",
				"IS_PROFILE_NAME" => "N",
				"IS_PAYER" => "N",
				"IS_LOCATION4TAX" => "N",
				"CODE" => "ADDRESS",
				"IS_FILTERED" => "N",
			);

			$businessValueCodes['COMPANY_PHONE'] = array('GROUP' => 'COMPANY', 'SORT' =>  210, 'DOMAIN' => $BIZVAL_ENTITY_DOMAIN);
			$arProps[] = Array(
				"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
				"NAME" => GetMessage("SALE_WIZARD_PROP_45"),
				"TYPE" => "TEXT",
				"REQUIED" => "Y",
				"DEFAULT_VALUE" => "",
				"SORT" => 210,
				"USER_PROPS" => "Y",
				"IS_LOCATION" => "N",
				"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_ur"],
				"SIZE1" => 30,
				"SIZE2" => 0,
				"DESCRIPTION" => "",
				"IS_EMAIL" => "N",
				"IS_PROFILE_NAME" => "N",
				"IS_PAYER" => "N",
				"IS_LOCATION4TAX" => "N",
				"CODE" => "PHONE",
				"IS_FILTERED" => "N",
			);
		}
	}

	if ($shopLocalization == "ua" && $personType["fiz_ua"] == "Y")
	{
		/*
		$businessValueCodes['CLIENT_NAME'] = array('GROUP' => 'CLIENT', 'SORT' =>  100, 'DOMAIN' => $BIZVAL_INDIVIDUAL_DOMAIN);
		$arProps[] = Array(
			"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz_ua"],
			"NAME" => GetMessage("SALE_WIZARD_PROP_31"),
			"TYPE" => "TEXT",
			"REQUIED" => "Y",
			"DEFAULT_VALUE" => "",
			"SORT" => 100,
			"USER_PROPS" => "Y",
			"IS_LOCATION" => "N",
			"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["user_fiz_ua"],
			"SIZE1" => 40,
			"SIZE2" => 0,
			"DESCRIPTION" => "",
			"IS_EMAIL" => "N",
			"IS_PROFILE_NAME" => "Y",
			"IS_PAYER" => "Y",
			"IS_LOCATION4TAX" => "N",
			"CODE" => "FIO",
			"IS_FILTERED" => "Y",
		);
		*/

		$businessValuePersonDomain[$arGeneralInfo["personType"]["fiz_ua"]] = $BIZVAL_INDIVIDUAL_DOMAIN;

		$businessValueCodes['CLIENT_EMAIL'] = array('GROUP' => 'CLIENT', 'SORT' =>  110, 'DOMAIN' => $BIZVAL_INDIVIDUAL_DOMAIN);
		$arProps[] = Array(
			"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz_ua"],
			"NAME" => "E-Mail",
			"TYPE" => "TEXT",
			"REQUIED" => "Y",
			"DEFAULT_VALUE" => "",
			"SORT" => 110,
			"USER_PROPS" => "Y",
			"IS_LOCATION" => "N",
			"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["user_fiz_ua"],
			"SIZE1" => 40,
			"SIZE2" => 0,
			"DESCRIPTION" => "",
			"IS_EMAIL" => "Y",
			"IS_PROFILE_NAME" => "N",
			"IS_PAYER" => "N",
			"IS_LOCATION4TAX" => "N",
			"CODE" => "EMAIL",
			"IS_FILTERED" => "Y",
		);

		$businessValueCodes['CLIENT_NAME'] = array('GROUP' => 'CLIENT', 'SORT' =>  130, 'DOMAIN' => $BIZVAL_INDIVIDUAL_DOMAIN);
		$arProps[] = Array(
			"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz_ua"],
			"NAME" => GetMessage("SALE_WIZARD_PROP_30"),
			"TYPE" => "TEXT",
			"REQUIED" => "Y",
			"DEFAULT_VALUE" => "",
			"SORT" => 130,
			"USER_PROPS" => "Y",
			"IS_LOCATION" => "N",
			"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["user_fiz_ua"],
			"SIZE1" => 40,
			"SIZE2" => 0,
			"DESCRIPTION" => "",
			"IS_EMAIL" => "N",
			"IS_PROFILE_NAME" => "Y",
			"IS_PAYER" => "N",
			"IS_LOCATION4TAX" => "N",
			"CODE" => "FIO",
			"IS_FILTERED" => "Y",
		);

		$businessValueCodes['CLIENT_COMPANY_ADDRESS'] = array('GROUP' => 'CLIENT', 'SORT' =>  140, 'DOMAIN' => $BIZVAL_INDIVIDUAL_DOMAIN);
		$arProps[] = Array(
			"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz_ua"],
			"NAME" => GetMessage("SALE_WIZARD_PROP_37"),
			"TYPE" => "TEXTAREA",
			"REQUIED" => "Y",
			"DEFAULT_VALUE" => "",
			"SORT" => 140,
			"USER_PROPS" => "Y",
			"IS_LOCATION" => "N",
			"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["user_fiz_ua"],
			"SIZE1" => 40,
			"SIZE2" => 0,
			"DESCRIPTION" => "",
			"IS_EMAIL" => "N",
			"IS_PROFILE_NAME" => "N",
			"IS_PAYER" => "N",
			"IS_LOCATION4TAX" => "N",
			"CODE" => "COMPANY_ADR",
			"IS_FILTERED" => "N",
		);

		$businessValueCodes['CLIENT_EGRPU'] = array('GROUP' => 'CLIENT', 'SORT' =>  150, 'DOMAIN' => $BIZVAL_INDIVIDUAL_DOMAIN);
		$arProps[] = Array(
			"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz_ua"],
			"NAME" => GetMessage("SALE_WIZARD_PROP_38"),
			"TYPE" => "TEXT",
			"REQUIED" => "Y",
			"DEFAULT_VALUE" => "",
			"SORT" => 150,
			"USER_PROPS" => "Y",
			"IS_LOCATION" => "N",
			"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_fiz_ua"],
			"SIZE1" => 30,
			"SIZE2" => 0,
			"DESCRIPTION" => "",
			"IS_EMAIL" => "N",
			"IS_PROFILE_NAME" => "N",
			"IS_PAYER" => "N",
			"IS_LOCATION4TAX" => "N",
			"CODE" => "EGRPU",
			"IS_FILTERED" => "N",
		);

		/*
		$businessValueCodes['CLIENT_INN'] = array('GROUP' => 'CLIENT', 'SORT' =>  160, 'DOMAIN' => $BIZVAL_INDIVIDUAL_DOMAIN);
		$arProps[] = Array(
			"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz_ua"],
			"NAME" => GetMessage("SALE_WIZARD_PROP_39"),
			"TYPE" => "TEXT",
			"REQUIED" => "N",
			"DEFAULT_VALUE" => "",
			"SORT" => 160,
			"USER_PROPS" => "Y",
			"IS_LOCATION" => "N",
			"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_fiz_ua"],
			"SIZE1" => 30,
			"SIZE2" => 0,
			"DESCRIPTION" => "",
			"IS_EMAIL" => "N",
			"IS_PROFILE_NAME" => "N",
			"IS_PAYER" => "N",
			"IS_LOCATION4TAX" => "N",
			"CODE" => "INN",
			"IS_FILTERED" => "N",
		);
		*/

		$businessValueCodes['CLIENT_NDS'] = array('GROUP' => 'CLIENT', 'SORT' =>  170, 'DOMAIN' => $BIZVAL_INDIVIDUAL_DOMAIN);
		$arProps[] = Array(
			"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz_ua"],
			"NAME" => GetMessage("SALE_WIZARD_PROP_36"),
			"TYPE" => "TEXT",
			"REQUIED" => "N",
			"DEFAULT_VALUE" => "",
			"SORT" => 170,
			"USER_PROPS" => "Y",
			"IS_LOCATION" => "N",
			"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_fiz_ua"],
			"SIZE1" => 30,
			"SIZE2" => 0,
			"DESCRIPTION" => "",
			"IS_EMAIL" => "N",
			"IS_PROFILE_NAME" => "N",
			"IS_PAYER" => "N",
			"IS_LOCATION4TAX" => "N",
			"CODE" => "NDS",
			"IS_FILTERED" => "N",
		);

		$businessValueCodes['CLIENT_ZIP'] = array('GROUP' => 'CLIENT', 'SORT' =>  180, 'DOMAIN' => $BIZVAL_INDIVIDUAL_DOMAIN);
		$arProps[] = Array(
			"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz_ua"],
			"NAME" => GetMessage("SALE_WIZARD_PROP_34"),
			"TYPE" => "TEXT",
			"REQUIED" => "N",
			"DEFAULT_VALUE" => "",
			"SORT" => 180,
			"USER_PROPS" => "Y",
			"IS_LOCATION" => "N",
			"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_fiz_ua"],
			"SIZE1" => 8,
			"SIZE2" => 0,
			"DESCRIPTION" => "",
			"IS_EMAIL" => "N",
			"IS_PROFILE_NAME" => "N",
			"IS_PAYER" => "N",
			"IS_LOCATION4TAX" => "N",
			"CODE" => "ZIP",
			"IS_FILTERED" => "N",
			"IS_ZIP" => "Y",
		);

		$businessValueCodes['CLIENT_CITY'] = array('GROUP' => 'CLIENT', 'SORT' =>  190, 'DOMAIN' => $BIZVAL_INDIVIDUAL_DOMAIN);
		$arProps[] = Array(
			"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz_ua"],
			"NAME" => GetMessage("SALE_WIZARD_PROP_33"),
			"TYPE" => "TEXT",
			"REQUIED" => "Y",
			"DEFAULT_VALUE" => $shopLocation,
			"SORT" => 190,
			"USER_PROPS" => "Y",
			"IS_LOCATION" => "N",
			"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_fiz_ua"],
			"SIZE1" => 30,
			"SIZE2" => 0,
			"DESCRIPTION" => "",
			"IS_EMAIL" => "N",
			"IS_PROFILE_NAME" => "N",
			"IS_PAYER" => "N",
			"IS_LOCATION4TAX" => "N",
			"CODE" => "CITY",
			"IS_FILTERED" => "Y",
		);

		$businessValueCodes['CLIENT_ADDRESS'] = array('GROUP' => 'CLIENT', 'SORT' =>  200, 'DOMAIN' => $BIZVAL_INDIVIDUAL_DOMAIN);
		$arProps[] = Array(
			"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz_ua"],
			"NAME" => GetMessage("SALE_WIZARD_PROP_32"),
			"TYPE" => "TEXTAREA",
			"REQUIED" => "Y",
			"DEFAULT_VALUE" => "",
			"SORT" => 200,
			"USER_PROPS" => "Y",
			"IS_LOCATION" => "N",
			"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_fiz_ua"],
			"SIZE1" => 30,
			"SIZE2" => 3,
			"DESCRIPTION" => "",
			"IS_EMAIL" => "N",
			"IS_PROFILE_NAME" => "N",
			"IS_PAYER" => "N",
			"IS_LOCATION4TAX" => "N",
			"CODE" => "ADDRESS",
			"IS_FILTERED" => "N",
		);

		$businessValueCodes['CLIENT_PHONE'] = array('GROUP' => 'CLIENT', 'SORT' =>  210, 'DOMAIN' => $BIZVAL_INDIVIDUAL_DOMAIN);
		$arProps[] = Array(
			"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz_ua"],
			"NAME" => GetMessage("SALE_WIZARD_PROP_35"),
			"TYPE" => "TEXT",
			"REQUIED" => "Y",
			"DEFAULT_VALUE" => "",
			"SORT" => 210,
			"USER_PROPS" => "Y",
			"IS_LOCATION" => "N",
			"PROPS_GROUP_ID" => $arGeneralInfo["propGroup"]["adres_fiz_ua"],
			"SIZE1" => 30,
			"SIZE2" => 0,
			"DESCRIPTION" => "",
			"IS_EMAIL" => "N",
			"IS_PROFILE_NAME" => "N",
			"IS_PAYER" => "N",
			"IS_LOCATION4TAX" => "N",
			"CODE" => "PHONE",
			"IS_PHONE" => "Y",
			"IS_FILTERED" => "N",
		);
	}

	$propCityId = 0;
	reset($businessValueCodes);

	foreach($arProps as $prop)
	{
		$variants = Array();
		if(!empty($prop["VARIANTS"]))
		{
			$variants = $prop["VARIANTS"];
			unset($prop["VARIANTS"]);
		}

		if ($prop["CODE"] == "LOCATION" && $propCityId > 0)
		{
			$prop["INPUT_FIELD_LOCATION"] = $propCityId;
			$propCityId = 0;
		}

		$dbSaleOrderProps = CSaleOrderProps::GetList(array(), array("PERSON_TYPE_ID" => $prop["PERSON_TYPE_ID"], "CODE" =>  $prop["CODE"]));
		if ($arSaleOrderProps = $dbSaleOrderProps->GetNext())
			$id = $arSaleOrderProps["ID"];
		else
			$id = CSaleOrderProps::Add($prop);

		if ($prop["CODE"] == "CITY")
		{
			$propCityId = $id;
		}
		if(strlen($prop["CODE"]) > 0)
		{
			//$arGeneralInfo["propCode"][$prop["CODE"]] = $prop["CODE"];
			$arGeneralInfo["propCodeID"][$prop["CODE"]] = $id;
			$arGeneralInfo["properies"][$prop["PERSON_TYPE_ID"]][$prop["CODE"]] = $prop;
			$arGeneralInfo["properies"][$prop["PERSON_TYPE_ID"]][$prop["CODE"]]["ID"] = $id;
		}

		if(!empty($variants))
		{
			foreach($variants as $val)
			{
				$val["ORDER_PROPS_ID"] = $id;
				CSaleOrderPropsVariant::Add($val);
			}
		}

		// add business value mapping to property
		$businessValueCodes[key($businessValueCodes)]['MAP'] = array($prop['PERSON_TYPE_ID'] => array('PROPERTY', $id));
		next($businessValueCodes);
	}

	// Install Business Values

	if (version_compare($saleVersion, '15.0.0', '>='))
	{
		BusinessValue::install('optimus', null, array(
			'PERSON_DOMAIN' => $businessValuePersonDomain,
			'GROUPS'        => $businessValueGroups,
			'CODES'         => $businessValueCodes,
		));
	}

/*
	$propReplace = "";
	foreach($arGeneralInfo["properies"] as $key => $val)
	{
		if(IntVal($val["LOCATION"]["ID"]) > 0)
			$propReplace .= '"PROP_'.$key.'" => Array(0 => "'.$val["LOCATION"]["ID"].'"), ';
	}
	WizardServices::ReplaceMacrosRecursive(WIZARD_SITE_PATH."personal/order/", Array("PROPS" => $propReplace));
*/
	//1C export
	if($personType["fiz"] == "Y" && !$fizExist)
	{
		$val = serialize(Array(
				"AGENT_NAME" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["fiz"]]["FIO"]["ID"]),
				"FULL_NAME" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["fiz"]]["FIO"]["ID"]),
				"SURNAME" => Array("TYPE" => "USER", "VALUE" => "LAST_NAME"),
				"NAME" => Array("TYPE" => "USER", "VALUE" => "NAME"),
				"ADDRESS_FULL" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["fiz"]]["ADDRESS"]["ID"]),
				"INDEX" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["fiz"]]["ZIP"]["ID"]),
				"COUNTRY" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["fiz"]]["LOCATION"]["ID"]."_COUNTRY"),
				"CITY" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["fiz"]]["LOCATION"]["ID"]."_CITY"),
				"STREET" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["fiz"]]["ADDRESS"]["ID"]),
				"EMAIL" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["fiz"]]["EMAIL"]["ID"]),
				"CONTACT_PERSON" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["fiz"]]["CONTACT_PERSON"]["ID"]),
				"IS_FIZ" => "Y",
			));
		CSaleExport::Add(Array("PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"], "VARS" => $val));
	}
	if($personType["ur"] == "Y" && !$urExist)
	{
		$val = serialize(Array(
				"AGENT_NAME" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["ur"]]["COMPANY"]["ID"]),
				"FULL_NAME" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["ur"]]["COMPANY"]["ID"]),
				"ADDRESS_FULL" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["ur"]]["COMPANY_ADR"]["ID"]),
				"COUNTRY" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["ur"]]["LOCATION"]["ID"]."_COUNTRY"),
				"CITY" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["ur"]]["LOCATION"]["ID"]."_CITY"),
				"STREET" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["ur"]]["COMPANY_ADR"]["ID"]),
				"INN" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["ur"]]["INN"]["ID"]),
				"KPP" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["ur"]]["KPP"]["ID"]),
				"PHONE" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["ur"]]["PHONE"]["ID"]),
				"EMAIL" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["ur"]]["EMAIL"]["ID"]),
				"CONTACT_PERSON" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["ur"]]["NAME"]["ID"]),
				"F_ADDRESS_FULL" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["ur"]]["ADDRESS"]["ID"]),
				"F_COUNTRY" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["ur"]]["LOCATION"]["ID"]."_COUNTRY"),
				"F_CITY" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["ur"]]["LOCATION"]["ID"]."_CITY"),
				"F_INDEX" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["ur"]]["ZIP"]["ID"]),
				"F_STREET" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["ur"]]["ADDRESS"]["ID"]),
				"IS_FIZ" =>  "N",
			));
		CSaleExport::Add(Array("PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"], "VARS" => $val));
	}
	if ($shopLocalization == "ua" && !$fizUaExist)
	{
		$val = serialize(Array(
			"AGENT_NAME" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["fiz_ua"]]["FIO"]["ID"]),
			"FULL_NAME" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["fiz_ua"]]["FIO"]["ID"]),
			"SURNAME" => Array("TYPE" => "USER", "VALUE" => "LAST_NAME"),
			"NAME" => Array("TYPE" => "USER", "VALUE" => "NAME"),
			"ADDRESS_FULL" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["fiz_ua"]]["ADDRESS"]["ID"]),
			"INDEX" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["fiz_ua"]]["ZIP"]["ID"]),
			"COUNTRY" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["fiz_ua"]]["LOCATION"]["ID"]."_COUNTRY"),
			"CITY" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["fiz_ua"]]["LOCATION"]["ID"]."_CITY"),
			"STREET" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["fiz_ua"]]["ADDRESS"]["ID"]),
			"EMAIL" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["fiz_ua"]]["EMAIL"]["ID"]),
			"CONTACT_PERSON" => Array("TYPE" => "PROPERTY", "VALUE" => $arGeneralInfo["properies"][$arGeneralInfo["personType"]["fiz_ua"]]["CONTACT_PERSON"]["ID"]),
			"IS_FIZ" => "Y",
		));
		CSaleExport::Add(Array("PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"], "VARS" => $val));
	}
	//PaySystem
	$arPaySystems = Array();
	if($paysystem["cash"] == "Y")
	{
		$arPaySystemTmp = Array(
			"NAME" => GetMessage("SALE_WIZARD_PS_CASH"),
			"SORT" => 80,
			"ACTIVE" => "Y",
			"DESCRIPTION" => GetMessage("SALE_WIZARD_PS_CASH_DESCR"),
			"CODE_TEMP" => "cash");
		if($personType["fiz"] == "Y")
		{
			$arPaySystemTmp["ACTION"][] = Array(
				"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"],
				"NAME" => GetMessage("SALE_WIZARD_PS_CASH"),
				"ACTION_FILE" => "/bitrix/modules/sale/payment/cash",
				"RESULT_FILE" => "",
				"NEW_WINDOW" => "N",
				"PARAMS" => "",
				"HAVE_PAYMENT" => "Y",
				"HAVE_ACTION" => "N",
				"HAVE_RESULT" => "N",
				"HAVE_PREPAY" => "N",
				"HAVE_RESULT_RECEIVE" => "N",
			);
		}
		/*if($personType["ur"] == "Y")
		{
			$arPaySystemTmp["ACTION"][] = Array(
				"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
				"NAME" => GetMessage("SALE_WIZARD_PS_CASH"),
				"ACTION_FILE" => "/bitrix/modules/sale/payment/cash",
				"RESULT_FILE" => "",
				"NEW_WINDOW" => "N",
				"PARAMS" => "",
				"HAVE_PAYMENT" => "Y",
				"HAVE_ACTION" => "N",
				"HAVE_RESULT" => "N",
				"HAVE_PREPAY" => "N",
				"HAVE_RESULT_RECEIVE" => "N",
			);
		}   */
		$arPaySystems[] = $arPaySystemTmp;
	}
	if($paysystem["collect"] == "Y")
	{
		$arPaySystems[] = Array(
			"NAME" => GetMessage("SALE_WIZARD_PS_COLLECT"),
			"SORT" => 110,
			"ACTIVE" => "Y",
			"DESCRIPTION" => GetMessage("SALE_WIZARD_PS_COLLECT_DESCR"),
			"CODE_TEMP" => "collect",
			"ACTION" => Array(
				Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"],
					"NAME" => GetMessage("SALE_WIZARD_PS_COLLECT"),
					"ACTION_FILE" => "/bitrix/modules/sale/payment/payment_forward_calc",
					"RESULT_FILE" => "",
					"NEW_WINDOW" => "N",
					"HAVE_PAYMENT" => "Y",
					"HAVE_ACTION" => "N",
					"HAVE_RESULT" => "N",
					"HAVE_PREPAY" => "N",
					"HAVE_RESULT_RECEIVE" => "N",
				),
				Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
					"NAME" => GetMessage("SALE_WIZARD_PS_COLLECT"),
					"ACTION_FILE" => "/bitrix/modules/sale/payment/payment_forward_calc",
					"RESULT_FILE" => "",
					"NEW_WINDOW" => "N",
					"HAVE_PAYMENT" => "Y",
					"HAVE_ACTION" => "N",
					"HAVE_RESULT" => "N",
					"HAVE_PREPAY" => "N",
					"HAVE_RESULT_RECEIVE" => "N",
				)
			)
		);
	}
	if($personType["fiz"] == "Y" && $shopLocalization != "ua")
	{
		if($bRus)
		{
			$arPaySystems[] = Array(
				"NAME" => GetMessage("SALE_WIZARD_YMoney"),
				"SORT" => 50,
				"DESCRIPTION" => "",
				"CODE_TEMP" => "yandex_3x",
				"ACTION" => Array(Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"],
					"NAME" => GetMessage("SALE_WIZARD_YMoney"),
					"ACTION_FILE" => "/bitrix/modules/sale/payment/yandex_3x",
					"RESULT_FILE" => "",
					"NEW_WINDOW" => "N",
					"PARAMS" => serialize(Array(
						"ORDER_ID" => Array("TYPE" => "ORDER", "VALUE" => "ID"),
						"USER_ID" => Array("TYPE" => "PROPERTY", "VALUE" => "FIO"),
						"ORDER_DATE" => Array("TYPE" => "ORDER", "VALUE" => "DATE_INSERT"),
						"SHOULD_PAY" => Array("TYPE" => "ORDER", "VALUE" => "PRICE"),
						"PAYMENT_VALUE" => Array("VALUE" => "PC"),
						"IS_TEST" => Array("VALUE" => "Y"),
						"CHANGE_STATUS_PAY" => Array("VALUE" => "Y"),
						"SHOP_ID" => Array("TYPE" => "", "VALUE" => ""),
						"SCID" => Array("TYPE" => "", "VALUE" => ""),
						"SHOP_KEY" => Array("TYPE" => "", "VALUE" => ""),
					)),
					"HAVE_PAYMENT" => "Y",
					"HAVE_ACTION" => "N",
					"HAVE_RESULT" => "N",
					"HAVE_PREPAY" => "N",
					"HAVE_RESULT_RECEIVE" => "Y",
				))
			);

			$logo = $_SERVER["DOCUMENT_ROOT"].WIZARD_SERVICE_RELATIVE_PATH ."/images/yandex_cards.gif";
			$arPicture = CFile::MakeFileArray($logo);
			$arPaySystems[] = Array(
				"NAME" => GetMessage("SALE_WIZARD_YCards"),
				"SORT" => 60,
				"DESCRIPTION" => "",
				"CODE_TEMP" => "yandex_3x",
				"ACTION" => Array(Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"],
					"NAME" => GetMessage("SALE_WIZARD_YCards"),
					"ACTION_FILE" => "/bitrix/modules/sale/payment/yandex_3x",
					"RESULT_FILE" => "",
					"NEW_WINDOW" => "N",
					"PARAMS" => serialize(Array(
						"ORDER_ID" => Array("TYPE" => "ORDER", "VALUE" => "ID"),
						"USER_ID" => Array("TYPE" => "PROPERTY", "VALUE" => "FIO"),
						"ORDER_DATE" => Array("TYPE" => "ORDER", "VALUE" => "DATE_INSERT"),
						"SHOULD_PAY" => Array("TYPE" => "ORDER", "VALUE" => "PRICE"),
						"PAYMENT_VALUE" => Array("VALUE" => "AC"),
						"IS_TEST" => Array("VALUE" => "Y"),
						"CHANGE_STATUS_PAY" => Array("VALUE" => "Y"),
						"SHOP_ID" => Array("TYPE" => "", "VALUE" => ""),
						"SCID" => Array("TYPE" => "", "VALUE" => ""),
						"SHOP_KEY" => Array("TYPE" => "", "VALUE" => ""),
					)),
					"HAVE_PAYMENT" => "Y",
					"HAVE_ACTION" => "N",
					"HAVE_RESULT" => "N",
					"HAVE_PREPAY" => "N",
					"HAVE_RESULT_RECEIVE" => "Y",
					"LOGOTIP" => $arPicture
				))
			);
			$logo = $_SERVER["DOCUMENT_ROOT"].WIZARD_SERVICE_RELATIVE_PATH ."/images/yandex_terminals.gif";
			$arPicture = CFile::MakeFileArray($logo);
			$arPaySystems[] = Array(
				"NAME" => GetMessage("SALE_WIZARD_YTerminals"),
				"SORT" => 70,
				"DESCRIPTION" => "",
				"CODE_TEMP" => "yandex_3x",
				"ACTION" => Array(Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"],
					"NAME" => GetMessage("SALE_WIZARD_YTerminals"),
					"ACTION_FILE" => "/bitrix/modules/sale/payment/yandex_3x",
					"RESULT_FILE" => "",
					"NEW_WINDOW" => "N",
					"PARAMS" => serialize(Array(
						"ORDER_ID" => Array("TYPE" => "ORDER", "VALUE" => "ID"),
						"USER_ID" => Array("TYPE" => "PROPERTY", "VALUE" => "FIO"),
						"ORDER_DATE" => Array("TYPE" => "ORDER", "VALUE" => "DATE_INSERT"),
						"SHOULD_PAY" => Array("TYPE" => "ORDER", "VALUE" => "PRICE"),
						"PAYMENT_VALUE" => Array("VALUE" => "GP"),
						"IS_TEST" => Array("VALUE" => "Y"),
						"CHANGE_STATUS_PAY" => Array("VALUE" => "Y"),
						"SHOP_ID" => Array("TYPE" => "", "VALUE" => ""),
						"SCID" => Array("TYPE" => "", "VALUE" => ""),
						"SHOP_KEY" => Array("TYPE" => "", "VALUE" => ""),
					)),
					"HAVE_PAYMENT" => "Y",
					"HAVE_ACTION" => "N",
					"HAVE_RESULT" => "N",
					"HAVE_PREPAY" => "N",
					"HAVE_RESULT_RECEIVE" => "Y",
					"LOGOTIP" => $arPicture
				))
			);
			$arPaySystems[] = Array(
				"NAME" => GetMessage("SALE_WIZARD_PS_WM"),
				"SORT" => 90,
				"ACTIVE" => "N",
				"DESCRIPTION" => GetMessage("SALE_WIZARD_PS_WM_DESCR"),
				"CODE_TEMP" => "webmoney",
				"ACTION" => Array(Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"],
					"NAME" => GetMessage("SALE_WIZARD_PS_WM"),
					"ACTION_FILE" => "/bitrix/modules/sale/payment/webmoney_web",
					"RESULT_FILE" => "",
					"NEW_WINDOW" => "Y",
					"PARAMS" => "",
					"HAVE_PAYMENT" => "Y",
					"HAVE_ACTION" => "N",
					"HAVE_RESULT" => "Y",
					"HAVE_PREPAY" => "N",
					"HAVE_RESULT_RECEIVE" => "N",
				))
			);

			if($paysystem["sber"] == "Y")
			{
				$arPaySystems[] = Array(
					"NAME" => GetMessage("SALE_WIZARD_PS_SB"),
					"SORT" => 110,
					"DESCRIPTION" => GetMessage("SALE_WIZARD_PS_SB_DESCR"),
					"CODE_TEMP" => "sberbank",
					"ACTION" => Array(Array(
						"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"],
						"NAME" => GetMessage("SALE_WIZARD_PS_SB"),
						"ACTION_FILE" => "/bitrix/modules/sale/payment/sberbank_new",
						"RESULT_FILE" => "",
						"NEW_WINDOW" => "Y",
						"PARAMS" => serialize(Array(
							"COMPANY_NAME" => Array("TYPE" => "", "VALUE" => $shopOfName),
							"INN" => Array("TYPE" => "", "VALUE" => $shopINN),
							"KPP" => Array("TYPE" => "", "VALUE" => $shopKPP),
							"SETTLEMENT_ACCOUNT" => Array("TYPE" => "", "VALUE" => $shopNS),
							"BANK_NAME" => Array("TYPE" => "", "VALUE" => $shopBANK),
							"BANK_BIC" => Array("TYPE" => "", "VALUE" => $shopBANKREKV),
							"BANK_COR_ACCOUNT" => Array("TYPE" => "", "VALUE" => $shopKS),
							"ORDER_ID" => Array("TYPE" => "ORDER", "VALUE" => "ACCOUNT_NUMBER"),
							"DATE_INSERT" => Array("TYPE" => "ORDER", "VALUE" => "DATE_INSERT_DATE"),
							"PAYER_CONTACT_PERSON" => Array("TYPE" => "PROPERTY", "VALUE" => "FIO"),
							"PAYER_ZIP_CODE" => Array("TYPE" => "PROPERTY", "VALUE" => "ZIP"),
							"PAYER_COUNTRY" => Array("TYPE" => "PROPERTY", "VALUE" => "LOCATION_COUNTRY"),
							"PAYER_REGION" => Array("TYPE" => "PROPERTY", "VALUE" => "LOCATION_REGION"),
							"PAYER_CITY" => Array("TYPE" => "PROPERTY", "VALUE" => "LOCATION_CITY"),
							"PAYER_ADDRESS_FACT" => Array("TYPE" => "PROPERTY", "VALUE" => "ADDRESS"),
							"SHOULD_PAY" => Array("TYPE" => "ORDER", "VALUE" => "PRICE"),
						)),
						"HAVE_PAYMENT" => "Y",
						"HAVE_ACTION" => "N",
						"HAVE_RESULT" => "N",
						"HAVE_PREPAY" => "N",
						"HAVE_RESULT_RECEIVE" => "N",
					))

				);
			}
		}
		else
		{
			$arPaySystems[] = Array(
				"NAME" => "PayPal",
				"SORT" => 90,
				"DESCRIPTION" => "",
				"CODE_TEMP" => "paypal",
				"ACTION" => Array(Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"],
					"NAME" => "PayPal",
					"ACTION_FILE" => "/bitrix/modules/sale/payment/paypal",
					"RESULT_FILE" => "",
					"NEW_WINDOW" => "N",
					"PARAMS" => serialize(Array(
						"ORDER_ID" => Array("TYPE" => "ORDER", "VALUE" => "ID"),
						"DATE_INSERT" => Array("TYPE" => "ORDER", "VALUE" => "DATE_INSERT_DATE"),
						"SHOULD_PAY" => Array("TYPE" => "ORDER", "VALUE" => "SHOULD_PAY"),
						"CURRENCY" => Array("TYPE" => "ORDER", "VALUE" => "CURRENCY"),
					)),
					"HAVE_PAYMENT" => "Y",
					"HAVE_ACTION" => "N",
					"HAVE_RESULT" => "N",
					"HAVE_PREPAY" => "N",
					"HAVE_RESULT_RECEIVE" => "Y",
				))

			);
		}
	}
	if($personType["ur"] == "Y" && $paysystem["bill"] == "Y" && $shopLocalization != "ua")
	{
		$arPaySystems[] = Array(
			"NAME" => GetMessage("SALE_WIZARD_PS_BILL"),
			"SORT" => 100,
			"DESCRIPTION" => "",
			"CODE_TEMP" => "bill",
			"ACTION" => Array(Array(
				"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
				"NAME" => GetMessage("SALE_WIZARD_PS_BILL"),
				"ACTION_FILE" => "/bitrix/modules/sale/payment/bill",
				"RESULT_FILE" => "",
				"NEW_WINDOW" => "Y",
				"PARAMS" => serialize(Array(
					"DATE_INSERT" => Array("TYPE" => "ORDER", "VALUE" => "DATE_INSERT_DATE"),
					"SELLER_NAME" => Array("TYPE" => "", "VALUE" => $shopOfName),
					"SELLER_ADDRESS" => Array("TYPE" => "", "VALUE" => $shopAdr),
					"SELLER_PHONE" => Array("TYPE" => "", "VALUE" => $siteTelephone),
					"SELLER_INN" => Array("TYPE" => "", "VALUE" => $shopINN),
					"SELLER_KPP" => Array("TYPE" => "", "VALUE" => $shopKPP),
					"SELLER_RS" => Array("TYPE" => "", "VALUE" => $shopNS),
					"SELLER_KS" => Array("TYPE" => "", "VALUE" => $shopKS),
					"SELLER_BIK" => Array("TYPE" => "", "VALUE" => $shopBANKREKV),
					"BUYER_NAME" => Array("TYPE" => "PROPERTY", "VALUE" => "COMPANY_NAME"),
					"BUYER_INN" => Array("TYPE" => "PROPERTY", "VALUE" => "INN"),
					"BUYER_ADDRESS" => Array("TYPE" => "PROPERTY", "VALUE" => "COMPANY_ADR"),
					"BUYER_PHONE" => Array("TYPE" => "PROPERTY", "VALUE" => "PHONE"),
					"BUYER_FAX" => Array("TYPE" => "PROPERTY", "VALUE" => "FAX"),
					"BUYER_PAYER_NAME" => Array("TYPE" => "PROPERTY", "VALUE" => "CONTACT_PERSON"),
					"PATH_TO_STAMP" => Array("TYPE" => "", "VALUE" => $siteStamp),
				)),
				"HAVE_PAYMENT" => "Y",
				"HAVE_ACTION" => "N",
				"HAVE_RESULT" => "N",
				"HAVE_PREPAY" => "N",
				"HAVE_RESULT_RECEIVE" => "N",
			))

		);
	}
//Ukraine
	if($shopLocalization == "ua")
	{
		//oshadbank
		if (($personType["fiz"] == "Y" || $personType["fiz_ua"] == "Y") && $paysystem["oshad"] == "Y")
		{
			$arPaySystems[] = Array(
				"NAME" => GetMessage("SALE_WIZARD_PS_OS"),
				"SORT" => 90,
				"DESCRIPTION" => GetMessage("SALE_WIZARD_PS_OS_DESCR"),
				"CODE_TEMP" => "oshadbank",
				"ACTION" => Array(
					Array(
						"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"],
						"NAME" => GetMessage("SALE_WIZARD_PS_OS"),
						"ACTION_FILE" => "/bitrix/modules/sale/payment/oshadbank",
						"RESULT_FILE" => "",
						"NEW_WINDOW" => "Y",
						"PARAMS" => serialize(Array(
							"RECIPIENT_NAME" => Array("TYPE" => "", "VALUE" => $shopOfName),
							//"INN" => Array("TYPE" => "", "VALUE" => $shopINN_ua),
							"RECIPIENT_ID" => Array("TYPE" => "", "VALUE" => $shopEGRPU_ua),
							"RECIPIENT_NUMBER" => Array("TYPE" => "", "VALUE" => $shopNS_ua),
							//"RECIPIENT_BANK" => Array("TYPE" => "", "VALUE" => $shopBANK),
							"RECIPIENT_BANK" => Array("TYPE" => "", "VALUE" => $shopBank_ua),
							"RECIPIENT_CODE_BANK" => Array("TYPE" => "", "VALUE" => $shopMFO_ua),
							//"NDS" => Array("TYPE" => "", "VALUE" => $shopNDS_ua),
							"PAYER_FIO" => Array("TYPE" => "PROPERTY", "VALUE" => "FIO"),
							"PAYER_ADRES" => Array("TYPE" => "PROPERTY", "VALUE" => "ADDRESS"),
							"ORDER_ID" => Array("TYPE" => "ORDER", "VALUE" => "ID"),
							"DATE_INSERT" => Array("TYPE" => "ORDER", "VALUE" => "DATE_INSERT_DATE"),
							"PAYER_CONTACT_PERSON" => Array("TYPE" => "PROPERTY", "VALUE" => "FIO"),
							"PAYER_INDEX" => Array("TYPE" => "PROPERTY", "VALUE" => "ZIP"),
							"PAYER_COUNTRY" => Array("TYPE" => "PROPERTY", "VALUE" => "LOCATION_COUNTRY"),
							"PAYER_TOWN" => Array("TYPE" => "PROPERTY", "VALUE" => "LOCATION_CITY"),
							//"PAYER_ADDRESS_FACT" => Array("TYPE" => "PROPERTY", "VALUE" => "ADDRESS"),
							"SHOULD_PAY" => Array("TYPE" => "ORDER", "VALUE" => "PRICE"),
						)),
						"HAVE_PAYMENT" => "Y",
						"HAVE_ACTION" => "N",
						"HAVE_RESULT" => "N",
						"HAVE_PREPAY" => "N",
						"HAVE_RESULT_RECEIVE" => "N",
					),
					Array(
						"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz_ua"],
						"NAME" => GetMessage("SALE_WIZARD_PS_OS"),
						"ACTION_FILE" => "/bitrix/modules/sale/payment/oshadbank",
						"RESULT_FILE" => "",
						"NEW_WINDOW" => "Y",
						"PARAMS" => serialize(Array(
							"RECIPIENT_NAME" => Array("TYPE" => "", "VALUE" => $shopOfName),
							//"INN" => Array("TYPE" => "", "VALUE" => $shopINN_ua),
							"RECIPIENT_ID" => Array("TYPE" => "", "VALUE" => $shopEGRPU_ua),
							"RECIPIENT_NUMBER" => Array("TYPE" => "", "VALUE" => $shopNS_ua),
							//"RECIPIENT_BANK" => Array("TYPE" => "", "VALUE" => $shopBANK),
							"RECIPIENT_BANK" => Array("TYPE" => "", "VALUE" => $shopBank_ua),
							"RECIPIENT_CODE_BANK" => Array("TYPE" => "", "VALUE" => $shopMFO_ua),
							//"NDS" => Array("TYPE" => "", "VALUE" => $shopNDS_ua),
							"PAYER_FIO" => Array("TYPE" => "PROPERTY", "VALUE" => "FIO"),
							"PAYER_ADRES" => Array("TYPE" => "PROPERTY", "VALUE" => "ADDRESS"),
							"ORDER_ID" => Array("TYPE" => "ORDER", "VALUE" => "ID"),
							"DATE_INSERT" => Array("TYPE" => "ORDER", "VALUE" => "DATE_INSERT_DATE"),
							"PAYER_CONTACT_PERSON" => Array("TYPE" => "PROPERTY", "VALUE" => "FIO"),
							"PAYER_INDEX" => Array("TYPE" => "PROPERTY", "VALUE" => "ZIP"),
							"PAYER_COUNTRY" => Array("TYPE" => "PROPERTY", "VALUE" => "LOCATION_COUNTRY"),
							"PAYER_TOWN" => Array("TYPE" => "PROPERTY", "VALUE" => "LOCATION_CITY"),
							//"PAYER_ADDRESS_FACT" => Array("TYPE" => "PROPERTY", "VALUE" => "ADDRESS"),
							"SHOULD_PAY" => Array("TYPE" => "ORDER", "VALUE" => "PRICE"),
						)),
						"HAVE_PAYMENT" => "Y",
						"HAVE_ACTION" => "N",
						"HAVE_RESULT" => "N",
						"HAVE_PREPAY" => "N",
						"HAVE_RESULT_RECEIVE" => "N",
					)
				)
			);
		}
		if ($personType["fiz"] == "Y")
		{
			$arPaySystems[] = Array(
				"NAME" => GetMessage("SALE_WIZARD_YMoney"),
				"SORT" => 60,
				"DESCRIPTION" => "",
				"CODE_TEMP" => "yandex_3x",
				"ACTION" => Array(Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"],
					"NAME" => GetMessage("SALE_WIZARD_YMoney"),
					"ACTION_FILE" => "/bitrix/modules/sale/payment/yandex_3x",
					"RESULT_FILE" => "",
					"NEW_WINDOW" => "N",
					"PARAMS" => serialize(Array(
						"ORDER_ID" => Array("TYPE" => "ORDER", "VALUE" => "ID"),
						"USER_ID" => Array("TYPE" => "PROPERTY", "VALUE" => "FIO"),
						"ORDER_DATE" => Array("TYPE" => "ORDER", "VALUE" => "DATE_INSERT"),
						"SHOULD_PAY" => Array("TYPE" => "ORDER", "VALUE" => "PRICE"),
						"PAYMENT_VALUE" => Array("VALUE" => "PC")
					)),
					"HAVE_PAYMENT" => "Y",
					"HAVE_ACTION" => "N",
					"HAVE_RESULT" => "N",
					"HAVE_PREPAY" => "N",
					"HAVE_RESULT_RECEIVE" => "Y",
				))
			);
			$arPaySystems[] = Array(
				"NAME" => GetMessage("SALE_WIZARD_YCards"),
				"SORT" => 70,
				"DESCRIPTION" => "",
				"CODE_TEMP" => "yandex_3x",
				"ACTION" => Array(Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"],
					"NAME" => GetMessage("SALE_WIZARD_YCards"),
					"ACTION_FILE" => "/bitrix/modules/sale/payment/yandex_3x",
					"RESULT_FILE" => "",
					"NEW_WINDOW" => "N",
					"PARAMS" => serialize(Array(
						"ORDER_ID" => Array("TYPE" => "ORDER", "VALUE" => "ID"),
						"USER_ID" => Array("TYPE" => "PROPERTY", "VALUE" => "FIO"),
						"ORDER_DATE" => Array("TYPE" => "ORDER", "VALUE" => "DATE_INSERT"),
						"SHOULD_PAY" => Array("TYPE" => "ORDER", "VALUE" => "PRICE"),
						"PAYMENT_VALUE" => Array("VALUE" => "AC")
					)),
					"HAVE_PAYMENT" => "Y",
					"HAVE_ACTION" => "N",
					"HAVE_RESULT" => "N",
					"HAVE_PREPAY" => "N",
					"HAVE_RESULT_RECEIVE" => "Y",
				))
			);
			$arPaySystems[] = Array(
				"NAME" => GetMessage("SALE_WIZARD_YTerminals"),
				"SORT" => 80,
				"DESCRIPTION" => "",
				"CODE_TEMP" => "yandex_3x",
				"ACTION" => Array(Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"],
					"NAME" => GetMessage("SALE_WIZARD_YTerminals"),
					"ACTION_FILE" => "/bitrix/modules/sale/payment/yandex_3x",
					"RESULT_FILE" => "",
					"NEW_WINDOW" => "N",
					"PARAMS" => serialize(Array(
						"ORDER_ID" => Array("TYPE" => "ORDER", "VALUE" => "ID"),
						"USER_ID" => Array("TYPE" => "PROPERTY", "VALUE" => "FIO"),
						"ORDER_DATE" => Array("TYPE" => "ORDER", "VALUE" => "DATE_INSERT"),
						"SHOULD_PAY" => Array("TYPE" => "ORDER", "VALUE" => "PRICE"),
						"PAYMENT_VALUE" => Array("VALUE" => "GP")
					)),
					"HAVE_PAYMENT" => "Y",
					"HAVE_ACTION" => "N",
					"HAVE_RESULT" => "N",
					"HAVE_PREPAY" => "N",
					"HAVE_RESULT_RECEIVE" => "Y",
				))
			);
		}
		//bill
		if (/*($personType["fiz"] == "Y" || $personType["fiz_ua"] == "Y") && */$paysystem["bill"] == "Y")
		{
			$arPaySystemTmp = Array(
				"NAME" => GetMessage("SALE_WIZARD_PS_BILL"),
				"SORT" => 100,
				"DESCRIPTION" => "",
				"CODE_TEMP" => "bill_ua"
			);

			if ($personType["ur"] == "Y")
				$arPaySystemTmp["ACTION"][] =  Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["ur"],
					"NAME" => GetMessage("SALE_WIZARD_PS_BILL"),
					"ACTION_FILE" => "/bitrix/modules/sale/payment/bill_ua",
					"RESULT_FILE" => "",
					"NEW_WINDOW" => "Y",
					"PARAMS" => serialize(Array(
						"DATE_INSERT" => Array("TYPE" => "ORDER", "VALUE" => "DATE_INSERT_DATE"),
						"SELLER_NAME" => Array("TYPE" => "", "VALUE" => $shopOfName),
						"SELLER_ADDRESS" => Array("TYPE" => "", "VALUE" => $shopAdr),
						"SELLER_PHONE" => Array("TYPE" => "", "VALUE" => $siteTelephone),
						"SELLER_IPN" => Array("TYPE" => "", "VALUE" => $shopINN_ua),
						"SELLER_EDRPOY" => Array("TYPE" => "", "VALUE" => $shopEGRPU_ua),
						"SELLER_RS" => Array("TYPE" => "", "VALUE" => $shopNS_ua),
						//"BANK_NAME" => Array("TYPE" => "", "VALUE" => $shopBANK),
						"SELLER_BANK" => Array("TYPE" => "", "VALUE" => $shopBank_ua),
						"SELLER_MFO" => Array("TYPE" => "", "VALUE" => $shopMFO_ua),
						"SELLER_PDV" => Array("TYPE" => "", "VALUE" => $shopNDS_ua),
						"ORDER_ID" => Array("TYPE" => "ORDER", "VALUE" => "ID"),
						//"Place" => Array("TYPE" => "", "VALUE" => $shopPlace_ua),
						//"FIO" => Array("TYPE" => "", "VALUE" => $shopFIO_ua),
						"SELLER_SYS" => Array("TYPE" => "", "VALUE" => $shopTax_ua),
						"BUYER_NAME" => Array("TYPE" => "PROPERTY", "VALUE" => "COMPANY_NAME"),
						"BUYER_INN" => Array("TYPE" => "PROPERTY", "VALUE" => "INN"),
						"BUYER_ADDRESS" => Array("TYPE" => "PROPERTY", "VALUE" => "COMPANY_ADR"),
						"BUYER_PHONE" => Array("TYPE" => "PROPERTY", "VALUE" => "PHONE"),
						"BUYER_FAX" => Array("TYPE" => "PROPERTY", "VALUE" => "FAX"),
						//"BUYER_PAYER_NAME" => Array("TYPE" => "PROPERTY", "VALUE" => "CONTACT_PERSON"),
						"PATH_TO_STAMP" => Array("TYPE" => "", "VALUE" => $siteStamp),
					)),
					"HAVE_PAYMENT" => "Y",
					"HAVE_ACTION" => "N",
					"HAVE_RESULT" => "N",
					"HAVE_PREPAY" => "N",
					"HAVE_RESULT_RECEIVE" => "N",
				);
			if ($personType["fiz"] == "Y")
				$arPaySystemTmp["ACTION"][] =  Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz"],
					"NAME" => GetMessage("SALE_WIZARD_PS_BILL"),
					"ACTION_FILE" => "/bitrix/modules/sale/payment/bill_ua",
					"RESULT_FILE" => "",
					"NEW_WINDOW" => "Y",
					"PARAMS" => serialize(Array(
						"DATE_INSERT" => Array("TYPE" => "ORDER", "VALUE" => "DATE_INSERT_DATE"),
						"SELLER_NAME" => Array("TYPE" => "", "VALUE" => $shopOfName),
						"SELLER_ADDRESS" => Array("TYPE" => "", "VALUE" => $shopAdr),
						"SELLER_PHONE" => Array("TYPE" => "", "VALUE" => $siteTelephone),
						"SELLER_IPN" => Array("TYPE" => "", "VALUE" => $shopINN_ua),
						"SELLER_EDRPOY" => Array("TYPE" => "", "VALUE" => $shopEGRPU_ua),
						"SELLER_RS" => Array("TYPE" => "", "VALUE" => $shopNS_ua),
						//"BANK_NAME" => Array("TYPE" => "", "VALUE" => $shopBANK),
						"SELLER_BANK" => Array("TYPE" => "", "VALUE" => $shopBank_ua),
						"SELLER_MFO" => Array("TYPE" => "", "VALUE" => $shopMFO_ua),
						"SELLER_PDV" => Array("TYPE" => "", "VALUE" => $shopNDS_ua),
						//"Place" => Array("TYPE" => "", "VALUE" => $shopPlace_ua),
						//"FIO" => Array("TYPE" => "", "VALUE" => $shopFIO_ua),
						"BUYER_NAME" => Array("TYPE" => "PROPERTY", "VALUE" => "FIO"),
						"BUYER_INN" => Array("TYPE" => "PROPERTY", "VALUE" => "INN"),
						"BUYER_ADDRESS" => Array("TYPE" => "PROPERTY", "VALUE" => "ADDRESS"),
						"BUYER_PHONE" => Array("TYPE" => "PROPERTY", "VALUE" => "PHONE"),
						"BUYER_FAX" => Array("TYPE" => "PROPERTY", "VALUE" => "FAX"),
						//"BUYER_PAYER_NAME" => Array("TYPE" => "PROPERTY", "VALUE" => "CONTACT_PERSON"),
						"PATH_TO_STAMP" => Array("TYPE" => "", "VALUE" => $siteStamp),
					)),
					"HAVE_PAYMENT" => "Y",
					"HAVE_ACTION" => "N",
					"HAVE_RESULT" => "N",
					"HAVE_PREPAY" => "N",
					"HAVE_RESULT_RECEIVE" => "N",
				);
			if ($personType["fiz_ua"] == "Y")
				$arPaySystemTmp["ACTION"][] =  Array(
					"PERSON_TYPE_ID" => $arGeneralInfo["personType"]["fiz_ua"],
					"NAME" => GetMessage("SALE_WIZARD_PS_BILL"),
					"ACTION_FILE" => "/bitrix/modules/sale/payment/bill_ua",
					"RESULT_FILE" => "",
					"NEW_WINDOW" => "Y",
					"PARAMS" => serialize(Array(
						"DATE_INSERT" => Array("TYPE" => "ORDER", "VALUE" => "DATE_INSERT_DATE"),
						"SELLER_NAME" => Array("TYPE" => "", "VALUE" => $shopOfName),
						"SELLER_ADDRESS" => Array("TYPE" => "", "VALUE" => $shopAdr),
						"SELLER_PHONE" => Array("TYPE" => "", "VALUE" => $siteTelephone),
						"SELLER_IPN" => Array("TYPE" => "", "VALUE" => $shopINN_ua),
						"SELLER_EDRPOY" => Array("TYPE" => "", "VALUE" => $shopEGRPU_ua),
						"SELLER_RS" => Array("TYPE" => "", "VALUE" => $shopNS_ua),
						//"BANK_NAME" => Array("TYPE" => "", "VALUE" => $shopBANK),
						"SELLER_BANK" => Array("TYPE" => "", "VALUE" => $shopBank_ua),
						"SELLER_MFO" => Array("TYPE" => "", "VALUE" => $shopMFO_ua),
						"SELLER_PDV" => Array("TYPE" => "", "VALUE" => $shopNDS_ua),
						//"Place" => Array("TYPE" => "", "VALUE" => $shopPlace_ua),
						//"FIO" => Array("TYPE" => "", "VALUE" => $shopFIO_ua),
						//"Tax" => Array("TYPE" => "", "VALUE" => $shopTax_ua),
						"BUYER_NAME" => Array("TYPE" => "PROPERTY", "VALUE" => "FIO"),
						"BUYER_INN" => Array("TYPE" => "PROPERTY", "VALUE" => "EGRPU"),
						"BUYER_ADDRESS" => Array("TYPE" => "PROPERTY", "VALUE" => "COMPANY_ADR"),
						"BUYER_PHONE" => Array("TYPE" => "PROPERTY", "VALUE" => "PHONE"),
						"BUYER_FAX" => Array("TYPE" => "PROPERTY", "VALUE" => "FAX"),
						//"BUYER_PAYER_NAME" => Array("TYPE" => "PROPERTY", "VALUE" => "CONTACT_PERSON"),
						"PATH_TO_STAMP" => Array("TYPE" => "", "VALUE" => $siteStamp),
					)),
					"HAVE_PAYMENT" => "Y",
					"HAVE_ACTION" => "N",
					"HAVE_RESULT" => "N",
					"HAVE_PREPAY" => "N",
					"HAVE_RESULT_RECEIVE" => "N",
				);
			$arPaySystems[] = $arPaySystemTmp;
		}
	}
	//}

	foreach($arPaySystems as $val)
	{
		$dbSalePaySystem = CSalePaySystem::GetList(array(), array("LID" => WIZARD_SITE_ID, "NAME" => $val["NAME"]), false, false, array("ID", "NAME"));
		if ($arSalePaySystem = $dbSalePaySystem->GetNext())
		{
			if ($arSalePaySystem["NAME"] == GetMessage("SALE_WIZARD_PS_SB") || $arSalePaySystem["NAME"] == GetMessage("SALE_WIZARD_PS_BILL") || $arSalePaySystem["NAME"] == GetMessage("SALE_WIZARD_PS_OS"))
			{
				foreach($val["ACTION"] as $action)
				{
					$arGeneralInfo["paySystem"][$val["CODE_TEMP"]][$action["PERSON_TYPE_ID"]] = $arSalePaySystem["ID"];
					$action["PAY_SYSTEM_ID"] = $arSalePaySystem["ID"];
					$dbSalePaySystemAction = CSalePaySystemAction::GetList(array(), array("PAY_SYSTEM_ID" =>  $arSalePaySystem["ID"], "PERSON_TYPE_ID" => $action["PERSON_TYPE_ID"]), false, false, array("ID"));
					if ($arSalePaySystemAction = $dbSalePaySystemAction->GetNext())
					{
						CSalePaySystemAction::Update($arSalePaySystemAction["ID"], $action);
					}
					else
					{
						if (strlen($action["ACTION_FILE"]) > 0
							&& file_exists($_SERVER["DOCUMENT_ROOT"].$action["ACTION_FILE"]."/logo.gif"))
						{
							$action["LOGOTIP"] = CFile::MakeFileArray($_SERVER["DOCUMENT_ROOT"].$action["ACTION_FILE"]."/logo.gif");
						}

						CSalePaySystemAction::Add($action);
					}
				}
			}
		}
		else
		{
			$id = CSalePaySystem::Add(
				Array(
					"LID" => WIZARD_SITE_ID,
					"CURRENCY" => $defCurrency,
					"NAME" => $val["NAME"],
					"ACTIVE" => ($val["ACTIVE"] == "N") ? "N" : "Y",
					"SORT" => $val["SORT"],
					"DESCRIPTION" => $val["DESCRIPTION"]
				)
			);

			foreach($val["ACTION"] as &$action)
			{
				$arGeneralInfo["paySystem"][$val["CODE_TEMP"]][$action["PERSON_TYPE_ID"]] = $id;
				$action["PAY_SYSTEM_ID"] = $id;
				if (
					strlen($action["ACTION_FILE"]) > 0
					&& file_exists($_SERVER["DOCUMENT_ROOT"].$action["ACTION_FILE"]."/logo.gif")
					&& !is_array($action["LOGOTIP"])
				)
				{
					$action["LOGOTIP"] = CFile::MakeFileArray($_SERVER["DOCUMENT_ROOT"].$action["ACTION_FILE"]."/logo.gif");
				}

				CSalePaySystemAction::Add($action);
			}
		}
	}

	if (COption::GetOptionString("optimus", "wizard_installed", "N", WIZARD_SITE_ID) != "Y" || WIZARD_INSTALL_DEMO_DATA)
	{
		if (version_compare($saleVersion, '15.0.0', '>='))
		{
			$orderPaidStatus    = 'P';
			$deliveryAssembleStatus  = 'DA';
			$deliveryGoodsStatus     = 'DG';
			$deliveryTransportStatus = 'DT';
			$deliveryShipmentStatus  = 'DS';

			$statusIds = array(
				$orderPaidStatus, $deliveryAssembleStatus, $deliveryGoodsStatus, $deliveryTransportStatus, $deliveryShipmentStatus,
			);

			$statusLanguages = array();

			foreach($arLanguages as $langID)
			{
				Loc::loadLanguageFile($_SERVER['DOCUMENT_ROOT'].'/bitrix/modules/sale/lib/status.php', $langID);

				foreach ($statusIds as $statusId)
				{
					if ($statusName = Loc::getMessage("SALE_STATUS_{$statusId}"))
					{
						$statusLanguages[$statusId] []= array(
							'LID'         => $langID,
							'NAME'        => $statusName,
							'DESCRIPTION' => Loc::getMessage("SALE_STATUS_{$statusId}_DESCR"),
						);
					}
				}
			}

			OrderStatus::install(array(
				'ID'     => $orderPaidStatus,
				'SORT'   => 150,
				'NOTIFY' => 'Y',
				'LANG'   => $statusLanguages[$orderPaidStatus],
			));
			CSaleStatus::CreateMailTemplate($orderPaidStatus);

			DeliveryStatus::install(array(
				'ID'     => $deliveryAssembleStatus,
				'SORT'   => 310,
				'NOTIFY' => 'Y',
				'LANG'   => $statusLanguages[$deliveryAssembleStatus],
			));

			DeliveryStatus::install(array(
				'ID'     => $deliveryGoodsStatus,
				'SORT'   => 320,
				'NOTIFY' => 'Y',
				'LANG'   => $statusLanguages[$deliveryGoodsStatus],
			));

			DeliveryStatus::install(array(
				'ID'     => $deliveryTransportStatus,
				'SORT'   => 330,
				'NOTIFY' => 'Y',
				'LANG'   => $statusLanguages[$deliveryTransportStatus],
			));

			DeliveryStatus::install(array(
				'ID'     => $deliveryShipmentStatus,
				'SORT'   => 340,
				'NOTIFY' => 'Y',
				'LANG'   => $statusLanguages[$deliveryShipmentStatus],
			));
		}
		else
		{
			$bStatusP = false;
			$dbStatus = CSaleStatus::GetList(Array("SORT" => "ASC"));
			while($arStatus = $dbStatus->Fetch())
			{
				$arFields = Array();
				foreach($arLanguages as $langID)
				{
					WizardServices::IncludeServiceLang("step1.php", $langID);
					$arFields["LANG"][] = Array("LID" => $langID, "NAME" => GetMessage("WIZ_SALE_STATUS_".$arStatus["ID"]), "DESCRIPTION" => GetMessage("WIZ_SALE_STATUS_DESCRIPTION_".$arStatus["ID"]));
				}
				$arFields["ID"] = $arStatus["ID"];
				CSaleStatus::Update($arStatus["ID"], $arFields);
				if($arStatus["ID"] == "P")
					$bStatusP = true;
			}
			if(!$bStatusP)
			{
				$arFields = Array("ID" => "P", "SORT" => 150);
				foreach($arLanguages as $langID)
				{
					WizardServices::IncludeServiceLang("step1.php", $langID);
					$arFields["LANG"][] = Array("LID" => $langID, "NAME" => GetMessage("WIZ_SALE_STATUS_P"), "DESCRIPTION" => GetMessage("WIZ_SALE_STATUS_DESCRIPTION_P"));
				}

				$ID = CSaleStatus::Add($arFields);
				if ($ID !== '')
				{
					CSaleStatus::CreateMailTemplate($ID);
				}
			}
		}

		if(CModule::IncludeModule("currency"))
		{
			$dbCur = CCurrency::GetList($by="currency", $o = "asc");
			while($arCur = $dbCur->Fetch())
			{
				if($lang == "ru")
					CCurrencyLang::Update($arCur["CURRENCY"], $lang, array("DECIMALS" => 2, "HIDE_ZERO" => "Y"));
				elseif($arCur["CURRENCY"] == "EUR")
					CCurrencyLang::Update($arCur["CURRENCY"], $lang, array("DECIMALS" => 2, "FORMAT_STRING" => "&euro;#"));
			}
		}
		WizardServices::IncludeServiceLang("step1.php", $lang);

		if (CModule::IncludeModule("catalog"))
		{
			$dbVat = CCatalogVat::GetListEx(
				array(),
				array('RATE' => 0),
				false,
				false,
				array('ID', 'RATE')
			);
			if(!($dbVat->Fetch()))
			{
				$arF = array("ACTIVE" => "Y", "SORT" => "100", "NAME" => GetMessage("WIZ_VAT_1"), "RATE" => 0);
				CCatalogVat::Add($arF);
			}
			$dbVat = CCatalogVat::GetListEx(
				array(),
				array('RATE' => GetMessage("WIZ_VAT_2_VALUE")),
				false,
				false,
				array('ID', 'RATE')
			);
			if(!($dbVat->Fetch()))
			{
				$arF = array("ACTIVE" => "Y", "SORT" => "200", "NAME" => GetMessage("WIZ_VAT_2"), "RATE" => GetMessage("WIZ_VAT_2_VALUE"));
				CCatalogVat::Add($arF);
			}
			$dbResultList = CCatalogGroup::GetList(array(), array("CODE" => "BASE"));
			if($arRes = $dbResultList->Fetch())
			{
				$arFields = Array();
				foreach($arLanguages as $langID)
				{
					WizardServices::IncludeServiceLang("step1.php", $langID);
					$arFields["USER_LANG"][$langID] = GetMessage("WIZ_PRICE_NAME");
				}
				$arFields["BASE"] = "Y";
				if ($wizard->GetVar("installPriceBASE") == "Y")
				{
					$db_res = CCatalogGroup::GetGroupsList(array("CATALOG_GROUP_ID"=>'1', "BUY"=>"Y"));
					if ($ar_res = $db_res->Fetch())
					{
						$wizGroupId[] = $ar_res['GROUP_ID'];
					}
					$wizGroupId[] = 2;
					$arFields["USER_GROUP"] = $wizGroupId;
					$arFields["USER_GROUP_BUY"] = $wizGroupId;
				}
				CCatalogGroup::Update($arRes["ID"], $arFields);
			}
		}

		//making orders
		function __MakeOrder($prdCnt=1, $arData = Array())
		{
			global $APPLICATION, $USER, $DB;
			CModule::IncludeModule("iblock");
			CModule::IncludeModule("sale");
			CModule::IncludeModule("catalog");
			$arPrd = Array();
			$dbItem = CIBlockElement::GetList(Array(/*"PROPERTY_MORE_PHOTO" => "DESC", "ID" => "ASC"*/), Array("IBLOCK_TYPE" => "offers", "IBLOCK_SITE_ID" => WIZARD_SITE_ID, "PROPERTY_NEWPRODUCT" => false), false, Array("nTopCount" => 100), Array("ID", "IBLOCK_ID", "XML_ID", "NAME", "DETAIL_PAGE_URL", "IBLOCK_XML_ID"));
			while($arItem = $dbItem->GetNext())
				$arPrd[] = $arItem;

			if(!empty($arPrd))
			{
				for($i=0; $i<$prdCnt;$i++)
				{
					$prdID = $arPrd[mt_rand(20, 99)];
					$arProduct = CCatalogProduct::GetByID($prdID["ID"]);
					$CALLBACK_FUNC = "";
					$arCallbackPrice = CSaleBasket::ReReadPrice($CALLBACK_FUNC, "catalog", $prdID["ID"], 1);

					$arFields = array(
							"PRODUCT_ID" => $prdID["ID"],
							"PRODUCT_PRICE_ID" => $arCallbackPrice["PRODUCT_PRICE_ID"],
							"PRICE" => $arCallbackPrice["PRICE"],
							"CURRENCY" => $arCallbackPrice["CURRENCY"],
							"WEIGHT" => $arProduct["WEIGHT"],
							"QUANTITY" => 1,
							"LID" => WIZARD_SITE_ID,
							"DELAY" => "N",
							"CAN_BUY" => "Y",
							"NAME" => $prdID["NAME"],
							"CALLBACK_FUNC" => $CALLBACK_FUNC,
							"MODULE" => "catalog",
							"PRODUCT_PROVIDER_CLASS" => "CCatalogProductProvider",
							"ORDER_CALLBACK_FUNC" => "",
							"CANCEL_CALLBACK_FUNC" => "",
							"PAY_CALLBACK_FUNC" => "",
							"DETAIL_PAGE_URL" => $prdID["DETAIL_PAGE_URL"],
							"CATALOG_XML_ID" => $prdID["IBLOCK_XML_ID"],
							"PRODUCT_XML_ID" => $prdID["XML_ID"],
							"VAT_RATE" => $arCallbackPrice['VAT_RATE'],
						);
					$addres = CSaleBasket::Add($arFields);
				}

				$arOrder = Array(
						"LID" => $arData["SITE_ID"],
						"PERSON_TYPE_ID" => $arData["PERSON_TYPE_ID"],
						"PAYED" => "N",
						"CANCELED" => "N",
						"STATUS_ID" => "N",
						"PRICE" => 1,
						"CURRENCY" => $arData["CURRENCY"],
						"USER_ID" => $arData["USER_ID"],
						"PAY_SYSTEM_ID" => $arData["PAY_SYSTEM_ID"],
						//"PRICE_DELIVERY" => $arData["PRICE_DELIVERY"],
						//"DELIVERY_ID" => $arData["DELIVERY_ID"],
					);

				$dbFUserListTmp = CSaleUser::GetList(array("USER_ID" => $arData["USER_ID"]));
				if(empty($dbFUserListTmp))
				{
					$arFields = array(
							"=DATE_INSERT" => $DB->GetNowFunction(),
							"=DATE_UPDATE" => $DB->GetNowFunction(),
							"USER_ID" => $arData["USER_ID"]
						);

					$ID = CSaleUser::_Add($arFields);
				}

				$orderID = CSaleOrder::Add($arOrder);
				CSaleBasket::OrderBasket($orderID, CSaleBasket::GetBasketUserID(), WIZARD_SITE_ID);
				$dbBasketItems = CSaleBasket::GetList(
						array("NAME" => "ASC"),
						array(
								"FUSER_ID" => CSaleBasket::GetBasketUserID(),
								"LID" => WIZARD_SITE_ID,
								"ORDER_ID" => $orderID
							),
						false,
						false,
						array("ID", "CALLBACK_FUNC", "MODULE", "PRODUCT_ID", "QUANTITY", "DELAY", "CAN_BUY", "PRICE", "WEIGHT", "NAME")
					);
				$ORDER_PRICE = 0;
				while ($arBasketItems = $dbBasketItems->GetNext())
				{
					$ORDER_PRICE += roundEx($arBasketItems["PRICE"], SALE_VALUE_PRECISION) * DoubleVal($arBasketItems["QUANTITY"]);
				}

				$totalOrderPrice = $ORDER_PRICE + $arData["PRICE_DELIVERY"];
				CSaleOrder::Update($orderID, Array("PRICE" => $totalOrderPrice));
				foreach($arData["PROPS"] as $val)
				{
					$arFields = Array(
							"ORDER_ID" => $orderID,
							"ORDER_PROPS_ID" => $val["ID"],
							"NAME" => $val["NAME"],
							"CODE" => $val["CODE"],
							"VALUE" => $val["VALUE"],
						);
					CSaleOrderPropsValue::Add($arFields);
				}
				return $orderID;
			}
		}

		$personType = $arGeneralInfo["personType"]["ur"];
		if(IntVal($arGeneralInfo["personType"]["fiz"]) > 0)
			$personType = $arGeneralInfo["personType"]["fiz"];
		if(IntVal($personType) <= 0)
		{
			$dbPerson = CSalePersonType::GetList(array(), Array("LID" => WIZARD_SITE_ID));
			if($arPerson = $dbPerson->Fetch())
			{
				$personType = $arPerson["ID"];
			}
		}
		if(IntVal($arGeneralInfo["paySystem"]["cash"][$personType]) > 0 )
			$paySystem = $arGeneralInfo["paySystem"]["cash"][$personType];
		elseif(IntVal($arGeneralInfo["paySystem"]["bill"][$personType]) > 0 )
			$paySystem = $arGeneralInfo["paySystem"]["bill"][$personType];
		elseif(IntVal($arGeneralInfo["paySystem"]["bill"][$personType]) > 0 )
			$paySystem = $arGeneralInfo["paySystem"]["sber"][$personType];
		elseif(IntVal($arGeneralInfo["paySystem"]["paypal"][$personType]) > 0 )
			$paySystem = $arGeneralInfo["paySystem"]["paypal"][$personType];
		else
		{
			$dbPS = CSalePaySystem::GetList(Array(), Array("LID" => WIZARD_SITE_ID));
			if($arPS = $dbPS->Fetch())
				$paySystem = $arPS["ID"];
		}

		if(\Bitrix\Main\Config\Option::get('sale', 'sale_locationpro_migrated', '') == 'Y')
		{
			if(!strlen($location))
			{
				// get first found
				$item = \Bitrix\Sale\Location\LocationTable::getList(array('limit' => 1, 'select' => array('CODE')))->fetch();
				if($item)
					$location = $item['CODE'];
			}
		}
		else
		{
			if(IntVal($location) <= 0)
			{
				$dbLocation = CSaleLocation::GetList(Array("ID" => "ASC"), Array("LID" => $lang));
				if($arLocation = $dbLocation->Fetch())
				{
					$location = $arLocation["ID"];
				}
			}
		}

		if(empty($arGeneralInfo["properies"][$personType]))
		{
			$dbProp = CSaleOrderProps::GetList(array(), Array("PERSON_TYPE_ID" => $personType));
			while($arProp = $dbProp->Fetch())
				$arGeneralInfo["properies"][$personType][$arProp["CODE"]] = $arProp;
		}

		if(WIZARD_INSTALL_DEMO_DATA)
		{

			$db_sales = CSaleOrder::GetList(array("DATE_INSERT" => "ASC"), array("LID" => WIZARD_SITE_ID), false, false, array("ID"));
			while ($ar_sales = $db_sales->Fetch())
			{
				CSaleOrder::Delete($ar_sales["ID"]);
			}
		}

		$arData = Array(
				"SITE_ID" => WIZARD_SITE_ID,
				"PERSON_TYPE_ID" => $personType,
				"CURRENCY" => $defCurrency,
				"USER_ID" => 1,
				"PAY_SYSTEM_ID" => $paySystem,
				//"PRICE_DELIVERY" => "0",
				//"DELIVERY_ID" => "",
				"PROPS" => Array(),
			);
		foreach($arGeneralInfo["properies"][$personType] as $key => $val)
		{
			$arProp = Array(
						"ID" => $val["ID"],
						"NAME" => $val["NAME"],
						"CODE" => $val["CODE"],
						"VALUE" => "",
					);

			if($key == "FIO" || $key == "CONTACT_PERSON")
				$arProp["VALUE"] = GetMessage("WIZ_ORD_FIO");
			elseif($key == "ADDRESS" || $key == "COMPANY_ADR")
				$arProp["VALUE"] = GetMessage("WIZ_ORD_ADR");
			elseif($key == "EMAIL")
				$arProp["VALUE"] = "example@example.com";
			elseif($key == "PHONE")
				$arProp["VALUE"] = "8 495 2312121";
			elseif($key == "ZIP")
				$arProp["VALUE"] = "101000";
			elseif($key == "LOCATION")
				$arProp["VALUE"] = $location;
			elseif($key == "CITY")
				$arProp["VALUE"] = $shopLocation;
			$arData["PROPS"][] = $arProp;
		}
		$orderID = __MakeOrder(3, $arData);
		CSaleOrder::DeliverOrder($orderID, "Y");
		CSaleOrder::PayOrder($orderID, "Y");
		CSaleOrder::StatusOrder($orderID, "F");
		$orderID = __MakeOrder(4, $arData);
		CSaleOrder::DeliverOrder($orderID, "Y");
		CSaleOrder::PayOrder($orderID, "Y");
		CSaleOrder::StatusOrder($orderID, "F");
		$orderID = __MakeOrder(2, $arData);
		CSaleOrder::PayOrder($orderID, "Y");
		CSaleOrder::StatusOrder($orderID, "P");
		$orderID = __MakeOrder(1, $arData);
		$orderID = __MakeOrder(3, $arData);
		CSaleOrder::CancelOrder($orderID, "Y");
		CAgent::RemoveAgent("CSaleProduct::RefreshProductList();", "sale");
		CAgent::AddAgent("CSaleProduct::RefreshProductList();", "sale", "N", 60*60*24*4, "", "Y");
	}

}
return true;
?>88   24156|/aspro.optimus/install/wizards/aspro/optimus/site/services/sale/step2.php|a7a14f2b<?
if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)
	die();

if(!CModule::IncludeModule('sale'))
	return;

$dbSite = CSite::GetByID(WIZARD_SITE_ID);
if($arSite = $dbSite -> Fetch())
	$lang = $arSite["LANGUAGE_ID"];
if(strlen($lang) <= 0)
	$lang = "ru";
$bRus = false;
if($lang == "ru")
	$bRus = true;

$defCurrency = "EUR";
if($lang == "ru")
	$defCurrency = "RUB";
elseif($lang == "en")
	$defCurrency = "USD";

$delivery = $wizard->GetVar("delivery");
$shopLocalization = $wizard->GetVar("shopLocalization");

WizardServices::IncludeServiceLang("step2.php", $lang);
if(COption::GetOptionString("optimus", "wizard_installed", "N", WIZARD_SITE_ID) != "Y")
{
	$locationGroupID = 0;
	$arLocation4Delivery = Array();
	$arLocationArr = Array();

	if(\Bitrix\Main\Config\Option::get('sale', 'sale_locationpro_migrated', '') == 'Y') // CSaleLocation::isLocationProMigrated()
	{
		$res = \Bitrix\Sale\Location\LocationTable::getList(array('filter' => array('=TYPE.CODE' => 'COUNTRY'), 'select' => array('ID')));
		while($item = $res->fetch())
		{
			$arLocation4Delivery[] = Array("LOCATION_ID" => $item["ID"], "LOCATION_TYPE"=>"L");
		}
	}
	else
	{
		$dbLocation = CSaleLocation::GetList(Array(), array("LID" => $lang));
		while($arLocation = $dbLocation->Fetch())
		{
			$arLocation4Delivery[] = Array("LOCATION_ID" => $arLocation["ID"], "LOCATION_TYPE"=>"L");
			$arLocationArr[] = $arLocation["ID"];
		}

		$dbGroup = CSaleLocationGroup::GetList();
		if($arGroup = $dbGroup->Fetch())
		{
			$arLocation4Delivery[] = Array("LOCATION_ID" => $arGroup["ID"], "LOCATION_TYPE"=>"G");
		}
		else
		{
			$groupLang = array(
				array("LID" => "en", "NAME" => "Group 1")
			);

			if($bRus)
				$groupLang[] = array("LID" => $lang, "NAME" => GetMessage("SALE_WIZARD_GROUP"));
				
			$locationGroupID = CSaleLocationGroup::Add(
					array(
						"SORT" => 150,
						"LOCATION_ID" => $arLocationArr,
						"LANG" => $groupLang
					)
				);
		}
		//Location group
		if(IntVal($locationGroupID) > 0)
			$arLocation4Delivery[] = Array("LOCATION_ID" => $locationGroupID, "LOCATION_TYPE"=>"G");
	}

	$dbDelivery = CSaleDelivery::GetList(array(), Array("LID" => WIZARD_SITE_ID));
	if(!$dbDelivery->Fetch())
	{
		//delivery handler
		$arFields = Array(
				"NAME" => GetMessage("SALE_WIZARD_COUR"),
				"LID" => WIZARD_SITE_ID,
				"PERIOD_FROM" => 0,
				"PERIOD_TO" => 0,
				"PERIOD_TYPE" => "D",
				"WEIGHT_FROM" => 0,
				"WEIGHT_TO" => 0,
				"ORDER_PRICE_FROM" => 0,
				"ORDER_PRICE_TO" => 0,
				"ORDER_CURRENCY" => $defCurrency,
				"ACTIVE" => "Y",
				"PRICE" => ($bRus ? "500" : "30"),
				"CURRENCY" => $defCurrency,
				"SORT" => 100,
				"DESCRIPTION" => GetMessage("SALE_WIZARD_COUR_DESCR"),
				"LOCATIONS" => $arLocation4Delivery,
			);
		if($delivery["courier"] != "Y")
			$arFields["ACTIVE"] = "N";

		CSaleDelivery::Add($arFields);
		
		$arFields = Array(
				"NAME" => GetMessage("SALE_WIZARD_COUR1"),
				"LID" => WIZARD_SITE_ID,
				"PERIOD_FROM" => 0,
				"PERIOD_TO" => 0,
				"PERIOD_TYPE" => "D",
				"WEIGHT_FROM" => 0,
				"WEIGHT_TO" => 0,
				"ORDER_PRICE_FROM" => 0,
				"ORDER_PRICE_TO" => 0,
				"ORDER_CURRENCY" => $defCurrency,
				"ACTIVE" => "Y",
				"PRICE" => 0,
				"CURRENCY" => $defCurrency,
				"SORT" => 200,
				"DESCRIPTION" => GetMessage("SALE_WIZARD_COUR1_DESCR"),
				"LOCATIONS" => $arLocation4Delivery,
			);
		if($delivery["self"] != "Y")
			$arFields["ACTIVE"] = "N";
		CSaleDelivery::Add($arFields);
	}

	$dbDelivery = CSaleDeliveryHandler::GetList();
	if(!$dbDelivery->Fetch())
	{
		if($bRus)
		{
			if ($shopLocalization == "ru")
			{
				$arFields = Array(
						"LID" => "",
						"ACTIVE" => "N",
						"HID" => "cpcr",
						"NAME" => GetMessage("SALE_WIZARD_SPSR"),
						"SORT" => 100,
						"DESCRIPTION" => GetMessage("SALE_WIZARD_SPSR_DESCR"),
						"HANDLERS" => "/bitrix/modules/sale/delivery/delivery_cpcr.php",
						"SETTINGS" => "8",
						"PROFILES" => "",
						"TAX_RATE" => 0,
				);
				if (file_exists($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif"))
					$arFields["LOGOTIP"] = CFile::MakeFileArray($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif");

				CSaleDeliveryHandler::Set("cpcr", $arFields);

				$arFields = Array(
						"LID" => "",
						"ACTIVE" => "Y",
						"HID" => "russianpost",
						"NAME" => GetMessage("SALE_WIZARD_MAIL"),
						"SORT" => 200,
						"DESCRIPTION" => "",
						"HANDLERS" => "/bitrix/modules/sale/delivery/delivery_russianpost.php",
						"SETTINGS" => "23",
						"PROFILES" => "",
						"TAX_RATE" => 0,
					);

				if (file_exists($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif"))
					$arFields["LOGOTIP"] = CFile::MakeFileArray($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif");

				if($delivery["russianpost"] != "Y")
					$arFields["ACTIVE"] = "N";
				CSaleDeliveryHandler::Set("russianpost", $arFields);

			//new russian post
				$arFields = Array(
					"LID" => "",
					"ACTIVE" => "Y",
					"HID" => "rus_post",
					"NAME" => GetMessage("SALE_WIZARD_MAIL2"),
					"SORT" => 400,
					"DESCRIPTION" => "",
					"HANDLERS" => "/bitrix/modules/sale/delivery/delivery_rus_post.php",
					"SETTINGS" => "23",
					"PROFILES" => "",
					"TAX_RATE" => 0,
				);

				if (file_exists($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif"))
					$arFields["LOGOTIP"] = CFile::MakeFileArray($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif");

				if($delivery["rus_post"] != "Y")
					$arFields["ACTIVE"] = "N";
				CSaleDeliveryHandler::Set("rus_post", $arFields);

				$arFields = Array(
					"LID" => "",
					"ACTIVE" => "Y",
					"HID" => "rus_post_first",
					"NAME" => GetMessage("SALE_WIZARD_MAIL_FIRST"),
					"SORT" => 500,
					"DESCRIPTION" => "",
					"HANDLERS" => "/bitrix/modules/sale/delivery/delivery_rus_post_first.php",
					"SETTINGS" => "23",
					"PROFILES" => "",
					"TAX_RATE" => 0,
				);

				if (file_exists($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif"))
					$arFields["LOGOTIP"] = CFile::MakeFileArray($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif");

				if($delivery["rus_post_first"] != "Y")
					$arFields["ACTIVE"] = "N";
				CSaleDeliveryHandler::Set("rus_post_first", $arFields);
			}
			elseif ($shopLocalization == "ua")
			{
				$arFields = Array(
					"LID" => "",
					"ACTIVE" => "Y",
					"HID" => "ua_post",
					"NAME" => GetMessage("SALE_WIZARD_UA_POST"),
					"SORT" => 600,
					"DESCRIPTION" => "",
					"HANDLERS" => "/bitrix/modules/sale/delivery/delivery_ua_post.php",
					"SETTINGS" => "23",
					"PROFILES" => "",
					"TAX_RATE" => 0,
				);

				if (file_exists($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif"))
					$arFields["LOGOTIP"] = CFile::MakeFileArray($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif");

				if($delivery["ua_post"] != "Y")
					$arFields["ACTIVE"] = "N";
				CSaleDeliveryHandler::Set("ua_post", $arFields);
			}
			elseif ($shopLocalization == "kz")
			{
				$arFields = Array(
					"LID" => "",
					"ACTIVE" => "Y",
					"HID" => "kaz_post",
					"NAME" => GetMessage("SALE_WIZARD_KAZ_POST"),
					"SORT" => 600,
					"DESCRIPTION" => "",
					"HANDLERS" => "/bitrix/modules/sale/delivery/delivery_kaz_post.php",
					"SETTINGS" => "23",
					"PROFILES" => "",
					"TAX_RATE" => 0,
				);

				if (file_exists($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif"))
					$arFields["LOGOTIP"] = CFile::MakeFileArray($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif");

				if($delivery["kaz_post"] != "Y")
					$arFields["ACTIVE"] = "N";
				CSaleDeliveryHandler::Set("kaz_post", $arFields);
			}
		}

		$arFields = Array(
				"LID" => "",
				"ACTIVE" => "Y",
				"HID" => "ups",
				"NAME" => "UPS",
				"SORT" => 300,
				"DESCRIPTION" => GetMessage("SALE_WIZARD_UPS"),
				"HANDLERS" => "/bitrix/modules/sale/delivery/delivery_ups.php",
				"SETTINGS" => "/bitrix/modules/sale/delivery/ups/ru_csv_zones.csv;/bitrix/modules/sale/delivery/ups/ru_csv_export.csv",
				"PROFILES" => "",
				"TAX_RATE" => 0,
			);

		if (file_exists($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/delivery/".$arFields["HID"]."_logo.gif"))
			$arFields["LOGOTIP"] = CFile::MakeFileArray($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/delivery/".$arFields["HID"]."_logo.gif");

		if($delivery["ups"] != "Y")
			$arFields["ACTIVE"] = "N";
		CSaleDeliveryHandler::Set("ups", $arFields);
		
		$arFields = Array(
				"LID" => "",
				"ACTIVE" => "Y",
				"HID" => "dhlusa",
				"NAME" => "DHL (USA)",
				"SORT" => 300,
				"DESCRIPTION" => GetMessage("SALE_WIZARD_UPS"),
				"HANDLERS" => "/bitrix/modules/sale/delivery/delivery_dhl_usa.php ",
				"SETTINGS" => "",
				"PROFILES" => "",
				"TAX_RATE" => 0,
			);

		if (file_exists($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/delivery/".$arFields["HID"]."_logo.gif"))
			$arFields["LOGOTIP"] = CFile::MakeFileArray($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/delivery/".$arFields["HID"]."_logo.gif");
		
		if($delivery["dhl"] != "Y")
			$arFields["ACTIVE"] = "N";
		CSaleDeliveryHandler::Set("dhlusa", $arFields);
	}
}
else
{
	$arAutoDeliveries = array();
	$dbDelivery = CSaleDeliveryHandler::GetList();
	while($arDelivery = $dbDelivery->Fetch())
	{
		$arAutoDeliveries[$arDelivery["SID"]] = $arDelivery["ACTIVE"];
	}

	if($bRus)
	{
		if ($shopLocalization == "ru")
		{
			if($delivery["russianpost"] == "Y" && $arAutoDeliveries["russianpost"] != "Y")
			{
				$arFields = Array(
					"LID" => "",
					"ACTIVE" => "Y",
					"HID" => "russianpost",
					"NAME" => GetMessage("SALE_WIZARD_MAIL"),
					"SORT" => 200,
					"DESCRIPTION" => "",
					"HANDLERS" => "/bitrix/modules/sale/delivery/delivery_russianpost.php",
					"SETTINGS" => "23",
					"PROFILES" => "",
					"TAX_RATE" => 0,
				);

				if (file_exists($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif"))
					$arFields["LOGOTIP"] = CFile::MakeFileArray($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif");

				CSaleDeliveryHandler::Set("russianpost", $arFields);
			}

			if($delivery["rus_post"] == "Y" && $arAutoDeliveries["rus_post"] != "Y")
			{
				//new russian post
				$arFields = Array(
					"LID" => "",
					"ACTIVE" => "Y",
					"HID" => "rus_post",
					"NAME" => GetMessage("SALE_WIZARD_MAIL2"),
					"SORT" => 400,
					"DESCRIPTION" => "",
					"HANDLERS" => "/bitrix/modules/sale/delivery/delivery_rus_post.php",
					"SETTINGS" => "23",
					"PROFILES" => "",
					"TAX_RATE" => 0,
				);

				if (file_exists($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif"))
					$arFields["LOGOTIP"] = CFile::MakeFileArray($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif");

				CSaleDeliveryHandler::Set("rus_post", $arFields);
			}

			if($delivery["rus_post_first"] == "Y" && $arAutoDeliveries["rus_post_first"] != "Y")
			{
				$arFields = Array(
					"LID" => "",
					"ACTIVE" => "Y",
					"HID" => "rus_post_first",
					"NAME" => GetMessage("SALE_WIZARD_MAIL_FIRST"),
					"SORT" => 500,
					"DESCRIPTION" => "",
					"HANDLERS" => "/bitrix/modules/sale/delivery/delivery_rus_post_first.php",
					"SETTINGS" => "23",
					"PROFILES" => "",
					"TAX_RATE" => 0,
				);

				if (file_exists($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif"))
					$arFields["LOGOTIP"] = CFile::MakeFileArray($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif");

				CSaleDeliveryHandler::Set("rus_post_first", $arFields);
			}
		}
		elseif ($shopLocalization == "ua")
		{
			if($delivery["ua_post"] == "Y" && $arAutoDeliveries["ua_post"] != "Y")
			{
				$arFields = Array(
					"LID" => "",
					"ACTIVE" => "Y",
					"HID" => "ua_post",
					"NAME" => GetMessage("SALE_WIZARD_UA_POST"),
					"SORT" => 600,
					"DESCRIPTION" => "",
					"HANDLERS" => "/bitrix/modules/sale/delivery/delivery_ua_post.php",
					"SETTINGS" => "23",
					"PROFILES" => "",
					"TAX_RATE" => 0,
				);

				if (file_exists($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif"))
					$arFields["LOGOTIP"] = CFile::MakeFileArray($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif");

				CSaleDeliveryHandler::Set("ua_post", $arFields);
			}
		}
		elseif ($shopLocalization == "kz")
		{
			if($delivery["kaz_post"] == "Y" && $arAutoDeliveries["kaz_post"] != "Y")
			{
				$arFields = Array(
					"LID" => "",
					"ACTIVE" => "Y",
					"HID" => "kaz_post",
					"NAME" => GetMessage("SALE_WIZARD_KAZ_POST"),
					"SORT" => 600,
					"DESCRIPTION" => "",
					"HANDLERS" => "/bitrix/modules/sale/delivery/delivery_kaz_post.php",
					"SETTINGS" => "23",
					"PROFILES" => "",
					"TAX_RATE" => 0,
				);

				if (file_exists($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif"))
					$arFields["LOGOTIP"] = CFile::MakeFileArray($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/sale/ru/delivery/".$arFields["HID"]."_logo.gif");

				CSaleDeliveryHandler::Set("kaz_post", $arFields);
			}
		}
	}
}

if(CModule::IncludeModule('subscribe'))
{
	$templates_dir = $_SERVER["DOCUMENT_ROOT"].BX_PERSONAL_ROOT."/php_interface/subscribe/templates";
	$template = $templates_dir."/store_news_".WIZARD_SITE_ID;
	//Copy template from module if where was no template
	if(!file_exists($template))
	{
		CopyDirFiles($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/subscribe/install/php_interface/subscribe/templates/news", $template, false, true);
		$fname = $template."/template.php";
		if(file_exists($fname) && is_file($fname) && ($fh = fopen($fname, "rb")))
		{
			$php_source = fread($fh, filesize($fname));
			$php_source = preg_replace("#([\"'])(SITE_ID)(\\1)(\\s*=>\s*)([\"'])(.*?)(\\5)#", "\\1\\2\\3\\4\\5".WIZARD_SITE_ID."\\7", $php_source);
			$php_source = str_replace("Windows-1251", $arSite["CHARSET"], $php_source);
			$php_source = str_replace("Hello!", GetMessage("SUBSCR_1"), $php_source);
			$php_source = str_replace("<P>Best Regards!</P>", "", $php_source);
			fclose($fh);
			$fh = fopen($fname, "wb");
			if($fh)
			{
				fwrite($fh, $php_source);
				fclose($fh);
			}
		}
	}
	
	$shopEmail = trim($wizard->GetVar("shopEmail"));
	if(!strlen($shopEmail)){
		$shopEmail = trim($wizard->GetVar("siteEmail"));
	}
	if(!strlen($shopEmail)){
		$shopEmail = "info@".$_SERVER["SERVER_NAME"];
	}
	if(!check_email($shopEmail) || !filter_var($shopEmail, FILTER_VALIDATE_EMAIL)){
		$shopEmail = "info@ourtestsite.com";
	}

	$rsRubric = CRubric::GetList(array(), array(
		"NAME" => GetMessage("SUBSCR_1"),
		"LID" => WIZARD_SITE_ID,
	));
	if(!$rsRubric->Fetch())
	{
		//Database actions
		$arFields = Array(
			"ACTIVE"	=> "Y",
			"NAME"		=> GetMessage("SUBSCR_1"),
			"SORT"		=> 100,
			"DESCRIPTION"	=> GetMessage("SUBSCR_2"),
			"LID"		=> WIZARD_SITE_ID,
			"AUTO"		=> "Y",
			"DAYS_OF_MONTH"	=> "",
			"DAYS_OF_WEEK"	=> "1,2,3,4,5,6,7",  
			"TIMES_OF_DAY"	=> "05:00",
			"TEMPLATE"	=> substr($template, strlen($_SERVER["DOCUMENT_ROOT"]."/")),
			"VISIBLE"	=> "Y",
			"FROM_FIELD"	=> $shopEmail, //COption::GetOptionString("main", "email_from", "info@ourtestsite.com"),
			"LAST_EXECUTED"	=> ConvertTimeStamp(false, "FULL"), 
		);
		$obRubric = new CRubric;
		$ID = $obRubric->Add($arFields);
		
		if(!$ID) {
			$arFields["FROM_FIELD"] = "info@ourtestsite.com";
			$ID = $obRubric->Add($arFields);
		}
	}
	COption::SetOptionString('subscribe', 'subscribe_section', '#SITE_DIR#personal/subscribe/');
}

$shopEmail = $wizard->GetVar("shopEmail");
$siteName = $wizard->GetVar("siteName");
COption::SetOptionString('main', 'email_from', $shopEmail);
COption::SetOptionString('main', 'new_user_registration', 'Y');
COption::SetOptionString('main', 'captcha_registration', 'Y');
COption::SetOptionString('main', 'site_name', $siteName);
COption::SetOptionInt("search", "suggest_save_days", 250);

if(strlen(COption::GetOptionString('main', 'CAPTCHA_presets', '')) <= 0)
{
	COption::SetOptionString('main', 'CAPTCHA_transparentTextPercent', '0');
	COption::SetOptionString('main', 'CAPTCHA_arBGColor_1', 'FFFFFF');
	COption::SetOptionString('main', 'CAPTCHA_arBGColor_2', 'FFFFFF');
	COption::SetOptionString('main', 'CAPTCHA_numEllipses', '0');
	COption::SetOptionString('main', 'CAPTCHA_arEllipseColor_1', '7F7F7F');
	COption::SetOptionString('main', 'CAPTCHA_arEllipseColor_2', 'FFFFFF');
	COption::SetOptionString('main', 'CAPTCHA_bLinesOverText', 'Y');
	COption::SetOptionString('main', 'CAPTCHA_numLines', '0');
	COption::SetOptionString('main', 'CAPTCHA_arLineColor_1', 'FFFFFF');
	COption::SetOptionString('main', 'CAPTCHA_arLineColor_2', 'FFFFFF');
	COption::SetOptionString('main', 'CAPTCHA_textStartX', '40');
	COption::SetOptionString('main', 'CAPTCHA_textFontSize', '26');
	COption::SetOptionString('main', 'CAPTCHA_arTextColor_1', '000000');
	COption::SetOptionString('main', 'CAPTCHA_arTextColor_2', '000000');
	COption::SetOptionString('main', 'CAPTCHA_textAngel_1', '-15');
	COption::SetOptionString('main', 'CAPTCHA_textAngel_2', '15');
	COption::SetOptionString('main', 'CAPTCHA_textDistance_1', '-2');
	COption::SetOptionString('main', 'CAPTCHA_textDistance_2', '-2');
	COption::SetOptionString('main', 'CAPTCHA_bWaveTransformation', 'Y');
	COption::SetOptionString('main', 'CAPTCHA_arBorderColor', '000000');
	COption::SetOptionString('main', 'CAPTCHA_arTTFFiles', 'bitrix_captcha.ttf');
	COption::SetOptionString('main', 'CAPTCHA_letters', 'ABCDEFGHJKLMNPQRSTWXYZ23456789');
	COption::SetOptionString('main', 'CAPTCHA_presets', '2');
}	
COption::SetOptionString('socialnetwork', 'allow_tooltip', 'N', false ,  WIZARD_SITE_ID);

//Edit profile task
$editProfileTask = false;
$dbResult = CTask::GetList(Array(), Array("NAME" => "main_change_profile"));
if ($arTask = $dbResult->Fetch())
	$editProfileTask = $arTask["ID"];
//Registered users group
$dbResult = CGroup::GetList($by, $order, Array("STRING_ID" => "REGISTERED_USERS"));
if (!$dbResult->Fetch())
{
	$group = new CGroup;
	$arFields = Array(
		"ACTIVE" => "Y",
		"C_SORT" => 3,
		"NAME" => GetMessage("REGISTERED_USERS"),
		"STRING_ID" => "REGISTERED_USERS",
	);

	$groupID = $group->Add($arFields);
	if ($groupID > 0)
	{
		COption::SetOptionString("main", "new_user_registration_def_group", $groupID);
		if ($editProfileTask)
			CGroup::SetTasks($groupID, Array($editProfileTask), true);
	}
}

$rsGroups = CGroup::GetList(($by="c_sort"), ($order="desc"), array("ACTIVE"=>"Y", "ADMIN"=>"N", "ANONYMOUS"=>"N")); 
if(!($rsGroups->Fetch()))
{
	$group = new CGroup;
	$arFields = Array(
		"ACTIVE"       => "Y",
		"C_SORT"       => 100,
		"NAME"         => GetMessage("REGISTERED_USERS"),
		"DESCRIPTION"  => "",
		);
	$NEW_GROUP_ID = $group->Add($arFields);
	COption::SetOptionString('main', 'new_user_registration_def_group', $NEW_GROUP_ID);
	
	$rsTasks = CTask::GetList(array(), array("MODULE_ID"=>"main", "SYS"=>"Y", "BINDIG"=>"module","LETTER"=>"P"));
	if($arTask = $rsTasks->Fetch())
	{
		CGroup::SetModulePermission($NEW_GROUP_ID, $arTask["MODULE_ID"], $arTask["ID"]);
	}
}

$userGroupID = "";
$dbGroup = CGroup::GetList($by = "", $order = "", Array("STRING_ID" => "sale_administrator"));
if($arGroup = $dbGroup -> Fetch())
{
	$userGroupID = $arGroup["ID"];
}
else
{
	$group = new CGroup;
	$arFields = Array(
		"ACTIVE"       => "Y",
		"C_SORT"       => 200,
		"NAME"         => GetMessage("SALE_WIZARD_ADMIN_SALE"),
		"DESCRIPTION"  => GetMessage("SALE_WIZARD_ADMIN_SALE_DESCR"),
		"USER_ID"      => array(),
		"STRING_ID"      => "sale_administrator",
		);
	$userGroupID = $group->Add($arFields);
}

if(IntVal($userGroupID) > 0)
{
	WizardServices::SetFilePermission(Array($siteID, "/bitrix/admin"), Array($userGroupID => "R"));
	WizardServices::SetFilePermission(Array($siteID, "/bitrix/admin"), Array($userGroupID => "R"));
	
	$new_task_id = CTask::Add(array(
			"NAME" => GetMessage("SALE_WIZARD_ADMIN_SALE"),
			"DESCRIPTION" => GetMessage("SALE_WIZARD_ADMIN_SALE_DESCR"),
			"LETTER" => "Q",
			"BINDING" => "module",
			"MODULE_ID" => "main",
	));
	if($new_task_id)
	{
		$arOps = array();
		$rsOp = COperation::GetList(array(), array("NAME"=>"cache_control|view_own_profile|edit_own_profile"));
		while($arOp = $rsOp->Fetch())
			$arOps[] = $arOp["ID"];
		CTask::SetOperations($new_task_id, $arOps);
	}
	
	$rsTasks = CTask::GetList(array(), array("MODULE_ID"=>"main", "SYS"=>"N", "BINDIG"=>"module","LETTER"=>"Q"));
	if($arTask = $rsTasks->Fetch())
	{
		CGroup::SetModulePermission($userGroupID, $arTask["MODULE_ID"], $arTask["ID"]);
	}
	
	CMain::SetGroupRight("sale", $userGroupID, "U");
	
	$rsTasks = CTask::GetList(array(), array("MODULE_ID"=>"catalog", "SYS"=>"Y", "BINDIG"=>"module","LETTER"=>"T"));
	while($arTask = $rsTasks->Fetch())
	{
		CGroup::SetModulePermission($userGroupID, $arTask["MODULE_ID"], $arTask["ID"]);
	}

	if (COption::GetOptionString("main", "~sale_converted_15", "") == "Y")
	{
		$dbTask = Bitrix\Main\TaskTable::getList(array(
			'select' => array('ID'),
			'filter' => array('NAME' => 'sale_status_all')
		));
		if ($task = $dbTask->Fetch())
		{
			$dbTasks = Bitrix\Sale\Internals\StatusGroupTaskTable::getList(array('filter' => array(
				'GROUP_ID' => $userGroupID,
				'TASK_ID' => $task['ID'],
			)));
			if (!$dbTasks->Fetch())
			{
				$dbStatus = Bitrix\Sale\Internals\StatusTable::getList(array(
					'filter' => array('TYPE' => array('O', 'D')),
					'select' => array('ID')
				));

				while($status = $dbStatus->Fetch())
				{
					$groupTasks = array(
						'STATUS_ID' => $status['ID'],
						'GROUP_ID' => $userGroupID,
						'TASK_ID' => $task['ID'],
					);
					Bitrix\Sale\Internals\StatusGroupTaskTable::add($groupTasks);
				}
			}
		}
	}
}

$userGroupID = "";
$dbGroup = CGroup::GetList($by = "", $order = "", Array("STRING_ID" => "content_editor"));

if($arGroup = $dbGroup -> Fetch())
{
	$userGroupID = $arGroup["ID"];
}
else
{
	$group = new CGroup;
	$arFields = Array(
		"ACTIVE"       => "Y",
		"C_SORT"       => 300,
		"NAME"         => GetMessage("SALE_WIZARD_CONTENT_EDITOR"),
		"DESCRIPTION"  => GetMessage("SALE_WIZARD_CONTENT_EDITOR_DESCR"),
		"USER_ID"      => array(),
		"STRING_ID"      => "content_editor",
		);
	$userGroupID = $group->Add($arFields);
	$DB->Query("INSERT INTO b_sticker_group_task(GROUP_ID, TASK_ID)	SELECT ".intVal($userGroupID).", ID FROM b_task WHERE NAME='stickers_edit' AND MODULE_ID='fileman'", false, "FILE: ".__FILE__."<br> LINE: ".__LINE__);
}
if(IntVal($userGroupID) > 0)
{
	WizardServices::SetFilePermission(Array($siteID, "/bitrix/admin"), Array($userGroupID => "R"));
	
	$rsTasks = CTask::GetList(array(), array("MODULE_ID"=>"main", "SYS"=>"Y", "BINDIG"=>"module","LETTER"=>"P"));
	if($arTask = $rsTasks->Fetch())
	{
		CGroup::SetModulePermission($userGroupID, $arTask["MODULE_ID"], $arTask["ID"]);
	}
	
	$rsTasks = CTask::GetList(array(), array("MODULE_ID"=>"fileman", "SYS"=>"Y", "BINDIG"=>"module","LETTER"=>"F"));
	if($arTask = $rsTasks->Fetch())
	{
		CGroup::SetModulePermission($userGroupID, $arTask["MODULE_ID"], $arTask["ID"]);
	}
	
	$SiteDir = "";
	if(WIZARD_SITE_ID != "s1"){
		$SiteDir = "/site_" . WIZARD_SITE_ID;
	}
	WizardServices::SetFilePermission(Array($siteID, $SiteDir . "/index.php"), Array($userGroupID => "W"));
	WizardServices::SetFilePermission(Array($siteID, $SiteDir . "/about/"), Array($userGroupID => "W"));
	WizardServices::SetFilePermission(Array($siteID, $SiteDir . "/news/"), Array($userGroupID => "W"));
	WizardServices::SetFilePermission(Array($siteID, $SiteDir . "/catalog/"), Array($userGroupID => "W"));
	WizardServices::SetFilePermission(Array($siteID, $SiteDir . "/personal/"), Array($userGroupID => "W"));
}
COption::SetOptionString("optimus", "wizard_installed", "Y", false, WIZARD_SITE_ID);
?>68   6057|/aspro.optimus/install/images/preset/yandex_market.png|80ca4ca1PNG

   IHDR      <   L   tEXtSoftware Adobe ImageReadyqe<  "iTXtXML:com.adobe.xmp     <?xpacket begin="" id="W5M0MpCehiHzreSzNTczkc9d"?> <x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.3-c011 66.145661, 2012/02/06-14:56:27        "> <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"> <rdf:Description rdf:about="" xmlns:xmp="http://ns.adobe.com/xap/1.0/" xmlns:xmpMM="http://ns.adobe.com/xap/1.0/mm/" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmp:CreatorTool="Adobe Photoshop CS6 (Windows)" xmpMM:InstanceID="xmp.iid:A135335CA0F811E69B148B4DBD6EA8B4" xmpMM:DocumentID="xmp.did:A135335DA0F811E69B148B4DBD6EA8B4"> <xmpMM:DerivedFrom stRef:instanceID="xmp.iid:A135335AA0F811E69B148B4DBD6EA8B4" stRef:documentID="xmp.did:A135335BA0F811E69B148B4DBD6EA8B4"/> </rdf:Description> </rdf:RDF> </x:xmpmeta> <?xpacket end="r"?>n  IDATx\	x>=I ,
~ (
 #K >@*OA\}}D;;"]Ld29|_gIiYI}u.Pd	9Iz GQu}'kd$Ju (_r,YI7x_]pv4Id:?IJWOdrwCriu1?0)w(Q_~5kE]$mu\ nB
N?Pn*+WbV"s+XBA
$A	eqL|0Hw}a-"PK4nlctlQ$ E	mS""=zeB;Hlshm1Hw!=p	ax0/\t>Z@ p:FLTLiSC_~I&oqk W#KE*f0J-Vpoh1:%s9ut&Y&:wNM)))Ow{ska;XJ?>*J;v>ASmBTkzeC;YY_ur)"FmS233e%J-2l0O?7{[nEN8>}2uTuow)s=`4Yhjs}+vh8"#3f|w0Hh,0-3Og:L\{1qj? fSSs,_?u}~v0yiGi{2d#UIkJFV'%-Xr<79[B?dLGtir-K1%N|{v@-[&K:t'+mr'T[oJf.)tj$O?oYe2|pyOK4h@Ko_~9oRU0hChi*U:3o<?~2$X}U<1Dy&_s56T\uS fe117auMSSNTw}=Z}&k E<x>=zT}IRaVYf k>_BrS#SlXi3f,]	xT?J+YyVZ,wH+_*@ ;wnOM4I}[m@:*P3gTd>we]ZX6}(<vF=0c,tp*!X5N/Vc\r%R7ZV~pPUgUl.[>#J5^vetVXQ3	Kuz:dH>cp-T8XJSo0sCA_h{8UUi#"UCZs9n8''_R&is7-_\UVuw"8F|ocm5kT{WQ+}}.W_}lV:;QNdi_r~lEsF|1@P((E6AN^woW*W9\XP@sO>~hK3.N)96/SLQ}SI2w|*?Ag1'R__$UZ\oK/)r/g!i/|PMpSj N \--JteN"QM4kTSh
8Ons`KGWvL.UQ08_~gMavG>;YSniss7.+C&8#)I!G4F47S-|rG0Io2]Q;V]We-:wx~Y}d>FXUyjtYkM~Z|7*
q~I/^eR#JjJCU/(_(,$^Tlib=}1a~aR6dG'1P-j!Na|UP0Cv?-Vj6/9[4\-[VyF)VJD!1,6btuhm(n={h:@N}g}uTci?[Ji3V)SPZetMg92A((][:2N'|Mbk{F5&+$[wG+Y;v|hj#q"DYh{Q^;bSSB1V&3tX4M=ttm'Y2UsfCJGo_A&ERd 	B9pIgfzJa;fRb,*{-fQ',0[
0O!CSyf -\Pa$O>41l"}8>#Qzm3(;z
GVOkkT77SL%+jP[/#8nC]~whZ0#I|yoC@C'q$T[s75'}8h?xhq	0Hd$s"a{7.dosg)%~&lxLxQ~]'=_I}}u~-Zvsb>/zNh*OhC	:|E>!"Eq5W!>{WoD]bdR$4GHcFE)'k G!3'oL$bHh%A	8tqHg^4s){gc]CO3|W3m-Fk=o70xfeWapdx>y (g\	5Qc`QOp72p,4.:eHrx(s$P
C$I0"O<8bB |edTq:uZ\c+#j/Z}y&;j qJ(;HO^<fdGPMrhdz4P38Xe1&d@ xiKq5TuUg}}7>}HNH8u`5 jRk$l54YYmO6c\A< |9-V8Gg}AuHK7sw.cp0.!sFsIwF*8B#Y%'QiG?{pfFp `b_f	mz,j_.~Tcv~|1+AyGmFC!#UInV!^?Z5J'prBIU::5rQmFhH0cMTEw*7E2y
gJIh{mb\;3?mnun&_zW,Uy=t]s]%)D3yLeW^?ygAT?s,,[o  D&9f~/KF<!ea-% F1a1B9-c0x\%#XbAS]NK'-jfx$(uEsU}Y@Rq*t?rxt4dB]dW\lpJpmz|pS{4M:V3>&^f~>_=hkS
R's	 {eoQ-(09`asJ4kp~N8YsIxdep*ulQf,cji1>(zc?yeE1ATD0JDbyi1-2v(Ss%6Qamx4/Yq5Jy/s,1`\uH2=*g1]Y*-@u	
ty_~\nR|Zlzp#lJ[i\Lq..Qo/:=
.`l@uQfya(T'pJcQb%1By969Nii~Jou?pQ6{Z wbiomv	V$X6\?{!5yFBhaY#u/(]5G "Boh*camzP^/Yf83faML (~S-Iig+| y6@bP>OP*yZ-Yp6_zc%4D/nJO!@4H:uu{33G2J TG0UV@Rao4	_rf|&nR2&b9V7:mf,$0-;8@~j
H/ (z    IENDB`87   1593|/aspro.optimus/install/components/aspro/oneclickbuy.optimus/component.php|1fb91340<?if(!defined('B_PROLOG_INCLUDED') || B_PROLOG_INCLUDED !== true) die();
if(intval($arParams['CACHE_TIME']) < 0){
	$arParams['CACHE_TIME'] = 36000;
}
if(!strlen($arParams['DEFAULT_CURRENCY'])){
	$arParams['DEFAULT_CURRENCY'] = COption::GetOptionString('sale', 'default_currency', 'RUB');
}
if(empty($arParams['PROPERTIES'])){
	$arParams['PROPERTIES'] = array('FIO', 'PHONE');
}
if(empty($arParams['REQUIRED'])){
	$arParams['REQUIRED'] = array('FIO', 'PHONE');
}
$arParams['ELEMENT_ID'] = intval($arParams['ELEMENT_ID']);

$arResult = array(
	'ERRORS' => array(),
	'SCRIPT_PATH' => $this->{'__path'},
	'USER_ID' => false,
	'USER_FIO' => '',
	'USER_EMAIL' => '',
	'USER_PHONE' => '',
);

global $USER;
if($arResult['USER_ID'] = $USER->GetID()){
	$dbUser = $USER->GetByID($arResult['USER_ID']);
	$arUser = $dbUser->Fetch();
	$arResult['USER_FIO'] = $USER->GetFullName();
	$arResult['USER_EMAIL'] = $USER->GetEmail();
	$arResult['USER_PHONE'] = $arUser['PERSONAL_PHONE'];
}

if($this->StartResultCache()){
	/*get order props*/
	CModule::IncludeModule('sale');
	$arProps = array();
	$rsProps = CSaleOrderProps::GetList(
        array("SORT" => "ASC"),
        array(
                "ACTIVE" => "Y",
				"CODE" => $arParams["PROPERTIES"],
				"PERSON_TYPE_ID" => $arParams["DEFAULT_PERSON_TYPE"]
            )
    );
    while($arProp = $rsProps->Fetch())
    {
		if($arProp["CODE"] && ($arProp["TYPE"]=="TEXT" || $arProp["TYPE"]=="TEXTAREA"))
		{
	    	$arProps[$arProp["CODE"]] = $arProp["NAME"];
		}
    }
    $arResult["PROPS"] = $arProps;
    /**/
    
	$this->IncludeComponentTemplate();
}
?>85   23993|/aspro.optimus/install/components/aspro/oneclickbuy.optimus/script.php|a5d91f35<?
use \Bitrix\Main\Loader;
use \Bitrix\Sale\DiscountCouponsManager;

require($_SERVER["DOCUMENT_ROOT"]."/bitrix/modules/main/include/prolog_before.php");
header('Content-type: application/json; charset=utf-8');
require(dirname(__FILE__)."/lang/" . LANGUAGE_ID . "/script.php");
require(dirname(__FILE__)."/functions.php");

ob_start();

if(!function_exists('json_encode')){
    function json_encode($value){
        if(is_int($value)){
			return (string)$value;
		}
		elseif(is_string($value)){
	        $value = str_replace(array('\\', '/', '"', "\r", "\n", "\b", "\f", "\t"),  array('\\\\', '\/', '\"', '\r', '\n', '\b', '\f', '\t'), $value);
	        $convmap = array(0x80, 0xFFFF, 0, 0xFFFF);
	        $result = "";
	        for ($i = mb_strlen($value) - 1; $i >= 0; $i--){
	            $mb_char = mb_substr($value, $i, 1);
	            if (mb_ereg("&#(\\d+);", mb_encode_numericentity($mb_char, $convmap, "UTF-8"), $match)) { $result = sprintf("\\u%04x", $match[1]) . $result;  }
				else { $result = $mb_char . $result;  }
	        }
	        return '"' . $result . '"';
        }
		elseif(is_float($value)) { return str_replace(",", ".", $value); }
		elseif(is_null($value)) {  return 'null';}
		elseif(is_bool($value)) { return $value ? 'true' : 'false';   }
		elseif(is_array($value)){
            $with_keys = false;
            $n = count($value);
            for ($i = 0, reset($value); $i < $n; $i++, next($value))  { if (key($value) !== $i) {  $with_keys = true; break;  }  }
        }
		elseif (is_object($value)) { $with_keys = true; }
		else { return ''; }
        $result = array();
        if ($with_keys)  {  foreach ($value as $key => $v) {  $result[] = json_encode((string)$key) . ':' . json_encode($v); }  return '{' . implode(',', $result) . '}'; }
		else {  foreach ($value as $key => $v) { $result[] = json_encode($v); } return '[' . implode(',', $result) . ']';  }
    }
}

if(!function_exists('getJson')) {
	function getJson($message, $res='N', $error=''){
		global $APPLICATION;
		$result = array(
			'result' => $res=='Y'?'Y':'N',
			'message' => $APPLICATION->ConvertCharset($message, SITE_CHARSET, 'utf-8')
		);
		if (strlen($error) > 0) { $result['err'] = $APPLICATION->ConvertCharset($error, SITE_CHARSET, 'utf-8'); }
		return json_encode($result);
	}
}

if(!CModule::IncludeModule('sale') || !CModule::IncludeModule('iblock') || !CModule::IncludeModule('catalog') || !CModule::IncludeModule('currency')){
	die(getJson(GetMessage('CANT_INCLUDE_MODULE')));
}

global $APPLICATION, $USER;
$user_registered =$user_exists = false;
$bAllBasketBuy = $_POST['BUY_TYPE'] == 'ALL';

// conver charset
if($_POST['ONE_CLICK_BUY'] && is_array($_POST['ONE_CLICK_BUY']))
{
	foreach($_POST['ONE_CLICK_BUY'] as $key => $value)
	{
		$_POST['ONE_CLICK_BUY'][$key] = $APPLICATION->ConvertCharset($_POST['ONE_CLICK_BUY'][$key], 'utf-8', SITE_CHARSET);
	}
}

// check input data
if(!empty($_POST['ONE_CLICK_BUY']['EMAIL']) && !preg_match('/^[0-9a-zA-Z\-_\.]+@[0-9a-zA-Z\-]+[\.]{1}[0-9a-zA-Z\-]+[\.]?[0-9a-zA-Z\-]+$/', $_POST['ONE_CLICK_BUY']['EMAIL'])) die(getJson(GetMessage('BAD_EMAIL_FORMAT')));

$basketUserID = CSaleBasket::GetBasketUserID();
$arBasketItemsAll=array();

// register user if not registered
if(!$USER->IsAuthorized()){
	$resBasketItems = CSaleBasket::GetList(array('SORT' => 'DESC'), array('FUSER_ID' => $basketUserID, 'LID' => SITE_ID, 'ORDER_ID' => NULL));
	while($arBasketItem = $resBasketItems->Fetch()){
		// get props
		$arProps = array();
		$dbRes = CSaleBasket::GetPropsList(array(), array('BASKET_ID' => $arBasketItem['ID']));
		while($arProp = $dbRes->Fetch()){
		   $arProps[] = $arProp;
		}
		if($arProps){
			$arBasketItem["BASKET_PROPS"]=$arProps;
		}
		$arBasketItemsAll[]=$arBasketItem;
	}

	if(!isset($_POST['ONE_CLICK_BUY']['EMAIL']) || trim($_POST['ONE_CLICK_BUY']['EMAIL']) == ''){
		$login = 'user_' . substr((microtime(true) * 10000), 0, 12);
		if (strlen(SITE_SERVER_NAME)) { $server_name = SITE_SERVER_NAME; } else { $server_name = $_SERVER["SERVER_NAME"];}
		$server_name = Cutil::translit($server_name, "ru");
		if($dotPos = strrpos($server_name, "_")){
			$server_name = substr($server_name, 0, $dotPos).str_replace("_", ".", substr($server_name, $dotPos));
		}
		else{
			$server_name .= ".ru";
		}
		$_POST['ONE_CLICK_BUY']['EMAIL'] = $login.'@'.$server_name;
		$user_registered = true;
	}
	else{
		$dbUser = CUser::GetList(($by = 'ID'), ($order = 'ASC'), array('=EMAIL' => trim($_POST['ONE_CLICK_BUY']['EMAIL'])));
		if($dbUser->SelectedRowsCount() == 0){
			$login = 'user_'.substr((microtime(true) * 10000), 0, 12);
			$user_registered = true;
		}
		elseif($dbUser->SelectedRowsCount() == 1){
			$ar_user = $dbUser->Fetch();
			$registeredUserID = $ar_user['ID'];

			if(!checkNewVersionExt('sale')){
				$USER->Authorize($registeredUserID);
			}
			$user_registered = true;
			$user_exists = true;
		}
		else die(getJson(GetMessage('TOO_MANY_USERS')));
	}

	if($user_registered && !$user_exists){
		$captcha = COption::GetOptionString('main', 'captcha_registration', 'N');
		if($captcha == 'Y'){COption::SetOptionString('main', 'captcha_registration', 'N');}
		$userPassword = randString(10);
		$username = explode(' ', trim($_POST['ONE_CLICK_BUY']['FIO']));
		$newUser = $USER->Register($login, $username[0], $username[1], $userPassword,  $userPassword, $_POST['ONE_CLICK_BUY']['EMAIL']);
		// $newUser = $USER->Add(array("LOGIN"=>$login, "NAME"=>$username[0], "LAST_NAME"=>$username[1], "PASSWORD"=>$userPassword,  "CONFIRM_PASSWORD"=>$userPassword, "EMAIL"=>$_POST['ONE_CLICK_BUY']['EMAIL']));
		
		if($captcha == 'Y'){
			COption::SetOptionString('main', 'captcha_registration', 'Y');
		}
		if($newUser['TYPE'] == 'ERROR') {
			die(getJson(GetMessage('USER_REGISTER_FAIL'), 'N', $newUser['MESSAGE']));
		}
		else{
			$registeredUserID = $newUser['ID'];
			// $registeredUserID = $newUser;
			if (!empty($_POST['ONE_CLICK_BUY']['PHONE']) && ($arParams["AUTO_LOGOUT"]=="Y")) {
				$USER->Update($registeredUserID,  array('PERSONAL_PHONE' => $_POST['ONE_CLICK_BUY']['PHONE']));
			}
			if (!empty($username[2])) {
				$USER->Update($registeredUserID,  array('SECOND_NAME' => $username[2]));
			}
			 //$USER->Logout();
		}
	}
}
else{
	$registeredUserID = $USER->GetID();
}

if(!$_POST['ONE_CLICK_BUY']['EMAIL']){
	$_POST['ONE_CLICK_BUY']['EMAIL'] = $USER->GetEmail();
}

if(!$_POST['ONE_CLICK_BUY']['LOCATION']){
	$arLocation = CSaleOrderProps::GetList(array("SORT" => "ASC"), array("PERSON_TYPE_ID" => intval($_POST['PERSON_TYPE_ID']) > 0 ? $_POST['PERSON_TYPE_ID']: 1, "CODE" => "LOCATION"), false, false, array())->Fetch();
   	$_POST['ONE_CLICK_BUY']['LOCATION'] = $arLocation["DEFAULT_VALUE"];
}

$deliveryId = intval($_POST['DELIVERY_ID']) > 0 ? intval($_POST['DELIVERY_ID']) : "";

if(class_exists('\Bitrix\Sale\Delivery\Services\Table')){
	$deliveryId = intval($deliveryId) > 0 ? \Bitrix\Sale\Delivery\Services\Table::getCodeById($deliveryId) : "";
}

$isOrderConverted = \Bitrix\Main\Config\Option::get("main", "~sale_converted_15", 'N');

/* New discount */
DiscountCouponsManager::init();

$newOrder = array(
	'LID' => SITE_ID,
	'PAYED' => 'N',
	"CANCELED" => "N",
	"STATUS_ID" => "N",
	'USER_ID' => $registeredUserID,
	'PERSON_TYPE_ID' => intval($_POST['PERSON_TYPE_ID']) > 0 ? $_POST['PERSON_TYPE_ID'] : 1,
	'DELIVERY_ID' => $deliveryId,
	'PAY_SYSTEM_ID' => intval($_POST['PAY_SYSTEM_ID']) > 0 ? $_POST['PAY_SYSTEM_ID'] : 1,
	'USER_DESCRIPTION' => $_POST['ONE_CLICK_BUY']['COMMENT'],
	'COMMENTS' => GetMessage('FAST_ORDER_COMMENT'),
);

if($bAllBasketBuy){
	$arBasketItems = array();
	if($user_registered){
		if($arBasketItemsAll){
			$arProductIDs=array();
			foreach($arBasketItemsAll as $arItem){
				if (CSaleBasketHelper::isSetItem($arItem) || $arItem["CAN_BUY"]=="N" || $arItem["DELAY"]=="Y" || $arItem["SUBSCRIBE"]=="Y") // set item
				continue;
				$arBasketItems[] = $arItem;
				$arProductIDs[]=$arItem["PRODUCT_ID"];
			}
		}
	}else{
		$arSelFields = array("ID", "CALLBACK_FUNC", "MODULE", "PRODUCT_ID", "QUANTITY", "DELAY", "CAN_BUY", "PRICE", "WEIGHT", "NAME", "CURRENCY", "CATALOG_XML_ID", "VAT_RATE", "NOTES", "DISCOUNT_PRICE", "PRODUCT_PROVIDER_CLASS", "DIMENSIONS", "TYPE", "SET_PARENT_ID", "DETAIL_PAGE_URL");
		$resBasketItems = CSaleBasket::GetList(array('SORT' => 'DESC'), array('FUSER_ID' => $basketUserID, 'LID' => SITE_ID, 'ORDER_ID' => 'NULL', 'DELAY' => 'N', 'CAN_BUY' => 'Y'), false, false, $arSelFields);
		while($arBasketItem = $resBasketItems->Fetch()){
			if (CSaleBasketHelper::isSetItem($arBasketItem)) // set item
				continue;
			$arBasketItems[] = $arBasketItem;
		}
	}

	if($arBasketItems){
		// update basket items prices
		CSaleBasket::UpdateBasketPrices($basketUserID, SITE_ID);

		// calculate order prices
		$arOrderDat = CSaleOrder::DoCalculateOrder(SITE_ID, $registeredUserID, $arBasketItems, $newOrder['PERSON_TYPE_ID'], array(), $deliveryId, $newOrder['PAY_SYSTEM_ID'], array(), $arErrors, $arWarnings);

		// set delivery price to 0
		$newOrder['PRICE_DELIVERY_DIFF'] = $arOrderDat["PRICE_DELIVERY"];
		$newOrder["PRICE_DELIVERY"] = $newOrder["DELIVERY_PRICE"] = $arOrderDat["DELIVERY_PRICE"] = $arOrderDat["PRICE_DELIVERY"] = 0;

		$newOrder['CURRENCY'] = $arOrderDat["CURRENCY"];
		$newOrder['PRICE'] = $arOrderDat["PRICE"] = $arOrderDat["ORDER_PRICE"] + $arOrderDat["DELIVERY_PRICE"] + $arOrderDat["TAX_PRICE"] - $arOrderDat["DISCOUNT_PRICE"];
		$newOrder["DISCOUNT_VALUE"] = $arOrderDat["DISCOUNT_PRICE"];
		$newOrder["TAX_VALUE"] = $arOrderDat["bUsingVat"] == "Y" ? $arOrderDat["VAT_SUM"] : $arOrderDat["TAX_PRICE"];
		$arOrderDat['USER_ID'] = $registeredUserID;

		// create order
		if(!checkNewVersionExt('sale')){
			$orderID = $arResult["ORDER_ID"] = (int)CSaleOrder::DoSaveOrder($arOrderDat, $newOrder, 0, $arErrors);
		}else{
			$order = placeOrder($registeredUserID, $basketUserID, $newOrder, $arOrderDat, $_POST);
			$orderID = $order->GetId();
		}
		if($orderID == false){
			$strError = '';
			if($ex = $APPLICATION->GetException()) $strError = $ex->GetString();

			if($user_registered)
				$USER->Logout();

			die(getJson(GetMessage('ORDER_CREATE_FAIL'), 'N', $strError));
		}

		if($orderID){
			// add basket to order
			if($user_registered){
				foreach($arProductIDs as $id)
					CSaleBasket::Update($id, array('ORDER_ID' => $orderID));
			}else{
				CSaleBasket::OrderBasket($orderID, $basketUserID, SITE_ID, false);
			}

			if($user_registered){
				// if latest sale version with converted module sale, than check items

				$resBasketItems = CSaleBasket::GetList(array('SORT' => 'DESC'), array(/*'FUSER_ID' => $basketUserID,*/ 'LID' => SITE_ID, 'ORDER_ID' => $orderID, '!PRODUCT_ID' => $arProductIDs), false, false, array('ID', 'QUANTITY', 'PRODUCT_ID', 'TYPE', 'SET_PARENT_ID'));
				while($arBasketItem = $resBasketItems->Fetch()){
					$bSetItem = CSaleBasketHelper::isSetItem($arBasketItem);
					if($bSetItem) // set item
						continue;
					// get props
					$arProps = array();
					$dbRes = CSaleBasket::GetPropsList(array(), array('BASKET_ID' => $arBasketItem['ID']));
					while($arProp = $dbRes->Fetch()){
					   $arProps[] = $arProp;
					}

					// delete from order
					CSaleBasket::Delete($arBasketItem['ID']);

					// add to basket again
					if(!$bSetItem){
						Add2BasketByProductID($arBasketItem['PRODUCT_ID'], $arBasketItem['QUANTITY'], array(), $arProps);
					}				
				}
			}

			if(!checkNewVersionExt('sale')){
				// fix bug with DELIVERY_PRICE, when count of products more than one (bitrix bug with delivery price)
				$arUpdateFields = array('PRICE' => $newOrder['PRICE'], 'PRICE_DELIVERY' => 0);
				if(class_exists('\Bitrix\Sale\Internals\OrderTable')){
					\Bitrix\Sale\Internals\OrderTable::update($orderID, $arUpdateFields);

					// fix bug with payment SUM, when buy set
					if(class_exists('\Bitrix\Sale\Internals\PaymentTable')){
						$res = \Bitrix\Sale\Internals\PaymentTable::getList(array('order' => array('ID' => 'ASC'), 'filter' => array('ORDER_ID' => $orderID)));
						if($payment = $res->fetch()){
							\Bitrix\Sale\Internals\PaymentTable::update($payment['ID'], array('SUM' => $newOrder['PRICE']));
						}
					}
				}
				else{
					CSaleOrder::Update($orderID, $arUpdateFields);
				}
			}else{
				if(class_exists('\Bitrix\Sale\Internals\OrderTable')){
					$arOrder = \Bitrix\Sale\Internals\OrderTable::getList(array('order' => array('ID' => 'ASC'), 'filter' => array('ID' => $orderID)))->Fetch();
				}
				else{
					$arOrder = CSaleOrder::GetList(array(), array('ID' => $orderID))->Fetch();
				}
				// add payment SUM
				if(class_exists('\Bitrix\Sale\Internals\PaymentTable')){
					$res = \Bitrix\Sale\Internals\PaymentTable::getList(array('order' => array('ID' => 'ASC'), 'filter' => array('ORDER_ID' => $orderID)));
					if($payment = $res->fetch()){
						\Bitrix\Sale\Internals\PaymentTable::update($payment['ID'], array('SUM' => $arOrder['PRICE']));
					}
				}
			}
		}
	}
}
else{
	$arProps = array();
	$productID = intval($_POST['ELEMENT_ID']);
	$iblockID = intval($_POST['IBLOCK_ID']);
	$productQuantity = ((float)$_POST['ELEMENT_QUANTITY'] > 0 ? (float)$_POST['ELEMENT_QUANTITY'] : 1);

	$resProduct = CIBlockElement::GetByID($productID);
	$arProduct = $resProduct->GetNext();

	if(strlen($_REQUEST['OFFER_PROPERTIES']) && $iblockID > 0){
		$arOfferProperties=json_decode($_REQUEST["OFFER_PROPERTIES"]);
		if($arOfferProperties){
			$intProductIBlockID = (int)CIBlockElement::GetIBlockByID($productID);
			if($intProductIBlockID == $iblockID){
				$arProps = CIBlockPriceTools::CheckProductProperties(
					$iblockID,
					$productID,
					$arOfferProperties,
					$_REQUEST["prop"],
					true
				);
			}else{
				$arProps = CIBlockPriceTools::GetOfferProperties($productID, $iblockID, $arOfferProperties, $skuAddProps);
			}
		}
	}

	// if this product is already in basket, then fix quantity
	$arBasketItems = CSaleBasket::GetList(array(), array("PRODUCT_ID" => $productID, "FUSER_ID" => $basketUserID, "LID" => SITE_ID, "ORDER_ID" => NULL), false, false, array("ID"))->Fetch();
	if($arBasketItems){
		$productBasketID = $arBasketItems['ID'];
		$arFields = array("DELAY" => "N", "SUBSCRIBE" => "N", "QUANTITY" => $productQuantity);
		CSaleBasket::Update($productBasketID, $arFields);
	}
	else{
		// add product to basket
		$productBasketID = Add2BasketByProductID($productID, $productQuantity, array(), $arProps);
		if(!$productBasketID){
			$strError = '';
			if($ex = $APPLICATION->GetException()) {$strError = $ex->GetString();}

			if($user_registered)
				$USER->Logout();

			die(getJson(GetMessage('ITEM_ADD_FAIL'), 'N', $strError));
		}
	}

	$arBasketItems = array(CSaleBasket::GetByID($productBasketID));

	// update basket items prices
	CSaleBasket::UpdateBasketPrices($basketUserID, SITE_ID);

	// calculate order prices
	$arOrderDat = CSaleOrder::DoCalculateOrder(SITE_ID, $registeredUserID, $arBasketItems, $newOrder['PERSON_TYPE_ID'], array(), $deliveryId, $newOrder['PAY_SYSTEM_ID'], array(), $arErrors, $arWarnings);
	if($arErrors){
		if($user_registered)
			$USER->Logout();
		if(is_array($arErrors))
		{
			$arErrorsTmp = array();
			foreach($arErrors as $arError)
			{
				$arErrorsTmp[] = $arError["TEXT"];
			}
			$arErrors = $arErrorsTmp;
		}
		die(getJson(GetMessage('ORDER_CREATE_FAIL'), 'N', implode('<br />', (array)$arErrors)));
	}
	if(is_array($arOrderDat) && array_key_exists("ORDER_PRICE", $arOrderDat)){
		\Bitrix\Main\Loader::IncludeModule('aspro.optimus');
		$arError = COptimus::checkAllowDelivery($arOrderDat["ORDER_PRICE"], $arOrderDat["CURRENCY"]);

		if($arError["ERROR"]){
			CSaleBasket::Delete($productBasketID);
			if($user_registered){
				$USER->Logout();
				if(!$USER->IsAuthorized() && $arBasketItemsAll && !$bAllBasketBuy){
					foreach($arBasketItemsAll as $arItem){
						// get props
						$arProps = array();
						if($arItem['BASKET_PROPS']){
							$arProps=$arItem['BASKET_PROPS'];
						}
						Add2BasketByProductID($arItem['PRODUCT_ID'], $arItem['QUANTITY'], array(), $arProps);
					}
				}
			}
			COptimusCache::ClearCacheByTag('sale_basket');
			die(getJson($arError["TEXT"]));
		}
	}

	// set delivery price to 0
	$newOrder["PRICE_DELIVERY"] = $arOrderDat["DELIVERY_PRICE"] = $arOrderDat["PRICE_DELIVERY"] = 0;

	$newOrder['CURRENCY'] = $arOrderDat["CURRENCY"];
	$newOrder['PRICE'] = $arOrderDat["PRICE"] = $arOrderDat["ORDER_PRICE"] + $arOrderDat["DELIVERY_PRICE"] + $arOrderDat["TAX_PRICE"] - $arOrderDat["DISCOUNT_PRICE"];
	$newOrder["DISCOUNT_VALUE"] = $arOrderDat["DISCOUNT_PRICE"];
	$newOrder["TAX_VALUE"] = $arOrderDat["bUsingVat"] == "Y" ? $arOrderDat["VAT_SUM"] : $arOrderDat["TAX_PRICE"];
	$arOrderDat['USER_ID'] = $registeredUserID;
	
	// create order
	if(!checkNewVersionExt('sale')){
		$orderID = $arResult['ORDER_ID'] = (int)CSaleOrder::DoSaveOrder($arOrderDat, $newOrder, 0, $arErrors);
	}else{
		$order = placeOrder($registeredUserID, $basketUserID, $newOrder, $arOrderDat, $_POST);
		$orderID = $order->GetId();
	}
		
	if($orderID == false){
		$strError = '';
		if($ex = $APPLICATION->GetException()) $strError = $ex->GetString();

		if($user_registered)
			$USER->Logout();

		die(getJson(GetMessage('ORDER_CREATE_FAIL'), 'N', $strError));
	}
	if($orderID){
		// add product to order
		CSaleBasket::Update($productBasketID, array('ORDER_ID' => $orderID));
		// if latest sale version with converted module sale, than check items
		$resBasketItems = CSaleBasket::GetList(array('SORT' => 'DESC'), array(/*'FUSER_ID' => $basketUserID,*/ 'LID' => SITE_ID, 'ORDER_ID' => $orderID), false, false, array('ID', 'QUANTITY', 'PRODUCT_ID', 'TYPE', 'SET_PARENT_ID'));
		while($arBasketItem = $resBasketItems->Fetch()){
			if($arBasketItem['ID'] == $productBasketID){
				$product_id=$arBasketItem['PRODUCT_ID'];
			}
			if($arBasketItem['ID'] != $productBasketID){
				$bSetItem = CSaleBasketHelper::isSetItem($arBasketItem);
				if($bSetItem && $arBasketItem['SET_PARENT_ID'] == $productBasketID) // set item
					continue;

				// get props
				$arProps = array();
				$dbRes = CSaleBasket::GetPropsList(array(), array('BASKET_ID' => $arBasketItem['ID']));
				while($arProp = $dbRes->Fetch()){
				   $arProps[] = $arProp;
				}

				// delete from order
				CSaleBasket::Delete($arBasketItem['ID']);

				// add to basket again
				if(!$bSetItem  && $product_id!=$arBasketItem['PRODUCT_ID'] && !$user_registered){
					Add2BasketByProductID($arBasketItem['PRODUCT_ID'], $arBasketItem['QUANTITY'], array(), $arProps);
				}
			}
			
		}
		
		if(!checkNewVersionExt('sale')){
			// fix bug with DELIVERY_PRICE, when count of products more than one (bitrix bug with delivery price)
			$arUpdateFields = array('PRICE' => $newOrder['PRICE'], 'PRICE_DELIVERY' => 0);
			if(class_exists('\Bitrix\Sale\Internals\OrderTable')){
				\Bitrix\Sale\Internals\OrderTable::update($orderID, $arUpdateFields);

				// fix bug with payment SUM, when buy set
				if(class_exists('\Bitrix\Sale\Internals\PaymentTable')){
					$res = \Bitrix\Sale\Internals\PaymentTable::getList(array('order' => array('ID' => 'ASC'), 'filter' => array('ORDER_ID' => $orderID)));
					if($payment = $res->fetch()){
						\Bitrix\Sale\Internals\PaymentTable::update($payment['ID'], array('SUM' => $newOrder['PRICE']));
					}
				}
			}
			else{
				CSaleOrder::Update($orderID, $arUpdateFields);
			}
		}else{
			if(class_exists('\Bitrix\Sale\Internals\OrderTable')){
				$arOrder = \Bitrix\Sale\Internals\OrderTable::getList(array('order' => array('ID' => 'ASC'), 'filter' => array('ID' => $orderID)))->Fetch();
			}
			else{
				$arOrder = CSaleOrder::GetList(array(), array('ID' => $orderID))->Fetch();
			}
			// add payment SUM
			if(class_exists('\Bitrix\Sale\Internals\PaymentTable')){
				$res = \Bitrix\Sale\Internals\PaymentTable::getList(array('order' => array('ID' => 'ASC'), 'filter' => array('ORDER_ID' => $orderID)));
				if($payment = $res->fetch()){
					\Bitrix\Sale\Internals\PaymentTable::update($payment['ID'], array('SUM' => $arOrder['PRICE']));
				}
			}
		}
	}
}

if($user_registered){
	$USER->Logout();
	if(!$USER->IsAuthorized() && $arBasketItemsAll && !$bAllBasketBuy){
		foreach($arBasketItemsAll as $arItem){
			// get props
			$arProps = array();
			if($arItem['BASKET_PROPS']){
				$arProps=$arItem['BASKET_PROPS'];
			}
			Add2BasketByProductID($arItem['PRODUCT_ID'], $arItem['QUANTITY'], array(), $arProps);
		}
	}
}

\Bitrix\Main\Loader::IncludeModule('aspro.optimus');
COptimus::clearBasketCounters();
COptimusCache::ClearCacheByTag('sale_basket');

// add order properties
$personType = intval($_POST['PERSON_TYPE_ID']) > 0 ? $_POST['PERSON_TYPE_ID']: 1;
$res = CSaleOrderProps::GetList(array(), array('@CODE' => unserialize($_POST["PROPERTIES"]), 'PERSON_TYPE_ID' =>$personType));

while($prop = $res->Fetch()){
	if($_POST['ONE_CLICK_BUY'][$prop['CODE']]){
		$dbP = CSaleOrderPropsValue::GetList(Array(),array('ORDER_ID' => $orderID, 'ORDER_PROPS_ID' => $prop['ID']));
		if($arP = $dbP->Fetch()){
			CSaleOrderPropsValue::Update($arP['ID'], array( 'VALUE' => $_POST['ONE_CLICK_BUY'][$prop['CODE']]));
		}else{
			CSaleOrderPropsValue::Add(array('ORDER_ID' => $orderID, 'NAME' => $prop['NAME'], 'ORDER_PROPS_ID' => $prop['ID'], 'CODE' => $prop['CODE'], 'VALUE' => $_POST['ONE_CLICK_BUY'][$prop['CODE']]));
		}
	}
}

// send mail
if($orderID){
	$orderPrice = 0;
	$orderList = '';
	$arCurrency = CCurrencyLang::GetByID($newOrder['CURRENCY'], LANGUAGE_ID);
	$currencyThousandsSep = (!$arCurrency["THOUSANDS_VARIANT"] ? $arCurrency["THOUSANDS_SEP"] : ($arCurrency["THOUSANDS_VARIANT"] == "S" ? " " : ($arCurrency["THOUSANDS_VARIANT"] == "D" ? "." : ($arCurrency["THOUSANDS_VARIANT"] == "C" ? "," : ($arCurrency["THOUSANDS_VARIANT"] == "B" ? "\xA0" : "")))));

	$arSelFields = array("ID", "PRODUCT_ID", "QUANTITY", "CAN_BUY", "PRICE", "WEIGHT", "NAME", "CURRENCY", "DISCOUNT_PRICE", "TYPE", "SET_PARENT_ID", "DETAIL_PAGE_URL");
	$resBasketItems = CSaleBasket::GetList(array('SORT' => 'DESC'), array(/*'FUSER_ID' => $basketUserID,*/ 'LID' => SITE_ID, 'ORDER_ID' => $orderID), false, false, $arSelFields);
	while($arBasketItem = $resBasketItems->Fetch()){
		if(CSaleBasketHelper::isSetItem($arBasketItem)) // set item
			continue;

		if($arBasketItem['CAN_BUY'] === 'Y'){
			$curPrice = roundEx($arBasketItem['PRICE'], SALE_VALUE_PRECISION) * DoubleVal($arBasketItem['QUANTITY']);
			$orderPrice += $curPrice;
			$orderList .= GetMessage('ITEM_NAME') . $arBasketItem['NAME']
				. GetMessage('ITEM_PRICE') . str_replace('#', number_format($arBasketItem['PRICE'], $arCurrency["DECIMALS"], $arCurrency["DEC_POINT"], $currencyThousandsSep), $arCurrency['FORMAT_STRING'])
				. GetMessage('ITEM_QTY') . intval($arBasketItem['QUANTITY'])
				. GetMessage('ITEM_TOTAL') . str_replace('#', number_format($curPrice, $arCurrency["DECIMALS"], $arCurrency["DEC_POINT"], $currencyThousandsSep), $arCurrency['FORMAT_STRING']) . "\n";
		}
	}

	$arOrderQuery=CSaleOrder::GetList(array(), array("ID"=>$orderID), false, false, array("ID", "ACCOUNT_NUMBER", "PRICE"))->Fetch();

	$arMessageFields = array(
		"RS_ORDER_ID" => $orderID,
		"CLIENT_NAME" => $_POST['ONE_CLICK_BUY']['FIO'],
		"ACCOUNT_NUMBER" => $arOrderQuery["ACCOUNT_NUMBER"],
		"PHONE" => $_POST["ONE_CLICK_BUY"]["PHONE"],
		"ORDER_ITEMS" => $orderList,
		"ORDER_PRICE" => str_replace('#', number_format(($arOrderQuery["PRICE"] ? $arOrderQuery["PRICE"] : $orderPrice), $arCurrency["DECIMALS"], $arCurrency["DEC_POINT"], $currencyThousandsSep), $arCurrency['FORMAT_STRING']),
		"COMMENT" => $_POST['ONE_CLICK_BUY']['COMMENT'],
		"RS_DATE_CREATE" => ConvertTimeStamp(false, "FULL"),
	);
	if($_POST['ONE_CLICK_BUY']['EMAIL']){
		$arMessageFields["EMAIL_BUYER"]=$_POST['ONE_CLICK_BUY']['EMAIL'];
	}

	CEvent::Send("NEW_ONE_CLICK_BUY", SITE_ID, $arMessageFields);
}

$_SESSION['SALE_BASKET_NUM_PRODUCTS'][SITE_ID] = 0;

/*bind sale events*/
foreach(GetModuleEvents("sale", "OnSaleComponentOrderOneStepComplete", true) as $arEvent)
	ExecuteModuleEventEx($arEvent, Array($orderID, $arOrder, $arParams));

ob_clean();

die(getJson($orderID, 'Y'));
?>92   1403|/aspro.optimus/install/components/aspro/oneclickbuy.optimus/lang/ru/script.php|a7e44883<?
$MESS['NO_USER_NAME'] = '  .';
$MESS['NO_PHONE'] = '     .';
$MESS['CURRENCY_NOT_FOUND'] = '  ';
$MESS['AUTH_FAIL'] = ' ';
$MESS['TOO_MANY_USERS'] = '  1    email.';
$MESS['USER_REGISTER_FAIL'] = '  .';
$MESS['ORDER_CREATE_FAIL'] = '  .';
$MESS['PRODUCT_PRICE_NOT_FOUND'] = '    .';
$MESS['ITEM_ADD_FAIL'] = '    .';
$MESS['ITEM_UPDATE_FAIL'] = '      .';
$MESS['ORDER_CREATE_SUCCESS'] = '  .';
$MESS['PHONE'] = '  : ';
$MESS['ITEM_NAME'] = ': ';
$MESS['ITEM_PRICE'] = ',   : ';
$MESS['ITEM_QTY'] = ', : ';
$MESS['ITEM_TOTAL'] = ', : ';
$MESS['NO_PROPER_DATA'] = ' ';
$MESS['FAST_ORDER_COMMENT'] = ' ';
$MESS['BAD_EMAIL_FORMAT'] = '  email ';
?>
101  3059|/aspro.optimus/install/components/aspro/social.info.optimus/templates/mail/template.php|afc1cd4c<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();?>
<?$this->setFrameMode(true);?>
<div class="mail_soc_wrapper" style="text-align:center;padding-top:20px;font-size:0px;">
	<?if( !empty( $arParams["VK"] ) && $arParams["VK"] != "\"" ){?>
		<a href="<?=$arParams["VK"]?>" target="_blank" class="mail_soc" style="display:inline-block;font-size:0px;padding:5px;">
			<img src="/bitrix/components/aspro/social.info.optimus/images/vk.png" alt="<?=GetMessage("VKONTAKTE")?>" title="<?=GetMessage("VKONTAKTE")?>" />
		</a>
	<?}?>
	<?if( !empty( $arParams["ODN"] ) && $arParams["ODN"] != "\""  ){?>
		<a href="<?=$arParams["ODN"]?>" target="_blank"  class="mail_soc" style="display:inline-block;font-size:0px;padding:5px;">
			<img src="/bitrix/components/aspro/social.info.optimus/images/odn.png" alt="<?=GetMessage("ODN")?>" title="<?=GetMessage("ODN")?>" />
		</a>
	<?}?>
	<?if( !empty( $arParams["FACE"] ) && $arParams["FACE"] != "\""  ){?>
		<a href="<?=$arParams["FACE"]?>" target="_blank" class="mail_soc" style="display:inline-block;font-size:0px;padding:5px;">
			<img src="/bitrix/components/aspro/social.info.optimus/images/facebook.png" alt="<?=GetMessage("FACEBOOK")?>" title="<?=GetMessage("FACEBOOK")?>" />
		</a>
	<?}?>
	<?if( !empty( $arParams["TWIT"] ) && $arParams["TWIT"] != "\""  ){?>
		<a href="<?=$arParams["TWIT"]?>" target="_blank" class="mail_soc" style="display:inline-block;font-size:0px;padding:5px;">
			<img src="/bitrix/components/aspro/social.info.optimus/images/twitter.png" alt="<?=GetMessage("TWITTER")?>" title="<?=GetMessage("TWITTER")?>" /> 
		</a>
	<?}?>
	<?if( !empty( $arParams["INST"] ) && $arParams["INST"] != "\""  ){?>
		<a href="<?=$arParams["INST"]?>" target="_blank" class="mail_soc" style="display:inline-block;font-size:0px;padding:5px;">
			<img src="/bitrix/components/aspro/social.info.optimus/images/inst.png" alt="<?=GetMessage("INST")?>" title="<?=GetMessage("INST")?>" />
		</a>
	<?}?>
	<?if( !empty( $arParams["MAIL"] ) && $arParams["MAIL"] != "\""  ){?>
		<a href="<?=$arParams["MAIL"]?>" target="_blank" class="mail_soc" style="display:inline-block;font-size:0px;padding:5px;">
			<img src="/bitrix/components/aspro/social.info.optimus/images/mail.png" alt="<?=GetMessage("MAIL")?>" title="<?=GetMessage("MAIL")?>" />
		</a>
	<?}?>
	<?if( !empty( $arParams["GOOGLEPLUS"] ) && $arParams["GOOGLEPLUS"] != "\""  ){?>
		<a href="<?=$arParams["GOOGLEPLUS"]?>" target="_blank" class="mail_soc" style="display:inline-block;font-size:0px;padding:5px;">
			<img src="/bitrix/components/aspro/social.info.optimus/images/gplus.png" alt="<?=GetMessage("GOOGLEPLUS")?>" title="<?=GetMessage("GOOGLEPLUS")?>" /> 
		</a>
	<?}?>
	<?if( !empty( $arParams["YOUTUBE"] ) && $arParams["YOUTUBE"] != "\""  ){?>
		<a href="<?=$arParams["YOUTUBE"]?>" target="_blank" class="mail_soc" style="display:inline-block;font-size:0px;padding:5px;">
			<img src="/bitrix/components/aspro/social.info.optimus/images/youtube.png" alt="<?=GetMessage("YOUTUBE")?>" title="<?=GetMessage("YOUTUBE")?>" /> 
		</a>
	<?}?>
</div>108  288|/aspro.optimus/install/components/aspro/social.info.optimus/templates/mail/lang/ru/template.php|c6eae2c3<?
	$MESS["VKONTAKTE"] = "";
	$MESS["FACEBOOK"] = "Facebook";
	$MESS["TWITTER"] = "Twitter";
	$MESS["ODN"] = "";
	$MESS["INST"] = "Instagram";
	$MESS["MAIL"] = " ";
	$MESS["GOOGLEPLUS"] = "Google+";
	$MESS["YOUTUBE"] = "Youtube";
?>111  983|/aspro.optimus/install/components/aspro/social.info.optimus/templates/mail/lang/ru/.parameters.php|d62e8ad0<?
$MESS["T_IBLOCK_DESC_NEWS_DATE"] = "  ";
$MESS["T_IBLOCK_DESC_NEWS_NAME"] = "  ";
$MESS["T_IBLOCK_DESC_NEWS_PICTURE"] = "  ";
$MESS["T_IBLOCK_DESC_NEWS_TEXT"] = "  ";
$MESS["T_IBLOCK_DESC_NEWS_USE_SHARE"] = "  . ";
$MESS["T_IBLOCK_DESC_NEWS_SHARE_HIDE"] = "   .   ";
$MESS["T_IBLOCK_DESC_NEWS_SHARE_TEMPLATE"] = "   . ";
$MESS["T_IBLOCK_DESC_NEWS_SHARE_SYSTEM"] = " .   ";
$MESS["T_IBLOCK_DESC_NEWS_SHARE_SHORTEN_URL_LOGIN"] = "  bit.ly";
$MESS["T_IBLOCK_DESC_NEWS_SHARE_SHORTEN_URL_KEY"] = "   bit.ly";
?>105  2060|/aspro.optimus/install/components/aspro/social.info.optimus/templates/.default/template.php|1dfccf89<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();?>
<?$this->setFrameMode(true);?>

<?if($arParams["TITLE_BLOCK"] && (!empty($arParams["VK"]) || !empty($arParams["ODN"]) || !empty($arParams["FACE"]) || !empty($arParams["TWIT"]) || !empty($arParams["INST"]) || !empty($arParams["MAIL"]) || !empty($arParams["YOUTUBE"]) || !empty($arParams["GOOGLE_PLUS"]))){?>
	<div class="small_title"><?=$arParams["TITLE_BLOCK"];?></div>
<?}?>
<div class="links rows_block soc_icons">
	<?if( !empty( $arParams["VK"] ) ){?>
		<div class="item_block">
			<a href="<?=$arParams["VK"]?>" target="_blank" title="<?=GetMessage("VKONTAKTE")?>" class="vk"></a>
		</div>
	<?}?>
	<?if( !empty( $arParams["ODN"] ) ){?>
		<div class="item_block">
			<a href="<?=$arParams["ODN"]?>" target="_blank" title="<?=GetMessage("ODN")?>" class="odn"></a>
		</div>
	<?}?>
	<?if( !empty( $arParams["FACE"] ) ){?>
		<div class="item_block">
			<a href="<?=$arParams["FACE"]?>" target="_blank" title="<?=GetMessage("FACEBOOK")?>" class="fb"></a>
		</div>
	<?}?>
	<?if( !empty( $arParams["TWIT"] ) ){?>
		<div class="item_block">
			<a href="<?=$arParams["TWIT"]?>" target="_blank" title="<?=GetMessage("TWITTER")?>" class="tw"></a>
		</div>
	<?}?>
	<?if( !empty( $arParams["INST"] ) ){?>
		<div class="item_block">
			<a href="<?=$arParams["INST"]?>" target="_blank" title="<?=GetMessage("INST")?>" class="inst"></a>
		</div>
	<?}?>
	<?if( !empty( $arParams["MAIL"] ) ){?>
		<div class="item_block">
			<a href="<?=$arParams["MAIL"]?>" target="_blank" title="<?=GetMessage("MAIL")?>" class="mail"></a>
		</div>
	<?}?>
	<?if( !empty( $arParams["YOUTUBE"] ) ){?>
		<div class="item_block">
			<a href="<?=$arParams["YOUTUBE"]?>" target="_blank" title="<?=GetMessage("YOUTUBE")?>" class="youtube"></a>
		</div>
	<?}?>
	<?if( !empty( $arParams["GOOGLE_PLUS"] ) ){?>
		<div class="item_block">
			<a href="<?=$arParams["GOOGLE_PLUS"]?>" target="_blank" title="<?=GetMessage("GOOGLE_PLUS")?>" class="google_plus"></a>
		</div>
	<?}?>
</div>RTIBE