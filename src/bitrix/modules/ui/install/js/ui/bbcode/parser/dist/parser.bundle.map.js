{"version":3,"file":"parser.bundle.map.js","names":["this","BX","UI","exports","main_core","ui_bbcode_model","ParserScheme","BBCodeScheme","getTagScheme","tagName","BBCodeTagScheme","name","isAllowedTag","TAG_REGEX","isSpecialChar","symbol","includes","isList","isListItem","parserScheme","BBCodeParser","constructor","options","scheme","setScheme","DefaultBBCodeScheme","Type","isFunction","onUnknown","setOnUnknown","defaultOnUnknownHandler","getScheme","handler","TypeError","onUnknownHandler","getOnUnknownHandler","static","node","getType","BBCodeNode","ELEMENT_NODE","openingTag","getOpeningTag","closingTag","getClosingTag","replace","createText","getChildren","value","isStringFilled","toLowerCase","parseText","text","reduce","acc","push","lastItem","at","isNil","length","map","fragment","createNewLine","createTab","content","bbcode","startIndex","nextContent","slice","nextTag","match","RegExp","indexOf","source","String","test","parseAttributes","sourceAttributes","result","attributes","startsWith","trimQuotes","trim","split","filter","Boolean","item","key","parse","createRoot","stack","current","level","firstTagIndex","findNextTagIndex","textBeforeFirstTag","appendChild","fullTag","slash","attrs","index","isOpenTag","lowerCaseTagName","parent","createElement","Object","fromEntries","nextTagIndex","tagScheme","isVoid","getName","undefined","getFinalLineBreaksIndexes","skip","reduceRight","child","flattenAst","forEach","finalLinebreaksIndexes","setChildren","Bbcode"],"sources":["parser.bundle.js"],"mappings":"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"}